cscope 15 $HOME/School/CS_446/nautilus/src/rt/js               0001596779
	@config.h

1 
	~<Çutus/Çutus.h
>

2 
	~<Çutus/Çut_ty³s.h
>

3 
	~<Çutus/Çut_¡ršg.h
>

4 
	~<Çutus/libccom·t.h
>

7 
	#PRINT
(
fmt
, 
¬gs
...è
	`nk_vc_´štf
(fmt, ##¬gs)

	)

8 
	#PUTC
(
c
è
	`nk_vc_putch¬
(c)

	)

9 
	#´štf
 
PRINT


	)

10 
	#årštf
(
f
,
fmt
, 
¬gs
...è
	`PRINT
(fmt, ##¬gs)

	)

11 
	#_´štf
 
PRINT


	)

12 
	#_årštf
 
årštf


	)

13 
	#_putc
 
PUTC


	)

	@libregexp.c

25 
	~<Çutus/libccom·t.h
>

26 
	~<¹/js/cuts.h
>

27 
	~<¹/js/lib»gexp.h
>

41 #ià
defšed
(
TEST
)

42 
	#DUMP_REOP


	)

46 
	#DEF
(
id
, 
size
è
REOP_
 ## id,

	)

47 
	~<¹/js/lib»gexp-İcode.h
>

48 #undeà
DEF


49 
	mREOP_COUNT
,

50 } 
	tREOPCodeEnum
;

52 
	#CAPTURE_COUNT_MAX
 255

	)

53 
	#STACK_SIZE_MAX
 255

	)

56 
	#CP_LS
 0x2028

	)

57 
	#CP_PS
 0x2029

	)

59 
	#TMP_BUF_SIZE
 128

	)

62 
DynBuf
 
	mby‹_code
;

63 cÚ¡ 
ušt8_t
 *
	mbuf_±r
;

64 cÚ¡ 
ušt8_t
 *
	mbuf_’d
;

65 cÚ¡ 
ušt8_t
 *
	mbuf_¡¬t
;

66 
	m»_æags
;

67 
BOOL
 
	mis_utf16
;

68 
BOOL
 
	mignÜe_ÿ£
;

69 
BOOL
 
	mdÙ®l
;

70 
	mÿ±u»_couÁ
;

71 
	mtÙ®_ÿ±u»_couÁ
;

72 
	mhas_Çmed_ÿ±u»s
;

73 *
	mmem_İaque
;

74 
DynBuf
 
	mgroup_Çmes
;

76 
	m”rÜ_msg
[
TMP_BUF_SIZE
];

77 
	mtmp_buf
[
TMP_BUF_SIZE
];

78 } 
	mu
;

79 } 
	tREP¬£S‹
;

82 #ifdeà
DUMP_REOP


83 cÚ¡ *
	mÇme
;

85 
ušt8_t
 
	msize
;

86 } 
	tREOpCode
;

88 cÚ¡ 
REOpCode
 
	g»İcode_šfo
[
REOP_COUNT
] = {

89 #ifdeà
DUMP_REOP


90 
	#DEF
(
id
, 
size
è{ #id, siz},

	)

92 
	#DEF
(
id
, 
size
è{ siz},

	)

94 
	~<¹/js/lib»gexp-İcode.h
>

95 #undeà
DEF


98 
	#RE_HEADER_FLAGS
 0

	)

99 
	#RE_HEADER_CAPTURE_COUNT
 1

	)

100 
	#RE_HEADER_STACK_SIZE
 2

	)

102 
	#RE_HEADER_LEN
 7

	)

104 
šlše
 
	$is_dig™
(
c
) {

105  
c
 >= '0' && c <= '9';

106 
	}
}

109 
	$dbuf_š£¹
(
DynBuf
 *
s
, 
pos
, 
Ën
)

111 
	`dbuf_»®loc
(
s
, s->
size
 + 
Ën
);

112 
	`memmove
(
s
->
buf
 + 
pos
 + 
Ën
, s->buà+…os, s->
size
 -…os);

113 
s
->
size
 +ğ
Ën
;

114 
	}
}

117 
ušt32_t
 
	$Ìe_ÿnÚiÿlize
(
ušt32_t
 
c
, 
BOOL
 
is_utf16
)

119 
ušt32_t
 
»s
[
LRE_CC_RES_LEN_MAX
];

120 
Ën
;

121 ià(
is_utf16
) {

122 ià(
	`lik–y
(
c
 < 128)) {

123 ià(
c
 >= 'A' && c <= 'Z')

124 
c
 = c - 'A' + 'a';

126 
	`Ìe_ÿ£_cÚv
(
»s
, 
c
, 2);

127 
c
 = 
»s
[0];

130 ià(
	`lik–y
(
c
 < 128)) {

131 ià(
c
 >= 'a' && c <= 'z')

132 
c
 = c - 'a' + 'A';

135 
Ën
 = 
	`Ìe_ÿ£_cÚv
(
»s
, 
c
, 
FALSE
);

136 ià(
Ën
 =ğ1 && 
»s
[0] >= 128)

137 
c
 = 
»s
[0];

140  
c
;

141 
	}
}

143 cÚ¡ 
ušt16_t
 
	gch¬_¿nge_d
[] = {

149 cÚ¡ 
ušt16_t
 
	gch¬_¿nge_s
[] = {

166 
BOOL
 
	$Ìe_is_¥aû
(
c
)

168 
i
, 
n
, 
low
, 
high
;

169 
n
 = (
	`couÁof
(
ch¬_¿nge_s
) - 1) / 2;

170 
i
 = 0; i < 
n
; i++) {

171 
low
 = 
ch¬_¿nge_s
[2 * 
i
 + 1];

172 ià(
c
 < 
low
)

173  
FALSE
;

174 
high
 = 
ch¬_¿nge_s
[2 * 
i
 + 2];

175 ià(
c
 < 
high
)

176  
TRUE
;

178  
FALSE
;

179 
	}
}

181 
ušt32_t
 cÚ¡ 
	gÌe_id_¡¬t_bË_ascii
[4] = {

186 
ušt32_t
 cÚ¡ 
	gÌe_id_cÚtšue_bË_ascii
[4] = {

192 cÚ¡ 
ušt16_t
 
	gch¬_¿nge_w
[] = {

200 
	#CLASS_RANGE_BASE
 0x40000000

	)

203 
	mCHAR_RANGE_d
,

204 
	mCHAR_RANGE_D
,

205 
	mCHAR_RANGE_s
,

206 
	mCHAR_RANGE_S
,

207 
	mCHAR_RANGE_w
,

208 
	mCHAR_RANGE_W
,

209 } 
	tCh¬RªgeEnum
;

211 cÚ¡ 
ušt16_t
 *
	gch¬_¿nge_bË
[] = {

212 
ch¬_¿nge_d
,

213 
ch¬_¿nge_s
,

214 
ch¬_¿nge_w
,

217 
	$ü_š™_ch¬_¿nge
(
REP¬£S‹
 *
s
, 
Ch¬Rªge
 *
ü
, 
ušt32_t
 
c
)

219 
BOOL
 
šv”t
;

220 cÚ¡ 
ušt16_t
 *
c_±
;

221 
Ën
, 
i
;

223 
šv”t
 = 
c
 & 1;

224 
c_±
 = 
ch¬_¿nge_bË
[
c
 >> 1];

225 
Ën
 = *
c_±
++;

226 
	`ü_š™
(
ü
, 
s
->
mem_İaque
, 
Ìe_»®loc
);

227 
i
 = 0; i < 
Ën
 * 2; i++) {

228 ià(
	`ü_add_pošt
(
ü
, 
c_±
[
i
]))

229 
ç
;

231 ià(
šv”t
) {

232 ià(
	`ü_šv”t
(
ü
))

233 
ç
;

236 
ç
:

237 
	`ü_ä“
(
ü
);

239 
	}
}

241 
	$ü_ÿnÚiÿlize
(
Ch¬Rªge
 *
ü
)

243 
Ch¬Rªge
 
a
;

244 
ušt32_t
 
±
[2];

245 
i
, 
»t
;

247 
	`ü_š™
(&
a
, 
ü
->
mem_İaque
, 
Ìe_»®loc
);

248 
±
[0] = 'a';

249 
±
[1] = 'z' + 1;

250 
»t
 = 
	`ü_İ
(&
a
, 
ü
->
pošts
, cr->
Ën
, 
±
, 2, 
CR_OP_INTER
);

251 ià(
»t
)

252 
ç
;

256 
i
 = 0; i < 
a
.
Ën
; i++) {

257 
a
.
pošts
[
i
] += 'A' - 'a';

260 
»t
 = 
	`ü_uniÚ1
(
ü
, 
a
.
pošts
,‡.
Ën
);

261 
ç
:

262 
	`ü_ä“
(&
a
);

263  
»t
;

264 
	}
}

266 #ifdeà
DUMP_REOP


267 
__maybe_unu£d
 
	$Ìe_dump_by‹code
(cÚ¡ 
ušt8_t
 *
buf
,

268 
buf_Ën
)

270 
pos
, 
Ën
, 
İcode
, 
bc_Ën
, 
»_æags
, 
i
;

271 
ušt32_t
 
v®
;

273 
	`as£¹
(
buf_Ën
 >ğ
RE_HEADER_LEN
);

275 
»_æags
ğ
buf
[0];

276 
bc_Ën
 = 
	`g‘_u32
(
buf
 + 3);

277 
	`as£¹
(
bc_Ën
 + 
RE_HEADER_LEN
 <ğ
buf_Ën
);

278 
	`´štf
("flags: 0x%x capture_count=%d stack_size=%d\n",

279 
»_æags
, 
buf
[1], buf[2]);

280 ià(
»_æags
 & 
LRE_FLAG_NAMED_GROUPS
) {

281 cÚ¡ *
p
;

282 
p
 = (*)
buf
 + 
RE_HEADER_LEN
 + 
bc_Ën
;

283 
	`´štf
("named groups: ");

284 
i
 = 1; i < 
buf
[1]; i++) {

285 ià(
i
 != 1)

286 
	`´štf
(",");

287 
	`´štf
("<%s>", 
p
);

288 
p
 +ğ
	`¡¾’
(p) + 1;

290 
	`´štf
("\n");

291 
	`as£¹
(
p
 =ğ(*)(
buf
 + 
buf_Ën
));

293 
	`´štf
("by‹code_Ën=%d\n", 
bc_Ën
);

295 
buf
 +ğ
RE_HEADER_LEN
;

296 
pos
 = 0;

297 
pos
 < 
bc_Ën
) {

298 
	`´štf
("%5u: ", 
pos
);

299 
İcode
 = 
buf
[
pos
];

300 
Ën
 = 
»İcode_šfo
[
İcode
].
size
;

301 ià(
İcode
 >ğ
REOP_COUNT
) {

302 
	`´štf
(" inv®id opcode=0x%02x\n", 
İcode
);

305 ià((
pos
 + 
Ën
è> 
bc_Ën
) {

306 
	`´štf
(" bufã¸ov”æow (İcode=0x%02x)\n", 
İcode
);

309 
	`´štf
("%s", 
»İcode_šfo
[
İcode
].
Çme
);

310 
İcode
) {

311 
REOP_ch¬
:

312 
v®
 = 
	`g‘_u16
(
buf
 + 
pos
 + 1);

313 ià(
v®
 >= ' ' && val <= 126)

314 
	`´štf
(" '%c'", 
v®
);

316 
	`´štf
(" 0x%04x", 
v®
);

318 
REOP_ch¬32
:

319 
v®
 = 
	`g‘_u32
(
buf
 + 
pos
 + 1);

320 ià(
v®
 >= ' ' && val <= 126)

321 
	`´štf
(" '%c'", 
v®
);

323 
	`´štf
(" 0x%08x", 
v®
);

325 
REOP_gÙo
:

326 
REOP_¥l™_gÙo_fœ¡
:

327 
REOP_¥l™_Ãxt_fœ¡
:

328 
REOP_loİ
:

329 
REOP_lookah—d
:

330 
REOP_Ãg©ive_lookah—d
:

331 
REOP_bÃ_ch¬_pos
:

332 
v®
 = 
	`g‘_u32
(
buf
 + 
pos
 + 1);

333 
v®
 +ğ(
pos
 + 5);

334 
	`´štf
(" %u", 
v®
);

336 
REOP_sim¶e_g»edy_quªt
:

337 
	`´štf
(" %u %u %u %u",

338 
	`g‘_u32
(
buf
 + 
pos
 + 1) + (pos + 17),

339 
	`g‘_u32
(
buf
 + 
pos
 + 1 + 4),

340 
	`g‘_u32
(
buf
 + 
pos
 + 1 + 8),

341 
	`g‘_u32
(
buf
 + 
pos
 + 1 + 12));

343 
REOP_§ve_¡¬t
:

344 
REOP_§ve_’d
:

345 
REOP_back_»ã»nû
:

346 
REOP_backw¬d_back_»ã»nû
:

347 
	`´štf
(" %u", 
buf
[
pos
 + 1]);

349 
REOP_§ve_»£t
:

350 
	`´štf
(" %u %u", 
buf
[
pos
 + 1], buf[pos + 2]);

352 
REOP_push_i32
:

353 
v®
 = 
	`g‘_u32
(
buf
 + 
pos
 + 1);

354 
	`´štf
(" %d", 
v®
);

356 
REOP_¿nge
:

358 
n
, 
i
;

359 
n
 = 
	`g‘_u16
(
buf
 + 
pos
 + 1);

360 
Ën
 +ğ
n
 * 4;

361 
i
 = 0; i < 
n
 * 2; i++) {

362 
v®
 = 
	`g‘_u16
(
buf
 + 
pos
 + 3 + 
i
 * 2);

363 
	`´štf
(" 0x%04x", 
v®
);

367 
REOP_¿nge32
:

369 
n
, 
i
;

370 
n
 = 
	`g‘_u16
(
buf
 + 
pos
 + 1);

371 
Ën
 +ğ
n
 * 8;

372 
i
 = 0; i < 
n
 * 2; i++) {

373 
v®
 = 
	`g‘_u32
(
buf
 + 
pos
 + 3 + 
i
 * 4);

374 
	`´štf
(" 0x%08x", 
v®
);

381 
	`´štf
("\n");

382 
pos
 +ğ
Ën
;

384 
	}
}

387 
	$»_em™_İ
(
REP¬£S‹
 *
s
, 
İ
)

389 
	`dbuf_putc
(&
s
->
by‹_code
, 
İ
);

390 
	}
}

393 
	$»_em™_İ_u32
(
REP¬£S‹
 *
s
, 
İ
, 
ušt32_t
 
v®
)

395 
pos
;

396 
	`dbuf_putc
(&
s
->
by‹_code
, 
İ
);

397 
pos
 = 
s
->
by‹_code
.
size
;

398 
	`dbuf_put_u32
(&
s
->
by‹_code
, 
v®
);

399  
pos
;

400 
	}
}

402 
	$»_em™_gÙo
(
REP¬£S‹
 *
s
, 
İ
, 
ušt32_t
 
v®
)

404 
pos
;

405 
	`dbuf_putc
(&
s
->
by‹_code
, 
İ
);

406 
pos
 = 
s
->
by‹_code
.
size
;

407 
	`dbuf_put_u32
(&
s
->
by‹_code
, 
v®
 - (
pos
 + 4));

408  
pos
;

409 
	}
}

411 
	$»_em™_İ_u8
(
REP¬£S‹
 *
s
, 
İ
, 
ušt32_t
 
v®
)

413 
	`dbuf_putc
(&
s
->
by‹_code
, 
İ
);

414 
	`dbuf_putc
(&
s
->
by‹_code
, 
v®
);

415 
	}
}

417 
	$»_em™_İ_u16
(
REP¬£S‹
 *
s
, 
İ
, 
ušt32_t
 
v®
)

419 
	`dbuf_putc
(&
s
->
by‹_code
, 
İ
);

420 
	`dbuf_put_u16
(&
s
->
by‹_code
, 
v®
);

421 
	}
}

423 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$»_·r£_”rÜ
(
REP¬£S‹
 *
s
, cÚ¡ *
fmt
, ...)

425 
va_li¡
 
­
;

426 
	`va_¡¬t
(
­
, 
fmt
);

427 
	`v¢´štf
(
s
->
u
.
”rÜ_msg
, (s->u.”rÜ_msg), 
fmt
, 
­
);

428 
	`va_’d
(
­
);

430 
	}
}

434 
	$·r£_dig™s
(cÚ¡ 
ušt8_t
 **
µ
, 
BOOL
 
®low_ov”æow
)

436 cÚ¡ 
ušt8_t
 *
p
;

437 
ušt64_t
 
v
;

438 
c
;

440 
p
 = *
µ
;

441 
v
 = 0;

443 
c
 = *
p
;

444 ià(
c
 < '0' || c > '9')

446 
v
 = v * 10 + 
c
 - '0';

447 ià(
v
 >ğ
INT32_MAX
) {

448 ià(
®low_ov”æow
)

449 
v
 = 
INT32_MAX
;

453 
p
++;

455 *
µ
 = 
p
;

456  
v
;

457 
	}
}

459 
	$»_·r£_ex³ù
(
REP¬£S‹
 *
s
, cÚ¡ 
ušt8_t
 **
µ
, 
c
)

461 cÚ¡ 
ušt8_t
 *
p
;

462 
p
 = *
µ
;

463 ià(*
p
 !ğ
c
)

464  
	`»_·r£_”rÜ
(
s
, "ex³ùšg '%c'", 
c
);

465 
p
++;

466 *
µ
 = 
p
;

468 
	}
}

480 
	$Ìe_·r£_esÿ³
(cÚ¡ 
ušt8_t
 **
µ
, 
®low_utf16
)

482 cÚ¡ 
ušt8_t
 *
p
;

483 
ušt32_t
 
c
;

485 
p
 = *
µ
;

486 
c
 = *
p
++;

487 
c
) {

489 
c
 = '\b';

492 
c
 = '\f';

495 
c
 = '\n';

498 
c
 = '\r';

501 
c
 = '\t';

504 
c
 = '\v';

509 
h
, 
n
, 
i
;

510 
ušt32_t
 
c1
;

512 ià(*
p
 =ğ'{' && 
®low_utf16
) {

513 
p
++;

514 
c
 = 0;

516 
h
 = 
	`äom_hex
(*
p
++);

517 ià(
h
 < 0)

519 
c
 = (ø<< 4è| 
h
;

520 ià(
c
 > 0x10FFFF)

522 ià(*
p
 == '}')

525 
p
++;

527 ià(
c
 == 'x') {

528 
n
 = 2;

530 
n
 = 4;

533 
c
 = 0;

534 
i
 = 0; i < 
n
; i++) {

535 
h
 = 
	`äom_hex
(*
p
++);

536 ià(
h
 < 0) {

539 
c
 = (ø<< 4è| 
h
;

541 ià(
c
 >= 0xd800 && c < 0xdc00 &&

542 
®low_utf16
 =ğ2 && 
p
[0] == '\\' &&…[1] == 'u') {

545 
c1
 = 0;

546 
i
 = 0; i < 4; i++) {

547 
h
 = 
	`äom_hex
(
p
[2 + 
i
]);

548 ià(
h
 < 0)

550 
c1
 = (c1 << 4è| 
h
;

552 ià(
i
 =ğ4 && 
c1
 >= 0xdc00 && c1 < 0xe000) {

553 
p
 += 6;

554 
c
 = (((ø& 0x3ffè<< 10è| (
c1
 & 0x3ff)) + 0x10000;

561 
c
 -= '0';

562 ià(
®low_utf16
 == 2) {

564 ià(
c
 !ğ0 || 
	`is_dig™
(*
p
))

568 
ušt32_t
 
v
;

569 
v
 = *
p
 - '0';

570 ià(
v
 > 7)

572 
c
 = (ø<< 3è| 
v
;

573 
p
++;

574 ià(
c
 >= 32)

576 
v
 = *
p
 - '0';

577 ià(
v
 > 7)

579 
c
 = (ø<< 3è| 
v
;

580 
p
++;

586 *
µ
 = 
p
;

587  
c
;

588 
	}
}

590 #ifdeà
CONFIG_ALL_UNICODE


592 
BOOL
 
	$is_unicode_ch¬
(
c
)

594  ((
c
 >= '0' && c <= '9') ||

595 (
c
 >= 'A' && c <= 'Z') ||

596 (
c
 >= 'a' && c <= 'z') ||

597 (
c
 == '_'));

598 
	}
}

600 
	$·r£_unicode_´İ”ty
(
REP¬£S‹
 *
s
, 
Ch¬Rªge
 *
ü
,

601 cÚ¡ 
ušt8_t
 **
µ
, 
BOOL
 
is_šv
)

603 cÚ¡ 
ušt8_t
 *
p
;

604 
Çme
[64], 
v®ue
[64];

605 *
q
;

606 
BOOL
 
süt_ext
;

607 
»t
;

609 
p
 = *
µ
;

610 ià(*
p
 != '{')

611  
	`»_·r£_”rÜ
(
s
, "expecting '{'‡fter \\p");

612 
p
++;

613 
q
 = 
Çme
;

614 
	`is_unicode_ch¬
(*
p
)) {

615 ià((
q
 - 
Çme
) > (name) - 1)

616 
unknown_´İ”ty_Çme
;

617 *
q
++ = *
p
++;

619 *
q
 = '\0';

620 
q
 = 
v®ue
;

621 ià(*
p
 == '=') {

622 
p
++;

623 
	`is_unicode_ch¬
(*
p
)) {

624 ià((
q
 - 
v®ue
) > (value) - 1)

625  
	`»_·r£_”rÜ
(
s
, "unknown unicode…roperty value");

626 *
q
++ = *
p
++;

629 *
q
 = '\0';

630 ià(*
p
 != '}')

631  
	`»_·r£_”rÜ
(
s
, "expecting '}'");

632 
p
++;

635 ià(!
	`¡rcmp
(
Çme
, "Script") || !strcmp(name, "sc")) {

636 
süt_ext
 = 
FALSE
;

637 
do_süt
;

638 } ià(!
	`¡rcmp
(
Çme
, "Script_Extensions") || !strcmp(name, "scx")) {

639 
süt_ext
 = 
TRUE
;

640 
do_süt
:

641 
	`ü_š™
(
ü
, 
s
->
mem_İaque
, 
Ìe_»®loc
);

642 
»t
 = 
	`unicode_süt
(
ü
, 
v®ue
, 
süt_ext
);

643 ià(
»t
) {

644 
	`ü_ä“
(
ü
);

645 ià(
»t
 == -2)

646  
	`»_·r£_”rÜ
(
s
, "unknown unicode script");

648 
out_of_memÜy
;

650 } ià(!
	`¡rcmp
(
Çme
, "General_Category") || !strcmp(name, "gc")) {

651 
	`ü_š™
(
ü
, 
s
->
mem_İaque
, 
Ìe_»®loc
);

652 
»t
 = 
	`unicode_g’”®_ÿ‹gÜy
(
ü
, 
v®ue
);

653 ià(
»t
) {

654 
	`ü_ä“
(
ü
);

655 ià(
»t
 == -2)

656  
	`»_·r£_”rÜ
(
s
, "unknown unicode general category");

658 
out_of_memÜy
;

660 } ià(
v®ue
[0] == '\0') {

661 
	`ü_š™
(
ü
, 
s
->
mem_İaque
, 
Ìe_»®loc
);

662 
»t
 = 
	`unicode_g’”®_ÿ‹gÜy
(
ü
, 
Çme
);

663 ià(
»t
 == -1) {

664 
	`ü_ä“
(
ü
);

665 
out_of_memÜy
;

667 ià(
»t
 < 0) {

668 
»t
 = 
	`unicode_´İ
(
ü
, 
Çme
);

669 ià(
»t
) {

670 
	`ü_ä“
(
ü
);

671 ià(
»t
 == -2)

672 
unknown_´İ”ty_Çme
;

674 
out_of_memÜy
;

678 
unknown_´İ”ty_Çme
:

679  
	`»_·r£_”rÜ
(
s
, "unknown unicode…roperty‚ame");

682 ià(
is_šv
) {

683 ià(
	`ü_šv”t
(
ü
)) {

684 
	`ü_ä“
(
ü
);

688 *
µ
 = 
p
;

690 
out_of_memÜy
:

691  
	`»_·r£_”rÜ
(
s
, "out of memory");

692 
	}
}

698 
	$g‘_şass_©om
(
REP¬£S‹
 *
s
, 
Ch¬Rªge
 *
ü
,

699 cÚ¡ 
ušt8_t
 **
µ
, 
BOOL
 
šşass
)

701 cÚ¡ 
ušt8_t
 *
p
;

702 
ušt32_t
 
c
;

703 
»t
;

705 
p
 = *
µ
;

707 
c
 = *
p
;

708 
c
) {

710 
p
++;

711 ià(
p
 >ğ
s
->
buf_’d
)

712 
uÃx³ùed_’d
;

713 
c
 = *
p
++;

714 
c
) {

716 
c
 = 
CHAR_RANGE_d
;

717 
şass_¿nge
;

719 
c
 = 
CHAR_RANGE_D
;

720 
şass_¿nge
;

722 
c
 = 
CHAR_RANGE_s
;

723 
şass_¿nge
;

725 
c
 = 
CHAR_RANGE_S
;

726 
şass_¿nge
;

728 
c
 = 
CHAR_RANGE_w
;

729 
şass_¿nge
;

731 
c
 = 
CHAR_RANGE_W
;

732 
şass_¿nge
:

733 ià(
	`ü_š™_ch¬_¿nge
(
s
, 
ü
, 
c
))

735 
c
 = 
CLASS_RANGE_BASE
;

738 
c
 = *
p
;

739 ià((
c
 >= 'a' && c <= 'z') ||

740 (
c
 >= 'A' && c <= 'Z') ||

741 (((
c
 >= '0' && c <= '9') || c == '_') &&

742 
šşass
 && !
s
->
is_utf16
)) {

743 
c
 &= 0x1f;

744 
p
++;

745 } ià(
s
->
is_utf16
) {

746 
šv®id_esÿ³
;

749 
p
--;

750 
c
 = '\\';

753 #ifdeà
CONFIG_ALL_UNICODE


756 ià(
s
->
is_utf16
) {

757 ià(
	`·r£_unicode_´İ”ty
(
s
, 
ü
, &
p
, (
c
 == 'P')))

759 
c
 = 
CLASS_RANGE_BASE
;

765 
p
--;

766 
»t
 = 
	`Ìe_·r£_esÿ³
(&
p
, 
s
->
is_utf16
 * 2);

767 ià(
»t
 >= 0) {

768 
c
 = 
»t
;

770 ià(
»t
 =ğ-2 && *
p
 !ğ'\0' && 
	`¡rchr
("^$\\.*+?()[]{}|/", *p)) {

772 
nÜm®_ch¬
;

773 } ià(
s
->
is_utf16
) {

774 
šv®id_esÿ³
:

775  
	`»_·r£_”rÜ
(
s
, "invalidƒscape sequence in„egularƒxpression");

778 
nÜm®_ch¬
;

785 ià(
p
 >ğ
s
->
buf_’d
) {

786 
uÃx³ùed_’d
:

787  
	`»_·r£_”rÜ
(
s
, "unexpectedƒnd");

791 
nÜm®_ch¬
:

793 ià(
c
 >= 128) {

794 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &p);

795 ià(()
c
 > 0xfffà&& !
s
->
is_utf16
) {

797  
	`»_·r£_”rÜ
(
s
, "malformed unicode char");

800 
p
++;

804 *
µ
 = 
p
;

805  
c
;

806 
	}
}

808 
	$»_em™_¿nge
(
REP¬£S‹
 *
s
, cÚ¡ 
Ch¬Rªge
 *
ü
)

810 
Ën
, 
i
;

811 
ušt32_t
 
high
;

813 
Ën
 = ()
ü
->len / 2;

814 ià(
Ën
 >= 65535)

815  
	`»_·r£_”rÜ
(
s
, "too many„anges");

816 ià(
Ën
 == 0) {

819 
	`»_em™_İ_u32
(
s
, 
REOP_ch¬32
, -1);

821 
high
 = 
ü
->
pošts
[ü->
Ën
 - 1];

822 ià(
high
 =ğ
UINT32_MAX
)

823 
high
 = 
ü
->
pošts
[ü->
Ën
 - 2];

824 ià(
high
 <= 0xffff) {

827 
	`»_em™_İ_u16
(
s
, 
REOP_¿nge
, 
Ën
);

828 
i
 = 0; i < 
ü
->
Ën
; i += 2) {

829 
	`dbuf_put_u16
(&
s
->
by‹_code
, 
ü
->
pošts
[
i
]);

830 
high
 = 
ü
->
pošts
[
i
 + 1] - 1;

831 ià(
high
 =ğ
UINT32_MAX
 - 1)

832 
high
 = 0xffff;

833 
	`dbuf_put_u16
(&
s
->
by‹_code
, 
high
);

836 
	`»_em™_İ_u16
(
s
, 
REOP_¿nge32
, 
Ën
);

837 
i
 = 0; i < 
ü
->
Ën
; i += 2) {

838 
	`dbuf_put_u32
(&
s
->
by‹_code
, 
ü
->
pošts
[
i
]);

839 
	`dbuf_put_u32
(&
s
->
by‹_code
, 
ü
->
pošts
[
i
 + 1] - 1);

844 
	}
}

846 
	$»_·r£_ch¬_şass
(
REP¬£S‹
 *
s
, cÚ¡ 
ušt8_t
 **
µ
)

848 cÚ¡ 
ušt8_t
 *
p
;

849 
ušt32_t
 
c1
, 
c2
;

850 
Ch¬Rªge
 
ü_s
, *
ü
 = &cr_s;

851 
Ch¬Rªge
 
ü1_s
, *
ü1
 = &cr1_s;

852 
BOOL
 
šv”t
;

854 
	`ü_š™
(
ü
, 
s
->
mem_İaque
, 
Ìe_»®loc
);

855 
p
 = *
µ
;

856 
p
++;

857 
šv”t
 = 
FALSE
;

858 ià(*
p
 == '^') {

859 
p
++;

860 
šv”t
 = 
TRUE
;

863 ià(*
p
 == ']')

865 
c1
 = 
	`g‘_şass_©om
(
s
, 
ü1
, &
p
, 
TRUE
);

866 ià(()
c1
 < 0)

867 
ç
;

868 ià(*
p
 == '-' &&…[1] != ']') {

869 cÚ¡ 
ušt8_t
 *
p0
 = 
p
 + 1;

870 ià(
c1
 >ğ
CLASS_RANGE_BASE
) {

871 ià(
s
->
is_utf16
) {

872 
	`ü_ä“
(
ü1
);

873 
šv®id_şass_¿nge
;

876 
şass_©om
;

878 
c2
 = 
	`g‘_şass_©om
(
s
, 
ü1
, &
p0
, 
TRUE
);

879 ià(()
c2
 < 0)

880 
ç
;

881 ià(
c2
 >ğ
CLASS_RANGE_BASE
) {

882 
	`ü_ä“
(
ü1
);

883 ià(
s
->
is_utf16
) {

884 
šv®id_şass_¿nge
;

887 
şass_©om
;

889 
p
 = 
p0
;

890 ià(
c2
 < 
c1
) {

891 
šv®id_şass_¿nge
:

892 
	`»_·r£_”rÜ
(
s
, "invalid class„ange");

893 
ç
;

895 ià(
	`ü_uniÚ_š‹rv®
(
ü
, 
c1
, 
c2
))

896 
memÜy_”rÜ
;

898 
şass_©om
:

899 ià(
c1
 >ğ
CLASS_RANGE_BASE
) {

900 
»t
;

901 
»t
 = 
	`ü_uniÚ1
(
ü
, 
ü1
->
pošts
, cr1->
Ën
);

902 
	`ü_ä“
(
ü1
);

903 ià(
»t
)

904 
memÜy_”rÜ
;

906 ià(
	`ü_uniÚ_š‹rv®
(
ü
, 
c1
, c1))

907 
memÜy_”rÜ
;

911 ià(
s
->
ignÜe_ÿ£
) {

912 ià(
	`ü_ÿnÚiÿlize
(
ü
))

913 
memÜy_”rÜ
;

915 ià(
šv”t
) {

916 ià(
	`ü_šv”t
(
ü
))

917 
memÜy_”rÜ
;

919 ià(
	`»_em™_¿nge
(
s
, 
ü
))

920 
ç
;

921 
	`ü_ä“
(
ü
);

922 
p
++;

923 *
µ
 = 
p
;

925 
memÜy_”rÜ
:

926 
	`»_·r£_”rÜ
(
s
, "out of memory");

927 
ç
:

928 
	`ü_ä“
(
ü
);

930 
	}
}

937 
	$»_check_advªû
(cÚ¡ 
ušt8_t
 *
bc_buf
, 
bc_buf_Ën
)

939 
pos
, 
İcode
, 
»t
, 
Ën
, 
i
;

940 
ušt32_t
 
v®
, 
Ï¡
;

941 
BOOL
 
has_back_»ã»nû
;

942 
ušt8_t
 
ÿ±u»_b™m­
[
CAPTURE_COUNT_MAX
];

944 
»t
 = -2;

945 
pos
 = 0;

946 
has_back_»ã»nû
 = 
FALSE
;

947 
	`mem£t
(
ÿ±u»_b™m­
, 0, (capture_bitmap));

949 
pos
 < 
bc_buf_Ën
) {

950 
İcode
 = 
bc_buf
[
pos
];

951 
Ën
 = 
»İcode_šfo
[
İcode
].
size
;

952 
İcode
) {

953 
REOP_¿nge
:

954 
v®
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

955 
Ën
 +ğ
v®
 * 4;

956 
sim¶e_ch¬
;

957 
REOP_¿nge32
:

958 
v®
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

959 
Ën
 +ğ
v®
 * 8;

960 
sim¶e_ch¬
;

961 
REOP_ch¬
:

962 
REOP_ch¬32
:

963 
REOP_dÙ
:

964 
REOP_ªy
:

965 
sim¶e_ch¬
:

966 ià(
»t
 == -2)

967 
»t
 = 1;

969 
REOP_lše_¡¬t
:

970 
REOP_lše_’d
:

971 
REOP_push_i32
:

972 
REOP_push_ch¬_pos
:

973 
REOP_drİ
:

974 
REOP_wÜd_bound¬y
:

975 
REOP_nÙ_wÜd_bound¬y
:

976 
REOP_´ev
:

979 
REOP_§ve_¡¬t
:

980 
REOP_§ve_’d
:

981 
v®
 = 
bc_buf
[
pos
 + 1];

982 
ÿ±u»_b™m­
[
v®
] |= 1;

984 
REOP_§ve_»£t
:

986 
v®
 = 
bc_buf
[
pos
 + 1];

987 
Ï¡
 = 
bc_buf
[
pos
 + 2];

988 
v®
 < 
Ï¡
)

989 
ÿ±u»_b™m­
[
v®
++] |= 1;

992 
REOP_back_»ã»nû
:

993 
REOP_backw¬d_back_»ã»nû
:

994 
v®
 = 
bc_buf
[
pos
 + 1];

995 
ÿ±u»_b™m­
[
v®
] |= 2;

996 
has_back_»ã»nû
 = 
TRUE
;

1000 ià(
»t
 == -2)

1001 
»t
 = 0;

1004 
pos
 +ğ
Ën
;

1006 ià(
has_back_»ã»nû
) {

1009 
i
 = 0; i < 
CAPTURE_COUNT_MAX
; i++) {

1010 ià(
ÿ±u»_b™m­
[
i
] == 3)

1014 ià(
»t
 == -2)

1015 
»t
 = 0;

1016  
»t
;

1017 
	}
}

1021 
	$»_is_sim¶e_quªtif›r
(cÚ¡ 
ušt8_t
 *
bc_buf
, 
bc_buf_Ën
)

1023 
pos
, 
İcode
, 
Ën
, 
couÁ
;

1024 
ušt32_t
 
v®
;

1026 
couÁ
 = 0;

1027 
pos
 = 0;

1028 
pos
 < 
bc_buf_Ën
) {

1029 
İcode
 = 
bc_buf
[
pos
];

1030 
Ën
 = 
»İcode_šfo
[
İcode
].
size
;

1031 
İcode
) {

1032 
REOP_¿nge
:

1033 
v®
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

1034 
Ën
 +ğ
v®
 * 4;

1035 
sim¶e_ch¬
;

1036 
REOP_¿nge32
:

1037 
v®
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

1038 
Ën
 +ğ
v®
 * 8;

1039 
sim¶e_ch¬
;

1040 
REOP_ch¬
:

1041 
REOP_ch¬32
:

1042 
REOP_dÙ
:

1043 
REOP_ªy
:

1044 
sim¶e_ch¬
:

1045 
couÁ
++;

1047 
REOP_lše_¡¬t
:

1048 
REOP_lše_’d
:

1049 
REOP_wÜd_bound¬y
:

1050 
REOP_nÙ_wÜd_bound¬y
:

1055 
pos
 +ğ
Ën
;

1057  
couÁ
;

1058 
	}
}

1061 
	$»_·r£_group_Çme
(*
buf
, 
buf_size
,

1062 cÚ¡ 
ušt8_t
 **
µ
, 
BOOL
 
is_utf16
)

1064 cÚ¡ 
ušt8_t
 *
p
;

1065 
ušt32_t
 
c
;

1066 *
q
;

1068 
p
 = *
µ
;

1069 
q
 = 
buf
;

1071 
c
 = *
p
;

1072 ià(
c
 == '\\') {

1073 
p
++;

1074 ià(*
p
 != 'u')

1076 
c
 = 
	`Ìe_·r£_esÿ³
(&
p
, 
is_utf16
 * 2);

1077 } ià(
c
 == '>') {

1079 } ià(
c
 >= 128) {

1080 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &p);

1082 
p
++;

1084 ià(
c
 > 0x10FFFF)

1086 ià(
q
 =ğ
buf
) {

1087 ià(!
	`Ìe_js_is_id’t_fœ¡
(
c
))

1090 ià(!
	`Ìe_js_is_id’t_Ãxt
(
c
))

1093 ià((
q
 - 
buf
 + 
UTF8_CHAR_LEN_MAX
 + 1è> 
buf_size
)

1095 ià(
c
 < 128) {

1096 *
q
++ = 
c
;

1098 
q
 +ğ
	`unicode_to_utf8
((
ušt8_t
*)q, 
c
);

1101 ià(
q
 =ğ
buf
)

1103 *
q
 = '\0';

1104 
p
++;

1105 *
µ
 = 
p
;

1107 
	}
}

1112 
	$»_·r£_ÿ±u»s
(
REP¬£S‹
 *
s
, *
phas_Çmed_ÿ±u»s
,

1113 cÚ¡ *
ÿ±u»_Çme
)

1115 cÚ¡ 
ušt8_t
 *
p
;

1116 
ÿ±u»_šdex
;

1117 
Çme
[
TMP_BUF_SIZE
];

1119 
ÿ±u»_šdex
 = 1;

1120 *
phas_Çmed_ÿ±u»s
 = 0;

1121 
p
 = 
s
->
buf_¡¬t
;… < s->
buf_’d
;…++) {

1122 *
p
) {

1124 ià(
p
[1] == '?') {

1125 ià(
p
[2] == '<' &&…[3] != '=' &&…[3] != '!') {

1126 *
phas_Çmed_ÿ±u»s
 = 1;

1128 ià(
ÿ±u»_Çme
) {

1129 
p
 += 3;

1130 ià(
	`»_·r£_group_Çme
(
Çme
, Òame), &
p
,

1131 
s
->
is_utf16
) == 0) {

1132 ià(!
	`¡rcmp
(
Çme
, 
ÿ±u»_Çme
))

1133  
ÿ±u»_šdex
;

1136 
ÿ±u»_šdex
++;

1139 
ÿ±u»_šdex
++;

1143 
p
++;

1146 
p
 +ğ1 + (*°=ğ']');… < 
s
->
buf_’d
 && *p != ']';…++) {

1147 ià(*
p
 == '\\')

1148 
p
++;

1153 ià(
ÿ±u»_Çme
)

1156  
ÿ±u»_šdex
;

1157 
	}
}

1159 
	$»_couÁ_ÿ±u»s
(
REP¬£S‹
 *
s
)

1161 ià(
s
->
tÙ®_ÿ±u»_couÁ
 < 0) {

1162 
s
->
tÙ®_ÿ±u»_couÁ
 = 
	`»_·r£_ÿ±u»s
(s, &s->
has_Çmed_ÿ±u»s
,

1163 
NULL
);

1165  
s
->
tÙ®_ÿ±u»_couÁ
;

1166 
	}
}

1168 
BOOL
 
	$»_has_Çmed_ÿ±u»s
(
REP¬£S‹
 *
s
)

1170 ià(
s
->
has_Çmed_ÿ±u»s
 < 0)

1171 
	`»_couÁ_ÿ±u»s
(
s
);

1172  
s
->
has_Çmed_ÿ±u»s
;

1173 
	}
}

1175 
	$fšd_group_Çme
(
REP¬£S‹
 *
s
, cÚ¡ *
Çme
)

1177 cÚ¡ *
p
, *
buf_’d
;

1178 
size_t
 
Ën
, 
Çme_Ën
;

1179 
ÿ±u»_šdex
;

1181 
Çme_Ën
 = 
	`¡¾’
(
Çme
);

1182 
p
 = (*)
s
->
group_Çmes
.
buf
;

1183 
buf_’d
 = (*)
s
->
group_Çmes
.
buf
 + s->group_Çmes.
size
;

1184 
ÿ±u»_šdex
 = 1;

1185 
p
 < 
buf_’d
) {

1186 
Ën
 = 
	`¡¾’
(
p
);

1187 ià(
Ën
 =ğ
Çme_Ën
 && 
	`memcmp
(
Çme
, 
p
,‚ame_len) == 0)

1188  
ÿ±u»_šdex
;

1189 
p
 +ğ
Ën
 + 1;

1190 
ÿ±u»_šdex
++;

1193 
	}
}

1195 
»_·r£_disjunùiÚ
(
REP¬£S‹
 *
s
, 
BOOL
 
is_backw¬d_dœ
);

1197 
	$»_·r£_‹rm
(
REP¬£S‹
 *
s
, 
BOOL
 
is_backw¬d_dœ
)

1199 cÚ¡ 
ušt8_t
 *
p
;

1200 
c
, 
Ï¡_©om_¡¬t
, 
quªt_mš
, 
quªt_max
, 
Ï¡_ÿ±u»_couÁ
;

1201 
BOOL
 
g»edy
, 
add_z”o_advªû_check
, 
is_Ãg
, 
is_backw¬d_lookah—d
;

1202 
Ch¬Rªge
 
ü_s
, *
ü
 = &cr_s;

1204 
Ï¡_©om_¡¬t
 = -1;

1205 
Ï¡_ÿ±u»_couÁ
 = 0;

1206 
p
 = 
s
->
buf_±r
;

1207 
c
 = *
p
;

1208 
c
) {

1210 
p
++;

1211 
	`»_em™_İ
(
s
, 
REOP_lše_¡¬t
);

1214 
p
++;

1215 
	`»_em™_İ
(
s
, 
REOP_lše_’d
);

1218 
p
++;

1219 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1220 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1221 ià(
is_backw¬d_dœ
)

1222 
	`»_em™_İ
(
s
, 
REOP_´ev
);

1223 
	`»_em™_İ
(
s
, s->
dÙ®l
 ? 
REOP_ªy
 : 
REOP_dÙ
);

1224 ià(
is_backw¬d_dœ
)

1225 
	`»_em™_İ
(
s
, 
REOP_´ev
);

1228 ià(
s
->
is_utf16
) {

1229  
	`»_·r£_”rÜ
(
s
, "syntaxƒrror");

1230 } ià(!
	`is_dig™
(
p
[1])) {

1233 
·r£_şass_©om
;

1235 cÚ¡ 
ušt8_t
 *
p1
 = 
p
 + 1;

1237 
	`·r£_dig™s
(&
p1
, 
TRUE
);

1238 ià(*
p1
 == ',') {

1239 
p1
++;

1240 ià(
	`is_dig™
(*
p1
)) {

1241 
	`·r£_dig™s
(&
p1
, 
TRUE
);

1244 ià(*
p1
 != '}') {

1245 
·r£_şass_©om
;

1252  
	`»_·r£_”rÜ
(
s
, "nothingo„epeat");

1254 ià(
p
[1] == '?') {

1255 ià(
p
[2] == ':') {

1256 
p
 += 3;

1257 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1258 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1259 
s
->
buf_±r
 = 
p
;

1260 ià(
	`»_·r£_disjunùiÚ
(
s
, 
is_backw¬d_dœ
))

1262 
p
 = 
s
->
buf_±r
;

1263 ià(
	`»_·r£_ex³ù
(
s
, &
p
, ')'))

1265 } ià((
p
[2] == '=' ||…[2] == '!')) {

1266 
is_Ãg
 = (
p
[2] == '!');

1267 
is_backw¬d_lookah—d
 = 
FALSE
;

1268 
p
 += 3;

1269 
lookah—d
;

1270 } ià(
p
[2] == '<' &&

1271 (
p
[3] == '=' ||…[3] == '!')) {

1272 
pos
;

1273 
is_Ãg
 = (
p
[3] == '!');

1274 
is_backw¬d_lookah—d
 = 
TRUE
;

1275 
p
 += 4;

1277 
lookah—d
:

1280 ià(!
s
->
is_utf16
 && !
is_backw¬d_lookah—d
) {

1281 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1282 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1284 
pos
 = 
	`»_em™_İ_u32
(
s
, 
REOP_lookah—d
 + 
is_Ãg
, 0);

1285 
s
->
buf_±r
 = 
p
;

1286 ià(
	`»_·r£_disjunùiÚ
(
s
, 
is_backw¬d_lookah—d
))

1288 
p
 = 
s
->
buf_±r
;

1289 ià(
	`»_·r£_ex³ù
(
s
, &
p
, ')'))

1291 
	`»_em™_İ
(
s
, 
REOP_m©ch
);

1293 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
pos
, s->by‹_code.
size
 - (pos + 4));

1294 } ià(
p
[2] == '<') {

1295 
p
 += 3;

1296 ià(
	`»_·r£_group_Çme
(
s
->
u
.
tmp_buf
, (s->u.tmp_buf),

1297 &
p
, 
s
->
is_utf16
)) {

1298  
	`»_·r£_”rÜ
(
s
, "invalid group‚ame");

1300 ià(
	`fšd_group_Çme
(
s
, s->
u
.
tmp_buf
) > 0) {

1301  
	`»_·r£_”rÜ
(
s
, "duplicate group‚ame");

1304 
	`dbuf_put
(&
s
->
group_Çmes
, (
ušt8_t
 *)s->
u
.
tmp_buf
,

1305 
	`¡¾’
(
s
->
u
.
tmp_buf
) + 1);

1306 
s
->
has_Çmed_ÿ±u»s
 = 1;

1307 
·r£_ÿ±u»
;

1309  
	`»_·r£_”rÜ
(
s
, "invalid group");

1312 
ÿ±u»_šdex
;

1313 
p
++;

1315 
	`dbuf_putc
(&
s
->
group_Çmes
, 0);

1316 
·r£_ÿ±u»
:

1317 ià(
s
->
ÿ±u»_couÁ
 >ğ
CAPTURE_COUNT_MAX
)

1318  
	`»_·r£_”rÜ
(
s
, "too many captures");

1319 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1320 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1321 
ÿ±u»_šdex
 = 
s
->
ÿ±u»_couÁ
++;

1322 
	`»_em™_İ_u8
(
s
, 
REOP_§ve_¡¬t
 + 
is_backw¬d_dœ
,

1323 
ÿ±u»_šdex
);

1325 
s
->
buf_±r
 = 
p
;

1326 ià(
	`»_·r£_disjunùiÚ
(
s
, 
is_backw¬d_dœ
))

1328 
p
 = 
s
->
buf_±r
;

1330 
	`»_em™_İ_u8
(
s
, 
REOP_§ve_¡¬t
 + 1 - 
is_backw¬d_dœ
,

1331 
ÿ±u»_šdex
);

1333 ià(
	`»_·r£_ex³ù
(
s
, &
p
, ')'))

1338 
p
[1]) {

1341 
	`»_em™_İ
(
s
, 
REOP_wÜd_bound¬y
 + (
p
[1] != 'b'));

1342 
p
 += 2;

1346 cÚ¡ 
ušt8_t
 *
p1
;

1347 
dummy_»s
;

1349 
p1
 = 
p
;

1350 ià(
p1
[2] != '<') {

1354 ià(
s
->
is_utf16
 || 
	`»_has_Çmed_ÿ±u»s
(s))

1355  
	`»_·r£_”rÜ
(
s
, "expecting group‚ame");

1357 
·r£_şass_©om
;

1359 
p1
 += 3;

1360 ià(
	`»_·r£_group_Çme
(
s
->
u
.
tmp_buf
, (s->u.tmp_buf),

1361 &
p1
, 
s
->
is_utf16
)) {

1362 ià(
s
->
is_utf16
 || 
	`»_has_Çmed_ÿ±u»s
(s))

1363  
	`»_·r£_”rÜ
(
s
, "invalid group‚ame");

1365 
·r£_şass_©om
;

1367 
c
 = 
	`fšd_group_Çme
(
s
, s->
u
.
tmp_buf
);

1368 ià(
c
 < 0) {

1371 
c
 = 
	`»_·r£_ÿ±u»s
(
s
, &
dummy_»s
, s->
u
.
tmp_buf
);

1372 ià(
c
 < 0) {

1373 ià(
s
->
is_utf16
 || 
	`»_has_Çmed_ÿ±u»s
(s))

1374  
	`»_·r£_”rÜ
(
s
, "group‚ame‚ot defined");

1376 
·r£_şass_©om
;

1379 
p
 = 
p1
;

1381 
em™_back_»ã»nû
;

1383 
p
 += 2;

1384 
c
 = 0;

1385 ià(
s
->
is_utf16
) {

1386 ià(
	`is_dig™
(*
p
)) {

1387  
	`»_·r£_”rÜ
(
s
, "invalid decimalƒscape in„egularƒxpression");

1391 ià(*
p
 >= '0' && *p <= '7') {

1392 
c
 = *
p
++ - '0';

1393 ià(*
p
 >= '0' && *p <= '7') {

1394 
c
 = (ø<< 3è+ *
p
++ - '0';

1398 
nÜm®_ch¬
;

1401 cÚ¡ 
ušt8_t
 *
q
 = ++
p
;

1403 
c
 = 
	`·r£_dig™s
(&
p
, 
FALSE
);

1404 ià(
c
 < 0 || (ø>ğ
s
->
ÿ±u»_couÁ
 && c >ğ
	`»_couÁ_ÿ±u»s
(s))) {

1405 ià(!
s
->
is_utf16
) {

1407 
p
 = 
q
;

1408 ià(*
p
 <= '7') {

1409 
c
 = 0;

1410 ià(*
p
 <= '3')

1411 
c
 = *
p
++ - '0';

1412 ià(*
p
 >= '0' && *p <= '7') {

1413 
c
 = (ø<< 3è+ *
p
++ - '0';

1414 ià(*
p
 >= '0' && *p <= '7') {

1415 
c
 = (ø<< 3è+ *
p
++ - '0';

1419 
c
 = *
p
++;

1421 
nÜm®_ch¬
;

1423  
	`»_·r£_”rÜ
(
s
, "back„eference out of„ange in„eguarƒxpression");

1425 
em™_back_»ã»nû
:

1426 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1427 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1428 
	`»_em™_İ_u8
(
s
, 
REOP_back_»ã»nû
 + 
is_backw¬d_dœ
, 
c
);

1432 
·r£_şass_©om
;

1436 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1437 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1438 ià(
is_backw¬d_dœ
)

1439 
	`»_em™_İ
(
s
, 
REOP_´ev
);

1440 ià(
	`»_·r£_ch¬_şass
(
s
, &
p
))

1442 ià(
is_backw¬d_dœ
)

1443 
	`»_em™_İ
(
s
, 
REOP_´ev
);

1447 ià(
s
->
is_utf16
)

1448  
	`»_·r£_”rÜ
(
s
, "syntaxƒrror");

1449 
·r£_şass_©om
;

1451 
·r£_şass_©om
:

1452 
c
 = 
	`g‘_şass_©om
(
s
, 
ü
, &
p
, 
FALSE
);

1453 ià(()
c
 < 0)

1455 
nÜm®_ch¬
:

1456 
Ï¡_©om_¡¬t
 = 
s
->
by‹_code
.
size
;

1457 
Ï¡_ÿ±u»_couÁ
 = 
s
->
ÿ±u»_couÁ
;

1458 ià(
is_backw¬d_dœ
)

1459 
	`»_em™_İ
(
s
, 
REOP_´ev
);

1460 ià(
c
 >ğ
CLASS_RANGE_BASE
) {

1461 
»t
;

1463 
»t
 = 
	`»_em™_¿nge
(
s
, 
ü
);

1464 
	`ü_ä“
(
ü
);

1465 ià(
»t
)

1468 ià(
s
->
ignÜe_ÿ£
)

1469 
c
 = 
	`Ìe_ÿnÚiÿlize
(c, 
s
->
is_utf16
);

1470 ià(
c
 <= 0xffff)

1471 
	`»_em™_İ_u16
(
s
, 
REOP_ch¬
, 
c
);

1473 
	`»_em™_İ_u32
(
s
, 
REOP_ch¬32
, 
c
);

1475 ià(
is_backw¬d_dœ
)

1476 
	`»_em™_İ
(
s
, 
REOP_´ev
);

1481 ià(
Ï¡_©om_¡¬t
 >= 0) {

1482 
c
 = *
p
;

1483 
c
) {

1485 
p
++;

1486 
quªt_mš
 = 0;

1487 
quªt_max
 = 
INT32_MAX
;

1488 
quªtif›r
;

1490 
p
++;

1491 
quªt_mš
 = 1;

1492 
quªt_max
 = 
INT32_MAX
;

1493 
quªtif›r
;

1495 
p
++;

1496 
quªt_mš
 = 0;

1497 
quªt_max
 = 1;

1498 
quªtif›r
;

1501 cÚ¡ 
ušt8_t
 *
p1
 = 
p
;

1504 ià(!
	`is_dig™
(
p
[1])) {

1505 ià(
s
->
is_utf16
)

1506 
šv®id_quªt_couÁ
;

1509 
p
++;

1510 
quªt_mš
 = 
	`·r£_dig™s
(&
p
, 
TRUE
);

1511 
quªt_max
 = 
quªt_mš
;

1512 ià(*
p
 == ',') {

1513 
p
++;

1514 ià(
	`is_dig™
(*
p
)) {

1515 
quªt_max
 = 
	`·r£_dig™s
(&
p
, 
TRUE
);

1516 ià(
quªt_max
 < 
quªt_mš
) {

1517 
šv®id_quªt_couÁ
:

1518  
	`»_·r£_”rÜ
(
s
, "invalid„epetition count");

1521 
quªt_max
 = 
INT32_MAX
;

1524 ià(*
p
 !ğ'}' && !
s
->
is_utf16
) {

1526 
p
 = 
p1
;

1529 ià(
	`»_·r£_ex³ù
(
s
, &
p
, '}'))

1532 
quªtif›r
:

1533 
g»edy
 = 
TRUE
;

1534 ià(*
p
 == '?') {

1535 
p
++;

1536 
g»edy
 = 
FALSE
;

1538 ià(
Ï¡_©om_¡¬t
 < 0) {

1539  
	`»_·r£_”rÜ
(
s
, "nothingo„epeat");

1541 ià(
g»edy
) {

1542 
Ën
, 
pos
;

1544 ià(
quªt_max
 > 0) {

1546 
Ën
 = 
	`»_is_sim¶e_quªtif›r
(
s
->
by‹_code
.
buf
 + 
Ï¡_©om_¡¬t
,

1547 
s
->
by‹_code
.
size
 - 
Ï¡_©om_¡¬t
);

1548 ià(
Ën
 > 0) {

1549 
	`»_em™_İ
(
s
, 
REOP_m©ch
);

1551 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 17);

1552 
pos
 = 
Ï¡_©om_¡¬t
;

1553 
s
->
by‹_code
.
buf
[
pos
++] = 
REOP_sim¶e_g»edy_quªt
;

1554 
	`put_u32
(&
s
->
by‹_code
.
buf
[
pos
],

1555 
s
->
by‹_code
.
size
 - 
Ï¡_©om_¡¬t
 - 17);

1556 
pos
 += 4;

1557 
	`put_u32
(&
s
->
by‹_code
.
buf
[
pos
], 
quªt_mš
);

1558 
pos
 += 4;

1559 
	`put_u32
(&
s
->
by‹_code
.
buf
[
pos
], 
quªt_max
);

1560 
pos
 += 4;

1561 
	`put_u32
(&
s
->
by‹_code
.
buf
[
pos
], 
Ën
);

1562 
pos
 += 4;

1563 
dÚe
;

1567 
add_z”o_advªû_check
 = (
	`»_check_advªû
(
s
->
by‹_code
.
buf
 + 
Ï¡_©om_¡¬t
,

1568 
s
->
by‹_code
.
size
 - 
Ï¡_©om_¡¬t
) == 0);

1570 
add_z”o_advªû_check
 = 
FALSE
;

1574 
Ën
, 
pos
;

1575 
Ën
 = 
s
->
by‹_code
.
size
 - 
Ï¡_©om_¡¬t
;

1576 ià(
quªt_mš
 == 0) {

1579 ià(
Ï¡_ÿ±u»_couÁ
 !ğ
s
->
ÿ±u»_couÁ
) {

1580 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 3);

1581 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
++] = 
REOP_§ve_»£t
;

1582 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
++] = 
Ï¡_ÿ±u»_couÁ
;

1583 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
++] = s->
ÿ±u»_couÁ
 - 1;

1585 ià(
quªt_max
 == 0) {

1586 
s
->
by‹_code
.
size
 = 
Ï¡_©om_¡¬t
;

1587 } ià(
quªt_max
 == 1) {

1588 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 5);

1589 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
] = 
REOP_¥l™_gÙo_fœ¡
 +

1590 
g»edy
;

1591 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
Ï¡_©om_¡¬t
 + 1, 
Ën
);

1592 } ià(
quªt_max
 =ğ
INT32_MAX
) {

1593 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 5 + 
add_z”o_advªû_check
);

1594 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
] = 
REOP_¥l™_gÙo_fœ¡
 +

1595 
g»edy
;

1596 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
Ï¡_©om_¡¬t
 + 1,

1597 
Ën
 + 5 + 
add_z”o_advªû_check
);

1598 ià(
add_z”o_advªû_check
) {

1603 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
 + 1 + 4] = 
REOP_push_ch¬_pos
;

1604 
	`»_em™_gÙo
(
s
, 
REOP_bÃ_ch¬_pos
, 
Ï¡_©om_¡¬t
);

1606 
	`»_em™_gÙo
(
s
, 
REOP_gÙo
, 
Ï¡_©om_¡¬t
);

1609 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 10);

1610 
pos
 = 
Ï¡_©om_¡¬t
;

1611 
s
->
by‹_code
.
buf
[
pos
++] = 
REOP_push_i32
;

1612 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
pos
, 
quªt_max
);

1613 
pos
 += 4;

1614 
s
->
by‹_code
.
buf
[
pos
++] = 
REOP_¥l™_gÙo_fœ¡
 + 
g»edy
;

1615 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
pos
, 
Ën
 + 5);

1616 
	`»_em™_gÙo
(
s
, 
REOP_loİ
, 
Ï¡_©om_¡¬t
 + 5);

1617 
	`»_em™_İ
(
s
, 
REOP_drİ
);

1619 } ià(
quªt_mš
 =ğ1 && 
quªt_max
 =ğ
INT32_MAX
 &&

1620 !
add_z”o_advªû_check
) {

1621 
	`»_em™_gÙo
(
s
, 
REOP_¥l™_Ãxt_fœ¡
 - 
g»edy
,

1622 
Ï¡_©om_¡¬t
);

1624 ià(
quªt_mš
 == 1) {

1627 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 5);

1628 
s
->
by‹_code
.
buf
[
Ï¡_©om_¡¬t
] = 
REOP_push_i32
;

1629 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
Ï¡_©om_¡¬t
 + 1,

1630 
quªt_mš
);

1631 
Ï¡_©om_¡¬t
 += 5;

1632 
	`»_em™_gÙo
(
s
, 
REOP_loİ
, 
Ï¡_©om_¡¬t
);

1633 
	`»_em™_İ
(
s
, 
REOP_drİ
);

1635 ià(
quªt_max
 =ğ
INT32_MAX
) {

1636 
pos
 = 
s
->
by‹_code
.
size
;

1637 
	`»_em™_İ_u32
(
s
, 
REOP_¥l™_gÙo_fœ¡
 + 
g»edy
,

1638 
Ën
 + 5 + 
add_z”o_advªû_check
);

1639 ià(
add_z”o_advªû_check
)

1640 
	`»_em™_İ
(
s
, 
REOP_push_ch¬_pos
);

1642 
	`dbuf_put_£lf
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 
Ën
);

1643 ià(
add_z”o_advªû_check
)

1644 
	`»_em™_gÙo
(
s
, 
REOP_bÃ_ch¬_pos
, 
pos
);

1646 
	`»_em™_gÙo
(
s
, 
REOP_gÙo
, 
pos
);

1647 } ià(
quªt_max
 > 
quªt_mš
) {

1648 
	`»_em™_İ_u32
(
s
, 
REOP_push_i32
, 
quªt_max
 - 
quªt_mš
);

1649 
pos
 = 
s
->
by‹_code
.
size
;

1650 
	`»_em™_İ_u32
(
s
, 
REOP_¥l™_gÙo_fœ¡
 + 
g»edy
, 
Ën
 + 5);

1652 
	`dbuf_put_£lf
(&
s
->
by‹_code
, 
Ï¡_©om_¡¬t
, 
Ën
);

1654 
	`»_em™_gÙo
(
s
, 
REOP_loİ
, 
pos
);

1655 
	`»_em™_İ
(
s
, 
REOP_drİ
);

1658 
Ï¡_©om_¡¬t
 = -1;

1665 
dÚe
:

1666 
s
->
buf_±r
 = 
p
;

1668 
	}
}

1670 
	$»_·r£_®‹º©ive
(
REP¬£S‹
 *
s
, 
BOOL
 
is_backw¬d_dœ
)

1672 cÚ¡ 
ušt8_t
 *
p
;

1673 
»t
;

1674 
size_t
 
¡¬t
, 
‹rm_¡¬t
, 
’d
, 
‹rm_size
;

1676 
¡¬t
 = 
s
->
by‹_code
.
size
;

1678 
p
 = 
s
->
buf_±r
;

1679 ià(
p
 >ğ
s
->
buf_’d
)

1681 ià(*
p
 == '|' || *p == ')')

1683 
‹rm_¡¬t
 = 
s
->
by‹_code
.
size
;

1684 
»t
 = 
	`»_·r£_‹rm
(
s
, 
is_backw¬d_dœ
);

1685 ià(
»t
)

1686  
»t
;

1687 ià(
is_backw¬d_dœ
) {

1690 
’d
 = 
s
->
by‹_code
.
size
;

1691 
‹rm_size
 = 
’d
 - 
‹rm_¡¬t
;

1692 ià(
	`dbuf_»®loc
(&
s
->
by‹_code
, 
’d
 + 
‹rm_size
))

1694 
	`memmove
(
s
->
by‹_code
.
buf
 + 
¡¬t
 + 
‹rm_size
,

1695 
s
->
by‹_code
.
buf
 + 
¡¬t
,

1696 
’d
 - 
¡¬t
);

1697 
	`memıy
(
s
->
by‹_code
.
buf
 + 
¡¬t
, s->by‹_code.buà+ 
’d
,

1698 
‹rm_size
);

1702 
	}
}

1704 
	$»_·r£_disjunùiÚ
(
REP¬£S‹
 *
s
, 
BOOL
 
is_backw¬d_dœ
)

1706 
¡¬t
, 
Ën
, 
pos
;

1708 
¡¬t
 = 
s
->
by‹_code
.
size
;

1709 ià(
	`»_·r£_®‹º©ive
(
s
, 
is_backw¬d_dœ
))

1711 *
s
->
buf_±r
 == '|') {

1712 
s
->
buf_±r
++;

1714 
Ën
 = 
s
->
by‹_code
.
size
 - 
¡¬t
;

1717 
	`dbuf_š£¹
(&
s
->
by‹_code
, 
¡¬t
, 5);

1718 
s
->
by‹_code
.
buf
[
¡¬t
] = 
REOP_¥l™_Ãxt_fœ¡
;

1719 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
¡¬t
 + 1, 
Ën
 + 5);

1721 
pos
 = 
	`»_em™_İ_u32
(
s
, 
REOP_gÙo
, 0);

1723 ià(
	`»_·r£_®‹º©ive
(
s
, 
is_backw¬d_dœ
))

1727 
Ën
 = 
s
->
by‹_code
.
size
 - (
pos
 + 4);

1728 
	`put_u32
(
s
->
by‹_code
.
buf
 + 
pos
, 
Ën
);

1731 
	}
}

1734 
	$compu‹_¡ack_size
(cÚ¡ 
ušt8_t
 *
bc_buf
, 
bc_buf_Ën
)

1736 
¡ack_size
, 
¡ack_size_max
, 
pos
, 
İcode
, 
Ën
;

1737 
ušt32_t
 
v®
;

1739 
¡ack_size
 = 0;

1740 
¡ack_size_max
 = 0;

1741 
bc_buf
 +ğ
RE_HEADER_LEN
;

1742 
bc_buf_Ën
 -ğ
RE_HEADER_LEN
;

1743 
pos
 = 0;

1744 
pos
 < 
bc_buf_Ën
) {

1745 
İcode
 = 
bc_buf
[
pos
];

1746 
Ën
 = 
»İcode_šfo
[
İcode
].
size
;

1747 
	`as£¹
(
İcode
 < 
REOP_COUNT
);

1748 
	`as£¹
((
pos
 + 
Ën
è<ğ
bc_buf_Ën
);

1749 
İcode
) {

1750 
REOP_push_i32
:

1751 
REOP_push_ch¬_pos
:

1752 
¡ack_size
++;

1753 ià(
¡ack_size
 > 
¡ack_size_max
) {

1754 ià(
¡ack_size
 > 
STACK_SIZE_MAX
)

1756 
¡ack_size_max
 = 
¡ack_size
;

1759 
REOP_drİ
:

1760 
REOP_bÃ_ch¬_pos
:

1761 
	`as£¹
(
¡ack_size
 > 0);

1762 
¡ack_size
--;

1764 
REOP_¿nge
:

1765 
v®
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

1766 
Ën
 +ğ
v®
 * 4;

1768 
REOP_¿nge32
:

1769 
v®
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

1770 
Ën
 +ğ
v®
 * 8;

1773 
pos
 +ğ
Ën
;

1775  
¡ack_size_max
;

1776 
	}
}

1782 
ušt8_t
 *
	$Ìe_compe
(*
¶’
, *
”rÜ_msg
, 
”rÜ_msg_size
,

1783 cÚ¡ *
buf
, 
size_t
 
buf_Ën
, 
»_æags
,

1784 *
İaque
)

1786 
REP¬£S‹
 
s_s
, *
s
 = &s_s;

1787 
¡ack_size
;

1788 
BOOL
 
is_¡icky
;

1790 
	`mem£t
(
s
, 0, (*s));

1791 
s
->
mem_İaque
 = 
İaque
;

1792 
s
->
buf_±r
 = (cÚ¡ 
ušt8_t
 *)
buf
;

1793 
s
->
buf_’d
 = s->
buf_±r
 + 
buf_Ën
;

1794 
s
->
buf_¡¬t
 = s->
buf_±r
;

1795 
s
->
»_æags
 =„e_flags;

1796 
s
->
is_utf16
 = ((
»_æags
 & 
LRE_FLAG_UTF16
) != 0);

1797 
is_¡icky
 = ((
»_æags
 & 
LRE_FLAG_STICKY
) != 0);

1798 
s
->
ignÜe_ÿ£
 = ((
»_æags
 & 
LRE_FLAG_IGNORECASE
) != 0);

1799 
s
->
dÙ®l
 = ((
»_æags
 & 
LRE_FLAG_DOTALL
) != 0);

1800 
s
->
ÿ±u»_couÁ
 = 1;

1801 
s
->
tÙ®_ÿ±u»_couÁ
 = -1;

1802 
s
->
has_Çmed_ÿ±u»s
 = -1;

1804 
	`dbuf_š™2
(&
s
->
by‹_code
, 
İaque
, 
Ìe_»®loc
);

1805 
	`dbuf_š™2
(&
s
->
group_Çmes
, 
İaque
, 
Ìe_»®loc
);

1807 
	`dbuf_putc
(&
s
->
by‹_code
, 
»_æags
);

1808 
	`dbuf_putc
(&
s
->
by‹_code
, 0);

1809 
	`dbuf_putc
(&
s
->
by‹_code
, 0);

1810 
	`dbuf_put_u32
(&
s
->
by‹_code
, 0);

1812 ià(!
is_¡icky
) {

1817 
	`»_em™_İ_u32
(
s
, 
REOP_¥l™_gÙo_fœ¡
, 1 + 5);

1818 
	`»_em™_İ
(
s
, 
REOP_ªy
);

1819 
	`»_em™_İ_u32
(
s
, 
REOP_gÙo
, -(5 + 1 + 5));

1821 
	`»_em™_İ_u8
(
s
, 
REOP_§ve_¡¬t
, 0);

1823 ià(
	`»_·r£_disjunùiÚ
(
s
, 
FALSE
)) {

1824 
”rÜ
:

1825 
	`dbuf_ä“
(&
s
->
by‹_code
);

1826 
	`dbuf_ä“
(&
s
->
group_Çmes
);

1827 
	`p¡rıy
(
”rÜ_msg
, 
”rÜ_msg_size
, 
s
->
u
.error_msg);

1828 *
¶’
 = 0;

1829  
NULL
;

1832 
	`»_em™_İ_u8
(
s
, 
REOP_§ve_’d
, 0);

1834 
	`»_em™_İ
(
s
, 
REOP_m©ch
);

1836 ià(*
s
->
buf_±r
 != '\0') {

1837 
	`»_·r£_”rÜ
(
s
, "extraneous characters‡theƒnd");

1838 
”rÜ
;

1841 ià(
	`dbuf_”rÜ
(&
s
->
by‹_code
)) {

1842 
	`»_·r£_”rÜ
(
s
, "out of memory");

1843 
”rÜ
;

1846 
¡ack_size
 = 
	`compu‹_¡ack_size
(
s
->
by‹_code
.
buf
, s->by‹_code.
size
);

1847 ià(
¡ack_size
 < 0) {

1848 
	`»_·r£_”rÜ
(
s
, "too many imbricated quantifiers");

1849 
”rÜ
;

1852 
s
->
by‹_code
.
buf
[
RE_HEADER_CAPTURE_COUNT
] = s->
ÿ±u»_couÁ
;

1853 
s
->
by‹_code
.
buf
[
RE_HEADER_STACK_SIZE
] = 
¡ack_size
;

1854 
	`put_u32
(
s
->
by‹_code
.
buf
 + 3, s->by‹_code.
size
 - 
RE_HEADER_LEN
);

1857 ià(
s
->
group_Çmes
.
size
 > (s->
ÿ±u»_couÁ
 - 1)) {

1858 
	`dbuf_put
(&
s
->
by‹_code
, s->
group_Çmes
.
buf
, s->group_Çmes.
size
);

1859 
s
->
by‹_code
.
buf
[
RE_HEADER_FLAGS
] |ğ
LRE_FLAG_NAMED_GROUPS
;

1861 
	`dbuf_ä“
(&
s
->
group_Çmes
);

1863 #ifdeà
DUMP_REOP


1864 
	`Ìe_dump_by‹code
(
s
->
by‹_code
.
buf
, s->by‹_code.
size
);

1867 
”rÜ_msg
[0] = '\0';

1868 *
¶’
 = 
s
->
by‹_code
.
size
;

1869  
s
->
by‹_code
.
buf
;

1870 
	}
}

1872 
BOOL
 
	$is_lše_‹rmš©Ü
(
ušt32_t
 
c
)

1874  (
c
 =ğ'\n' || c =ğ'\r' || c =ğ
CP_LS
 || c =ğ
CP_PS
);

1875 
	}
}

1877 
BOOL
 
	$is_wÜd_ch¬
(
ušt32_t
 
c
)

1879  ((
c
 >= '0' && c <= '9') ||

1880 (
c
 >= 'a' && c <= 'z') ||

1881 (
c
 >= 'A' && c <= 'Z') ||

1882 (
c
 == '_'));

1883 
	}
}

1885 
	#GET_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
) \

1887 ià(
cbuf_ty³
 == 0) { \

1888 
c
 = *
ıŒ
++; \

1890 
ušt32_t
 
__c1
; \

1891 
c
 = *(
ušt16_t
 *)
ıŒ
; \

1892 
ıŒ
 += 2; \

1893 ià(
c
 >= 0xd800 && c < 0xdc00 && \

1894 
cbuf_ty³
 =ğ2 && 
ıŒ
 < 
cbuf_’d
) { \

1895 
__c1
 = *(
ušt16_t
 *)
ıŒ
; \

1896 ià(
__c1
 >= 0xdc00 && __c1 < 0xe000) { \

1897 
c
 = (((ø& 0x3ffè<< 10è| (
__c1
 & 0x3ff)) + 0x10000; \

1898 
ıŒ
 += 2; \

1902 } 0)

	)

1904 
	#PEEK_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
) \

1906 ià(
cbuf_ty³
 == 0) { \

1907 
c
 = 
ıŒ
[0]; \

1909 
ušt32_t
 
__c1
; \

1910 
c
 = ((
ušt16_t
 *)
ıŒ
)[0]; \

1911 ià(
c
 >= 0xd800 && c < 0xdc00 && \

1912 
cbuf_ty³
 =ğ2 && (
ıŒ
 + 2è< 
cbuf_’d
) { \

1913 
__c1
 = ((
ušt16_t
 *)
ıŒ
)[1]; \

1914 ià(
__c1
 >= 0xdc00 && __c1 < 0xe000) { \

1915 
c
 = (((ø& 0x3ffè<< 10è| (
__c1
 & 0x3ff)) + 0x10000; \

1919 } 0)

	)

1921 
	#PEEK_PREV_CHAR
(
c
, 
ıŒ
, 
cbuf_¡¬t
) \

1923 ià(
cbuf_ty³
 == 0) { \

1924 
c
 = 
ıŒ
[-1]; \

1926 
ušt32_t
 
__c1
; \

1927 
c
 = ((
ušt16_t
 *)
ıŒ
)[-1]; \

1928 ià(
c
 >= 0xdc00 && c < 0xe000 && \

1929 
cbuf_ty³
 =ğ2 && (
ıŒ
 - 4è>ğ
cbuf_¡¬t
) { \

1930 
__c1
 = ((
ušt16_t
 *)
ıŒ
)[-2]; \

1931 ià(
__c1
 >= 0xd800 && __c1 < 0xdc00 ) { \

1932 
c
 = (((
__c1
 & 0x3ff) << 10) | (c & 0x3ff)) + 0x10000; \

1936 } 0)

	)

1938 
	#GET_PREV_CHAR
(
c
, 
ıŒ
, 
cbuf_¡¬t
) \

1940 ià(
cbuf_ty³
 == 0) { \

1941 
ıŒ
--; \

1942 
c
 = 
ıŒ
[0]; \

1944 
ušt32_t
 
__c1
; \

1945 
ıŒ
 -= 2; \

1946 
c
 = ((
ušt16_t
 *)
ıŒ
)[0]; \

1947 ià(
c
 >= 0xdc00 && c < 0xe000 && \

1948 
cbuf_ty³
 =ğ2 && 
ıŒ
 > 
cbuf_¡¬t
) { \

1949 
__c1
 = ((
ušt16_t
 *)
ıŒ
)[-1]; \

1950 ià(
__c1
 >= 0xd800 && __c1 < 0xdc00 ) { \

1951 
ıŒ
 -= 2; \

1952 
c
 = (((
__c1
 & 0x3ff) << 10) | (c & 0x3ff)) + 0x10000; \

1956 } 0)

	)

1958 
	#PREV_CHAR
(
ıŒ
, 
cbuf_¡¬t
) \

1960 ià(
cbuf_ty³
 == 0) { \

1961 
ıŒ
--; \

1963 
ıŒ
 -= 2; \

1964 ià(
cbuf_ty³
 == 2) { \

1965 
c
 = ((
ušt16_t
 *)
ıŒ
)[0]; \

1966 ià(
c
 >ğ0xdc00 && c < 0xe000 && 
ıŒ
 > 
cbuf_¡¬t
) { \

1967 
c
 = ((
ušt16_t
 *)
ıŒ
)[-1]; \

1968 ià(
c
 >= 0xd800 && c < 0xdc00) \

1969 
ıŒ
 -= 2; \

1973 } 0)

	)

1975 
ušŒ_t
 
	tSckIÁ
;

1978 
	mRE_EXEC_STATE_SPLIT
,

1979 
	mRE_EXEC_STATE_LOOKAHEAD
,

1980 
	mRE_EXEC_STATE_NEGATIVE_LOOKAHEAD
,

1981 
	mRE_EXEC_STATE_GREEDY_QUANT
,

1982 } 
	tREExecS‹Enum
;

1984 
	sREExecS‹
 {

1985 
REExecS‹Enum
 
	mty³
 : 8;

1986 
ušt8_t
 
	m¡ack_Ën
;

1987 
size_t
 
	mcouÁ
;

1988 cÚ¡ 
ušt8_t
 *
	mıŒ
;

1989 cÚ¡ 
ušt8_t
 *
	mpc
;

1990 *
	mbuf
[0];

1991 } 
	tREExecS‹
;

1994 cÚ¡ 
ušt8_t
 *
	mcbuf
;

1995 cÚ¡ 
ušt8_t
 *
	mcbuf_’d
;

1997 
	mcbuf_ty³
;

1998 
	mÿ±u»_couÁ
;

1999 
	m¡ack_size_max
;

2000 
BOOL
 
	mmuÉi_lše
;

2001 
BOOL
 
	mignÜe_ÿ£
;

2002 
BOOL
 
	mis_utf16
;

2003 *
	mİaque
;

2005 
size_t
 
	m¡©e_size
;

2006 
ušt8_t
 *
	m¡©e_¡ack
;

2007 
size_t
 
	m¡©e_¡ack_size
;

2008 
size_t
 
	m¡©e_¡ack_Ën
;

2009 } 
	tREExecCÚ‹xt
;

2011 
	$push_¡©e
(
REExecCÚ‹xt
 *
s
,

2012 
ušt8_t
 **
ÿ±u»
,

2013 
SckIÁ
 *
¡ack
, 
size_t
 
¡ack_Ën
,

2014 cÚ¡ 
ušt8_t
 *
pc
, cÚ¡ ušt8_ˆ*
ıŒ
,

2015 
REExecS‹Enum
 
ty³
, 
size_t
 
couÁ
)

2017 
REExecS‹
 *
rs
;

2018 
ušt8_t
 *
Ãw_¡ack
;

2019 
size_t
 
Ãw_size
, 
i
, 
n
;

2020 
SckIÁ
 *
¡ack_buf
;

2022 ià(
	`uÆik–y
((
s
->
¡©e_¡ack_Ën
 + 1è> s->
¡©e_¡ack_size
)) {

2024 
Ãw_size
 = 
s
->
¡©e_¡ack_size
 * 3 / 2;

2025 ià(
Ãw_size
 < 8)

2026 
Ãw_size
 = 8;

2027 
Ãw_¡ack
 = 
	`Ìe_»®loc
(
s
->
İaque
, s->
¡©e_¡ack
, 
Ãw_size
 * s->
¡©e_size
);

2028 ià(!
Ãw_¡ack
)

2030 
s
->
¡©e_¡ack_size
 = 
Ãw_size
;

2031 
s
->
¡©e_¡ack
 = 
Ãw_¡ack
;

2033 
rs
 = (
REExecS‹
 *)(
s
->
¡©e_¡ack
 + s->
¡©e_¡ack_Ën
 * s->
¡©e_size
);

2034 
s
->
¡©e_¡ack_Ën
++;

2035 
rs
->
ty³
 =ype;

2036 
rs
->
couÁ
 = count;

2037 
rs
->
¡ack_Ën
 = stack_len;

2038 
rs
->
ıŒ
 = cptr;

2039 
rs
->
pc
 =…c;

2040 
n
 = 2 * 
s
->
ÿ±u»_couÁ
;

2041 
i
 = 0; i < 
n
; i++)

2042 
rs
->
buf
[
i
] = 
ÿ±u»
[i];

2043 
¡ack_buf
 = (
SckIÁ
 *)(
rs
->
buf
 + 
n
);

2044 
i
 = 0; i < 
¡ack_Ën
; i++)

2045 
¡ack_buf
[
i
] = 
¡ack
[i];

2047 
	}
}

2050 
šŒ_t
 
	$Ìe_exec_backŒack
(
REExecCÚ‹xt
 *
s
, 
ušt8_t
 **
ÿ±u»
,

2051 
SckIÁ
 *
¡ack
, 
¡ack_Ën
,

2052 cÚ¡ 
ušt8_t
 *
pc
, cÚ¡ ušt8_ˆ*
ıŒ
,

2053 
BOOL
 
no_»cur£
)

2055 
İcode
, 
»t
;

2056 
cbuf_ty³
;

2057 
ušt32_t
 
v®
, 
c
;

2058 cÚ¡ 
ušt8_t
 *
cbuf_’d
;

2060 
cbuf_ty³
 = 
s
->cbuf_type;

2061 
cbuf_’d
 = 
s
->cbuf_end;

2065 
İcode
 = *
pc
++;

2066 
İcode
) {

2067 
REOP_m©ch
:

2069 
REExecS‹
 *
rs
;

2070 ià(
no_»cur£
)

2071  (
šŒ_t
)
ıŒ
;

2072 
»t
 = 1;

2073 
»cur£
;

2074 
no_m©ch
:

2075 ià(
no_»cur£
)

2077 
»t
 = 0;

2078 
»cur£
:

2080 ià(
s
->
¡©e_¡ack_Ën
 == 0)

2081  
»t
;

2082 
rs
 = (
REExecS‹
 *)(
s
->
¡©e_¡ack
 +

2083 (
s
->
¡©e_¡ack_Ën
 - 1è* s->
¡©e_size
);

2084 ià(
rs
->
ty³
 =ğ
RE_EXEC_STATE_SPLIT
) {

2085 ià(!
»t
) {

2086 
pİ_¡©e
:

2087 
	`memıy
(
ÿ±u»
, 
rs
->
buf
,

2088 (
ÿ±u»
[0]è* 2 * 
s
->
ÿ±u»_couÁ
);

2089 
pİ_¡©e1
:

2090 
pc
 = 
rs
->pc;

2091 
ıŒ
 = 
rs
->cptr;

2092 
¡ack_Ën
 = 
rs
->stack_len;

2093 
	`memıy
(
¡ack
, 
rs
->
buf
 + 2 * 
s
->
ÿ±u»_couÁ
,

2094 
¡ack_Ën
 * (
¡ack
[0]));

2095 
s
->
¡©e_¡ack_Ën
--;

2098 } ià(
rs
->
ty³
 =ğ
RE_EXEC_STATE_GREEDY_QUANT
) {

2099 ià(!
»t
) {

2100 
ušt32_t
 
ch¬_couÁ
, 
i
;

2101 
	`memıy
(
ÿ±u»
, 
rs
->
buf
,

2102 (
ÿ±u»
[0]è* 2 * 
s
->
ÿ±u»_couÁ
);

2103 
¡ack_Ën
 = 
rs
->stack_len;

2104 
	`memıy
(
¡ack
, 
rs
->
buf
 + 2 * 
s
->
ÿ±u»_couÁ
,

2105 
¡ack_Ën
 * (
¡ack
[0]));

2106 
pc
 = 
rs
->pc;

2107 
ıŒ
 = 
rs
->cptr;

2109 
ch¬_couÁ
 = 
	`g‘_u32
(
pc
 + 12);

2110 
i
 = 0; i < 
ch¬_couÁ
; i++) {

2111 
	`PREV_CHAR
(
ıŒ
, 
s
->
cbuf
);

2113 
pc
 = (pø+ 16è+ ()
	`g‘_u32
(pc);

2114 
rs
->
ıŒ
 = cptr;

2115 
rs
->
couÁ
--;

2116 ià(
rs
->
couÁ
 == 0) {

2117 
s
->
¡©e_¡ack_Ën
--;

2122 
»t
 = ((
rs
->
ty³
 =ğ
RE_EXEC_STATE_LOOKAHEAD
 &&„et) ||

2123 (
rs
->
ty³
 =ğ
RE_EXEC_STATE_NEGATIVE_LOOKAHEAD
 && !
»t
));

2124 ià(
»t
) {

2126 ià(
rs
->
ty³
 =ğ
RE_EXEC_STATE_LOOKAHEAD
)

2127 
pİ_¡©e1
;

2129 
pİ_¡©e
;

2132 
s
->
¡©e_¡ack_Ën
--;

2136 
REOP_ch¬32
:

2137 
v®
 = 
	`g‘_u32
(
pc
);

2138 
pc
 += 4;

2139 
‹¡_ch¬
;

2140 
REOP_ch¬
:

2141 
v®
 = 
	`g‘_u16
(
pc
);

2142 
pc
 += 2;

2143 
‹¡_ch¬
:

2144 ià(
ıŒ
 >ğ
cbuf_’d
)

2145 
no_m©ch
;

2146 
	`GET_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2147 ià(
s
->
ignÜe_ÿ£
) {

2148 
c
 = 
	`Ìe_ÿnÚiÿlize
(c, 
s
->
is_utf16
);

2150 ià(
v®
 !ğ
c
)

2151 
no_m©ch
;

2153 
REOP_¥l™_gÙo_fœ¡
:

2154 
REOP_¥l™_Ãxt_fœ¡
:

2156 cÚ¡ 
ušt8_t
 *
pc1
;

2158 
v®
 = 
	`g‘_u32
(
pc
);

2159 
pc
 += 4;

2160 ià(
İcode
 =ğ
REOP_¥l™_Ãxt_fœ¡
) {

2161 
pc1
 = 
pc
 + ()
v®
;

2163 
pc1
 = 
pc
;

2164 
pc
 =…ø+ ()
v®
;

2166 
»t
 = 
	`push_¡©e
(
s
, 
ÿ±u»
, 
¡ack
, 
¡ack_Ën
,

2167 
pc1
, 
ıŒ
, 
RE_EXEC_STATE_SPLIT
, 0);

2168 ià(
»t
 < 0)

2172 
REOP_lookah—d
:

2173 
REOP_Ãg©ive_lookah—d
:

2174 
v®
 = 
	`g‘_u32
(
pc
);

2175 
pc
 += 4;

2176 
»t
 = 
	`push_¡©e
(
s
, 
ÿ±u»
, 
¡ack
, 
¡ack_Ën
,

2177 
pc
 + ()
v®
, 
ıŒ
,

2178 
RE_EXEC_STATE_LOOKAHEAD
 + 
İcode
 - 
REOP_lookah—d
,

2180 ià(
»t
 < 0)

2184 
REOP_gÙo
:

2185 
v®
 = 
	`g‘_u32
(
pc
);

2186 
pc
 +ğ4 + ()
v®
;

2188 
REOP_lše_¡¬t
:

2189 ià(
ıŒ
 =ğ
s
->
cbuf
)

2191 ià(!
s
->
muÉi_lše
)

2192 
no_m©ch
;

2193 
	`PEEK_PREV_CHAR
(
c
, 
ıŒ
, 
s
->
cbuf
);

2194 ià(!
	`is_lše_‹rmš©Ü
(
c
))

2195 
no_m©ch
;

2197 
REOP_lše_’d
:

2198 ià(
ıŒ
 =ğ
cbuf_’d
)

2200 ià(!
s
->
muÉi_lše
)

2201 
no_m©ch
;

2202 
	`PEEK_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2203 ià(!
	`is_lše_‹rmš©Ü
(
c
))

2204 
no_m©ch
;

2206 
REOP_dÙ
:

2207 ià(
ıŒ
 =ğ
cbuf_’d
)

2208 
no_m©ch
;

2209 
	`GET_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2210 ià(
	`is_lše_‹rmš©Ü
(
c
))

2211 
no_m©ch
;

2213 
REOP_ªy
:

2214 ià(
ıŒ
 =ğ
cbuf_’d
)

2215 
no_m©ch
;

2216 
	`GET_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2218 
REOP_§ve_¡¬t
:

2219 
REOP_§ve_’d
:

2220 
v®
 = *
pc
++;

2221 
	`as£¹
(
v®
 < 
s
->
ÿ±u»_couÁ
);

2222 
ÿ±u»
[2 * 
v®
 + 
İcode
 - 
REOP_§ve_¡¬t
] = (
ušt8_t
 *)
ıŒ
;

2224 
REOP_§ve_»£t
:

2226 
ušt32_t
 
v®2
;

2227 
v®
 = 
pc
[0];

2228 
v®2
 = 
pc
[1];

2229 
pc
 += 2;

2230 
	`as£¹
(
v®2
 < 
s
->
ÿ±u»_couÁ
);

2231 
v®
 <ğ
v®2
) {

2232 
ÿ±u»
[2 * 
v®
] = 
NULL
;

2233 
ÿ±u»
[2 * 
v®
 + 1] = 
NULL
;

2234 
v®
++;

2238 
REOP_push_i32
:

2239 
v®
 = 
	`g‘_u32
(
pc
);

2240 
pc
 += 4;

2241 
¡ack
[
¡ack_Ën
++] = 
v®
;

2243 
REOP_drİ
:

2244 
¡ack_Ën
--;

2246 
REOP_loİ
:

2247 
v®
 = 
	`g‘_u32
(
pc
);

2248 
pc
 += 4;

2249 ià(--
¡ack
[
¡ack_Ën
 - 1] != 0) {

2250 
pc
 +ğ()
v®
;

2253 
REOP_push_ch¬_pos
:

2254 
¡ack
[
¡ack_Ën
++] = (
ušŒ_t
)
ıŒ
;

2256 
REOP_bÃ_ch¬_pos
:

2257 
v®
 = 
	`g‘_u32
(
pc
);

2258 
pc
 += 4;

2259 ià(
¡ack
[--
¡ack_Ën
] !ğ(
ušŒ_t
)
ıŒ
)

2260 
pc
 +ğ()
v®
;

2262 
REOP_wÜd_bound¬y
:

2263 
REOP_nÙ_wÜd_bound¬y
:

2265 
BOOL
 
v1
, 
v2
;

2267 ià(
ıŒ
 =ğ
s
->
cbuf
) {

2268 
v1
 = 
FALSE
;

2270 
	`PEEK_PREV_CHAR
(
c
, 
ıŒ
, 
s
->
cbuf
);

2271 
v1
 = 
	`is_wÜd_ch¬
(
c
);

2274 ià(
ıŒ
 >ğ
cbuf_’d
) {

2275 
v2
 = 
FALSE
;

2277 
	`PEEK_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2278 
v2
 = 
	`is_wÜd_ch¬
(
c
);

2280 ià(
v1
 ^ 
v2
 ^ (
REOP_nÙ_wÜd_bound¬y
 - 
İcode
))

2281 
no_m©ch
;

2284 
REOP_back_»ã»nû
:

2285 
REOP_backw¬d_back_»ã»nû
:

2287 cÚ¡ 
ušt8_t
 *
ıŒ1
, *
ıŒ1_’d
, *
ıŒ1_¡¬t
;

2288 
ušt32_t
 
c1
, 
c2
;

2290 
v®
 = *
pc
++;

2291 ià(
v®
 >ğ
s
->
ÿ±u»_couÁ
)

2292 
no_m©ch
;

2293 
ıŒ1_¡¬t
 = 
ÿ±u»
[2 * 
v®
];

2294 
ıŒ1_’d
 = 
ÿ±u»
[2 * 
v®
 + 1];

2295 ià(!
ıŒ1_¡¬t
 || !
ıŒ1_’d
)

2297 ià(
İcode
 =ğ
REOP_back_»ã»nû
) {

2298 
ıŒ1
 = 
ıŒ1_¡¬t
;

2299 
ıŒ1
 < 
ıŒ1_’d
) {

2300 ià(
ıŒ
 >ğ
cbuf_’d
)

2301 
no_m©ch
;

2302 
	`GET_CHAR
(
c1
, 
ıŒ1
, 
ıŒ1_’d
);

2303 
	`GET_CHAR
(
c2
, 
ıŒ
, 
cbuf_’d
);

2304 ià(
s
->
ignÜe_ÿ£
) {

2305 
c1
 = 
	`Ìe_ÿnÚiÿlize
(c1, 
s
->
is_utf16
);

2306 
c2
 = 
	`Ìe_ÿnÚiÿlize
(c2, 
s
->
is_utf16
);

2308 ià(
c1
 !ğ
c2
)

2309 
no_m©ch
;

2312 
ıŒ1
 = 
ıŒ1_’d
;

2313 
ıŒ1
 > 
ıŒ1_¡¬t
) {

2314 ià(
ıŒ
 =ğ
s
->
cbuf
)

2315 
no_m©ch
;

2316 
	`GET_PREV_CHAR
(
c1
, 
ıŒ1
, 
ıŒ1_¡¬t
);

2317 
	`GET_PREV_CHAR
(
c2
, 
ıŒ
, 
s
->
cbuf
);

2318 ià(
s
->
ignÜe_ÿ£
) {

2319 
c1
 = 
	`Ìe_ÿnÚiÿlize
(c1, 
s
->
is_utf16
);

2320 
c2
 = 
	`Ìe_ÿnÚiÿlize
(c2, 
s
->
is_utf16
);

2322 ià(
c1
 !ğ
c2
)

2323 
no_m©ch
;

2328 
REOP_¿nge
:

2330 
n
;

2331 
ušt32_t
 
low
, 
high
, 
idx_mš
, 
idx_max
, 
idx
;

2333 
n
 = 
	`g‘_u16
(
pc
);

2334 
pc
 += 2;

2335 ià(
ıŒ
 >ğ
cbuf_’d
)

2336 
no_m©ch
;

2337 
	`GET_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2338 ià(
s
->
ignÜe_ÿ£
) {

2339 
c
 = 
	`Ìe_ÿnÚiÿlize
(c, 
s
->
is_utf16
);

2341 
idx_mš
 = 0;

2342 
low
 = 
	`g‘_u16
(
pc
 + 0 * 4);

2343 ià(
c
 < 
low
)

2344 
no_m©ch
;

2345 
idx_max
 = 
n
 - 1;

2346 
high
 = 
	`g‘_u16
(
pc
 + 
idx_max
 * 4 + 2);

2348 ià(
	`uÆik–y
(
c
 >ğ0xffffè&& 
high
 == 0xffff)

2349 
¿nge_m©ch
;

2350 ià(
c
 > 
high
)

2351 
no_m©ch
;

2352 
idx_mš
 <ğ
idx_max
) {

2353 
idx
 = (
idx_mš
 + 
idx_max
) / 2;

2354 
low
 = 
	`g‘_u16
(
pc
 + 
idx
 * 4);

2355 
high
 = 
	`g‘_u16
(
pc
 + 
idx
 * 4 + 2);

2356 ià(
c
 < 
low
)

2357 
idx_max
 = 
idx
 - 1;

2358 ià(
c
 > 
high
)

2359 
idx_mš
 = 
idx
 + 1;

2361 
¿nge_m©ch
;

2363 
no_m©ch
;

2364 
¿nge_m©ch
:

2365 
pc
 +ğ4 * 
n
;

2368 
REOP_¿nge32
:

2370 
n
;

2371 
ušt32_t
 
low
, 
high
, 
idx_mš
, 
idx_max
, 
idx
;

2373 
n
 = 
	`g‘_u16
(
pc
);

2374 
pc
 += 2;

2375 ià(
ıŒ
 >ğ
cbuf_’d
)

2376 
no_m©ch
;

2377 
	`GET_CHAR
(
c
, 
ıŒ
, 
cbuf_’d
);

2378 ià(
s
->
ignÜe_ÿ£
) {

2379 
c
 = 
	`Ìe_ÿnÚiÿlize
(c, 
s
->
is_utf16
);

2381 
idx_mš
 = 0;

2382 
low
 = 
	`g‘_u32
(
pc
 + 0 * 8);

2383 ià(
c
 < 
low
)

2384 
no_m©ch
;

2385 
idx_max
 = 
n
 - 1;

2386 
high
 = 
	`g‘_u32
(
pc
 + 
idx_max
 * 8 + 4);

2387 ià(
c
 > 
high
)

2388 
no_m©ch
;

2389 
idx_mš
 <ğ
idx_max
) {

2390 
idx
 = (
idx_mš
 + 
idx_max
) / 2;

2391 
low
 = 
	`g‘_u32
(
pc
 + 
idx
 * 8);

2392 
high
 = 
	`g‘_u32
(
pc
 + 
idx
 * 8 + 4);

2393 ià(
c
 < 
low
)

2394 
idx_max
 = 
idx
 - 1;

2395 ià(
c
 > 
high
)

2396 
idx_mš
 = 
idx
 + 1;

2398 
¿nge32_m©ch
;

2400 
no_m©ch
;

2401 
¿nge32_m©ch
:

2402 
pc
 +ğ8 * 
n
;

2405 
REOP_´ev
:

2407 ià(
ıŒ
 =ğ
s
->
cbuf
)

2408 
no_m©ch
;

2409 
	`PREV_CHAR
(
ıŒ
, 
s
->
cbuf
);

2411 
REOP_sim¶e_g»edy_quªt
:

2413 
ušt32_t
 
Ãxt_pos
, 
quªt_mš
, 
quªt_max
;

2414 
size_t
 
q
;

2415 
šŒ_t
 
»s
;

2416 cÚ¡ 
ušt8_t
 *
pc1
;

2418 
Ãxt_pos
 = 
	`g‘_u32
(
pc
);

2419 
quªt_mš
 = 
	`g‘_u32
(
pc
 + 4);

2420 
quªt_max
 = 
	`g‘_u32
(
pc
 + 8);

2421 
pc
 += 16;

2422 
pc1
 = 
pc
;

2423 
pc
 +ğ()
Ãxt_pos
;

2425 
q
 = 0;

2427 
»s
 = 
	`Ìe_exec_backŒack
(
s
, 
ÿ±u»
, 
¡ack
, 
¡ack_Ën
,

2428 
pc1
, 
ıŒ
, 
TRUE
);

2429 ià(
»s
 == -1)

2430  
»s
;

2431 ià(!
»s
)

2433 
ıŒ
 = (
ušt8_t
 *)
»s
;

2434 
q
++;

2435 ià(
q
 >ğ
quªt_max
 && quªt_max !ğ
INT32_MAX
)

2438 ià(
q
 < 
quªt_mš
)

2439 
no_m©ch
;

2440 ià(
q
 > 
quªt_mš
) {

2442 
»t
 = 
	`push_¡©e
(
s
, 
ÿ±u»
, 
¡ack
, 
¡ack_Ën
,

2443 
pc1
 - 16, 
ıŒ
,

2444 
RE_EXEC_STATE_GREEDY_QUANT
,

2445 
q
 - 
quªt_mš
);

2446 ià(
»t
 < 0)

2452 
	`abÜt
();

2455 
	}
}

2460 
	$Ìe_exec
(
ušt8_t
 **
ÿ±u»
,

2461 cÚ¡ 
ušt8_t
 *
bc_buf
, cÚ¡ ušt8_ˆ*
cbuf
, 
cšdex
, 
ş’
,

2462 
cbuf_ty³
, *
İaque
)

2464 
REExecCÚ‹xt
 
s_s
, *
s
 = &s_s;

2465 
»_æags
, 
i
, 
®loÿ_size
, 
»t
;

2466 
SckIÁ
 *
¡ack_buf
;

2468 
»_æags
 = 
bc_buf
[
RE_HEADER_FLAGS
];

2469 
s
->
muÉi_lše
 = (
»_æags
 & 
LRE_FLAG_MULTILINE
) != 0;

2470 
s
->
ignÜe_ÿ£
 = (
»_æags
 & 
LRE_FLAG_IGNORECASE
) != 0;

2471 
s
->
is_utf16
 = (
»_æags
 & 
LRE_FLAG_UTF16
) != 0;

2472 
s
->
ÿ±u»_couÁ
 = 
bc_buf
[
RE_HEADER_CAPTURE_COUNT
];

2473 
s
->
¡ack_size_max
 = 
bc_buf
[
RE_HEADER_STACK_SIZE
];

2474 
s
->
cbuf
 = cbuf;

2475 
s
->
cbuf_’d
 = 
cbuf
 + (
ş’
 << 
cbuf_ty³
);

2476 
s
->
cbuf_ty³
 = cbuf_type;

2477 ià(
s
->
cbuf_ty³
 =ğ1 && s->
is_utf16
)

2478 
s
->
cbuf_ty³
 = 2;

2479 
s
->
İaque
 = opaque;

2481 
s
->
¡©e_size
 = (
REExecS‹
) +

2482 
s
->
ÿ±u»_couÁ
 * (
ÿ±u»
[0]) * 2 +

2483 
s
->
¡ack_size_max
 * (
¡ack_buf
[0]);

2484 
s
->
¡©e_¡ack
 = 
NULL
;

2485 
s
->
¡©e_¡ack_Ën
 = 0;

2486 
s
->
¡©e_¡ack_size
 = 0;

2488 
i
 = 0; i < 
s
->
ÿ±u»_couÁ
 * 2; i++)

2489 
ÿ±u»
[
i
] = 
NULL
;

2490 
®loÿ_size
 = 
s
->
¡ack_size_max
 * (
¡ack_buf
[0]);

2491 
¡ack_buf
 = 
	`®loÿ
(
®loÿ_size
);

2492 
»t
 = 
	`Ìe_exec_backŒack
(
s
, 
ÿ±u»
, 
¡ack_buf
, 0, 
bc_buf
 + 
RE_HEADER_LEN
,

2493 
cbuf
 + (
cšdex
 << 
cbuf_ty³
), 
FALSE
);

2494 
	`Ìe_»®loc
(
s
->
İaque
, s->
¡©e_¡ack
, 0);

2495  
»t
;

2496 
	}
}

2498 
	$Ìe_g‘_ÿ±u»_couÁ
(cÚ¡ 
ušt8_t
 *
bc_buf
)

2500  
bc_buf
[
RE_HEADER_CAPTURE_COUNT
];

2501 
	}
}

2503 
	$Ìe_g‘_æags
(cÚ¡ 
ušt8_t
 *
bc_buf
)

2505  
bc_buf
[
RE_HEADER_FLAGS
];

2506 
	}
}

2508 #ifdeà
TEST


2510 
BOOL
 
	$Ìe_check_¡ack_ov”æow
(*
İaque
, 
size_t
 
®loÿ_size
)

2512  
FALSE
;

2513 
	}
}

2515 *
	$Ìe_»®loc
(*
İaque
, *
±r
, 
size_t
 
size
)

2517  
	`»®loc
(
±r
, 
size
);

2518 
	}
}

2520 
	$maš
(
¬gc
, **
¬gv
)

2522 
Ën
, 
»t
, 
i
;

2523 
ušt8_t
 *
bc
;

2524 
”rÜ_msg
[64];

2525 
ušt8_t
 *
ÿ±u»
[
CAPTURE_COUNT_MAX
 * 2];

2526 cÚ¡ *
šput
;

2527 
šput_Ën
, 
ÿ±u»_couÁ
;

2529 ià(
¬gc
 < 3) {

2530 
	`´štf
("u§ge: % »gex°šput\n", 
¬gv
[0]);

2531 
	`ex™
(1);

2533 
bc
 = 
	`Ìe_compe
(&
Ën
, 
”rÜ_msg
, Ó¼Ü_msg), 
¬gv
[1],

2534 
	`¡¾’
(
¬gv
[1]), 0, 
NULL
);

2535 ià(!
bc
) {

2536 
	`årštf
(
¡d”r
, "”rÜ: %s\n", 
”rÜ_msg
);

2537 
	`ex™
(1);

2540 
šput
 = 
¬gv
[2];

2541 
šput_Ën
 = 
	`¡¾’
(
šput
);

2543 
»t
 = 
	`Ìe_exec
(
ÿ±u»
, 
bc
, (
ušt8_t
 *)
šput
, 0, 
šput_Ën
, 0, 
NULL
);

2544 
	`´štf
("»t=%d\n", 
»t
);

2545 ià(
»t
 == 1) {

2546 
ÿ±u»_couÁ
 = 
	`Ìe_g‘_ÿ±u»_couÁ
(
bc
);

2547 
i
 = 0; i < 2 * 
ÿ±u»_couÁ
; i++) {

2548 
ušt8_t
 *
±r
;

2549 
±r
 = 
ÿ±u»
[
i
];

2550 
	`´štf
("%d: ", 
i
);

2551 ià(!
±r
)

2552 
	`´štf
("<nil>");

2554 
	`´štf
("%u", ()(
±r
 - (
ušt8_t
 *)
šput
));

2555 
	`´štf
("\n");

2559 
	}
}

	@libunicode.c

25 
	~<¹/js/cuts.h
>

26 
	~<¹/js/libunicode.h
>

27 
	~<¹/js/libunicode-bË.h
>

30 
	mRUN_TYPE_U
,

31 
	mRUN_TYPE_L
,

32 
	mRUN_TYPE_UF
,

33 
	mRUN_TYPE_LF
,

34 
	mRUN_TYPE_UL
,

35 
	mRUN_TYPE_LSU
,

36 
	mRUN_TYPE_U2L_399_EXT2
,

37 
	mRUN_TYPE_UF_D20
,

38 
	mRUN_TYPE_UF_D1_EXT
,

39 
	mRUN_TYPE_U_EXT
,

40 
	mRUN_TYPE_LF_EXT
,

41 
	mRUN_TYPE_U_EXT2
,

42 
	mRUN_TYPE_L_EXT2
,

43 
	mRUN_TYPE_U_EXT3
,

51 
	$Ìe_ÿ£_cÚv
(
ušt32_t
 *
»s
, ušt32_ˆ
c
, 
cÚv_ty³
)

53 ià(
c
 < 128) {

54 ià(
cÚv_ty³
) {

55 ià(
c
 >= 'A' && c <= 'Z') {

56 
c
 = c - 'A' + 'a';

59 ià(
c
 >= 'a' && c <= 'z') {

60 
c
 = c - 'a' + 'A';

64 
ušt32_t
 
v
, 
code
, 
d©a
, 
ty³
, 
Ën
, 
a
, 
is_low”
;

65 
idx
, 
idx_mš
, 
idx_max
;

67 
is_low”
 = (
cÚv_ty³
 != 0);

68 
idx_mš
 = 0;

69 
idx_max
 = 
	`couÁof
(
ÿ£_cÚv_bË1
) - 1;

70 
idx_mš
 <ğ
idx_max
) {

71 
idx
 = ()(
idx_max
 + 
idx_mš
) / 2;

72 
v
 = 
ÿ£_cÚv_bË1
[
idx
];

73 
code
 = 
v
 >> (32 - 17);

74 
Ën
 = (
v
 >> (32 - 17 - 7)) & 0x7f;

75 ià(
c
 < 
code
) {

76 
idx_max
 = 
idx
 - 1;

77 } ià(
c
 >ğ
code
 + 
Ën
) {

78 
idx_mš
 = 
idx
 + 1;

80 
ty³
 = (
v
 >> (32 - 17 - 7 - 4)) & 0xf;

81 
d©a
 = ((
v
 & 0xfè<< 8è| 
ÿ£_cÚv_bË2
[
idx
];

82 
ty³
) {

83 
RUN_TYPE_U
:

84 
RUN_TYPE_L
:

85 
RUN_TYPE_UF
:

86 
RUN_TYPE_LF
:

87 ià(
cÚv_ty³
 =ğ(
ty³
 & 1) ||

88 (
ty³
 >ğ
RUN_TYPE_UF
 && 
cÚv_ty³
 == 2)) {

89 
c
 = c - 
code
 + (
ÿ£_cÚv_bË1
[
d©a
] >> (32 - 17));

92 
RUN_TYPE_UL
:

93 
a
 = 
c
 - 
code
;

94 ià((
a
 & 1è!ğ(1 - 
is_low”
))

96 
c
 = (
a
 ^ 1è+ 
code
;

98 
RUN_TYPE_LSU
:

99 
a
 = 
c
 - 
code
;

100 ià(
a
 == 1) {

101 
c
 +ğ2 * 
is_low”
 - 1;

102 } ià(
a
 =ğ(1 - 
is_low”
) * 2) {

103 
c
 +ğ(2 * 
is_low”
 - 1) * 2;

106 
RUN_TYPE_U2L_399_EXT2
:

107 ià(!
is_low”
) {

108 
»s
[0] = 
c
 - 
code
 + 
ÿ£_cÚv_ext
[
d©a
 >> 6];

109 
»s
[1] = 0x399;

112 
c
 = c - 
code
 + 
ÿ£_cÚv_ext
[
d©a
 & 0x3f];

115 
RUN_TYPE_UF_D20
:

116 ià(
cÚv_ty³
 == 1)

118 
c
 = 
d©a
 + (
cÚv_ty³
 == 2) * 0x20;

120 
RUN_TYPE_UF_D1_EXT
:

121 ià(
cÚv_ty³
 == 1)

123 
c
 = 
ÿ£_cÚv_ext
[
d©a
] + (
cÚv_ty³
 == 2);

125 
RUN_TYPE_U_EXT
:

126 
RUN_TYPE_LF_EXT
:

127 ià(
is_low”
 !ğ(
ty³
 - 
RUN_TYPE_U_EXT
))

129 
c
 = 
ÿ£_cÚv_ext
[
d©a
];

131 
RUN_TYPE_U_EXT2
:

132 
RUN_TYPE_L_EXT2
:

133 ià(
cÚv_ty³
 !ğ(
ty³
 - 
RUN_TYPE_U_EXT2
))

135 
»s
[0] = 
c
 - 
code
 + 
ÿ£_cÚv_ext
[
d©a
 >> 6];

136 
»s
[1] = 
ÿ£_cÚv_ext
[
d©a
 & 0x3f];

139 
RUN_TYPE_U_EXT3
:

140 ià(
cÚv_ty³
 != 0)

142 
»s
[0] = 
ÿ£_cÚv_ext
[
d©a
 >> 8];

143 
»s
[1] = 
ÿ£_cÚv_ext
[(
d©a
 >> 4) & 0xf];

144 
»s
[2] = 
ÿ£_cÚv_ext
[
d©a
 & 0xf];

151 
»s
[0] = 
c
;

153 
	}
}

155 
ušt32_t
 
	$g‘_Ë24
(cÚ¡ 
ušt8_t
 *
±r
)

157 #ià
	`defšed
(
__x86__
è|| defšed(
__x86_64__
)

158  *(
ušt16_t
 *)
±r
 | (ptr[2] << 16);

160  
±r
[0] | (ptr[1] << 8) | (ptr[2] << 16);

162 
	}
}

164 
	#UNICODE_INDEX_BLOCK_LEN
 32

	)

167 
	$g‘_šdex_pos
(
ušt32_t
 *
pcode
, ušt32_ˆ
c
,

168 cÚ¡ 
ušt8_t
 *
šdex_bË
, 
šdex_bË_Ën
)

170 
ušt32_t
 
code
, 
v
;

171 
idx_mš
, 
idx_max
, 
idx
;

173 
idx_mš
 = 0;

174 
v
 = 
	`g‘_Ë24
(
šdex_bË
);

175 
code
 = 
v
 & ((1 << 21) - 1);

176 ià(
c
 < 
code
) {

177 *
pcode
 = 0;

180 
idx_max
 = 
šdex_bË_Ën
 - 1;

181 
code
 = 
	`g‘_Ë24
(
šdex_bË
 + 
idx_max
 * 3);

182 ià(
c
 >ğ
code
)

185 (
idx_max
 - 
idx_mš
) > 1) {

186 
idx
 = (
idx_max
 + 
idx_mš
) / 2;

187 
v
 = 
	`g‘_Ë24
(
šdex_bË
 + 
idx
 * 3);

188 
code
 = 
v
 & ((1 << 21) - 1);

189 ià(
c
 < 
code
) {

190 
idx_max
 = 
idx
;

192 
idx_mš
 = 
idx
;

195 
v
 = 
	`g‘_Ë24
(
šdex_bË
 + 
idx_mš
 * 3);

196 *
pcode
 = 
v
 & ((1 << 21) - 1);

197  (
idx_mš
 + 1è* 
UNICODE_INDEX_BLOCK_LEN
 + (
v
 >> 21);

198 
	}
}

200 
BOOL
 
	$Ìe_is_š_bË
(
ušt32_t
 
c
, cÚ¡ 
ušt8_t
 *
bË
,

201 cÚ¡ 
ušt8_t
 *
šdex_bË
, 
šdex_bË_Ën
)

203 
ušt32_t
 
code
, 
b
, 
b™
;

204 
pos
;

205 cÚ¡ 
ušt8_t
 *
p
;

207 
pos
 = 
	`g‘_šdex_pos
(&
code
, 
c
, 
šdex_bË
, 
šdex_bË_Ën
);

208 ià(
pos
 < 0)

209  
FALSE
;

210 
p
 = 
bË
 + 
pos
;

211 
b™
 = 0;

213 
b
 = *
p
++;

214 ià(
b
 < 64) {

215 
code
 +ğ(
b
 >> 3) + 1;

216 ià(
c
 < 
code
)

217  
b™
;

218 
b™
 ^= 1;

219 
code
 +ğ(
b
 & 7) + 1;

220 } ià(
b
 >= 0x80) {

221 
code
 +ğ
b
 - 0x80 + 1;

222 } ià(
b
 < 0x60) {

223 
code
 +ğ(((
b
 - 0x40è<< 8è| 
p
[0]) + 1;

224 
p
++;

226 
code
 +ğ(((
b
 - 0x60è<< 16è| (
p
[0] << 8) |…[1]) + 1;

227 
p
 += 2;

229 ià(
c
 < 
code
)

230  
b™
;

231 
b™
 ^= 1;

233 
	}
}

235 
BOOL
 
	$Ìe_is_ÿ£d
(
ušt32_t
 
c
)

237 
ušt32_t
 
v
, 
code
, 
Ën
;

238 
idx
, 
idx_mš
, 
idx_max
;

240 
idx_mš
 = 0;

241 
idx_max
 = 
	`couÁof
(
ÿ£_cÚv_bË1
) - 1;

242 
idx_mš
 <ğ
idx_max
) {

243 
idx
 = ()(
idx_max
 + 
idx_mš
) / 2;

244 
v
 = 
ÿ£_cÚv_bË1
[
idx
];

245 
code
 = 
v
 >> (32 - 17);

246 
Ën
 = (
v
 >> (32 - 17 - 7)) & 0x7f;

247 ià(
c
 < 
code
) {

248 
idx_max
 = 
idx
 - 1;

249 } ià(
c
 >ğ
code
 + 
Ën
) {

250 
idx_mš
 = 
idx
 + 1;

252  
TRUE
;

255  
	`Ìe_is_š_bË
(
c
, 
unicode_´İ_Ca£d1_bË
,

256 
unicode_´İ_Ca£d1_šdex
,

257 (
unicode_´İ_Ca£d1_šdex
) / 3);

258 
	}
}

260 
BOOL
 
	$Ìe_is_ÿ£_ignÜabË
(
ušt32_t
 
c
)

262  
	`Ìe_is_š_bË
(
c
, 
unicode_´İ_Ca£_IgnÜabË_bË
,

263 
unicode_´İ_Ca£_IgnÜabË_šdex
,

264 (
unicode_´İ_Ca£_IgnÜabË_šdex
) / 3);

265 
	}
}

269 
__maybe_unu£d
 
	$ü_dump
(
Ch¬Rªge
 *
ü
)

271 
i
;

272 
i
 = 0; i < 
ü
->
Ën
; i++)

273 
	`´štf
("%d: 0x%04x\n", 
i
, 
ü
->
pošts
[i]);

274 
	}
}

276 *
	$ü_deçuÉ_»®loc
(*
İaque
, *
±r
, 
size_t
 
size
)

278  
	`»®loc
(
±r
, 
size
);

279 
	}
}

281 
	$ü_š™
(
Ch¬Rªge
 *
ü
, *
mem_İaque
, 
DynBufR—ÎocFunc
 *
»®loc_func
)

283 
ü
->
Ën
 = cr->
size
 = 0;

284 
ü
->
pošts
 = 
NULL
;

285 
ü
->
mem_İaque
 = mem_opaque;

286 
ü
->
»®loc_func
 =„—Îoc_funø?„—Îoc_funø: 
ü_deçuÉ_»®loc
;

287 
	}
}

289 
	$ü_ä“
(
Ch¬Rªge
 *
ü
)

291 
ü
->
	`»®loc_func
(ü->
mem_İaque
, cr->
pošts
, 0);

292 
	}
}

294 
	$ü_»®loc
(
Ch¬Rªge
 *
ü
, 
size
)

296 
Ãw_size
;

297 
ušt32_t
 *
Ãw_buf
;

299 ià(
size
 > 
ü
->size) {

300 
Ãw_size
 = 
	`max_št
(
size
, 
ü
->size * 3 / 2);

301 
Ãw_buf
 = 
ü
->
	`»®loc_func
(ü->
mem_İaque
, cr->
pošts
,

302 
Ãw_size
 * (
ü
->
pošts
[0]));

303 ià(!
Ãw_buf
)

305 
ü
->
pošts
 = 
Ãw_buf
;

306 
ü
->
size
 = 
Ãw_size
;

309 
	}
}

311 
	$ü_cİy
(
Ch¬Rªge
 *
ü
, cÚ¡ Ch¬Rªg*
ü1
)

313 ià(
	`ü_»®loc
(
ü
, 
ü1
->
Ën
))

315 
	`memıy
(
ü
->
pošts
, 
ü1
->pošts, (ü->pošts[0]è* cr1->
Ën
);

316 
ü
->
Ën
 = 
ü1
->len;

318 
	}
}

321 
	$ü_com´ess
(
Ch¬Rªge
 *
ü
)

323 
i
, 
j
, 
k
, 
Ën
;

324 
ušt32_t
 *
±
;

326 
±
 = 
ü
->
pošts
;

327 
Ën
 = 
ü
->len;

328 
i
 = 0;

329 
j
 = 0;

330 
k
 = 0;

331 (
i
 + 1è< 
Ën
) {

332 ià(
±
[
i
] ==…t[i + 1]) {

334 
i
 += 2;

336 
j
 = 
i
;

337 (
j
 + 3è< 
Ën
 && 
±
[j + 1] ==…t[j + 2])

338 
j
 += 2;

340 
±
[
k
] =…t[
i
];

341 
±
[
k
 + 1] =…t[
j
 + 1];

342 
k
 += 2;

343 
i
 = 
j
 + 2;

346 
ü
->
Ën
 = 
k
;

347 
	}
}

350 
	$ü_İ
(
Ch¬Rªge
 *
ü
, cÚ¡ 
ušt32_t
 *
a_±
, 
a_Ën
,

351 cÚ¡ 
ušt32_t
 *
b_±
, 
b_Ën
, 
İ
)

353 
a_idx
, 
b_idx
, 
is_š
;

354 
ušt32_t
 
v
;

356 
a_idx
 = 0;

357 
b_idx
 = 0;

360 ià(
a_idx
 < 
a_Ën
 && 
b_idx
 < 
b_Ën
) {

361 ià(
a_±
[
a_idx
] < 
b_±
[
b_idx
]) {

362 
a_add
;

363 } ià(
a_±
[
a_idx
] =ğ
b_±
[
b_idx
]) {

364 
v
 = 
a_±
[
a_idx
];

365 
a_idx
++;

366 
b_idx
++;

368 
b_add
;

370 } ià(
a_idx
 < 
a_Ën
) {

371 
a_add
:

372 
v
 = 
a_±
[
a_idx
++];

373 } ià(
b_idx
 < 
b_Ën
) {

374 
b_add
:

375 
v
 = 
b_±
[
b_idx
++];

380 
İ
) {

381 
CR_OP_UNION
:

382 
is_š
 = (
a_idx
 & 1è| (
b_idx
 & 1);

384 
CR_OP_INTER
:

385 
is_š
 = (
a_idx
 & 1è& (
b_idx
 & 1);

387 
CR_OP_XOR
:

388 
is_š
 = (
a_idx
 & 1è^ (
b_idx
 & 1);

391 
	`abÜt
();

393 ià(
is_š
 !ğ(
ü
->
Ën
 & 1)) {

394 ià(
	`ü_add_pošt
(
ü
, 
v
))

398 
	`ü_com´ess
(
ü
);

400 
	}
}

402 
	$ü_uniÚ1
(
Ch¬Rªge
 *
ü
, cÚ¡ 
ušt32_t
 *
b_±
, 
b_Ën
)

404 
Ch¬Rªge
 
a
 = *
ü
;

405 
»t
;

406 
ü
->
Ën
 = 0;

407 
ü
->
size
 = 0;

408 
ü
->
pošts
 = 
NULL
;

409 
»t
 = 
	`ü_İ
(
ü
, 
a
.
pošts
,‡.
Ën
, 
b_±
, 
b_Ën
, 
CR_OP_UNION
);

410 
	`ü_ä“
(&
a
);

411  
»t
;

412 
	}
}

414 
	$ü_šv”t
(
Ch¬Rªge
 *
ü
)

416 
Ën
;

417 
Ën
 = 
ü
->len;

418 ià(
	`ü_»®loc
(
ü
, 
Ën
 + 2))

420 
	`memmove
(
ü
->
pošts
 + 1, cr->pošts, 
Ën
 * (cr->points[0]));

421 
ü
->
pošts
[0] = 0;

422 
ü
->
pošts
[
Ën
 + 1] = 
UINT32_MAX
;

423 
ü
->
Ën
 =†en + 2;

424 
	`ü_com´ess
(
ü
);

426 
	}
}

428 #ifdeà
CONFIG_ALL_UNICODE


430 
BOOL
 
	$Ìe_is_id_¡¬t
(
ušt32_t
 
c
)

432  
	`Ìe_is_š_bË
(
c
, 
unicode_´İ_ID_S¹_bË
,

433 
unicode_´İ_ID_S¹_šdex
,

434 (
unicode_´İ_ID_S¹_šdex
) / 3);

435 
	}
}

437 
BOOL
 
	$Ìe_is_id_cÚtšue
(
ušt32_t
 
c
)

439  
	`Ìe_is_id_¡¬t
(
c
) ||

440 
	`Ìe_is_š_bË
(
c
, 
unicode_´İ_ID_CÚtšue1_bË
,

441 
unicode_´İ_ID_CÚtšue1_šdex
,

442 (
unicode_´İ_ID_CÚtšue1_šdex
) / 3);

443 
	}
}

445 
	#UNICODE_DECOMP_LEN_MAX
 18

	)

448 
	mDECOMP_TYPE_C1
,

449 
	mDECOMP_TYPE_L1
,

450 
	mDECOMP_TYPE_L2
,

451 
	mDECOMP_TYPE_L3
,

452 
	mDECOMP_TYPE_L4
,

453 
	mDECOMP_TYPE_L5
,

454 
	mDECOMP_TYPE_L6
,

455 
	mDECOMP_TYPE_L7
,

456 
	mDECOMP_TYPE_LL1
,

457 
	mDECOMP_TYPE_LL2
,

458 
	mDECOMP_TYPE_S1
,

459 
	mDECOMP_TYPE_S2
,

460 
	mDECOMP_TYPE_S3
,

461 
	mDECOMP_TYPE_S4
,

462 
	mDECOMP_TYPE_S5
,

463 
	mDECOMP_TYPE_I1
,

464 
	mDECOMP_TYPE_I2_0
,

465 
	mDECOMP_TYPE_I2_1
,

466 
	mDECOMP_TYPE_I3_1
,

467 
	mDECOMP_TYPE_I3_2
,

468 
	mDECOMP_TYPE_I4_1
,

469 
	mDECOMP_TYPE_I4_2
,

470 
	mDECOMP_TYPE_B1
,

471 
	mDECOMP_TYPE_B2
,

472 
	mDECOMP_TYPE_B3
,

473 
	mDECOMP_TYPE_B4
,

474 
	mDECOMP_TYPE_B5
,

475 
	mDECOMP_TYPE_B6
,

476 
	mDECOMP_TYPE_B7
,

477 
	mDECOMP_TYPE_B8
,

478 
	mDECOMP_TYPE_B18
,

479 
	mDECOMP_TYPE_LS2
,

480 
	mDECOMP_TYPE_PAT3
,

481 
	mDECOMP_TYPE_S2_UL
,

482 
	mDECOMP_TYPE_LS2_UL
,

483 } 
	tDecompTy³Enum
;

485 
ušt32_t
 
	$unicode_g‘_shÜt_code
(
ušt32_t
 
c
)

487 cÚ¡ 
ušt16_t
 
unicode_shÜt_bË
[2] = { 0x2044, 0x2215 };

489 ià(
c
 < 0x80)

490  
c
;

491 ià(
c
 < 0x80 + 0x50)

492  
c
 - 0x80 + 0x300;

494  
unicode_shÜt_bË
[
c
 - 0x80 - 0x50];

495 
	}
}

497 
ušt32_t
 
	$unicode_g‘_low”_sim¶e
(
ušt32_t
 
c
)

499 ià(
c
 < 0x100 || (c >= 0x410 && c <= 0x42f))

500 
c
 += 0x20;

502 
c
++;

503  
c
;

504 
	}
}

506 
ušt16_t
 
	$unicode_g‘16
(cÚ¡ 
ušt8_t
 *
p
)

508  
p
[0] | (p[1] << 8);

509 
	}
}

511 
	$unicode_decomp_’Œy
(
ušt32_t
 *
»s
, ušt32_ˆ
c
,

512 
idx
, 
ušt32_t
 
code
, ušt32_ˆ
Ën
,

513 
ušt32_t
 
ty³
)

515 
ušt32_t
 
c1
;

516 
l
, 
i
, 
p
;

517 cÚ¡ 
ušt8_t
 *
d
;

519 ià(
ty³
 =ğ
DECOMP_TYPE_C1
) {

520 
»s
[0] = 
unicode_decomp_bË2
[
idx
];

523 
d
 = 
unicode_decomp_d©a
 + 
unicode_decomp_bË2
[
idx
];

524 
ty³
) {

525 
DECOMP_TYPE_L1
 ... 
DECOMP_TYPE_L7
:

526 
l
 = 
ty³
 - 
DECOMP_TYPE_L1
 + 1;

527 
d
 +ğ(
c
 - 
code
è* 
l
 * 2;

528 
i
 = 0; i < 
l
; i++) {

529 ià((
»s
[
i
] = 
	`unicode_g‘16
(
d
 + 2 * i)) == 0)

532  
l
;

533 
DECOMP_TYPE_LL1
 ... 
DECOMP_TYPE_LL2
:

535 
ušt32_t
 
k
, 
p
;

536 
l
 = 
ty³
 - 
DECOMP_TYPE_LL1
 + 1;

537 
k
 = (
c
 - 
code
è* 
l
;

538 
p
 = 
Ën
 * 
l
 * 2;

539 
i
 = 0; i < 
l
; i++) {

540 
c1
 = 
	`unicode_g‘16
(
d
 + 2 * 
k
) |

541 (((
d
[
p
 + (
k
 / 4)] >> ((k % 4) * 2)) & 3) << 16);

542 ià(!
c1
)

544 
»s
[
i
] = 
c1
;

545 
k
++;

548  
l
;

549 
DECOMP_TYPE_S1
 ... 
DECOMP_TYPE_S5
:

550 
l
 = 
ty³
 - 
DECOMP_TYPE_S1
 + 1;

551 
d
 +ğ(
c
 - 
code
è* 
l
;

552 
i
 = 0; i < 
l
; i++) {

553 ià((
»s
[
i
] = 
	`unicode_g‘_shÜt_code
(
d
[i])) == 0)

556  
l
;

557 
DECOMP_TYPE_I1
:

558 
l
 = 1;

559 
p
 = 0;

560 
decomp_ty³_i
;

561 
DECOMP_TYPE_I2_0
:

562 
DECOMP_TYPE_I2_1
:

563 
DECOMP_TYPE_I3_1
:

564 
DECOMP_TYPE_I3_2
:

565 
DECOMP_TYPE_I4_1
:

566 
DECOMP_TYPE_I4_2
:

567 
l
 = 2 + ((
ty³
 - 
DECOMP_TYPE_I2_0
) >> 1);

568 
p
 = ((
ty³
 - 
DECOMP_TYPE_I2_0
è& 1è+ (
l
 > 2);

569 
decomp_ty³_i
:

570 
i
 = 0; i < 
l
; i++) {

571 
c1
 = 
	`unicode_g‘16
(
d
 + 2 * 
i
);

572 ià(
i
 =ğ
p
)

573 
c1
 +ğ
c
 - 
code
;

574 
»s
[
i
] = 
c1
;

576  
l
;

577 
DECOMP_TYPE_B18
:

578 
l
 = 18;

579 
decomp_ty³_b
;

580 
DECOMP_TYPE_B1
 ... 
DECOMP_TYPE_B8
:

581 
l
 = 
ty³
 - 
DECOMP_TYPE_B1
 + 1;

582 
decomp_ty³_b
:

584 
ušt32_t
 
c_mš
;

585 
c_mš
 = 
	`unicode_g‘16
(
d
);

586 
d
 +ğ2 + (
c
 - 
code
è* 
l
;

587 
i
 = 0; i < 
l
; i++) {

588 
c1
 = 
d
[
i
];

589 ià(
c1
 == 0xff)

590 
c1
 = 0x20;

592 
c1
 +ğ
c_mš
;

593 
»s
[
i
] = 
c1
;

596  
l
;

597 
DECOMP_TYPE_LS2
:

598 
d
 +ğ(
c
 - 
code
) * 3;

599 ià(!(
»s
[0] = 
	`unicode_g‘16
(
d
)))

601 
»s
[1] = 
	`unicode_g‘_shÜt_code
(
d
[2]);

603 
DECOMP_TYPE_PAT3
:

604 
»s
[0] = 
	`unicode_g‘16
(
d
);

605 
»s
[2] = 
	`unicode_g‘16
(
d
 + 2);

606 
d
 +ğ4 + (
c
 - 
code
) * 2;

607 
»s
[1] = 
	`unicode_g‘16
(
d
);

609 
DECOMP_TYPE_S2_UL
:

610 
DECOMP_TYPE_LS2_UL
:

611 
c1
 = 
c
 - 
code
;

612 ià(
ty³
 =ğ
DECOMP_TYPE_S2_UL
) {

613 
d
 +ğ
c1
 & ~1;

614 
c
 = 
	`unicode_g‘_shÜt_code
(*
d
);

615 
d
++;

617 
d
 +ğ(
c1
 >> 1) * 3;

618 
c
 = 
	`unicode_g‘16
(
d
);

619 
d
 += 2;

621 ià(
c1
 & 1)

622 
c
 = 
	`unicode_g‘_low”_sim¶e
(c);

623 
»s
[0] = 
c
;

624 
»s
[1] = 
	`unicode_g‘_shÜt_code
(*
d
);

629 
	}
}

634 
	$unicode_decomp_ch¬
(
ušt32_t
 *
»s
, ušt32_ˆ
c
, 
BOOL
 
is_com·t1
)

636 
ušt32_t
 
v
, 
ty³
, 
is_com·t
, 
code
, 
Ën
;

637 
idx_mš
, 
idx_max
, 
idx
;

639 
idx_mš
 = 0;

640 
idx_max
 = 
	`couÁof
(
unicode_decomp_bË1
) - 1;

641 
idx_mš
 <ğ
idx_max
) {

642 
idx
 = (
idx_max
 + 
idx_mš
) / 2;

643 
v
 = 
unicode_decomp_bË1
[
idx
];

644 
code
 = 
v
 >> (32 - 18);

645 
Ën
 = (
v
 >> (32 - 18 - 7)) & 0x7f;

647 ià(
c
 < 
code
) {

648 
idx_max
 = 
idx
 - 1;

649 } ià(
c
 >ğ
code
 + 
Ën
) {

650 
idx_mš
 = 
idx
 + 1;

652 
is_com·t
 = 
v
 & 1;

653 ià(
is_com·t1
 < 
is_com·t
)

655 
ty³
 = (
v
 >> (32 - 18 - 7 - 6)) & 0x3f;

656  
	`unicode_decomp_’Œy
(
»s
, 
c
, 
idx
, 
code
, 
Ën
, 
ty³
);

660 
	}
}

663 
	$unicode_compo£_·œ
(
ušt32_t
 
c0
, ušt32_ˆ
c1
)

665 
ušt32_t
 
code
, 
Ën
, 
ty³
, 
v
, 
idx1
, 
d_idx
, 
d_off£t
, 
ch
;

666 
idx_mš
, 
idx_max
, 
idx
, 
d
;

667 
ušt32_t
 
·œ
[2];

669 
idx_mš
 = 0;

670 
idx_max
 = 
	`couÁof
(
unicode_comp_bË
) - 1;

671 
idx_mš
 <ğ
idx_max
) {

672 
idx
 = (
idx_max
 + 
idx_mš
) / 2;

673 
idx1
 = 
unicode_comp_bË
[
idx
];

676 
d_idx
 = 
idx1
 >> 6;

677 
d_off£t
 = 
idx1
 & 0x3f;

678 
v
 = 
unicode_decomp_bË1
[
d_idx
];

679 
code
 = 
v
 >> (32 - 18);

680 
Ën
 = (
v
 >> (32 - 18 - 7)) & 0x7f;

681 
ty³
 = (
v
 >> (32 - 18 - 7 - 6)) & 0x3f;

682 
ch
 = 
code
 + 
d_off£t
;

683 
	`unicode_decomp_’Œy
(
·œ
, 
ch
, 
d_idx
, 
code
, 
Ën
, 
ty³
);

684 
d
 = 
c0
 - 
·œ
[0];

685 ià(
d
 == 0)

686 
d
 = 
c1
 - 
·œ
[1];

687 ià(
d
 < 0) {

688 
idx_max
 = 
idx
 - 1;

689 } ià(
d
 > 0) {

690 
idx_mš
 = 
idx
 + 1;

692  
ch
;

696 
	}
}

699 
	$unicode_g‘_cc
(
ušt32_t
 
c
)

701 
ušt32_t
 
code
, 
n
, 
ty³
, 
cc
, 
c1
, 
b
;

702 
pos
;

703 cÚ¡ 
ušt8_t
 *
p
;

705 
pos
 = 
	`g‘_šdex_pos
(&
code
, 
c
,

706 
unicode_cc_šdex
, (unicode_cc_index) / 3);

707 ià(
pos
 < 0)

709 
p
 = 
unicode_cc_bË
 + 
pos
;

711 
b
 = *
p
++;

712 
ty³
 = 
b
 >> 6;

713 
n
 = 
b
 & 0x3f;

714 ià(
n
 < 48) {

715 } ià(
n
 < 56) {

716 
n
 = (n - 48) << 8;

717 
n
 |ğ*
p
++;

718 
n
 += 48;

720 
n
 = (n - 56) << 8;

721 
n
 |ğ*
p
++ << 8;

722 
n
 |ğ*
p
++;

723 
n
 += 48 + (1 << 11);

725 ià(
ty³
 <= 1)

726 
p
++;

727 
c1
 = 
code
 + 
n
 + 1;

728 ià(
c
 < 
c1
) {

729 
ty³
) {

731 
cc
 = 
p
[-1];

734 
cc
 = 
p
[-1] + 
c
 - 
code
;

737 
cc
 = 0;

741 
cc
 = 230;

744  
cc
;

746 
code
 = 
c1
;

748 
	}
}

750 
	$sÜt_cc
(*
buf
, 
Ën
)

752 
i
, 
j
, 
k
, 
cc
, 
cc1
, 
¡¬t
, 
ch1
;

754 
i
 = 0; i < 
Ën
; i++) {

755 
cc
 = 
	`unicode_g‘_cc
(
buf
[
i
]);

756 ià(
cc
 != 0) {

757 
¡¬t
 = 
i
;

758 
j
 = 
i
 + 1;

759 
j
 < 
Ën
) {

760 
ch1
 = 
buf
[
j
];

761 
cc1
 = 
	`unicode_g‘_cc
(
ch1
);

762 ià(
cc1
 == 0)

764 
k
 = 
j
 - 1;

765 
k
 >ğ
¡¬t
) {

766 ià(
	`unicode_g‘_cc
(
buf
[
k
]è<ğ
cc1
)

768 
buf
[
k
 + 1] = buf[k];

769 
k
--;

771 
buf
[
k
 + 1] = 
ch1
;

772 
j
++;

775 
	`´štf
("cc:");

776 
k
 = 
¡¬t
; k < 
j
; k++) {

777 
	`´štf
(" %3d", 
	`unicode_g‘_cc
(
buf
[
k
]));

779 
	`´štf
("\n");

781 
i
 = 
j
;

784 
	}
}

786 
	$to_nfd_»c
(
DynBuf
 *
dbuf
,

787 cÚ¡ *
¤c
, 
¤c_Ën
, 
is_com·t
)

789 
ušt32_t
 
c
, 
v
;

790 
i
, 
l
;

791 
ušt32_t
 
»s
[
UNICODE_DECOMP_LEN_MAX
];

793 
i
 = 0; i < 
¤c_Ën
; i++) {

794 
c
 = 
¤c
[
i
];

795 ià(
c
 >= 0xac00 && c < 0xd7a4) {

797 
c
 -= 0xac00;

798 
	`dbuf_put_u32
(
dbuf
, 0x1100 + 
c
 / 588);

799 
	`dbuf_put_u32
(
dbuf
, 0x1161 + (
c
 % 588) / 28);

800 
v
 = 
c
 % 28;

801 ià(
v
 != 0)

802 
	`dbuf_put_u32
(
dbuf
, 0x11a7 + 
v
);

804 
l
 = 
	`unicode_decomp_ch¬
(
»s
, 
c
, 
is_com·t
);

805 ià(
l
) {

806 
	`to_nfd_»c
(
dbuf
, (*)
»s
, 
l
, 
is_com·t
);

808 
	`dbuf_put_u32
(
dbuf
, 
c
);

812 
	}
}

815 
	$compo£_·œ
(
ušt32_t
 
c0
, ušt32_ˆ
c1
)

818 ià(
c0
 >= 0x1100 && c0 < 0x1100 + 19 &&

819 
c1
 >= 0x1161 && c1 < 0x1161 + 21) {

820  0xac00 + (
c0
 - 0x1100è* 588 + (
c1
 - 0x1161) * 28;

821 } ià(
c0
 >= 0xac00 && c0 < 0xac00 + 11172 &&

822 (
c0
 - 0xac00) % 28 == 0 &&

823 
c1
 >= 0x11a7 && c1 < 0x11a7 + 28) {

824  
c0
 + 
c1
 - 0x11a7;

826  
	`unicode_compo£_·œ
(
c0
, 
c1
);

828 
	}
}

830 
	$unicode_nÜm®ize
(
ušt32_t
 **
pd¡
, cÚ¡ ušt32_ˆ*
¤c
, 
¤c_Ën
,

831 
UnicodeNÜm®iz©iÚEnum
 
n_ty³
,

832 *
İaque
, 
DynBufR—ÎocFunc
 *
»®loc_func
)

834 *
buf
, 
buf_Ën
, 
i
, 
p
, 
¡¬‹r_pos
, 
cc
, 
Ï¡_cc
, 
out_Ën
;

835 
BOOL
 
is_com·t
;

836 
DynBuf
 
dbuf_s
, *
dbuf
 = &dbuf_s;

838 
is_com·t
 = 
n_ty³
 >> 1;

840 
	`dbuf_š™2
(
dbuf
, 
İaque
, 
»®loc_func
);

841 ià(
	`dbuf_»®loc
(
dbuf
, (è* 
¤c_Ën
))

842 
ç
;

845 ià(
n_ty³
 =ğ
UNICODE_NFC
) {

846 
i
 = 0; i < 
¤c_Ën
; i++) {

847 ià(
¤c
[
i
] >= 0x100)

848 
nÙ_Ïtš1
;

850 
buf
 = (*)
dbuf
->buf;

851 
	`memıy
(
buf
, 
¤c
, 
¤c_Ën
 * ());

852 *
pd¡
 = (
ušt32_t
 *)
buf
;

853  
¤c_Ën
;

854 
nÙ_Ïtš1
: ;

857 
	`to_nfd_»c
(
dbuf
, (cÚ¡ *)
¤c
, 
¤c_Ën
, 
is_com·t
);

858 ià(
	`dbuf_”rÜ
(
dbuf
)) {

859 
ç
:

860 *
pd¡
 = 
NULL
;

863 
buf
 = (*)
dbuf
->buf;

864 
buf_Ën
 = 
dbuf
->
size
 / ();

866 
	`sÜt_cc
(
buf
, 
buf_Ën
);

868 ià(
buf_Ën
 <ğ1 || (
n_ty³
 & 1) != 0) {

870 *
pd¡
 = (
ušt32_t
 *)
buf
;

871  
buf_Ën
;

874 
i
 = 1;

875 
out_Ën
 = 1;

876 
i
 < 
buf_Ën
) {

879 
Ï¡_cc
 = 
	`unicode_g‘_cc
(
buf
[
i
]);

880 
¡¬‹r_pos
 = 
out_Ën
 - 1;

881 
¡¬‹r_pos
 >= 0) {

882 
cc
 = 
	`unicode_g‘_cc
(
buf
[
¡¬‹r_pos
]);

883 ià(
cc
 == 0)

885 ià(
cc
 >ğ
Ï¡_cc
)

886 
Ãxt
;

887 
Ï¡_cc
 = 256;

888 
¡¬‹r_pos
--;

890 ià(
¡¬‹r_pos
 >= 0 &&

891 (
p
 = 
	`compo£_·œ
(
buf
[
¡¬‹r_pos
], buf[
i
])) != 0) {

892 
buf
[
¡¬‹r_pos
] = 
p
;

893 
i
++;

895 
Ãxt
:

896 
buf
[
out_Ën
++] = buf[
i
++];

899 *
pd¡
 = (
ušt32_t
 *)
buf
;

900  
out_Ën
;

901 
	}
}

905 
	$unicode_fšd_Çme
(cÚ¡ *
Çme_bË
, cÚ¡ *
Çme
)

907 cÚ¡ *
p
, *
r
;

908 
pos
;

909 
size_t
 
Çme_Ën
, 
Ën
;

911 
p
 = 
Çme_bË
;

912 
pos
 = 0;

913 
Çme_Ën
 = 
	`¡¾’
(
Çme
);

914 *
p
) {

916 
r
 = 
	`¡rchr
(
p
, ',');

917 ià(!
r
)

918 
Ën
 = 
	`¡¾’
(
p
);

920 
Ën
 = 
r
 - 
p
;

921 ià(
Ën
 =ğ
Çme_Ën
 && !
	`memcmp
(
p
, 
Çme
,‚ame_len))

922  
pos
;

923 
p
 +ğ
Ën
 + 1;

924 ià(!
r
)

927 
pos
++;

930 
	}
}

934 
	$unicode_süt
(
Ch¬Rªge
 *
ü
,

935 cÚ¡ *
süt_Çme
, 
BOOL
 
is_ext
)

937 
süt_idx
;

938 cÚ¡ 
ušt8_t
 *
p
, *
p_’d
;

939 
ušt32_t
 
c
, 
c1
, 
b
, 
n
, 
v
, 
v_Ën
, 
i
, 
ty³
;

940 
Ch¬Rªge
 
ü1_s
, *
ü1
;

941 
Ch¬Rªge
 
ü2_s
, *
ü2
 = &cr2_s;

942 
BOOL
 
is_commÚ
;

944 
süt_idx
 = 
	`unicode_fšd_Çme
(
unicode_süt_Çme_bË
, 
süt_Çme
);

945 ià(
süt_idx
 < 0)

948 
süt_idx
 +ğ
UNICODE_SCRIPT_Unknown
 + 1;

950 
is_commÚ
 = (
süt_idx
 =ğ
UNICODE_SCRIPT_CommÚ
 ||

951 
süt_idx
 =ğ
UNICODE_SCRIPT_Inh”™ed
);

952 ià(
is_ext
) {

953 
ü1
 = &
ü1_s
;

954 
	`ü_š™
(
ü1
, 
ü
->
mem_İaque
, cr->
»®loc_func
);

955 
	`ü_š™
(
ü2
, 
ü
->
mem_İaque
, cr->
»®loc_func
);

957 
ü1
 = 
ü
;

960 
p
 = 
unicode_süt_bË
;

961 
p_’d
 = 
unicode_süt_bË
 + 
	`couÁof
(unicode_script_table);

962 
c
 = 0;

963 
p
 < 
p_’d
) {

964 
b
 = *
p
++;

965 
ty³
 = 
b
 >> 7;

966 
n
 = 
b
 & 0x7f;

967 ià(
n
 < 96) {

968 } ià(
n
 < 112) {

969 
n
 = (n - 96) << 8;

970 
n
 |ğ*
p
++;

971 
n
 += 96;

973 
n
 = (n - 112) << 16;

974 
n
 |ğ*
p
++ << 8;

975 
n
 |ğ*
p
++;

976 
n
 += 96 + (1 << 12);

978 ià(
ty³
 == 0)

979 
v
 = 0;

981 
v
 = *
p
++;

982 
c1
 = 
c
 + 
n
 + 1;

983 ià(
v
 =ğ
süt_idx
) {

984 ià(
	`ü_add_š‹rv®
(
ü1
, 
c
, 
c1
))

985 
ç
;

987 
c
 = 
c1
;

990 ià(
is_ext
) {

992 
p
 = 
unicode_süt_ext_bË
;

993 
p_’d
 = 
unicode_süt_ext_bË
 + 
	`couÁof
(unicode_script_ext_table);

994 
c
 = 0;

995 
p
 < 
p_’d
) {

996 
b
 = *
p
++;

997 ià(
b
 < 128) {

998 
n
 = 
b
;

999 } ià(
b
 < 128 + 64) {

1000 
n
 = (
b
 - 128) << 8;

1001 
n
 |ğ*
p
++;

1002 
n
 += 128;

1004 
n
 = (
b
 - 128 - 64) << 16;

1005 
n
 |ğ*
p
++ << 8;

1006 
n
 |ğ*
p
++;

1007 
n
 += 128 + (1 << 14);

1009 
c1
 = 
c
 + 
n
 + 1;

1010 
v_Ën
 = *
p
++;

1011 ià(
is_commÚ
) {

1012 ià(
v_Ën
 != 0) {

1013 ià(
	`ü_add_š‹rv®
(
ü2
, 
c
, 
c1
))

1014 
ç
;

1017 
i
 = 0; i < 
v_Ën
; i++) {

1018 ià(
p
[
i
] =ğ
süt_idx
) {

1019 ià(
	`ü_add_š‹rv®
(
ü2
, 
c
, 
c1
))

1020 
ç
;

1025 
p
 +ğ
v_Ën
;

1026 
c
 = 
c1
;

1028 ià(
is_commÚ
) {

1030 ià(
	`ü_šv”t
(
ü2
))

1031 
ç
;

1032 ià(
	`ü_İ
(
ü
, 
ü1
->
pošts
, cr1->
Ën
, 
ü2
->points, cr2->len,

1033 
CR_OP_INTER
))

1034 
ç
;

1036 ià(
	`ü_İ
(
ü
, 
ü1
->
pošts
, cr1->
Ën
, 
ü2
->points, cr2->len,

1037 
CR_OP_UNION
))

1038 
ç
;

1040 
	`ü_ä“
(
ü1
);

1041 
	`ü_ä“
(
ü2
);

1044 
ç
:

1045 ià(
is_ext
) {

1046 
	`ü_ä“
(
ü1
);

1047 
	`ü_ä“
(
ü2
);

1049 
ç
;

1050 
	}
}

1052 
	#M
(
id
è(1U << 
UNICODE_GC_
 ## id)

	)

1054 
	$unicode_g’”®_ÿ‹gÜy1
(
Ch¬Rªge
 *
ü
, 
ušt32_t
 
gc_mask
)

1056 cÚ¡ 
ušt8_t
 *
p
, *
p_’d
;

1057 
ušt32_t
 
c
, 
c0
, 
b
, 
n
, 
v
;

1059 
p
 = 
unicode_gc_bË
;

1060 
p_’d
 = 
unicode_gc_bË
 + 
	`couÁof
(unicode_gc_table);

1061 
c
 = 0;

1062 
p
 < 
p_’d
) {

1063 
b
 = *
p
++;

1064 
n
 = 
b
 >> 5;

1065 
v
 = 
b
 & 0x1f;

1066 ià(
n
 == 7) {

1067 
n
 = *
p
++;

1068 ià(
n
 < 128) {

1069 
n
 += 7;

1070 } ià(
n
 < 128 + 64) {

1071 
n
 = (n - 128) << 8;

1072 
n
 |ğ*
p
++;

1073 
n
 += 7 + 128;

1075 
n
 = (n - 128 - 64) << 16;

1076 
n
 |ğ*
p
++ << 8;

1077 
n
 |ğ*
p
++;

1078 
n
 += 7 + 128 + (1 << 14);

1081 
c0
 = 
c
;

1082 
c
 +ğ
n
 + 1;

1083 ià(
v
 == 31) {

1085 
b
 = 
gc_mask
 & (
	`M
(
Lu
è| M(
Ll
));

1086 ià(
b
 != 0) {

1087 ià(
b
 =ğ(
	`M
(
Lu
è| M(
Ll
))) {

1088 
add_¿nge
;

1090 
c0
 +ğ((
gc_mask
 & 
	`M
(
Ll
)) != 0);

1091 ; 
c0
 < 
c
; c0 += 2) {

1092 ià(
	`ü_add_š‹rv®
(
ü
, 
c0
, c0 + 1))

1097 } ià((
gc_mask
 >> 
v
) & 1) {

1098 
add_¿nge
:

1099 ià(
	`ü_add_š‹rv®
(
ü
, 
c0
, 
c
))

1104 
	}
}

1106 
	$unicode_´İ1
(
Ch¬Rªge
 *
ü
, 
´İ_idx
)

1108 cÚ¡ 
ušt8_t
 *
p
, *
p_’d
;

1109 
ušt32_t
 
c
, 
c0
, 
b
, 
b™
;

1111 
p
 = 
unicode_´İ_bË
[
´İ_idx
];

1112 
p_’d
 = 
p
 + 
unicode_´İ_Ën_bË
[
´İ_idx
];

1113 
c
 = 0;

1114 
b™
 = 0;

1115 
p
 < 
p_’d
) {

1116 
c0
 = 
c
;

1117 
b
 = *
p
++;

1118 ià(
b
 < 64) {

1119 
c
 +ğ(
b
 >> 3) + 1;

1120 ià(
b™
) {

1121 ià(
	`ü_add_š‹rv®
(
ü
, 
c0
, 
c
))

1124 
b™
 ^= 1;

1125 
c0
 = 
c
;

1126 
c
 +ğ(
b
 & 7) + 1;

1127 } ià(
b
 >= 0x80) {

1128 
c
 +ğ
b
 - 0x80 + 1;

1129 } ià(
b
 < 0x60) {

1130 
c
 +ğ(((
b
 - 0x40è<< 8è| 
p
[0]) + 1;

1131 
p
++;

1133 
c
 +ğ(((
b
 - 0x60è<< 16è| (
p
[0] << 8) |…[1]) + 1;

1134 
p
 += 2;

1136 ià(
b™
) {

1137 ià(
	`ü_add_š‹rv®
(
ü
, 
c0
, 
c
))

1140 
b™
 ^= 1;

1143 
	}
}

1145 
	#CASE_U
 (1 << 0)

	)

1146 
	#CASE_L
 (1 << 1)

	)

1147 
	#CASE_F
 (1 << 2)

	)

1154 
	$unicode_ÿ£1
(
Ch¬Rªge
 *
ü
, 
ÿ£_mask
)

1156 
	#MR
(
x
è(1 << 
RUN_TYPE_
 ## x)

	)

1157 cÚ¡ 
ušt32_t
 
b_run_mask
[3] = {

1158 
	`MR
(
U
è| MR(
UF
è| MR(
UL
è| MR(
LSU
è| MR(
U2L_399_EXT2
è| MR(
UF_D20
) |

1159 
	`MR
(
UF_D1_EXT
è| MR(
U_EXT
è| MR(
U_EXT2
è| MR(
U_EXT3
),

1161 
	`MR
(
L
è| MR(
LF
è| MR(
UL
è| MR(
LSU
è| MR(
U2L_399_EXT2
è| MR(
LF_EXT
è| MR(
L_EXT2
),

1163 
	`MR
(
UF
è| MR(
LF
è| MR(
UL
è| MR(
LSU
è| MR(
U2L_399_EXT2
è| MR(
LF_EXT
è| MR(
UF_D20
è| MR(
UF_D1_EXT
) | MR(LF_EXT),

1165 #undeà
MR


1166 
ušt32_t
 
mask
, 
v
, 
code
, 
ty³
, 
Ën
, 
i
, 
idx
;

1168 ià(
ÿ£_mask
 == 0)

1170 
mask
 = 0;

1171 
i
 = 0; i < 3; i++) {

1172 ià((
ÿ£_mask
 >> 
i
) & 1)

1173 
mask
 |ğ
b_run_mask
[
i
];

1175 
idx
 = 0; idx < 
	`couÁof
(
ÿ£_cÚv_bË1
); idx++) {

1176 
v
 = 
ÿ£_cÚv_bË1
[
idx
];

1177 
ty³
 = (
v
 >> (32 - 17 - 7 - 4)) & 0xf;

1178 
code
 = 
v
 >> (32 - 17);

1179 
Ën
 = (
v
 >> (32 - 17 - 7)) & 0x7f;

1180 ià((
mask
 >> 
ty³
) & 1) {

1182 
ty³
) {

1183 
RUN_TYPE_UL
:

1184 ià((
ÿ£_mask
 & 
CASE_U
è&& (ÿ£_mask & (
CASE_L
 | 
CASE_F
)))

1185 
def_ÿ£
;

1186 
code
 +ğ((
ÿ£_mask
 & 
CASE_U
) != 0);

1187 
i
 = 0; i < 
Ën
; i += 2) {

1188 ià(
	`ü_add_š‹rv®
(
ü
, 
code
 + 
i
, code + i + 1))

1192 
RUN_TYPE_LSU
:

1193 ià((
ÿ£_mask
 & 
CASE_U
è&& (ÿ£_mask & (
CASE_L
 | 
CASE_F
)))

1194 
def_ÿ£
;

1195 ià(!(
ÿ£_mask
 & 
CASE_U
)) {

1196 ià(
	`ü_add_š‹rv®
(
ü
, 
code
, code + 1))

1199 ià(
	`ü_add_š‹rv®
(
ü
, 
code
 + 1, code + 2))

1201 ià(
ÿ£_mask
 & 
CASE_U
) {

1202 ià(
	`ü_add_š‹rv®
(
ü
, 
code
 + 2, code + 3))

1207 
def_ÿ£
:

1208 ià(
	`ü_add_š‹rv®
(
ü
, 
code
, cod+ 
Ën
))

1215 
	}
}

1218 
	mPOP_GC
,

1219 
	mPOP_PROP
,

1220 
	mPOP_CASE
,

1221 
	mPOP_UNION
,

1222 
	mPOP_INTER
,

1223 
	mPOP_XOR
,

1224 
	mPOP_INVERT
,

1225 
	mPOP_END
,

1226 } 
	tPrİOPEnum
;

1228 
	#POP_STACK_LEN_MAX
 4

	)

1230 
	$unicode_´İ_İs
(
Ch¬Rªge
 *
ü
, ...)

1232 
va_li¡
 
­
;

1233 
Ch¬Rªge
 
¡ack
[
POP_STACK_LEN_MAX
];

1234 
¡ack_Ën
, 
İ
, 
»t
, 
i
;

1235 
ušt32_t
 
a
;

1237 
	`va_¡¬t
(
­
, 
ü
);

1238 
¡ack_Ën
 = 0;

1240 
İ
 = 
	`va_¬g
(
­
, );

1241 
İ
) {

1242 
POP_GC
:

1243 
	`as£¹
(
¡ack_Ën
 < 
POP_STACK_LEN_MAX
);

1244 
a
 = 
	`va_¬g
(
­
, );

1245 
	`ü_š™
(&
¡ack
[
¡ack_Ën
++], 
ü
->
mem_İaque
, cr->
»®loc_func
);

1246 ià(
	`unicode_g’”®_ÿ‹gÜy1
(&
¡ack
[
¡ack_Ën
 - 1], 
a
))

1247 
ç
;

1249 
POP_PROP
:

1250 
	`as£¹
(
¡ack_Ën
 < 
POP_STACK_LEN_MAX
);

1251 
a
 = 
	`va_¬g
(
­
, );

1252 
	`ü_š™
(&
¡ack
[
¡ack_Ën
++], 
ü
->
mem_İaque
, cr->
»®loc_func
);

1253 ià(
	`unicode_´İ1
(&
¡ack
[
¡ack_Ën
 - 1], 
a
))

1254 
ç
;

1256 
POP_CASE
:

1257 
	`as£¹
(
¡ack_Ën
 < 
POP_STACK_LEN_MAX
);

1258 
a
 = 
	`va_¬g
(
­
, );

1259 
	`ü_š™
(&
¡ack
[
¡ack_Ën
++], 
ü
->
mem_İaque
, cr->
»®loc_func
);

1260 ià(
	`unicode_ÿ£1
(&
¡ack
[
¡ack_Ën
 - 1], 
a
))

1261 
ç
;

1263 
POP_UNION
:

1264 
POP_INTER
:

1265 
POP_XOR
:

1267 
Ch¬Rªge
 *
ü1
, *
ü2
, *
ü3
;

1268 
	`as£¹
(
¡ack_Ën
 >= 2);

1269 
	`as£¹
(
¡ack_Ën
 < 
POP_STACK_LEN_MAX
);

1270 
ü1
 = &
¡ack
[
¡ack_Ën
 - 2];

1271 
ü2
 = &
¡ack
[
¡ack_Ën
 - 1];

1272 
ü3
 = &
¡ack
[
¡ack_Ën
++];

1273 
	`ü_š™
(
ü3
, 
ü
->
mem_İaque
, cr->
»®loc_func
);

1274 ià(
	`ü_İ
(
ü3
, 
ü1
->
pošts
, cr1->
Ën
,

1275 
ü2
->
pošts
, cr2->
Ën
, 
İ
 - 
POP_UNION
 + 
CR_OP_UNION
))

1276 
ç
;

1277 
	`ü_ä“
(
ü1
);

1278 
	`ü_ä“
(
ü2
);

1279 *
ü1
 = *
ü3
;

1280 
¡ack_Ën
 -= 2;

1283 
POP_INVERT
:

1284 
	`as£¹
(
¡ack_Ën
 >= 1);

1285 ià(
	`ü_šv”t
(&
¡ack
[
¡ack_Ën
 - 1]))

1286 
ç
;

1288 
POP_END
:

1289 
dÚe
;

1291 
	`abÜt
();

1294 
dÚe
:

1295 
	`as£¹
(
¡ack_Ën
 == 1);

1296 
»t
 = 
	`ü_cİy
(
ü
, &
¡ack
[0]);

1297 
	`ü_ä“
(&
¡ack
[0]);

1298  
»t
;

1299 
ç
:

1300 
i
 = 0; i < 
¡ack_Ën
; i++)

1301 
	`ü_ä“
(&
¡ack
[
i
]);

1303 
	}
}

1305 cÚ¡ 
ušt32_t
 
	gunicode_gc_mask_bË
[] = {

1306 
M
(
Lu
è| M(
Ll
è| M(
Lt
),

1307 
M
(
Lu
è| M(
Ll
è| M(
Lt
è| M(
Lm
è| M(
Lo
),

1308 
M
(
Mn
è| M(
Mc
è| M(
Me
),

1309 
M
(
Nd
è| M(
Nl
è| M(
No
),

1310 
M
(
Sm
è| M(
Sc
è| M(
Sk
è| M(
So
),

1311 
M
(
Pc
è| M(
Pd
è| M(
Ps
è| M(
Pe
è| M(
Pi
è| M(
Pf
è| M(
Po
),

1312 
M
(
Zs
è| M(
Zl
è| M(
Zp
),

1313 
M
(
Cc
è| M(
Cf
è| M(
Cs
è| M(
Co
è| M(
Cn
),

1318 
	$unicode_g’”®_ÿ‹gÜy
(
Ch¬Rªge
 *
ü
, cÚ¡ *
gc_Çme
)

1320 
gc_idx
;

1321 
ušt32_t
 
gc_mask
;

1323 
gc_idx
 = 
	`unicode_fšd_Çme
(
unicode_gc_Çme_bË
, 
gc_Çme
);

1324 ià(
gc_idx
 < 0)

1326 ià(
gc_idx
 <ğ
UNICODE_GC_Co
) {

1327 
gc_mask
 = (
ušt64_t
)1 << 
gc_idx
;

1329 
gc_mask
 = 
unicode_gc_mask_bË
[
gc_idx
 - 
UNICODE_GC_LC
];

1331  
	`unicode_g’”®_ÿ‹gÜy1
(
ü
, 
gc_mask
);

1332 
	}
}

1337 
	$unicode_´İ
(
Ch¬Rªge
 *
ü
, cÚ¡ *
´İ_Çme
)

1339 
´İ_idx
, 
»t
;

1341 
´İ_idx
 = 
	`unicode_fšd_Çme
(
unicode_´İ_Çme_bË
, 
´İ_Çme
);

1342 ià(
´İ_idx
 < 0)

1344 
´İ_idx
 +ğ
UNICODE_PROP_ASCII_Hex_Dig™
;

1346 
»t
 = 0;

1347 
´İ_idx
) {

1348 
UNICODE_PROP_ASCII
:

1349 ià(
	`ü_add_š‹rv®
(
ü
, 0x00, 0x7f + 1))

1352 
UNICODE_PROP_Any
:

1353 ià(
	`ü_add_š‹rv®
(
ü
, 0x00000, 0x10ffff + 1))

1356 
UNICODE_PROP_AssigÃd
:

1357 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1358 
POP_GC
, 
	`M
(
Cn
),

1359 
POP_INVERT
,

1360 
POP_END
);

1362 
UNICODE_PROP_M©h
:

1363 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1364 
POP_GC
, 
	`M
(
Sm
),

1365 
POP_PROP
, 
UNICODE_PROP_Oth”_M©h
,

1366 
POP_UNION
,

1367 
POP_END
);

1369 
UNICODE_PROP_Low”ÿ£
:

1370 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1371 
POP_GC
, 
	`M
(
Ll
),

1372 
POP_PROP
, 
UNICODE_PROP_Oth”_Low”ÿ£
,

1373 
POP_UNION
,

1374 
POP_END
);

1376 
UNICODE_PROP_Uµ”ÿ£
:

1377 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1378 
POP_GC
, 
	`M
(
Lu
),

1379 
POP_PROP
, 
UNICODE_PROP_Oth”_Uµ”ÿ£
,

1380 
POP_UNION
,

1381 
POP_END
);

1383 
UNICODE_PROP_Ca£d
:

1384 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1385 
POP_GC
, 
	`M
(
Lu
è| M(
Ll
è| M(
Lt
),

1386 
POP_PROP
, 
UNICODE_PROP_Oth”_Uµ”ÿ£
,

1387 
POP_UNION
,

1388 
POP_PROP
, 
UNICODE_PROP_Oth”_Low”ÿ£
,

1389 
POP_UNION
,

1390 
POP_END
);

1392 
UNICODE_PROP_AÍhab‘ic
:

1393 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1394 
POP_GC
, 
	`M
(
Lu
è| M(
Ll
è| M(
Lt
è| M(
Lm
è| M(
Lo
è| M(
Nl
),

1395 
POP_PROP
, 
UNICODE_PROP_Oth”_Uµ”ÿ£
,

1396 
POP_UNION
,

1397 
POP_PROP
, 
UNICODE_PROP_Oth”_Low”ÿ£
,

1398 
POP_UNION
,

1399 
POP_PROP
, 
UNICODE_PROP_Oth”_AÍhab‘ic
,

1400 
POP_UNION
,

1401 
POP_END
);

1403 
UNICODE_PROP_G¿pheme_Ba£
:

1404 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1405 
POP_GC
, 
	`M
(
Cc
è| M(
Cf
è| M(
Cs
è| M(
Co
è| M(
Cn
è| M(
Zl
è| M(
Zp
è| M(
Me
è| M(
Mn
),

1406 
POP_PROP
, 
UNICODE_PROP_Oth”_G¿pheme_Ex‹nd
,

1407 
POP_UNION
,

1408 
POP_INVERT
,

1409 
POP_END
);

1411 
UNICODE_PROP_G¿pheme_Ex‹nd
:

1412 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1413 
POP_GC
, 
	`M
(
Me
è| M(
Mn
),

1414 
POP_PROP
, 
UNICODE_PROP_Oth”_G¿pheme_Ex‹nd
,

1415 
POP_UNION
,

1416 
POP_END
);

1418 
UNICODE_PROP_XID_S¹
:

1419 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1420 
POP_GC
, 
	`M
(
Lu
è| M(
Ll
è| M(
Lt
è| M(
Lm
è| M(
Lo
è| M(
Nl
),

1421 
POP_PROP
, 
UNICODE_PROP_Oth”_ID_S¹
,

1422 
POP_UNION
,

1423 
POP_PROP
, 
UNICODE_PROP_P©‹º_SyÁax
,

1424 
POP_PROP
, 
UNICODE_PROP_P©‹º_Wh™e_S·û
,

1425 
POP_UNION
,

1426 
POP_PROP
, 
UNICODE_PROP_XID_S¹1
,

1427 
POP_UNION
,

1428 
POP_INVERT
,

1429 
POP_INTER
,

1430 
POP_END
);

1432 
UNICODE_PROP_XID_CÚtšue
:

1433 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1434 
POP_GC
, 
	`M
(
Lu
è| M(
Ll
è| M(
Lt
è| M(
Lm
è| M(
Lo
è| M(
Nl
) |

1435 
	`M
(
Mn
è| M(
Mc
è| M(
Nd
è| M(
Pc
),

1436 
POP_PROP
, 
UNICODE_PROP_Oth”_ID_S¹
,

1437 
POP_UNION
,

1438 
POP_PROP
, 
UNICODE_PROP_Oth”_ID_CÚtšue
,

1439 
POP_UNION
,

1440 
POP_PROP
, 
UNICODE_PROP_P©‹º_SyÁax
,

1441 
POP_PROP
, 
UNICODE_PROP_P©‹º_Wh™e_S·û
,

1442 
POP_UNION
,

1443 
POP_PROP
, 
UNICODE_PROP_XID_CÚtšue1
,

1444 
POP_UNION
,

1445 
POP_INVERT
,

1446 
POP_INTER
,

1447 
POP_END
);

1449 
UNICODE_PROP_Chªges_Wh’_Uµ”ÿ£d
:

1450 
»t
 = 
	`unicode_ÿ£1
(
ü
, 
CASE_U
);

1452 
UNICODE_PROP_Chªges_Wh’_Low”ÿ£d
:

1453 
»t
 = 
	`unicode_ÿ£1
(
ü
, 
CASE_L
);

1455 
UNICODE_PROP_Chªges_Wh’_Ca£m­³d
:

1456 
»t
 = 
	`unicode_ÿ£1
(
ü
, 
CASE_U
 | 
CASE_L
 | 
CASE_F
);

1458 
UNICODE_PROP_Chªges_Wh’_T™Ëÿ£d
:

1459 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1460 
POP_CASE
, 
CASE_U
,

1461 
POP_PROP
, 
UNICODE_PROP_Chªges_Wh’_T™Ëÿ£d1
,

1462 
POP_XOR
,

1463 
POP_END
);

1465 
UNICODE_PROP_Chªges_Wh’_Ca£fŞded
:

1466 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1467 
POP_CASE
, 
CASE_F
,

1468 
POP_PROP
, 
UNICODE_PROP_Chªges_Wh’_Ca£fŞded1
,

1469 
POP_XOR
,

1470 
POP_END
);

1472 
UNICODE_PROP_Chªges_Wh’_NFKC_Ca£fŞded
:

1473 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1474 
POP_CASE
, 
CASE_F
,

1475 
POP_PROP
, 
UNICODE_PROP_Chªges_Wh’_NFKC_Ca£fŞded1
,

1476 
POP_XOR
,

1477 
POP_END
);

1480 
UNICODE_PROP_ID_S¹
:

1481 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1482 
POP_GC
, 
	`M
(
Lu
è| M(
Ll
è| M(
Lt
è| M(
Lm
è| M(
Lo
è| M(
Nl
),

1483 
POP_PROP
, 
UNICODE_PROP_Oth”_ID_S¹
,

1484 
POP_UNION
,

1485 
POP_PROP
, 
UNICODE_PROP_P©‹º_SyÁax
,

1486 
POP_PROP
, 
UNICODE_PROP_P©‹º_Wh™e_S·û
,

1487 
POP_UNION
,

1488 
POP_INVERT
,

1489 
POP_INTER
,

1490 
POP_END
);

1492 
UNICODE_PROP_ID_CÚtšue
:

1493 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1494 
POP_GC
, 
	`M
(
Lu
è| M(
Ll
è| M(
Lt
è| M(
Lm
è| M(
Lo
è| M(
Nl
) |

1495 
	`M
(
Mn
è| M(
Mc
è| M(
Nd
è| M(
Pc
),

1496 
POP_PROP
, 
UNICODE_PROP_Oth”_ID_S¹
,

1497 
POP_UNION
,

1498 
POP_PROP
, 
UNICODE_PROP_Oth”_ID_CÚtšue
,

1499 
POP_UNION
,

1500 
POP_PROP
, 
UNICODE_PROP_P©‹º_SyÁax
,

1501 
POP_PROP
, 
UNICODE_PROP_P©‹º_Wh™e_S·û
,

1502 
POP_UNION
,

1503 
POP_INVERT
,

1504 
POP_INTER
,

1505 
POP_END
);

1507 
UNICODE_PROP_Ca£_IgnÜabË
:

1508 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1509 
POP_GC
, 
	`M
(
Mn
è| M(
Cf
è| M(
Lm
è| M(
Sk
),

1510 
POP_PROP
, 
UNICODE_PROP_Ca£_IgnÜabË1
,

1511 
POP_XOR
,

1512 
POP_END
);

1516 
UNICODE_PROP_ID_CÚtšue
:

1517 
»t
 = 
	`unicode_´İ_İs
(
ü
,

1518 
POP_PROP
, 
UNICODE_PROP_ID_S¹
,

1519 
POP_PROP
, 
UNICODE_PROP_ID_CÚtšue1
,

1520 
POP_XOR
,

1521 
POP_END
);

1525 ià(
´İ_idx
 >ğ
	`couÁof
(
unicode_´İ_bË
))

1527 
»t
 = 
	`unicode_´İ1
(
ü
, 
´İ_idx
);

1530  
»t
;

1531 
	}
}

	@main.c

1 
	~<Çutus/Çutus.h
>

2 
	~<Çutus/sh–l.h
>

5 
	$’Œy
(* 
buf
, * 
´iv
) {

6 
	`´štk
("TEST\n");

8 
	}
}

10 
sh–l_cmd_im¶
 
	gjs_im¶
 = {

11 .
cmd
 = "js",

12 .
	gh–p_¡r
 = "js",

13 .
	ghªdËr
 = 
’Œy


16 
nk_»gi¡”_sh–l_cmd
(
js_im¶
);

	@qjs.c

26 
	~<¡d¬g.h
>

28 
	~<Çutus/mm.h
>

31 
	~<as£¹.h
>

33 
	~<¹/js/quickjs-libc.h
>

40 cÚ¡ 
ušt8_t
 
qjsc_»¶
[];

41 cÚ¡ 
ušt32_t
 
qjsc_»¶_size
;

42 #ifdeà
CONFIG_BIGNUM


43 cÚ¡ 
ušt8_t
 
qjsc_qjsÿlc
[];

44 cÚ¡ 
ušt32_t
 
qjsc_qjsÿlc_size
;

47 
	$ev®_buf
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
, 
buf_Ën
,

48 cÚ¡ *
f’ame
, 
ev®_æags
)

50 
JSV®ue
 
v®
;

51 
»t
;

53 ià((
ev®_æags
 & 
JS_EVAL_TYPE_MASK
è=ğ
JS_EVAL_TYPE_MODULE
) {

56 
v®
 = 
	`JS_Ev®
(
ùx
, 
buf
, 
buf_Ën
, 
f’ame
,

57 
ev®_æags
 | 
JS_EVAL_FLAG_COMPILE_ONLY
);

58 ià(!
	`JS_IsExû±iÚ
(
v®
)) {

59 
	`js_moduË_£t_impÜt_m‘a
(
ùx
, 
v®
, 
TRUE
, TRUE);

60 
v®
 = 
	`JS_Ev®FunùiÚ
(
ùx
, val);

63 
v®
 = 
	`JS_Ev®
(
ùx
, 
buf
, 
buf_Ën
, 
f’ame
, 
ev®_æags
);

65 ià(
	`JS_IsExû±iÚ
(
v®
)) {

66 
	`js_¡d_dump_”rÜ
(
ùx
);

67 
»t
 = -1;

69 
»t
 = 0;

71 
	`JS_F»eV®ue
(
ùx
, 
v®
);

72  
»t
;

73 
	}
}

75 
	$ev®_fe
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
f’ame
, 
moduË
)

77 
ušt8_t
 *
buf
;

78 
»t
, 
ev®_æags
;

79 
size_t
 
buf_Ën
;

81 
buf
 = 
	`js_lßd_fe
(
ùx
, &
buf_Ën
, 
f’ame
);

82 ià(!
buf
) {

83 
	`³¼Ü
(
f’ame
);

84 
	`ex™
(1);

87 ià(
moduË
 < 0) {

88 
moduË
 = (
	`has_suffix
(
f’ame
, ".mjs") ||

89 
	`JS_D‘eùModuË
((cÚ¡ *)
buf
, 
buf_Ën
));

91 ià(
moduË
)

92 
ev®_æags
 = 
JS_EVAL_TYPE_MODULE
;

94 
ev®_æags
 = 
JS_EVAL_TYPE_GLOBAL
;

95 
»t
 = 
	`ev®_buf
(
ùx
, 
buf
, 
buf_Ën
, 
f’ame
, 
ev®_æags
);

96 
	`js_ä“
(
ùx
, 
buf
);

97  
»t
;

98 
	}
}

100 #ià
defšed
(
__APPLE__
)

101 
	#MALLOC_OVERHEAD
 0

	)

103 
	#MALLOC_OVERHEAD
 8

	)

106 
	sŒaû_m®loc_d©a
 {

107 
ušt8_t
 *
	mba£
;

110 
šlše
 
	$js_Œaû_m®loc_±r_off£t
(
ušt8_t
 *
±r
,

111 
Œaû_m®loc_d©a
 *
dp
)

113  
±r
 - 
dp
->
ba£
;

114 
	}
}

117 
šlše
 
size_t
 
	$js_Œaû_m®loc_u§bË_size
(*
±r
)

119 #ià
	`defšed
(
__APPLE__
)

120  
	`m®loc_size
(
±r
);

121 #–ià
	`defšed
(
_WIN32
)

122  
	`_msize
(
±r
);

123 #–ià
	`defšed
(
EMSCRIPTEN
)

125 #–ià
	`defšed
(
__lšux__
)

126  
	`m®loc_u§bË_size
(
±r
);

129  
	`m®loc_u§bË_size
(
±r
);

131 
	}
}

133 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3)))

134 
	$js_Œaû_m®loc_´štf
(
JSM®locS‹
 *
s
, cÚ¡ *
fmt
, ...)

136 
va_li¡
 
­
;

137 
c
;

139 
	`va_¡¬t
(
­
, 
fmt
);

140 (
c
 = *
fmt
++) != '\0') {

141 ià(
c
 == '%') {

143 ià(*
fmt
 == 'p') {

144 
ušt8_t
 *
±r
 = 
	`va_¬g
(
­
, *);

145 ià(
±r
 =ğ
NULL
) {

146 
	`´štf
("NULL");

148 
	`´štf
("H%+06lld.%zd",

149 
	`js_Œaû_m®loc_±r_off£t
(
±r
, 
s
->
İaque
),

150 
	`js_Œaû_m®loc_u§bË_size
(
±r
));

152 
fmt
++;

155 ià(
fmt
[0] == 'z' && fmt[1] == 'd') {

156 
size_t
 
sz
 = 
	`va_¬g
(
­
, size_t);

157 
	`´štf
("%zd", 
sz
);

158 
fmt
 += 2;

162 
	`putc
(
c
, 
¡dout
);

164 
	`va_’d
(
­
);

165 
	}
}

167 
	$js_Œaû_m®loc_š™
(
Œaû_m®loc_d©a
 *
s
)

169 
	`ä“
(
s
->
ba£
 = 
	`m®loc
(8));

170 
	}
}

172 *
	$js_Œaû_m®loc
(
JSM®locS‹
 *
s
, 
size_t
 
size
)

174 *
±r
;

177 
	`as£¹
(
size
 != 0);

179 ià(
	`uÆik–y
(
s
->
m®loc_size
 + 
size
 > s->
m®loc_lim™
))

180  
NULL
;

181 
±r
 = 
	`m®loc
(
size
);

182 
	`js_Œaû_m®loc_´štf
(
s
, "A %zd -> %p\n", 
size
, 
±r
);

183 ià(
±r
) {

184 
s
->
m®loc_couÁ
++;

185 
s
->
m®loc_size
 +ğ
	`js_Œaû_m®loc_u§bË_size
(
±r
è+ 
MALLOC_OVERHEAD
;

187  
±r
;

188 
	}
}

190 
	$js_Œaû_ä“
(
JSM®locS‹
 *
s
, *
±r
)

192 ià(!
±r
)

195 
	`js_Œaû_m®loc_´štf
(
s
, "F %p\n", 
±r
);

196 
s
->
m®loc_couÁ
--;

197 
s
->
m®loc_size
 -ğ
	`js_Œaû_m®loc_u§bË_size
(
±r
è+ 
MALLOC_OVERHEAD
;

198 
	`ä“
(
±r
);

199 
	}
}

201 *
	$js_Œaû_»®loc
(
JSM®locS‹
 *
s
, *
±r
, 
size_t
 
size
)

203 
size_t
 
Şd_size
;

205 ià(!
±r
) {

206 ià(
size
 == 0)

207  
NULL
;

208  
	`js_Œaû_m®loc
(
s
, 
size
);

210 
Şd_size
 = 
	`js_Œaû_m®loc_u§bË_size
(
±r
);

211 ià(
size
 == 0) {

212 
	`js_Œaû_m®loc_´štf
(
s
, "R %zd %p\n", 
size
, 
±r
);

213 
s
->
m®loc_couÁ
--;

214 
s
->
m®loc_size
 -ğ
Şd_size
 + 
MALLOC_OVERHEAD
;

215 
	`ä“
(
±r
);

216  
NULL
;

218 ià(
s
->
m®loc_size
 + 
size
 - 
Şd_size
 > s->
m®loc_lim™
)

219  
NULL
;

221 
	`js_Œaû_m®loc_´štf
(
s
, "R %zd %p", 
size
, 
±r
);

223 
±r
 = 
	`»®loc
ÕŒ, 
size
);

224 
	`js_Œaû_m®loc_´štf
(
s
, " -> %p\n", 
±r
);

225 ià(
±r
) {

226 
s
->
m®loc_size
 +ğ
	`js_Œaû_m®loc_u§bË_size
(
±r
è- 
Şd_size
;

228  
±r
;

229 
	}
}

231 cÚ¡ 
JSM®locFunùiÚs
 
	gŒaû_mf
 = {

232 
js_Œaû_m®loc
,

233 
js_Œaû_ä“
,

234 
js_Œaû_»®loc
,

235 (
size_t
 (*)(cÚ¡ *))
kmem_m®loc_u§bË_size
,

238 
	#PROG_NAME
 "qjs"

	)

240 
	$h–p
()

242 
	`´štf
("QuickJS version %s\n"

243 "u§ge: " 
PROG_NAME
 " [options] [file [args]]\n"

251 #ifdeà
CONFIG_BIGNUM


260 
	`ex™
(1);

261 
	}
}

263 
	$js_maš
(
¬gc
, **
¬gv
)

265 
JSRuÁime
 *
¹
;

266 
JSCÚ‹xt
 *
ùx
;

267 
Œaû_m®loc_d©a
 
Œaû_d©a
 = { 
NULL
 };

268 
İtšd
;

269 *
ex´
 = 
NULL
;

270 
š‹¿ùive
 = 0;

271 
dump_memÜy
 = 0;

272 
Œaû_memÜy
 = 0;

273 
em±y_run
 = 0;

274 
moduË
 = -1;

275 
lßd_¡d
 = 0;

276 
dump_unhªdËd_´omi£_»jeùiÚ
 = 0;

277 
size_t
 
memÜy_lim™
 = 0;

278 *
šşude_li¡
[32];

279 
i
, 
šşude_couÁ
 = 0;

280 #ifdeà
CONFIG_BIGNUM


281 
lßd_jsÿlc
, 
bignum_ext
 = 0;

284 #ifdeà
CONFIG_BIGNUM


287 cÚ¡ *
p
, *
ex’ame
;

288 
ex’ame
 = 
¬gv
[0];

289 
p
 = 
	`¡¼chr
(
ex’ame
, '/');

290 ià(
p
)

291 
ex’ame
 = 
p
 + 1;

292 
lßd_jsÿlc
 = !
	`¡rcmp
(
ex’ame
, "qjscalc");

298 
İtšd
 = 1;

299 
İtšd
 < 
¬gc
 && *
¬gv
[optind] == '-') {

300 *
¬g
 = 
¬gv
[
İtšd
] + 1;

301 cÚ¡ *
lÚgİt
 = "";

303 ià(!*
¬g
)

305 
İtšd
++;

306 ià(*
¬g
 == '-') {

307 
lÚgİt
 = 
¬g
 + 1;

308 
¬g
 +ğ
	`¡¾’
(arg);

310 ià(!*
lÚgİt
)

313 ; *
¬g
 || *
lÚgİt
;†ongopt = "") {

314 
İt
 = *
¬g
;

315 ià(
İt
)

316 
¬g
++;

317 ià(
İt
 =ğ'h' || o± =ğ'?' || !
	`¡rcmp
(
lÚgİt
, "help")) {

318 
	`h–p
();

321 ià(
İt
 =ğ'e' || !
	`¡rcmp
(
lÚgİt
, "eval")) {

322 ià(*
¬g
) {

323 
ex´
 = 
¬g
;

326 ià(
İtšd
 < 
¬gc
) {

327 
ex´
 = 
¬gv
[
İtšd
++];

330 
	`årštf
(
¡d”r
, "qjs: missingƒxpression for -e\n");

331 
	`ex™
(2);

333 ià(
İt
 =ğ'I' || !
	`¡rcmp
(
lÚgİt
, "include")) {

334 ià(
İtšd
 >ğ
¬gc
) {

335 
	`årštf
(
¡d”r
, "expecting filename");

336 
	`ex™
(1);

338 ià(
šşude_couÁ
 >ğ
	`couÁof
(
šşude_li¡
)) {

339 
	`årštf
(
¡d”r
, "too many included files");

340 
	`ex™
(1);

342 
šşude_li¡
[
šşude_couÁ
++] = 
¬gv
[
İtšd
++];

345 ià(
İt
 =ğ'i' || !
	`¡rcmp
(
lÚgİt
, "interactive")) {

346 
š‹¿ùive
++;

349 ià(
İt
 =ğ'm' || !
	`¡rcmp
(
lÚgİt
, "module")) {

350 
moduË
 = 1;

353 ià(!
	`¡rcmp
(
lÚgİt
, "script")) {

354 
moduË
 = 0;

357 ià(
İt
 =ğ'd' || !
	`¡rcmp
(
lÚgİt
, "dump")) {

358 
dump_memÜy
++;

361 ià(
İt
 =ğ'T' || !
	`¡rcmp
(
lÚgİt
, "trace")) {

362 
Œaû_memÜy
++;

365 ià(!
	`¡rcmp
(
lÚgİt
, "std")) {

366 
lßd_¡d
 = 1;

369 ià(!
	`¡rcmp
(
lÚgİt
, "unhandled-rejection")) {

370 
dump_unhªdËd_´omi£_»jeùiÚ
 = 1;

373 #ifdeà
CONFIG_BIGNUM


374 ià(!
	`¡rcmp
(
lÚgİt
, "bignum")) {

375 
bignum_ext
 = 1;

378 ià(!
	`¡rcmp
(
lÚgİt
, "qjscalc")) {

379 
lßd_jsÿlc
 = 1;

383 ià(
İt
 =ğ'q' || !
	`¡rcmp
(
lÚgİt
, "quit")) {

384 
em±y_run
++;

387 ià(!
	`¡rcmp
(
lÚgİt
, "memory-limit")) {

388 ià(
İtšd
 >ğ
¬gc
) {

389 
	`årštf
(
¡d”r
, "expecting memory†imit");

390 
	`ex™
(1);

392 
memÜy_lim™
 = (
size_t
)
	`¡¹od
(
¬gv
[
İtšd
++], 
NULL
);

395 ià(
İt
) {

396 
	`årštf
(
¡d”r
, "qjs: unknowÀİtiÚ '-%c'\n", 
İt
);

398 
	`årštf
(
¡d”r
, "qjs: unknowÀİtiÚ '--%s'\n", 
lÚgİt
);

400 
	`h–p
();

404 ià(
Œaû_memÜy
) {

405 
	`js_Œaû_m®loc_š™
(&
Œaû_d©a
);

406 
¹
 = 
	`JS_NewRuÁime2
(&
Œaû_mf
, &
Œaû_d©a
);

408 
¹
 = 
	`JS_NewRuÁime
();

410 ià(!
¹
) {

411 
	`årštf
(
¡d”r
, "qjs: cannot‡llocate JS„untime\n");

412 
	`ex™
(2);

414 ià(
memÜy_lim™
 != 0)

415 
	`JS_S‘MemÜyLim™
(
¹
, 
memÜy_lim™
);

416 
ùx
 = 
	`JS_NewCÚ‹xt
(
¹
);

417 ià(!
ùx
) {

418 
	`årštf
(
¡d”r
, "qjs: cannot‡llocate JS context\n");

419 
	`ex™
(2);

422 #ifdeà
CONFIG_BIGNUM


423 ià(
bignum_ext
 || 
lßd_jsÿlc
) {

424 
	`JS_AddIÁršsicBigFlßt
(
ùx
);

425 
	`JS_AddIÁršsicBigDecim®
(
ùx
);

426 
	`JS_AddIÁršsicO³¿tÜs
(
ùx
);

427 
	`JS_EÇbËBignumExt
(
ùx
, 
TRUE
);

432 
	`JS_S‘ModuËLßd”Func
(
¹
, 
NULL
, 
js_moduË_lßd”
, NULL);

434 ià(
dump_unhªdËd_´omi£_»jeùiÚ
) {

435 
	`JS_S‘Ho¡Promi£RejeùiÚT¿ck”
(
¹
, 
js_¡d_´omi£_»jeùiÚ_Œack”
,

436 
NULL
);

439 ià(!
em±y_run
) {

440 #ifdeà
CONFIG_BIGNUM


441 ià(
lßd_jsÿlc
) {

442 
	`js_¡d_ev®_bš¬y
(
ùx
, 
qjsc_qjsÿlc
, 
qjsc_qjsÿlc_size
, 0);

445 
	`js_¡d_add_h–³rs
(
ùx
, 
¬gc
 - 
İtšd
, 
¬gv
 + optind);

448 
	`js_š™_moduË_¡d
(
ùx
, "std");

449 
	`js_š™_moduË_os
(
ùx
, "os");

452 ià(
lßd_¡d
) {

453 cÚ¡ *
¡r
 = "import *‡s std from 'std';\n"

457 
	`ev®_buf
(
ùx
, 
¡r
, 
	`¡¾’
(¡r), "<šput>", 
JS_EVAL_TYPE_MODULE
);

460 
i
 = 0; i < 
šşude_couÁ
; i++) {

461 ià(
	`ev®_fe
(
ùx
, 
šşude_li¡
[
i
], 
moduË
))

462 
ç
;

465 ià(
ex´
) {

466 ià(
	`ev®_buf
(
ùx
, 
ex´
, 
	`¡¾’
(expr), "<cmdline>", 0))

467 
ç
;

469 ià(
İtšd
 >ğ
¬gc
) {

471 
š‹¿ùive
 = 1;

473 cÚ¡ *
f’ame
;

474 
f’ame
 = 
¬gv
[
İtšd
];

475 ià(
	`ev®_fe
(
ùx
, 
f’ame
, 
moduË
))

476 
ç
;

478 ià(
š‹¿ùive
) {

479 
	`js_¡d_ev®_bš¬y
(
ùx
, 
qjsc_»¶
, 
qjsc_»¶_size
, 0);

481 
	`js_¡d_loİ
(
ùx
);

484 ià(
dump_memÜy
) {

485 
JSMemÜyU§ge
 
¡©s
;

486 
	`JS_Compu‹MemÜyU§ge
(
¹
, &
¡©s
);

487 
	`JS_DumpMemÜyU§ge
(
¡dout
, &
¡©s
, 
¹
);

489 
	`js_¡d_ä“_hªdËrs
(
¹
);

490 
	`JS_F»eCÚ‹xt
(
ùx
);

491 
	`JS_F»eRuÁime
(
¹
);

493 ià(
em±y_run
 && 
dump_memÜy
) {

494 
şock_t
 
t
[5];

495 
be¡
[5];

496 
i
, 
j
;

497 
i
 = 0; i < 100; i++) {

498 
t
[0] = 
	`şock
();

499 
¹
 = 
	`JS_NewRuÁime
();

500 
t
[1] = 
	`şock
();

501 
ùx
 = 
	`JS_NewCÚ‹xt
(
¹
);

502 
t
[2] = 
	`şock
();

503 
	`JS_F»eCÚ‹xt
(
ùx
);

504 
t
[3] = 
	`şock
();

505 
	`JS_F»eRuÁime
(
¹
);

506 
t
[4] = 
	`şock
();

507 
j
 = 4; j > 0; j--) {

508 
ms
 = 1000.0 * (
t
[
j
] -[j - 1]è/ 
CLOCKS_PER_SEC
;

509 ià(
i
 =ğ0 || 
be¡
[
j
] > 
ms
)

510 
be¡
[
j
] = 
ms
;

513 
	`´štf
("\nInstantiationimes (ms): %.3f = %.3f+%.3f+%.3f+%.3f\n",

514 
be¡
[1] + best[2] + best[3] + best[4],

515 
be¡
[1], best[2], best[3], best[4]);

518 
ç
:

519 
	`js_¡d_ä“_hªdËrs
(
¹
);

520 
	`JS_F»eCÚ‹xt
(
ùx
);

521 
	`JS_F»eRuÁime
(
¹
);

523 
	}
}

	@quickjs-libc.c

28 
	#PATH_MAX
 4096

	)

30 
	~<Çutus/libccom·t.h
>

31 
	~<Çutus/Çut_ty³s.h
>

33 
	~<¹/js/cuts.h
>

34 
	~<¹/js/li¡.h
>

35 
	~<¹/js/quickjs-libc.h
>

37 ** 
’vœÚ
;

39 
	$js_¡d_dbuf_š™
(
JSCÚ‹xt
 *
ùx
, 
DynBuf
 *
s
)

41 
	`dbuf_š™2
(
s
, 
	`JS_G‘RuÁime
(
ùx
), (
DynBufR—ÎocFunc
 *)
js_»®loc_¹
);

42 
	}
}

51 
li¡_h—d
 
	mlšk
;

52 
	mfd
;

53 
JSV®ue
 
	mrw_func
[2];

54 } 
	tJSOSRWHªdËr
;

57 
li¡_h—d
 
	mlšk
;

58 
	msig_num
;

59 
JSV®ue
 
	mfunc
;

60 } 
	tJSOSSigÇlHªdËr
;

63 
li¡_h—d
 
	mlšk
;

64 
BOOL
 
	mhas_objeù
;

65 
sšt64_t
 
	mtimeout
;

66 
JSV®ue
 
	mfunc
;

67 } 
	tJSOSTim”
;

70 
li¡_h—d
 
	gos_rw_hªdËrs
 = 
LIST_HEAD_INIT
(
os_rw_hªdËrs
);

71 
li¡_h—d
 
	gos_sigÇl_hªdËrs
 = 
LIST_HEAD_INIT
(
os_sigÇl_hªdËrs
);

72 
li¡_h—d
 
	gos_tim”s
 = 
LIST_HEAD_INIT
(
os_tim”s
);

73 
ušt64_t
 
	gos_³ndšg_sigÇls
;

74 
	gev®_süt_»cur£
;

75 (*
os_pŞl_func
)(
JSCÚ‹xt
 *
ùx
);

77 
JSV®ue
 
	$js_´štf_š‹º®
(
JSCÚ‹xt
 *
ùx
,

78 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
FILE
 *
å
)

80 
fmtbuf
[32];

81 
ušt8_t
 
cbuf
[
UTF8_CHAR_LEN_MAX
+1];

82 
JSV®ue
 
»s
;

83 
DynBuf
 
dbuf
;

84 cÚ¡ *
fmt_¡r
;

85 cÚ¡ 
ušt8_t
 *
fmt
, *
fmt_’d
;

86 cÚ¡ 
ušt8_t
 *
p
;

87 *
q
;

88 
i
, 
c
, 
Ën
;

89 
size_t
 
fmt_Ën
;

90 
sšt32_t
 
št32_¬g
;

91 
sšt64_t
 
št64_¬g
;

92 
doubË_¬g
;

93 cÚ¡ *
¡ršg_¬g
;

94 ’um { 
PART_FLAGS
, 
PART_WIDTH
, 
PART_DOT
, 
PART_PREC
, 
PART_MODIFIER
 } 
·¹
;

95 
modsize
;

97 (*
dbuf_´štf_fun
)(
DynBuf
 *
s
, cÚ¡ *
fmt
, ...èğ(*)
dbuf_´štf
;

99 
	`js_¡d_dbuf_š™
(
ùx
, &
dbuf
);

101 ià(
¬gc
 > 0) {

102 
fmt_¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
fmt_Ën
, 
¬gv
[0]);

103 ià(!
fmt_¡r
)

104 
ç
;

106 
i
 = 1;

107 
fmt
 = (cÚ¡ 
ušt8_t
 *)
fmt_¡r
;

108 
fmt_’d
 = 
fmt
 + 
fmt_Ën
;

109 
fmt
 < 
fmt_’d
) {

110 
p
 = 
fmt
; fmˆ< 
fmt_’d
 && *fmt != '%'; fmt++)

112 
	`dbuf_put
(&
dbuf
, 
p
, 
fmt
 -…);

113 ià(
fmt
 >ğ
fmt_’d
)

115 
q
 = 
fmtbuf
;

116 *
q
++ = *
fmt
++;

117 
·¹
 = 
PART_FLAGS
;

118 
modsize
 = 0;

120 ià(
q
 >ğ
fmtbuf
 + (fmtbuf) - 1)

121 
šv®id
;

123 
c
 = *
fmt
++;

124 *
q
++ = 
c
;

125 *
q
 = '\0';

127 
c
) {

131 ià(
·¹
 !ğ
PART_PREC
) {

132 ià(
·¹
 <ğ
PART_WIDTH
)

133 
·¹
 = 
PART_WIDTH
;

135 
šv®id
;

140 ià(
·¹
 > 
PART_FLAGS
)

141 
šv®id
;

145 ià(
·¹
 > 
PART_DOT
)

146 
šv®id
;

147 
·¹
 = 
PART_DOT
;

151 ià(
·¹
 < 
PART_WIDTH
)

152 
·¹
 = 
PART_DOT
;

153 ià(
·¹
 =ğ
PART_DOT
)

154 
·¹
 = 
PART_MODIFIER
;

156 
šv®id
;

158 ià(
i
 >ğ
¬gc
)

159 
missšg
;

161 ià(
	`JS_ToIÁ32
(
ùx
, &
št32_¬g
, 
¬gv
[
i
++]))

162 
ç
;

163 
q
 +ğ
	`¢´štf
(q, 
fmtbuf
 + (fmtbufè- q, "%d", 
št32_¬g
);

167 ià(
modsize
 != 0 && modsize != -1)

168 
šv®id
;

169 
modsize
--;

170 
·¹
 = 
PART_MODIFIER
;

173 
q
--;

174 ià(
modsize
 != 0 && modsize != 1)

175 
šv®id
;

176 
modsize
++;

177 
·¹
 = 
PART_MODIFIER
;

181 ià(
i
 >ğ
¬gc
)

182 
missšg
;

183 ià(
	`JS_IsSŒšg
(
¬gv
[
i
])) {

184 
¡ršg_¬g
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[
i
++]);

185 ià(!
¡ršg_¬g
)

186 
ç
;

187 
št32_¬g
 = 
	`unicode_äom_utf8
((
ušt8_t
 *)
¡ršg_¬g
, 
UTF8_CHAR_LEN_MAX
, &
p
);

188 
	`JS_F»eCSŒšg
(
ùx
, 
¡ršg_¬g
);

190 ià(
	`JS_ToIÁ32
(
ùx
, &
št32_¬g
, 
¬gv
[
i
++]))

191 
ç
;

194 ià(()
št32_¬g
 > 0x10FFFF)

195 
št32_¬g
 = 0xFFFD;

197 
Ën
 = 
	`unicode_to_utf8
(
cbuf
, 
št32_¬g
);

198 
	`dbuf_put
(&
dbuf
, 
cbuf
, 
Ën
);

207 ià(
i
 >ğ
¬gc
)

208 
missšg
;

209 ià(
	`JS_ToIÁ64Ext
(
ùx
, &
št64_¬g
, 
¬gv
[
i
++]))

210 
ç
;

211 ià(
modsize
 > 0) {

212 
q
[1] = q[-1];

213 
q
[-1] = q[0] = 'l';

214 
q
[2] = '\0';

215 
	`dbuf_´štf_fun
(&
dbuf
, 
fmtbuf
, ()
št64_¬g
);

217 
	`dbuf_´štf_fun
(&
dbuf
, 
fmtbuf
, ()
št64_¬g
);

222 ià(
i
 >ğ
¬gc
)

223 
missšg
;

225 
¡ršg_¬g
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[
i
++]);

226 ià(!
¡ršg_¬g
)

227 
ç
;

228 
	`dbuf_´štf_fun
(&
dbuf
, 
fmtbuf
, 
¡ršg_¬g
);

229 
	`JS_F»eCSŒšg
(
ùx
, 
¡ršg_¬g
);

240 ià(
i
 >ğ
¬gc
)

241 
missšg
;

242 ià(
	`JS_ToFlßt64
(
ùx
, &
doubË_¬g
, 
¬gv
[
i
++]))

243 
ç
;

244 
	`dbuf_´štf_fun
(&
dbuf
, 
fmtbuf
, 
doubË_¬g
);

248 
	`dbuf_putc
(&
dbuf
, '%');

253 
šv®id
:

254 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid conversion specifier in format string");

255 
ç
;

256 
missšg
:

257 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "missing‡rgument for conversion specifier");

258 
ç
;

263 
	`JS_F»eCSŒšg
(
ùx
, 
fmt_¡r
);

265 ià(
dbuf
.
”rÜ
) {

266 
»s
 = 
	`JS_ThrowOutOfMemÜy
(
ùx
);

268 ià(
å
) {

269 
Ën
 = 
	`fwr™e
(
dbuf
.
buf
, 1, dbuf.
size
, 
å
);

270 
»s
 = 
	`JS_NewIÁ32
(
ùx
, 
Ën
);

272 
»s
 = 
	`JS_NewSŒšgL’
(
ùx
, (*)
dbuf
.
buf
, dbuf.
size
);

275 
	`dbuf_ä“
(&
dbuf
);

276  
»s
;

278 
ç
:

279 
	`dbuf_ä“
(&
dbuf
);

280  
JS_EXCEPTION
;

281 
	}
}

283 
ušt8_t
 *
	$js_lßd_fe
(
JSCÚ‹xt
 *
ùx
, 
size_t
 *
pbuf_Ën
, cÚ¡ *
f’ame
)

285 
FILE
 *
f
;

286 
ušt8_t
 *
buf
;

287 
size_t
 
buf_Ën
;

288 
Ì‘
;

290 
f
 = 
	`fİ’
(
f’ame
, "rb");

291 ià(!
f
)

292  
NULL
;

293 ià(
	`f£ek
(
f
, 0, 
SEEK_END
) < 0)

294 
ç
;

295 
Ì‘
 = 
	`á–l
(
f
);

296 ià(
Ì‘
 < 0)

297 
ç
;

299 ià(
Ì‘
 =ğ
LONG_MAX
) {

300 
”ºo
 = 
EISDIR
;

301 
ç
;

303 
buf_Ën
 = 
Ì‘
;

304 ià(
	`f£ek
(
f
, 0, 
SEEK_SET
) < 0)

305 
ç
;

306 ià(
ùx
)

307 
buf
 = 
	`js_m®loc
(
ùx
, 
buf_Ën
 + 1);

309 
buf
 = 
	`m®loc
(
buf_Ën
 + 1);

310 ià(!
buf
)

311 
ç
;

312 ià(
	`ä—d
(
buf
, 1, 
buf_Ën
, 
f
) != buf_len) {

313 
”ºo
 = 
EIO
;

314 ià(
ùx
)

315 
	`js_ä“
(
ùx
, 
buf
);

317 
	`ä“
(
buf
);

318 
ç
:

319 
	`fşo£
(
f
);

320  
NULL
;

322 
buf
[
buf_Ën
] = '\0';

323 
	`fşo£
(
f
);

324 *
pbuf_Ën
 = 
buf_Ën
;

325  
buf
;

326 
	}
}

329 
JSV®ue
 
	$js_lßdSüt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

330 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

332 
ušt8_t
 *
buf
;

333 cÚ¡ *
f’ame
;

334 
JSV®ue
 
»t
;

335 
size_t
 
buf_Ën
;

337 
f’ame
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

338 ià(!
f’ame
)

339  
JS_EXCEPTION
;

340 
buf
 = 
	`js_lßd_fe
(
ùx
, &
buf_Ën
, 
f’ame
);

341 ià(!
buf
) {

342 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "could‚Ù†ßd '%s'", 
f’ame
);

343 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

344  
JS_EXCEPTION
;

346 
»t
 = 
	`JS_Ev®
(
ùx
, (*)
buf
, 
buf_Ën
, 
f’ame
,

347 
JS_EVAL_TYPE_GLOBAL
);

348 
	`js_ä“
(
ùx
, 
buf
);

349 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

350  
»t
;

351 
	}
}

354 
JSV®ue
 
	$js_¡d_lßdFe
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

355 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

357 
ušt8_t
 *
buf
;

358 cÚ¡ *
f’ame
;

359 
JSV®ue
 
»t
;

360 
size_t
 
buf_Ën
;

362 
f’ame
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

363 ià(!
f’ame
)

364  
JS_EXCEPTION
;

365 
buf
 = 
	`js_lßd_fe
(
ùx
, &
buf_Ën
, 
f’ame
);

366 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

367 ià(!
buf
)

368  
JS_NULL
;

369 
»t
 = 
	`JS_NewSŒšgL’
(
ùx
, (*)
buf
, 
buf_Ën
);

370 
	`js_ä“
(
ùx
, 
buf
);

371  
»t
;

372 
	}
}

374 
	gJSModuËDef
 *(
	tJSIn™ModuËFunc
)(
	tJSCÚ‹xt
 *
	tùx
,

375 cÚ¡ *
	tmoduË_Çme
);

378 #ià
defšed
(
_WIN32
)

379 
JSModuËDef
 *
	$js_moduË_lßd”_so
(
JSCÚ‹xt
 *
ùx
,

380 cÚ¡ *
moduË_Çme
)

382 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "shared†ibrary modules‡re‚ot supported yet");

383  
NULL
;

384 
	}
}

386 
JSModuËDef
 *
	$js_moduË_lßd”_so
(
JSCÚ‹xt
 *
ùx
,

387 cÚ¡ *
moduË_Çme
)

389 
JSModuËDef
 *
m
;

390 *
hd
;

391 
JSIn™ModuËFunc
 *
š™
;

392 *
f’ame
;

394 ià(!
	`¡rchr
(
moduË_Çme
, '/')) {

397 
f’ame
 = 
	`js_m®loc
(
ùx
, 
	`¡¾’
(
moduË_Çme
) + 2 + 1);

398 ià(!
f’ame
)

399  
NULL
;

400 
	`¡rıy
(
f’ame
, "./");

401 
	`¡rıy
(
f’ame
 + 2, 
moduË_Çme
);

403 
f’ame
 = (*)
moduË_Çme
;

407 
hd
 = 
	`dlİ’
(
f’ame
, 
RTLD_NOW
 | 
RTLD_LOCAL
);

408 ià(
f’ame
 !ğ
moduË_Çme
)

409 
	`js_ä“
(
ùx
, 
f’ame
);

410 ià(!
hd
) {

411 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "could‚ot†oad module filename '%s'‡s shared†ibrary",

412 
moduË_Çme
);

413 
ç
;

416 
š™
 = 
	`dlsym
(
hd
, "js_init_module");

417 ià(!
š™
) {

418 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "could‚ot†oad module filename '%s': js_init_module‚ot found",

419 
moduË_Çme
);

420 
ç
;

423 
m
 = 
	`š™
(
ùx
, 
moduË_Çme
);

424 ià(!
m
) {

425 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "could‚ot†oad module filename '%s': initializationƒrror",

426 
moduË_Çme
);

427 
ç
:

428 ià(
hd
)

429 
	`dlşo£
(
hd
);

430  
NULL
;

432  
m
;

433 
	}
}

436 
	$js_moduË_£t_impÜt_m‘a
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_v®
,

437 
JS_BOOL
 
u£_»®·th
, JS_BOOL 
is_maš
)

439 
JSModuËDef
 *
m
;

440 
buf
[
PATH_MAX
 + 16];

441 
JSV®ue
 
m‘a_obj
;

442 
JSAtom
 
moduË_Çme_©om
;

443 cÚ¡ *
moduË_Çme
;

445 
	`as£¹
(
	`JS_VALUE_GET_TAG
(
func_v®
è=ğ
JS_TAG_MODULE
);

446 
m
 = 
	`JS_VALUE_GET_PTR
(
func_v®
);

448 
moduË_Çme_©om
 = 
	`JS_G‘ModuËName
(
ùx
, 
m
);

449 
moduË_Çme
 = 
	`JS_AtomToCSŒšg
(
ùx
, 
moduË_Çme_©om
);

450 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme_©om
);

451 ià(!
moduË_Çme
)

453 ià(!
	`¡rchr
(
moduË_Çme
, ':')) {

454 
	`¡rıy
(
buf
, "file://");

455 #ià!
	`defšed
(
_WIN32
)

459 ià(
u£_»®·th
) {

460 *
»s
 = 
	`»®·th
(
moduË_Çme
, 
buf
 + 
	`¡¾’
(buf));

461 ià(!
»s
) {

462 
	`JS_ThrowTy³E¼Ü
(
ùx
, "realpath failure");

463 
	`JS_F»eCSŒšg
(
ùx
, 
moduË_Çme
);

469 
	`p¡rÿt
(
buf
, (buf), 
moduË_Çme
);

472 
	`p¡rıy
(
buf
, (buf), 
moduË_Çme
);

474 
	`JS_F»eCSŒšg
(
ùx
, 
moduË_Çme
);

476 
m‘a_obj
 = 
	`JS_G‘ImpÜtM‘a
(
ùx
, 
m
);

477 ià(
	`JS_IsExû±iÚ
(
m‘a_obj
))

479 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
m‘a_obj
, "url",

480 
	`JS_NewSŒšg
(
ùx
, 
buf
),

481 
JS_PROP_C_W_E
);

482 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
m‘a_obj
, "main",

483 
	`JS_NewBoŞ
(
ùx
, 
is_maš
),

484 
JS_PROP_C_W_E
);

485 
	`JS_F»eV®ue
(
ùx
, 
m‘a_obj
);

487 
	}
}

489 
JSModuËDef
 *
	$js_moduË_lßd”
(
JSCÚ‹xt
 *
ùx
,

490 cÚ¡ *
moduË_Çme
, *
İaque
)

492 
JSModuËDef
 *
m
;

494 ià(
	`has_suffix
(
moduË_Çme
, ".so")) {

495 
m
 = 
	`js_moduË_lßd”_so
(
ùx
, 
moduË_Çme
);

497 
size_t
 
buf_Ën
;

498 
ušt8_t
 *
buf
;

499 
JSV®ue
 
func_v®
;

501 
buf
 = 
	`js_lßd_fe
(
ùx
, &
buf_Ën
, 
moduË_Çme
);

502 ià(!
buf
) {

503 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "could‚ot†oad module filename '%s'",

504 
moduË_Çme
);

505  
NULL
;

509 
func_v®
 = 
	`JS_Ev®
(
ùx
, (*)
buf
, 
buf_Ën
, 
moduË_Çme
,

510 
JS_EVAL_TYPE_MODULE
 | 
JS_EVAL_FLAG_COMPILE_ONLY
);

511 
	`js_ä“
(
ùx
, 
buf
);

512 ià(
	`JS_IsExû±iÚ
(
func_v®
))

513  
NULL
;

515 
	`js_moduË_£t_impÜt_m‘a
(
ùx
, 
func_v®
, 
TRUE
, 
FALSE
);

517 
m
 = 
	`JS_VALUE_GET_PTR
(
func_v®
);

518 
	`JS_F»eV®ue
(
ùx
, 
func_v®
);

520  
m
;

521 
	}
}

523 
JSV®ue
 
	$js_¡d_ex™
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

524 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

526 
¡©us
;

527 ià(
	`JS_ToIÁ32
(
ùx
, &
¡©us
, 
¬gv
[0]))

528 
¡©us
 = -1;

529 
	`ex™
(
¡©us
);

530  
JS_UNDEFINED
;

531 
	}
}

533 
JSV®ue
 
	$js_¡d_g‘’v
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

534 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

536 cÚ¡ *
Çme
, *
¡r
;

537 
Çme
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

538 ià(!
Çme
)

539  
JS_EXCEPTION
;

540 
¡r
 = 
	`g‘’v
(
Çme
);

541 
	`JS_F»eCSŒšg
(
ùx
, 
Çme
);

542 ià(!
¡r
)

543  
JS_UNDEFINED
;

545  
	`JS_NewSŒšg
(
ùx
, 
¡r
);

546 
	}
}

548 
JSV®ue
 
	$js_¡d_gc
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

549 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

551 
	`JS_RunGC
(
	`JS_G‘RuÁime
(
ùx
));

552  
JS_UNDEFINED
;

553 
	}
}

555 
	$š‹¼u±_hªdËr
(
JSRuÁime
 *
¹
, *
İaque
)

557  (
os_³ndšg_sigÇls
 >> 
SIGINT
) & 1;

558 
	}
}

560 
	$g‘_boŞ_İtiÚ
(
JSCÚ‹xt
 *
ùx
, 
BOOL
 *
pboŞ
,

561 
JSV®ueCÚ¡
 
obj
,

562 cÚ¡ *
İtiÚ
)

564 
JSV®ue
 
v®
;

565 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
obj
, 
İtiÚ
);

566 ià(
	`JS_IsExû±iÚ
(
v®
))

568 ià(!
	`JS_IsUndefšed
(
v®
)) {

569 *
pboŞ
 = 
	`JS_ToBoŞ
(
ùx
, 
v®
);

571 
	`JS_F»eV®ue
(
ùx
, 
v®
);

573 
	}
}

575 
JSV®ue
 
	$js_ev®Süt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

576 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

578 cÚ¡ *
¡r
;

579 
size_t
 
Ën
;

580 
JSV®ue
 
»t
;

581 
JSV®ueCÚ¡
 
İtiÚs_obj
;

582 
BOOL
 
backŒaû_b¬r›r
 = 
FALSE
;

583 
æags
;

585 ià(
¬gc
 >= 2) {

586 
İtiÚs_obj
 = 
¬gv
[1];

587 ià(
	`g‘_boŞ_İtiÚ
(
ùx
, &
backŒaû_b¬r›r
, 
İtiÚs_obj
,

589  
JS_EXCEPTION
;

592 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
¬gv
[0]);

593 ià(!
¡r
)

594  
JS_EXCEPTION
;

595 ià(++
ev®_süt_»cur£
 == 1) {

597 
	`JS_S‘IÁ”ru±HªdËr
(
	`JS_G‘RuÁime
(
ùx
), 
š‹¼u±_hªdËr
, 
NULL
);

599 
æags
 = 
JS_EVAL_TYPE_GLOBAL
;

600 ià(
backŒaû_b¬r›r
)

601 
æags
 |ğ
JS_EVAL_FLAG_BACKTRACE_BARRIER
;

602 
»t
 = 
	`JS_Ev®
(
ùx
, 
¡r
, 
Ën
, "<ev®Süt>", 
æags
);

603 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

604 ià(--
ev®_süt_»cur£
 == 0) {

606 
	`JS_S‘IÁ”ru±HªdËr
(
	`JS_G‘RuÁime
(
ùx
), 
NULL
, NULL);

607 
os_³ndšg_sigÇls
 &ğ~((
ušt64_t
)1 << 
SIGINT
);

610 ià(
	`JS_IsExû±iÚ
(
»t
))

611 
	`JS_Re£tUnÿtchabËE¼Ü
(
ùx
);

613  
»t
;

614 
	}
}

616 
JSCÏssID
 
	gjs_¡d_fe_şass_id
;

619 
FILE
 *
	mf
;

620 
BOOL
 
	mşo£_š_fš®iz”
;

621 
BOOL
 
	mis_pİ’
;

622 } 
	tJSSTDFe
;

624 
	$js_¡d_fe_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

626 
JSSTDFe
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
js_¡d_fe_şass_id
);

627 ià(
s
) {

628 ià(
s
->
f
 && s->
şo£_š_fš®iz”
) {

629 ià(
s
->
is_pİ’
)

630 
	`pşo£
(
s
->
f
);

632 
	`fşo£
(
s
->
f
);

634 
	`js_ä“_¹
(
¹
, 
s
);

636 
	}
}

638 
ssize_t
 
	$js_g‘_”ºo
(
ssize_t
 
»t
)

640 ià(
»t
 == -1)

641 
»t
 = -
”ºo
;

642  
»t
;

643 
	}
}

645 
JSV®ue
 
	$js_¡d_¡»¼Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

646 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

648 
”r
;

649 ià(
	`JS_ToIÁ32
(
ùx
, &
”r
, 
¬gv
[0]))

650  
JS_EXCEPTION
;

651  
	`JS_NewSŒšg
(
ùx
, 
	`¡»¼Ü
(
”r
));

652 
	}
}

654 
JSV®ue
 
	$js_Ãw_¡d_fe
(
JSCÚ‹xt
 *
ùx
, 
FILE
 *
f
,

655 
BOOL
 
şo£_š_fš®iz”
,

656 
BOOL
 
is_pİ’
)

658 
JSSTDFe
 *
s
;

659 
JSV®ue
 
obj
;

660 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
js_¡d_fe_şass_id
);

661 ià(
	`JS_IsExû±iÚ
(
obj
))

662  
obj
;

663 
s
 = 
	`js_m®locz
(
ùx
, (*s));

664 ià(!
s
) {

665 
	`JS_F»eV®ue
(
ùx
, 
obj
);

666  
JS_EXCEPTION
;

668 
s
->
şo£_š_fš®iz”
 = close_in_finalizer;

669 
s
->
is_pİ’
 = is_popen;

670 
s
->
f
 = f;

671 
	`JS_S‘O·que
(
obj
, 
s
);

672  
obj
;

673 
	}
}

675 
	$js_£t_”rÜ_objeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
obj
, 
”r
)

677 ià(!
	`JS_IsUndefšed
(
obj
)) {

678 
	`JS_S‘Prİ”tySŒ
(
ùx
, 
obj
, "”ºo", 
	`JS_NewIÁ32
(ùx, 
”r
));

680 
	}
}

682 
JSV®ue
 
	$js_¡d_İ’
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

683 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

685 cÚ¡ *
f’ame
, *
mode
 = 
NULL
;

686 
FILE
 *
f
;

687 
”r
;

689 
f’ame
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

690 ià(!
f’ame
)

691 
ç
;

692 
mode
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[1]);

693 ià(!
mode
)

694 
ç
;

695 ià(
mode
[
	`¡r¥n
(mode, "rwa+b")] != '\0') {

696 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid file mode");

697 
ç
;

700 
f
 = 
	`fİ’
(
f’ame
, 
mode
);

701 ià(!
f
)

702 
”r
 = 
”ºo
;

704 
”r
 = 0;

705 ià(
¬gc
 >= 3)

706 
	`js_£t_”rÜ_objeù
(
ùx
, 
¬gv
[2], 
”r
);

707 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

708 
	`JS_F»eCSŒšg
(
ùx
, 
mode
);

709 ià(!
f
)

710  
JS_NULL
;

711  
	`js_Ãw_¡d_fe
(
ùx
, 
f
, 
TRUE
, 
FALSE
);

712 
ç
:

713 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

714 
	`JS_F»eCSŒšg
(
ùx
, 
mode
);

715  
JS_EXCEPTION
;

716 
	}
}

718 
JSV®ue
 
	$js_¡d_pİ’
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

719 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

721 cÚ¡ *
f’ame
, *
mode
 = 
NULL
;

722 
FILE
 *
f
;

723 
”r
;

725 
f’ame
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

726 ià(!
f’ame
)

727 
ç
;

728 
mode
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[1]);

729 ià(!
mode
)

730 
ç
;

731 ià(
mode
[
	`¡r¥n
(mode, "rw")] != '\0') {

732 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid file mode");

733 
ç
;

736 
f
 = 
	`pİ’
(
f’ame
, 
mode
);

737 ià(!
f
)

738 
”r
 = 
”ºo
;

740 
”r
 = 0;

741 ià(
¬gc
 >= 3)

742 
	`js_£t_”rÜ_objeù
(
ùx
, 
¬gv
[2], 
”r
);

743 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

744 
	`JS_F»eCSŒšg
(
ùx
, 
mode
);

745 ià(!
f
)

746  
JS_NULL
;

747  
	`js_Ãw_¡d_fe
(
ùx
, 
f
, 
TRUE
, TRUE);

748 
ç
:

749 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

750 
	`JS_F»eCSŒšg
(
ùx
, 
mode
);

751  
JS_EXCEPTION
;

752 
	}
}

754 
JSV®ue
 
	$js_¡d_fdİ’
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

755 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

757 cÚ¡ *
mode
;

758 
FILE
 *
f
;

759 
fd
, 
”r
;

761 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

762  
JS_EXCEPTION
;

763 
mode
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[1]);

764 ià(!
mode
)

765 
ç
;

766 ià(
mode
[
	`¡r¥n
(mode, "rwa+")] != '\0') {

767 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid file mode");

768 
ç
;

771 
f
 = 
	`fdİ’
(
fd
, 
mode
);

772 ià(!
f
)

773 
”r
 = 
”ºo
;

775 
”r
 = 0;

776 ià(
¬gc
 >= 3)

777 
	`js_£t_”rÜ_objeù
(
ùx
, 
¬gv
[2], 
”r
);

778 
	`JS_F»eCSŒšg
(
ùx
, 
mode
);

779 ià(!
f
)

780  
JS_NULL
;

781  
	`js_Ãw_¡d_fe
(
ùx
, 
f
, 
TRUE
, 
FALSE
);

782 
ç
:

783 
	`JS_F»eCSŒšg
(
ùx
, 
mode
);

784  
JS_EXCEPTION
;

785 
	}
}

787 
JSV®ue
 
	$js_¡d_tmpfe
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

788 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

790 
FILE
 *
f
;

791 
f
 = 
	`tmpfe
();

792 ià(
¬gc
 >= 1)

793 
	`js_£t_”rÜ_objeù
(
ùx
, 
¬gv
[0], 
f
 ? 0 : 
”ºo
);

794 ià(!
f
)

795  
JS_NULL
;

796  
	`js_Ãw_¡d_fe
(
ùx
, 
f
, 
TRUE
, 
FALSE
);

797 
	}
}

799 
JSV®ue
 
	$js_¡d_¥rštf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

800 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

802  
	`js_´štf_š‹º®
(
ùx
, 
¬gc
, 
¬gv
, 
NULL
);

803 
	}
}

805 
JSV®ue
 
	$js_¡d_´štf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

806 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

808  
	`js_´štf_š‹º®
(
ùx
, 
¬gc
, 
¬gv
, 
¡dout
);

809 
	}
}

811 
FILE
 *
	$js_¡d_fe_g‘
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

813 
JSSTDFe
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
obj
, 
js_¡d_fe_şass_id
);

814 ià(!
s
)

815  
NULL
;

816 ià(!
s
->
f
) {

817 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid file handle");

818  
NULL
;

820  
s
->
f
;

821 
	}
}

823 
JSV®ue
 
	$js_¡d_fe_puts
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

824 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

826 
FILE
 *
f
;

827 
i
;

828 cÚ¡ *
¡r
;

829 
size_t
 
Ën
;

831 ià(
magic
 == 0) {

832 
f
 = 
¡dout
;

834 
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

835 ià(!
f
)

836  
JS_EXCEPTION
;

839 
i
 = 0; i < 
¬gc
; i++) {

840 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
¬gv
[
i
]);

841 ià(!
¡r
)

842  
JS_EXCEPTION
;

843 
	`fwr™e
(
¡r
, 1, 
Ën
, 
f
);

844 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

846  
JS_UNDEFINED
;

847 
	}
}

849 
JSV®ue
 
	$js_¡d_fe_şo£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

850 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

852 
JSSTDFe
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
js_¡d_fe_şass_id
);

853 
”r
;

854 ià(!
s
)

855  
JS_EXCEPTION
;

856 ià(!
s
->
f
)

857  
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid file handle");

858 ià(
s
->
is_pİ’
)

859 
”r
 = 
	`js_g‘_”ºo
(
	`pşo£
(
s
->
f
));

861 
”r
 = 
	`js_g‘_”ºo
(
	`fşo£
(
s
->
f
));

862 
s
->
f
 = 
NULL
;

863  
	`JS_NewIÁ32
(
ùx
, 
”r
);

864 
	}
}

866 
JSV®ue
 
	$js_¡d_fe_´štf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

867 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

869 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

870 ià(!
f
)

871  
JS_EXCEPTION
;

872  
	`js_´štf_š‹º®
(
ùx
, 
¬gc
, 
¬gv
, 
f
);

873 
	}
}

875 
JSV®ue
 
	$js_¡d_fe_æush
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

876 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

878 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

879 ià(!
f
)

880  
JS_EXCEPTION
;

881 
	`fæush
(
f
);

882  
JS_UNDEFINED
;

883 
	}
}

885 
JSV®ue
 
	$js_¡d_fe_‹Î
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

886 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
is_bigšt
)

888 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

889 
sšt64_t
 
pos
;

890 ià(!
f
)

891  
JS_EXCEPTION
;

892 #ià
	`defšed
(
__lšux__
)

893 
pos
 = 
	`á–lo
(
f
);

895 
pos
 = 
	`á–l
(
f
);

897 ià(
is_bigšt
)

898  
	`JS_NewBigIÁ64
(
ùx
, 
pos
);

900  
	`JS_NewIÁ64
(
ùx
, 
pos
);

901 
	}
}

903 
JSV®ue
 
	$js_¡d_fe_£ek
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

904 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

906 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

907 
sšt64_t
 
pos
;

908 
wh’û
, 
»t
;

909 ià(!
f
)

910  
JS_EXCEPTION
;

911 ià(
	`JS_ToIÁ64Ext
(
ùx
, &
pos
, 
¬gv
[0]))

912  
JS_EXCEPTION
;

913 ià(
	`JS_ToIÁ32
(
ùx
, &
wh’û
, 
¬gv
[1]))

914  
JS_EXCEPTION
;

915 #ià
	`defšed
(
__lšux__
)

916 
»t
 = 
	`f£eko
(
f
, 
pos
, 
wh’û
);

918 
»t
 = 
	`f£ek
(
f
, 
pos
, 
wh’û
);

920 ià(
»t
 < 0)

921 
»t
 = -
”ºo
;

922  
	`JS_NewIÁ32
(
ùx
, 
»t
);

923 
	}
}

925 
JSV®ue
 
	$js_¡d_fe_eof
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

926 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

928 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

929 ià(!
f
)

930  
JS_EXCEPTION
;

931  
	`JS_NewBoŞ
(
ùx
, 
	`ãof
(
f
));

932 
	}
}

934 
JSV®ue
 
	$js_¡d_fe_”rÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

935 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

937 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

938 ià(!
f
)

939  
JS_EXCEPTION
;

940  
	`JS_NewBoŞ
(
ùx
, 
	`ã¼Ü
(
f
));

941 
	}
}

943 
JSV®ue
 
	$js_¡d_fe_ş—»¼
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

944 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

946 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

947 ià(!
f
)

948  
JS_EXCEPTION
;

949 
	`ş—»¼
(
f
);

950  
JS_UNDEFINED
;

951 
	}
}

953 
JSV®ue
 
	$js_¡d_fe_f’o
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

954 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

956 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

957 ià(!
f
)

958  
JS_EXCEPTION
;

959  
	`JS_NewIÁ32
(
ùx
, 
	`f’o
(
f
));

960 
	}
}

962 
JSV®ue
 
	$js_¡d_fe_»ad_wr™e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

963 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

965 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

966 
ušt64_t
 
pos
, 
Ën
;

967 
size_t
 
size
, 
»t
;

968 
ušt8_t
 *
buf
;

970 ià(!
f
)

971  
JS_EXCEPTION
;

972 ià(
	`JS_ToIndex
(
ùx
, &
pos
, 
¬gv
[1]))

973  
JS_EXCEPTION
;

974 ià(
	`JS_ToIndex
(
ùx
, &
Ën
, 
¬gv
[2]))

975  
JS_EXCEPTION
;

976 
buf
 = 
	`JS_G‘A¼ayBufãr
(
ùx
, &
size
, 
¬gv
[0]);

977 ià(!
buf
)

978  
JS_EXCEPTION
;

979 ià(
pos
 + 
Ën
 > 
size
)

980  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "read/write‡rray buffer overflow");

981 ià(
magic
)

982 
»t
 = 
	`fwr™e
(
buf
 + 
pos
, 1, 
Ën
, 
f
);

984 
»t
 = 
	`ä—d
(
buf
 + 
pos
, 1, 
Ën
, 
f
);

985  
	`JS_NewIÁ64
(
ùx
, 
»t
);

986 
	}
}

989 
JSV®ue
 
	$js_¡d_fe_g‘lše
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

990 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

992 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

993 
c
;

994 
DynBuf
 
dbuf
;

995 
JSV®ue
 
obj
;

997 ià(!
f
)

998  
JS_EXCEPTION
;

1000 
	`js_¡d_dbuf_š™
(
ùx
, &
dbuf
);

1002 
c
 = 
	`fg‘c
(
f
);

1003 ià(
c
 =ğ
EOF
) {

1004 ià(
dbuf
.
size
 == 0) {

1006 
	`dbuf_ä“
(&
dbuf
);

1007  
JS_NULL
;

1012 ià(
c
 == '\n')

1014 ià(
	`dbuf_putc
(&
dbuf
, 
c
)) {

1015 
	`dbuf_ä“
(&
dbuf
);

1016  
	`JS_ThrowOutOfMemÜy
(
ùx
);

1019 
obj
 = 
	`JS_NewSŒšgL’
(
ùx
, (cÚ¡ *)
dbuf
.
buf
, dbuf.
size
);

1020 
	`dbuf_ä“
(&
dbuf
);

1021  
obj
;

1022 
	}
}

1025 
JSV®ue
 
	$js_¡d_fe_»adAsSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1026 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1028 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

1029 
c
;

1030 
DynBuf
 
dbuf
;

1031 
JSV®ue
 
obj
;

1032 
ušt64_t
 
max_size64
;

1033 
size_t
 
max_size
;

1034 
JSV®ueCÚ¡
 
max_size_v®
;

1036 ià(!
f
)

1037  
JS_EXCEPTION
;

1039 ià(
¬gc
 >= 1)

1040 
max_size_v®
 = 
¬gv
[0];

1042 
max_size_v®
 = 
JS_UNDEFINED
;

1043 
max_size
 = (
size_t
)-1;

1044 ià(!
	`JS_IsUndefšed
(
max_size_v®
)) {

1045 ià(
	`JS_ToIndex
(
ùx
, &
max_size64
, 
max_size_v®
))

1046  
JS_EXCEPTION
;

1047 ià(
max_size64
 < 
max_size
)

1048 
max_size
 = 
max_size64
;

1051 
	`js_¡d_dbuf_š™
(
ùx
, &
dbuf
);

1052 
max_size
 != 0) {

1053 
c
 = 
	`fg‘c
(
f
);

1054 ià(
c
 =ğ
EOF
)

1056 ià(
	`dbuf_putc
(&
dbuf
, 
c
)) {

1057 
	`dbuf_ä“
(&
dbuf
);

1058  
JS_EXCEPTION
;

1060 
max_size
--;

1062 
obj
 = 
	`JS_NewSŒšgL’
(
ùx
, (cÚ¡ *)
dbuf
.
buf
, dbuf.
size
);

1063 
	`dbuf_ä“
(&
dbuf
);

1064  
obj
;

1065 
	}
}

1067 
JSV®ue
 
	$js_¡d_fe_g‘By‹
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1068 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1070 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

1071 ià(!
f
)

1072  
JS_EXCEPTION
;

1073  
	`JS_NewIÁ32
(
ùx
, 
	`fg‘c
(
f
));

1074 
	}
}

1076 
JSV®ue
 
	$js_¡d_fe_putBy‹
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1077 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1079 
FILE
 *
f
 = 
	`js_¡d_fe_g‘
(
ùx
, 
this_v®
);

1080 
c
;

1081 ià(!
f
)

1082  
JS_EXCEPTION
;

1083 ià(
	`JS_ToIÁ32
(
ùx
, &
c
, 
¬gv
[0]))

1084  
JS_EXCEPTION
;

1085 
c
 = 
	`åutc
(c, 
f
);

1086  
	`JS_NewIÁ32
(
ùx
, 
c
);

1087 
	}
}

1091 
	#URL_GET_PROGRAM
 "cu¾ - -i"

	)

1092 
	#URL_GET_BUF_SIZE
 4096

	)

1094 
	$h‰p_g‘_h—d”_lše
(
FILE
 *
f
, *
buf
, 
size_t
 
buf_size
,

1095 
DynBuf
 *
dbuf
)

1097 
c
;

1098 *
p
;

1100 
p
 = 
buf
;

1102 
c
 = 
	`fg‘c
(
f
);

1103 ià(
c
 < 0)

1105 ià((
p
 - 
buf
è< 
buf_size
 - 1)

1106 *
p
++ = 
c
;

1107 ià(
dbuf
)

1108 
	`dbuf_putc
(
dbuf
, 
c
);

1109 ià(
c
 == '\n')

1112 *
p
 = '\0';

1114 
	}
}

1116 
	$h‰p_g‘_¡©us
(cÚ¡ *
buf
)

1118 cÚ¡ *
p
 = 
buf
;

1119 *
p
 != ' ' && *p != '\0')

1120 
p
++;

1121 ià(*
p
 != ' ')

1123 *
p
 == ' ')

1124 
p
++;

1125  
	`©oi
(
p
);

1126 
	}
}

1128 
JSV®ue
 
	$js_¡d_u¾G‘
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1129 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1131 cÚ¡ *
u¾
;

1132 
DynBuf
 
cmd_buf
;

1133 
DynBuf
 
d©a_buf_s
, *
d©a_buf
 = &data_buf_s;

1134 
DynBuf
 
h—d”_buf_s
, *
h—d”_buf
 = &header_buf_s;

1135 *
buf
;

1136 
size_t
 
i
, 
Ën
;

1137 
c
, 
¡©us
;

1138 
JSV®ue
 
»¥Ú£
 = 
JS_UNDEFINED
, 
»t_obj
;

1139 
JSV®ueCÚ¡
 
İtiÚs_obj
;

1140 
FILE
 *
f
;

1141 
BOOL
 
bš¬y_æag
, 
fuÎ_æag
;

1143 
u¾
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

1144 ià(!
u¾
)

1145  
JS_EXCEPTION
;

1147 
bš¬y_æag
 = 
FALSE
;

1148 
fuÎ_æag
 = 
FALSE
;

1150 ià(
¬gc
 >= 2) {

1151 
İtiÚs_obj
 = 
¬gv
[1];

1153 ià(
	`g‘_boŞ_İtiÚ
(
ùx
, &
bš¬y_æag
, 
İtiÚs_obj
, "binary"))

1154 
ç_obj
;

1156 ià(
	`g‘_boŞ_İtiÚ
(
ùx
, &
fuÎ_æag
, 
İtiÚs_obj
, "full")) {

1157 
ç_obj
:

1158 
	`JS_F»eCSŒšg
(
ùx
, 
u¾
);

1159  
JS_EXCEPTION
;

1163 
	`js_¡d_dbuf_š™
(
ùx
, &
cmd_buf
);

1164 
	`dbuf_´štf
(&
cmd_buf
, "% ''", 
URL_GET_PROGRAM
);

1165 
Ën
 = 
	`¡¾’
(
u¾
);

1166 
i
 = 0; i < 
Ën
; i++) {

1167 
c
 = 
u¾
[
i
];

1168 ià(
c
 == '\'' || c == '\\')

1169 
	`dbuf_putc
(&
cmd_buf
, '\\');

1170 
	`dbuf_putc
(&
cmd_buf
, 
c
);

1172 
	`JS_F»eCSŒšg
(
ùx
, 
u¾
);

1173 
	`dbuf_put¡r
(&
cmd_buf
, "''");

1174 
	`dbuf_putc
(&
cmd_buf
, '\0');

1175 ià(
	`dbuf_”rÜ
(&
cmd_buf
)) {

1176 
	`dbuf_ä“
(&
cmd_buf
);

1177  
JS_EXCEPTION
;

1180 
f
 = 
	`pİ’
((*)
cmd_buf
.
buf
, "r");

1181 
	`dbuf_ä“
(&
cmd_buf
);

1182 ià(!
f
) {

1183  
	`JS_ThrowTy³E¼Ü
(
ùx
, "could‚ot start curl");

1186 
	`js_¡d_dbuf_š™
(
ùx
, 
d©a_buf
);

1187 
	`js_¡d_dbuf_š™
(
ùx
, 
h—d”_buf
);

1189 
buf
 = 
	`js_m®loc
(
ùx
, 
URL_GET_BUF_SIZE
);

1190 ià(!
buf
)

1191 
ç
;

1194 ià(
	`h‰p_g‘_h—d”_lše
(
f
, 
buf
, 
URL_GET_BUF_SIZE
, 
NULL
) < 0) {

1195 
¡©us
 = 0;

1196 
bad_h—d”
;

1198 
¡©us
 = 
	`h‰p_g‘_¡©us
(
buf
);

1199 ià(!
fuÎ_æag
 && !(
¡©us
 >= 200 && status <= 299)) {

1200 
bad_h—d”
;

1205 ià(
	`h‰p_g‘_h—d”_lše
(
f
, 
buf
, 
URL_GET_BUF_SIZE
, 
h—d”_buf
) < 0) {

1206 
bad_h—d”
:

1207 
»¥Ú£
 = 
JS_NULL
;

1208 
dÚe
;

1210 ià(!
	`¡rcmp
(
buf
, "\r\n"))

1213 ià(
	`dbuf_”rÜ
(
h—d”_buf
))

1214 
ç
;

1215 
h—d”_buf
->
size
 -= 2;

1219 
Ën
 = 
	`ä—d
(
buf
, 1, 
URL_GET_BUF_SIZE
, 
f
);

1220 ià(
Ën
 == 0)

1222 
	`dbuf_put
(
d©a_buf
, (
ušt8_t
 *)
buf
, 
Ën
);

1224 ià(
	`dbuf_”rÜ
(
d©a_buf
))

1225 
ç
;

1226 ià(
bš¬y_æag
) {

1227 
»¥Ú£
 = 
	`JS_NewA¼ayBufãrCİy
(
ùx
,

1228 
d©a_buf
->
buf
, d©a_buf->
size
);

1230 
»¥Ú£
 = 
	`JS_NewSŒšgL’
(
ùx
, (*)
d©a_buf
->
buf
, d©a_buf->
size
);

1232 ià(
	`JS_IsExû±iÚ
(
»¥Ú£
))

1233 
ç
;

1234 
dÚe
:

1235 
	`js_ä“
(
ùx
, 
buf
);

1236 
buf
 = 
NULL
;

1237 
	`pşo£
(
f
);

1238 
f
 = 
NULL
;

1239 
	`dbuf_ä“
(
d©a_buf
);

1240 
d©a_buf
 = 
NULL
;

1242 ià(
fuÎ_æag
) {

1243 
»t_obj
 = 
	`JS_NewObjeù
(
ùx
);

1244 ià(
	`JS_IsExû±iÚ
(
»t_obj
))

1245 
ç
;

1246 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
»t_obj
, "response",

1247 
»¥Ú£
,

1248 
JS_PROP_C_W_E
);

1249 ià(!
	`JS_IsNuÎ
(
»¥Ú£
)) {

1250 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
»t_obj
, "responseHeaders",

1251 
	`JS_NewSŒšgL’
(
ùx
, (*)
h—d”_buf
->
buf
,

1252 
h—d”_buf
->
size
),

1253 
JS_PROP_C_W_E
);

1254 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
»t_obj
, "status",

1255 
	`JS_NewIÁ32
(
ùx
, 
¡©us
),

1256 
JS_PROP_C_W_E
);

1259 
»t_obj
 = 
»¥Ú£
;

1261 
	`dbuf_ä“
(
h—d”_buf
);

1262  
»t_obj
;

1263 
ç
:

1264 ià(
f
)

1265 
	`pşo£
(
f
);

1266 
	`js_ä“
(
ùx
, 
buf
);

1267 ià(
d©a_buf
)

1268 
	`dbuf_ä“
(
d©a_buf
);

1269 ià(
h—d”_buf
)

1270 
	`dbuf_ä“
(
h—d”_buf
);

1271 
	`JS_F»eV®ue
(
ùx
, 
»¥Ú£
);

1272  
JS_EXCEPTION
;

1273 
	}
}

1275 
JSCÏssDef
 
	gjs_¡d_fe_şass
 = {

1277 .
fš®iz”
 = 
js_¡d_fe_fš®iz”
,

1280 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡d_”rÜ_´İs
[] = {

1282 
	#DEF
(
x
è
	`JS_PROP_INT32_DEF
(#x, x, 
JS_PROP_CONFIGURABLE
 )

	)

1283 
DEF
(
EINVAL
),

1284 
DEF
(
EIO
),

1285 
DEF
(
EACCES
),

1286 
DEF
(
EEXIST
),

1287 
DEF
(
ENOSPC
),

1288 
DEF
(
ENOSYS
),

1289 
DEF
(
EBUSY
),

1290 
DEF
(
ENOENT
),

1291 
DEF
(
EPERM
),

1292 
DEF
(
EPIPE
),

1293 
DEF
(
EBADF
),

1294 #undeà
DEF


1297 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡d_funcs
[] = {

1298 
JS_CFUNC_DEF
("ex™", 1, 
js_¡d_ex™
 ),

1299 
JS_CFUNC_DEF
("gc", 0, 
js_¡d_gc
 ),

1300 
JS_CFUNC_DEF
("ev®Süt", 1, 
js_ev®Süt
 ),

1301 
JS_CFUNC_DEF
("lßdSüt", 1, 
js_lßdSüt
 ),

1302 
JS_CFUNC_DEF
("g‘’v", 1, 
js_¡d_g‘’v
 ),

1303 
JS_CFUNC_DEF
("u¾G‘", 1, 
js_¡d_u¾G‘
 ),

1304 
JS_CFUNC_DEF
("lßdFe", 1, 
js_¡d_lßdFe
 ),

1305 
JS_CFUNC_DEF
("¡»¼Ü", 1, 
js_¡d_¡»¼Ü
 ),

1308 
JS_CFUNC_DEF
("İ’", 2, 
js_¡d_İ’
 ),

1309 
JS_CFUNC_DEF
("pİ’", 2, 
js_¡d_pİ’
 ),

1310 
JS_CFUNC_DEF
("fdİ’", 2, 
js_¡d_fdİ’
 ),

1311 
JS_CFUNC_DEF
("tmpfe", 0, 
js_¡d_tmpfe
 ),

1312 
JS_CFUNC_MAGIC_DEF
("puts", 1, 
js_¡d_fe_puts
, 0 ),

1313 
JS_CFUNC_DEF
("´štf", 1, 
js_¡d_´štf
 ),

1314 
JS_CFUNC_DEF
("¥rštf", 1, 
js_¡d_¥rštf
 ),

1315 
JS_PROP_INT32_DEF
("SEEK_SET", 
SEEK_SET
, 
JS_PROP_CONFIGURABLE
 ),

1316 
JS_PROP_INT32_DEF
("SEEK_CUR", 
SEEK_CUR
, 
JS_PROP_CONFIGURABLE
 ),

1317 
JS_PROP_INT32_DEF
("SEEK_END", 
SEEK_END
, 
JS_PROP_CONFIGURABLE
 ),

1318 
JS_OBJECT_DEF
("E¼Ü", 
js_¡d_”rÜ_´İs
, 
couÁof
(js_¡d_”rÜ_´İs), 
JS_PROP_CONFIGURABLE
),

1322 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡d_fe_´Ùo_funcs
[] = {

1323 
JS_CFUNC_DEF
("şo£", 0, 
js_¡d_fe_şo£
 ),

1324 
JS_CFUNC_MAGIC_DEF
("puts", 1, 
js_¡d_fe_puts
, 1 ),

1325 
JS_CFUNC_DEF
("´štf", 1, 
js_¡d_fe_´štf
 ),

1326 
JS_CFUNC_DEF
("æush", 0, 
js_¡d_fe_æush
 ),

1327 
JS_CFUNC_MAGIC_DEF
("‹Î", 0, 
js_¡d_fe_‹Î
, 0 ),

1328 
JS_CFUNC_MAGIC_DEF
("‹Îo", 0, 
js_¡d_fe_‹Î
, 1 ),

1329 
JS_CFUNC_DEF
("£ek", 2, 
js_¡d_fe_£ek
 ),

1330 
JS_CFUNC_DEF
("eof", 0, 
js_¡d_fe_eof
 ),

1331 
JS_CFUNC_DEF
("f’o", 0, 
js_¡d_fe_f’o
 ),

1332 
JS_CFUNC_DEF
("”rÜ", 0, 
js_¡d_fe_”rÜ
 ),

1333 
JS_CFUNC_DEF
("ş—»¼", 0, 
js_¡d_fe_ş—»¼
 ),

1334 
JS_CFUNC_MAGIC_DEF
("»ad", 3, 
js_¡d_fe_»ad_wr™e
, 0 ),

1335 
JS_CFUNC_MAGIC_DEF
("wr™e", 3, 
js_¡d_fe_»ad_wr™e
, 1 ),

1336 
JS_CFUNC_DEF
("g‘lše", 0, 
js_¡d_fe_g‘lše
 ),

1337 
JS_CFUNC_DEF
("»adAsSŒšg", 0, 
js_¡d_fe_»adAsSŒšg
 ),

1338 
JS_CFUNC_DEF
("g‘By‹", 0, 
js_¡d_fe_g‘By‹
 ),

1339 
JS_CFUNC_DEF
("putBy‹", 1, 
js_¡d_fe_putBy‹
 ),

1343 
	$js_¡d_š™
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

1345 
JSV®ue
 
´Ùo
;

1349 
	`JS_NewCÏssID
(&
js_¡d_fe_şass_id
);

1351 
	`JS_NewCÏss
(
	`JS_G‘RuÁime
(
ùx
), 
js_¡d_fe_şass_id
, &
js_¡d_fe_şass
);

1352 
´Ùo
 = 
	`JS_NewObjeù
(
ùx
);

1353 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
´Ùo
, 
js_¡d_fe_´Ùo_funcs
,

1354 
	`couÁof
(
js_¡d_fe_´Ùo_funcs
));

1355 
	`JS_S‘CÏssPrÙo
(
ùx
, 
js_¡d_fe_şass_id
, 
´Ùo
);

1357 
	`JS_S‘ModuËExpÜtLi¡
(
ùx
, 
m
, 
js_¡d_funcs
,

1358 
	`couÁof
(
js_¡d_funcs
));

1359 
	`JS_S‘ModuËExpÜt
(
ùx
, 
m
, "š", 
	`js_Ãw_¡d_fe
(ùx, 
¡dš
, 
FALSE
, FALSE));

1360 
	`JS_S‘ModuËExpÜt
(
ùx
, 
m
, "out", 
	`js_Ãw_¡d_fe
(ùx, 
¡dout
, 
FALSE
, FALSE));

1361 
	`JS_S‘ModuËExpÜt
(
ùx
, 
m
, "”r", 
	`js_Ãw_¡d_fe
(ùx, 
¡d”r
, 
FALSE
, FALSE));

1363 
	}
}

1365 
JSModuËDef
 *
	$js_š™_moduË_¡d
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
moduË_Çme
)

1367 
JSModuËDef
 *
m
;

1368 
m
 = 
	`JS_NewCModuË
(
ùx
, 
moduË_Çme
, 
js_¡d_š™
);

1369 ià(!
m
)

1370  
NULL
;

1371 
	`JS_AddModuËExpÜtLi¡
(
ùx
, 
m
, 
js_¡d_funcs
, 
	`couÁof
(js_std_funcs));

1372 
	`JS_AddModuËExpÜt
(
ùx
, 
m
, "in");

1373 
	`JS_AddModuËExpÜt
(
ùx
, 
m
, "out");

1374 
	`JS_AddModuËExpÜt
(
ùx
, 
m
, "err");

1375  
m
;

1376 
	}
}

1381 
JSV®ue
 
	$js_os_İ’
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1382 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1384 cÚ¡ *
f’ame
;

1385 
æags
, 
mode
, 
»t
;

1387 
f’ame
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

1388 ià(!
f’ame
)

1389  
JS_EXCEPTION
;

1390 ià(
	`JS_ToIÁ32
(
ùx
, &
æags
, 
¬gv
[1]))

1391 
ç
;

1392 ià(
¬gc
 >ğ3 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

1393 ià(
	`JS_ToIÁ32
(
ùx
, &
mode
, 
¬gv
[2])) {

1394 
ç
:

1395 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

1396  
JS_EXCEPTION
;

1399 
mode
 = 0666;

1401 #ià
	`defšed
(
_WIN32
)

1403 ià(!(
æags
 & 
O_TEXT
))

1404 
æags
 |ğ
O_BINARY
;

1406 
»t
 = 
	`js_g‘_”ºo
(
	`İ’
(
f’ame
, 
æags
, 
mode
));

1407 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

1408  
	`JS_NewIÁ32
(
ùx
, 
»t
);

1409 
	}
}

1411 
JSV®ue
 
	$js_os_şo£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1412 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1414 
fd
, 
»t
;

1415 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1416  
JS_EXCEPTION
;

1417 
»t
 = 
	`js_g‘_”ºo
(
	`şo£
(
fd
));

1418  
	`JS_NewIÁ32
(
ùx
, 
»t
);

1419 
	}
}

1421 
JSV®ue
 
	$js_os_£ek
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1422 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1424 
fd
, 
wh’û
;

1425 
sšt64_t
 
pos
, 
»t
;

1426 
BOOL
 
is_bigšt
;

1428 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1429  
JS_EXCEPTION
;

1430 
is_bigšt
 = 
	`JS_IsBigIÁ
(
ùx
, 
¬gv
[1]);

1431 ià(
	`JS_ToIÁ64Ext
(
ùx
, &
pos
, 
¬gv
[1]))

1432  
JS_EXCEPTION
;

1433 ià(
	`JS_ToIÁ32
(
ùx
, &
wh’û
, 
¬gv
[2]))

1434  
JS_EXCEPTION
;

1435 
»t
 = 
	`l£ek
(
fd
, 
pos
, 
wh’û
);

1436 ià(
»t
 == -1)

1437 
»t
 = -
”ºo
;

1438 ià(
is_bigšt
)

1439  
	`JS_NewBigIÁ64
(
ùx
, 
»t
);

1441  
	`JS_NewIÁ64
(
ùx
, 
»t
);

1442 
	}
}

1444 
JSV®ue
 
	$js_os_»ad_wr™e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1445 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

1447 
fd
;

1448 
ušt64_t
 
pos
, 
Ën
;

1449 
size_t
 
size
;

1450 
ssize_t
 
»t
;

1451 
ušt8_t
 *
buf
;

1453 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1454  
JS_EXCEPTION
;

1455 ià(
	`JS_ToIndex
(
ùx
, &
pos
, 
¬gv
[2]))

1456  
JS_EXCEPTION
;

1457 ià(
	`JS_ToIndex
(
ùx
, &
Ën
, 
¬gv
[3]))

1458  
JS_EXCEPTION
;

1459 
buf
 = 
	`JS_G‘A¼ayBufãr
(
ùx
, &
size
, 
¬gv
[1]);

1460 ià(!
buf
)

1461  
JS_EXCEPTION
;

1462 ià(
pos
 + 
Ën
 > 
size
)

1463  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "read/write‡rray buffer overflow");

1464 ià(
magic
)

1465 
»t
 = 
	`js_g‘_”ºo
(
	`wr™e
(
fd
, 
buf
 + 
pos
, 
Ën
));

1467 
»t
 = 
	`js_g‘_”ºo
(
	`»ad
(
fd
, 
buf
 + 
pos
, 
Ën
));

1468  
	`JS_NewIÁ64
(
ùx
, 
»t
);

1469 
	}
}

1471 
JSV®ue
 
	$js_os_i§‰y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1472 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1474 
fd
;

1475 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1476  
JS_EXCEPTION
;

1477  
	`JS_NewBoŞ
(
ùx
, 
	`i§‰y
(
fd
) == 1);

1478 
	}
}

1480 #ià
defšed
(
_WIN32
)

1481 
JSV®ue
 
	$js_os_‰yG‘WšSize
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1482 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1484 
fd
;

1485 
HANDLE
 
hªdË
;

1486 
CONSOLE_SCREEN_BUFFER_INFO
 
šfo
;

1487 
JSV®ue
 
obj
;

1489 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1490  
JS_EXCEPTION
;

1491 
hªdË
 = (
HANDLE
)
	`_g‘_osfhªdË
(
fd
);

1493 ià(!
	`G‘CÚsŞeSü“nBufãrInfo
(
hªdË
, &
šfo
))

1494  
JS_NULL
;

1495 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

1496 ià(
	`JS_IsExû±iÚ
(
obj
))

1497  
obj
;

1498 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 0, 
	`JS_NewIÁ32
(ùx, 
šfo
.
dwSize
.
X
), 
JS_PROP_C_W_E
);

1499 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 1, 
	`JS_NewIÁ32
(ùx, 
šfo
.
dwSize
.
Y
), 
JS_PROP_C_W_E
);

1500  
obj
;

1501 
	}
}

1503 
JSV®ue
 
	$js_os_‰yS‘Raw
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1504 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1506 
fd
;

1507 
HANDLE
 
hªdË
;

1509 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1510  
JS_EXCEPTION
;

1511 
hªdË
 = (
HANDLE
)
	`_g‘_osfhªdË
(
fd
);

1513 
	`S‘CÚsŞeMode
(
hªdË
, 
ENABLE_WINDOW_INPUT
);

1514  
JS_UNDEFINED
;

1515 
	}
}

1517 
JSV®ue
 
	$js_os_‰yG‘WšSize
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1518 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1520 
fd
;

1521 
wšsize
 
ws
;

1522 
JSV®ue
 
obj
;

1524 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1525  
JS_EXCEPTION
;

1526 ià(
	`ioùl
(
fd
, 
TIOCGWINSZ
, &
ws
) == 0 &&

1527 
ws
.
ws_cŞ
 >ğ4 && ws.
ws_row
 >= 4) {

1528 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

1529 ià(
	`JS_IsExû±iÚ
(
obj
))

1530  
obj
;

1531 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 0, 
	`JS_NewIÁ32
(ùx, 
ws
.
ws_cŞ
), 
JS_PROP_C_W_E
);

1532 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 1, 
	`JS_NewIÁ32
(ùx, 
ws
.
ws_row
), 
JS_PROP_C_W_E
);

1533  
obj
;

1535  
JS_NULL
;

1537 
	}
}

1539 
‹rmios
 
	gŞd‰y
;

1541 
	$‹rm_ex™
()

1543 
	`tc£‰r
(0, 
TCSANOW
, &
Şd‰y
);

1544 
	}
}

1547 
JSV®ue
 
	$js_os_‰yS‘Raw
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1548 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1550 
‹rmios
 
‰y
;

1551 
fd
;

1553 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1554  
JS_EXCEPTION
;

1556 
	`mem£t
(&
‰y
, 0, (tty));

1557 
	`tcg‘©Œ
(
fd
, &
‰y
);

1558 
Şd‰y
 = 
‰y
;

1560 
‰y
.
c_iæag
 &ğ~(
IGNBRK
|
BRKINT
|
PARMRK
|
ISTRIP


1561 |
INLCR
|
IGNCR
|
ICRNL
|
IXON
);

1562 
‰y
.
c_oæag
 |ğ
OPOST
;

1563 
‰y
.
c_læag
 &ğ~(
ECHO
|
ECHONL
|
ICANON
|
IEXTEN
);

1564 
‰y
.
c_cæag
 &ğ~(
CSIZE
|
PARENB
);

1565 
‰y
.
c_cæag
 |ğ
CS8
;

1566 
‰y
.
c_cc
[
VMIN
] = 1;

1567 
‰y
.
c_cc
[
VTIME
] = 0;

1569 
	`tc£‰r
(
fd
, 
TCSANOW
, &
‰y
);

1571 
	`©ex™
(
‹rm_ex™
);

1572  
JS_UNDEFINED
;

1573 
	}
}

1577 
JSV®ue
 
	$js_os_»move
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1578 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1580 cÚ¡ *
f’ame
;

1581 
»t
;

1583 
f’ame
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

1584 ià(!
f’ame
)

1585  
JS_EXCEPTION
;

1586 
»t
 = 
	`js_g‘_”ºo
(
	`»move
(
f’ame
));

1587 
	`JS_F»eCSŒšg
(
ùx
, 
f’ame
);

1588  
	`JS_NewIÁ32
(
ùx
, 
»t
);

1589 
	}
}

1591 
JSV®ue
 
	$js_os_»Çme
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1592 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1594 cÚ¡ *
Şd·th
, *
Ãw·th
;

1595 
»t
;

1597 
Şd·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

1598 ià(!
Şd·th
)

1599  
JS_EXCEPTION
;

1600 
Ãw·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[1]);

1601 ià(!
Ãw·th
) {

1602 
	`JS_F»eCSŒšg
(
ùx
, 
Şd·th
);

1603  
JS_EXCEPTION
;

1605 
»t
 = 
	`js_g‘_”ºo
(
	`»Çme
(
Şd·th
, 
Ãw·th
));

1606 
	`JS_F»eCSŒšg
(
ùx
, 
Şd·th
);

1607 
	`JS_F»eCSŒšg
(
ùx
, 
Ãw·th
);

1608  
	`JS_NewIÁ32
(
ùx
, 
»t
);

1609 
	}
}

1611 
JSOSRWHªdËr
 *
	$fšd_rh
(
fd
)

1613 
JSOSRWHªdËr
 *
rh
;

1614 
li¡_h—d
 *
–
;

1615 
	`li¡_fÜ_—ch
(
–
, &
os_rw_hªdËrs
) {

1616 
rh
 = 
	`li¡_’Œy
(
–
, 
JSOSRWHªdËr
, 
lšk
);

1617 ià(
rh
->
fd
 == fd)

1618  
rh
;

1620  
NULL
;

1621 
	}
}

1623 
	$ä“_rw_hªdËr
(
JSRuÁime
 *
¹
, 
JSOSRWHªdËr
 *
rh
)

1625 
i
;

1626 
	`li¡_d–
(&
rh
->
lšk
);

1627 
i
 = 0; i < 2; i++) {

1628 
	`JS_F»eV®ueRT
(
¹
, 
rh
->
rw_func
[
i
]);

1630 
	`js_ä“_¹
(
¹
, 
rh
);

1631 
	}
}

1633 
JSV®ue
 
	$js_os_£tR—dHªdËr
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1634 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

1636 
JSOSRWHªdËr
 *
rh
;

1637 
fd
;

1638 
JSV®ueCÚ¡
 
func
;

1640 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

1641  
JS_EXCEPTION
;

1642 
func
 = 
¬gv
[1];

1643 ià(
	`JS_IsNuÎ
(
func
)) {

1644 
rh
 = 
	`fšd_rh
(
fd
);

1645 ià(
rh
) {

1646 
	`JS_F»eV®ue
(
ùx
, 
rh
->
rw_func
[
magic
]);

1647 
rh
->
rw_func
[
magic
] = 
JS_NULL
;

1648 ià(
	`JS_IsNuÎ
(
rh
->
rw_func
[0]) &&

1649 
	`JS_IsNuÎ
(
rh
->
rw_func
[1])) {

1651 
	`ä“_rw_hªdËr
(
	`JS_G‘RuÁime
(
ùx
), 
rh
);

1655 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
func
))

1656  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ function");

1657 
rh
 = 
	`fšd_rh
(
fd
);

1658 ià(!
rh
) {

1659 
rh
 = 
	`js_m®locz
(
ùx
, (*rh));

1660 ià(!
rh
)

1661  
JS_EXCEPTION
;

1662 
rh
->
fd
 = fd;

1663 
rh
->
rw_func
[0] = 
JS_NULL
;

1664 
rh
->
rw_func
[1] = 
JS_NULL
;

1665 
	`li¡_add_
(&
rh
->
lšk
, &
os_rw_hªdËrs
);

1667 
	`JS_F»eV®ue
(
ùx
, 
rh
->
rw_func
[
magic
]);

1668 
rh
->
rw_func
[
magic
] = 
	`JS_DupV®ue
(
ùx
, 
func
);

1670  
JS_UNDEFINED
;

1671 
	}
}

1673 
JSOSSigÇlHªdËr
 *
	$fšd_sh
(
sig_num
)

1675 
JSOSSigÇlHªdËr
 *
sh
;

1676 
li¡_h—d
 *
–
;

1677 
	`li¡_fÜ_—ch
(
–
, &
os_sigÇl_hªdËrs
) {

1678 
sh
 = 
	`li¡_’Œy
(
–
, 
JSOSSigÇlHªdËr
, 
lšk
);

1679 ià(
sh
->
sig_num
 == sig_num)

1680  
sh
;

1682  
NULL
;

1683 
	}
}

1685 
	$ä“_sh
(
JSRuÁime
 *
¹
, 
JSOSSigÇlHªdËr
 *
sh
)

1687 
	`li¡_d–
(&
sh
->
lšk
);

1688 
	`JS_F»eV®ueRT
(
¹
, 
sh
->
func
);

1689 
	`js_ä“_¹
(
¹
, 
sh
);

1690 
	}
}

1692 
	$os_sigÇl_hªdËr
(
sig_num
)

1694 
os_³ndšg_sigÇls
 |ğ((
ušt64_t
)1 << 
sig_num
);

1695 
	}
}

1697 #ià
defšed
(
_WIN32
)

1698 (*
	tsighªdËr_t
)(
	tsig_num
);

1701 (*
	tsighªdËr_t
)(
	tsig_num
);

1703 
JSV®ue
 
	$js_os_sigÇl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1704 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1706 
JSOSSigÇlHªdËr
 *
sh
;

1707 
ušt32_t
 
sig_num
;

1708 
JSV®ueCÚ¡
 
func
;

1709 
sighªdËr_t
 
hªdËr
;

1711 ià(
	`JS_ToUšt32
(
ùx
, &
sig_num
, 
¬gv
[0]))

1712  
JS_EXCEPTION
;

1713 ià(
sig_num
 >= 64)

1714  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid signal‚umber");

1715 
func
 = 
¬gv
[1];

1717 ià(
	`JS_IsNuÎ
(
func
è|| 
	`JS_IsUndefšed
(func)) {

1718 
sh
 = 
	`fšd_sh
(
sig_num
);

1719 ià(
sh
) {

1720 
	`ä“_sh
(
	`JS_G‘RuÁime
(
ùx
), 
sh
);

1722 ià(
	`JS_IsNuÎ
(
func
))

1723 
hªdËr
 = 
SIG_DFL
;

1725 
hªdËr
 = 
SIG_IGN
;

1726 
	`sigÇl
(
sig_num
, 
hªdËr
);

1728 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
func
))

1729  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ function");

1730 
sh
 = 
	`fšd_sh
(
sig_num
);

1731 ià(!
sh
) {

1732 
sh
 = 
	`js_m®locz
(
ùx
, (*sh));

1733 ià(!
sh
)

1734  
JS_EXCEPTION
;

1735 
sh
->
sig_num
 = sig_num;

1736 
	`li¡_add_
(&
sh
->
lšk
, &
os_sigÇl_hªdËrs
);

1738 
	`JS_F»eV®ue
(
ùx
, 
sh
->
func
);

1739 
sh
->
func
 = 
	`JS_DupV®ue
(
ùx
, func);

1740 
	`sigÇl
(
sig_num
, 
os_sigÇl_hªdËr
);

1742  
JS_UNDEFINED
;

1743 
	}
}

1745 #ià
defšed
(
__lšux__
è|| defšed(
__APPLE__
)

1746 
sšt64_t
 
	$g‘_time_ms
()

1748 
time¥ec
 
ts
;

1749 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
ts
);

1750  (
ušt64_t
)
ts
.
tv_£c
 * 1000 + (ts.
tv_n£c
 / 1000000);

1751 
	}
}

1754 
št64_t
 
	$g‘_time_ms
()

1756 
timev®
 
tv
;

1757 
	`g‘timeofday
(&
tv
, 
NULL
);

1758  (
št64_t
)
tv
.
tv_£c
 * 1000 + (tv.
tv_u£c
 / 1000);

1759 
	}
}

1762 
	$uÆšk_tim”
(
JSRuÁime
 *
¹
, 
JSOSTim”
 *
th
)

1764 ià(
th
->
lšk
.
´ev
) {

1765 
	`li¡_d–
(&
th
->
lšk
);

1766 
th
->
lšk
.
´ev
 =h->lšk.
Ãxt
 = 
NULL
;

1768 
	}
}

1770 
	$ä“_tim”
(
JSRuÁime
 *
¹
, 
JSOSTim”
 *
th
)

1772 
	`JS_F»eV®ueRT
(
¹
, 
th
->
func
);

1773 
	`js_ä“_¹
(
¹
, 
th
);

1774 
	}
}

1776 
JSCÏssID
 
	gjs_os_tim”_şass_id
;

1778 
	$js_os_tim”_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

1780 
JSOSTim”
 *
th
 = 
	`JS_G‘O·que
(
v®
, 
js_os_tim”_şass_id
);

1781 ià(
th
) {

1782 
th
->
has_objeù
 = 
FALSE
;

1783 ià(!
th
->
lšk
.
´ev
)

1784 
	`ä“_tim”
(
¹
, 
th
);

1786 
	}
}

1788 
	$js_os_tim”_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1789 
JS_M¬kFunc
 *
m¬k_func
)

1791 
JSOSTim”
 *
th
 = 
	`JS_G‘O·que
(
v®
, 
js_os_tim”_şass_id
);

1792 ià(
th
) {

1793 
	`JS_M¬kV®ue
(
¹
, 
th
->
func
, 
m¬k_func
);

1795 
	}
}

1797 
JSV®ue
 
	$js_os_£tTimeout
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1798 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1800 
sšt64_t
 
d–ay
;

1801 
JSV®ueCÚ¡
 
func
;

1802 
JSOSTim”
 *
th
;

1803 
JSV®ue
 
obj
;

1805 
func
 = 
¬gv
[0];

1806 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
func
))

1807  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ function");

1808 ià(
	`JS_ToIÁ64
(
ùx
, &
d–ay
, 
¬gv
[1]))

1809  
JS_EXCEPTION
;

1810 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
js_os_tim”_şass_id
);

1811 ià(
	`JS_IsExû±iÚ
(
obj
))

1812  
obj
;

1813 
th
 = 
	`js_m®locz
(
ùx
, (*th));

1814 ià(!
th
) {

1815 
	`JS_F»eV®ue
(
ùx
, 
obj
);

1816  
JS_EXCEPTION
;

1818 
th
->
has_objeù
 = 
TRUE
;

1819 
th
->
timeout
 = 
	`g‘_time_ms
(è+ 
d–ay
;

1820 
th
->
func
 = 
	`JS_DupV®ue
(
ùx
, func);

1821 
	`li¡_add_
(&
th
->
lšk
, &
os_tim”s
);

1822 
	`JS_S‘O·que
(
obj
, 
th
);

1823  
obj
;

1824 
	}
}

1826 
JSV®ue
 
	$js_os_ş—rTimeout
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1827 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1829 
JSOSTim”
 *
th
 = 
	`JS_G‘O·que2
(
ùx
, 
¬gv
[0], 
js_os_tim”_şass_id
);

1830 ià(!
th
)

1831  
JS_EXCEPTION
;

1832 
	`uÆšk_tim”
(
	`JS_G‘RuÁime
(
ùx
), 
th
);

1833  
JS_UNDEFINED
;

1834 
	}
}

1836 
JSCÏssDef
 
	gjs_os_tim”_şass
 = {

1838 .
fš®iz”
 = 
js_os_tim”_fš®iz”
,

1839 .
	ggc_m¬k
 = 
js_os_tim”_m¬k
,

1842 
	$ÿÎ_hªdËr
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func
)

1844 
JSV®ue
 
»t
, 
func1
;

1847 
func1
 = 
	`JS_DupV®ue
(
ùx
, 
func
);

1848 
»t
 = 
	`JS_C®l
(
ùx
, 
func1
, 
JS_UNDEFINED
, 0, 
NULL
);

1849 
	`JS_F»eV®ue
(
ùx
, 
func1
);

1850 ià(
	`JS_IsExû±iÚ
(
»t
))

1851 
	`js_¡d_dump_”rÜ
(
ùx
);

1852 
	`JS_F»eV®ue
(
ùx
, 
»t
);

1853 
	}
}

1855 #ià
defšed
(
_WIN32
)

1857 
	$js_os_pŞl
(
JSCÚ‹xt
 *
ùx
)

1859 
mš_d–ay
, 
cÚsŞe_fd
;

1860 
št64_t
 
cur_time
, 
d–ay
;

1861 
JSOSRWHªdËr
 *
rh
;

1862 
li¡_h—d
 *
–
;

1866 ià(
	`li¡_em±y
(&
os_rw_hªdËrs
è&&†i¡_em±y(&
os_tim”s
))

1870 ià(!
	`li¡_em±y
(&
os_tim”s
)) {

1871 
cur_time
 = 
	`g‘_time_ms
();

1872 
mš_d–ay
 = 10000;

1873 
	`li¡_fÜ_—ch
(
–
, &
os_tim”s
) {

1874 
JSOSTim”
 *
th
 = 
	`li¡_’Œy
(
–
, JSOSTim”, 
lšk
);

1875 
d–ay
 = 
th
->
timeout
 - 
cur_time
;

1876 ià(
d–ay
 <= 0) {

1877 
JSV®ue
 
func
;

1879 
func
 = 
th
->func;

1880 
th
->
func
 = 
JS_UNDEFINED
;

1881 
	`uÆšk_tim”
(
	`JS_G‘RuÁime
(
ùx
), 
th
);

1882 ià(!
th
->
has_objeù
)

1883 
	`ä“_tim”
(
	`JS_G‘RuÁime
(
ùx
), 
th
);

1884 
	`ÿÎ_hªdËr
(
ùx
, 
func
);

1885 
	`JS_F»eV®ue
(
ùx
, 
func
);

1887 } ià(
d–ay
 < 
mš_d–ay
) {

1888 
mš_d–ay
 = 
d–ay
;

1892 
mš_d–ay
 = -1;

1895 
cÚsŞe_fd
 = -1;

1896 
	`li¡_fÜ_—ch
(
–
, &
os_rw_hªdËrs
) {

1897 
rh
 = 
	`li¡_’Œy
(
–
, 
JSOSRWHªdËr
, 
lšk
);

1898 ià(
rh
->
fd
 =ğ0 && !
	`JS_IsNuÎ
Ôh->
rw_func
[0])) {

1899 
cÚsŞe_fd
 = 
rh
->
fd
;

1904 ià(
cÚsŞe_fd
 >= 0) {

1905 
DWORD
 
ti
, 
»t
;

1906 
HANDLE
 
hªdË
;

1907 ià(
mš_d–ay
 == -1)

1908 
ti
 = 
INFINITE
;

1910 
ti
 = 
mš_d–ay
;

1911 
hªdË
 = (
HANDLE
)
	`_g‘_osfhªdË
(
cÚsŞe_fd
);

1912 
»t
 = 
	`Wa™FÜSšgËObjeù
(
hªdË
, 
ti
);

1913 ià(
»t
 =ğ
WAIT_OBJECT_0
) {

1914 
	`li¡_fÜ_—ch
(
–
, &
os_rw_hªdËrs
) {

1915 
rh
 = 
	`li¡_’Œy
(
–
, 
JSOSRWHªdËr
, 
lšk
);

1916 ià(
rh
->
fd
 =ğ
cÚsŞe_fd
 && !
	`JS_IsNuÎ
Ôh->
rw_func
[0])) {

1917 
	`ÿÎ_hªdËr
(
ùx
, 
rh
->
rw_func
[0]);

1924 
	`SË•
(
mš_d–ay
);

1927 
	}
}

1929 
	$js_os_pŞl
(
JSCÚ‹xt
 *
ùx
)

1931 
»t
, 
fd_max
, 
mš_d–ay
;

1932 
sšt64_t
 
cur_time
, 
d–ay
;

1933 
fd_£t
 
rfds
, 
wfds
;

1934 
JSOSRWHªdËr
 *
rh
;

1935 
li¡_h—d
 *
–
;

1936 
timev®
 
tv
, *
tvp
;

1938 ià(
	`uÆik–y
(
os_³ndšg_sigÇls
 != 0)) {

1939 
JSOSSigÇlHªdËr
 *
sh
;

1940 
ušt64_t
 
mask
;

1942 
	`li¡_fÜ_—ch
(
–
, &
os_sigÇl_hªdËrs
) {

1943 
sh
 = 
	`li¡_’Œy
(
–
, 
JSOSSigÇlHªdËr
, 
lšk
);

1944 
mask
 = (
ušt64_t
)1 << 
sh
->
sig_num
;

1945 ià(
os_³ndšg_sigÇls
 & 
mask
) {

1946 
os_³ndšg_sigÇls
 &ğ~
mask
;

1947 
	`ÿÎ_hªdËr
(
ùx
, 
sh
->
func
);

1953 ià(
	`li¡_em±y
(&
os_rw_hªdËrs
è&&†i¡_em±y(&
os_tim”s
))

1956 ià(!
	`li¡_em±y
(&
os_tim”s
)) {

1957 
cur_time
 = 
	`g‘_time_ms
();

1958 
mš_d–ay
 = 10000;

1959 
	`li¡_fÜ_—ch
(
–
, &
os_tim”s
) {

1960 
JSOSTim”
 *
th
 = 
	`li¡_’Œy
(
–
, JSOSTim”, 
lšk
);

1961 
d–ay
 = 
th
->
timeout
 - 
cur_time
;

1962 ià(
d–ay
 <= 0) {

1963 
JSV®ue
 
func
;

1965 
func
 = 
th
->func;

1966 
th
->
func
 = 
JS_UNDEFINED
;

1967 
	`uÆšk_tim”
(
	`JS_G‘RuÁime
(
ùx
), 
th
);

1968 ià(!
th
->
has_objeù
)

1969 
	`ä“_tim”
(
	`JS_G‘RuÁime
(
ùx
), 
th
);

1970 
	`ÿÎ_hªdËr
(
ùx
, 
func
);

1971 
	`JS_F»eV®ue
(
ùx
, 
func
);

1973 } ià(
d–ay
 < 
mš_d–ay
) {

1974 
mš_d–ay
 = 
d–ay
;

1977 
tv
.
tv_£c
 = 
mš_d–ay
 / 1000;

1978 
tv
.
tv_u£c
 = (
mš_d–ay
 % 1000) * 1000;

1979 
tvp
 = &
tv
;

1981 
tvp
 = 
NULL
;

1984 
	`FD_ZERO
(&
rfds
);

1985 
	`FD_ZERO
(&
wfds
);

1986 
fd_max
 = -1;

1987 
	`li¡_fÜ_—ch
(
–
, &
os_rw_hªdËrs
) {

1988 
rh
 = 
	`li¡_’Œy
(
–
, 
JSOSRWHªdËr
, 
lšk
);

1989 
fd_max
 = 
	`max_št
(fd_max, 
rh
->
fd
);

1990 ià(!
	`JS_IsNuÎ
(
rh
->
rw_func
[0]))

1991 
	`FD_SET
(
rh
->
fd
, &
rfds
);

1992 ià(!
	`JS_IsNuÎ
(
rh
->
rw_func
[1]))

1993 
	`FD_SET
(
rh
->
fd
, &
wfds
);

1996 
»t
 = 
	`£Ëù
(
fd_max
 + 1, &
rfds
, &
wfds
, 
NULL
, 
tvp
);

1997 ià(
»t
 > 0) {

1998 
	`li¡_fÜ_—ch
(
–
, &
os_rw_hªdËrs
) {

1999 
rh
 = 
	`li¡_’Œy
(
–
, 
JSOSRWHªdËr
, 
lšk
);

2000 ià(!
	`JS_IsNuÎ
(
rh
->
rw_func
[0]) &&

2001 
	`FD_ISSET
(
rh
->
fd
, &
rfds
)) {

2002 
	`ÿÎ_hªdËr
(
ùx
, 
rh
->
rw_func
[0]);

2006 ià(!
	`JS_IsNuÎ
(
rh
->
rw_func
[1])) {

2007 
	`FD_SET
(
rh
->
fd
, &
wfds
);

2008 
	`ÿÎ_hªdËr
(
ùx
, 
rh
->
rw_func
[1]);

2015 
	}
}

2018 
JSV®ue
 
	$make_obj_”rÜ
(
JSCÚ‹xt
 *
ùx
,

2019 
JSV®ue
 
obj
,

2020 
”r
)

2022 
JSV®ue
 
¬r
;

2023 ià(
	`JS_IsExû±iÚ
(
obj
))

2024  
obj
;

2025 
¬r
 = 
	`JS_NewA¼ay
(
ùx
);

2026 ià(
	`JS_IsExû±iÚ
(
¬r
))

2027  
JS_EXCEPTION
;

2028 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
¬r
, 0, 
obj
,

2029 
JS_PROP_C_W_E
);

2030 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
¬r
, 1, 
	`JS_NewIÁ32
(ùx, 
”r
),

2031 
JS_PROP_C_W_E
);

2032  
¬r
;

2033 
	}
}

2035 
JSV®ue
 
	$make_¡ršg_”rÜ
(
JSCÚ‹xt
 *
ùx
,

2036 cÚ¡ *
buf
,

2037 
”r
)

2039  
	`make_obj_”rÜ
(
ùx
, 
	`JS_NewSŒšg
(ùx, 
buf
), 
”r
);

2040 
	}
}

2043 
JSV®ue
 
	$js_os_g‘cwd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2044 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2046 
buf
[
PATH_MAX
];

2047 
”r
;

2049 ià(!
	`g‘cwd
(
buf
, (buf))) {

2050 
buf
[0] = '\0';

2051 
”r
 = 
”ºo
;

2053 
”r
 = 0;

2055  
	`make_¡ršg_”rÜ
(
ùx
, 
buf
, 
”r
);

2056 
	}
}

2058 #ià!
defšed
(
_WIN32
)

2060 
JSV®ue
 
	$js_os_chdœ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2061 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2063 cÚ¡ *
rg‘
;

2064 
”r
;

2066 
rg‘
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2067 ià(!
rg‘
)

2068  
JS_EXCEPTION
;

2069 
”r
 = 
	`js_g‘_”ºo
(
	`chdœ
(
rg‘
));

2070 
	`JS_F»eCSŒšg
(
ùx
, 
rg‘
);

2071  
	`JS_NewIÁ32
(
ùx
, 
”r
);

2072 
	}
}

2075 
JSV®ue
 
	$js_os_»®·th
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2076 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2078 cÚ¡ *
·th
;

2079 
buf
[
PATH_MAX
], *
»s
;

2080 
”r
;

2082 
·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2083 ià(!
·th
)

2084  
JS_EXCEPTION
;

2085 
»s
 = 
	`»®·th
(
·th
, 
buf
);

2086 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2087 ià(!
»s
) {

2088 
buf
[0] = '\0';

2089 
”r
 = 
”ºo
;

2091 
”r
 = 0;

2093  
	`make_¡ršg_”rÜ
(
ùx
, 
buf
, 
”r
);

2094 
	}
}

2096 
JSV®ue
 
	$js_os_mkdœ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2097 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2099 
mode
, 
»t
;

2100 cÚ¡ *
·th
;

2102 ià(
¬gc
 >= 2) {

2103 ià(
	`JS_ToIÁ32
(
ùx
, &
mode
, 
¬gv
[1]))

2104  
JS_EXCEPTION
;

2106 
mode
 = 0777;

2108 
·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2109 ià(!
·th
)

2110  
JS_EXCEPTION
;

2111 
»t
 = 
	`js_g‘_”ºo
(
	`mkdœ
(
·th
, 
mode
));

2112 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2113  
	`JS_NewIÁ32
(
ùx
, 
»t
);

2114 
	}
}

2116 
sšt64_t
 
	$time¥ec_to_ms
(cÚ¡ 
time¥ec
 *
tv
)

2118  (
sšt64_t
)
tv
->
tv_£c
 * 1000 + (tv->
tv_n£c
 / 1000000);

2119 
	}
}

2122 
JSV®ue
 
	$js_os_¡©
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2123 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
is_l¡©
)

2125 cÚ¡ *
·th
;

2126 
”r
, 
»s
;

2127 
¡©
 
¡
;

2128 
JSV®ue
 
obj
;

2130 
·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2131 ià(!
·th
)

2132  
JS_EXCEPTION
;

2133 ià(
is_l¡©
)

2134 
»s
 = 
	`l¡©
(
·th
, &
¡
);

2136 
»s
 = 
	`¡©
(
·th
, &
¡
);

2137 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2138 ià(
»s
 < 0) {

2139 
”r
 = 
”ºo
;

2140 
obj
 = 
JS_NULL
;

2142 
”r
 = 0;

2143 
obj
 = 
	`JS_NewObjeù
(
ùx
);

2144 ià(
	`JS_IsExû±iÚ
(
obj
))

2145  
JS_EXCEPTION
;

2146 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "dev",

2147 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_dev
),

2148 
JS_PROP_C_W_E
);

2149 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "ino",

2150 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_šo
),

2151 
JS_PROP_C_W_E
);

2152 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "mode",

2153 
	`JS_NewIÁ32
(
ùx
, 
¡
.
¡_mode
),

2154 
JS_PROP_C_W_E
);

2155 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "nlink",

2156 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_Æšk
),

2157 
JS_PROP_C_W_E
);

2158 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "uid",

2159 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_uid
),

2160 
JS_PROP_C_W_E
);

2161 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "gid",

2162 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_gid
),

2163 
JS_PROP_C_W_E
);

2164 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "rdev",

2165 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_rdev
),

2166 
JS_PROP_C_W_E
);

2167 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "size",

2168 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_size
),

2169 
JS_PROP_C_W_E
);

2170 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "blocks",

2171 
	`JS_NewIÁ64
(
ùx
, 
¡
.
¡_blocks
),

2172 
JS_PROP_C_W_E
);

2173 #ià
	`defšed
(
__APPLE__
)

2174 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "atime",

2175 
	`JS_NewIÁ64
(
ùx
, 
	`time¥ec_to_ms
(&
¡
.
¡_©ime¥ec
)),

2176 
JS_PROP_C_W_E
);

2177 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "mtime",

2178 
	`JS_NewIÁ64
(
ùx
, 
	`time¥ec_to_ms
(&
¡
.
¡_mtime¥ec
)),

2179 
JS_PROP_C_W_E
);

2180 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "ctime",

2181 
	`JS_NewIÁ64
(
ùx
, 
	`time¥ec_to_ms
(&
¡
.
¡_ùime¥ec
)),

2182 
JS_PROP_C_W_E
);

2184 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "atime",

2185 
	`JS_NewIÁ64
(
ùx
, 
	`time¥ec_to_ms
(&
¡
.
¡_©im
)),

2186 
JS_PROP_C_W_E
);

2187 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "mtime",

2188 
	`JS_NewIÁ64
(
ùx
, 
	`time¥ec_to_ms
(&
¡
.
¡_mtim
)),

2189 
JS_PROP_C_W_E
);

2190 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, "ctime",

2191 
	`JS_NewIÁ64
(
ùx
, 
	`time¥ec_to_ms
(&
¡
.
¡_ùim
)),

2192 
JS_PROP_C_W_E
);

2195  
	`make_obj_”rÜ
(
ùx
, 
obj
, 
”r
);

2196 
	}
}

2198 
JSV®ue
 
	$js_os_symlšk
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2199 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2201 cÚ¡ *
rg‘
, *
lšk·th
;

2202 
”r
;

2204 
rg‘
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2205 ià(!
rg‘
)

2206  
JS_EXCEPTION
;

2207 
lšk·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[1]);

2208 ià(!
lšk·th
) {

2209 
	`JS_F»eCSŒšg
(
ùx
, 
rg‘
);

2210  
JS_EXCEPTION
;

2212 
”r
 = 
	`js_g‘_”ºo
(
	`symlšk
(
rg‘
, 
lšk·th
));

2213 
	`JS_F»eCSŒšg
(
ùx
, 
rg‘
);

2214 
	`JS_F»eCSŒšg
(
ùx
, 
lšk·th
);

2215  
	`JS_NewIÁ32
(
ùx
, 
”r
);

2216 
	}
}

2219 
JSV®ue
 
	$js_os_»adlšk
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2220 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2222 cÚ¡ *
·th
;

2223 
buf
[
PATH_MAX
];

2224 
”r
;

2225 
ssize_t
 
»s
;

2227 
·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2228 ià(!
·th
)

2229  
JS_EXCEPTION
;

2230 
»s
 = 
	`»adlšk
(
·th
, 
buf
, (buf) - 1);

2231 ià(
»s
 < 0) {

2232 
buf
[0] = '\0';

2233 
”r
 = 
”ºo
;

2235 
buf
[
»s
] = '\0';

2236 
”r
 = 0;

2238 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2239  
	`make_¡ršg_”rÜ
(
ùx
, 
buf
, 
”r
);

2240 
	}
}

2243 
JSV®ue
 
	$js_os_»addœ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2244 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2246 cÚ¡ *
·th
;

2247 
DIR
 *
f
;

2248 
dœ’t
 *
d
;

2249 
JSV®ue
 
obj
;

2250 
”r
;

2251 
ušt32_t
 
Ën
;

2253 
·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2254 ià(!
·th
)

2255  
JS_EXCEPTION
;

2256 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

2257 ià(
	`JS_IsExû±iÚ
(
obj
)) {

2258 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2259  
JS_EXCEPTION
;

2261 
f
 = 
	`İ’dœ
(
·th
);

2262 ià(!
f
)

2263 
”r
 = 
”ºo
;

2265 
”r
 = 0;

2266 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2267 ià(!
f
)

2268 
dÚe
;

2269 
Ën
 = 0;

2271 
”ºo
 = 0;

2272 
d
 = 
	`»addœ
(
f
);

2273 ià(!
d
) {

2274 
”r
 = 
”ºo
;

2277 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 
Ën
++,

2278 
	`JS_NewSŒšg
(
ùx
, 
d
->
d_Çme
),

2279 
JS_PROP_C_W_E
);

2281 
	`şo£dœ
(
f
);

2282 
dÚe
:

2283  
	`make_obj_”rÜ
(
ùx
, 
obj
, 
”r
);

2284 
	}
}

2286 
	$ms_to_timev®
(
timev®
 *
tv
, 
ušt64_t
 
v
)

2288 
tv
->
tv_£c
 = 
v
 / 1000;

2289 
tv
->
tv_u£c
 = (
v
 % 1000) * 1000;

2290 
	}
}

2292 
JSV®ue
 
	$js_os_utimes
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2293 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2295 cÚ¡ *
·th
;

2296 
sšt64_t
 
©ime
, 
mtime
;

2297 
»t
;

2298 
timev®
 
times
[2];

2300 ià(
	`JS_ToIÁ64
(
ùx
, &
©ime
, 
¬gv
[1]))

2301  
JS_EXCEPTION
;

2302 ià(
	`JS_ToIÁ64
(
ùx
, &
mtime
, 
¬gv
[2]))

2303  
JS_EXCEPTION
;

2304 
·th
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

2305 ià(!
·th
)

2306  
JS_EXCEPTION
;

2307 
	`ms_to_timev®
(&
times
[0], 
©ime
);

2308 
	`ms_to_timev®
(&
times
[1], 
mtime
);

2309 
»t
 = 
	`js_g‘_”ºo
(
	`utimes
(
·th
, 
times
));

2310 
	`JS_F»eCSŒšg
(
ùx
, 
·th
);

2311  
	`JS_NewIÁ32
(
ùx
, 
»t
);

2312 
	}
}

2314 **
	$bud_’vp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

2316 
ušt32_t
 
Ën
, 
i
;

2317 
JSPrİ”tyEnum
 *
b
;

2318 **
’vp
, *
·œ
;

2319 cÚ¡ *
key
, *
¡r
;

2320 
JSV®ue
 
v®
;

2321 
size_t
 
key_Ën
, 
¡r_Ën
;

2323 ià(
	`JS_G‘OwnPrİ”tyNames
(
ùx
, &
b
, &
Ën
, 
obj
,

2324 
JS_GPN_STRING_MASK
 | 
JS_GPN_ENUM_ONLY
) < 0)

2325  
NULL
;

2326 
’vp
 = 
	`js_m®locz
(
ùx
, Ónvp[0]è* ((
size_t
)
Ën
 + 1));

2327 ià(!
’vp
)

2328 
ç
;

2329 
i
 = 0; i < 
Ën
; i++) {

2330 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
b
[
i
].
©om
);

2331 ià(
	`JS_IsExû±iÚ
(
v®
))

2332 
ç
;

2333 
¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
v®
);

2334 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2335 ià(!
¡r
)

2336 
ç
;

2337 
key
 = 
	`JS_AtomToCSŒšg
(
ùx
, 
b
[
i
].
©om
);

2338 ià(!
key
) {

2339 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

2340 
ç
;

2342 
key_Ën
 = 
	`¡¾’
(
key
);

2343 
¡r_Ën
 = 
	`¡¾’
(
¡r
);

2344 
·œ
 = 
	`js_m®loc
(
ùx
, 
key_Ën
 + 
¡r_Ën
 + 2);

2345 ià(!
·œ
) {

2346 
	`JS_F»eCSŒšg
(
ùx
, 
key
);

2347 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

2348 
ç
;

2350 
	`memıy
(
·œ
, 
key
, 
key_Ën
);

2351 
·œ
[
key_Ën
] = '=';

2352 
	`memıy
(
·œ
 + 
key_Ën
 + 1, 
¡r
, 
¡r_Ën
);

2353 
·œ
[
key_Ën
 + 1 + 
¡r_Ën
] = '\0';

2354 
’vp
[
i
] = 
·œ
;

2355 
	`JS_F»eCSŒšg
(
ùx
, 
key
);

2356 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

2358 
dÚe
:

2359 
i
 = 0; i < 
Ën
; i++)

2360 
	`JS_F»eAtom
(
ùx
, 
b
[
i
].
©om
);

2361 
	`js_ä“
(
ùx
, 
b
);

2362  
’vp
;

2363 
ç
:

2364 ià(
’vp
) {

2365 
i
 = 0; i < 
Ën
; i++)

2366 
	`js_ä“
(
ùx
, 
’vp
[
i
]);

2367 
	`js_ä“
(
ùx
, 
’vp
);

2368 
’vp
 = 
NULL
;

2370 
dÚe
;

2371 
	}
}

2374 
	$my_execv³
(cÚ¡ *
f’ame
, **
¬gv
, **
’vp
)

2376 *
·th
, *
p
, *
p_Ãxt
, *
p1
;

2377 
buf
[
PATH_MAX
];

2378 
size_t
 
f’ame_Ën
, 
·th_Ën
;

2379 
BOOL
 
—cûs_”rÜ
;

2381 
f’ame_Ën
 = 
	`¡¾’
(
f’ame
);

2382 ià(
f’ame_Ën
 == 0) {

2383 
”ºo
 = 
ENOENT
;

2386 ià(
	`¡rchr
(
f’ame
, '/'))

2387  
	`execve
(
f’ame
, 
¬gv
, 
’vp
);

2389 
·th
 = 
	`g‘’v
("PATH");

2390 ià(!
·th
)

2391 
·th
 = "/bin:/usr/bin";

2392 
—cûs_”rÜ
 = 
FALSE
;

2393 
p
 = 
·th
;

2394 
p
 = 
·th
;… !ğ
NULL
;… = 
p_Ãxt
) {

2395 
p1
 = 
	`¡rchr
(
p
, ':');

2396 ià(!
p1
) {

2397 
p_Ãxt
 = 
NULL
;

2398 
·th_Ën
 = 
	`¡¾’
(
p
);

2400 
p_Ãxt
 = 
p1
 + 1;

2401 
·th_Ën
 = 
p1
 - 
p
;

2404 ià((
·th_Ën
 + 1 + 
f’ame_Ën
 + 1è> 
PATH_MAX
)

2406 
	`memıy
(
buf
, 
p
, 
·th_Ën
);

2407 
buf
[
·th_Ën
] = '/';

2408 
	`memıy
(
buf
 + 
·th_Ën
 + 1, 
f’ame
, 
f’ame_Ën
);

2409 
buf
[
·th_Ën
 + 1 + 
f’ame_Ën
] = '\0';

2411 
	`execve
(
buf
, 
¬gv
, 
’vp
);

2413 
”ºo
) {

2414 
EACCES
:

2415 
—cûs_”rÜ
 = 
TRUE
;

2417 
ENOENT
:

2418 
ENOTDIR
:

2424 ià(
—cûs_”rÜ
)

2425 
”ºo
 = 
EACCES
;

2427 
	}
}

2430 
JSV®ue
 
	$js_os_exec
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2431 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2433 
JSV®ueCÚ¡
 
İtiÚs
, 
¬gs
 = 
¬gv
[0];

2434 
JSV®ue
 
v®
, 
»t_v®
;

2435 cÚ¡ **
exec_¬gv
, *
fe
 = 
NULL
, *
¡r
, *
cwd
 = NULL;

2436 **
’vp
 = 
’vœÚ
;

2437 
ušt32_t
 
exec_¬gc
, 
i
;

2438 
»t
, 
pid
, 
¡©us
;

2439 
BOOL
 
block_æag
 = 
TRUE
, 
u£_·th
 = TRUE;

2440 cÚ¡ *
¡d_Çme
[3] = { "stdin", "stdout", "stderr" };

2441 
¡d_fds
[3];

2442 
ušt32_t
 
uid
 = -1, 
gid
 = -1;

2444 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
¬gs
, "length");

2445 ià(
	`JS_IsExû±iÚ
(
v®
))

2446  
JS_EXCEPTION
;

2447 
»t
 = 
	`JS_ToUšt32
(
ùx
, &
exec_¬gc
, 
v®
);

2448 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2449 ià(
»t
)

2450  
JS_EXCEPTION
;

2452 ià(
exec_¬gc
 < 1 ||ƒxec_argc > 65535) {

2453  
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid‚umber of‡rguments");

2455 
exec_¬gv
 = 
	`js_m®locz
(
ùx
, Óxec_¬gv[0]è* (
exec_¬gc
 + 1));

2456 ià(!
exec_¬gv
)

2457  
JS_EXCEPTION
;

2458 
i
 = 0; i < 
exec_¬gc
; i++) {

2459 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
¬gs
, 
i
);

2460 ià(
	`JS_IsExû±iÚ
(
v®
))

2461 
exû±iÚ
;

2462 
¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
v®
);

2463 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2464 ià(!
¡r
)

2465 
exû±iÚ
;

2466 
exec_¬gv
[
i
] = 
¡r
;

2468 
exec_¬gv
[
exec_¬gc
] = 
NULL
;

2470 
i
 = 0; i < 3; i++)

2471 
¡d_fds
[
i
] = i;

2474 ià(
¬gc
 >= 2) {

2475 
İtiÚs
 = 
¬gv
[1];

2477 ià(
	`g‘_boŞ_İtiÚ
(
ùx
, &
block_æag
, 
İtiÚs
, "block"))

2478 
exû±iÚ
;

2479 ià(
	`g‘_boŞ_İtiÚ
(
ùx
, &
u£_·th
, 
İtiÚs
, "usePath"))

2480 
exû±iÚ
;

2482 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
İtiÚs
, "file");

2483 ià(
	`JS_IsExû±iÚ
(
v®
))

2484 
exû±iÚ
;

2485 ià(!
	`JS_IsUndefšed
(
v®
)) {

2486 
fe
 = 
	`JS_ToCSŒšg
(
ùx
, 
v®
);

2487 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2488 ià(!
fe
)

2489 
exû±iÚ
;

2492 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
İtiÚs
, "cwd");

2493 ià(
	`JS_IsExû±iÚ
(
v®
))

2494 
exû±iÚ
;

2495 ià(!
	`JS_IsUndefšed
(
v®
)) {

2496 
cwd
 = 
	`JS_ToCSŒšg
(
ùx
, 
v®
);

2497 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2498 ià(!
cwd
)

2499 
exû±iÚ
;

2503 
i
 = 0; i < 3; i++) {

2504 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
İtiÚs
, 
¡d_Çme
[
i
]);

2505 ià(
	`JS_IsExû±iÚ
(
v®
))

2506 
exû±iÚ
;

2507 ià(!
	`JS_IsUndefšed
(
v®
)) {

2508 
fd
;

2509 
»t
 = 
	`JS_ToIÁ32
(
ùx
, &
fd
, 
v®
);

2510 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2511 ià(
»t
)

2512 
exû±iÚ
;

2513 
¡d_fds
[
i
] = 
fd
;

2517 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
İtiÚs
, "env");

2518 ià(
	`JS_IsExû±iÚ
(
v®
))

2519 
exû±iÚ
;

2520 ià(!
	`JS_IsUndefšed
(
v®
)) {

2521 
’vp
 = 
	`bud_’vp
(
ùx
, 
v®
);

2522 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2523 ià(!
’vp
)

2524 
exû±iÚ
;

2527 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
İtiÚs
, "uid");

2528 ià(
	`JS_IsExû±iÚ
(
v®
))

2529 
exû±iÚ
;

2530 ià(!
	`JS_IsUndefšed
(
v®
)) {

2531 
»t
 = 
	`JS_ToUšt32
(
ùx
, &
uid
, 
v®
);

2532 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2533 ià(
»t
)

2534 
exû±iÚ
;

2537 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
İtiÚs
, "gid");

2538 ià(
	`JS_IsExû±iÚ
(
v®
))

2539 
exû±iÚ
;

2540 ià(!
	`JS_IsUndefšed
(
v®
)) {

2541 
»t
 = 
	`JS_ToUšt32
(
ùx
, &
gid
, 
v®
);

2542 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2543 ià(
»t
)

2544 
exû±iÚ
;

2548 
pid
 = 
	`fÜk
();

2549 ià(
pid
 < 0) {

2550 
	`JS_ThrowTy³E¼Ü
(
ùx
, "forkƒrror");

2551 
exû±iÚ
;

2553 ià(
pid
 == 0) {

2555 
fd_max
 = 
	`syscÚf
(
_SC_OPEN_MAX
);

2558 
i
 = 0; i < 3; i++) {

2559 ià(
¡d_fds
[
i
] != i) {

2560 ià(
	`dup2
(
¡d_fds
[
i
], i) < 0)

2561 
	`_ex™
(127);

2565 
i
 = 3; i < 
fd_max
; i++)

2566 
	`şo£
(
i
);

2567 ià(
cwd
) {

2568 ià(
	`chdœ
(
cwd
) < 0)

2569 
	`_ex™
(127);

2571 ià(
uid
 != -1) {

2572 ià(
	`£tuid
(
uid
) < 0)

2573 
	`_ex™
(127);

2575 ià(
gid
 != -1) {

2576 ià(
	`£tgid
(
gid
) < 0)

2577 
	`_ex™
(127);

2580 ià(!
fe
)

2581 
fe
 = 
exec_¬gv
[0];

2582 ià(
u£_·th
)

2583 
»t
 = 
	`my_execv³
(
fe
, (**)
exec_¬gv
, 
’vp
);

2585 
»t
 = 
	`execve
(
fe
, (**)
exec_¬gv
, 
’vp
);

2586 
	`_ex™
(127);

2589 ià(
block_æag
) {

2591 
»t
 = 
	`wa™pid
(
pid
, &
¡©us
, 0);

2592 ià(
»t
 =ğ
pid
) {

2593 ià(
	`WIFEXITED
(
¡©us
)) {

2594 
»t
 = 
	`WEXITSTATUS
(
¡©us
);

2596 } ià(
	`WIFSIGNALED
(
¡©us
)) {

2597 
»t
 = -
	`WTERMSIG
(
¡©us
);

2603 
»t
 = 
pid
;

2605 
»t_v®
 = 
	`JS_NewIÁ32
(
ùx
, 
»t
);

2606 
dÚe
:

2607 
	`JS_F»eCSŒšg
(
ùx
, 
fe
);

2608 
	`JS_F»eCSŒšg
(
ùx
, 
cwd
);

2609 
i
 = 0; i < 
exec_¬gc
; i++)

2610 
	`JS_F»eCSŒšg
(
ùx
, 
exec_¬gv
[
i
]);

2611 
	`js_ä“
(
ùx
, 
exec_¬gv
);

2612 ià(
’vp
 !ğ
’vœÚ
) {

2613 **
p
;

2614 
p
 = 
’vp
;

2615 *
p
 !ğ
NULL
) {

2616 
	`js_ä“
(
ùx
, *
p
);

2617 
p
++;

2619 
	`js_ä“
(
ùx
, 
’vp
);

2621  
»t_v®
;

2622 
exû±iÚ
:

2623 
»t_v®
 = 
JS_EXCEPTION
;

2624 
dÚe
;

2625 
	}
}

2628 
JSV®ue
 
	$js_os_wa™pid
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2629 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2631 
pid
, 
¡©us
, 
İtiÚs
, 
»t
;

2632 
JSV®ue
 
obj
;

2634 ià(
	`JS_ToIÁ32
(
ùx
, &
pid
, 
¬gv
[0]))

2635  
JS_EXCEPTION
;

2636 ià(
	`JS_ToIÁ32
(
ùx
, &
İtiÚs
, 
¬gv
[1]))

2637  
JS_EXCEPTION
;

2639 
»t
 = 
	`wa™pid
(
pid
, &
¡©us
, 
İtiÚs
);

2640 ià(
»t
 < 0) {

2641 
»t
 = -
”ºo
;

2642 
¡©us
 = 0;

2645 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

2646 ià(
	`JS_IsExû±iÚ
(
obj
))

2647  
obj
;

2648 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 0, 
	`JS_NewIÁ32
(ùx, 
»t
),

2649 
JS_PROP_C_W_E
);

2650 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 1, 
	`JS_NewIÁ32
(ùx, 
¡©us
),

2651 
JS_PROP_C_W_E
);

2652  
obj
;

2653 
	}
}

2656 
JSV®ue
 
	$js_os_pe
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2657 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2659 
pe_fds
[2], 
»t
;

2660 
JSV®ue
 
obj
;

2662 
»t
 = 
	`pe
(
pe_fds
);

2663 ià(
»t
 < 0)

2664  
JS_NULL
;

2665 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

2666 ià(
	`JS_IsExû±iÚ
(
obj
))

2667  
obj
;

2668 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 0, 
	`JS_NewIÁ32
(ùx, 
pe_fds
[0]),

2669 
JS_PROP_C_W_E
);

2670 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 1, 
	`JS_NewIÁ32
(ùx, 
pe_fds
[1]),

2671 
JS_PROP_C_W_E
);

2672  
obj
;

2673 
	}
}

2676 
JSV®ue
 
	$js_os_kl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2677 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2679 
pid
, 
sig
, 
»t
;

2681 ià(
	`JS_ToIÁ32
(
ùx
, &
pid
, 
¬gv
[0]))

2682  
JS_EXCEPTION
;

2683 ià(
	`JS_ToIÁ32
(
ùx
, &
sig
, 
¬gv
[1]))

2684  
JS_EXCEPTION
;

2685 
»t
 = 
	`js_g‘_”ºo
(
	`kl
(
pid
, 
sig
));

2686  
	`JS_NewIÁ32
(
ùx
, 
»t
);

2687 
	}
}

2690 
JSV®ue
 
	$js_os_¦“p
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2691 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2693 
sšt64_t
 
d–ay
;

2694 
time¥ec
 
ts
;

2695 
»t
;

2697 ià(
	`JS_ToIÁ64
(
ùx
, &
d–ay
, 
¬gv
[0]))

2698  
JS_EXCEPTION
;

2699 
ts
.
tv_£c
 = 
d–ay
 / 1000;

2700 
ts
.
tv_n£c
 = (
d–ay
 % 1000) * 1000000;

2701 
»t
 = 
	`js_g‘_”ºo
(
	`Çno¦“p
(&
ts
, 
NULL
));

2702  
	`JS_NewIÁ32
(
ùx
, 
»t
);

2703 
	}
}

2706 
JSV®ue
 
	$js_os_dup
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2707 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2709 
fd
, 
»t
;

2711 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

2712  
JS_EXCEPTION
;

2713 
»t
 = 
	`js_g‘_”ºo
(
	`dup
(
fd
));

2714  
	`JS_NewIÁ32
(
ùx
, 
»t
);

2715 
	}
}

2718 
JSV®ue
 
	$js_os_dup2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2719 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2721 
fd
, 
fd2
, 
»t
;

2723 ià(
	`JS_ToIÁ32
(
ùx
, &
fd
, 
¬gv
[0]))

2724  
JS_EXCEPTION
;

2725 ià(
	`JS_ToIÁ32
(
ùx
, &
fd2
, 
¬gv
[1]))

2726  
JS_EXCEPTION
;

2727 
»t
 = 
	`js_g‘_”ºo
(
	`dup2
(
fd
, 
fd2
));

2728  
	`JS_NewIÁ32
(
ùx
, 
»t
);

2729 
	}
}

2733 #ià
defšed
(
_WIN32
)

2734 
	#OS_PLATFORM
 "wš32"

	)

2735 #–ià
defšed
(
__APPLE__
)

2736 
	#OS_PLATFORM
 "d¬wš"

	)

2737 #–ià
defšed
(
EMSCRIPTEN
)

2738 
	#OS_PLATFORM
 "js"

	)

2740 
	#OS_PLATFORM
 "lšux"

	)

2743 
	#OS_FLAG
(
x
è
	`JS_PROP_INT32_DEF
(#x, x, 
JS_PROP_CONFIGURABLE
 )

	)

2745 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_os_funcs
[] = {

2746 
JS_CFUNC_DEF
("İ’", 2, 
js_os_İ’
 ),

2747 
OS_FLAG
(
O_RDONLY
),

2748 
OS_FLAG
(
O_WRONLY
),

2749 
OS_FLAG
(
O_RDWR
),

2750 
OS_FLAG
(
O_APPEND
),

2751 
OS_FLAG
(
O_CREAT
),

2752 
OS_FLAG
(
O_EXCL
),

2753 
OS_FLAG
(
O_TRUNC
),

2754 #ià
defšed
(
_WIN32
)

2755 
OS_FLAG
(
O_BINARY
),

2756 
OS_FLAG
(
O_TEXT
),

2758 
JS_CFUNC_DEF
("şo£", 1, 
js_os_şo£
 ),

2759 
JS_CFUNC_DEF
("£ek", 3, 
js_os_£ek
 ),

2760 
JS_CFUNC_MAGIC_DEF
("»ad", 4, 
js_os_»ad_wr™e
, 0 ),

2761 
JS_CFUNC_MAGIC_DEF
("wr™e", 4, 
js_os_»ad_wr™e
, 1 ),

2762 
JS_CFUNC_DEF
("i§‰y", 1, 
js_os_i§‰y
 ),

2763 
JS_CFUNC_DEF
("‰yG‘WšSize", 1, 
js_os_‰yG‘WšSize
 ),

2764 
JS_CFUNC_DEF
("‰yS‘Raw", 1, 
js_os_‰yS‘Raw
 ),

2765 
JS_CFUNC_DEF
("»move", 1, 
js_os_»move
 ),

2766 
JS_CFUNC_DEF
("»Çme", 2, 
js_os_»Çme
 ),

2767 
JS_CFUNC_MAGIC_DEF
("£tR—dHªdËr", 2, 
js_os_£tR—dHªdËr
, 0 ),

2768 
JS_CFUNC_MAGIC_DEF
("£tWr™eHªdËr", 2, 
js_os_£tR—dHªdËr
, 1 ),

2769 
JS_CFUNC_DEF
("sigÇl", 2, 
js_os_sigÇl
 ),

2770 
OS_FLAG
(
SIGINT
),

2771 
OS_FLAG
(
SIGABRT
),

2772 
OS_FLAG
(
SIGFPE
),

2773 
OS_FLAG
(
SIGILL
),

2774 
OS_FLAG
(
SIGSEGV
),

2775 
OS_FLAG
(
SIGTERM
),

2776 #ià!
defšed
(
_WIN32
)

2777 
OS_FLAG
(
SIGQUIT
),

2778 
OS_FLAG
(
SIGPIPE
),

2779 
OS_FLAG
(
SIGALRM
),

2780 
OS_FLAG
(
SIGUSR1
),

2781 
OS_FLAG
(
SIGUSR2
),

2782 
OS_FLAG
(
SIGCHLD
),

2783 
OS_FLAG
(
SIGCONT
),

2784 
OS_FLAG
(
SIGSTOP
),

2785 
OS_FLAG
(
SIGTSTP
),

2786 
OS_FLAG
(
SIGTTIN
),

2787 
OS_FLAG
(
SIGTTOU
),

2789 
JS_CFUNC_DEF
("£tTimeout", 2, 
js_os_£tTimeout
 ),

2790 
JS_CFUNC_DEF
("ş—rTimeout", 1, 
js_os_ş—rTimeout
 ),

2791 
JS_PROP_STRING_DEF
("¶©fÜm", 
OS_PLATFORM
, 0 ),

2792 
JS_CFUNC_DEF
("g‘cwd", 0, 
js_os_g‘cwd
 ),

2793 #ià!
defšed
(
_WIN32
)

2794 
JS_CFUNC_DEF
("chdœ", 0, 
js_os_chdœ
 ),

2795 
JS_CFUNC_DEF
("»®·th", 1, 
js_os_»®·th
 ),

2796 
JS_CFUNC_DEF
("mkdœ", 1, 
js_os_mkdœ
 ),

2797 
JS_CFUNC_MAGIC_DEF
("¡©", 1, 
js_os_¡©
, 0 ),

2798 
JS_CFUNC_MAGIC_DEF
("l¡©", 1, 
js_os_¡©
, 1 ),

2800 
OS_FLAG
(
S_IFMT
),

2801 
OS_FLAG
(
S_IFIFO
),

2802 
OS_FLAG
(
S_IFCHR
),

2803 
OS_FLAG
(
S_IFDIR
),

2804 
OS_FLAG
(
S_IFBLK
),

2805 
OS_FLAG
(
S_IFREG
),

2806 
OS_FLAG
(
S_IFSOCK
),

2807 
OS_FLAG
(
S_IFLNK
),

2808 
OS_FLAG
(
S_ISGID
),

2809 
OS_FLAG
(
S_ISUID
),

2810 
JS_CFUNC_DEF
("symlšk", 2, 
js_os_symlšk
 ),

2811 
JS_CFUNC_DEF
("»adlšk", 1, 
js_os_»adlšk
 ),

2812 
JS_CFUNC_DEF
("»addœ", 1, 
js_os_»addœ
 ),

2813 
JS_CFUNC_DEF
("utimes", 3, 
js_os_utimes
 ),

2814 
JS_CFUNC_DEF
("exec", 1, 
js_os_exec
 ),

2815 
JS_CFUNC_DEF
("wa™pid", 2, 
js_os_wa™pid
 ),

2816 
OS_FLAG
(
WNOHANG
),

2817 
JS_CFUNC_DEF
("pe", 0, 
js_os_pe
 ),

2818 
JS_CFUNC_DEF
("kl", 2, 
js_os_kl
 ),

2819 
JS_CFUNC_DEF
("¦“p", 1, 
js_os_¦“p
 ),

2820 
JS_CFUNC_DEF
("dup", 1, 
js_os_dup
 ),

2821 
JS_CFUNC_DEF
("dup2", 2, 
js_os_dup2
 ),

2825 
	$js_os_š™
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

2827 
os_pŞl_func
 = 
js_os_pŞl
;

2830 
	`JS_NewCÏssID
(&
js_os_tim”_şass_id
);

2831 
	`JS_NewCÏss
(
	`JS_G‘RuÁime
(
ùx
), 
js_os_tim”_şass_id
, &
js_os_tim”_şass
);

2833  
	`JS_S‘ModuËExpÜtLi¡
(
ùx
, 
m
, 
js_os_funcs
,

2834 
	`couÁof
(
js_os_funcs
));

2835 
	}
}

2837 
JSModuËDef
 *
	$js_š™_moduË_os
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
moduË_Çme
)

2839 
JSModuËDef
 *
m
;

2840 
m
 = 
	`JS_NewCModuË
(
ùx
, 
moduË_Çme
, 
js_os_š™
);

2841 ià(!
m
)

2842  
NULL
;

2843 
	`JS_AddModuËExpÜtLi¡
(
ùx
, 
m
, 
js_os_funcs
, 
	`couÁof
(js_os_funcs));

2844  
m
;

2845 
	}
}

2849 
JSV®ue
 
	$js_´št
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

2850 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

2852 
i
;

2853 cÚ¡ *
¡r
;

2854 
size_t
 
Ën
;

2856 
i
 = 0; i < 
¬gc
; i++) {

2857 ià(
i
 != 0)

2858 
	`putch¬
(' ');

2859 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
¬gv
[
i
]);

2860 ià(!
¡r
)

2861  
JS_EXCEPTION
;

2862 
	`fwr™e
(
¡r
, 1, 
Ën
, 
¡dout
);

2863 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

2865 
	`putch¬
('\n');

2866  
JS_UNDEFINED
;

2867 
	}
}

2869 
	$js_¡d_add_h–³rs
(
JSCÚ‹xt
 *
ùx
, 
¬gc
, **
¬gv
)

2871 
JSV®ue
 
glob®_obj
, 
cÚsŞe
, 
¬gs
;

2872 
i
;

2875 
glob®_obj
 = 
	`JS_G‘Glob®Objeù
(
ùx
);

2877 
cÚsŞe
 = 
	`JS_NewObjeù
(
ùx
);

2878 
	`JS_S‘Prİ”tySŒ
(
ùx
, 
cÚsŞe
, "log",

2879 
	`JS_NewCFunùiÚ
(
ùx
, 
js_´št
, "log", 1));

2880 
	`JS_S‘Prİ”tySŒ
(
ùx
, 
glob®_obj
, "cÚsŞe", 
cÚsŞe
);

2883 
¬gs
 = 
	`JS_NewA¼ay
(
ùx
);

2884 
i
 = 0; i < 
¬gc
; i++) {

2885 
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
¬gs
, 
i
, 
	`JS_NewSŒšg
(ùx, 
¬gv
[i]));

2887 
	`JS_S‘Prİ”tySŒ
(
ùx
, 
glob®_obj
, "sütArgs", 
¬gs
);

2889 
	`JS_S‘Prİ”tySŒ
(
ùx
, 
glob®_obj
, "print",

2890 
	`JS_NewCFunùiÚ
(
ùx
, 
js_´št
, "print", 1));

2891 
	`JS_S‘Prİ”tySŒ
(
ùx
, 
glob®_obj
, "__loadScript",

2892 
	`JS_NewCFunùiÚ
(
ùx
, 
js_lßdSüt
, "__loadScript", 1));

2894 
	`JS_F»eV®ue
(
ùx
, 
glob®_obj
);

2897 
	`š™_li¡_h—d
(&
os_rw_hªdËrs
);

2898 
	`š™_li¡_h—d
(&
os_sigÇl_hªdËrs
);

2899 
	`š™_li¡_h—d
(&
os_tim”s
);

2900 
os_³ndšg_sigÇls
 = 0;

2901 
	}
}

2903 
	$js_¡d_ä“_hªdËrs
(
JSRuÁime
 *
¹
)

2905 
li¡_h—d
 *
–
, *
–1
;

2907 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
os_rw_hªdËrs
) {

2908 
JSOSRWHªdËr
 *
rh
 = 
	`li¡_’Œy
(
–
, JSOSRWHªdËr, 
lšk
);

2909 
	`ä“_rw_hªdËr
(
¹
, 
rh
);

2912 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
os_sigÇl_hªdËrs
) {

2913 
JSOSSigÇlHªdËr
 *
sh
 = 
	`li¡_’Œy
(
–
, JSOSSigÇlHªdËr, 
lšk
);

2914 
	`ä“_sh
(
¹
, 
sh
);

2917 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
os_tim”s
) {

2918 
JSOSTim”
 *
th
 = 
	`li¡_’Œy
(
–
, JSOSTim”, 
lšk
);

2919 
	`uÆšk_tim”
(
¹
, 
th
);

2920 ià(!
th
->
has_objeù
)

2921 
	`ä“_tim”
(
¹
, 
th
);

2923 
	}
}

2925 
	$js_dump_obj
(
JSCÚ‹xt
 *
ùx
, 
FILE
 *
f
, 
JSV®ueCÚ¡
 
v®
)

2927 cÚ¡ *
¡r
;

2929 
¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
v®
);

2930 ià(
¡r
) {

2931 
	`årštf
(
f
, "%s\n", 
¡r
);

2932 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

2934 
	`årštf
(
f
, "[exception]\n");

2936 
	}
}

2938 
	$js_¡d_dump_”rÜ1
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
exû±iÚ_v®
)

2940 
JSV®ue
 
v®
;

2941 
BOOL
 
is_”rÜ
;

2943 
is_”rÜ
 = 
	`JS_IsE¼Ü
(
ùx
, 
exû±iÚ_v®
);

2944 
	`js_dump_obj
(
ùx
, 
¡d”r
, 
exû±iÚ_v®
);

2945 ià(
is_”rÜ
) {

2946 
v®
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
exû±iÚ_v®
, "stack");

2947 ià(!
	`JS_IsUndefšed
(
v®
)) {

2948 
	`js_dump_obj
(
ùx
, 
¡d”r
, 
v®
);

2950 
	`JS_F»eV®ue
(
ùx
, 
v®
);

2952 
	}
}

2954 
	$js_¡d_dump_”rÜ
(
JSCÚ‹xt
 *
ùx
)

2956 
JSV®ue
 
exû±iÚ_v®
;

2958 
exû±iÚ_v®
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

2959 
	`js_¡d_dump_”rÜ1
(
ùx
, 
exû±iÚ_v®
);

2960 
	`JS_F»eV®ue
(
ùx
, 
exû±iÚ_v®
);

2961 
	}
}

2963 
	$js_¡d_´omi£_»jeùiÚ_Œack”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
´omi£
,

2964 
JSV®ueCÚ¡
 
»asÚ
,

2965 
BOOL
 
is_hªdËd
, *
İaque
)

2967 ià(!
is_hªdËd
) {

2968 
	`årštf
(
¡d”r
, "Possibly unhandled…romise„ejection: ");

2969 
	`js_¡d_dump_”rÜ1
(
ùx
, 
»asÚ
);

2971 
	}
}

2974 
	$js_¡d_loİ
(
JSCÚ‹xt
 *
ùx
)

2976 
JSCÚ‹xt
 *
ùx1
;

2977 
”r
;

2982 
”r
 = 
	`JS_Execu‹P’dšgJob
(
	`JS_G‘RuÁime
(
ùx
), &
ùx1
);

2983 ià(
”r
 <= 0) {

2984 ià(
”r
 < 0) {

2985 
	`js_¡d_dump_”rÜ
(
ùx1
);

2991 ià(!
os_pŞl_func
 || 
	`os_pŞl_func
(
ùx
))

2994 
	}
}

2996 
	$js_¡d_ev®_bš¬y
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt8_t
 *
buf
, 
size_t
 
buf_Ën
,

2997 
lßd_Úly
)

2999 
JSV®ue
 
obj
, 
v®
;

3000 
obj
 = 
	`JS_R—dObjeù
(
ùx
, 
buf
, 
buf_Ën
, 
JS_READ_OBJ_BYTECODE
);

3001 ià(
	`JS_IsExû±iÚ
(
obj
))

3002 
exû±iÚ
;

3003 ià(
lßd_Úly
) {

3004 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_MODULE
) {

3005 
	`js_moduË_£t_impÜt_m‘a
(
ùx
, 
obj
, 
FALSE
, FALSE);

3008 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_MODULE
) {

3009 ià(
	`JS_ResŞveModuË
(
ùx
, 
obj
) < 0) {

3010 
	`JS_F»eV®ue
(
ùx
, 
obj
);

3011 
exû±iÚ
;

3013 
	`js_moduË_£t_impÜt_m‘a
(
ùx
, 
obj
, 
FALSE
, 
TRUE
);

3015 
v®
 = 
	`JS_Ev®FunùiÚ
(
ùx
, 
obj
);

3016 ià(
	`JS_IsExû±iÚ
(
v®
)) {

3017 
exû±iÚ
:

3018 
	`js_¡d_dump_”rÜ
(
ùx
);

3019 
	`ex™
(1);

3021 
	`JS_F»eV®ue
(
ùx
, 
v®
);

3023 
	}
}

	@quickjs.c

26 
	#CONFIG_VERSION
 "NAUT_0"

27 

	)

29 
	~<¹/js/li¡.h
>

30 
	~<¹/js/quickjs.h
>

31 
	~<¹/js/lib»gexp.h
>

32 
	~<¹/js/cuts.h
>

35 #ifdeà
CONFIG_BIGNUM


36 
	~"libbf.h
"

40 
	#OPTIMIZE
 1

	)

41 
	#SHORT_OPCODES
 1

	)

42 #ià
defšed
(
EMSCRIPTEN
)

43 
	#DIRECT_DISPATCH
 0

	)

45 
	#DIRECT_DISPATCH
 1

	)

48 #ià
defšed
(
__APPLE__
)

49 
	#MALLOC_OVERHEAD
 0

	)

51 
	#MALLOC_OVERHEAD
 8

	)

54 #ià!
defšed
(
_WIN32
)

56 
	#CONFIG_PRINTF_RNDN


	)

61 #ià!
defšed
(
EMSCRIPTEN
)

62 
	#CONFIG_ATOMICS


	)

95 #ifdeà
CONFIG_ATOMICS


106 
	mJS_CLASS_OBJECT
 = 1,

107 
	mJS_CLASS_ARRAY
,

108 
	mJS_CLASS_ERROR
,

109 
	mJS_CLASS_NUMBER
,

110 
	mJS_CLASS_STRING
,

111 
	mJS_CLASS_BOOLEAN
,

112 
	mJS_CLASS_SYMBOL
,

113 
	mJS_CLASS_ARGUMENTS
,

114 
	mJS_CLASS_MAPPED_ARGUMENTS
,

115 
	mJS_CLASS_DATE
,

116 
	mJS_CLASS_MODULE_NS
,

117 
	mJS_CLASS_C_FUNCTION
,

118 
	mJS_CLASS_BYTECODE_FUNCTION
,

119 
	mJS_CLASS_BOUND_FUNCTION
,

120 
	mJS_CLASS_C_FUNCTION_DATA
,

121 
	mJS_CLASS_GENERATOR_FUNCTION
,

122 
	mJS_CLASS_FOR_IN_ITERATOR
,

123 
	mJS_CLASS_REGEXP
,

124 
	mJS_CLASS_ARRAY_BUFFER
,

125 
	mJS_CLASS_SHARED_ARRAY_BUFFER
,

126 
	mJS_CLASS_UINT8C_ARRAY
,

127 
	mJS_CLASS_INT8_ARRAY
,

128 
	mJS_CLASS_UINT8_ARRAY
,

129 
	mJS_CLASS_INT16_ARRAY
,

130 
	mJS_CLASS_UINT16_ARRAY
,

131 
	mJS_CLASS_INT32_ARRAY
,

132 
	mJS_CLASS_UINT32_ARRAY
,

133 #ifdeà
CONFIG_BIGNUM


134 
	mJS_CLASS_BIG_INT64_ARRAY
,

135 
	mJS_CLASS_BIG_UINT64_ARRAY
,

137 
	mJS_CLASS_FLOAT32_ARRAY
,

138 
	mJS_CLASS_FLOAT64_ARRAY
,

139 
	mJS_CLASS_DATAVIEW
,

140 #ifdeà
CONFIG_BIGNUM


141 
	mJS_CLASS_BIG_INT
,

142 
	mJS_CLASS_BIG_FLOAT
,

143 
	mJS_CLASS_FLOAT_ENV
,

144 
	mJS_CLASS_BIG_DECIMAL
,

145 
	mJS_CLASS_OPERATOR_SET
,

147 
	mJS_CLASS_MAP
,

148 
	mJS_CLASS_SET
,

149 
	mJS_CLASS_WEAKMAP
,

150 
	mJS_CLASS_WEAKSET
,

151 
	mJS_CLASS_MAP_ITERATOR
,

152 
	mJS_CLASS_SET_ITERATOR
,

153 
	mJS_CLASS_ARRAY_ITERATOR
,

154 
	mJS_CLASS_STRING_ITERATOR
,

155 
	mJS_CLASS_REGEXP_STRING_ITERATOR
,

156 
	mJS_CLASS_GENERATOR
,

157 
	mJS_CLASS_PROXY
,

158 
	mJS_CLASS_PROMISE
,

159 
	mJS_CLASS_PROMISE_RESOLVE_FUNCTION
,

160 
	mJS_CLASS_PROMISE_REJECT_FUNCTION
,

161 
	mJS_CLASS_ASYNC_FUNCTION
,

162 
	mJS_CLASS_ASYNC_FUNCTION_RESOLVE
,

163 
	mJS_CLASS_ASYNC_FUNCTION_REJECT
,

164 
	mJS_CLASS_ASYNC_FROM_SYNC_ITERATOR
,

165 
	mJS_CLASS_ASYNC_GENERATOR_FUNCTION
,

166 
	mJS_CLASS_ASYNC_GENERATOR
,

168 
	mJS_CLASS_INIT_COUNT
,

172 
	#JS_TYPED_ARRAY_COUNT
 (
JS_CLASS_FLOAT64_ARRAY
 - 
JS_CLASS_UINT8C_ARRAY
 + 1)

	)

173 
ušt8_t
 cÚ¡ 
	gty³d_¬¿y_size_log2
[
JS_TYPED_ARRAY_COUNT
];

174 
	#ty³d_¬¿y_size_log2
(
şassid
è(
ty³d_¬¿y_size_log2
[(şassid)- 
JS_CLASS_UINT8C_ARRAY
])

	)

176 
	eJSE¼ÜEnum
 {

177 
	mJS_EVAL_ERROR
,

178 
	mJS_RANGE_ERROR
,

179 
	mJS_REFERENCE_ERROR
,

180 
	mJS_SYNTAX_ERROR
,

181 
	mJS_TYPE_ERROR
,

182 
	mJS_URI_ERROR
,

183 
	mJS_INTERNAL_ERROR
,

184 
	mJS_AGGREGATE_ERROR
,

186 
	mJS_NATIVE_ERROR_COUNT
,

187 } 
	tJSE¼ÜEnum
;

189 
	#JS_MAX_LOCAL_VARS
 65536

	)

190 
	#JS_STACK_SIZE_MAX
 65536

	)

191 
	#JS_STRING_LEN_MAX
 ((1 << 30è- 1)

	)

193 
	#__exû±iÚ
 
	`__©Œibu‹__
((
w¬n_unu£d_»suÉ
))

	)

195 
JSSh­e
 
	tJSSh­e
;

196 
JSSŒšg
 
	tJSSŒšg
;

197 
JSSŒšg
 
	tJSAtomSŒuù
;

200 
	mJS_GC_PHASE_NONE
,

201 
	mJS_GC_PHASE_DECREF
,

202 
	mJS_GC_PHASE_REMOVE_CYCLES
,

203 } 
	tJSGCPha£Enum
;

205 
OPCodeEnum
 
	tOPCodeEnum
;

207 #ifdeà
CONFIG_BIGNUM


211 
JSV®ue
 (*
to_¡ršg
)(
JSCÚ‹xt
 *
	mùx
, 
JSV®ueCÚ¡
 
	mv®
);

212 
JSV®ue
 (*
äom_¡ršg
)(
JSCÚ‹xt
 *
	mùx
, cÚ¡ *
	mbuf
,

213 
	m¿dix
, 
	mæags
, 
¦imb_t
 *
	m³xpÚ’t
);

214 (*
	muÇry_¬™h
)(
JSCÚ‹xt
 *
	mùx
,

215 
JSV®ue
 *
	m´es
, 
OPCodeEnum
 
	mİ
, JSV®u
	mİ1
);

216 (*
	mbš¬y_¬™h
)(
JSCÚ‹xt
 *
	mùx
, 
OPCodeEnum
 
	mİ
,

217 
JSV®ue
 *
	m´es
, JSV®u
	mİ1
, JSV®u
	mİ2
);

218 (*
	mcom·»
)(
JSCÚ‹xt
 *
	mùx
, 
OPCodeEnum
 
	mİ
,

219 
JSV®ue
 
	mİ1
, JSV®u
	mİ2
);

221 
JSV®ue
 (*
mul_pow10_to_æßt64
)(
JSCÚ‹xt
 *
	mùx
, cÚ¡ 
bf_t
 *
	ma
,

222 
št64_t
 
	mexpÚ’t
);

223 (*
	mmul_pow10
)(
JSCÚ‹xt
 *
	mùx
, 
JSV®ue
 *
	m¥
);

224 } 
	tJSNum”icO³¿tiÚs
;

227 
	sJSRuÁime
 {

228 
JSM®locFunùiÚs
 
	mmf
;

229 
JSM®locS‹
 
	mm®loc_¡©e
;

230 cÚ¡ *
	m¹_šfo
;

232 
	m©om_hash_size
;

233 
	m©om_couÁ
;

234 
	m©om_size
;

235 
	m©om_couÁ_»size
;

236 
ušt32_t
 *
	m©om_hash
;

237 
JSAtomSŒuù
 **
	m©om_¬¿y
;

238 
	m©om_ä“_šdex
;

240 
	mşass_couÁ
;

241 
JSCÏss
 *
	mşass_¬¿y
;

243 
li¡_h—d
 
	mcÚ‹xt_li¡
;

246 
li¡_h—d
 
	mgc_obj_li¡
;

248 
li¡_h—d
 
	mgc_z”o_»f_couÁ_li¡
;

249 
li¡_h—d
 
	mtmp_obj_li¡
;

250 
JSGCPha£Enum
 
	mgc_pha£
 : 8;

251 
size_t
 
	mm®loc_gc_th»shŞd
;

252 #ifdeà
DUMP_LEAKS


253 
li¡_h—d
 
	m¡ršg_li¡
;

256 cÚ¡ 
ušt8_t
 *
	m¡ack_tİ
;

257 
size_t
 
	m¡ack_size
;

259 
JSV®ue
 
	mcu¼’t_exû±iÚ
;

261 
BOOL
 
	mš_out_of_memÜy
 : 8;

263 
JSSckF¿me
 *
	mcu¼’t_¡ack_äame
;

265 
JSIÁ”ru±HªdËr
 *
	mš‹¼u±_hªdËr
;

266 *
	mš‹¼u±_İaque
;

268 
JSHo¡Promi£RejeùiÚT¿ck”
 *
	mho¡_´omi£_»jeùiÚ_Œack”
;

269 *
	mho¡_´omi£_»jeùiÚ_Œack”_İaque
;

271 
li¡_h—d
 
	mjob_li¡
;

273 
JSModuËNÜm®izeFunc
 *
	mmoduË_nÜm®ize_func
;

274 
JSModuËLßd”Func
 *
	mmoduË_lßd”_func
;

275 *
	mmoduË_lßd”_İaque
;

277 
BOOL
 
	mÿn_block
 : 8;

280 
	msh­e_hash_b™s
;

281 
	msh­e_hash_size
;

282 
	msh­e_hash_couÁ
;

283 
JSSh­e
 **
	msh­e_hash
;

284 #ifdeà
CONFIG_BIGNUM


285 
bf_cÚ‹xt_t
 
	mbf_ùx
;

286 
JSNum”icO³¿tiÚs
 
	mbigšt_İs
;

287 
JSNum”icO³¿tiÚs
 
	mbigæßt_İs
;

288 
JSNum”icO³¿tiÚs
 
	mbigdecim®_İs
;

289 
ušt32_t
 
	mİ”©Ü_couÁ
;

291 *
	mu£r_İaque
;

294 
	sJSCÏss
 {

295 
ušt32_t
 
	mşass_id
;

296 
JSAtom
 
	mşass_Çme
;

297 
JSCÏssFš®iz”
 *
	mfš®iz”
;

298 
JSCÏssGCM¬k
 *
	mgc_m¬k
;

299 
JSCÏssC®l
 *
	mÿÎ
;

301 cÚ¡ 
JSCÏssExÙicM‘hods
 *
	mexÙic
;

304 
	#JS_MODE_STRICT
 (1 << 0)

	)

305 
	#JS_MODE_STRIP
 (1 << 1)

	)

306 
	#JS_MODE_MATH
 (1 << 2)

	)

308 
	sJSSckF¿me
 {

309 
JSSckF¿me
 *
	m´ev_äame
;

310 
JSV®ue
 
	mcur_func
;

311 
JSV®ue
 *
	m¬g_buf
;

312 
JSV®ue
 *
	mv¬_buf
;

313 
li¡_h—d
 
	mv¬_»f_li¡
;

314 cÚ¡ 
ušt8_t
 *
	mcur_pc
;

316 
	m¬g_couÁ
;

317 
	mjs_mode
;

320 
JSV®ue
 *
	mcur_¥
;

321 } 
	tJSSckF¿me
;

324 
	mJS_GC_OBJ_TYPE_JS_OBJECT
,

325 
	mJS_GC_OBJ_TYPE_FUNCTION_BYTECODE
,

326 
	mJS_GC_OBJ_TYPE_SHAPE
,

327 
	mJS_GC_OBJ_TYPE_VAR_REF
,

328 
	mJS_GC_OBJ_TYPE_ASYNC_FUNCTION
,

329 
	mJS_GC_OBJ_TYPE_JS_CONTEXT
,

330 } 
	tJSGCObjeùTy³Enum
;

335 
	sJSGCObjeùH—d”
 {

336 
	m»f_couÁ
;

337 
JSGCObjeùTy³Enum
 
	mgc_obj_ty³
 : 4;

338 
ušt8_t
 
	mm¬k
 : 4;

339 
ušt8_t
 
	mdummy1
;

340 
ušt16_t
 
	mdummy2
;

341 
li¡_h—d
 
	mlšk
;

344 
	sJSV¬Ref
 {

346 
JSGCObjeùH—d”
 
	mh—d”
;

348 
	m__gc_»f_couÁ
;

349 
ušt8_t
 
	m__gc_m¬k
;

355 
ušt8_t
 
	mis_d‘ached
 : 1;

356 
ušt8_t
 
	mis_¬g
 : 1;

357 
ušt16_t
 
	mv¬_idx
;

361 
JSV®ue
 *
	mpv®ue
;

363 
JSV®ue
 
	mv®ue
;

364 } 
	tJSV¬Ref
;

366 #ifdeà
CONFIG_BIGNUM


367 
	sJSFlßtEnv
 {

368 
limb_t
 
	m´ec
;

369 
bf_æags_t
 
	mæags
;

370 
	m¡©us
;

371 } 
	tJSFlßtEnv
;

375 
	sJSBigFlßt
 {

376 
JSRefCouÁH—d”
 
	mh—d”
;

377 
bf_t
 
	mnum
;

378 } 
	tJSBigFlßt
;

380 
	sJSBigDecim®
 {

381 
JSRefCouÁH—d”
 
	mh—d”
;

382 
bfdec_t
 
	mnum
;

383 } 
	tJSBigDecim®
;

387 
	mJS_AUTOINIT_ID_PROTOTYPE
,

388 
	mJS_AUTOINIT_ID_MODULE_NS
,

389 
	mJS_AUTOINIT_ID_PROP
,

390 } 
	tJSAutoIn™IDEnum
;

394 
	#JS_INTERRUPT_COUNTER_INIT
 10000

	)

396 
	sJSCÚ‹xt
 {

397 
JSGCObjeùH—d”
 
	mh—d”
;

398 
JSRuÁime
 *
	m¹
;

399 
li¡_h—d
 
	mlšk
;

401 
ušt16_t
 
	mbš¬y_objeù_couÁ
;

402 
	mbš¬y_objeù_size
;

404 
JSSh­e
 *
	m¬¿y_sh­e
;

406 
JSV®ue
 *
	mşass_´Ùo
;

407 
JSV®ue
 
	mfunùiÚ_´Ùo
;

408 
JSV®ue
 
	mfunùiÚ_ùÜ
;

409 
JSV®ue
 
	m¬¿y_ùÜ
;

410 
JSV®ue
 
	m»gexp_ùÜ
;

411 
JSV®ue
 
	m´omi£_ùÜ
;

412 
JSV®ue
 
	mÇtive_”rÜ_´Ùo
[
JS_NATIVE_ERROR_COUNT
];

413 
JSV®ue
 
	m™”©Ü_´Ùo
;

414 
JSV®ue
 
	masync_™”©Ü_´Ùo
;

415 
JSV®ue
 
	m¬¿y_´Ùo_v®ues
;

416 
JSV®ue
 
	mthrow_ty³_”rÜ
;

417 
JSV®ue
 
	mev®_obj
;

419 
JSV®ue
 
	mglob®_obj
;

420 
JSV®ue
 
	mglob®_v¬_obj
;

422 
ušt64_t
 
	m¿ndom_¡©e
;

423 #ifdeà
CONFIG_BIGNUM


424 
bf_cÚ‹xt_t
 *
	mbf_ùx
;

425 
JSFlßtEnv
 
	må_’v
;

426 
BOOL
 
	mbignum_ext
 : 8;

427 
BOOL
 
	m®low_İ”©Ü_ov”lßdšg
 : 8;

430 
	mš‹¼u±_couÁ”
;

431 
BOOL
 
	mis_”rÜ_´İ”ty_’abËd
;

433 
li¡_h—d
 
	mlßded_moduËs
;

436 
JSV®ue
 (*
compe_»gexp
)(
JSCÚ‹xt
 *
	mùx
, 
JSV®ueCÚ¡
 
	m·‰”n
,

437 
JSV®ueCÚ¡
 
	mæags
);

439 
JSV®ue
 (*
ev®_š‹º®
)(
JSCÚ‹xt
 *
	mùx
, 
JSV®ueCÚ¡
 
	mthis_obj
,

440 cÚ¡ *
	mšput
, 
size_t
 
	mšput_Ën
,

441 cÚ¡ *
	mf’ame
, 
	mæags
, 
	mscİe_idx
);

442 *
	mu£r_İaque
;

445 
	uJSFlßt64UniÚ
 {

446 
	md
;

447 
ušt64_t
 
	mu64
;

448 
ušt32_t
 
	mu32
[2];

449 } 
	tJSFlßt64UniÚ
;

452 
	mJS_ATOM_TYPE_STRING
 = 1,

453 
	mJS_ATOM_TYPE_GLOBAL_SYMBOL
,

454 
	mJS_ATOM_TYPE_SYMBOL
,

455 
	mJS_ATOM_TYPE_PRIVATE
,

459 
	mJS_ATOM_HASH_SYMBOL
,

460 
	mJS_ATOM_HASH_PRIVATE
,

464 
	mJS_ATOM_KIND_STRING
,

465 
	mJS_ATOM_KIND_SYMBOL
,

466 
	mJS_ATOM_KIND_PRIVATE
,

467 } 
	tJSAtomKšdEnum
;

469 
	#JS_ATOM_HASH_MASK
 ((1 << 30è- 1)

	)

471 
	sJSSŒšg
 {

472 
JSRefCouÁH—d”
 
	mh—d”
;

473 
ušt32_t
 
	mËn
 : 31;

474 
ušt8_t
 
	mis_wide_ch¬
 : 1;

478 
ušt32_t
 
	mhash
 : 30;

479 
ušt8_t
 
	m©om_ty³
 : 2;

480 
ušt32_t
 
	mhash_Ãxt
;

481 #ifdeà
DUMP_LEAKS


482 
li¡_h—d
 
	mlšk
;

485 
ušt8_t
 
	m¡r8
[0];

486 
ušt16_t
 
	m¡r16
[0];

487 } 
	mu
;

490 
	sJSClosu»V¬
 {

491 
ušt8_t
 
	mis_loÿl
 : 1;

492 
ušt8_t
 
	mis_¬g
 : 1;

493 
ušt8_t
 
	mis_cÚ¡
 : 1;

494 
ušt8_t
 
	mis_Ëxiÿl
 : 1;

495 
ušt8_t
 
	mv¬_kšd
 : 3;

497 
ušt16_t
 
	mv¬_idx
;

500 
JSAtom
 
	mv¬_Çme
;

501 } 
	tJSClosu»V¬
;

503 
	sJSV¬Scİe
 {

504 
	m·»Á
;

505 
	mfœ¡
;

506 } 
	tJSV¬Scİe
;

510 
	mJS_VAR_NORMAL
,

511 
	mJS_VAR_FUNCTION_DECL
,

512 
	mJS_VAR_NEW_FUNCTION_DECL
,

514 
	mJS_VAR_CATCH
,

515 
	mJS_VAR_PRIVATE_FIELD
,

516 
	mJS_VAR_PRIVATE_METHOD
,

517 
	mJS_VAR_PRIVATE_GETTER
,

518 
	mJS_VAR_PRIVATE_SETTER
,

519 
	mJS_VAR_PRIVATE_GETTER_SETTER
,

520 } 
	tJSV¬KšdEnum
;

522 
	sJSV¬Def
 {

523 
JSAtom
 
	mv¬_Çme
;

524 
	mscİe_Ëv–
;

525 
	mscİe_Ãxt
;

527 
ušt8_t
 
	mis_func_v¬
 : 1;

528 
ušt8_t
 
	mis_cÚ¡
 : 1;

529 
ušt8_t
 
	mis_Ëxiÿl
 : 1;

530 
ušt8_t
 
	mis_ÿ±u»d
 : 1;

531 
ušt8_t
 
	mv¬_kšd
 : 4;

537 
	mfunc_poŞ_Ü_scİe_idx
 : 24;

538 } 
	tJSV¬Def
;

541 
	#PC2LINE_BASE
 (-1)

	)

542 
	#PC2LINE_RANGE
 5

	)

543 
	#PC2LINE_OP_FIRST
 1

	)

544 
	#PC2LINE_DIFF_PC_MAX
 ((255 - 
PC2LINE_OP_FIRST
è/ 
PC2LINE_RANGE
)

	)

546 
	eJSFunùiÚKšdEnum
 {

547 
	mJS_FUNC_NORMAL
 = 0,

548 
	mJS_FUNC_GENERATOR
 = (1 << 0),

549 
	mJS_FUNC_ASYNC
 = (1 << 1),

550 
	mJS_FUNC_ASYNC_GENERATOR
 = (
JS_FUNC_GENERATOR
 | 
JS_FUNC_ASYNC
),

551 } 
	tJSFunùiÚKšdEnum
;

553 
	sJSFunùiÚBy‹code
 {

554 
JSGCObjeùH—d”
 
	mh—d”
;

555 
ušt8_t
 
	mjs_mode
;

556 
ušt8_t
 
	mhas_´ÙÙy³
 : 1;

557 
ušt8_t
 
	mhas_sim¶e_·¿m‘”_li¡
 : 1;

558 
ušt8_t
 
	mis_d”ived_şass_cÚ¡ruùÜ
 : 1;

560 
ušt8_t
 
	mÃed_home_objeù
 : 1;

561 
ušt8_t
 
	mfunc_kšd
 : 2;

562 
ušt8_t
 
	mÃw_rg‘_®lowed
 : 1;

563 
ušt8_t
 
	msu³r_ÿÎ_®lowed
 : 1;

564 
ušt8_t
 
	msu³r_®lowed
 : 1;

565 
ušt8_t
 
	m¬gum’ts_®lowed
 : 1;

566 
ušt8_t
 
	mhas_debug
 : 1;

567 
ušt8_t
 
	mbackŒaû_b¬r›r
 : 1;

568 
ušt8_t
 
	m»ad_Úly_by‹code
 : 1;

570 
ušt8_t
 *
	mby‹_code_buf
;

571 
	mby‹_code_Ën
;

572 
JSAtom
 
	mfunc_Çme
;

573 
JSV¬Def
 *
	mv¬defs
;

574 
JSClosu»V¬
 *
	mşosu»_v¬
;

575 
ušt16_t
 
	m¬g_couÁ
;

576 
ušt16_t
 
	mv¬_couÁ
;

577 
ušt16_t
 
	mdefšed_¬g_couÁ
;

578 
ušt16_t
 
	m¡ack_size
;

579 
JSCÚ‹xt
 *
	m»®m
;

580 
JSV®ue
 *
	mıoŞ
;

581 
	mıoŞ_couÁ
;

582 
	mşosu»_v¬_couÁ
;

585 
JSAtom
 
	mf’ame
;

586 
	mlše_num
;

587 
	msourû_Ën
;

588 
	mpc2lše_Ën
;

589 
ušt8_t
 *
	mpc2lše_buf
;

590 *
	msourû
;

591 } 
	mdebug
;

592 } 
	tJSFunùiÚBy‹code
;

594 
	sJSBoundFunùiÚ
 {

595 
JSV®ue
 
	mfunc_obj
;

596 
JSV®ue
 
	mthis_v®
;

597 
	m¬gc
;

598 
JSV®ue
 
	m¬gv
[0];

599 } 
	tJSBoundFunùiÚ
;

601 
	eJSI‹¿tÜKšdEnum
 {

602 
	mJS_ITERATOR_KIND_KEY
,

603 
	mJS_ITERATOR_KIND_VALUE
,

604 
	mJS_ITERATOR_KIND_KEY_AND_VALUE
,

605 } 
	tJSI‹¿tÜKšdEnum
;

607 
	sJSFÜInI‹¿tÜ
 {

608 
JSV®ue
 
	mobj
;

609 
BOOL
 
	mis_¬¿y
;

610 
ušt32_t
 
	m¬¿y_Ëngth
;

611 
ušt32_t
 
	midx
;

612 } 
	tJSFÜInI‹¿tÜ
;

614 
	sJSRegExp
 {

615 
JSSŒšg
 *
	m·‰”n
;

616 
JSSŒšg
 *
	mby‹code
;

617 } 
	tJSRegExp
;

619 
	sJSProxyD©a
 {

620 
JSV®ue
 
	mrg‘
;

621 
JSV®ue
 
	mhªdËr
;

622 
JSV®ue
 
	m´Ùo
;

623 
ušt8_t
 
	mis_func
;

624 
ušt8_t
 
	mis_»voked
;

625 } 
	tJSProxyD©a
;

627 
	sJSA¼ayBufãr
 {

628 
	mby‹_Ëngth
;

629 
ušt8_t
 
	md‘ached
;

630 
ušt8_t
 
	msh¬ed
;

631 
ušt8_t
 *
	md©a
;

632 
li¡_h—d
 
	m¬¿y_li¡
;

633 *
	mİaque
;

634 
JSF»eA¼ayBufãrD©aFunc
 *
	mä“_func
;

635 } 
	tJSA¼ayBufãr
;

637 
	sJSTy³dA¼ay
 {

638 
li¡_h—d
 
	mlšk
;

639 
JSObjeù
 *
	mobj
;

640 
JSObjeù
 *
	mbufãr
;

641 
ušt32_t
 
	moff£t
;

642 
ušt32_t
 
	mËngth
;

643 } 
	tJSTy³dA¼ay
;

645 
	sJSAsyncFunùiÚS‹
 {

646 
JSV®ue
 
	mthis_v®
;

647 
	m¬gc
;

648 
BOOL
 
	mthrow_æag
;

649 
JSSckF¿me
 
	mäame
;

650 } 
	tJSAsyncFunùiÚS‹
;

654 
	sJSAsyncFunùiÚD©a
 {

655 
JSGCObjeùH—d”
 
	mh—d”
;

656 
JSV®ue
 
	m»sŞvšg_funcs
[2];

657 
BOOL
 
	mis_aùive
;

658 
JSAsyncFunùiÚS‹
 
	mfunc_¡©e
;

659 } 
	tJSAsyncFunùiÚD©a
;

663 
	mJS_OVOP_ADD
,

664 
	mJS_OVOP_SUB
,

665 
	mJS_OVOP_MUL
,

666 
	mJS_OVOP_DIV
,

667 
	mJS_OVOP_MOD
,

668 
	mJS_OVOP_POW
,

669 
	mJS_OVOP_OR
,

670 
	mJS_OVOP_AND
,

671 
	mJS_OVOP_XOR
,

672 
	mJS_OVOP_SHL
,

673 
	mJS_OVOP_SAR
,

674 
	mJS_OVOP_SHR
,

675 
	mJS_OVOP_EQ
,

676 
	mJS_OVOP_LESS
,

678 
	mJS_OVOP_BINARY_COUNT
,

680 
	mJS_OVOP_POS
 = 
JS_OVOP_BINARY_COUNT
,

681 
	mJS_OVOP_NEG
,

682 
	mJS_OVOP_INC
,

683 
	mJS_OVOP_DEC
,

684 
	mJS_OVOP_NOT
,

686 
	mJS_OVOP_COUNT
,

687 } 
	tJSOv”lßdabËO³¿tÜEnum
;

690 
ušt32_t
 
	mİ”©Ü_šdex
;

691 
JSObjeù
 *
	mİs
[
JS_OVOP_BINARY_COUNT
];

692 } 
	tJSBš¬yO³¿tÜDefEÁry
;

695 
	mcouÁ
;

696 
JSBš¬yO³¿tÜDefEÁry
 *
	mb
;

697 } 
	tJSBš¬yO³¿tÜDef
;

700 
ušt32_t
 
	mİ”©Ü_couÁ”
;

701 
BOOL
 
	mis_´im™ive
;

703 
JSObjeù
 *
	m£lf_İs
[
JS_OVOP_COUNT
];

704 
JSBš¬yO³¿tÜDef
 
	mËá
;

705 
JSBš¬yO³¿tÜDef
 
	mright
;

706 } 
	tJSO³¿tÜS‘D©a
;

708 
	sJSReqModuËEÁry
 {

709 
JSAtom
 
	mmoduË_Çme
;

710 
JSModuËDef
 *
	mmoduË
;

711 } 
	tJSReqModuËEÁry
;

713 
	eJSExpÜtTy³Enum
 {

714 
	mJS_EXPORT_TYPE_LOCAL
,

715 
	mJS_EXPORT_TYPE_INDIRECT
,

716 } 
	tJSExpÜtTy³Enum
;

718 
	sJSExpÜtEÁry
 {

721 
	mv¬_idx
;

722 
JSV¬Ref
 *
	mv¬_»f
;

723 } 
	mloÿl
;

724 
	m»q_moduË_idx
;

725 } 
	mu
;

726 
JSExpÜtTy³Enum
 
	mexpÜt_ty³
;

727 
JSAtom
 
	mloÿl_Çme
;

729 
JSAtom
 
	mexpÜt_Çme
;

730 } 
	tJSExpÜtEÁry
;

732 
	sJSSrExpÜtEÁry
 {

733 
	m»q_moduË_idx
;

734 } 
	tJSSrExpÜtEÁry
;

736 
	sJSImpÜtEÁry
 {

737 
	mv¬_idx
;

738 
JSAtom
 
	mimpÜt_Çme
;

739 
	m»q_moduË_idx
;

740 } 
	tJSImpÜtEÁry
;

742 
	sJSModuËDef
 {

743 
JSRefCouÁH—d”
 
	mh—d”
;

744 
JSAtom
 
	mmoduË_Çme
;

745 
li¡_h—d
 
	mlšk
;

747 
JSReqModuËEÁry
 *
	m»q_moduË_’Œ›s
;

748 
	m»q_moduË_’Œ›s_couÁ
;

749 
	m»q_moduË_’Œ›s_size
;

751 
JSExpÜtEÁry
 *
	mexpÜt_’Œ›s
;

752 
	mexpÜt_’Œ›s_couÁ
;

753 
	mexpÜt_’Œ›s_size
;

755 
JSSrExpÜtEÁry
 *
	m¡¬_expÜt_’Œ›s
;

756 
	m¡¬_expÜt_’Œ›s_couÁ
;

757 
	m¡¬_expÜt_’Œ›s_size
;

759 
JSImpÜtEÁry
 *
	mimpÜt_’Œ›s
;

760 
	mimpÜt_’Œ›s_couÁ
;

761 
	mimpÜt_’Œ›s_size
;

763 
JSV®ue
 
	mmoduË_ns
;

764 
JSV®ue
 
	mfunc_obj
;

765 
JSModuËIn™Func
 *
	mš™_func
;

766 
BOOL
 
	m»sŞved
 : 8;

767 
BOOL
 
	mš¡ªtŸ‹d
 : 8;

768 
BOOL
 
	mev®u©ed
 : 8;

769 
BOOL
 
	mev®_m¬k
 : 8;

772 
BOOL
 
	mev®_has_exû±iÚ
 : 8;

773 
JSV®ue
 
	mev®_exû±iÚ
;

774 
JSV®ue
 
	mm‘a_obj
;

777 
	sJSJobEÁry
 {

778 
li¡_h—d
 
	mlšk
;

779 
JSCÚ‹xt
 *
	mùx
;

780 
JSJobFunc
 *
	mjob_func
;

781 
	m¬gc
;

782 
JSV®ue
 
	m¬gv
[0];

783 } 
	tJSJobEÁry
;

785 
	sJSPrİ”ty
 {

787 
JSV®ue
 
	mv®ue
;

789 
JSObjeù
 *
	mg‘‹r
;

790 
JSObjeù
 *
	m£‰”
;

791 } 
	mg‘£t
;

792 
JSV¬Ref
 *
	mv¬_»f
;

797 
JSCÚ‹xt
 *
	m»®m
;

798 
ušŒ_t
 
	mš™_id
;

799 } 
	mu
;

800 *
	mİaque
;

801 } 
	mš™
;

802 } 
	mu
;

803 } 
	tJSPrİ”ty
;

805 
	#JS_PROP_INITIAL_SIZE
 2

	)

806 
	#JS_PROP_INITIAL_HASH_SIZE
 4

	)

807 
	#JS_ARRAY_INITIAL_SIZE
 2

	)

809 
	sJSSh­ePrİ”ty
 {

810 
ušt32_t
 
	mhash_Ãxt
 : 26;

811 
ušt32_t
 
	mæags
 : 6;

812 
JSAtom
 
	m©om
;

813 } 
	tJSSh­ePrİ”ty
;

815 
	sJSSh­e
 {

816 
ušt32_t
 
	m´İ_hash_’d
[0];

818 
JSGCObjeùH—d”
 
	mh—d”
;

821 
ušt8_t
 
	mis_hashed
;

825 
ušt8_t
 
	mhas_sm®l_¬¿y_šdex
;

826 
ušt32_t
 
	mhash
;

827 
ušt32_t
 
	m´İ_hash_mask
;

828 
	m´İ_size
;

829 
	m´İ_couÁ
;

830 
JSSh­e
 *
	msh­e_hash_Ãxt
;

831 
JSObjeù
 *
	m´Ùo
;

832 
JSSh­ePrİ”ty
 
	m´İ
[0];

834 
	sJSObjeù
 {

836 
JSGCObjeùH—d”
 
	mh—d”
;

838 
	m__gc_»f_couÁ
;

839 
ušt8_t
 
	m__gc_m¬k
;

841 
ušt8_t
 
	mex‹nsibË
 : 1;

842 
ušt8_t
 
	mä“_m¬k
 : 1;

843 
ušt8_t
 
	mis_exÙic
 : 1;

844 
ušt8_t
 
	mç¡_¬¿y
 : 1;

845 
ušt8_t
 
	mis_cÚ¡ruùÜ
 : 1;

846 
ušt8_t
 
	mis_unÿtchabË_”rÜ
 : 1;

847 
ušt8_t
 
	mis_şass
 : 1;

848 
ušt8_t
 
	mtmp_m¬k
 : 1;

849 
ušt16_t
 
	mşass_id
;

853 
JSSh­e
 *
	msh­e
;

854 
JSPrİ”ty
 *
	m´İ
;

856 
JSM­RecÜd
 *
	mfœ¡_w—k_»f
;

859 *
	mİaque
;

860 
JSBoundFunùiÚ
 *
	mbound_funùiÚ
;

861 
JSCFunùiÚD©aRecÜd
 *
	mc_funùiÚ_d©a_»cÜd
;

862 
JSFÜInI‹¿tÜ
 *
	mfÜ_š_™”©Ü
;

863 
JSA¼ayBufãr
 *
	m¬¿y_bufãr
;

864 
JSTy³dA¼ay
 *
	mty³d_¬¿y
;

865 #ifdeà
CONFIG_BIGNUM


866 
JSFlßtEnv
 *
	mæßt_’v
;

867 
JSO³¿tÜS‘D©a
 *
	mİ”©Ü_£t
;

869 
JSM­S‹
 *
	mm­_¡©e
;

870 
JSM­I‹¿tÜD©a
 *
	mm­_™”©Ü_d©a
;

871 
JSA¼ayI‹¿tÜD©a
 *
	m¬¿y_™”©Ü_d©a
;

872 
JSRegExpSŒšgI‹¿tÜD©a
 *
	m»gexp_¡ršg_™”©Ü_d©a
;

873 
JSG’”©ÜD©a
 *
	mg’”©Ü_d©a
;

874 
JSProxyD©a
 *
	m´oxy_d©a
;

875 
JSPromi£D©a
 *
	m´omi£_d©a
;

876 
JSPromi£FunùiÚD©a
 *
	m´omi£_funùiÚ_d©a
;

877 
JSAsyncFunùiÚD©a
 *
	masync_funùiÚ_d©a
;

878 
JSAsyncFromSyncI‹¿tÜD©a
 *
	masync_äom_sync_™”©Ü_d©a
;

879 
JSAsyncG’”©ÜD©a
 *
	masync_g’”©Ü_d©a
;

882 
JSFunùiÚBy‹code
 *
	mfunùiÚ_by‹code
;

883 
JSV¬Ref
 **
	mv¬_»fs
;

884 
JSObjeù
 *
	mhome_objeù
;

885 } 
	mfunc
;

887 
JSCÚ‹xt
 *
	m»®m
;

888 
JSCFunùiÚTy³
 
	mc_funùiÚ
;

889 
ušt8_t
 
	mËngth
;

890 
ušt8_t
 
	mırÙo
;

891 
št16_t
 
	mmagic
;

892 } 
	mcfunc
;

896 
ušt32_t
 
	msize
;

897 
JSTy³dA¼ay
 *
	mty³d_¬¿y
;

898 } 
	mu1
;

900 
JSV®ue
 *
	mv®ues
;

901 *
	m±r
;

902 
št8_t
 *
	mšt8_±r
;

903 
ušt8_t
 *
	mušt8_±r
;

904 
št16_t
 *
	mšt16_±r
;

905 
ušt16_t
 *
	mušt16_±r
;

906 
št32_t
 *
	mšt32_±r
;

907 
ušt32_t
 *
	mušt32_±r
;

908 
sšt64_t
 *
	mšt64_±r
;

909 
ušt64_t
 *
	mušt64_±r
;

910 *
	mæßt_±r
;

911 *
	mdoubË_±r
;

912 } 
	mu
;

913 
ušt32_t
 
	mcouÁ
;

914 } 
	m¬¿y
;

915 
JSRegExp
 
	m»gexp
;

916 
JSV®ue
 
	mobjeù_d©a
;

917 } 
	mu
;

921 
	mJS_ATOM_NULL
,

922 
	#DEF
(
Çme
, 
¡r
è
JS_ATOM_
 ##‚ame,

	)

923 
	~<¹/js/quickjs-©om.h
>

924 #undeà
DEF


925 
	mJS_ATOM_END
,

927 
	#JS_ATOM_LAST_KEYWORD
 
JS_ATOM_su³r


	)

928 
	#JS_ATOM_LAST_STRICT_KEYWORD
 
JS_ATOM_y›ld


	)

930 cÚ¡ 
	gjs_©om_š™
[] =

931 
	#DEF
(
Çme
, 
¡r
è¡¸"\0"

	)

932 
	~<¹/js/quickjs-©om.h
>

933 #undeà
DEF


936 
	eOPCodeFÜm©
 {

937 
	#FMT
(
f
è
OP_FMT_
 ## f,

	)

938 
	#DEF
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
)

	)

939 
	~<¹/js/quickjs-İcode.h
>

940 #undeà
DEF


941 #undeà
FMT


942 } 
	tOPCodeFÜm©
;

944 
	eOPCodeEnum
 {

945 
	#FMT
(
f
)

	)

946 
	#DEF
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
è
OP_
 ## id,

	)

947 
	#def
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
)

	)

948 
	~<¹/js/quickjs-İcode.h
>

949 #undeà
def


950 #undeà
DEF


951 #undeà
FMT


952 
	mOP_COUNT
,

954 
	mOP_TEMP_START
 = 
OP_nİ
 + 1,

955 
	mOP___dummy
 = 
OP_TEMP_START
 - 1,

956 
	#FMT
(
f
)

	)

957 
	#DEF
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
)

	)

958 
	#def
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
è
OP_
 ## id,

	)

959 
	~<¹/js/quickjs-İcode.h
>

960 #undeà
def


961 #undeà
DEF


962 #undeà
FMT


963 
	mOP_TEMP_END
,

966 
JS_In™Atoms
(
JSRuÁime
 *
¹
);

967 
JSAtom
 
__JS_NewAtomIn™
(
JSRuÁime
 *
¹
, cÚ¡ *
¡r
, 
Ën
,

968 
©om_ty³
);

969 
JS_F»eAtomSŒuù
(
JSRuÁime
 *
¹
, 
JSAtomSŒuù
 *
p
);

970 
ä“_funùiÚ_by‹code
(
JSRuÁime
 *
¹
, 
JSFunùiÚBy‹code
 *
b
);

971 
JSV®ue
 
js_ÿÎ_c_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

972 
JSV®ueCÚ¡
 
this_obj
,

973 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
);

974 
JSV®ue
 
js_ÿÎ_bound_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

975 
JSV®ueCÚ¡
 
this_obj
,

976 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
);

977 
JSV®ue
 
JS_C®lIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

978 
JSV®ueCÚ¡
 
this_obj
, JSV®ueCÚ¡ 
Ãw_rg‘
,

979 
¬gc
, 
JSV®ue
 *
¬gv
, 
æags
);

980 
JSV®ue
 
JS_C®lCÚ¡ruùÜIÁ”Çl
(
JSCÚ‹xt
 *
ùx
,

981 
JSV®ueCÚ¡
 
func_obj
,

982 
JSV®ueCÚ¡
 
Ãw_rg‘
,

983 
¬gc
, 
JSV®ue
 *
¬gv
, 
æags
);

984 
JSV®ue
 
JS_C®lF»e
(
JSCÚ‹xt
 *
ùx
, JSV®u
func_obj
, 
JSV®ueCÚ¡
 
this_obj
,

985 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

986 
JSV®ue
 
JS_InvokeF»e
(
JSCÚ‹xt
 *
ùx
, JSV®u
this_v®
, 
JSAtom
 
©om
,

987 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

988 
__exû±iÚ
 
JS_ToA¼ayL’gthF»e
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
¶’
,

989 
JSV®ue
 
v®
);

990 
JSV®ue
 
JS_Ev®Objeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

991 
JSV®ueCÚ¡
 
v®
, 
æags
, 
scİe_idx
);

992 
JSV®ue
 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	`JS_ThrowIÁ”ÇlE¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...);

993 
__maybe_unu£d
 
	`JS_DumpAtoms
(
JSRuÁime
 *
¹
);

994 
__maybe_unu£d
 
	`JS_DumpSŒšg
(
JSRuÁime
 *
¹
,

995 cÚ¡ 
JSSŒšg
 *
p
);

996 
__maybe_unu£d
 
	`JS_DumpObjeùH—d”
(
JSRuÁime
 *
¹
);

997 
__maybe_unu£d
 
	`JS_DumpObjeù
(
JSRuÁime
 *
¹
, 
JSObjeù
 *
p
);

998 
__maybe_unu£d
 
	`JS_DumpGCObjeù
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
p
);

999 
__maybe_unu£d
 
	`JS_DumpV®ueShÜt
(
JSRuÁime
 *
¹
,

1000 
JSV®ueCÚ¡
 
v®
);

1001 
__maybe_unu£d
 
	`JS_DumpV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
);

1002 
__maybe_unu£d
 
	`JS_PrštV®ue
(
JSCÚ‹xt
 *
ùx
,

1003 cÚ¡ *
¡r
,

1004 
JSV®ueCÚ¡
 
v®
);

1005 
__maybe_unu£d
 
	`JS_DumpSh­es
(
JSRuÁime
 *
¹
);

1006 
JSV®ue
 
	`js_funùiÚ_­¶y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1007 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
);

1008 
	`js_¬¿y_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1009 
	`js_¬¿y_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1010 
JS_M¬kFunc
 *
m¬k_func
);

1011 
	`js_objeù_d©a_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1012 
	`js_objeù_d©a_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1013 
JS_M¬kFunc
 *
m¬k_func
);

1014 
	`js_c_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1015 
	`js_c_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1016 
JS_M¬kFunc
 *
m¬k_func
);

1017 
	`js_by‹code_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1018 
	`js_by‹code_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1019 
JS_M¬kFunc
 *
m¬k_func
);

1020 
	`js_bound_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1021 
	`js_bound_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1022 
JS_M¬kFunc
 *
m¬k_func
);

1023 
	`js_fÜ_š_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1024 
	`js_fÜ_š_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1025 
JS_M¬kFunc
 *
m¬k_func
);

1026 
	`js_»gexp_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1027 
	`js_¬¿y_bufãr_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1028 
	`js_ty³d_¬¿y_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1029 
	`js_ty³d_¬¿y_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1030 
JS_M¬kFunc
 *
m¬k_func
);

1031 
	`js_´oxy_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1032 
	`js_´oxy_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1033 
JS_M¬kFunc
 *
m¬k_func
);

1034 
	`js_m­_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1035 
	`js_m­_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1036 
JS_M¬kFunc
 *
m¬k_func
);

1037 
	`js_m­_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1038 
	`js_m­_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1039 
JS_M¬kFunc
 *
m¬k_func
);

1040 
	`js_¬¿y_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1041 
	`js_¬¿y_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1042 
JS_M¬kFunc
 *
m¬k_func
);

1043 
	`js_»gexp_¡ršg_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1044 
	`js_»gexp_¡ršg_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1045 
JS_M¬kFunc
 *
m¬k_func
);

1046 
	`js_g’”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
obj
);

1047 
	`js_g’”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1048 
JS_M¬kFunc
 *
m¬k_func
);

1049 
	`js_´omi£_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1050 
	`js_´omi£_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1051 
JS_M¬kFunc
 *
m¬k_func
);

1052 
	`js_´omi£_»sŞve_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1053 
	`js_´omi£_»sŞve_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1054 
JS_M¬kFunc
 *
m¬k_func
);

1055 #ifdeà
CONFIG_BIGNUM


1056 
	`js_İ”©Ü_£t_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1057 
	`js_İ”©Ü_£t_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1058 
JS_M¬kFunc
 *
m¬k_func
);

1060 
JSV®ue
 
	`JS_ToSŒšgF»e
(
JSCÚ‹xt
 *
ùx
, JSV®u
v®
);

1061 
	`JS_ToBoŞF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
);

1062 
	`JS_ToIÁ32F»e
(
JSCÚ‹xt
 *
ùx
, 
št32_t
 *
´es
, 
JSV®ue
 
v®
);

1063 
	`JS_ToFlßt64F»e
(
JSCÚ‹xt
 *
ùx
, *
´es
, 
JSV®ue
 
v®
);

1064 
	`JS_ToUšt8CÏmpF»e
(
JSCÚ‹xt
 *
ùx
, 
št32_t
 *
´es
, 
JSV®ue
 
v®
);

1065 
JSV®ue
 
	`js_compe_»gexp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
·‰”n
,

1066 
JSV®ueCÚ¡
 
æags
);

1067 
JSV®ue
 
	`js_»gexp_cÚ¡ruùÜ_š‹º®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
ùÜ
,

1068 
JSV®ue
 
·‰”n
, JSV®u
bc
);

1069 
	`gc_deüef
(
JSRuÁime
 *
¹
);

1070 
	`JS_NewCÏss1
(
JSRuÁime
 *
¹
, 
JSCÏssID
 
şass_id
,

1071 cÚ¡ 
JSCÏssDef
 *
şass_def
, 
JSAtom
 
Çme
);

1073 
	eJSSŒiùEqModeEnum
 {

1074 
JS_EQ_STRICT
,

1075 
JS_EQ_SAME_VALUE
,

1076 
JS_EQ_SAME_VALUE_ZERO
,

1077 } 
	tJSSŒiùEqModeEnum
;

1079 
BOOL
 
	`js_¡riù_eq2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
İ1
, JSV®u
İ2
,

1080 
JSSŒiùEqModeEnum
 
eq_mode
);

1081 
BOOL
 
	`js_¡riù_eq
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
İ1
, JSV®u
İ2
);

1082 
BOOL
 
	`js_§me_v®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
İ1
, JSV®ueCÚ¡ 
İ2
);

1083 
BOOL
 
	`js_§me_v®ue_z”o
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
İ1
, JSV®ueCÚ¡ 
İ2
);

1084 
JSV®ue
 
	`JS_ToObjeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
);

1085 
JSV®ue
 
	`JS_ToObjeùF»e
(
JSCÚ‹xt
 *
ùx
, JSV®u
v®
);

1086 
JSPrİ”ty
 *
	`add_´İ”ty
(
JSCÚ‹xt
 *
ùx
,

1087 
JSObjeù
 *
p
, 
JSAtom
 
´İ
, 
´İ_æags
);

1088 #ifdeà
CONFIG_BIGNUM


1089 
	`js_æßt_’v_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1090 
JSV®ue
 
	`JS_NewBigFlßt
(
JSCÚ‹xt
 *
ùx
);

1091 
šlše
 
bf_t
 *
	$JS_G‘BigFlßt
(
JSV®ueCÚ¡
 
v®
)

1093 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

1094  &
p
->
num
;

1095 
	}
}

1096 
JSV®ue
 
JS_NewBigDecim®
(
JSCÚ‹xt
 *
ùx
);

1097 
šlše
 
bfdec_t
 *
	$JS_G‘BigDecim®
(
JSV®ueCÚ¡
 
v®
)

1099 
JSBigDecim®
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

1100  &
p
->
num
;

1101 
	}
}

1102 
JSV®ue
 
JS_NewBigIÁ
(
JSCÚ‹xt
 *
ùx
);

1103 
šlše
 
bf_t
 *
	$JS_G‘BigIÁ
(
JSV®ueCÚ¡
 
v®
)

1105 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

1106  &
p
->
num
;

1107 
	}
}

1108 
JSV®ue
 
JS_Com·ùBigIÁ1
(
JSCÚ‹xt
 *
ùx
, JSV®u
v®
,

1109 
BOOL
 
cÚv”t_to_§ã_š‹g”
);

1110 
JSV®ue
 
JS_Com·ùBigIÁ
(
JSCÚ‹xt
 *
ùx
, JSV®u
v®
);

1111 
JS_ToBigIÁ64F»e
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 *
´es
, 
JSV®ue
 
v®
);

1112 
bf_t
 *
JS_ToBigIÁ
(
JSCÚ‹xt
 *
ùx
, bf_ˆ*
buf
, 
JSV®ueCÚ¡
 
v®
);

1113 
JS_F»eBigIÁ
(
JSCÚ‹xt
 *
ùx
, 
bf_t
 *
a
, bf_ˆ*
buf
);

1114 
bf_t
 *
JS_ToBigFlßt
(
JSCÚ‹xt
 *
ùx
, bf_ˆ*
buf
, 
JSV®ueCÚ¡
 
v®
);

1115 
JSV®ue
 
JS_ToBigDecim®F»e
(
JSCÚ‹xt
 *
ùx
, JSV®u
v®
,

1116 
BOOL
 
®low_nuÎ_Ü_undefšed
);

1117 
bfdec_t
 *
JS_ToBigDecim®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
);

1119 
JSV®ue
 
JS_ThrowOutOfMemÜy
(
JSCÚ‹xt
 *
ùx
);

1120 
JSV®ue
 
JS_ThrowTy³E¼ÜRevokedProxy
(
JSCÚ‹xt
 *
ùx
);

1121 
JSV®ueCÚ¡
 
js_´oxy_g‘PrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, JSV®ueCÚ¡ 
obj
);

1122 
js_´oxy_£tPrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

1123 
JSV®ueCÚ¡
 
´Ùo_v®
, 
BOOL
 
throw_æag
);

1124 
js_´oxy_isEx‹nsibË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
);

1125 
js_´oxy_´ev’tEx‹nsiÚs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
);

1126 
js_´oxy_isA¼ay
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
);

1127 
JS_C»©ePrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

1128 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
v®
,

1129 
JSV®ueCÚ¡
 
g‘‹r
, JSV®ueCÚ¡ 
£‰”
,

1130 
æags
);

1131 
js_¡ršg_memcmp
(cÚ¡ 
JSSŒšg
 *
p1
, cÚ¡ JSSŒšg *
p2
, 
Ën
);

1132 
»£t_w—k_»f
(
JSRuÁime
 *
¹
, 
JSObjeù
 *
p
);

1133 
BOOL
 
ty³d_¬¿y_is_d‘ached
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
);

1134 
ušt32_t
 
ty³d_¬¿y_g‘_Ëngth
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
);

1135 
JSV®ue
 
JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
JSCÚ‹xt
 *
ùx
);

1136 
JSV¬Ref
 *
g‘_v¬_»f
(
JSCÚ‹xt
 *
ùx
, 
JSSckF¿me
 *
sf
, 
v¬_idx
,

1137 
BOOL
 
is_¬g
);

1138 
JSV®ue
 
js_g’”©Ü_funùiÚ_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

1139 
JSV®ueCÚ¡
 
this_obj
,

1140 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

1141 
æags
);

1142 
js_async_funùiÚ_»sŞve_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1143 
js_async_funùiÚ_»sŞve_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1144 
JS_M¬kFunc
 *
m¬k_func
);

1145 
JSV®ue
 
JS_Ev®IÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

1146 cÚ¡ *
šput
, 
size_t
 
šput_Ën
,

1147 cÚ¡ *
f’ame
, 
æags
, 
scİe_idx
);

1148 
js_ä“_moduË_def
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
);

1149 
js_m¬k_moduË_def
(
JSRuÁime
 *
¹
, 
JSModuËDef
 *
m
,

1150 
JS_M¬kFunc
 *
m¬k_func
);

1151 
JSV®ue
 
js_impÜt_m‘a
(
JSCÚ‹xt
 *
ùx
);

1152 
JSV®ue
 
js_dyÇmic_impÜt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
¥ecif›r
);

1153 
ä“_v¬_»f
(
JSRuÁime
 *
¹
, 
JSV¬Ref
 *
v¬_»f
);

1154 
JSV®ue
 
js_Ãw_´omi£_ÿ·b™y
(
JSCÚ‹xt
 *
ùx
,

1155 
JSV®ue
 *
»sŞvšg_funcs
,

1156 
JSV®ueCÚ¡
 
ùÜ
);

1157 
__exû±iÚ
 
³rfÜm_´omi£_th’
(
JSCÚ‹xt
 *
ùx
,

1158 
JSV®ueCÚ¡
 
´omi£
,

1159 
JSV®ueCÚ¡
 *
»sŞve_»jeù
,

1160 
JSV®ueCÚ¡
 *
ÿp_»sŞvšg_funcs
);

1161 
JSV®ue
 
js_´omi£_»sŞve
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

1162 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
);

1163 
js_¡ršg_com·»
(
JSCÚ‹xt
 *
ùx
,

1164 cÚ¡ 
JSSŒšg
 *
p1
, cÚ¡ JSSŒšg *
p2
);

1165 
JSV®ue
 
JS_ToNumb”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
);

1166 
JS_S‘Prİ”tyV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

1167 
JSV®ue
 
´İ
, JSV®u
v®
, 
æags
);

1168 
JS_Numb”IsIÁeg”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
);

1169 
BOOL
 
JS_Numb”IsNeg©iveOrMšusZ”o
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
);

1170 
JSV®ue
 
JS_ToNumb”F»e
(
JSCÚ‹xt
 *
ùx
, JSV®u
v®
);

1171 
JS_G‘OwnPrİ”tyIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
desc
,

1172 
JSObjeù
 *
p
, 
JSAtom
 
´İ
);

1173 
js_ä“_desc
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
desc
);

1174 
async_func_m¬k
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚS‹
 *
s
,

1175 
JS_M¬kFunc
 *
m¬k_func
);

1176 
JS_AddIÁršsicBasicObjeùs
(
JSCÚ‹xt
 *
ùx
);

1177 
js_ä“_sh­e
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
);

1178 
js_ä“_sh­e_nuÎ
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
);

1179 
js_sh­e_´•¬e_upd©e
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

1180 
JSSh­ePrİ”ty
 **
µrs
);

1181 
š™_sh­e_hash
(
JSRuÁime
 *
¹
);

1182 
__exû±iÚ
 
js_g‘_Ëngth32
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
´es
,

1183 
JSV®ueCÚ¡
 
obj
);

1184 
__exû±iÚ
 
js_g‘_Ëngth64
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 *
´es
,

1185 
JSV®ueCÚ¡
 
obj
);

1186 
ä“_¬g_li¡
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
b
, 
ušt32_t
 
Ën
);

1187 
JSV®ue
 *
bud_¬g_li¡
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
¶’
,

1188 
JSV®ueCÚ¡
 
¬¿y_¬g
);

1189 
BOOL
 
js_g‘_ç¡_¬¿y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

1190 
JSV®ue
 **
¬½p
, 
ušt32_t
 *
couÁp
);

1191 
JSV®ue
 
JS_C»©eAsyncFromSyncI‹¿tÜ
(
JSCÚ‹xt
 *
ùx
,

1192 
JSV®ueCÚ¡
 
sync_™”
);

1193 
js_c_funùiÚ_d©a_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
);

1194 
js_c_funùiÚ_d©a_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

1195 
JS_M¬kFunc
 *
m¬k_func
);

1196 
JSV®ue
 
js_c_funùiÚ_d©a_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

1197 
JSV®ueCÚ¡
 
this_v®
,

1198 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
);

1199 
JSAtom
 
js_symbŞ_to_©om
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
);

1200 
add_gc_objeù
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
h
,

1201 
JSGCObjeùTy³Enum
 
ty³
);

1202 
»move_gc_objeù
(
JSGCObjeùH—d”
 *
h
);

1203 
js_async_funùiÚ_ä“0
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚD©a
 *
s
);

1204 
js_š¡ªtŸ‹_´ÙÙy³
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSAtom
 
©om
, *
İaque
);

1205 
js_moduË_ns_autoš™
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSAtom
 
©om
,

1206 *
İaque
);

1207 
JS_In¡ªtŸ‹FunùiÚLi¡I‹m
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

1208 
JSAtom
 
©om
, *
İaque
);

1210 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_¬gum’ts_exÙic_m‘hods
;

1211 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_¡ršg_exÙic_m‘hods
;

1212 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_´oxy_exÙic_m‘hods
;

1213 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_moduË_ns_exÙic_m‘hods
;

1214 
JSCÏssID
 
	gjs_şass_id_®loc
 = 
JS_CLASS_INIT_COUNT
;

1216 
	$js_Œigg”_gc
(
JSRuÁime
 *
¹
, 
size_t
 
size
)

1218 
BOOL
 
fÜû_gc
;

1219 #ifdeà
FORCE_GC_AT_MALLOC


1220 
fÜû_gc
 = 
TRUE
;

1222 
fÜû_gc
 = ((
¹
->
m®loc_¡©e
.
m®loc_size
 + 
size
) >

1223 
¹
->
m®loc_gc_th»shŞd
);

1225 ià(
fÜû_gc
) {

1226 #ifdeà
DUMP_GC


1227 
	`´štf
("GC: size=%" 
PRIu64
 "\n",

1228 (
ušt64_t
)
¹
->
m®loc_¡©e
.
m®loc_size
);

1230 
	`JS_RunGC
(
¹
);

1231 
¹
->
m®loc_gc_th»shŞd
 =„t->
m®loc_¡©e
.
m®loc_size
 +

1232 (
¹
->
m®loc_¡©e
.
m®loc_size
 >> 1);

1234 
	}
}

1236 
size_t
 
	$js_m®loc_u§bË_size_unknown
(cÚ¡ *
±r
)

1239 
	}
}

1241 *
	$js_m®loc_¹
(
JSRuÁime
 *
¹
, 
size_t
 
size
)

1243  
¹
->
mf
.
	`js_m®loc
(&¹->
m®loc_¡©e
, 
size
);

1244 
	}
}

1246 
	$js_ä“_¹
(
JSRuÁime
 *
¹
, *
±r
)

1248 
¹
->
mf
.
	`js_ä“
(&¹->
m®loc_¡©e
, 
±r
);

1249 
	}
}

1251 *
	$js_»®loc_¹
(
JSRuÁime
 *
¹
, *
±r
, 
size_t
 
size
)

1253  
¹
->
mf
.
	`js_»®loc
(&¹->
m®loc_¡©e
, 
±r
, 
size
);

1254 
	}
}

1256 
size_t
 
	$js_m®loc_u§bË_size_¹
(
JSRuÁime
 *
¹
, cÚ¡ *
±r
)

1258  
¹
->
mf
.
	`js_m®loc_u§bË_size
(
±r
);

1259 
	}
}

1261 *
	$js_m®locz_¹
(
JSRuÁime
 *
¹
, 
size_t
 
size
)

1263 *
±r
;

1264 
±r
 = 
	`js_m®loc_¹
(
¹
, 
size
);

1265 ià(!
±r
)

1266  
NULL
;

1267  
	`mem£t
(
±r
, 0, 
size
);

1268 
	}
}

1270 #ifdeà
CONFIG_BIGNUM


1272 *
	$js_bf_»®loc
(*
İaque
, *
±r
, 
size_t
 
size
)

1274 
JSRuÁime
 *
¹
 = 
İaque
;

1275  
	`js_»®loc_¹
(
¹
, 
±r
, 
size
);

1276 
	}
}

1280 *
	$js_m®loc
(
JSCÚ‹xt
 *
ùx
, 
size_t
 
size
)

1282 *
±r
;

1283 
±r
 = 
	`js_m®loc_¹
(
ùx
->
¹
, 
size
);

1284 ià(
	`uÆik–y
(!
±r
)) {

1285 
	`JS_ThrowOutOfMemÜy
(
ùx
);

1286  
NULL
;

1288  
±r
;

1289 
	}
}

1292 *
	$js_m®locz
(
JSCÚ‹xt
 *
ùx
, 
size_t
 
size
)

1294 *
±r
;

1295 
±r
 = 
	`js_m®locz_¹
(
ùx
->
¹
, 
size
);

1296 ià(
	`uÆik–y
(!
±r
)) {

1297 
	`JS_ThrowOutOfMemÜy
(
ùx
);

1298  
NULL
;

1300  
±r
;

1301 
	}
}

1303 
	$js_ä“
(
JSCÚ‹xt
 *
ùx
, *
±r
)

1305 
	`js_ä“_¹
(
ùx
->
¹
, 
±r
);

1306 
	}
}

1309 *
	$js_»®loc
(
JSCÚ‹xt
 *
ùx
, *
±r
, 
size_t
 
size
)

1311 *
»t
;

1312 
»t
 = 
	`js_»®loc_¹
(
ùx
->
¹
, 
±r
, 
size
);

1313 ià(
	`uÆik–y
(!
»t
 && 
size
 != 0)) {

1314 
	`JS_ThrowOutOfMemÜy
(
ùx
);

1315  
NULL
;

1317  
»t
;

1318 
	}
}

1321 *
	$js_»®loc2
(
JSCÚ‹xt
 *
ùx
, *
±r
, 
size_t
 
size
, size_ˆ*
p¦ack
)

1323 *
»t
;

1324 
»t
 = 
	`js_»®loc_¹
(
ùx
->
¹
, 
±r
, 
size
);

1325 ià(
	`uÆik–y
(!
»t
 && 
size
 != 0)) {

1326 
	`JS_ThrowOutOfMemÜy
(
ùx
);

1327  
NULL
;

1329 ià(
p¦ack
) {

1330 
size_t
 
Ãw_size
 = 
	`js_m®loc_u§bË_size_¹
(
ùx
->
¹
, 
»t
);

1331 *
p¦ack
 = (
Ãw_size
 > 
size
) ?‚ew_size - size : 0;

1333  
»t
;

1334 
	}
}

1336 
size_t
 
	$js_m®loc_u§bË_size
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
±r
)

1338  
	`js_m®loc_u§bË_size_¹
(
ùx
->
¹
, 
±r
);

1339 
	}
}

1342 *
	$js_¡ºdup
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
s
, 
size_t
 
n
)

1344 *
±r
;

1345 
±r
 = 
	`js_m®loc
(
ùx
, 
n
 + 1);

1346 ià(
±r
) {

1347 
	`memıy
(
±r
, 
s
, 
n
);

1348 
±r
[
n
] = '\0';

1350  
±r
;

1351 
	}
}

1353 *
	$js_¡rdup
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
)

1355  
	`js_¡ºdup
(
ùx
, 
¡r
, 
	`¡¾’
(str));

1356 
	}
}

1358 
šlše
 
	$js_dbuf_š™
(
JSCÚ‹xt
 *
ùx
, 
DynBuf
 *
s
)

1360 
	`dbuf_š™2
(
s
, 
ùx
->
¹
, (
DynBufR—ÎocFunc
 *)
js_»®loc_¹
);

1361 
	}
}

1363 
šlše
 
	$is_dig™
(
c
) {

1364  
c
 >= '0' && c <= '9';

1365 
	}
}

1367 
	sJSCÏssShÜtDef
 {

1368 
JSAtom
 
	mşass_Çme
;

1369 
JSCÏssFš®iz”
 *
	mfš®iz”
;

1370 
JSCÏssGCM¬k
 *
	mgc_m¬k
;

1371 } 
	tJSCÏssShÜtDef
;

1373 
JSCÏssShÜtDef
 cÚ¡ 
	gjs_¡d_şass_def
[] = {

1374 { 
JS_ATOM_Objeù
, 
NULL
, NULL },

1375 { 
JS_ATOM_A¼ay
, 
js_¬¿y_fš®iz”
, 
js_¬¿y_m¬k
 },

1376 { 
JS_ATOM_E¼Ü
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1377 { 
JS_ATOM_Numb”
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1378 { 
JS_ATOM_SŒšg
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1379 { 
JS_ATOM_BoŞ—n
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1380 { 
JS_ATOM_SymbŞ
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1381 { 
JS_ATOM_Argum’ts
, 
js_¬¿y_fš®iz”
, 
js_¬¿y_m¬k
 },

1382 { 
JS_ATOM_Argum’ts
, 
NULL
, NULL },

1383 { 
JS_ATOM_D©e
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1384 { 
JS_ATOM_Objeù
, 
NULL
, NULL },

1385 { 
JS_ATOM_FunùiÚ
, 
js_c_funùiÚ_fš®iz”
, 
js_c_funùiÚ_m¬k
 },

1386 { 
JS_ATOM_FunùiÚ
, 
js_by‹code_funùiÚ_fš®iz”
, 
js_by‹code_funùiÚ_m¬k
 },

1387 { 
JS_ATOM_FunùiÚ
, 
js_bound_funùiÚ_fš®iz”
, 
js_bound_funùiÚ_m¬k
 },

1388 { 
JS_ATOM_FunùiÚ
, 
js_c_funùiÚ_d©a_fš®iz”
, 
js_c_funùiÚ_d©a_m¬k
 },

1389 { 
JS_ATOM_G’”©ÜFunùiÚ
, 
js_by‹code_funùiÚ_fš®iz”
, 
js_by‹code_funùiÚ_m¬k
 },

1390 { 
JS_ATOM_FÜInI‹¿tÜ
, 
js_fÜ_š_™”©Ü_fš®iz”
, 
js_fÜ_š_™”©Ü_m¬k
 },

1391 { 
JS_ATOM_RegExp
, 
js_»gexp_fš®iz”
, 
NULL
 },

1392 { 
JS_ATOM_A¼ayBufãr
, 
js_¬¿y_bufãr_fš®iz”
, 
NULL
 },

1393 { 
JS_ATOM_Sh¬edA¼ayBufãr
, 
js_¬¿y_bufãr_fš®iz”
, 
NULL
 },

1394 { 
JS_ATOM_Ušt8CÏm³dA¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1395 { 
JS_ATOM_IÁ8A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1396 { 
JS_ATOM_Ušt8A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1397 { 
JS_ATOM_IÁ16A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1398 { 
JS_ATOM_Ušt16A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1399 { 
JS_ATOM_IÁ32A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1400 { 
JS_ATOM_Ušt32A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1401 #ifdeà
CONFIG_BIGNUM


1402 { 
JS_ATOM_BigIÁ64A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1403 { 
JS_ATOM_BigUšt64A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1405 { 
JS_ATOM_Flßt32A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1406 { 
JS_ATOM_Flßt64A¼ay
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1407 { 
JS_ATOM_D©aV›w
, 
js_ty³d_¬¿y_fš®iz”
, 
js_ty³d_¬¿y_m¬k
 },

1408 #ifdeà
CONFIG_BIGNUM


1409 { 
JS_ATOM_BigIÁ
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1410 { 
JS_ATOM_BigFlßt
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1411 { 
JS_ATOM_BigFlßtEnv
, 
js_æßt_’v_fš®iz”
, 
NULL
 },

1412 { 
JS_ATOM_BigDecim®
, 
js_objeù_d©a_fš®iz”
, 
js_objeù_d©a_m¬k
 },

1413 { 
JS_ATOM_O³¿tÜS‘
, 
js_İ”©Ü_£t_fš®iz”
, 
js_İ”©Ü_£t_m¬k
 },

1415 { 
JS_ATOM_M­
, 
js_m­_fš®iz”
, 
js_m­_m¬k
 },

1416 { 
JS_ATOM_S‘
, 
js_m­_fš®iz”
, 
js_m­_m¬k
 },

1417 { 
JS_ATOM_W—kM­
, 
js_m­_fš®iz”
, 
js_m­_m¬k
 },

1418 { 
JS_ATOM_W—kS‘
, 
js_m­_fš®iz”
, 
js_m­_m¬k
 },

1419 { 
JS_ATOM_M­_I‹¿tÜ
, 
js_m­_™”©Ü_fš®iz”
, 
js_m­_™”©Ü_m¬k
 },

1420 { 
JS_ATOM_S‘_I‹¿tÜ
, 
js_m­_™”©Ü_fš®iz”
, 
js_m­_™”©Ü_m¬k
 },

1421 { 
JS_ATOM_A¼ay_I‹¿tÜ
, 
js_¬¿y_™”©Ü_fš®iz”
, 
js_¬¿y_™”©Ü_m¬k
 },

1422 { 
JS_ATOM_SŒšg_I‹¿tÜ
, 
js_¬¿y_™”©Ü_fš®iz”
, 
js_¬¿y_™”©Ü_m¬k
 },

1423 { 
JS_ATOM_RegExp_SŒšg_I‹¿tÜ
, 
js_»gexp_¡ršg_™”©Ü_fš®iz”
, 
js_»gexp_¡ršg_™”©Ü_m¬k
 },

1424 { 
JS_ATOM_G’”©Ü
, 
js_g’”©Ü_fš®iz”
, 
js_g’”©Ü_m¬k
 },

1427 
	$š™_şass_¿nge
(
JSRuÁime
 *
¹
, 
JSCÏssShÜtDef
 cÚ¡ *
b
,

1428 
¡¬t
, 
couÁ
)

1430 
JSCÏssDef
 
cm_s
, *
cm
 = &cm_s;

1431 
i
, 
şass_id
;

1433 
i
 = 0; i < 
couÁ
; i++) {

1434 
şass_id
 = 
i
 + 
¡¬t
;

1435 
	`mem£t
(
cm
, 0, (*cm));

1436 
cm
->
fš®iz”
 = 
b
[
i
].finalizer;

1437 
cm
->
gc_m¬k
 = 
b
[
i
].gc_mark;

1438 ià(
	`JS_NewCÏss1
(
¹
, 
şass_id
, 
cm
, 
b
[
i
].
şass_Çme
) < 0)

1442 
	}
}

1444 #ifdeà
CONFIG_BIGNUM


1445 
JSV®ue
 
	$JS_ThrowUnsuµÜ‹dO³¿tiÚ
(
JSCÚ‹xt
 *
ùx
)

1447  
	`JS_ThrowTy³E¼Ü
(
ùx
, "unsupported operation");

1448 
	}
}

1450 
JSV®ue
 
	$šv®id_to_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

1452  
	`JS_ThrowUnsuµÜ‹dO³¿tiÚ
(
ùx
);

1453 
	}
}

1455 
JSV®ue
 
	$šv®id_äom_¡ršg
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
,

1456 
¿dix
, 
æags
, 
¦imb_t
 *
³xpÚ’t
)

1458  
JS_NAN
;

1459 
	}
}

1461 
	$šv®id_uÇry_¬™h
(
JSCÚ‹xt
 *
ùx
,

1462 
JSV®ue
 *
´es
, 
OPCodeEnum
 
İ
, JSV®u
İ1
)

1464 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

1465 
	`JS_ThrowUnsuµÜ‹dO³¿tiÚ
(
ùx
);

1467 
	}
}

1469 
	$šv®id_bš¬y_¬™h
(
JSCÚ‹xt
 *
ùx
, 
OPCodeEnum
 
İ
,

1470 
JSV®ue
 *
´es
, JSV®u
İ1
, JSV®u
İ2
)

1472 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

1473 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

1474 
	`JS_ThrowUnsuµÜ‹dO³¿tiÚ
(
ùx
);

1476 
	}
}

1478 
JSV®ue
 
	$šv®id_mul_pow10_to_æßt64
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
bf_t
 *
a
,

1479 
št64_t
 
expÚ’t
)

1481  
	`JS_ThrowUnsuµÜ‹dO³¿tiÚ
(
ùx
);

1482 
	}
}

1484 
	$šv®id_mul_pow10
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

1486 
	`JS_ThrowUnsuµÜ‹dO³¿tiÚ
(
ùx
);

1488 
	}
}

1490 
	$£t_dummy_num”ic_İs
(
JSNum”icO³¿tiÚs
 *
İs
)

1492 
İs
->
to_¡ršg
 = 
šv®id_to_¡ršg
;

1493 
İs
->
äom_¡ršg
 = 
šv®id_äom_¡ršg
;

1494 
İs
->
uÇry_¬™h
 = 
šv®id_uÇry_¬™h
;

1495 
İs
->
bš¬y_¬™h
 = 
šv®id_bš¬y_¬™h
;

1496 
İs
->
mul_pow10_to_æßt64
 = 
šv®id_mul_pow10_to_æßt64
;

1497 
İs
->
mul_pow10
 = 
šv®id_mul_pow10
;

1498 
	}
}

1502 #ià
defšed
(
EMSCRIPTEN
)

1504 
šlše
 
ušt8_t
 *
	$js_g‘_¡ack_poš‹r
()

1506  
NULL
;

1507 
	}
}

1509 
šlše
 
BOOL
 
	$js_check_¡ack_ov”æow
(
JSRuÁime
 *
¹
, 
size_t
 
®loÿ_size
)

1511  
FALSE
;

1512 
	}
}

1515 
šlše
 
ušt8_t
 *
	$js_g‘_¡ack_poš‹r
()

1517  
	`__butš_äame_add»ss
(0);

1518 
	}
}

1520 
šlše
 
BOOL
 
	$js_check_¡ack_ov”æow
(
JSRuÁime
 *
¹
, 
size_t
 
®loÿ_size
)

1522 
size_t
 
size
;

1523 
size
 = 
¹
->
¡ack_tİ
 - 
	`js_g‘_¡ack_poš‹r
();

1524  
	`uÆik–y
((
size
 + 
®loÿ_size
è> 
¹
->
¡ack_size
);

1525 
	}
}

1528 
JSRuÁime
 *
	$JS_NewRuÁime2
(cÚ¡ 
JSM®locFunùiÚs
 *
mf
, *
İaque
)

1530 
JSRuÁime
 *
¹
;

1531 
JSM®locS‹
 
ms
;

1533 
	`mem£t
(&
ms
, 0, (ms));

1534 
ms
.
İaque
 = opaque;

1535 
ms
.
m®loc_lim™
 = -1;

1537 
¹
 = 
mf
->
	`js_m®loc
(&
ms
, (
JSRuÁime
));

1538 ià(!
¹
)

1539  
NULL
;

1540 
	`mem£t
(
¹
, 0, (*rt));

1541 
¹
->
mf
 = *mf;

1542 ià(!
¹
->
mf
.
js_m®loc_u§bË_size
) {

1544 
¹
->
mf
.
js_m®loc_u§bË_size
 = 
js_m®loc_u§bË_size_unknown
;

1546 
¹
->
m®loc_¡©e
 = 
ms
;

1547 
¹
->
m®loc_gc_th»shŞd
 = 256 * 1024;

1549 #ifdeà
CONFIG_BIGNUM


1550 
	`bf_cÚ‹xt_š™
(&
¹
->
bf_ùx
, 
js_bf_»®loc
,„t);

1551 
	`£t_dummy_num”ic_İs
(&
¹
->
bigšt_İs
);

1552 
	`£t_dummy_num”ic_İs
(&
¹
->
bigæßt_İs
);

1553 
	`£t_dummy_num”ic_İs
(&
¹
->
bigdecim®_İs
);

1556 
	`š™_li¡_h—d
(&
¹
->
cÚ‹xt_li¡
);

1557 
	`š™_li¡_h—d
(&
¹
->
gc_obj_li¡
);

1558 
	`š™_li¡_h—d
(&
¹
->
gc_z”o_»f_couÁ_li¡
);

1559 
¹
->
gc_pha£
 = 
JS_GC_PHASE_NONE
;

1561 #ifdeà
DUMP_LEAKS


1562 
	`š™_li¡_h—d
(&
¹
->
¡ršg_li¡
);

1564 
	`š™_li¡_h—d
(&
¹
->
job_li¡
);

1566 ià(
	`JS_In™Atoms
(
¹
))

1567 
ç
;

1570 ià(
	`š™_şass_¿nge
(
¹
, 
js_¡d_şass_def
, 
JS_CLASS_OBJECT
,

1571 
	`couÁof
(
js_¡d_şass_def
)) < 0)

1572 
ç
;

1573 
¹
->
şass_¬¿y
[
JS_CLASS_ARGUMENTS
].
exÙic
 = &
js_¬gum’ts_exÙic_m‘hods
;

1574 
¹
->
şass_¬¿y
[
JS_CLASS_STRING
].
exÙic
 = &
js_¡ršg_exÙic_m‘hods
;

1575 
¹
->
şass_¬¿y
[
JS_CLASS_MODULE_NS
].
exÙic
 = &
js_moduË_ns_exÙic_m‘hods
;

1577 
¹
->
şass_¬¿y
[
JS_CLASS_C_FUNCTION
].
ÿÎ
 = 
js_ÿÎ_c_funùiÚ
;

1578 
¹
->
şass_¬¿y
[
JS_CLASS_C_FUNCTION_DATA
].
ÿÎ
 = 
js_c_funùiÚ_d©a_ÿÎ
;

1579 
¹
->
şass_¬¿y
[
JS_CLASS_BOUND_FUNCTION
].
ÿÎ
 = 
js_ÿÎ_bound_funùiÚ
;

1580 
¹
->
şass_¬¿y
[
JS_CLASS_GENERATOR_FUNCTION
].
ÿÎ
 = 
js_g’”©Ü_funùiÚ_ÿÎ
;

1581 ià(
	`š™_sh­e_hash
(
¹
))

1582 
ç
;

1584 
¹
->
¡ack_tİ
 = 
	`js_g‘_¡ack_poš‹r
();

1585 
¹
->
¡ack_size
 = 
JS_DEFAULT_STACK_SIZE
;

1586 
¹
->
cu¼’t_exû±iÚ
 = 
JS_NULL
;

1588  
¹
;

1589 
ç
:

1590 
	`JS_F»eRuÁime
(
¹
);

1591  
NULL
;

1592 
	}
}

1594 *
	$JS_G‘RuÁimeO·que
(
JSRuÁime
 *
¹
)

1596  
¹
->
u£r_İaque
;

1597 
	}
}

1599 
	$JS_S‘RuÁimeO·que
(
JSRuÁime
 *
¹
, *
İaque
)

1601 
¹
->
u£r_İaque
 = 
İaque
;

1602 
	}
}

1605 
šlše
 
size_t
 
	$js_def_m®loc_u§bË_size
(*
±r
)

1607 #ià
	`defšed
(
__APPLE__
)

1608  
	`m®loc_size
(
±r
);

1609 #–ià
	`defšed
(
_WIN32
)

1610  
	`_msize
(
±r
);

1611 #–ià
	`defšed
(
EMSCRIPTEN
)

1613 #–ià
	`defšed
(
__lšux__
)

1614  
	`m®loc_u§bË_size
(
±r
);

1617  
	`m®loc_u§bË_size
(
±r
);

1619 
	}
}

1621 *
	$js_def_m®loc
(
JSM®locS‹
 *
s
, 
size_t
 
size
)

1623 *
±r
;

1626 
	`as£¹
(
size
 != 0);

1628 ià(
	`uÆik–y
(
s
->
m®loc_size
 + 
size
 > s->
m®loc_lim™
))

1629  
NULL
;

1631 
±r
 = 
	`m®loc
(
size
);

1632 ià(!
±r
)

1633  
NULL
;

1635 
s
->
m®loc_couÁ
++;

1636 
s
->
m®loc_size
 +ğ
	`js_def_m®loc_u§bË_size
(
±r
è+ 
MALLOC_OVERHEAD
;

1637  
±r
;

1638 
	}
}

1640 
	$js_def_ä“
(
JSM®locS‹
 *
s
, *
±r
)

1642 ià(!
±r
)

1645 
s
->
m®loc_couÁ
--;

1646 
s
->
m®loc_size
 -ğ
	`js_def_m®loc_u§bË_size
(
±r
è+ 
MALLOC_OVERHEAD
;

1647 
	`ä“
(
±r
);

1648 
	}
}

1650 *
	$js_def_»®loc
(
JSM®locS‹
 *
s
, *
±r
, 
size_t
 
size
)

1652 
size_t
 
Şd_size
;

1654 ià(!
±r
) {

1655 ià(
size
 == 0)

1656  
NULL
;

1657  
	`js_def_m®loc
(
s
, 
size
);

1659 
Şd_size
 = 
	`js_def_m®loc_u§bË_size
(
±r
);

1660 ià(
size
 == 0) {

1661 
s
->
m®loc_couÁ
--;

1662 
s
->
m®loc_size
 -ğ
Şd_size
 + 
MALLOC_OVERHEAD
;

1663 
	`ä“
(
±r
);

1664  
NULL
;

1666 ià(
s
->
m®loc_size
 + 
size
 - 
Şd_size
 > s->
m®loc_lim™
)

1667  
NULL
;

1669 
±r
 = 
	`»®loc
ÕŒ, 
size
);

1670 ià(!
±r
)

1671  
NULL
;

1673 
s
->
m®loc_size
 +ğ
	`js_def_m®loc_u§bË_size
(
±r
è- 
Şd_size
;

1674  
±r
;

1675 
	}
}

1677 cÚ¡ 
JSM®locFunùiÚs
 
	gdef_m®loc_funcs
 = {

1678 
js_def_m®loc
,

1679 
js_def_ä“
,

1680 
js_def_»®loc
,

1681 #ià
defšed
(
__APPLE__
)

1682 
m®loc_size
,

1683 #–ià
defšed
(
_WIN32
)

1684 (
size_t
 (*)(cÚ¡ *))
_msize
,

1685 #–ià
defšed
(
EMSCRIPTEN
)

1686 
NULL
,

1687 #–ià
defšed
(
__lšux__
)

1688 (
size_t
 (*)(cÚ¡ *))
m®loc_u§bË_size
,

1691 
m®loc_u§bË_size
,

1695 
JSRuÁime
 *
	$JS_NewRuÁime
()

1697  
	`JS_NewRuÁime2
(&
def_m®loc_funcs
, 
NULL
);

1698 
	}
}

1700 
	$JS_S‘MemÜyLim™
(
JSRuÁime
 *
¹
, 
size_t
 
lim™
)

1702 
¹
->
m®loc_¡©e
.
m®loc_lim™
 = 
lim™
;

1703 
	}
}

1706 
	$JS_S‘GCTh»shŞd
(
JSRuÁime
 *
¹
, 
size_t
 
gc_th»shŞd
)

1708 
¹
->
m®loc_gc_th»shŞd
 = 
gc_th»shŞd
;

1709 
	}
}

1711 
	#m®loc
(
s
è
	`m®loc_is_fÜbidd’
(s)

	)

1712 
	#ä“
(
p
è
	`ä“_is_fÜbidd’
Õ)

	)

1713 
	#»®loc
(
p
,
s
è
	`»®loc_is_fÜbidd’
Õ,s)

	)

1715 
	$JS_S‘IÁ”ru±HªdËr
(
JSRuÁime
 *
¹
, 
JSIÁ”ru±HªdËr
 *
cb
, *
İaque
)

1717 
¹
->
š‹¼u±_hªdËr
 = 
cb
;

1718 
¹
->
š‹¼u±_İaque
 = 
İaque
;

1719 
	}
}

1721 
	$JS_S‘CªBlock
(
JSRuÁime
 *
¹
, 
BOOL
 
ÿn_block
)

1723 
¹
->
ÿn_block
 = can_block;

1724 
	}
}

1727 
	$JS_EnqueueJob
(
JSCÚ‹xt
 *
ùx
, 
JSJobFunc
 *
job_func
,

1728 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

1730 
JSRuÁime
 *
¹
 = 
ùx
->rt;

1731 
JSJobEÁry
 *
e
;

1732 
i
;

1734 
e
 = 
	`js_m®loc
(
ùx
, (*eè+ 
¬gc
 * (
JSV®ue
));

1735 ià(!
e
)

1737 
e
->
ùx
 = ctx;

1738 
e
->
job_func
 = job_func;

1739 
e
->
¬gc
 =‡rgc;

1740 
i
 = 0; i < 
¬gc
; i++) {

1741 
e
->
¬gv
[
i
] = 
	`JS_DupV®ue
(
ùx
,‡rgv[i]);

1743 
	`li¡_add_
(&
e
->
lšk
, &
¹
->
job_li¡
);

1745 
	}
}

1747 
BOOL
 
	$JS_IsJobP’dšg
(
JSRuÁime
 *
¹
)

1749  !
	`li¡_em±y
(&
¹
->
job_li¡
);

1750 
	}
}

1754 
	$JS_Execu‹P’dšgJob
(
JSRuÁime
 *
¹
, 
JSCÚ‹xt
 **
pùx
)

1756 
JSCÚ‹xt
 *
ùx
;

1757 
JSJobEÁry
 *
e
;

1758 
JSV®ue
 
»s
;

1759 
i
, 
»t
;

1761 ià(
	`li¡_em±y
(&
¹
->
job_li¡
)) {

1762 *
pùx
 = 
NULL
;

1767 
e
 = 
	`li¡_’Œy
(
¹
->
job_li¡
.
Ãxt
, 
JSJobEÁry
, 
lšk
);

1768 
	`li¡_d–
(&
e
->
lšk
);

1769 
ùx
 = 
e
->ctx;

1770 
»s
 = 
e
->
	`job_func
Ó->
ùx
,ƒ->
¬gc
, (
JSV®ueCÚ¡
 *ë->
¬gv
);

1771 
i
 = 0; i < 
e
->
¬gc
; i++)

1772 
	`JS_F»eV®ue
(
ùx
, 
e
->
¬gv
[
i
]);

1773 ià(
	`JS_IsExû±iÚ
(
»s
))

1774 
»t
 = -1;

1776 
»t
 = 1;

1777 
	`JS_F»eV®ue
(
ùx
, 
»s
);

1778 
	`js_ä“
(
ùx
, 
e
);

1779 *
pùx
 = 
ùx
;

1780  
»t
;

1781 
	}
}

1783 
šlše
 
ušt32_t
 
	$©om_g‘_ä“
(cÚ¡ 
JSAtomSŒuù
 *
p
)

1785  (
ušŒ_t
)
p
 >> 1;

1786 
	}
}

1788 
šlše
 
BOOL
 
	$©om_is_ä“
(cÚ¡ 
JSAtomSŒuù
 *
p
)

1790  (
ušŒ_t
)
p
 & 1;

1791 
	}
}

1793 
šlše
 
JSAtomSŒuù
 *
	$©om_£t_ä“
(
ušt32_t
 
v
)

1795  (
JSAtomSŒuù
 *)(((
ušŒ_t
)
v
 << 1) | 1);

1796 
	}
}

1799 
JSSŒšg
 *
	$js_®loc_¡ršg_¹
(
JSRuÁime
 *
¹
, 
max_Ën
, 
is_wide_ch¬
)

1801 
JSSŒšg
 *
¡r
;

1802 
¡r
 = 
	`js_m®loc_¹
(
¹
, (
JSSŒšg
è+ (
max_Ën
 << 
is_wide_ch¬
) + 1 - is_wide_char);

1803 ià(
	`uÆik–y
(!
¡r
))

1804  
NULL
;

1805 
¡r
->
h—d”
.
»f_couÁ
 = 1;

1806 
¡r
->
is_wide_ch¬
 = is_wide_char;

1807 
¡r
->
Ën
 = 
max_Ën
;

1808 
¡r
->
©om_ty³
 = 0;

1809 
¡r
->
hash
 = 0;

1810 
¡r
->
hash_Ãxt
 = 0;

1811 #ifdeà
DUMP_LEAKS


1812 
	`li¡_add_
(&
¡r
->
lšk
, &
¹
->
¡ršg_li¡
);

1814  
¡r
;

1815 
	}
}

1817 
JSSŒšg
 *
	$js_®loc_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
max_Ën
, 
is_wide_ch¬
)

1819 
JSSŒšg
 *
p
;

1820 
p
 = 
	`js_®loc_¡ršg_¹
(
ùx
->
¹
, 
max_Ën
, 
is_wide_ch¬
);

1821 ià(
	`uÆik–y
(!
p
)) {

1822 
	`JS_ThrowOutOfMemÜy
(
ùx
);

1823  
NULL
;

1825  
p
;

1826 
	}
}

1829 
šlše
 
	$js_ä“_¡ršg
(
JSRuÁime
 *
¹
, 
JSSŒšg
 *
¡r
)

1831 ià(--
¡r
->
h—d”
.
»f_couÁ
 <= 0) {

1832 ià(
¡r
->
©om_ty³
) {

1833 
	`JS_F»eAtomSŒuù
(
¹
, 
¡r
);

1835 #ifdeà
DUMP_LEAKS


1836 
	`li¡_d–
(&
¡r
->
lšk
);

1838 
	`js_ä“_¹
(
¹
, 
¡r
);

1841 
	}
}

1843 
	$JS_S‘RuÁimeInfo
(
JSRuÁime
 *
¹
, cÚ¡ *
s
)

1845 ià(
¹
)

1846 
¹
->
¹_šfo
 = 
s
;

1847 
	}
}

1849 
	$JS_F»eRuÁime
(
JSRuÁime
 *
¹
)

1851 
li¡_h—d
 *
–
, *
–1
;

1852 
i
;

1854 
	`JS_F»eV®ueRT
(
¹
,„t->
cu¼’t_exû±iÚ
);

1856 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
¹
->
job_li¡
) {

1857 
JSJobEÁry
 *
e
 = 
	`li¡_’Œy
(
–
, JSJobEÁry, 
lšk
);

1858 
i
 = 0; i < 
e
->
¬gc
; i++)

1859 
	`JS_F»eV®ueRT
(
¹
, 
e
->
¬gv
[
i
]);

1860 
	`js_ä“_¹
(
¹
, 
e
);

1862 
	`š™_li¡_h—d
(&
¹
->
job_li¡
);

1864 
	`JS_RunGC
(
¹
);

1866 #ifdeà
DUMP_LEAKS


1869 
BOOL
 
h—d”_dÚe
;

1870 
JSGCObjeùH—d”
 *
p
;

1871 
couÁ
;

1875 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

1876 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

1877 
p
->
m¬k
 = 0;

1879 
	`gc_deüef
(
¹
);

1881 
h—d”_dÚe
 = 
FALSE
;

1882 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

1883 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

1884 ià(
p
->
»f_couÁ
 != 0) {

1885 ià(!
h—d”_dÚe
) {

1886 
	`´štf
("Object†eaks:\n");

1887 
	`JS_DumpObjeùH—d”
(
¹
);

1888 
h—d”_dÚe
 = 
TRUE
;

1890 
	`JS_DumpGCObjeù
(
¹
, 
p
);

1894 
couÁ
 = 0;

1895 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

1896 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

1897 ià(
p
->
»f_couÁ
 == 0) {

1898 
couÁ
++;

1901 ià(
couÁ
 != 0)

1902 
	`´štf
("SecÚd¬y objeù†—ks: %d\n", 
couÁ
);

1905 
	`as£¹
(
	`li¡_em±y
(&
¹
->
gc_obj_li¡
));

1908 
i
 = 0; i < 
¹
->
şass_couÁ
; i++) {

1909 
JSCÏss
 *
ş
 = &
¹
->
şass_¬¿y
[
i
];

1910 ià(
ş
->
şass_id
 != 0) {

1911 
	`JS_F»eAtomRT
(
¹
, 
ş
->
şass_Çme
);

1914 
	`js_ä“_¹
(
¹
,„t->
şass_¬¿y
);

1916 #ifdeà
CONFIG_BIGNUM


1917 
	`bf_cÚ‹xt_’d
(&
¹
->
bf_ùx
);

1920 #ifdeà
DUMP_LEAKS


1923 
BOOL
 
h—d”_dÚe
 = 
FALSE
;

1925 
i
 = 0; i < 
¹
->
©om_size
; i++) {

1926 
JSAtomSŒuù
 *
p
 = 
¹
->
©om_¬¿y
[
i
];

1927 ià(!
	`©om_is_ä“
(
p
) ) {

1928 ià(
i
 >ğ
JS_ATOM_END
 || 
p
->
h—d”
.
»f_couÁ
 != 1) {

1929 ià(!
h—d”_dÚe
) {

1930 
h—d”_dÚe
 = 
TRUE
;

1931 ià(
¹
->
¹_šfo
) {

1932 
	`´štf
("%s:1:‡tom†—kage:", 
¹
->
¹_šfo
);

1934 
	`´štf
("Atom†eaks:\n"

1939 ià(
¹
->
¹_šfo
) {

1940 
	`´štf
(" ");

1942 
	`´štf
(" %6u %6u ", 
i
, 
p
->
h—d”
.
»f_couÁ
);

1944 
p
->
©om_ty³
) {

1945 
JS_ATOM_TYPE_STRING
:

1946 
	`JS_DumpSŒšg
(
¹
, 
p
);

1948 
JS_ATOM_TYPE_GLOBAL_SYMBOL
:

1949 
	`´štf
("Symbol.for(");

1950 
	`JS_DumpSŒšg
(
¹
, 
p
);

1951 
	`´štf
(")");

1953 
JS_ATOM_TYPE_SYMBOL
:

1954 ià(
p
->
hash
 =ğ
JS_ATOM_HASH_SYMBOL
) {

1955 
	`´štf
("Symbol(");

1956 
	`JS_DumpSŒšg
(
¹
, 
p
);

1957 
	`´štf
(")");

1959 
	`´štf
("Private(");

1960 
	`JS_DumpSŒšg
(
¹
, 
p
);

1961 
	`´štf
(")");

1965 ià(
¹
->
¹_šfo
) {

1966 
	`´štf
(":%u", 
p
->
h—d”
.
»f_couÁ
);

1968 
	`´štf
("\n");

1973 ià(
¹
->
¹_šfo
 && 
h—d”_dÚe
)

1974 
	`´štf
("\n");

1979 
i
 = 0; i < 
¹
->
©om_size
; i++) {

1980 
JSAtomSŒuù
 *
p
 = 
¹
->
©om_¬¿y
[
i
];

1981 ià(!
	`©om_is_ä“
(
p
)) {

1982 #ifdeà
DUMP_LEAKS


1983 
	`li¡_d–
(&
p
->
lšk
);

1985 
	`js_ä“_¹
(
¹
, 
p
);

1988 
	`js_ä“_¹
(
¹
,„t->
©om_¬¿y
);

1989 
	`js_ä“_¹
(
¹
,„t->
©om_hash
);

1990 
	`js_ä“_¹
(
¹
,„t->
sh­e_hash
);

1991 #ifdeà
DUMP_LEAKS


1992 ià(!
	`li¡_em±y
(&
¹
->
¡ršg_li¡
)) {

1993 ià(
¹
->
¹_šfo
) {

1994 
	`´štf
("%s:1: sŒšg†—kage:", 
¹
->
¹_šfo
);

1996 
	`´štf
("String†eaks:\n"

2000 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
¹
->
¡ršg_li¡
) {

2001 
JSSŒšg
 *
¡r
 = 
	`li¡_’Œy
(
–
, JSSŒšg, 
lšk
);

2002 ià(
¹
->
¹_šfo
) {

2003 
	`´štf
(" ");

2005 
	`´štf
(" %6u ", 
¡r
->
h—d”
.
»f_couÁ
);

2007 
	`JS_DumpSŒšg
(
¹
, 
¡r
);

2008 ià(
¹
->
¹_šfo
) {

2009 
	`´štf
(":%u", 
¡r
->
h—d”
.
»f_couÁ
);

2011 
	`´štf
("\n");

2013 
	`li¡_d–
(&
¡r
->
lšk
);

2014 
	`js_ä“_¹
(
¹
, 
¡r
);

2016 ià(
¹
->
¹_šfo
)

2017 
	`´štf
("\n");

2020 
JSM®locS‹
 *
s
 = &
¹
->
m®loc_¡©e
;

2021 ià(
s
->
m®loc_couÁ
 > 1) {

2022 ià(
¹
->
¹_šfo
)

2023 
	`´štf
("%s:1: ", 
¹
->
¹_šfo
);

2024 
	`´štf
("MemÜy†—k: %"
PRIu64
" bytes†ost in %"PRIu64" block%s\n",

2025 (
ušt64_t
)(
s
->
m®loc_size
 - (
JSRuÁime
)),

2026 (
ušt64_t
)(
s
->
m®loc_couÁ
 - 1), &"s"[s->malloc_count == 2]);

2032 
JSM®locS‹
 
ms
 = 
¹
->
m®loc_¡©e
;

2033 
¹
->
mf
.
	`js_ä“
(&
ms
,„t);

2035 
	}
}

2037 
JSCÚ‹xt
 *
	$JS_NewCÚ‹xtRaw
(
JSRuÁime
 *
¹
)

2039 
JSCÚ‹xt
 *
ùx
;

2040 
i
;

2042 
ùx
 = 
	`js_m®locz_¹
(
¹
, (
JSCÚ‹xt
));

2043 ià(!
ùx
)

2044  
NULL
;

2045 
ùx
->
h—d”
.
»f_couÁ
 = 1;

2046 
	`add_gc_objeù
(
¹
, &
ùx
->
h—d”
, 
JS_GC_OBJ_TYPE_JS_CONTEXT
);

2048 
ùx
->
şass_´Ùo
 = 
	`js_m®loc_¹
(
¹
, (ctx->class_proto[0]) *

2049 
¹
->
şass_couÁ
);

2050 ià(!
ùx
->
şass_´Ùo
) {

2051 
	`js_ä“_¹
(
¹
, 
ùx
);

2052  
NULL
;

2054 
ùx
->
¹
 =„t;

2055 
	`li¡_add_
(&
ùx
->
lšk
, &
¹
->
cÚ‹xt_li¡
);

2056 #ifdeà
CONFIG_BIGNUM


2057 
ùx
->
bf_ùx
 = &
¹
->bf_ctx;

2058 
ùx
->
å_’v
.
´ec
 = 113;

2059 
ùx
->
å_’v
.
æags
 = 
	`bf_£t_exp_b™s
(15è| 
BF_RNDN
 | 
BF_FLAG_SUBNORMAL
;

2061 
i
 = 0; i < 
¹
->
şass_couÁ
; i++)

2062 
ùx
->
şass_´Ùo
[
i
] = 
JS_NULL
;

2063 
ùx
->
¬¿y_ùÜ
 = 
JS_NULL
;

2064 
ùx
->
»gexp_ùÜ
 = 
JS_NULL
;

2065 
ùx
->
´omi£_ùÜ
 = 
JS_NULL
;

2066 
	`š™_li¡_h—d
(&
ùx
->
lßded_moduËs
);

2068 
	`JS_AddIÁršsicBasicObjeùs
(
ùx
);

2069  
ùx
;

2070 
	}
}

2072 
JSCÚ‹xt
 *
	$JS_NewCÚ‹xt
(
JSRuÁime
 *
¹
)

2074 
JSCÚ‹xt
 *
ùx
;

2076 
ùx
 = 
	`JS_NewCÚ‹xtRaw
(
¹
);

2077 ià(!
ùx
)

2078  
NULL
;

2080 
	`JS_AddIÁršsicBa£Objeùs
(
ùx
);

2081 
	`JS_AddIÁršsicD©e
(
ùx
);

2082 
	`JS_AddIÁršsicEv®
(
ùx
);

2083 
	`JS_AddIÁršsicSŒšgNÜm®ize
(
ùx
);

2084 
	`JS_AddIÁršsicRegExp
(
ùx
);

2085 
	`JS_AddIÁršsicJSON
(
ùx
);

2086 
	`JS_AddIÁršsicProxy
(
ùx
);

2087 
	`JS_AddIÁršsicM­S‘
(
ùx
);

2088 
	`JS_AddIÁršsicTy³dA¼ays
(
ùx
);

2089 
	`JS_AddIÁršsicPromi£
(
ùx
);

2090 #ifdeà
CONFIG_BIGNUM


2091 
	`JS_AddIÁršsicBigIÁ
(
ùx
);

2093  
ùx
;

2094 
	}
}

2096 *
	$JS_G‘CÚ‹xtO·que
(
JSCÚ‹xt
 *
ùx
)

2098  
ùx
->
u£r_İaque
;

2099 
	}
}

2101 
	$JS_S‘CÚ‹xtO·que
(
JSCÚ‹xt
 *
ùx
, *
İaque
)

2103 
ùx
->
u£r_İaque
 = 
İaque
;

2104 
	}
}

2108 
šlše
 
	$£t_v®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
pv®
, JSV®u
Ãw_v®
)

2110 
JSV®ue
 
Şd_v®
;

2111 
Şd_v®
 = *
pv®
;

2112 *
pv®
 = 
Ãw_v®
;

2113 
	`JS_F»eV®ue
(
ùx
, 
Şd_v®
);

2114 
	}
}

2116 
	$JS_S‘CÏssPrÙo
(
JSCÚ‹xt
 *
ùx
, 
JSCÏssID
 
şass_id
, 
JSV®ue
 
obj
)

2118 
JSRuÁime
 *
¹
 = 
ùx
->rt;

2119 
	`as£¹
(
şass_id
 < 
¹
->
şass_couÁ
);

2120 
	`£t_v®ue
(
ùx
, &ùx->
şass_´Ùo
[
şass_id
], 
obj
);

2121 
	}
}

2123 
JSV®ue
 
	$JS_G‘CÏssPrÙo
(
JSCÚ‹xt
 *
ùx
, 
JSCÏssID
 
şass_id
)

2125 
JSRuÁime
 *
¹
 = 
ùx
->rt;

2126 
	`as£¹
(
şass_id
 < 
¹
->
şass_couÁ
);

2127  
	`JS_DupV®ue
(
ùx
, ctx->
şass_´Ùo
[
şass_id
]);

2128 
	}
}

2130 
	eJSF»eModuËEnum
 {

2131 
	mJS_FREE_MODULE_ALL
,

2132 
	mJS_FREE_MODULE_NOT_RESOLVED
,

2133 
	mJS_FREE_MODULE_NOT_EVALUATED
,

2134 } 
	tJSF»eModuËEnum
;

2137 
	$js_ä“_moduËs
(
JSCÚ‹xt
 *
ùx
, 
JSF»eModuËEnum
 
æag
)

2139 
li¡_h—d
 *
–
, *
–1
;

2140 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
ùx
->
lßded_moduËs
) {

2141 
JSModuËDef
 *
m
 = 
	`li¡_’Œy
(
–
, JSModuËDef, 
lšk
);

2142 ià(
æag
 =ğ
JS_FREE_MODULE_ALL
 ||

2143 (
æag
 =ğ
JS_FREE_MODULE_NOT_RESOLVED
 && !
m
->
»sŞved
) ||

2144 (
æag
 =ğ
JS_FREE_MODULE_NOT_EVALUATED
 && !
m
->
ev®u©ed
)) {

2145 
	`js_ä“_moduË_def
(
ùx
, 
m
);

2148 
	}
}

2150 
JSCÚ‹xt
 *
	$JS_DupCÚ‹xt
(
JSCÚ‹xt
 *
ùx
)

2152 
ùx
->
h—d”
.
»f_couÁ
++;

2153  
ùx
;

2154 
	}
}

2157 
	$JS_M¬kCÚ‹xt
(
JSRuÁime
 *
¹
, 
JSCÚ‹xt
 *
ùx
,

2158 
JS_M¬kFunc
 *
m¬k_func
)

2160 
i
;

2161 
li¡_h—d
 *
–
;

2165 
	`li¡_fÜ_—ch
(
–
, &
ùx
->
lßded_moduËs
) {

2166 
JSModuËDef
 *
m
 = 
	`li¡_’Œy
(
–
, JSModuËDef, 
lšk
);

2167 
	`js_m¬k_moduË_def
(
¹
, 
m
, 
m¬k_func
);

2170 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
glob®_obj
, 
m¬k_func
);

2171 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
glob®_v¬_obj
, 
m¬k_func
);

2173 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
throw_ty³_”rÜ
, 
m¬k_func
);

2174 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
ev®_obj
, 
m¬k_func
);

2176 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
¬¿y_´Ùo_v®ues
, 
m¬k_func
);

2177 
i
 = 0; i < 
JS_NATIVE_ERROR_COUNT
; i++) {

2178 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
Çtive_”rÜ_´Ùo
[
i
], 
m¬k_func
);

2180 
i
 = 0; i < 
¹
->
şass_couÁ
; i++) {

2181 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
şass_´Ùo
[
i
], 
m¬k_func
);

2183 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
™”©Ü_´Ùo
, 
m¬k_func
);

2184 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
async_™”©Ü_´Ùo
, 
m¬k_func
);

2185 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
´omi£_ùÜ
, 
m¬k_func
);

2186 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
¬¿y_ùÜ
, 
m¬k_func
);

2187 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
»gexp_ùÜ
, 
m¬k_func
);

2188 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
funùiÚ_ùÜ
, 
m¬k_func
);

2189 
	`JS_M¬kV®ue
(
¹
, 
ùx
->
funùiÚ_´Ùo
, 
m¬k_func
);

2191 ià(
ùx
->
¬¿y_sh­e
)

2192 
	`m¬k_func
(
¹
, &
ùx
->
¬¿y_sh­e
->
h—d”
);

2193 
	}
}

2195 
	$JS_F»eCÚ‹xt
(
JSCÚ‹xt
 *
ùx
)

2197 
JSRuÁime
 *
¹
 = 
ùx
->rt;

2198 
i
;

2200 ià(--
ùx
->
h—d”
.
»f_couÁ
 > 0)

2202 
	`as£¹
(
ùx
->
h—d”
.
»f_couÁ
 == 0);

2204 #ifdeà
DUMP_ATOMS


2205 
	`JS_DumpAtoms
(
ùx
->
¹
);

2207 #ifdeà
DUMP_SHAPES


2208 
	`JS_DumpSh­es
(
ùx
->
¹
);

2210 #ifdeà
DUMP_OBJECTS


2212 
li¡_h—d
 *
–
;

2213 
JSGCObjeùH—d”
 *
p
;

2214 
	`´štf
("JSObjects: {\n");

2215 
	`JS_DumpObjeùH—d”
(
ùx
->
¹
);

2216 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

2217 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

2218 
	`JS_DumpGCObjeù
(
¹
, 
p
);

2220 
	`´štf
("}\n");

2223 #ifdeà
DUMP_MEM


2225 
JSMemÜyU§ge
 
¡©s
;

2226 
	`JS_Compu‹MemÜyU§ge
(
¹
, &
¡©s
);

2227 
	`JS_DumpMemÜyU§ge
(
¡dout
, &
¡©s
, 
¹
);

2231 
	`js_ä“_moduËs
(
ùx
, 
JS_FREE_MODULE_ALL
);

2233 
	`JS_F»eV®ue
(
ùx
, ctx->
glob®_obj
);

2234 
	`JS_F»eV®ue
(
ùx
, ctx->
glob®_v¬_obj
);

2236 
	`JS_F»eV®ue
(
ùx
, ctx->
throw_ty³_”rÜ
);

2237 
	`JS_F»eV®ue
(
ùx
, ctx->
ev®_obj
);

2239 
	`JS_F»eV®ue
(
ùx
, ctx->
¬¿y_´Ùo_v®ues
);

2240 
i
 = 0; i < 
JS_NATIVE_ERROR_COUNT
; i++) {

2241 
	`JS_F»eV®ue
(
ùx
, ctx->
Çtive_”rÜ_´Ùo
[
i
]);

2243 
i
 = 0; i < 
¹
->
şass_couÁ
; i++) {

2244 
	`JS_F»eV®ue
(
ùx
, ctx->
şass_´Ùo
[
i
]);

2246 
	`js_ä“_¹
(
¹
, 
ùx
->
şass_´Ùo
);

2247 
	`JS_F»eV®ue
(
ùx
, ctx->
™”©Ü_´Ùo
);

2248 
	`JS_F»eV®ue
(
ùx
, ctx->
async_™”©Ü_´Ùo
);

2249 
	`JS_F»eV®ue
(
ùx
, ctx->
´omi£_ùÜ
);

2250 
	`JS_F»eV®ue
(
ùx
, ctx->
¬¿y_ùÜ
);

2251 
	`JS_F»eV®ue
(
ùx
, ctx->
»gexp_ùÜ
);

2252 
	`JS_F»eV®ue
(
ùx
, ctx->
funùiÚ_ùÜ
);

2253 
	`JS_F»eV®ue
(
ùx
, ctx->
funùiÚ_´Ùo
);

2255 
	`js_ä“_sh­e_nuÎ
(
ùx
->
¹
, ctx->
¬¿y_sh­e
);

2257 
	`li¡_d–
(&
ùx
->
lšk
);

2258 
	`»move_gc_objeù
(&
ùx
->
h—d”
);

2259 
	`js_ä“_¹
(
ùx
->
¹
, ctx);

2260 
	}
}

2262 
JSRuÁime
 *
	$JS_G‘RuÁime
(
JSCÚ‹xt
 *
ùx
)

2264  
ùx
->
¹
;

2265 
	}
}

2267 
	$JS_S‘MaxSckSize
(
JSRuÁime
 *
¹
, 
size_t
 
¡ack_size
)

2269 
¹
->
¡ack_size
 = stack_size;

2270 
	}
}

2272 
šlše
 
BOOL
 
	$is_¡riù_mode
(
JSCÚ‹xt
 *
ùx
)

2274 
JSSckF¿me
 *
sf
 = 
ùx
->
¹
->
cu¼’t_¡ack_äame
;

2275  (
sf
 && (sf->
js_mode
 & 
JS_MODE_STRICT
));

2276 
	}
}

2278 #ifdeà
CONFIG_BIGNUM


2279 
šlše
 
BOOL
 
	$is_m©h_mode
(
JSCÚ‹xt
 *
ùx
)

2281 
JSSckF¿me
 *
sf
 = 
ùx
->
¹
->
cu¼’t_¡ack_äame
;

2282  (
sf
 && (sf->
js_mode
 & 
JS_MODE_MATH
));

2283 
	}
}

2288 
	#JS_ATOM_TAG_INT
 (1U << 31)

	)

2289 
	#JS_ATOM_MAX_INT
 (
JS_ATOM_TAG_INT
 - 1)

	)

2290 
	#JS_ATOM_MAX
 ((1U << 30è- 1)

	)

2293 
	#JS_ATOM_COUNT_RESIZE
(
n
è(Òè* 2)

	)

2295 
šlše
 
BOOL
 
	$__JS_AtomIsCÚ¡
(
JSAtom
 
v
)

2297 #ià
	`defšed
(
DUMP_LEAKS
) && DUMP_LEAKS > 1

2298  (
št32_t
)
v
 <= 0;

2300  (
št32_t
)
v
 < 
JS_ATOM_END
;

2302 
	}
}

2304 
šlše
 
BOOL
 
	$__JS_AtomIsTaggedIÁ
(
JSAtom
 
v
)

2306  (
v
 & 
JS_ATOM_TAG_INT
) != 0;

2307 
	}
}

2309 
šlše
 
JSAtom
 
	$__JS_AtomFromUIÁ32
(
ušt32_t
 
v
)

2311  
v
 | 
JS_ATOM_TAG_INT
;

2312 
	}
}

2314 
šlše
 
ušt32_t
 
	$__JS_AtomToUIÁ32
(
JSAtom
 
©om
)

2316  
©om
 & ~
JS_ATOM_TAG_INT
;

2317 
	}
}

2319 
šlše
 
	$is_num
(
c
)

2321  
c
 >= '0' && c <= '9';

2322 
	}
}

2325 
šlše
 
BOOL
 
	$is_num_¡ršg
(
ušt32_t
 *
pv®
, cÚ¡ 
JSSŒšg
 *
p
)

2327 
ušt32_t
 
n
;

2328 
ušt64_t
 
n64
;

2329 
c
, 
i
, 
Ën
;

2331 
Ën
 = 
p
->len;

2332 ià(
Ën
 == 0 ||†en > 10)

2333  
FALSE
;

2334 ià(
p
->
is_wide_ch¬
)

2335 
c
 = 
p
->
u
.
¡r16
[0];

2337 
c
 = 
p
->
u
.
¡r8
[0];

2338 ià(
	`is_num
(
c
)) {

2339 ià(
c
 == '0') {

2340 ià(
Ën
 != 1)

2341  
FALSE
;

2342 
n
 = 0;

2344 
n
 = 
c
 - '0';

2345 
i
 = 1; i < 
Ën
; i++) {

2346 ià(
p
->
is_wide_ch¬
)

2347 
c
 = 
p
->
u
.
¡r16
[
i
];

2349 
c
 = 
p
->
u
.
¡r8
[
i
];

2350 ià(!
	`is_num
(
c
))

2351  
FALSE
;

2352 
n64
 = (
ušt64_t
)
n
 * 10 + (
c
 - '0');

2353 ià((
n64
 >> 32) != 0)

2354  
FALSE
;

2355 
n
 = 
n64
;

2358 *
pv®
 = 
n
;

2359  
TRUE
;

2361  
FALSE
;

2363 
	}
}

2366 
šlše
 
ušt32_t
 
	$hash_¡ršg8
(cÚ¡ 
ušt8_t
 *
¡r
, 
size_t
 
Ën
, 
ušt32_t
 
h
)

2368 
size_t
 
i
;

2370 
i
 = 0; i < 
Ën
; i++)

2371 
h
 = h * 263 + 
¡r
[
i
];

2372  
h
;

2373 
	}
}

2375 
šlše
 
ušt32_t
 
	$hash_¡ršg16
(cÚ¡ 
ušt16_t
 *
¡r
,

2376 
size_t
 
Ën
, 
ušt32_t
 
h
)

2378 
size_t
 
i
;

2380 
i
 = 0; i < 
Ën
; i++)

2381 
h
 = h * 263 + 
¡r
[
i
];

2382  
h
;

2383 
	}
}

2385 
ušt32_t
 
	$hash_¡ršg
(cÚ¡ 
JSSŒšg
 *
¡r
, 
ušt32_t
 
h
)

2387 ià(
¡r
->
is_wide_ch¬
)

2388 
h
 = 
	`hash_¡ršg16
(
¡r
->
u
.
¡r16
, sŒ->
Ën
, h);

2390 
h
 = 
	`hash_¡ršg8
(
¡r
->
u
.
¡r8
, sŒ->
Ën
, h);

2391  
h
;

2392 
	}
}

2394 
__maybe_unu£d
 
	$JS_DumpSŒšg
(
JSRuÁime
 *
¹
,

2395 cÚ¡ 
JSSŒšg
 *
p
)

2397 
i
, 
c
, 
£p
;

2399 ià(
p
 =ğ
NULL
) {

2400 
	`´štf
("<null>");

2403 
	`´štf
("%d", 
p
->
h—d”
.
»f_couÁ
);

2404 
£p
 = (
p
->
h—d”
.
»f_couÁ
 == 1) ? '\"' : '\'';

2405 
	`putch¬
(
£p
);

2406 
i
 = 0; i < 
p
->
Ën
; i++) {

2407 ià(
p
->
is_wide_ch¬
)

2408 
c
 = 
p
->
u
.
¡r16
[
i
];

2410 
c
 = 
p
->
u
.
¡r8
[
i
];

2411 ià(
c
 =ğ
£p
 || c == '\\') {

2412 
	`putch¬
('\\');

2413 
	`putch¬
(
c
);

2414 } ià(
c
 >= ' ' && c <= 126) {

2415 
	`putch¬
(
c
);

2416 } ià(
c
 == '\n') {

2417 
	`putch¬
('\\');

2418 
	`putch¬
('n');

2420 
	`´štf
("\\u%04x", 
c
);

2423 
	`putch¬
(
£p
);

2424 
	}
}

2426 
__maybe_unu£d
 
	$JS_DumpAtoms
(
JSRuÁime
 *
¹
)

2428 
JSAtomSŒuù
 *
p
;

2429 
h
, 
i
;

2431 
	`´štf
("JSAtom count=%d size=%d hash_size=%d:\n",

2432 
¹
->
©om_couÁ
,„t->
©om_size
,„t->
©om_hash_size
);

2433 
	`´štf
("JSAtom hashable: {\n");

2434 
i
 = 0; i < 
¹
->
©om_hash_size
; i++) {

2435 
h
 = 
¹
->
©om_hash
[
i
];

2436 ià(
h
) {

2437 
	`´štf
(" %d:", 
i
);

2438 
h
) {

2439 
p
 = 
¹
->
©om_¬¿y
[
h
];

2440 
	`´štf
(" ");

2441 
	`JS_DumpSŒšg
(
¹
, 
p
);

2442 
h
 = 
p
->
hash_Ãxt
;

2444 
	`´štf
("\n");

2447 
	`´štf
("}\n");

2448 
	`´štf
("JSAtomable: {\n");

2449 
i
 = 0; i < 
¹
->
©om_size
; i++) {

2450 
p
 = 
¹
->
©om_¬¿y
[
i
];

2451 ià(!
	`©om_is_ä“
(
p
)) {

2452 
	`´štf
(" %d: { %d %08x ", 
i
, 
p
->
©om_ty³
,…->
hash
);

2453 ià(!(
p
->
Ën
 =ğ0 &&…->
is_wide_ch¬
 != 0))

2454 
	`JS_DumpSŒšg
(
¹
, 
p
);

2455 
	`´štf
(" %d }\n", 
p
->
hash_Ãxt
);

2458 
	`´štf
("}\n");

2459 
	}
}

2461 
	$JS_ResizeAtomHash
(
JSRuÁime
 *
¹
, 
Ãw_hash_size
)

2463 
JSAtomSŒuù
 *
p
;

2464 
ušt32_t
 
Ãw_hash_mask
, 
h
, 
i
, 
hash_Ãxt1
, 
j
, *
Ãw_hash
;

2466 
	`as£¹
((
Ãw_hash_size
 & (new_hash_size - 1)) == 0);

2467 
Ãw_hash_mask
 = 
Ãw_hash_size
 - 1;

2468 
Ãw_hash
 = 
	`js_m®locz_¹
(
¹
, Ôt->
©om_hash
[0]è* 
Ãw_hash_size
);

2469 ià(!
Ãw_hash
)

2471 
i
 = 0; i < 
¹
->
©om_hash_size
; i++) {

2472 
h
 = 
¹
->
©om_hash
[
i
];

2473 
h
 != 0) {

2474 
p
 = 
¹
->
©om_¬¿y
[
h
];

2475 
hash_Ãxt1
 = 
p
->
hash_Ãxt
;

2477 
j
 = 
p
->
hash
 & 
Ãw_hash_mask
;

2478 
p
->
hash_Ãxt
 = 
Ãw_hash
[
j
];

2479 
Ãw_hash
[
j
] = 
h
;

2480 
h
 = 
hash_Ãxt1
;

2483 
	`js_ä“_¹
(
¹
,„t->
©om_hash
);

2484 
¹
->
©om_hash
 = 
Ãw_hash
;

2485 
¹
->
©om_hash_size
 = 
Ãw_hash_size
;

2486 
¹
->
©om_couÁ_»size
 = 
	`JS_ATOM_COUNT_RESIZE
(
Ãw_hash_size
);

2489 
	}
}

2491 
	$JS_In™Atoms
(
JSRuÁime
 *
¹
)

2493 
i
, 
Ën
, 
©om_ty³
;

2494 cÚ¡ *
p
;

2496 
¹
->
©om_hash_size
 = 0;

2497 
¹
->
©om_hash
 = 
NULL
;

2498 
¹
->
©om_couÁ
 = 0;

2499 
¹
->
©om_size
 = 0;

2500 
¹
->
©om_ä“_šdex
 = 0;

2501 ià(
	`JS_ResizeAtomHash
(
¹
, 256))

2504 
p
 = 
js_©om_š™
;

2505 
i
 = 1; i < 
JS_ATOM_END
; i++) {

2506 ià(
i
 =ğ
JS_ATOM_Priv©e_b¿nd
)

2507 
©om_ty³
 = 
JS_ATOM_TYPE_PRIVATE
;

2508 ià(
i
 >ğ
JS_ATOM_SymbŞ_toPrim™ive
)

2509 
©om_ty³
 = 
JS_ATOM_TYPE_SYMBOL
;

2511 
©om_ty³
 = 
JS_ATOM_TYPE_STRING
;

2512 
Ën
 = 
	`¡¾’
(
p
);

2513 ià(
	`__JS_NewAtomIn™
(
¹
, 
p
, 
Ën
, 
©om_ty³
è=ğ
JS_ATOM_NULL
)

2515 
p
 =… + 
Ën
 + 1;

2518 
	}
}

2520 
JSAtom
 
	$JS_DupAtomRT
(
JSRuÁime
 *
¹
, 
JSAtom
 
v
)

2522 
JSAtomSŒuù
 *
p
;

2524 ià(!
	`__JS_AtomIsCÚ¡
(
v
)) {

2525 
p
 = 
¹
->
©om_¬¿y
[
v
];

2526 
p
->
h—d”
.
»f_couÁ
++;

2528  
v
;

2529 
	}
}

2531 
JSAtom
 
	$JS_DupAtom
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
v
)

2533 
JSRuÁime
 *
¹
;

2534 
JSAtomSŒuù
 *
p
;

2536 ià(!
	`__JS_AtomIsCÚ¡
(
v
)) {

2537 
¹
 = 
ùx
->rt;

2538 
p
 = 
¹
->
©om_¬¿y
[
v
];

2539 
p
->
h—d”
.
»f_couÁ
++;

2541  
v
;

2542 
	}
}

2544 
JSAtomKšdEnum
 
	$JS_AtomG‘Kšd
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
v
)

2546 
JSRuÁime
 *
¹
;

2547 
JSAtomSŒuù
 *
p
;

2549 
¹
 = 
ùx
->rt;

2550 ià(
	`__JS_AtomIsTaggedIÁ
(
v
))

2551  
JS_ATOM_KIND_STRING
;

2552 
p
 = 
¹
->
©om_¬¿y
[
v
];

2553 
p
->
©om_ty³
) {

2554 
JS_ATOM_TYPE_STRING
:

2555  
JS_ATOM_KIND_STRING
;

2556 
JS_ATOM_TYPE_GLOBAL_SYMBOL
:

2557  
JS_ATOM_KIND_SYMBOL
;

2558 
JS_ATOM_TYPE_SYMBOL
:

2559 
p
->
hash
) {

2560 
JS_ATOM_HASH_SYMBOL
:

2561  
JS_ATOM_KIND_SYMBOL
;

2562 
JS_ATOM_HASH_PRIVATE
:

2563  
JS_ATOM_KIND_PRIVATE
;

2565 
	`abÜt
();

2568 
	`abÜt
();

2570 
	}
}

2572 
BOOL
 
	$JS_AtomIsSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
v
)

2574  
	`JS_AtomG‘Kšd
(
ùx
, 
v
è=ğ
JS_ATOM_KIND_STRING
;

2575 
	}
}

2577 
JSAtom
 
	$js_g‘_©om_šdex
(
JSRuÁime
 *
¹
, 
JSAtomSŒuù
 *
p
)

2579 
ušt32_t
 
i
 = 
p
->
hash_Ãxt
;

2580 ià(
p
->
©om_ty³
 !ğ
JS_ATOM_TYPE_SYMBOL
) {

2581 
JSAtomSŒuù
 *
p1
;

2583 
i
 = 
¹
->
©om_hash
[
p
->
hash
 & (¹->
©om_hash_size
 - 1)];

2584 
p1
 = 
¹
->
©om_¬¿y
[
i
];

2585 
p1
 !ğ
p
) {

2586 
	`as£¹
(
i
 != 0);

2587 
i
 = 
p1
->
hash_Ãxt
;

2588 
p1
 = 
¹
->
©om_¬¿y
[
i
];

2591  
i
;

2592 
	}
}

2596 
JSAtom
 
	$__JS_NewAtom
(
JSRuÁime
 *
¹
, 
JSSŒšg
 *
¡r
, 
©om_ty³
)

2598 
ušt32_t
 
h
, 
h1
, 
i
;

2599 
JSAtomSŒuù
 *
p
;

2600 
Ën
;

2603 
	`´štf
("__JS_NewAtom: "); 
	`JS_DumpSŒšg
(
¹
, 
¡r
);…rintf("\n");

2605 ià(
©om_ty³
 < 
JS_ATOM_TYPE_SYMBOL
) {

2607 ià(
¡r
->
©om_ty³
 ==‡tom_type) {

2609 
i
 = 
	`js_g‘_©om_šdex
(
¹
, 
¡r
);

2611 ià(
	`__JS_AtomIsCÚ¡
(
i
))

2612 
¡r
->
h—d”
.
»f_couÁ
--;

2613  
i
;

2616 
Ën
 = 
¡r
->len;

2617 
h
 = 
	`hash_¡ršg
(
¡r
, 
©om_ty³
);

2618 
h
 &ğ
JS_ATOM_HASH_MASK
;

2619 
h1
 = 
h
 & (
¹
->
©om_hash_size
 - 1);

2620 
i
 = 
¹
->
©om_hash
[
h1
];

2621 
i
 != 0) {

2622 
p
 = 
¹
->
©om_¬¿y
[
i
];

2623 ià(
p
->
hash
 =ğ
h
 &&

2624 
p
->
©om_ty³
 ==‡tom_type &&

2625 
p
->
Ën
 ==†en &&

2626 
	`js_¡ršg_memcmp
(
p
, 
¡r
, 
Ën
) == 0) {

2627 ià(!
	`__JS_AtomIsCÚ¡
(
i
))

2628 
p
->
h—d”
.
»f_couÁ
++;

2629 
dÚe
;

2631 
i
 = 
p
->
hash_Ãxt
;

2634 
h1
 = 0;

2635 ià(
©om_ty³
 =ğ
JS_ATOM_TYPE_SYMBOL
) {

2636 
h
 = 
JS_ATOM_HASH_SYMBOL
;

2638 
h
 = 
JS_ATOM_HASH_PRIVATE
;

2639 
©om_ty³
 = 
JS_ATOM_TYPE_SYMBOL
;

2643 ià(
¹
->
©om_ä“_šdex
 == 0) {

2645 
ušt32_t
 
Ãw_size
, 
¡¬t
;

2646 
JSAtomSŒuù
 **
Ãw_¬¿y
;

2652 
Ãw_size
 = 
	`max_št
(211, 
¹
->
©om_size
 * 3 / 2);

2653 ià(
Ãw_size
 > 
JS_ATOM_MAX
)

2654 
ç
;

2656 
Ãw_¬¿y
 = 
	`js_»®loc_¹
(
¹
,„t->
©om_¬¿y
, (*Ãw_¬¿yè* 
Ãw_size
);

2657 ià(!
Ãw_¬¿y
)

2658 
ç
;

2660 
¡¬t
 = 
¹
->
©om_size
;

2661 ià(
¡¬t
 == 0) {

2663 
p
 = 
	`js_m®locz_¹
(
¹
, (
JSAtomSŒuù
));

2664 ià(!
p
) {

2665 
	`js_ä“_¹
(
¹
, 
Ãw_¬¿y
);

2666 
ç
;

2668 
p
->
h—d”
.
»f_couÁ
 = 1;

2669 
p
->
©om_ty³
 = 
JS_ATOM_TYPE_SYMBOL
;

2670 #ifdeà
DUMP_LEAKS


2671 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
¡ršg_li¡
);

2673 
Ãw_¬¿y
[0] = 
p
;

2674 
¹
->
©om_couÁ
++;

2675 
¡¬t
 = 1;

2677 
¹
->
©om_size
 = 
Ãw_size
;

2678 
¹
->
©om_¬¿y
 = 
Ãw_¬¿y
;

2679 
¹
->
©om_ä“_šdex
 = 
¡¬t
;

2680 
i
 = 
¡¬t
; i < 
Ãw_size
; i++) {

2681 
ušt32_t
 
Ãxt
;

2682 ià(
i
 =ğ(
Ãw_size
 - 1))

2683 
Ãxt
 = 0;

2685 
Ãxt
 = 
i
 + 1;

2686 
¹
->
©om_¬¿y
[
i
] = 
	`©om_£t_ä“
(
Ãxt
);

2690 ià(
¡r
) {

2691 ià(
¡r
->
©om_ty³
 == 0) {

2692 
p
 = 
¡r
;

2693 
p
->
©om_ty³
 =‡tom_type;

2695 
p
 = 
	`js_m®loc_¹
(
¹
, (
JSSŒšg
) +

2696 (
¡r
->
Ën
 << sŒ->
is_wide_ch¬
) +

2697 1 - 
¡r
->
is_wide_ch¬
);

2698 ià(
	`uÆik–y
(!
p
))

2699 
ç
;

2700 
p
->
h—d”
.
»f_couÁ
 = 1;

2701 
p
->
is_wide_ch¬
 = 
¡r
->is_wide_char;

2702 
p
->
Ën
 = 
¡r
->len;

2703 #ifdeà
DUMP_LEAKS


2704 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
¡ršg_li¡
);

2706 
	`memıy
(
p
->
u
.
¡r8
, 
¡r
->u.¡r8, (¡r->
Ën
 << sŒ->
is_wide_ch¬
) +

2707 1 - 
¡r
->
is_wide_ch¬
);

2708 
	`js_ä“_¡ršg
(
¹
, 
¡r
);

2711 
p
 = 
	`js_m®loc_¹
(
¹
, (
JSAtomSŒuù
));

2712 ià(!
p
)

2713  
JS_ATOM_NULL
;

2714 
p
->
h—d”
.
»f_couÁ
 = 1;

2715 
p
->
is_wide_ch¬
 = 1;

2716 
p
->
Ën
 = 0;

2717 #ifdeà
DUMP_LEAKS


2718 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
¡ršg_li¡
);

2723 
i
 = 
¹
->
©om_ä“_šdex
;

2724 
¹
->
©om_ä“_šdex
 = 
	`©om_g‘_ä“
Ôt->
©om_¬¿y
[
i
]);

2725 
¹
->
©om_¬¿y
[
i
] = 
p
;

2727 
p
->
hash
 = 
h
;

2728 
p
->
hash_Ãxt
 = 
i
;

2729 
p
->
©om_ty³
 =‡tom_type;

2731 
¹
->
©om_couÁ
++;

2733 ià(
©om_ty³
 !ğ
JS_ATOM_TYPE_SYMBOL
) {

2734 
p
->
hash_Ãxt
 = 
¹
->
©om_hash
[
h1
];

2735 
¹
->
©om_hash
[
h1
] = 
i
;

2736 ià(
	`uÆik–y
(
¹
->
©om_couÁ
 >ğ¹->
©om_couÁ_»size
))

2737 
	`JS_ResizeAtomHash
(
¹
,„t->
©om_hash_size
 * 2);

2741  
i
;

2743 
ç
:

2744 
i
 = 
JS_ATOM_NULL
;

2745 
dÚe
:

2746 ià(
¡r
)

2747 
	`js_ä“_¡ršg
(
¹
, 
¡r
);

2748  
i
;

2749 
	}
}

2752 
JSAtom
 
	$__JS_NewAtomIn™
(
JSRuÁime
 *
¹
, cÚ¡ *
¡r
, 
Ën
,

2753 
©om_ty³
)

2755 
JSSŒšg
 *
p
;

2756 
p
 = 
	`js_®loc_¡ršg_¹
(
¹
, 
Ën
, 0);

2757 ià(!
p
)

2758  
JS_ATOM_NULL
;

2759 
	`memıy
(
p
->
u
.
¡r8
, 
¡r
, 
Ën
);

2760 
p
->
u
.
¡r8
[
Ën
] = '\0';

2761  
	`__JS_NewAtom
(
¹
, 
p
, 
©om_ty³
);

2762 
	}
}

2764 
JSAtom
 
	$__JS_FšdAtom
(
JSRuÁime
 *
¹
, cÚ¡ *
¡r
, 
size_t
 
Ën
,

2765 
©om_ty³
)

2767 
ušt32_t
 
h
, 
h1
, 
i
;

2768 
JSAtomSŒuù
 *
p
;

2770 
h
 = 
	`hash_¡ršg8
((cÚ¡ 
ušt8_t
 *)
¡r
, 
Ën
, 
JS_ATOM_TYPE_STRING
);

2771 
h
 &ğ
JS_ATOM_HASH_MASK
;

2772 
h1
 = 
h
 & (
¹
->
©om_hash_size
 - 1);

2773 
i
 = 
¹
->
©om_hash
[
h1
];

2774 
i
 != 0) {

2775 
p
 = 
¹
->
©om_¬¿y
[
i
];

2776 ià(
p
->
hash
 =ğ
h
 &&

2777 
p
->
©om_ty³
 =ğ
JS_ATOM_TYPE_STRING
 &&

2778 
p
->
Ën
 ==†en &&

2779 
p
->
is_wide_ch¬
 == 0 &&

2780 
	`memcmp
(
p
->
u
.
¡r8
, 
¡r
, 
Ën
) == 0) {

2781 ià(!
	`__JS_AtomIsCÚ¡
(
i
))

2782 
p
->
h—d”
.
»f_couÁ
++;

2783  
i
;

2785 
i
 = 
p
->
hash_Ãxt
;

2787  
JS_ATOM_NULL
;

2788 
	}
}

2790 
	$JS_F»eAtomSŒuù
(
JSRuÁime
 *
¹
, 
JSAtomSŒuù
 *
p
)

2793 ià(
	`uÆik–y
(
i
 =ğ
JS_ATOM_NULL
)) {

2794 
p
->
h—d”
.
»f_couÁ
 = 
INT32_MAX
 / 2;

2798 
ušt32_t
 
i
 = 
p
->
hash_Ãxt
;

2799 ià(
p
->
©om_ty³
 !ğ
JS_ATOM_TYPE_SYMBOL
) {

2800 
JSAtomSŒuù
 *
p0
, *
p1
;

2801 
ušt32_t
 
h0
;

2803 
h0
 = 
p
->
hash
 & (
¹
->
©om_hash_size
 - 1);

2804 
i
 = 
¹
->
©om_hash
[
h0
];

2805 
p1
 = 
¹
->
©om_¬¿y
[
i
];

2806 ià(
p1
 =ğ
p
) {

2807 
¹
->
©om_hash
[
h0
] = 
p1
->
hash_Ãxt
;

2810 
	`as£¹
(
i
 != 0);

2811 
p0
 = 
p1
;

2812 
i
 = 
p1
->
hash_Ãxt
;

2813 
p1
 = 
¹
->
©om_¬¿y
[
i
];

2814 ià(
p1
 =ğ
p
) {

2815 
p0
->
hash_Ãxt
 = 
p1
->hash_next;

2822 
¹
->
©om_¬¿y
[
i
] = 
	`©om_£t_ä“
Ôt->
©om_ä“_šdex
);

2823 
¹
->
©om_ä“_šdex
 = 
i
;

2825 #ifdeà
DUMP_LEAKS


2826 
	`li¡_d–
(&
p
->
lšk
);

2828 
	`js_ä“_¹
(
¹
, 
p
);

2829 
¹
->
©om_couÁ
--;

2830 
	`as£¹
(
¹
->
©om_couÁ
 >= 0);

2831 
	}
}

2833 
	$__JS_F»eAtom
(
JSRuÁime
 *
¹
, 
ušt32_t
 
i
)

2835 
JSAtomSŒuù
 *
p
;

2837 
p
 = 
¹
->
©om_¬¿y
[
i
];

2838 ià(--
p
->
h—d”
.
»f_couÁ
 > 0)

2840 
	`JS_F»eAtomSŒuù
(
¹
, 
p
);

2841 
	}
}

2844 
JSAtom
 
	$JS_NewAtomSŒ
(
JSCÚ‹xt
 *
ùx
, 
JSSŒšg
 *
p
)

2846 
JSRuÁime
 *
¹
 = 
ùx
->rt;

2847 
ušt32_t
 
n
;

2848 ià(
	`is_num_¡ršg
(&
n
, 
p
)) {

2849 ià(
n
 <ğ
JS_ATOM_MAX_INT
) {

2850 
	`js_ä“_¡ršg
(
¹
, 
p
);

2851  
	`__JS_AtomFromUIÁ32
(
n
);

2855  
	`__JS_NewAtom
(
¹
, 
p
, 
JS_ATOM_TYPE_STRING
);

2856 
	}
}

2858 
JSAtom
 
	$JS_NewAtomL’
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
, 
size_t
 
Ën
)

2860 
JSV®ue
 
v®
;

2862 ià(
Ën
 =ğ0 || !
	`is_dig™
(*
¡r
)) {

2863 
JSAtom
 
©om
 = 
	`__JS_FšdAtom
(
ùx
->
¹
, 
¡r
, 
Ën
, 
JS_ATOM_TYPE_STRING
);

2864 ià(
©om
)

2865  
©om
;

2867 
v®
 = 
	`JS_NewSŒšgL’
(
ùx
, 
¡r
, 
Ën
);

2868 ià(
	`JS_IsExû±iÚ
(
v®
))

2869  
JS_ATOM_NULL
;

2870  
	`JS_NewAtomSŒ
(
ùx
, 
	`JS_VALUE_GET_STRING
(
v®
));

2871 
	}
}

2873 
JSAtom
 
	$JS_NewAtom
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
)

2875  
	`JS_NewAtomL’
(
ùx
, 
¡r
, 
	`¡¾’
(str));

2876 
	}
}

2878 
JSAtom
 
	$JS_NewAtomUIÁ32
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 
n
)

2880 ià(
n
 <ğ
JS_ATOM_MAX_INT
) {

2881  
	`__JS_AtomFromUIÁ32
(
n
);

2883 
buf
[11];

2884 
JSV®ue
 
v®
;

2885 
	`¢´štf
(
buf
, (buf), "%u", 
n
);

2886 
v®
 = 
	`JS_NewSŒšg
(
ùx
, 
buf
);

2887 ià(
	`JS_IsExû±iÚ
(
v®
))

2888  
JS_ATOM_NULL
;

2889  
	`__JS_NewAtom
(
ùx
->
¹
, 
	`JS_VALUE_GET_STRING
(
v®
),

2890 
JS_ATOM_TYPE_STRING
);

2892 
	}
}

2894 
JSAtom
 
	$JS_NewAtomIÁ64
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 
n
)

2896 ià((
ušt64_t
)
n
 <ğ
JS_ATOM_MAX_INT
) {

2897  
	`__JS_AtomFromUIÁ32
((
ušt32_t
)
n
);

2899 
buf
[24];

2900 
JSV®ue
 
v®
;

2901 
	`¢´štf
(
buf
, (buf), "%" 
PRId64
 , 
n
);

2902 
v®
 = 
	`JS_NewSŒšg
(
ùx
, 
buf
);

2903 ià(
	`JS_IsExû±iÚ
(
v®
))

2904  
JS_ATOM_NULL
;

2905  
	`__JS_NewAtom
(
ùx
->
¹
, 
	`JS_VALUE_GET_STRING
(
v®
),

2906 
JS_ATOM_TYPE_STRING
);

2908 
	}
}

2911 
JSV®ue
 
	$JS_NewSymbŞ
(
JSCÚ‹xt
 *
ùx
, 
JSSŒšg
 *
p
, 
©om_ty³
)

2913 
JSRuÁime
 *
¹
 = 
ùx
->rt;

2914 
JSAtom
 
©om
;

2915 
©om
 = 
	`__JS_NewAtom
(
¹
, 
p
, 
©om_ty³
);

2916 ià(
©om
 =ğ
JS_ATOM_NULL
)

2917  
	`JS_ThrowOutOfMemÜy
(
ùx
);

2918  
	`JS_MKPTR
(
JS_TAG_SYMBOL
, 
¹
->
©om_¬¿y
[
©om
]);

2919 
	}
}

2922 
JSV®ue
 
	$JS_NewSymbŞFromAtom
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
desü
,

2923 
©om_ty³
)

2925 
JSRuÁime
 *
¹
 = 
ùx
->rt;

2926 
JSSŒšg
 *
p
;

2928 
	`as£¹
(!
	`__JS_AtomIsTaggedIÁ
(
desü
));

2929 
	`as£¹
(
desü
 < 
¹
->
©om_size
);

2930 
p
 = 
¹
->
©om_¬¿y
[
desü
];

2931 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
));

2932  
	`JS_NewSymbŞ
(
ùx
, 
p
, 
©om_ty³
);

2933 
	}
}

2935 
	#ATOM_GET_STR_BUF_SIZE
 64

	)

2938 cÚ¡ *
	$JS_AtomG‘SŒRT
(
JSRuÁime
 *
¹
, *
buf
, 
buf_size
,

2939 
JSAtom
 
©om
)

2941 ià(
	`__JS_AtomIsTaggedIÁ
(
©om
)) {

2942 
	`¢´štf
(
buf
, 
buf_size
, "%u", 
	`__JS_AtomToUIÁ32
(
©om
));

2944 
JSAtomSŒuù
 *
p
;

2945 
	`as£¹
(
©om
 < 
¹
->
©om_size
);

2946 ià(
©om
 =ğ
JS_ATOM_NULL
) {

2947 
	`¢´štf
(
buf
, 
buf_size
, "<null>");

2949 
i
, 
c
;

2950 *
q
;

2951 
JSSŒšg
 *
¡r
;

2953 
q
 = 
buf
;

2954 
p
 = 
¹
->
©om_¬¿y
[
©om
];

2955 
	`as£¹
(!
	`©om_is_ä“
(
p
));

2956 
¡r
 = 
p
;

2957 ià(
¡r
) {

2958 ià(!
¡r
->
is_wide_ch¬
) {

2960 
c
 = 0;

2961 
i
 = 0; i < 
¡r
->
Ën
; i++) {

2962 
c
 |ğ
¡r
->
u
.
¡r8
[
i
];

2964 ià(
c
 < 0x80)

2965  (cÚ¡ *)
¡r
->
u
.
¡r8
;

2967 
i
 = 0; i < 
¡r
->
Ën
; i++) {

2968 ià(
¡r
->
is_wide_ch¬
)

2969 
c
 = 
¡r
->
u
.
¡r16
[
i
];

2971 
c
 = 
¡r
->
u
.
¡r8
[
i
];

2972 ià((
q
 - 
buf
è>ğ
buf_size
 - 
UTF8_CHAR_LEN_MAX
)

2974 ià(
c
 < 128) {

2975 *
q
++ = 
c
;

2977 
q
 +ğ
	`unicode_to_utf8
((
ušt8_t
 *)q, 
c
);

2981 *
q
 = '\0';

2984  
buf
;

2985 
	}
}

2987 cÚ¡ *
	$JS_AtomG‘SŒ
(
JSCÚ‹xt
 *
ùx
, *
buf
, 
buf_size
, 
JSAtom
 
©om
)

2989  
	`JS_AtomG‘SŒRT
(
ùx
->
¹
, 
buf
, 
buf_size
, 
©om
);

2990 
	}
}

2992 
JSV®ue
 
	$__JS_AtomToV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
, 
BOOL
 
fÜû_¡ršg
)

2994 
buf
[
ATOM_GET_STR_BUF_SIZE
];

2996 ià(
	`__JS_AtomIsTaggedIÁ
(
©om
)) {

2997 
	`¢´štf
(
buf
, (buf), "%u", 
	`__JS_AtomToUIÁ32
(
©om
));

2998  
	`JS_NewSŒšg
(
ùx
, 
buf
);

3000 
JSRuÁime
 *
¹
 = 
ùx
->rt;

3001 
JSAtomSŒuù
 *
p
;

3002 
	`as£¹
(
©om
 < 
¹
->
©om_size
);

3003 
p
 = 
¹
->
©om_¬¿y
[
©om
];

3004 ià(
p
->
©om_ty³
 =ğ
JS_ATOM_TYPE_STRING
) {

3005 
»t_¡ršg
;

3006 } ià(
fÜû_¡ršg
) {

3007 ià(
p
->
Ën
 =ğ0 &&…->
is_wide_ch¬
 != 0) {

3009 
p
 = 
¹
->
©om_¬¿y
[
JS_ATOM_em±y_¡ršg
];

3011 
»t_¡ršg
:

3012  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
));

3014  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_SYMBOL
, 
p
));

3017 
	}
}

3019 
JSV®ue
 
	$JS_AtomToV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

3021  
	`__JS_AtomToV®ue
(
ùx
, 
©om
, 
FALSE
);

3022 
	}
}

3024 
JSV®ue
 
	$JS_AtomToSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

3026  
	`__JS_AtomToV®ue
(
ùx
, 
©om
, 
TRUE
);

3027 
	}
}

3031 
BOOL
 
	$JS_AtomIsA¼ayIndex
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
pv®
, 
JSAtom
 
©om
)

3033 ià(
	`__JS_AtomIsTaggedIÁ
(
©om
)) {

3034 *
pv®
 = 
	`__JS_AtomToUIÁ32
(
©om
);

3035  
TRUE
;

3037 
JSRuÁime
 *
¹
 = 
ùx
->rt;

3038 
JSAtomSŒuù
 *
p
;

3039 
ušt32_t
 
v®
;

3041 
	`as£¹
(
©om
 < 
¹
->
©om_size
);

3042 
p
 = 
¹
->
©om_¬¿y
[
©om
];

3043 ià(
p
->
©om_ty³
 =ğ
JS_ATOM_TYPE_STRING
 &&

3044 
	`is_num_¡ršg
(&
v®
, 
p
) && val != -1) {

3045 *
pv®
 = 
v®
;

3046  
TRUE
;

3048 *
pv®
 = 0;

3049  
FALSE
;

3052 
	}
}

3057 
JSV®ue
 
	$JS_AtomIsNum”icIndex1
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

3059 
JSRuÁime
 *
¹
 = 
ùx
->rt;

3060 
JSAtomSŒuù
 *
p1
;

3061 
JSSŒšg
 *
p
;

3062 
c
, 
Ën
, 
»t
;

3063 
JSV®ue
 
num
, 
¡r
;

3065 ià(
	`__JS_AtomIsTaggedIÁ
(
©om
))

3066  
	`JS_NewIÁ32
(
ùx
, 
	`__JS_AtomToUIÁ32
(
©om
));

3067 
	`as£¹
(
©om
 < 
¹
->
©om_size
);

3068 
p1
 = 
¹
->
©om_¬¿y
[
©om
];

3069 ià(
p1
->
©om_ty³
 !ğ
JS_ATOM_TYPE_STRING
)

3070  
JS_UNDEFINED
;

3071 
p
 = 
p1
;

3072 
Ën
 = 
p
->len;

3073 ià(
p
->
is_wide_ch¬
) {

3074 cÚ¡ 
ušt16_t
 *
r
 = 
p
->
u
.
¡r16
, *
r_’d
 =…->u.¡r16 + 
Ën
;

3075 ià(
r
 >ğ
r_’d
)

3076  
JS_UNDEFINED
;

3077 
c
 = *
r
;

3078 ià(
c
 == '-') {

3079 ià(
r
 >ğ
r_’d
)

3080  
JS_UNDEFINED
;

3081 
r
++;

3082 
c
 = *
r
;

3084 ià(
c
 =ğ'0' && 
Ën
 == 2)

3085 
mšus_z”o
;

3088 ià(!
	`is_num
(
c
)) {

3090 cÚ¡ 
ušt16_t
 
nfš™y16
[7] = { 'n', 'f', 'i', 'n', 'i', 't', 'y' };

3091 ià(!(
c
 =='I' && (
r_’d
 - 
r
) == 8 &&

3092 !
	`memcmp
(
r
 + 1, 
nfš™y16
, (nfinity16))))

3093  
JS_UNDEFINED
;

3096 cÚ¡ 
ušt8_t
 *
r
 = 
p
->
u
.
¡r8
, *
r_’d
 =…->u.¡r8 + 
Ën
;

3097 ià(
r
 >ğ
r_’d
)

3098  
JS_UNDEFINED
;

3099 
c
 = *
r
;

3100 ià(
c
 == '-') {

3101 ià(
r
 >ğ
r_’d
)

3102  
JS_UNDEFINED
;

3103 
r
++;

3104 
c
 = *
r
;

3106 ià(
c
 =ğ'0' && 
Ën
 == 2) {

3107 
mšus_z”o
:

3108  
	`__JS_NewFlßt64
(
ùx
, -0.0);

3111 ià(!
	`is_num
(
c
)) {

3112 ià(!(
c
 =='I' && (
r_’d
 - 
r
) == 8 &&

3113 !
	`memcmp
(
r
 + 1, "nfinity", 7)))

3114  
JS_UNDEFINED
;

3120 
num
 = 
	`JS_ToNumb”
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
));

3121 ià(
	`JS_IsExû±iÚ
(
num
))

3122  
num
;

3123 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
num
);

3124 ià(
	`JS_IsExû±iÚ
(
¡r
)) {

3125 
	`JS_F»eV®ue
(
ùx
, 
num
);

3126  
¡r
;

3128 
»t
 = 
	`js_¡ršg_com·»
(
ùx
, 
p
, 
	`JS_VALUE_GET_STRING
(
¡r
));

3129 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

3130 ià(
»t
 == 0) {

3131  
num
;

3133 
	`JS_F»eV®ue
(
ùx
, 
num
);

3134  
JS_UNDEFINED
;

3136 
	}
}

3139 
	$JS_AtomIsNum”icIndex
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

3141 
JSV®ue
 
num
;

3142 
num
 = 
	`JS_AtomIsNum”icIndex1
(
ùx
, 
©om
);

3143 ià(
	`lik–y
(
	`JS_IsUndefšed
(
num
)))

3144  
FALSE
;

3145 ià(
	`JS_IsExû±iÚ
(
num
))

3147 
	`JS_F»eV®ue
(
ùx
, 
num
);

3148  
TRUE
;

3149 
	}
}

3151 
	$JS_F»eAtom
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
v
)

3153 ià(!
	`__JS_AtomIsCÚ¡
(
v
))

3154 
	`__JS_F»eAtom
(
ùx
->
¹
, 
v
);

3155 
	}
}

3157 
	$JS_F»eAtomRT
(
JSRuÁime
 *
¹
, 
JSAtom
 
v
)

3159 ià(!
	`__JS_AtomIsCÚ¡
(
v
))

3160 
	`__JS_F»eAtom
(
¹
, 
v
);

3161 
	}
}

3164 
BOOL
 
	$JS_AtomSymbŞHasDesütiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
v
)

3166 
JSRuÁime
 *
¹
;

3167 
JSAtomSŒuù
 *
p
;

3169 
¹
 = 
ùx
->rt;

3170 ià(
	`__JS_AtomIsTaggedIÁ
(
v
))

3171  
FALSE
;

3172 
p
 = 
¹
->
©om_¬¿y
[
v
];

3173  (((
p
->
©om_ty³
 =ğ
JS_ATOM_TYPE_SYMBOL
 &&

3174 
p
->
hash
 =ğ
JS_ATOM_HASH_SYMBOL
) ||

3175 
p
->
©om_ty³
 =ğ
JS_ATOM_TYPE_GLOBAL_SYMBOL
) &&

3176 !(
p
->
Ën
 =ğ0 &&…->
is_wide_ch¬
 != 0));

3177 
	}
}

3179 
__maybe_unu£d
 
	$´št_©om
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

3181 
buf
[
ATOM_GET_STR_BUF_SIZE
];

3182 cÚ¡ *
p
;

3183 
i
;

3187 
p
 = 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
©om
);

3188 
i
 = 0; 
p
[i]; i++) {

3189 
c
 = ()
p
[
i
];

3190 ià(!((
c
 >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') ||

3191 (
c
 =ğ'_' || c =ğ'$'è|| (ø>ğ'0' && c <ğ'9' && 
i
 > 0)))

3194 ià(
i
 > 0 && 
p
[i] == '\0') {

3195 
	`´štf
("%s", 
p
);

3197 
	`putch¬
('"');

3198 
	`´štf
("%.*s", 
i
, 
p
);

3199 ; 
p
[
i
]; i++) {

3200 
c
 = ()
p
[
i
];

3201 ià(
c
 == '\"' || c == '\\') {

3202 
	`putch¬
('\\');

3203 
	`putch¬
(
c
);

3204 } ià(
c
 >= ' ' && c <= 126) {

3205 
	`putch¬
(
c
);

3206 } ià(
c
 == '\n') {

3207 
	`putch¬
('\\');

3208 
	`putch¬
('n');

3210 
	`´štf
("\\u%04x", 
c
);

3213 
	`putch¬
('\"');

3215 
	}
}

3218 cÚ¡ *
	$JS_AtomToCSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

3220 
JSV®ue
 
¡r
;

3221 cÚ¡ *
c¡r
;

3223 
¡r
 = 
	`JS_AtomToSŒšg
(
ùx
, 
©om
);

3224 ià(
	`JS_IsExû±iÚ
(
¡r
))

3225  
NULL
;

3226 
c¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
¡r
);

3227 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

3228  
c¡r
;

3229 
	}
}

3232 
JSAtom
 
	$js_©om_cÚÿt_¡r
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
, cÚ¡ *
¡r1
)

3234 
JSV®ue
 
¡r
;

3235 
JSAtom
 
©om
;

3236 cÚ¡ *
c¡r
;

3237 *
c¡r2
;

3238 
size_t
 
Ën
, 
Ën1
;

3240 
¡r
 = 
	`JS_AtomToSŒšg
(
ùx
, 
Çme
);

3241 ià(
	`JS_IsExû±iÚ
(
¡r
))

3242  
JS_ATOM_NULL
;

3243 
c¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
¡r
);

3244 ià(!
c¡r
)

3245 
ç
;

3246 
Ën1
 = 
	`¡¾’
(
¡r1
);

3247 
c¡r2
 = 
	`js_m®loc
(
ùx
, 
Ën
 + 
Ën1
 + 1);

3248 ià(!
c¡r2
)

3249 
ç
;

3250 
	`memıy
(
c¡r2
, 
c¡r
, 
Ën
);

3251 
	`memıy
(
c¡r2
 + 
Ën
, 
¡r1
, 
Ën1
);

3252 
c¡r2
[
Ën
 + 
Ën1
] = '\0';

3253 
©om
 = 
	`JS_NewAtomL’
(
ùx
, 
c¡r2
, 
Ën
 + 
Ën1
);

3254 
	`js_ä“
(
ùx
, 
c¡r2
);

3255 
	`JS_F»eCSŒšg
(
ùx
, 
c¡r
);

3256 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

3257  
©om
;

3258 
ç
:

3259 
	`JS_F»eCSŒšg
(
ùx
, 
c¡r
);

3260 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

3261  
JS_ATOM_NULL
;

3262 
	}
}

3264 
JSAtom
 
	$js_©om_cÚÿt_num
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
, 
ušt32_t
 
n
)

3266 
buf
[16];

3267 
	`¢´štf
(
buf
, (buf), "%u", 
n
);

3268  
	`js_©om_cÚÿt_¡r
(
ùx
, 
Çme
, 
buf
);

3269 
	}
}

3271 
šlše
 
BOOL
 
	$JS_IsEm±ySŒšg
(
JSV®ueCÚ¡
 
v
)

3273  
	`JS_VALUE_GET_TAG
(
v
è=ğ
JS_TAG_STRING
 && 
	`JS_VALUE_GET_STRING
(v)->
Ën
 == 0;

3274 
	}
}

3279 
JSCÏssID
 
	$JS_NewCÏssID
(
JSCÏssID
 *
pşass_id
)

3281 
JSCÏssID
 
şass_id
;

3283 
şass_id
 = *
pşass_id
;

3284 ià(
şass_id
 == 0) {

3285 
şass_id
 = 
js_şass_id_®loc
++;

3286 *
pşass_id
 = 
şass_id
;

3288  
şass_id
;

3289 
	}
}

3291 
BOOL
 
	$JS_IsRegi¡”edCÏss
(
JSRuÁime
 *
¹
, 
JSCÏssID
 
şass_id
)

3293  (
şass_id
 < 
¹
->
şass_couÁ
 &&

3294 
¹
->
şass_¬¿y
[
şass_id
].class_id != 0);

3295 
	}
}

3299 
	$JS_NewCÏss1
(
JSRuÁime
 *
¹
, 
JSCÏssID
 
şass_id
,

3300 cÚ¡ 
JSCÏssDef
 *
şass_def
, 
JSAtom
 
Çme
)

3302 
Ãw_size
, 
i
;

3303 
JSCÏss
 *
ş
, *
Ãw_şass_¬¿y
;

3304 
li¡_h—d
 *
–
;

3306 ià(
şass_id
 < 
¹
->
şass_couÁ
 &&

3307 
¹
->
şass_¬¿y
[
şass_id
].class_id != 0)

3310 ià(
şass_id
 >ğ
¹
->
şass_couÁ
) {

3311 
Ãw_size
 = 
	`max_št
(
JS_CLASS_INIT_COUNT
,

3312 
	`max_št
(
şass_id
 + 1, 
¹
->
şass_couÁ
 * 3 / 2));

3315 
	`li¡_fÜ_—ch
(
–
, &
¹
->
cÚ‹xt_li¡
) {

3316 
JSCÚ‹xt
 *
ùx
 = 
	`li¡_’Œy
(
–
, JSCÚ‹xt, 
lšk
);

3317 
JSV®ue
 *
Ãw_b
;

3318 
Ãw_b
 = 
	`js_»®loc_¹
(
¹
, 
ùx
->
şass_´Ùo
,

3319 (
ùx
->
şass_´Ùo
[0]è* 
Ãw_size
);

3320 ià(!
Ãw_b
)

3322 
i
 = 
¹
->
şass_couÁ
; i < 
Ãw_size
; i++)

3323 
Ãw_b
[
i
] = 
JS_NULL
;

3324 
ùx
->
şass_´Ùo
 = 
Ãw_b
;

3327 
Ãw_şass_¬¿y
 = 
	`js_»®loc_¹
(
¹
,„t->
şass_¬¿y
,

3328 (
JSCÏss
è* 
Ãw_size
);

3329 ià(!
Ãw_şass_¬¿y
)

3331 
	`mem£t
(
Ãw_şass_¬¿y
 + 
¹
->
şass_couÁ
, 0,

3332 (
Ãw_size
 - 
¹
->
şass_couÁ
è* (
JSCÏss
));

3333 
¹
->
şass_¬¿y
 = 
Ãw_şass_¬¿y
;

3334 
¹
->
şass_couÁ
 = 
Ãw_size
;

3336 
ş
 = &
¹
->
şass_¬¿y
[
şass_id
];

3337 
ş
->
şass_id
 = class_id;

3338 
ş
->
şass_Çme
 = 
	`JS_DupAtomRT
(
¹
, 
Çme
);

3339 
ş
->
fš®iz”
 = 
şass_def
->finalizer;

3340 
ş
->
gc_m¬k
 = 
şass_def
->gc_mark;

3341 
ş
->
ÿÎ
 = 
şass_def
->call;

3342 
ş
->
exÙic
 = 
şass_def
->exotic;

3344 
	}
}

3346 
	$JS_NewCÏss
(
JSRuÁime
 *
¹
, 
JSCÏssID
 
şass_id
, cÚ¡ 
JSCÏssDef
 *
şass_def
)

3348 
»t
, 
Ën
;

3349 
JSAtom
 
Çme
;

3351 
Ën
 = 
	`¡¾’
(
şass_def
->
şass_Çme
);

3352 
Çme
 = 
	`__JS_FšdAtom
(
¹
, 
şass_def
->
şass_Çme
, 
Ën
, 
JS_ATOM_TYPE_STRING
);

3353 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

3354 
Çme
 = 
	`__JS_NewAtomIn™
(
¹
, 
şass_def
->
şass_Çme
, 
Ën
, 
JS_ATOM_TYPE_STRING
);

3355 ià(
Çme
 =ğ
JS_ATOM_NULL
)

3358 
»t
 = 
	`JS_NewCÏss1
(
¹
, 
şass_id
, 
şass_def
, 
Çme
);

3359 
	`JS_F»eAtomRT
(
¹
, 
Çme
);

3360  
»t
;

3361 
	}
}

3363 
JSV®ue
 
	$js_Ãw_¡ršg8
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt8_t
 *
buf
, 
Ën
)

3365 
JSSŒšg
 *
¡r
;

3367 ià(
Ën
 <= 0) {

3368  
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

3370 
¡r
 = 
	`js_®loc_¡ršg
(
ùx
, 
Ën
, 0);

3371 ià(!
¡r
)

3372  
JS_EXCEPTION
;

3373 
	`memıy
(
¡r
->
u
.
¡r8
, 
buf
, 
Ën
);

3374 
¡r
->
u
.
¡r8
[
Ën
] = '\0';

3375  
	`JS_MKPTR
(
JS_TAG_STRING
, 
¡r
);

3376 
	}
}

3378 
JSV®ue
 
	$js_Ãw_¡ršg16
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt16_t
 *
buf
, 
Ën
)

3380 
JSSŒšg
 *
¡r
;

3381 
¡r
 = 
	`js_®loc_¡ršg
(
ùx
, 
Ën
, 1);

3382 ià(!
¡r
)

3383  
JS_EXCEPTION
;

3384 
	`memıy
(
¡r
->
u
.
¡r16
, 
buf
, 
Ën
 * 2);

3385  
	`JS_MKPTR
(
JS_TAG_STRING
, 
¡r
);

3386 
	}
}

3388 
JSV®ue
 
	$js_Ãw_¡ršg_ch¬
(
JSCÚ‹xt
 *
ùx
, 
ušt16_t
 
c
)

3390 ià(
c
 < 0x100) {

3391 
ušt8_t
 
ch8
 = 
c
;

3392  
	`js_Ãw_¡ršg8
(
ùx
, &
ch8
, 1);

3394 
ušt16_t
 
ch16
 = 
c
;

3395  
	`js_Ãw_¡ršg16
(
ùx
, &
ch16
, 1);

3397 
	}
}

3399 
JSV®ue
 
	$js_sub_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSSŒšg
 *
p
, 
¡¬t
, 
’d
)

3401 
Ën
 = 
’d
 - 
¡¬t
;

3402 ià(
¡¬t
 =ğ0 && 
’d
 =ğ
p
->
Ën
) {

3403  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
));

3405 ià(
p
->
is_wide_ch¬
 && 
Ën
 > 0) {

3406 
JSSŒšg
 *
¡r
;

3407 
i
;

3408 
ušt16_t
 
c
 = 0;

3409 
i
 = 
¡¬t
; i < 
’d
; i++) {

3410 
c
 |ğ
p
->
u
.
¡r16
[
i
];

3412 ià(
c
 > 0xFF)

3413  
	`js_Ãw_¡ršg16
(
ùx
, 
p
->
u
.
¡r16
 + 
¡¬t
, 
Ën
);

3415 
¡r
 = 
	`js_®loc_¡ršg
(
ùx
, 
Ën
, 0);

3416 ià(!
¡r
)

3417  
JS_EXCEPTION
;

3418 
i
 = 0; i < 
Ën
; i++) {

3419 
¡r
->
u
.
¡r8
[
i
] = 
p
->u.
¡r16
[
¡¬t
 + i];

3421 
¡r
->
u
.
¡r8
[
Ën
] = '\0';

3422  
	`JS_MKPTR
(
JS_TAG_STRING
, 
¡r
);

3424  
	`js_Ãw_¡ršg8
(
ùx
, 
p
->
u
.
¡r8
 + 
¡¬t
, 
Ën
);

3426 
	}
}

3428 
	sSŒšgBufãr
 {

3429 
JSCÚ‹xt
 *
	mùx
;

3430 
JSSŒšg
 *
	m¡r
;

3431 
	mËn
;

3432 
	msize
;

3433 
	mis_wide_ch¬
;

3434 
	m”rÜ_¡©us
;

3435 } 
	tSŒšgBufãr
;

3441 
	$¡ršg_bufãr_š™2
(
JSCÚ‹xt
 *
ùx
, 
SŒšgBufãr
 *
s
, 
size
,

3442 
is_wide
)

3444 
s
->
ùx
 = ctx;

3445 
s
->
size
 = size;

3446 
s
->
Ën
 = 0;

3447 
s
->
is_wide_ch¬
 = 
is_wide
;

3448 
s
->
”rÜ_¡©us
 = 0;

3449 
s
->
¡r
 = 
	`js_®loc_¡ršg
(
ùx
, 
size
, 
is_wide
);

3450 ià(
	`uÆik–y
(!
s
->
¡r
)) {

3451 
s
->
size
 = 0;

3452  
s
->
”rÜ_¡©us
 = -1;

3454 #ifdeà
DUMP_LEAKS


3456 
	`li¡_d–
(&
s
->
¡r
->
lšk
);

3459 
	}
}

3461 
šlše
 
	$¡ršg_bufãr_š™
(
JSCÚ‹xt
 *
ùx
, 
SŒšgBufãr
 *
s
, 
size
)

3463  
	`¡ršg_bufãr_š™2
(
ùx
, 
s
, 
size
, 0);

3464 
	}
}

3466 
	$¡ršg_bufãr_ä“
(
SŒšgBufãr
 *
s
)

3468 
	`js_ä“
(
s
->
ùx
, s->
¡r
);

3469 
s
->
¡r
 = 
NULL
;

3470 
	}
}

3472 
	$¡ršg_bufãr_£t_”rÜ
(
SŒšgBufãr
 *
s
)

3474 
	`js_ä“
(
s
->
ùx
, s->
¡r
);

3475 
s
->
¡r
 = 
NULL
;

3476 
s
->
size
 = 0;

3477 
s
->
Ën
 = 0;

3478  
s
->
”rÜ_¡©us
 = -1;

3479 
	}
}

3481 
no_šlše
 
	$¡ršg_bufãr_wid’
(
SŒšgBufãr
 *
s
, 
size
)

3483 
JSSŒšg
 *
¡r
;

3484 
size_t
 
¦ack
;

3485 
i
;

3487 ià(
s
->
”rÜ_¡©us
)

3490 
¡r
 = 
	`js_»®loc2
(
s
->
ùx
, s->¡r, (
JSSŒšg
è+ (
size
 << 1), &
¦ack
);

3491 ià(!
¡r
)

3492  
	`¡ršg_bufãr_£t_”rÜ
(
s
);

3493 
size
 +ğ
¦ack
 >> 1;

3494 
i
 = 
s
->
Ën
; i-- > 0;) {

3495 
¡r
->
u
.
¡r16
[
i
] = sŒ->u.
¡r8
[i];

3497 
s
->
is_wide_ch¬
 = 1;

3498 
s
->
size
 = size;

3499 
s
->
¡r
 = str;

3501 
	}
}

3503 
no_šlše
 
	$¡ršg_bufãr_»®loc
(
SŒšgBufãr
 *
s
, 
Ãw_Ën
, 
c
)

3505 
JSSŒšg
 *
Ãw_¡r
;

3506 
Ãw_size
;

3507 
size_t
 
Ãw_size_by‹s
, 
¦ack
;

3509 ià(
s
->
”rÜ_¡©us
)

3512 ià(
Ãw_Ën
 > 
JS_STRING_LEN_MAX
) {

3513 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "stringoo†ong");

3514  
	`¡ršg_bufãr_£t_”rÜ
(
s
);

3516 
Ãw_size
 = 
	`mš_št
(
	`max_št
(
Ãw_Ën
, 
s
->
size
 * 3 / 2), 
JS_STRING_LEN_MAX
);

3517 ià(!
s
->
is_wide_ch¬
 && 
c
 >= 0x100) {

3518  
	`¡ršg_bufãr_wid’
(
s
, 
Ãw_size
);

3520 
Ãw_size_by‹s
 = (
JSSŒšg
è+ (
Ãw_size
 << 
s
->
is_wide_ch¬
) + 1 - s->is_wide_char;

3521 
Ãw_¡r
 = 
	`js_»®loc2
(
s
->
ùx
, s->
¡r
, 
Ãw_size_by‹s
, &
¦ack
);

3522 ià(!
Ãw_¡r
)

3523  
	`¡ršg_bufãr_£t_”rÜ
(
s
);

3524 
Ãw_size
 = 
	`mš_št
Òew_siz+ (
¦ack
 >> 
s
->
is_wide_ch¬
), 
JS_STRING_LEN_MAX
);

3525 
s
->
size
 = 
Ãw_size
;

3526 
s
->
¡r
 = 
Ãw_¡r
;

3528 
	}
}

3530 
no_šlše
 
	$¡ršg_bufãr_putc_¦ow
(
SŒšgBufãr
 *
s
, 
ušt32_t
 
c
)

3532 ià(
	`uÆik–y
(
s
->
Ën
 >ğs->
size
)) {

3533 ià(
	`¡ršg_bufãr_»®loc
(
s
, s->
Ën
 + 1, 
c
))

3536 ià(
s
->
is_wide_ch¬
) {

3537 
s
->
¡r
->
u
.
¡r16
[s->
Ën
++] = 
c
;

3538 } ià(
c
 < 0x100) {

3539 
s
->
¡r
->
u
.
¡r8
[s->
Ën
++] = 
c
;

3541 ià(
	`¡ršg_bufãr_wid’
(
s
, s->
size
))

3543 
s
->
¡r
->
u
.
¡r16
[s->
Ën
++] = 
c
;

3546 
	}
}

3549 
	$¡ršg_bufãr_putc8
(
SŒšgBufãr
 *
s
, 
ušt32_t
 
c
)

3551 ià(
	`uÆik–y
(
s
->
Ën
 >ğs->
size
)) {

3552 ià(
	`¡ršg_bufãr_»®loc
(
s
, s->
Ën
 + 1, 
c
))

3555 ià(
s
->
is_wide_ch¬
) {

3556 
s
->
¡r
->
u
.
¡r16
[s->
Ën
++] = 
c
;

3558 
s
->
¡r
->
u
.
¡r8
[s->
Ën
++] = 
c
;

3561 
	}
}

3564 
	$¡ršg_bufãr_putc16
(
SŒšgBufãr
 *
s
, 
ušt32_t
 
c
)

3566 ià(
	`lik–y
(
s
->
Ën
 < s->
size
)) {

3567 ià(
s
->
is_wide_ch¬
) {

3568 
s
->
¡r
->
u
.
¡r16
[s->
Ën
++] = 
c
;

3570 } ià(
c
 < 0x100) {

3571 
s
->
¡r
->
u
.
¡r8
[s->
Ën
++] = 
c
;

3575  
	`¡ršg_bufãr_putc_¦ow
(
s
, 
c
);

3576 
	}
}

3579 
	$¡ršg_bufãr_putc
(
SŒšgBufãr
 *
s
, 
ušt32_t
 
c
)

3581 ià(
	`uÆik–y
(
c
 >= 0x10000)) {

3583 
c
 -= 0x10000;

3584 ià(
	`¡ršg_bufãr_putc16
(
s
, (
c
 >> 10) + 0xd800))

3586 
c
 = (c & 0x3ff) + 0xdc00;

3588  
	`¡ršg_bufãr_putc16
(
s
, 
c
);

3589 
	}
}

3591 
	$¡ršg_g‘
(cÚ¡ 
JSSŒšg
 *
p
, 
idx
) {

3592  
p
->
is_wide_ch¬
 ?…->
u
.
¡r16
[
idx
] :…->u.
¡r8
[idx];

3593 
	}
}

3595 
	$¡ršg_g‘c
(cÚ¡ 
JSSŒšg
 *
p
, *
pidx
)

3597 
idx
, 
c
, 
c1
;

3598 
idx
 = *
pidx
;

3599 ià(
p
->
is_wide_ch¬
) {

3600 
c
 = 
p
->
u
.
¡r16
[
idx
++];

3601 ià(
c
 >ğ0xd800 && c < 0xdc00 && 
idx
 < 
p
->
Ën
) {

3602 
c1
 = 
p
->
u
.
¡r16
[
idx
];

3603 ià(
c1
 >= 0xdc00 && c1 < 0xe000) {

3604 
c
 = (((ø& 0x3ffè<< 10è| (
c1
 & 0x3ff)) + 0x10000;

3605 
idx
++;

3609 
c
 = 
p
->
u
.
¡r8
[
idx
++];

3611 *
pidx
 = 
idx
;

3612  
c
;

3613 
	}
}

3615 
	$¡ršg_bufãr_wr™e8
(
SŒšgBufãr
 *
s
, cÚ¡ 
ušt8_t
 *
p
, 
Ën
)

3617 
i
;

3619 ià(
s
->
Ën
 +†’ > s->
size
) {

3620 ià(
	`¡ršg_bufãr_»®loc
(
s
, s->
Ën
 +†en, 0))

3623 ià(
s
->
is_wide_ch¬
) {

3624 
i
 = 0; i < 
Ën
; i++) {

3625 
s
->
¡r
->
u
.
¡r16
[s->
Ën
 + 
i
] = 
p
[i];

3627 
s
->
Ën
 +=†en;

3629 
	`memıy
(&
s
->
¡r
->
u
.
¡r8
[s->
Ën
], 
p
,†en);

3630 
s
->
Ën
 +=†en;

3633 
	}
}

3635 
	$¡ršg_bufãr_wr™e16
(
SŒšgBufãr
 *
s
, cÚ¡ 
ušt16_t
 *
p
, 
Ën
)

3637 
c
 = 0, 
i
;

3639 
i
 = 0; i < 
Ën
; i++) {

3640 
c
 |ğ
p
[
i
];

3642 ià(
s
->
Ën
 +†’ > s->
size
) {

3643 ià(
	`¡ršg_bufãr_»®loc
(
s
, s->
Ën
 +†’, 
c
))

3645 } ià(!
s
->
is_wide_ch¬
 && 
c
 >= 0x100) {

3646 ià(
	`¡ršg_bufãr_wid’
(
s
, s->
size
))

3649 ià(
s
->
is_wide_ch¬
) {

3650 
	`memıy
(&
s
->
¡r
->
u
.
¡r16
[s->
Ën
], 
p
,†en << 1);

3651 
s
->
Ën
 +=†en;

3653 
i
 = 0; i < 
Ën
; i++) {

3654 
s
->
¡r
->
u
.
¡r8
[s->
Ën
 + 
i
] = 
p
[i];

3656 
s
->
Ën
 +=†en;

3659 
	}
}

3662 
	$¡ršg_bufãr_puts8
(
SŒšgBufãr
 *
s
, cÚ¡ *
¡r
)

3664  
	`¡ršg_bufãr_wr™e8
(
s
, (cÚ¡ 
ušt8_t
 *)
¡r
, 
	`¡¾’
(str));

3665 
	}
}

3667 
	$¡ršg_bufãr_cÚÿt
(
SŒšgBufãr
 *
s
, cÚ¡ 
JSSŒšg
 *
p
,

3668 
ušt32_t
 
äom
, ušt32_ˆ
to
)

3670 ià(
to
 <ğ
äom
)

3672 ià(
p
->
is_wide_ch¬
)

3673  
	`¡ršg_bufãr_wr™e16
(
s
, 
p
->
u
.
¡r16
 + 
äom
, 
to
 - from);

3675  
	`¡ršg_bufãr_wr™e8
(
s
, 
p
->
u
.
¡r8
 + 
äom
, 
to
 - from);

3676 
	}
}

3678 
	$¡ršg_bufãr_cÚÿt_v®ue
(
SŒšgBufãr
 *
s
, 
JSV®ueCÚ¡
 
v
)

3680 
JSSŒšg
 *
p
;

3681 
JSV®ue
 
v1
;

3682 
»s
;

3684 ià(
s
->
”rÜ_¡©us
) {

3688 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
v
è!ğ
JS_TAG_STRING
)) {

3689 
v1
 = 
	`JS_ToSŒšg
(
s
->
ùx
, 
v
);

3690 ià(
	`JS_IsExû±iÚ
(
v1
))

3691  
	`¡ršg_bufãr_£t_”rÜ
(
s
);

3692 
p
 = 
	`JS_VALUE_GET_STRING
(
v1
);

3693 
»s
 = 
	`¡ršg_bufãr_cÚÿt
(
s
, 
p
, 0,…->
Ën
);

3694 
	`JS_F»eV®ue
(
s
->
ùx
, 
v1
);

3695  
»s
;

3697 
p
 = 
	`JS_VALUE_GET_STRING
(
v
);

3698  
	`¡ršg_bufãr_cÚÿt
(
s
, 
p
, 0,…->
Ën
);

3699 
	}
}

3701 
	$¡ršg_bufãr_cÚÿt_v®ue_ä“
(
SŒšgBufãr
 *
s
, 
JSV®ue
 
v
)

3703 
JSSŒšg
 *
p
;

3704 
»s
;

3706 ià(
s
->
”rÜ_¡©us
) {

3708 
	`JS_F»eV®ue
(
s
->
ùx
, 
v
);

3711 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
v
è!ğ
JS_TAG_STRING
)) {

3712 
v
 = 
	`JS_ToSŒšgF»e
(
s
->
ùx
, v);

3713 ià(
	`JS_IsExû±iÚ
(
v
))

3714  
	`¡ršg_bufãr_£t_”rÜ
(
s
);

3716 
p
 = 
	`JS_VALUE_GET_STRING
(
v
);

3717 
»s
 = 
	`¡ršg_bufãr_cÚÿt
(
s
, 
p
, 0,…->
Ën
);

3718 
	`JS_F»eV®ue
(
s
->
ùx
, 
v
);

3719  
»s
;

3720 
	}
}

3722 
	$¡ršg_bufãr_fl
(
SŒšgBufãr
 *
s
, 
c
, 
couÁ
)

3725 ià(
s
->
Ën
 + 
couÁ
 > s->
size
) {

3726 ià(
	`¡ršg_bufãr_»®loc
(
s
, s->
Ën
 + 
couÁ
, 
c
))

3729 
couÁ
-- > 0) {

3730 ià(
	`¡ršg_bufãr_putc16
(
s
, 
c
))

3734 
	}
}

3736 
JSV®ue
 
	$¡ršg_bufãr_’d
(
SŒšgBufãr
 *
s
)

3738 
JSSŒšg
 *
¡r
;

3739 
¡r
 = 
s
->str;

3740 ià(
s
->
”rÜ_¡©us
)

3741  
JS_EXCEPTION
;

3742 ià(
s
->
Ën
 == 0) {

3743 
	`js_ä“
(
s
->
ùx
, 
¡r
);

3744 
s
->
¡r
 = 
NULL
;

3745  
	`JS_AtomToSŒšg
(
s
->
ùx
, 
JS_ATOM_em±y_¡ršg
);

3747 ià(
s
->
Ën
 < s->
size
) {

3751 
¡r
 = 
	`js_»®loc_¹
(
s
->
ùx
->
¹
, sŒ, (
JSSŒšg
) +

3752 (
s
->
Ën
 << s->
is_wide_ch¬
) + 1 - s->is_wide_char);

3753 ià(
¡r
 =ğ
NULL
)

3754 
¡r
 = 
s
->str;

3755 
s
->
¡r
 = str;

3757 ià(!
s
->
is_wide_ch¬
)

3758 
¡r
->
u
.
¡r8
[
s
->
Ën
] = 0;

3759 #ifdeà
DUMP_LEAKS


3760 
	`li¡_add_
(&
¡r
->
lšk
, &
s
->
ùx
->
¹
->
¡ršg_li¡
);

3762 
¡r
->
is_wide_ch¬
 = 
s
->is_wide_char;

3763 
¡r
->
Ën
 = 
s
->len;

3764 
s
->
¡r
 = 
NULL
;

3765  
	`JS_MKPTR
(
JS_TAG_STRING
, 
¡r
);

3766 
	}
}

3769 
JSV®ue
 
	$JS_NewSŒšgL’
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
, 
size_t
 
buf_Ën
)

3771 cÚ¡ 
ušt8_t
 *
p
, *
p_’d
, *
p_¡¬t
, *
p_Ãxt
;

3772 
ušt32_t
 
c
;

3773 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

3774 
size_t
 
Ën1
;

3776 
p_¡¬t
 = (cÚ¡ 
ušt8_t
 *)
buf
;

3777 
p_’d
 = 
p_¡¬t
 + 
buf_Ën
;

3778 
p
 = 
p_¡¬t
;

3779 
p
 < 
p_’d
 && *p < 128)

3780 
p
++;

3781 
Ën1
 = 
p
 - 
p_¡¬t
;

3782 ià(
Ën1
 > 
JS_STRING_LEN_MAX
)

3783  
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "stringoo†ong");

3784 ià(
p
 =ğ
p_’d
) {

3786  
	`js_Ãw_¡ršg8
(
ùx
, (cÚ¡ 
ušt8_t
 *)
buf
, 
buf_Ën
);

3788 ià(
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
buf_Ën
))

3789 
ç
;

3790 
	`¡ršg_bufãr_wr™e8
(
b
, 
p_¡¬t
, 
Ën1
);

3791 
p
 < 
p_’d
) {

3792 ià(*
p
 < 128) {

3793 
	`¡ršg_bufãr_putc8
(
b
, *
p
++);

3796 
c
 = 
	`unicode_äom_utf8
(
p
, 
p_’d
 -…, &
p_Ãxt
);

3797 ià(
c
 < 0x10000) {

3798 
p
 = 
p_Ãxt
;

3799 } ià(
c
 <= 0x10FFFF) {

3800 
p
 = 
p_Ãxt
;

3802 
c
 -= 0x10000;

3803 
	`¡ršg_bufãr_putc16
(
b
, (
c
 >> 10) + 0xd800);

3804 
c
 = (c & 0x3ff) + 0xdc00;

3807 
c
 = 0xfffd;

3810 
p
 < 
p_’d
 && (*p >= 0x80 && *p < 0xc0))

3811 
p
++;

3812 ià(
p
 < 
p_’d
) {

3813 
p
++;

3814 
p
 < 
p_’d
 && (*p >= 0x80 && *p < 0xc0))

3815 
p
++;

3818 
	`¡ršg_bufãr_putc16
(
b
, 
c
);

3822  
	`¡ršg_bufãr_’d
(
b
);

3824 
ç
:

3825 
	`¡ršg_bufãr_ä“
(
b
);

3826  
JS_EXCEPTION
;

3827 
	}
}

3829 
JSV®ue
 
	$JS_CÚÿtSŒšg3
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r1
,

3830 
JSV®ue
 
¡r2
, cÚ¡ *
¡r3
)

3832 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

3833 
Ën1
, 
Ën3
;

3834 
JSSŒšg
 *
p
;

3836 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
¡r2
è!ğ
JS_TAG_STRING
)) {

3837 
¡r2
 = 
	`JS_ToSŒšgF»e
(
ùx
, str2);

3838 ià(
	`JS_IsExû±iÚ
(
¡r2
))

3839 
ç
;

3841 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r2
);

3842 
Ën1
 = 
	`¡¾’
(
¡r1
);

3843 
Ën3
 = 
	`¡¾’
(
¡r3
);

3845 ià(
	`¡ršg_bufãr_š™2
(
ùx
, 
b
, 
Ën1
 + 
p
->
Ën
 + 
Ën3
,…->
is_wide_ch¬
))

3846 
ç
;

3848 
	`¡ršg_bufãr_wr™e8
(
b
, (cÚ¡ 
ušt8_t
 *)
¡r1
, 
Ën1
);

3849 
	`¡ršg_bufãr_cÚÿt
(
b
, 
p
, 0,…->
Ën
);

3850 
	`¡ršg_bufãr_wr™e8
(
b
, (cÚ¡ 
ušt8_t
 *)
¡r3
, 
Ën3
);

3852 
	`JS_F»eV®ue
(
ùx
, 
¡r2
);

3853  
	`¡ršg_bufãr_’d
(
b
);

3855 
ç
:

3856 
	`JS_F»eV®ue
(
ùx
, 
¡r2
);

3857  
JS_EXCEPTION
;

3858 
	}
}

3860 
JSV®ue
 
	$JS_NewSŒšg
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
)

3862  
	`JS_NewSŒšgL’
(
ùx
, 
¡r
, 
	`¡¾’
(str));

3863 
	}
}

3865 
JSV®ue
 
	$JS_NewAtomSŒšg
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
)

3867 
JSAtom
 
©om
 = 
	`JS_NewAtom
(
ùx
, 
¡r
);

3868 ià(
©om
 =ğ
JS_ATOM_NULL
)

3869  
JS_EXCEPTION
;

3870 
JSV®ue
 
v®
 = 
	`JS_AtomToSŒšg
(
ùx
, 
©om
);

3871 
	`JS_F»eAtom
(
ùx
, 
©om
);

3872  
v®
;

3873 
	}
}

3878 cÚ¡ *
	$JS_ToCSŒšgL’2
(
JSCÚ‹xt
 *
ùx
, 
size_t
 *
¶’
, 
JSV®ueCÚ¡
 
v®1
, 
BOOL
 
ûsu8
)

3880 
JSV®ue
 
v®
;

3881 
JSSŒšg
 *
¡r
, *
¡r_Ãw
;

3882 
pos
, 
Ën
, 
c
, 
c1
;

3883 
ušt8_t
 *
q
;

3885 ià(
	`JS_VALUE_GET_TAG
(
v®1
è!ğ
JS_TAG_STRING
) {

3886 
v®
 = 
	`JS_ToSŒšg
(
ùx
, 
v®1
);

3887 ià(
	`JS_IsExû±iÚ
(
v®
))

3888 
ç
;

3890 
v®
 = 
	`JS_DupV®ue
(
ùx
, 
v®1
);

3893 
¡r
 = 
	`JS_VALUE_GET_STRING
(
v®
);

3894 
Ën
 = 
¡r
->len;

3895 ià(!
¡r
->
is_wide_ch¬
) {

3896 cÚ¡ 
ušt8_t
 *
¤c
 = 
¡r
->
u
.
¡r8
;

3897 
couÁ
;

3905 
couÁ
 = 0;

3906 
pos
 = 0;…o < 
Ën
;…os++) {

3907 
couÁ
 +ğ
¤c
[
pos
] >> 7;

3909 ià(
couÁ
 == 0) {

3910 ià(
¶’
)

3911 *
¶’
 = 
Ën
;

3912  (cÚ¡ *)
¤c
;

3914 
¡r_Ãw
 = 
	`js_®loc_¡ršg
(
ùx
, 
Ën
 + 
couÁ
, 0);

3915 ià(!
¡r_Ãw
)

3916 
ç
;

3917 
q
 = 
¡r_Ãw
->
u
.
¡r8
;

3918 
pos
 = 0;…o < 
Ën
;…os++) {

3919 
c
 = 
¤c
[
pos
];

3920 ià(
c
 < 0x80) {

3921 *
q
++ = 
c
;

3923 *
q
++ = (
c
 >> 6) | 0xc0;

3924 *
q
++ = (
c
 & 0x3f) | 0x80;

3928 cÚ¡ 
ušt16_t
 *
¤c
 = 
¡r
->
u
.
¡r16
;

3932 
¡r_Ãw
 = 
	`js_®loc_¡ršg
(
ùx
, 
Ën
 * 3, 0);

3933 ià(!
¡r_Ãw
)

3934 
ç
;

3935 
q
 = 
¡r_Ãw
->
u
.
¡r8
;

3936 
pos
 = 0;

3937 
pos
 < 
Ën
) {

3938 
c
 = 
¤c
[
pos
++];

3939 ià(
c
 < 0x80) {

3940 *
q
++ = 
c
;

3942 ià(
c
 >= 0xd800 && c < 0xdc00) {

3943 ià(
pos
 < 
Ën
 && !
ûsu8
) {

3944 
c1
 = 
¤c
[
pos
];

3945 ià(
c1
 >= 0xdc00 && c1 < 0xe000) {

3946 
pos
++;

3948 
c
 = (((ø& 0x3ffè<< 10è| (
c1
 & 0x3ff)) + 0x10000;

3958 
q
 +ğ
	`unicode_to_utf8
(q, 
c
);

3963 *
q
 = '\0';

3964 
¡r_Ãw
->
Ën
 = 
q
 - sŒ_Ãw->
u
.
¡r8
;

3965 
	`JS_F»eV®ue
(
ùx
, 
v®
);

3966 ià(
¶’
)

3967 *
¶’
 = 
¡r_Ãw
->
Ën
;

3968  (cÚ¡ *)
¡r_Ãw
->
u
.
¡r8
;

3969 
ç
:

3970 ià(
¶’
)

3971 *
¶’
 = 0;

3972  
NULL
;

3973 
	}
}

3975 
	$JS_F»eCSŒšg
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
±r
)

3977 
JSSŒšg
 *
p
;

3978 ià(!
±r
)

3981 
p
 = (
JSSŒšg
 *)(*)(
±r
 - 
	`off£tof
(JSSŒšg, 
u
));

3982 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
));

3983 
	}
}

3985 
	$memcmp16_8
(cÚ¡ 
ušt16_t
 *
¤c1
, cÚ¡ 
ušt8_t
 *
¤c2
, 
Ën
)

3987 
c
, 
i
;

3988 
i
 = 0; i < 
Ën
; i++) {

3989 
c
 = 
¤c1
[
i
] - 
¤c2
[i];

3990 ià(
c
 != 0)

3991  
c
;

3994 
	}
}

3996 
	$memcmp16
(cÚ¡ 
ušt16_t
 *
¤c1
, cÚ¡ ušt16_ˆ*
¤c2
, 
Ën
)

3998 
c
, 
i
;

3999 
i
 = 0; i < 
Ën
; i++) {

4000 
c
 = 
¤c1
[
i
] - 
¤c2
[i];

4001 ià(
c
 != 0)

4002  
c
;

4005 
	}
}

4007 
	$js_¡ršg_memcmp
(cÚ¡ 
JSSŒšg
 *
p1
, cÚ¡ JSSŒšg *
p2
, 
Ën
)

4009 
»s
;

4011 ià(
	`lik–y
(!
p1
->
is_wide_ch¬
)) {

4012 ià(
	`lik–y
(!
p2
->
is_wide_ch¬
))

4013 
»s
 = 
	`memcmp
(
p1
->
u
.
¡r8
, 
p2
->u.¡r8, 
Ën
);

4015 
»s
 = -
	`memcmp16_8
(
p2
->
u
.
¡r16
, 
p1
->u.
¡r8
, 
Ën
);

4017 ià(!
p2
->
is_wide_ch¬
)

4018 
»s
 = 
	`memcmp16_8
(
p1
->
u
.
¡r16
, 
p2
->u.
¡r8
, 
Ën
);

4020 
»s
 = 
	`memcmp16
(
p1
->
u
.
¡r16
, 
p2
->u.¡r16, 
Ën
);

4022  
»s
;

4023 
	}
}

4026 
	$js_¡ršg_com·»
(
JSCÚ‹xt
 *
ùx
,

4027 cÚ¡ 
JSSŒšg
 *
p1
, cÚ¡ JSSŒšg *
p2
)

4029 
»s
, 
Ën
;

4030 
Ën
 = 
	`mš_št
(
p1
->Ën, 
p2
->len);

4031 
»s
 = 
	`js_¡ršg_memcmp
(
p1
, 
p2
, 
Ën
);

4032 ià(
»s
 == 0) {

4033 ià(
p1
->
Ën
 =ğ
p2
->len)

4034 
»s
 = 0;

4035 ià(
p1
->
Ën
 < 
p2
->len)

4036 
»s
 = -1;

4038 
»s
 = 1;

4040  
»s
;

4041 
	}
}

4043 
	$cİy_¡r16
(
ušt16_t
 *
d¡
, cÚ¡ 
JSSŒšg
 *
p
, 
off£t
, 
Ën
)

4045 ià(
p
->
is_wide_ch¬
) {

4046 
	`memıy
(
d¡
, 
p
->
u
.
¡r16
 + 
off£t
, 
Ën
 * 2);

4048 cÚ¡ 
ušt8_t
 *
¤c1
 = 
p
->
u
.
¡r8
 + 
off£t
;

4049 
i
;

4051 
i
 = 0; i < 
Ën
; i++)

4052 
d¡
[
i
] = 
¤c1
[i];

4054 
	}
}

4056 
JSV®ue
 
	$JS_CÚÿtSŒšg1
(
JSCÚ‹xt
 *
ùx
,

4057 cÚ¡ 
JSSŒšg
 *
p1
, cÚ¡ JSSŒšg *
p2
)

4059 
JSSŒšg
 *
p
;

4060 
ušt32_t
 
Ën
;

4061 
is_wide_ch¬
;

4063 
Ën
 = 
p1
->ËÀ+ 
p2
->len;

4064 ià(
Ën
 > 
JS_STRING_LEN_MAX
)

4065  
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "stringoo†ong");

4066 
is_wide_ch¬
 = 
p1
->is_wide_ch¬ | 
p2
->is_wide_char;

4067 
p
 = 
	`js_®loc_¡ršg
(
ùx
, 
Ën
, 
is_wide_ch¬
);

4068 ià(!
p
)

4069  
JS_EXCEPTION
;

4070 ià(!
is_wide_ch¬
) {

4071 
	`memıy
(
p
->
u
.
¡r8
, 
p1
->u.¡r8,…1->
Ën
);

4072 
	`memıy
(
p
->
u
.
¡r8
 + 
p1
->
Ën
, 
p2
->u.str8,…2->len);

4073 
p
->
u
.
¡r8
[
Ën
] = '\0';

4075 
	`cİy_¡r16
(
p
->
u
.
¡r16
, 
p1
, 0,…1->
Ën
);

4076 
	`cİy_¡r16
(
p
->
u
.
¡r16
 + 
p1
->
Ën
, 
p2
, 0,…2->len);

4078  
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
);

4079 
	}
}

4083 
JSV®ue
 
	$JS_CÚÿtSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
İ1
, JSV®u
İ2
)

4085 
JSV®ue
 
»t
;

4086 
JSSŒšg
 *
p1
, *
p2
;

4088 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
İ1
è!ğ
JS_TAG_STRING
)) {

4089 
İ1
 = 
	`JS_ToSŒšgF»e
(
ùx
, op1);

4090 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

4091 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

4092  
JS_EXCEPTION
;

4095 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
İ2
è!ğ
JS_TAG_STRING
)) {

4096 
İ2
 = 
	`JS_ToSŒšgF»e
(
ùx
, op2);

4097 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

4098 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

4099  
JS_EXCEPTION
;

4102 
p1
 = 
	`JS_VALUE_GET_STRING
(
İ1
);

4103 
p2
 = 
	`JS_VALUE_GET_STRING
(
İ2
);

4106 ià(
p2
->
Ën
 == 0) {

4107 
»t_İ1
;

4109 ià(
p1
->
h—d”
.
»f_couÁ
 =ğ1 &&…1->
is_wide_ch¬
 =ğ
p2
->is_wide_char

4110 && 
	`js_m®loc_u§bË_size
(
ùx
, 
p1
è>ğ(*p1è+ (Õ1->
Ën
 + 
p2
->Ënè<<…2->
is_wide_ch¬
) + 1 -…1->is_wide_char) {

4112 ià(
p1
->
is_wide_ch¬
) {

4113 
	`memıy
(
p1
->
u
.
¡r16
 +…1->
Ën
, 
p2
->u.str16,…2->len << 1);

4114 
p1
->
Ën
 +ğ
p2
->len;

4116 
	`memıy
(
p1
->
u
.
¡r8
 +…1->
Ën
, 
p2
->u.str8,…2->len);

4117 
p1
->
Ën
 +ğ
p2
->len;

4118 
p1
->
u
.
¡r8
[p1->
Ën
] = '\0';

4120 
»t_İ1
:

4121 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

4122  
İ1
;

4124 
»t
 = 
	`JS_CÚÿtSŒšg1
(
ùx
, 
p1
, 
p2
);

4125 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

4126 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

4127  
»t
;

4128 
	}
}

4132 
šlše
 
size_t
 
	$g‘_sh­e_size
(
size_t
 
hash_size
, size_ˆ
´İ_size
)

4134  
hash_size
 * (
ušt32_t
è+ (
JSSh­e
) +

4135 
´İ_size
 * (
JSSh­ePrİ”ty
);

4136 
	}
}

4138 
šlše
 
JSSh­e
 *
	$g‘_sh­e_äom_®loc
(*
sh_®loc
, 
size_t
 
hash_size
)

4140  (
JSSh­e
 *)(*)((
ušt32_t
 *)
sh_®loc
 + 
hash_size
);

4141 
	}
}

4143 
šlše
 *
	$g‘_®loc_äom_sh­e
(
JSSh­e
 *
sh
)

4145  
sh
->
´İ_hash_’d
 - ((
šŒ_t
)sh->
´İ_hash_mask
 + 1);

4146 
	}
}

4148 
šlše
 
JSSh­ePrİ”ty
 *
	$g‘_sh­e_´İ
(
JSSh­e
 *
sh
)

4150  
sh
->
´İ
;

4151 
	}
}

4153 
	$š™_sh­e_hash
(
JSRuÁime
 *
¹
)

4155 
¹
->
sh­e_hash_b™s
 = 4;

4156 
¹
->
sh­e_hash_size
 = 1 <<„t->
sh­e_hash_b™s
;

4157 
¹
->
sh­e_hash_couÁ
 = 0;

4158 
¹
->
sh­e_hash
 = 
	`js_m®locz_¹
(rt, (rt->shape_hash[0]) *

4159 
¹
->
sh­e_hash_size
);

4160 ià(!
¹
->
sh­e_hash
)

4163 
	}
}

4166 
ušt32_t
 
	$sh­e_hash
(
ušt32_t
 
h
, ušt32_ˆ
v®
)

4168  (
h
 + 
v®
) * 0x9e370001;

4169 
	}
}

4172 
ušt32_t
 
	$g‘_sh­e_hash
(
ušt32_t
 
h
, 
hash_b™s
)

4174  
h
 >> (32 - 
hash_b™s
);

4175 
	}
}

4177 
ušt32_t
 
	$sh­e_š™Ÿl_hash
(
JSObjeù
 *
´Ùo
)

4179 
ušt32_t
 
h
;

4180 
h
 = 
	`sh­e_hash
(1, (
ušŒ_t
)
´Ùo
);

4181 ià((
´Ùo
) > 4)

4182 
h
 = 
	`sh­e_hash
(h, (
ušt64_t
)(
ušŒ_t
)
´Ùo
 >> 32);

4183  
h
;

4184 
	}
}

4186 
	$»size_sh­e_hash
(
JSRuÁime
 *
¹
, 
Ãw_sh­e_hash_b™s
)

4188 
Ãw_sh­e_hash_size
, 
i
;

4189 
ušt32_t
 
h
;

4190 
JSSh­e
 **
Ãw_sh­e_hash
, *
sh
, *
sh_Ãxt
;

4192 
Ãw_sh­e_hash_size
 = 1 << 
Ãw_sh­e_hash_b™s
;

4193 
Ãw_sh­e_hash
 = 
	`js_m®locz_¹
(
¹
, Ôt->
sh­e_hash
[0]) *

4194 
Ãw_sh­e_hash_size
);

4195 ià(!
Ãw_sh­e_hash
)

4197 
i
 = 0; i < 
¹
->
sh­e_hash_size
; i++) {

4198 
sh
 = 
¹
->
sh­e_hash
[
i
]; sh !ğ
NULL
; sh = 
sh_Ãxt
) {

4199 
sh_Ãxt
 = 
sh
->
sh­e_hash_Ãxt
;

4200 
h
 = 
	`g‘_sh­e_hash
(
sh
->
hash
, 
Ãw_sh­e_hash_b™s
);

4201 
sh
->
sh­e_hash_Ãxt
 = 
Ãw_sh­e_hash
[
h
];

4202 
Ãw_sh­e_hash
[
h
] = 
sh
;

4205 
	`js_ä“_¹
(
¹
,„t->
sh­e_hash
);

4206 
¹
->
sh­e_hash_b™s
 = 
Ãw_sh­e_hash_b™s
;

4207 
¹
->
sh­e_hash_size
 = 
Ãw_sh­e_hash_size
;

4208 
¹
->
sh­e_hash
 = 
Ãw_sh­e_hash
;

4210 
	}
}

4212 
	$js_sh­e_hash_lšk
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
)

4214 
ušt32_t
 
h
;

4215 
h
 = 
	`g‘_sh­e_hash
(
sh
->
hash
, 
¹
->
sh­e_hash_b™s
);

4216 
sh
->
sh­e_hash_Ãxt
 = 
¹
->
sh­e_hash
[
h
];

4217 
¹
->
sh­e_hash
[
h
] = 
sh
;

4218 
¹
->
sh­e_hash_couÁ
++;

4219 
	}
}

4221 
	$js_sh­e_hash_uÆšk
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
)

4223 
ušt32_t
 
h
;

4224 
JSSh­e
 **
psh
;

4226 
h
 = 
	`g‘_sh­e_hash
(
sh
->
hash
, 
¹
->
sh­e_hash_b™s
);

4227 
psh
 = &
¹
->
sh­e_hash
[
h
];

4228 *
psh
 !ğ
sh
)

4229 
psh
 = &(*psh)->
sh­e_hash_Ãxt
;

4230 *
psh
 = 
sh
->
sh­e_hash_Ãxt
;

4231 
¹
->
sh­e_hash_couÁ
--;

4232 
	}
}

4235 
no_šlše
 
JSSh­e
 *
	$js_Ãw_sh­e2
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
´Ùo
,

4236 
hash_size
, 
´İ_size
)

4238 
JSRuÁime
 *
¹
 = 
ùx
->rt;

4239 *
sh_®loc
;

4240 
JSSh­e
 *
sh
;

4243 ià(2 * (
¹
->
sh­e_hash_couÁ
 + 1è>„t->
sh­e_hash_size
) {

4244 
	`»size_sh­e_hash
(
¹
,„t->
sh­e_hash_b™s
 + 1);

4247 
sh_®loc
 = 
	`js_m®loc
(
ùx
, 
	`g‘_sh­e_size
(
hash_size
, 
´İ_size
));

4248 ià(!
sh_®loc
)

4249  
NULL
;

4250 
sh
 = 
	`g‘_sh­e_äom_®loc
(
sh_®loc
, 
hash_size
);

4251 
sh
->
h—d”
.
»f_couÁ
 = 1;

4252 
	`add_gc_objeù
(
¹
, &
sh
->
h—d”
, 
JS_GC_OBJ_TYPE_SHAPE
);

4253 ià(
´Ùo
)

4254 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´Ùo
));

4255 
sh
->
´Ùo
 =…roto;

4256 
	`mem£t
(
sh
->
´İ_hash_’d
 - 
hash_size
, 0, (sh->prop_hash_end[0]) *

4257 
hash_size
);

4258 
sh
->
´İ_hash_mask
 = 
hash_size
 - 1;

4259 
sh
->
´İ_couÁ
 = 0;

4260 
sh
->
´İ_size
 =…rop_size;

4263 
sh
->
hash
 = 
	`sh­e_š™Ÿl_hash
(
´Ùo
);

4264 
sh
->
is_hashed
 = 
TRUE
;

4265 
sh
->
has_sm®l_¬¿y_šdex
 = 
FALSE
;

4266 
	`js_sh­e_hash_lšk
(
ùx
->
¹
, 
sh
);

4267  
sh
;

4268 
	}
}

4270 
JSSh­e
 *
	$js_Ãw_sh­e
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
´Ùo
)

4272  
	`js_Ãw_sh­e2
(
ùx
, 
´Ùo
, 
JS_PROP_INITIAL_HASH_SIZE
,

4273 
JS_PROP_INITIAL_SIZE
);

4274 
	}
}

4278 
JSSh­e
 *
	$js_şÚe_sh­e
(
JSCÚ‹xt
 *
ùx
, 
JSSh­e
 *
sh1
)

4280 
JSSh­e
 *
sh
;

4281 *
sh_®loc
, *
sh_®loc1
;

4282 
size_t
 
size
;

4283 
JSSh­ePrİ”ty
 *
´
;

4284 
ušt32_t
 
i
, 
hash_size
;

4286 
hash_size
 = 
sh1
->
´İ_hash_mask
 + 1;

4287 
size
 = 
	`g‘_sh­e_size
(
hash_size
, 
sh1
->
´İ_size
);

4288 
sh_®loc
 = 
	`js_m®loc
(
ùx
, 
size
);

4289 ià(!
sh_®loc
)

4290  
NULL
;

4291 
sh_®loc1
 = 
	`g‘_®loc_äom_sh­e
(
sh1
);

4292 
	`memıy
(
sh_®loc
, 
sh_®loc1
, 
size
);

4293 
sh
 = 
	`g‘_sh­e_äom_®loc
(
sh_®loc
, 
hash_size
);

4294 
sh
->
h—d”
.
»f_couÁ
 = 1;

4295 
	`add_gc_objeù
(
ùx
->
¹
, &
sh
->
h—d”
, 
JS_GC_OBJ_TYPE_SHAPE
);

4296 
sh
->
is_hashed
 = 
FALSE
;

4297 ià(
sh
->
´Ùo
) {

4298 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
sh
->
´Ùo
));

4300 
i
 = 0, 
´
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
; i++,…r++) {

4301 
	`JS_DupAtom
(
ùx
, 
´
->
©om
);

4303  
sh
;

4304 
	}
}

4306 
JSSh­e
 *
	$js_dup_sh­e
(
JSSh­e
 *
sh
)

4308 
sh
->
h—d”
.
»f_couÁ
++;

4309  
sh
;

4310 
	}
}

4312 
	$js_ä“_sh­e0
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
)

4314 
ušt32_t
 
i
;

4315 
JSSh­ePrİ”ty
 *
´
;

4317 
	`as£¹
(
sh
->
h—d”
.
»f_couÁ
 == 0);

4318 ià(
sh
->
is_hashed
)

4319 
	`js_sh­e_hash_uÆšk
(
¹
, 
sh
);

4320 ià(
sh
->
´Ùo
 !ğ
NULL
) {

4321 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
sh
->
´Ùo
));

4323 
´
 = 
	`g‘_sh­e_´İ
(
sh
);

4324 
i
 = 0; i < 
sh
->
´İ_couÁ
; i++) {

4325 
	`JS_F»eAtomRT
(
¹
, 
´
->
©om
);

4326 
´
++;

4328 
	`»move_gc_objeù
(&
sh
->
h—d”
);

4329 
	`js_ä“_¹
(
¹
, 
	`g‘_®loc_äom_sh­e
(
sh
));

4330 
	}
}

4332 
	$js_ä“_sh­e
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
)

4334 ià(
	`uÆik–y
(--
sh
->
h—d”
.
»f_couÁ
 <= 0)) {

4335 
	`js_ä“_sh­e0
(
¹
, 
sh
);

4337 
	}
}

4339 
	$js_ä“_sh­e_nuÎ
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
)

4341 ià(
sh
)

4342 
	`js_ä“_sh­e
(
¹
, 
sh
);

4343 
	}
}

4346 
no_šlše
 
	$»size_´İ”t›s
(
JSCÚ‹xt
 *
ùx
, 
JSSh­e
 **
psh
,

4347 
JSObjeù
 *
p
, 
ušt32_t
 
couÁ
)

4349 
JSSh­e
 *
sh
;

4350 
ušt32_t
 
Ãw_size
, 
Ãw_hash_size
, 
Ãw_hash_mask
, 
i
;

4351 
JSSh­ePrİ”ty
 *
´
;

4352 *
sh_®loc
;

4353 
šŒ_t
 
h
;

4355 
sh
 = *
psh
;

4356 
Ãw_size
 = 
	`max_št
(
couÁ
, 
sh
->
´İ_size
 * 3 / 2);

4359 ià(
p
) {

4360 
JSPrİ”ty
 *
Ãw_´İ
;

4361 
Ãw_´İ
 = 
	`js_»®loc
(
ùx
, 
p
->
´İ
, Òew_´İ[0]è* 
Ãw_size
);

4362 ià(
	`uÆik–y
(!
Ãw_´İ
))

4364 
p
->
´İ
 = 
Ãw_´İ
;

4366 
Ãw_hash_size
 = 
sh
->
´İ_hash_mask
 + 1;

4367 
Ãw_hash_size
 < 
Ãw_size
)

4368 
Ãw_hash_size
 = 2 *‚ew_hash_size;

4369 ià(
Ãw_hash_size
 !ğ(
sh
->
´İ_hash_mask
 + 1)) {

4370 
JSSh­e
 *
Şd_sh
;

4372 
Şd_sh
 = 
sh
;

4373 
sh_®loc
 = 
	`js_m®loc
(
ùx
, 
	`g‘_sh­e_size
(
Ãw_hash_size
, 
Ãw_size
));

4374 ià(!
sh_®loc
)

4376 
sh
 = 
	`g‘_sh­e_äom_®loc
(
sh_®loc
, 
Ãw_hash_size
);

4377 
	`li¡_d–
(&
Şd_sh
->
h—d”
.
lšk
);

4379 
	`memıy
(
sh
, 
Şd_sh
,

4380 (
JSSh­e
è+ (
sh
->
´İ
[0]è* 
Şd_sh
->
´İ_couÁ
);

4381 
	`li¡_add_
(&
sh
->
h—d”
.
lšk
, &
ùx
->
¹
->
gc_obj_li¡
);

4382 
Ãw_hash_mask
 = 
Ãw_hash_size
 - 1;

4383 
sh
->
´İ_hash_mask
 = 
Ãw_hash_mask
;

4384 
	`mem£t
(
sh
->
´İ_hash_’d
 - 
Ãw_hash_size
, 0,

4385 (
sh
->
´İ_hash_’d
[0]è* 
Ãw_hash_size
);

4386 
i
 = 0, 
´
 = 
sh
->
´İ
; i < sh->
´İ_couÁ
; i++,…r++) {

4387 ià(
´
->
©om
 !ğ
JS_ATOM_NULL
) {

4388 
h
 = ((
ušŒ_t
)
´
->
©om
 & 
Ãw_hash_mask
);

4389 
´
->
hash_Ãxt
 = 
sh
->
´İ_hash_’d
[-
h
 - 1];

4390 
sh
->
´İ_hash_’d
[-
h
 - 1] = 
i
 + 1;

4393 
	`js_ä“
(
ùx
, 
	`g‘_®loc_äom_sh­e
(
Şd_sh
));

4396 
	`li¡_d–
(&
sh
->
h—d”
.
lšk
);

4397 
sh_®loc
 = 
	`js_»®loc
(
ùx
, 
	`g‘_®loc_äom_sh­e
(
sh
),

4398 
	`g‘_sh­e_size
(
Ãw_hash_size
, 
Ãw_size
));

4399 ià(
	`uÆik–y
(!
sh_®loc
)) {

4401 
	`li¡_add_
(&
sh
->
h—d”
.
lšk
, &
ùx
->
¹
->
gc_obj_li¡
);

4404 
sh
 = 
	`g‘_sh­e_äom_®loc
(
sh_®loc
, 
Ãw_hash_size
);

4405 
	`li¡_add_
(&
sh
->
h—d”
.
lšk
, &
ùx
->
¹
->
gc_obj_li¡
);

4407 *
psh
 = 
sh
;

4408 
sh
->
´İ_size
 = 
Ãw_size
;

4410 
	}
}

4412 
	$add_sh­e_´İ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSSh­e
 **
psh
,

4413 
JSObjeù
 *
p
, 
JSAtom
 
©om
, 
´İ_æags
)

4415 
JSRuÁime
 *
¹
 = 
ùx
->rt;

4416 
JSSh­e
 *
sh
 = *
psh
;

4417 
JSSh­ePrİ”ty
 *
´
, *
´İ
;

4418 
ušt32_t
 
hash_mask
, 
Ãw_sh­e_hash
 = 0;

4419 
šŒ_t
 
h
;

4422 ià(
sh
->
is_hashed
) {

4423 
	`js_sh­e_hash_uÆšk
(
¹
, 
sh
);

4424 
Ãw_sh­e_hash
 = 
	`sh­e_hash
(sh­e_hash(
sh
->
hash
, 
©om
), 
´İ_æags
);

4427 ià(
	`uÆik–y
(
sh
->
´İ_couÁ
 >ğsh->
´İ_size
)) {

4428 ià(
	`»size_´İ”t›s
(
ùx
, 
psh
, 
p
, 
sh
->
´İ_couÁ
 + 1)) {

4431 ià(
sh
->
is_hashed
)

4432 
	`js_sh­e_hash_lšk
(
¹
, 
sh
);

4435 
sh
 = *
psh
;

4437 ià(
sh
->
is_hashed
) {

4438 
sh
->
hash
 = 
Ãw_sh­e_hash
;

4439 
	`js_sh­e_hash_lšk
(
¹
, 
sh
);

4443 
´İ
 = 
	`g‘_sh­e_´İ
(
sh
);

4444 
´
 = &
´İ
[
sh
->
´İ_couÁ
++];

4445 
´
->
©om
 = 
	`JS_DupAtom
(
ùx
,‡tom);

4446 
´
->
æags
 = 
´İ_æags
;

4447 
sh
->
has_sm®l_¬¿y_šdex
 |ğ
	`__JS_AtomIsTaggedIÁ
(
©om
);

4449 
hash_mask
 = 
sh
->
´İ_hash_mask
;

4450 
h
 = 
©om
 & 
hash_mask
;

4451 
´
->
hash_Ãxt
 = 
sh
->
´İ_hash_’d
[-
h
 - 1];

4452 
sh
->
´İ_hash_’d
[-
h
 - 1] = sh->
´İ_couÁ
;

4454 
	}
}

4458 
JSSh­e
 *
	$fšd_hashed_sh­e_´Ùo
(
JSRuÁime
 *
¹
, 
JSObjeù
 *
´Ùo
)

4460 
JSSh­e
 *
sh1
;

4461 
ušt32_t
 
h
, 
h1
;

4463 
h
 = 
	`sh­e_š™Ÿl_hash
(
´Ùo
);

4464 
h1
 = 
	`g‘_sh­e_hash
(
h
, 
¹
->
sh­e_hash_b™s
);

4465 
sh1
 = 
¹
->
sh­e_hash
[
h1
]; sh1 !ğ
NULL
; sh1 = sh1->
sh­e_hash_Ãxt
) {

4466 ià(
sh1
->
hash
 =ğ
h
 &&

4467 
sh1
->
´Ùo
 ==…roto &&

4468 
sh1
->
´İ_couÁ
 == 0) {

4469  
sh1
;

4472  
NULL
;

4473 
	}
}

4477 
JSSh­e
 *
	$fšd_hashed_sh­e_´İ
(
JSRuÁime
 *
¹
, 
JSSh­e
 *
sh
,

4478 
JSAtom
 
©om
, 
´İ_æags
)

4480 
JSSh­e
 *
sh1
;

4481 
ušt32_t
 
h
, 
h1
, 
i
, 
n
;

4483 
h
 = 
sh
->
hash
;

4484 
h
 = 
	`sh­e_hash
(h, 
©om
);

4485 
h
 = 
	`sh­e_hash
(h, 
´İ_æags
);

4486 
h1
 = 
	`g‘_sh­e_hash
(
h
, 
¹
->
sh­e_hash_b™s
);

4487 
sh1
 = 
¹
->
sh­e_hash
[
h1
]; sh1 !ğ
NULL
; sh1 = sh1->
sh­e_hash_Ãxt
) {

4490 ià(
sh1
->
hash
 =ğ
h
 &&

4491 
sh1
->
´Ùo
 =ğ
sh
->proto &&

4492 
sh1
->
´İ_couÁ
 =ğ((
n
 = 
sh
->prop_count) + 1)) {

4493 
i
 = 0; i < 
n
; i++) {

4494 ià(
	`uÆik–y
(
sh1
->
´İ
[
i
].
©om
 !ğ
sh
->prop[i].atom) ||

4495 
	`uÆik–y
(
sh1
->
´İ
[
i
].
æags
 !ğ
sh
->prop[i].flags))

4496 
Ãxt
;

4498 ià(
	`uÆik–y
(
sh1
->
´İ
[
n
].
©om
 !=‡tom) ||

4499 
	`uÆik–y
(
sh1
->
´İ
[
n
].
æags
 !ğ
´İ_æags
))

4500 
Ãxt
;

4501  
sh1
;

4503 
Ãxt
: ;

4505  
NULL
;

4506 
	}
}

4508 
__maybe_unu£d
 
	$JS_DumpSh­e
(
JSRuÁime
 *
¹
, 
i
, 
JSSh­e
 *
sh
)

4510 
©om_buf
[
ATOM_GET_STR_BUF_SIZE
];

4511 
j
;

4514 
	`´štf
("%5d %3d%ø%14°%5d %5d", 
i
,

4515 
sh
->
h—d”
.
»f_couÁ
, " *"[sh->
is_hashed
],

4516 (*)
sh
->
´Ùo
, sh->
´İ_size
, sh->
´İ_couÁ
);

4517 
j
 = 0; j < 
sh
->
´İ_couÁ
; j++) {

4518 
	`´štf
(" %s", 
	`JS_AtomG‘SŒRT
(
¹
, 
©om_buf
, (atom_buf),

4519 
sh
->
´İ
[
j
].
©om
));

4521 
	`´štf
("\n");

4522 
	}
}

4524 
__maybe_unu£d
 
	$JS_DumpSh­es
(
JSRuÁime
 *
¹
)

4526 
i
;

4527 
JSSh­e
 *
sh
;

4528 
li¡_h—d
 *
–
;

4529 
JSObjeù
 *
p
;

4530 
JSGCObjeùH—d”
 *
gp
;

4532 
	`´štf
("JSShapes: {\n");

4533 
	`´štf
("%5s %4s %14s %5s %5s %s\n", "SLOT", "REFS", "PROTO", "SIZE", "COUNT", "PROPS");

4534 
i
 = 0; i < 
¹
->
sh­e_hash_size
; i++) {

4535 
sh
 = 
¹
->
sh­e_hash
[
i
]; sh !ğ
NULL
; sh = sh->
sh­e_hash_Ãxt
) {

4536 
	`JS_DumpSh­e
(
¹
, 
i
, 
sh
);

4537 
	`as£¹
(
sh
->
is_hashed
);

4541 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

4542 
gp
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

4543 ià(
gp
->
gc_obj_ty³
 =ğ
JS_GC_OBJ_TYPE_JS_OBJECT
) {

4544 
p
 = (
JSObjeù
 *)
gp
;

4545 ià(!
p
->
sh­e
->
is_hashed
) {

4546 
	`JS_DumpSh­e
(
¹
, -1, 
p
->
sh­e
);

4550 
	`´štf
("}\n");

4551 
	}
}

4553 
JSV®ue
 
	$JS_NewObjeùFromSh­e
(
JSCÚ‹xt
 *
ùx
, 
JSSh­e
 *
sh
, 
JSCÏssID
 
şass_id
)

4555 
JSObjeù
 *
p
;

4557 
	`js_Œigg”_gc
(
ùx
->
¹
, (
JSObjeù
));

4558 
p
 = 
	`js_m®loc
(
ùx
, (
JSObjeù
));

4559 ià(
	`uÆik–y
(!
p
))

4560 
ç
;

4561 
p
->
şass_id
 = class_id;

4562 
p
->
ex‹nsibË
 = 
TRUE
;

4563 
p
->
ä“_m¬k
 = 0;

4564 
p
->
is_exÙic
 = 0;

4565 
p
->
ç¡_¬¿y
 = 0;

4566 
p
->
is_cÚ¡ruùÜ
 = 0;

4567 
p
->
is_unÿtchabË_”rÜ
 = 0;

4568 
p
->
is_şass
 = 0;

4569 
p
->
tmp_m¬k
 = 0;

4570 
p
->
fœ¡_w—k_»f
 = 
NULL
;

4571 
p
->
u
.
İaque
 = 
NULL
;

4572 
p
->
sh­e
 = 
sh
;

4573 
p
->
´İ
 = 
	`js_m®loc
(
ùx
, (
JSPrİ”ty
è* 
sh
->
´İ_size
);

4574 ià(
	`uÆik–y
(!
p
->
´İ
)) {

4575 
	`js_ä“
(
ùx
, 
p
);

4576 
ç
:

4577 
	`js_ä“_sh­e
(
ùx
->
¹
, 
sh
);

4578  
JS_EXCEPTION
;

4581 
şass_id
) {

4582 
JS_CLASS_OBJECT
:

4584 
JS_CLASS_ARRAY
:

4586 
JSPrİ”ty
 *
´
;

4587 
p
->
is_exÙic
 = 1;

4588 
p
->
ç¡_¬¿y
 = 1;

4589 
p
->
u
.
¬¿y
.u.
v®ues
 = 
NULL
;

4590 
p
->
u
.
¬¿y
.
couÁ
 = 0;

4591 
p
->
u
.
¬¿y
.
u1
.
size
 = 0;

4593 ià(
	`lik–y
(
sh
 =ğ
ùx
->
¬¿y_sh­e
)) {

4594 
´
 = &
p
->
´İ
[0];

4598 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
JS_ATOM_Ëngth
,

4599 
JS_PROP_WRITABLE
 | 
JS_PROP_LENGTH
);

4601 
´
->
u
.
v®ue
 = 
	`JS_NewIÁ32
(
ùx
, 0);

4604 
JS_CLASS_C_FUNCTION
:

4605 
p
->
´İ
[0].
u
.
v®ue
 = 
JS_UNDEFINED
;

4607 
JS_CLASS_ARGUMENTS
:

4608 
JS_CLASS_UINT8C_ARRAY
 ... 
JS_CLASS_FLOAT64_ARRAY
:

4609 
p
->
is_exÙic
 = 1;

4610 
p
->
ç¡_¬¿y
 = 1;

4611 
p
->
u
.
¬¿y
.u.
±r
 = 
NULL
;

4612 
p
->
u
.
¬¿y
.
couÁ
 = 0;

4614 
JS_CLASS_DATAVIEW
:

4615 
p
->
u
.
¬¿y
.u.
±r
 = 
NULL
;

4616 
p
->
u
.
¬¿y
.
couÁ
 = 0;

4618 
JS_CLASS_ERROR
:

4619 
JS_CLASS_NUMBER
:

4620 
JS_CLASS_STRING
:

4621 
JS_CLASS_BOOLEAN
:

4622 
JS_CLASS_SYMBOL
:

4623 
JS_CLASS_DATE
:

4624 #ifdeà
CONFIG_BIGNUM


4625 
JS_CLASS_BIG_INT
:

4626 
JS_CLASS_BIG_FLOAT
:

4627 
JS_CLASS_BIG_DECIMAL
:

4629 
p
->
u
.
objeù_d©a
 = 
JS_UNDEFINED
;

4630 
£t_exÙic
;

4631 
JS_CLASS_REGEXP
:

4632 
p
->
u
.
»gexp
.
·‰”n
 = 
NULL
;

4633 
p
->
u
.
»gexp
.
by‹code
 = 
NULL
;

4634 
£t_exÙic
;

4636 
£t_exÙic
:

4637 ià(
ùx
->
¹
->
şass_¬¿y
[
şass_id
].
exÙic
) {

4638 
p
->
is_exÙic
 = 1;

4642 
p
->
h—d”
.
»f_couÁ
 = 1;

4643 
	`add_gc_objeù
(
ùx
->
¹
, &
p
->
h—d”
, 
JS_GC_OBJ_TYPE_JS_OBJECT
);

4644  
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
);

4645 
	}
}

4647 
JSObjeù
 *
	$g‘_´Ùo_obj
(
JSV®ueCÚ¡
 
´Ùo_v®
)

4649 ià(
	`JS_VALUE_GET_TAG
(
´Ùo_v®
è!ğ
JS_TAG_OBJECT
)

4650  
NULL
;

4652  
	`JS_VALUE_GET_OBJ
(
´Ùo_v®
);

4653 
	}
}

4656 
JSV®ue
 
	$JS_NewObjeùPrÙoCÏss
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
´Ùo_v®
,

4657 
JSCÏssID
 
şass_id
)

4659 
JSSh­e
 *
sh
;

4660 
JSObjeù
 *
´Ùo
;

4662 
´Ùo
 = 
	`g‘_´Ùo_obj
(
´Ùo_v®
);

4663 
sh
 = 
	`fšd_hashed_sh­e_´Ùo
(
ùx
->
¹
, 
´Ùo
);

4664 ià(
	`lik–y
(
sh
)) {

4665 
sh
 = 
	`js_dup_sh­e
(sh);

4667 
sh
 = 
	`js_Ãw_sh­e
(
ùx
, 
´Ùo
);

4668 ià(!
sh
)

4669  
JS_EXCEPTION
;

4671  
	`JS_NewObjeùFromSh­e
(
ùx
, 
sh
, 
şass_id
);

4672 
	}
}

4675 
JSV®ue
 
	$JS_G‘ObjeùD©a
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

4677 
JSObjeù
 *
p
;

4679 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

4680 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

4681 
p
->
şass_id
) {

4682 
JS_CLASS_NUMBER
:

4683 
JS_CLASS_STRING
:

4684 
JS_CLASS_BOOLEAN
:

4685 
JS_CLASS_SYMBOL
:

4686 
JS_CLASS_DATE
:

4687 #ifdeà
CONFIG_BIGNUM


4688 
JS_CLASS_BIG_INT
:

4689 
JS_CLASS_BIG_FLOAT
:

4690 
JS_CLASS_BIG_DECIMAL
:

4692  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

4695  
JS_UNDEFINED
;

4696 
	}
}

4699 
	$JS_S‘ObjeùD©a
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSV®ue
 
v®
)

4701 
JSObjeù
 *
p
;

4703 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

4704 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

4705 
p
->
şass_id
) {

4706 
JS_CLASS_NUMBER
:

4707 
JS_CLASS_STRING
:

4708 
JS_CLASS_BOOLEAN
:

4709 
JS_CLASS_SYMBOL
:

4710 
JS_CLASS_DATE
:

4711 #ifdeà
CONFIG_BIGNUM


4712 
JS_CLASS_BIG_INT
:

4713 
JS_CLASS_BIG_FLOAT
:

4714 
JS_CLASS_BIG_DECIMAL
:

4716 
	`JS_F»eV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

4717 
p
->
u
.
objeù_d©a
 = 
v®
;

4721 
	`JS_F»eV®ue
(
ùx
, 
v®
);

4722 ià(!
	`JS_IsExû±iÚ
(
obj
))

4723 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid objectype");

4725 
	}
}

4727 
JSV®ue
 
	$JS_NewObjeùCÏss
(
JSCÚ‹xt
 *
ùx
, 
şass_id
)

4729  
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
şass_´Ùo
[
şass_id
], class_id);

4730 
	}
}

4732 
JSV®ue
 
	$JS_NewObjeùPrÙo
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
´Ùo
)

4734  
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
´Ùo
, 
JS_CLASS_OBJECT
);

4735 
	}
}

4737 
JSV®ue
 
	$JS_NewA¼ay
(
JSCÚ‹xt
 *
ùx
)

4739  
	`JS_NewObjeùFromSh­e
(
ùx
, 
	`js_dup_sh­e
(ùx->
¬¿y_sh­e
),

4740 
JS_CLASS_ARRAY
);

4741 
	}
}

4743 
JSV®ue
 
	$JS_NewObjeù
(
JSCÚ‹xt
 *
ùx
)

4746  
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_OBJECT
], JS_CLASS_OBJECT);

4747 
	}
}

4749 
	$js_funùiÚ_£t_´İ”t›s
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

4750 
JSAtom
 
Çme
, 
Ën
)

4753 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ32
(ùx, 
Ën
),

4754 
JS_PROP_CONFIGURABLE
);

4755 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_Çme
,

4756 
	`JS_AtomToSŒšg
(
ùx
, 
Çme
), 
JS_PROP_CONFIGURABLE
);

4757 
	}
}

4759 
BOOL
 
	$js_şass_has_by‹code
(
JSCÏssID
 
şass_id
)

4761  (
şass_id
 =ğ
JS_CLASS_BYTECODE_FUNCTION
 ||

4762 
şass_id
 =ğ
JS_CLASS_GENERATOR_FUNCTION
 ||

4763 
şass_id
 =ğ
JS_CLASS_ASYNC_FUNCTION
 ||

4764 
şass_id
 =ğ
JS_CLASS_ASYNC_GENERATOR_FUNCTION
);

4765 
	}
}

4768 
JSFunùiÚBy‹code
 *
	$JS_G‘FunùiÚBy‹code
(
JSV®ueCÚ¡
 
v®
)

4770 
JSObjeù
 *
p
;

4771 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

4772  
NULL
;

4773 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

4774 ià(!
	`js_şass_has_by‹code
(
p
->
şass_id
))

4775  
NULL
;

4776  
p
->
u
.
func
.
funùiÚ_by‹code
;

4777 
	}
}

4779 
	$js_m‘hod_£t_home_objeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

4780 
JSV®ueCÚ¡
 
home_obj
)

4782 
JSObjeù
 *
p
, *
p1
;

4783 
JSFunùiÚBy‹code
 *
b
;

4785 ià(
	`JS_VALUE_GET_TAG
(
func_obj
è!ğ
JS_TAG_OBJECT
)

4787 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

4788 ià(!
	`js_şass_has_by‹code
(
p
->
şass_id
))

4790 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

4791 ià(
b
->
Ãed_home_objeù
) {

4792 
p1
 = 
p
->
u
.
func
.
home_objeù
;

4793 ià(
p1
) {

4794 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p1
));

4796 ià(
	`JS_VALUE_GET_TAG
(
home_obj
è=ğ
JS_TAG_OBJECT
)

4797 
p1
 = 
	`JS_VALUE_GET_OBJ
(
	`JS_DupV®ue
(
ùx
, 
home_obj
));

4799 
p1
 = 
NULL
;

4800 
p
->
u
.
func
.
home_objeù
 = 
p1
;

4802 
	}
}

4804 
JSV®ue
 
	$js_g‘_funùiÚ_Çme
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
)

4806 
JSV®ue
 
Çme_¡r
;

4808 
Çme_¡r
 = 
	`JS_AtomToSŒšg
(
ùx
, 
Çme
);

4809 ià(
	`JS_AtomSymbŞHasDesütiÚ
(
ùx
, 
Çme
)) {

4810 
Çme_¡r
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "[",‚ame_str, "]");

4812  
Çme_¡r
;

4813 
	}
}

4819 
	$js_m‘hod_£t_´İ”t›s
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

4820 
JSAtom
 
Çme
, 
æags
, 
JSV®ueCÚ¡
 
home_obj
)

4822 
JSV®ue
 
Çme_¡r
;

4824 
Çme_¡r
 = 
	`js_g‘_funùiÚ_Çme
(
ùx
, 
Çme
);

4825 ià(
æags
 & 
JS_PROP_HAS_GET
) {

4826 
Çme_¡r
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "get ",‚ame_str, "");

4827 } ià(
æags
 & 
JS_PROP_HAS_SET
) {

4828 
Çme_¡r
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "set ",‚ame_str, "");

4830 ià(
	`JS_IsExû±iÚ
(
Çme_¡r
))

4832 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_Çme
, 
Çme_¡r
,

4833 
JS_PROP_CONFIGURABLE
) < 0)

4835 
	`js_m‘hod_£t_home_objeù
(
ùx
, 
func_obj
, 
home_obj
);

4837 
	}
}

4840 
JSV®ue
 
	$JS_NewCFunùiÚ3
(
JSCÚ‹xt
 *
ùx
, 
JSCFunùiÚ
 *
func
,

4841 cÚ¡ *
Çme
,

4842 
Ëngth
, 
JSCFunùiÚEnum
 
ırÙo
, 
magic
,

4843 
JSV®ueCÚ¡
 
´Ùo_v®
)

4845 
JSV®ue
 
func_obj
;

4846 
JSObjeù
 *
p
;

4847 
JSAtom
 
Çme_©om
;

4849 
func_obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
´Ùo_v®
, 
JS_CLASS_C_FUNCTION
);

4850 ià(
	`JS_IsExû±iÚ
(
func_obj
))

4851  
func_obj
;

4852 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

4853 
p
->
u
.
cfunc
.
»®m
 = 
	`JS_DupCÚ‹xt
(
ùx
);

4854 
p
->
u
.
cfunc
.
c_funùiÚ
.
g’”ic
 = 
func
;

4855 
p
->
u
.
cfunc
.
Ëngth
 =†ength;

4856 
p
->
u
.
cfunc
.
ırÙo
 = cproto;

4857 
p
->
u
.
cfunc
.
magic
 = magic;

4858 
p
->
is_cÚ¡ruùÜ
 = (
ırÙo
 =ğ
JS_CFUNC_cÚ¡ruùÜ
 ||

4859 
ırÙo
 =ğ
JS_CFUNC_cÚ¡ruùÜ_magic
 ||

4860 
ırÙo
 =ğ
JS_CFUNC_cÚ¡ruùÜ_Ü_func
 ||

4861 
ırÙo
 =ğ
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
);

4862 ià(!
Çme
)

4863 
Çme
 = "";

4864 
Çme_©om
 = 
	`JS_NewAtom
(
ùx
, 
Çme
);

4865 
	`js_funùiÚ_£t_´İ”t›s
(
ùx
, 
func_obj
, 
Çme_©om
, 
Ëngth
);

4866 
	`JS_F»eAtom
(
ùx
, 
Çme_©om
);

4867  
func_obj
;

4868 
	}
}

4871 
JSV®ue
 
	$JS_NewCFunùiÚ2
(
JSCÚ‹xt
 *
ùx
, 
JSCFunùiÚ
 *
func
,

4872 cÚ¡ *
Çme
,

4873 
Ëngth
, 
JSCFunùiÚEnum
 
ırÙo
, 
magic
)

4875  
	`JS_NewCFunùiÚ3
(
ùx
, 
func
, 
Çme
, 
Ëngth
, 
ırÙo
, 
magic
,

4876 
ùx
->
funùiÚ_´Ùo
);

4877 
	}
}

4879 
	sJSCFunùiÚD©aRecÜd
 {

4880 
JSCFunùiÚD©a
 *
	mfunc
;

4881 
ušt8_t
 
	mËngth
;

4882 
ušt8_t
 
	md©a_Ën
;

4883 
ušt16_t
 
	mmagic
;

4884 
JSV®ue
 
	md©a
[0];

4885 } 
	tJSCFunùiÚD©aRecÜd
;

4887 
	$js_c_funùiÚ_d©a_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

4889 
JSCFunùiÚD©aRecÜd
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_C_FUNCTION_DATA
);

4890 
i
;

4892 ià(
s
) {

4893 
i
 = 0; i < 
s
->
d©a_Ën
; i++) {

4894 
	`JS_F»eV®ueRT
(
¹
, 
s
->
d©a
[
i
]);

4896 
	`js_ä“_¹
(
¹
, 
s
);

4898 
	}
}

4900 
	$js_c_funùiÚ_d©a_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

4901 
JS_M¬kFunc
 *
m¬k_func
)

4903 
JSCFunùiÚD©aRecÜd
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_C_FUNCTION_DATA
);

4904 
i
;

4906 ià(
s
) {

4907 
i
 = 0; i < 
s
->
d©a_Ën
; i++) {

4908 
	`JS_M¬kV®ue
(
¹
, 
s
->
d©a
[
i
], 
m¬k_func
);

4911 
	}
}

4913 
JSV®ue
 
	$js_c_funùiÚ_d©a_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

4914 
JSV®ueCÚ¡
 
this_v®
,

4915 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
)

4917 
JSCFunùiÚD©aRecÜd
 *
s
 = 
	`JS_G‘O·que
(
func_obj
, 
JS_CLASS_C_FUNCTION_DATA
);

4918 
JSV®ueCÚ¡
 *
¬g_buf
;

4919 
i
;

4922 ià(
	`uÆik–y
(
¬gc
 < 
s
->
Ëngth
)) {

4923 
¬g_buf
 = 
	`®loÿ
(×rg_buf[0]è* 
s
->
Ëngth
);

4924 
i
 = 0; i < 
¬gc
; i++)

4925 
¬g_buf
[
i
] = 
¬gv
[i];

4926 
i
 = 
¬gc
; i < 
s
->
Ëngth
; i++)

4927 
¬g_buf
[
i
] = 
JS_UNDEFINED
;

4929 
¬g_buf
 = 
¬gv
;

4932  
s
->
	`func
(
ùx
, 
this_v®
, 
¬gc
, 
¬g_buf
, s->
magic
, s->
d©a
);

4933 
	}
}

4935 
JSV®ue
 
	$JS_NewCFunùiÚD©a
(
JSCÚ‹xt
 *
ùx
, 
JSCFunùiÚD©a
 *
func
,

4936 
Ëngth
, 
magic
, 
d©a_Ën
,

4937 
JSV®ueCÚ¡
 *
d©a
)

4939 
JSCFunùiÚD©aRecÜd
 *
s
;

4940 
JSV®ue
 
func_obj
;

4941 
i
;

4943 
func_obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
funùiÚ_´Ùo
,

4944 
JS_CLASS_C_FUNCTION_DATA
);

4945 ià(
	`JS_IsExû±iÚ
(
func_obj
))

4946  
func_obj
;

4947 
s
 = 
	`js_m®loc
(
ùx
, (*sè+ 
d©a_Ën
 * (
JSV®ue
));

4948 ià(!
s
) {

4949 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

4950  
JS_EXCEPTION
;

4952 
s
->
func
 = func;

4953 
s
->
Ëngth
 =†ength;

4954 
s
->
d©a_Ën
 = data_len;

4955 
s
->
magic
 = magic;

4956 
i
 = 0; i < 
d©a_Ën
; i++)

4957 
s
->
d©a
[
i
] = 
	`JS_DupV®ue
(
ùx
, data[i]);

4958 
	`JS_S‘O·que
(
func_obj
, 
s
);

4959 
	`js_funùiÚ_£t_´İ”t›s
(
ùx
, 
func_obj
,

4960 
JS_ATOM_em±y_¡ršg
, 
Ëngth
);

4961  
func_obj
;

4962 
	}
}

4964 
	$js_autoš™_ä“
(
JSRuÁime
 *
¹
, 
JSPrİ”ty
 *
´
)

4966 ià(
´
->
u
.
š™
.u.
š™_id
 >ğ
JS_AUTOINIT_ID_PROP
) {

4967 
	`JS_F»eCÚ‹xt
(
´
->
u
.
š™
.u.
»®m
);

4969 
	}
}

4971 
	$js_autoš™_m¬k
(
JSRuÁime
 *
¹
, 
JSPrİ”ty
 *
´
,

4972 
JS_M¬kFunc
 *
m¬k_func
)

4974 ià(
´
->
u
.
š™
.u.
š™_id
 >ğ
JS_AUTOINIT_ID_PROP
) {

4975 
	`m¬k_func
(
¹
, &
´
->
u
.
š™
.u.
»®m
->
h—d”
);

4977 
	}
}

4979 
	$ä“_´İ”ty
(
JSRuÁime
 *
¹
, 
JSPrİ”ty
 *
´
, 
´İ_æags
)

4981 ià(
	`uÆik–y
(
´İ_æags
 & 
JS_PROP_TMASK
)) {

4982 ià((
´İ_æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

4983 ià(
´
->
u
.
g‘£t
.
g‘‹r
)

4984 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
g‘‹r
));

4985 ià(
´
->
u
.
g‘£t
.
£‰”
)

4986 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
£‰”
));

4987 } ià((
´İ_æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

4988 
	`ä“_v¬_»f
(
¹
, 
´
->
u
.
v¬_»f
);

4989 } ià((
´İ_æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

4990 
	`js_autoš™_ä“
(
¹
, 
´
);

4993 
	`JS_F»eV®ueRT
(
¹
, 
´
->
u
.
v®ue
);

4995 
	}
}

4997 
fÜû_šlše
 
JSSh­ePrİ”ty
 *
	$fšd_own_´İ”ty1
(
JSObjeù
 *
p
,

4998 
JSAtom
 
©om
)

5000 
JSSh­e
 *
sh
;

5001 
JSSh­ePrİ”ty
 *
´
, *
´İ
;

5002 
šŒ_t
 
h
;

5003 
sh
 = 
p
->
sh­e
;

5004 
h
 = (
ušŒ_t
)
©om
 & 
sh
->
´İ_hash_mask
;

5005 
h
 = 
sh
->
´İ_hash_’d
[-h - 1];

5006 
´İ
 = 
	`g‘_sh­e_´İ
(
sh
);

5007 
h
) {

5008 
´
 = &
´İ
[
h
 - 1];

5009 ià(
	`lik–y
(
´
->
©om
 ==‡tom)) {

5010  
´
;

5012 
h
 = 
´
->
hash_Ãxt
;

5014  
NULL
;

5015 
	}
}

5017 
fÜû_šlše
 
JSSh­ePrİ”ty
 *
	$fšd_own_´İ”ty
(
JSPrİ”ty
 **
µr
,

5018 
JSObjeù
 *
p
,

5019 
JSAtom
 
©om
)

5021 
JSSh­e
 *
sh
;

5022 
JSSh­ePrİ”ty
 *
´
, *
´İ
;

5023 
šŒ_t
 
h
;

5024 
sh
 = 
p
->
sh­e
;

5025 
h
 = (
ušŒ_t
)
©om
 & 
sh
->
´İ_hash_mask
;

5026 
h
 = 
sh
->
´İ_hash_’d
[-h - 1];

5027 
´İ
 = 
	`g‘_sh­e_´İ
(
sh
);

5028 
h
) {

5029 
´
 = &
´İ
[
h
 - 1];

5030 ià(
	`lik–y
(
´
->
©om
 ==‡tom)) {

5031 *
µr
 = &
p
->
´İ
[
h
 - 1];

5033  
´
;

5035 
h
 = 
´
->
hash_Ãxt
;

5037 *
µr
 = 
NULL
;

5038  
NULL
;

5039 
	}
}

5042 
	$£t_cyşe_æag
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

5044 
	}
}

5046 
	$ä“_v¬_»f
(
JSRuÁime
 *
¹
, 
JSV¬Ref
 *
v¬_»f
)

5048 ià(
v¬_»f
) {

5049 
	`as£¹
(
v¬_»f
->
h—d”
.
»f_couÁ
 > 0);

5050 ià(--
v¬_»f
->
h—d”
.
»f_couÁ
 == 0) {

5051 ià(
v¬_»f
->
is_d‘ached
) {

5052 
	`JS_F»eV®ueRT
(
¹
, 
v¬_»f
->
v®ue
);

5053 
	`»move_gc_objeù
(&
v¬_»f
->
h—d”
);

5055 
	`li¡_d–
(&
v¬_»f
->
h—d”
.
lšk
);

5057 
	`js_ä“_¹
(
¹
, 
v¬_»f
);

5060 
	}
}

5062 
	$js_¬¿y_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

5064 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5065 
i
;

5067 
i
 = 0; i < 
p
->
u
.
¬¿y
.
couÁ
; i++) {

5068 
	`JS_F»eV®ueRT
(
¹
, 
p
->
u
.
¬¿y
.u.
v®ues
[
i
]);

5070 
	`js_ä“_¹
(
¹
, 
p
->
u
.
¬¿y
.u.
v®ues
);

5071 
	}
}

5073 
	$js_¬¿y_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

5074 
JS_M¬kFunc
 *
m¬k_func
)

5076 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5077 
i
;

5079 
i
 = 0; i < 
p
->
u
.
¬¿y
.
couÁ
; i++) {

5080 
	`JS_M¬kV®ue
(
¹
, 
p
->
u
.
¬¿y
.u.
v®ues
[
i
], 
m¬k_func
);

5082 
	}
}

5084 
	$js_objeù_d©a_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

5086 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5087 
	`JS_F»eV®ueRT
(
¹
, 
p
->
u
.
objeù_d©a
);

5088 
p
->
u
.
objeù_d©a
 = 
JS_UNDEFINED
;

5089 
	}
}

5091 
	$js_objeù_d©a_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

5092 
JS_M¬kFunc
 *
m¬k_func
)

5094 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5095 
	`JS_M¬kV®ue
(
¹
, 
p
->
u
.
objeù_d©a
, 
m¬k_func
);

5096 
	}
}

5098 
	$js_c_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

5100 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5102 ià(
p
->
u
.
cfunc
.
»®m
)

5103 
	`JS_F»eCÚ‹xt
(
p
->
u
.
cfunc
.
»®m
);

5104 
	}
}

5106 
	$js_c_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

5107 
JS_M¬kFunc
 *
m¬k_func
)

5109 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5111 ià(
p
->
u
.
cfunc
.
»®m
)

5112 
	`m¬k_func
(
¹
, &
p
->
u
.
cfunc
.
»®m
->
h—d”
);

5113 
	}
}

5115 
	$js_by‹code_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

5117 
JSObjeù
 *
p1
, *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5118 
JSFunùiÚBy‹code
 *
b
;

5119 
JSV¬Ref
 **
v¬_»fs
;

5120 
i
;

5122 
p1
 = 
p
->
u
.
func
.
home_objeù
;

5123 ià(
p1
) {

5124 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p1
));

5126 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

5127 ià(
b
) {

5128 
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

5129 ià(
v¬_»fs
) {

5130 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++)

5131 
	`ä“_v¬_»f
(
¹
, 
v¬_»fs
[
i
]);

5132 
	`js_ä“_¹
(
¹
, 
v¬_»fs
);

5134 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_FUNCTION_BYTECODE
, 
b
));

5136 
	}
}

5138 
	$js_by‹code_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

5139 
JS_M¬kFunc
 *
m¬k_func
)

5141 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5142 
JSV¬Ref
 **
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

5143 
JSFunùiÚBy‹code
 *
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

5144 
i
;

5146 ià(
p
->
u
.
func
.
home_objeù
) {

5147 
	`JS_M¬kV®ue
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
->
u
.
func
.
home_objeù
),

5148 
m¬k_func
);

5150 ià(
b
) {

5151 ià(
v¬_»fs
) {

5152 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

5153 
JSV¬Ref
 *
v¬_»f
 = 
v¬_»fs
[
i
];

5154 ià(
v¬_»f
 && v¬_»f->
is_d‘ached
) {

5155 
	`m¬k_func
(
¹
, &
v¬_»f
->
h—d”
);

5161 
	`JS_M¬kV®ue
(
¹
, 
	`JS_MKPTR
(
JS_TAG_FUNCTION_BYTECODE
, 
b
), 
m¬k_func
);

5163 
	}
}

5165 
	$js_bound_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

5167 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5168 
JSBoundFunùiÚ
 *
bf
 = 
p
->
u
.
bound_funùiÚ
;

5169 
i
;

5171 
	`JS_F»eV®ueRT
(
¹
, 
bf
->
func_obj
);

5172 
	`JS_F»eV®ueRT
(
¹
, 
bf
->
this_v®
);

5173 
i
 = 0; i < 
bf
->
¬gc
; i++) {

5174 
	`JS_F»eV®ueRT
(
¹
, 
bf
->
¬gv
[
i
]);

5176 
	`js_ä“_¹
(
¹
, 
bf
);

5177 
	}
}

5179 
	$js_bound_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

5180 
JS_M¬kFunc
 *
m¬k_func
)

5182 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5183 
JSBoundFunùiÚ
 *
bf
 = 
p
->
u
.
bound_funùiÚ
;

5184 
i
;

5186 
	`JS_M¬kV®ue
(
¹
, 
bf
->
func_obj
, 
m¬k_func
);

5187 
	`JS_M¬kV®ue
(
¹
, 
bf
->
this_v®
, 
m¬k_func
);

5188 
i
 = 0; i < 
bf
->
¬gc
; i++)

5189 
	`JS_M¬kV®ue
(
¹
, 
bf
->
¬gv
[
i
], 
m¬k_func
);

5190 
	}
}

5192 
	$js_fÜ_š_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

5194 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5195 
JSFÜInI‹¿tÜ
 *
™
 = 
p
->
u
.
fÜ_š_™”©Ü
;

5196 
	`JS_F»eV®ueRT
(
¹
, 
™
->
obj
);

5197 
	`js_ä“_¹
(
¹
, 
™
);

5198 
	}
}

5200 
	$js_fÜ_š_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

5201 
JS_M¬kFunc
 *
m¬k_func
)

5203 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

5204 
JSFÜInI‹¿tÜ
 *
™
 = 
p
->
u
.
fÜ_š_™”©Ü
;

5205 
	`JS_M¬kV®ue
(
¹
, 
™
->
obj
, 
m¬k_func
);

5206 
	}
}

5208 
	$ä“_objeù
(
JSRuÁime
 *
¹
, 
JSObjeù
 *
p
)

5210 
i
;

5211 
JSCÏssFš®iz”
 *
fš®iz”
;

5212 
JSSh­e
 *
sh
;

5213 
JSSh­ePrİ”ty
 *
´
;

5215 
p
->
ä“_m¬k
 = 1;

5218 
sh
 = 
p
->
sh­e
;

5219 
´
 = 
	`g‘_sh­e_´İ
(
sh
);

5220 
i
 = 0; i < 
sh
->
´İ_couÁ
; i++) {

5221 
	`ä“_´İ”ty
(
¹
, &
p
->
´İ
[
i
], 
´
->
æags
);

5222 
´
++;

5224 
	`js_ä“_¹
(
¹
, 
p
->
´İ
);

5227 
	`js_ä“_sh­e
(
¹
, 
sh
);

5230 
p
->
sh­e
 = 
NULL
;

5231 
p
->
´İ
 = 
NULL
;

5233 ià(
	`uÆik–y
(
p
->
fœ¡_w—k_»f
)) {

5234 
	`»£t_w—k_»f
(
¹
, 
p
);

5237 
fš®iz”
 = 
¹
->
şass_¬¿y
[
p
->
şass_id
].finalizer;

5238 ià(
fš®iz”
)

5239 (*
fš®iz”
)(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
));

5242 
p
->
şass_id
 = 0;

5243 
p
->
u
.
İaque
 = 
NULL
;

5244 
p
->
u
.
func
.
v¬_»fs
 = 
NULL
;

5245 
p
->
u
.
func
.
home_objeù
 = 
NULL
;

5247 
	`»move_gc_objeù
(&
p
->
h—d”
);

5248 ià(
¹
->
gc_pha£
 =ğ
JS_GC_PHASE_REMOVE_CYCLES
 && 
p
->
h—d”
.
»f_couÁ
 != 0) {

5249 
	`li¡_add_
(&
p
->
h—d”
.
lšk
, &
¹
->
gc_z”o_»f_couÁ_li¡
);

5251 
	`js_ä“_¹
(
¹
, 
p
);

5253 
	}
}

5255 
	$ä“_gc_objeù
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
gp
)

5257 
gp
->
gc_obj_ty³
) {

5258 
JS_GC_OBJ_TYPE_JS_OBJECT
:

5259 
	`ä“_objeù
(
¹
, (
JSObjeù
 *)
gp
);

5261 
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
:

5262 
	`ä“_funùiÚ_by‹code
(
¹
, (
JSFunùiÚBy‹code
 *)
gp
);

5265 
	`abÜt
();

5267 
	}
}

5269 
	$ä“_z”o_»fcouÁ
(
JSRuÁime
 *
¹
)

5271 
li¡_h—d
 *
–
;

5272 
JSGCObjeùH—d”
 *
p
;

5274 
¹
->
gc_pha£
 = 
JS_GC_PHASE_DECREF
;

5276 
–
 = 
¹
->
gc_z”o_»f_couÁ_li¡
.
Ãxt
;

5277 ià(
–
 =ğ&
¹
->
gc_z”o_»f_couÁ_li¡
)

5279 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

5280 
	`as£¹
(
p
->
»f_couÁ
 == 0);

5281 
	`ä“_gc_objeù
(
¹
, 
p
);

5283 
¹
->
gc_pha£
 = 
JS_GC_PHASE_NONE
;

5284 
	}
}

5287 
	$__JS_F»eV®ueRT
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v
)

5289 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_TAG
(
v
);

5291 #ifdeà
DUMP_FREE


5293 
	`´štf
("Freeing ");

5294 ià(
g
 =ğ
JS_TAG_OBJECT
) {

5295 
	`JS_DumpObjeù
(
¹
, 
	`JS_VALUE_GET_OBJ
(
v
));

5297 
	`JS_DumpV®ueShÜt
(
¹
, 
v
);

5298 
	`´štf
("\n");

5303 
g
) {

5304 
JS_TAG_STRING
:

5306 
JSSŒšg
 *
p
 = 
	`JS_VALUE_GET_STRING
(
v
);

5307 ià(
p
->
©om_ty³
) {

5308 
	`JS_F»eAtomSŒuù
(
¹
, 
p
);

5310 #ifdeà
DUMP_LEAKS


5311 
	`li¡_d–
(&
p
->
lšk
);

5313 
	`js_ä“_¹
(
¹
, 
p
);

5317 
JS_TAG_OBJECT
:

5318 
JS_TAG_FUNCTION_BYTECODE
:

5320 
JSGCObjeùH—d”
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v
);

5321 ià(
¹
->
gc_pha£
 !ğ
JS_GC_PHASE_REMOVE_CYCLES
) {

5322 
	`li¡_d–
(&
p
->
lšk
);

5323 
	`li¡_add
(&
p
->
lšk
, &
¹
->
gc_z”o_»f_couÁ_li¡
);

5324 ià(
¹
->
gc_pha£
 =ğ
JS_GC_PHASE_NONE
) {

5325 
	`ä“_z”o_»fcouÁ
(
¹
);

5330 
JS_TAG_MODULE
:

5331 
	`abÜt
();

5333 #ifdeà
CONFIG_BIGNUM


5334 
JS_TAG_BIG_INT
:

5335 
JS_TAG_BIG_FLOAT
:

5337 
JSBigFlßt
 *
bf
 = 
	`JS_VALUE_GET_PTR
(
v
);

5338 
	`bf_d–‘e
(&
bf
->
num
);

5339 
	`js_ä“_¹
(
¹
, 
bf
);

5342 
JS_TAG_BIG_DECIMAL
:

5344 
JSBigDecim®
 *
bf
 = 
	`JS_VALUE_GET_PTR
(
v
);

5345 
	`bfdec_d–‘e
(&
bf
->
num
);

5346 
	`js_ä“_¹
(
¹
, 
bf
);

5350 
JS_TAG_SYMBOL
:

5352 
JSAtomSŒuù
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v
);

5353 
	`JS_F»eAtomSŒuù
(
¹
, 
p
);

5357 
	`´štf
("__JS_F»eV®ue: unknowÀg=%d\n", 
g
);

5358 
	`abÜt
();

5360 
	}
}

5362 
	$__JS_F»eV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v
)

5364 
	`__JS_F»eV®ueRT
(
ùx
->
¹
, 
v
);

5365 
	}
}

5369 
	$add_gc_objeù
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
h
,

5370 
JSGCObjeùTy³Enum
 
ty³
)

5372 
h
->
m¬k
 = 0;

5373 
h
->
gc_obj_ty³
 = 
ty³
;

5374 
	`li¡_add_
(&
h
->
lšk
, &
¹
->
gc_obj_li¡
);

5375 
	}
}

5377 
	$»move_gc_objeù
(
JSGCObjeùH—d”
 *
h
)

5379 
	`li¡_d–
(&
h
->
lšk
);

5380 
	}
}

5382 
	$JS_M¬kV®ue
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
, 
JS_M¬kFunc
 *
m¬k_func
)

5384 ià(
	`JS_VALUE_HAS_REF_COUNT
(
v®
)) {

5385 
	`JS_VALUE_GET_TAG
(
v®
)) {

5386 
JS_TAG_OBJECT
:

5387 
JS_TAG_FUNCTION_BYTECODE
:

5388 
	`m¬k_func
(
¹
, 
	`JS_VALUE_GET_PTR
(
v®
));

5394 
	}
}

5396 
	$m¬k_chd»n
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
gp
,

5397 
JS_M¬kFunc
 *
m¬k_func
)

5399 
gp
->
gc_obj_ty³
) {

5400 
JS_GC_OBJ_TYPE_JS_OBJECT
:

5402 
JSObjeù
 *
p
 = (JSObjeù *)
gp
;

5403 
JSSh­ePrİ”ty
 *
´s
;

5404 
JSSh­e
 *
sh
;

5405 
i
;

5406 
sh
 = 
p
->
sh­e
;

5407 
	`m¬k_func
(
¹
, &
sh
->
h—d”
);

5409 
´s
 = 
	`g‘_sh­e_´İ
(
sh
);

5410 
i
 = 0; i < 
sh
->
´İ_couÁ
; i++) {

5411 
JSPrİ”ty
 *
´
 = &
p
->
´İ
[
i
];

5412 ià(
´s
->
©om
 !ğ
JS_ATOM_NULL
) {

5413 ià(
´s
->
æags
 & 
JS_PROP_TMASK
) {

5414 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

5415 ià(
´
->
u
.
g‘£t
.
g‘‹r
)

5416 
	`m¬k_func
(
¹
, &
´
->
u
.
g‘£t
.
g‘‹r
->
h—d”
);

5417 ià(
´
->
u
.
g‘£t
.
£‰”
)

5418 
	`m¬k_func
(
¹
, &
´
->
u
.
g‘£t
.
£‰”
->
h—d”
);

5419 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

5420 ià(
´
->
u
.
v¬_»f
->
is_d‘ached
) {

5423 
	`m¬k_func
(
¹
, &
´
->
u
.
v¬_»f
->
h—d”
);

5425 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

5426 
	`js_autoš™_m¬k
(
¹
, 
´
, 
m¬k_func
);

5429 
	`JS_M¬kV®ue
(
¹
, 
´
->
u
.
v®ue
, 
m¬k_func
);

5432 
´s
++;

5435 ià(
p
->
şass_id
 !ğ
JS_CLASS_OBJECT
) {

5436 
JSCÏssGCM¬k
 *
gc_m¬k
;

5437 
gc_m¬k
 = 
¹
->
şass_¬¿y
[
p
->
şass_id
].gc_mark;

5438 ià(
gc_m¬k
)

5439 
	`gc_m¬k
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
m¬k_func
);

5443 
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
:

5446 
JSFunùiÚBy‹code
 *
b
 = (JSFunùiÚBy‹cod*)
gp
;

5447 
i
;

5448 
i
 = 0; i < 
b
->
ıoŞ_couÁ
; i++) {

5449 
	`JS_M¬kV®ue
(
¹
, 
b
->
ıoŞ
[
i
], 
m¬k_func
);

5451 ià(
b
->
»®m
)

5452 
	`m¬k_func
(
¹
, &
b
->
»®m
->
h—d”
);

5455 
JS_GC_OBJ_TYPE_VAR_REF
:

5457 
JSV¬Ref
 *
v¬_»f
 = (JSV¬Reà*)
gp
;

5459 
	`as£¹
(
v¬_»f
->
is_d‘ached
);

5460 
	`JS_M¬kV®ue
(
¹
, *
v¬_»f
->
pv®ue
, 
m¬k_func
);

5463 
JS_GC_OBJ_TYPE_ASYNC_FUNCTION
:

5465 
JSAsyncFunùiÚD©a
 *
s
 = (JSAsyncFunùiÚD©¨*)
gp
;

5466 ià(
s
->
is_aùive
)

5467 
	`async_func_m¬k
(
¹
, &
s
->
func_¡©e
, 
m¬k_func
);

5468 
	`JS_M¬kV®ue
(
¹
, 
s
->
»sŞvšg_funcs
[0], 
m¬k_func
);

5469 
	`JS_M¬kV®ue
(
¹
, 
s
->
»sŞvšg_funcs
[1], 
m¬k_func
);

5472 
JS_GC_OBJ_TYPE_SHAPE
:

5474 
JSSh­e
 *
sh
 = (JSSh­*)
gp
;

5475 ià(
sh
->
´Ùo
 !ğ
NULL
) {

5476 
	`m¬k_func
(
¹
, &
sh
->
´Ùo
->
h—d”
);

5480 
JS_GC_OBJ_TYPE_JS_CONTEXT
:

5482 
JSCÚ‹xt
 *
ùx
 = (JSCÚ‹xˆ*)
gp
;

5483 
	`JS_M¬kCÚ‹xt
(
¹
, 
ùx
, 
m¬k_func
);

5487 
	`abÜt
();

5489 
	}
}

5491 
	$gc_deüef_chd
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
p
)

5493 
	`as£¹
(
p
->
»f_couÁ
 > 0);

5494 
p
->
»f_couÁ
--;

5495 ià(
p
->
»f_couÁ
 =ğ0 &&…->
m¬k
 == 1) {

5496 
	`li¡_d–
(&
p
->
lšk
);

5497 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
tmp_obj_li¡
);

5499 
	}
}

5501 
	$gc_deüef
(
JSRuÁime
 *
¹
)

5503 
li¡_h—d
 *
–
, *
–1
;

5504 
JSGCObjeùH—d”
 *
p
;

5506 
	`š™_li¡_h—d
(&
¹
->
tmp_obj_li¡
);

5511 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
¹
->
gc_obj_li¡
) {

5512 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

5513 
	`as£¹
(
p
->
m¬k
 == 0);

5514 
	`m¬k_chd»n
(
¹
, 
p
, 
gc_deüef_chd
);

5515 
p
->
m¬k
 = 1;

5516 ià(
p
->
»f_couÁ
 == 0) {

5517 
	`li¡_d–
(&
p
->
lšk
);

5518 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
tmp_obj_li¡
);

5521 
	}
}

5523 
	$gc_sÿn_šüef_chd
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
p
)

5525 
p
->
»f_couÁ
++;

5526 ià(
p
->
»f_couÁ
 == 1) {

5529 
	`li¡_d–
(&
p
->
lšk
);

5530 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
gc_obj_li¡
);

5531 
p
->
m¬k
 = 0;

5533 
	}
}

5535 
	$gc_sÿn_šüef_chd2
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
p
)

5537 
p
->
»f_couÁ
++;

5538 
	}
}

5540 
	$gc_sÿn
(
JSRuÁime
 *
¹
)

5542 
li¡_h—d
 *
–
;

5543 
JSGCObjeùH—d”
 *
p
;

5546 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

5547 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

5548 
	`as£¹
(
p
->
»f_couÁ
 > 0);

5549 
p
->
m¬k
 = 0;

5550 
	`m¬k_chd»n
(
¹
, 
p
, 
gc_sÿn_šüef_chd
);

5554 
	`li¡_fÜ_—ch
(
–
, &
¹
->
tmp_obj_li¡
) {

5555 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

5556 
	`m¬k_chd»n
(
¹
, 
p
, 
gc_sÿn_šüef_chd2
);

5558 
	}
}

5560 
	$gc_ä“_cyşes
(
JSRuÁime
 *
¹
)

5562 
li¡_h—d
 *
–
, *
–1
;

5563 
JSGCObjeùH—d”
 *
p
;

5564 #ifdeà
DUMP_GC_FREE


5565 
BOOL
 
h—d”_dÚe
 = 
FALSE
;

5568 
¹
->
gc_pha£
 = 
JS_GC_PHASE_REMOVE_CYCLES
;

5571 
–
 = 
¹
->
tmp_obj_li¡
.
Ãxt
;

5572 ià(
–
 =ğ&
¹
->
tmp_obj_li¡
)

5574 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

5578 
p
->
gc_obj_ty³
) {

5579 
JS_GC_OBJ_TYPE_JS_OBJECT
:

5580 
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
:

5581 #ifdeà
DUMP_GC_FREE


5582 ià(!
h—d”_dÚe
) {

5583 
	`´štf
("Freeing cycles:\n");

5584 
	`JS_DumpObjeùH—d”
(
¹
);

5585 
h—d”_dÚe
 = 
TRUE
;

5587 
	`JS_DumpGCObjeù
(
¹
, 
p
);

5589 
	`ä“_gc_objeù
(
¹
, 
p
);

5592 
	`li¡_d–
(&
p
->
lšk
);

5593 
	`li¡_add_
(&
p
->
lšk
, &
¹
->
gc_z”o_»f_couÁ_li¡
);

5597 
¹
->
gc_pha£
 = 
JS_GC_PHASE_NONE
;

5599 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
¹
->
gc_z”o_»f_couÁ_li¡
) {

5600 
p
 = 
	`li¡_’Œy
(
–
, 
JSGCObjeùH—d”
, 
lšk
);

5601 
	`as£¹
(
p
->
gc_obj_ty³
 =ğ
JS_GC_OBJ_TYPE_JS_OBJECT
 ||

5602 
p
->
gc_obj_ty³
 =ğ
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
);

5603 
	`js_ä“_¹
(
¹
, 
p
);

5606 
	`š™_li¡_h—d
(&
¹
->
gc_z”o_»f_couÁ_li¡
);

5607 
	}
}

5609 
	$JS_RunGC
(
JSRuÁime
 *
¹
)

5613 
	`gc_deüef
(
¹
);

5616 
	`gc_sÿn
(
¹
);

5619 
	`gc_ä“_cyşes
(
¹
);

5620 
	}
}

5625 
BOOL
 
	$JS_IsLiveObjeù
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
obj
)

5627 
JSObjeù
 *
p
;

5628 ià(!
	`JS_IsObjeù
(
obj
))

5629  
FALSE
;

5630 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

5631  !
p
->
ä“_m¬k
;

5632 
	}
}

5636 
	sJSMemÜyU§ge_h–³r
 {

5637 
	mmemÜy_u£d_couÁ
;

5638 
	m¡r_couÁ
;

5639 
	m¡r_size
;

5640 
sšt64_t
 
	mjs_func_couÁ
;

5641 
	mjs_func_size
;

5642 
sšt64_t
 
	mjs_func_code_size
;

5643 
sšt64_t
 
	mjs_func_pc2lše_couÁ
;

5644 
sšt64_t
 
	mjs_func_pc2lše_size
;

5645 } 
	tJSMemÜyU§ge_h–³r
;

5647 
compu‹_v®ue_size
(
JSV®ueCÚ¡
 
v®
, 
JSMemÜyU§ge_h–³r
 *
hp
);

5649 
	$compu‹_js¡ršg_size
(
JSSŒšg
 *
¡r
, 
JSMemÜyU§ge_h–³r
 *
hp
)

5651 ià(!
¡r
->
©om_ty³
) {

5652 
s_»f_couÁ
 = 
¡r
->
h—d”
.
»f_couÁ
;

5653 
hp
->
¡r_couÁ
 +ğ1 / 
s_»f_couÁ
;

5654 
hp
->
¡r_size
 +ğ(((*
¡r
è+ (¡r->
Ën
 << sŒ->
is_wide_ch¬
) +

5655 1 - 
¡r
->
is_wide_ch¬
è/ 
s_»f_couÁ
);

5657 
	}
}

5659 
	$compu‹_by‹code_size
(
JSFunùiÚBy‹code
 *
b
, 
JSMemÜyU§ge_h–³r
 *
hp
)

5661 
memÜy_u£d_couÁ
, 
js_func_size
, 
i
;

5663 
memÜy_u£d_couÁ
 = 0;

5664 
js_func_size
 = 
	`off£tof
(
JSFunùiÚBy‹code
, 
debug
);

5665 ià(
b
->
v¬defs
) {

5666 
js_func_size
 +ğ(
b
->
¬g_couÁ
 + b->
v¬_couÁ
è* (*b->
v¬defs
);

5668 ià(
b
->
ıoŞ
) {

5669 
js_func_size
 +ğ
b
->
ıoŞ_couÁ
 * (*b->
ıoŞ
);

5670 
i
 = 0; i < 
b
->
ıoŞ_couÁ
; i++) {

5671 
JSV®ueCÚ¡
 
v®
 = 
b
->
ıoŞ
[
i
];

5672 
	`compu‹_v®ue_size
(
v®
, 
hp
);

5675 ià(
b
->
şosu»_v¬
) {

5676 
js_func_size
 +ğ
b
->
şosu»_v¬_couÁ
 * (*b->
şosu»_v¬
);

5678 ià(!
b
->
»ad_Úly_by‹code
 && b->
by‹_code_buf
) {

5679 
hp
->
js_func_code_size
 +ğ
b
->
by‹_code_Ën
;

5681 ià(
b
->
has_debug
) {

5682 
js_func_size
 +ğ(*
b
è- 
	`off£tof
(
JSFunùiÚBy‹code
, 
debug
);

5683 ià(
b
->
debug
.
sourû
) {

5684 
memÜy_u£d_couÁ
++;

5685 
js_func_size
 +ğ
b
->
debug
.
sourû_Ën
 + 1;

5687 ià(
b
->
debug
.
pc2lše_Ën
) {

5688 
memÜy_u£d_couÁ
++;

5689 
hp
->
js_func_pc2lše_couÁ
 += 1;

5690 
hp
->
js_func_pc2lše_size
 +ğ
b
->
debug
.
pc2lše_Ën
;

5693 
hp
->
js_func_size
 += js_func_size;

5694 
hp
->
js_func_couÁ
 += 1;

5695 
hp
->
memÜy_u£d_couÁ
 += memory_used_count;

5696 
	}
}

5698 
	$compu‹_v®ue_size
(
JSV®ueCÚ¡
 
v®
, 
JSMemÜyU§ge_h–³r
 *
hp
)

5700 
	`JS_VALUE_GET_TAG
(
v®
)) {

5701 
JS_TAG_STRING
:

5702 
	`compu‹_js¡ršg_size
(
	`JS_VALUE_GET_STRING
(
v®
), 
hp
);

5704 #ifdeà
CONFIG_BIGNUM


5705 
JS_TAG_BIG_INT
:

5706 
JS_TAG_BIG_FLOAT
:

5707 
JS_TAG_BIG_DECIMAL
:

5712 
	}
}

5714 
	$JS_Compu‹MemÜyU§ge
(
JSRuÁime
 *
¹
, 
JSMemÜyU§ge
 *
s
)

5716 
li¡_h—d
 *
–
, *
–1
;

5717 
i
;

5718 
JSMemÜyU§ge_h–³r
 
mem
 = { 0 }, *
hp
 = &mem;

5720 
	`mem£t
(
s
, 0, (*s));

5721 
s
->
m®loc_couÁ
 = 
¹
->
m®loc_¡©e
.malloc_count;

5722 
s
->
m®loc_size
 = 
¹
->
m®loc_¡©e
.malloc_size;

5723 
s
->
m®loc_lim™
 = 
¹
->
m®loc_¡©e
.malloc_limit;

5725 
s
->
memÜy_u£d_couÁ
 = 2;

5726 
s
->
memÜy_u£d_size
 = (
JSRuÁime
è+ (
JSV®ue
è* 
¹
->
şass_couÁ
;

5728 
	`li¡_fÜ_—ch
(
–
, &
¹
->
cÚ‹xt_li¡
) {

5729 
JSCÚ‹xt
 *
ùx
 = 
	`li¡_’Œy
(
–
, JSCÚ‹xt, 
lšk
);

5730 
JSSh­e
 *
sh
 = 
ùx
->
¬¿y_sh­e
;

5731 
s
->
memÜy_u£d_couÁ
 += 2;

5732 
s
->
memÜy_u£d_size
 +ğ(
JSCÚ‹xt
) +

5733 (
JSV®ue
è* 
¹
->
şass_couÁ
;

5734 
s
->
bš¬y_objeù_couÁ
 +ğ
ùx
->binary_object_count;

5735 
s
->
bš¬y_objeù_size
 +ğ
ùx
->binary_object_size;

5738 ià(
sh
 && !sh->
is_hashed
) {

5739 
hash_size
 = 
sh
->
´İ_hash_mask
 + 1;

5740 
s
->
sh­e_couÁ
++;

5741 
s
->
sh­e_size
 +ğ
	`g‘_sh­e_size
(
hash_size
, 
sh
->
´İ_size
);

5743 
	`li¡_fÜ_—ch
(
–1
, &
ùx
->
lßded_moduËs
) {

5744 
JSModuËDef
 *
m
 = 
	`li¡_’Œy
(
–1
, JSModuËDef, 
lšk
);

5745 
s
->
memÜy_u£d_couÁ
 += 1;

5746 
s
->
memÜy_u£d_size
 +ğ(*
m
);

5747 ià(
m
->
»q_moduË_’Œ›s
) {

5748 
s
->
memÜy_u£d_couÁ
 += 1;

5749 
s
->
memÜy_u£d_size
 +ğ
m
->
»q_moduË_’Œ›s_couÁ
 * (*m->
»q_moduË_’Œ›s
);

5751 ià(
m
->
expÜt_’Œ›s
) {

5752 
s
->
memÜy_u£d_couÁ
 += 1;

5753 
s
->
memÜy_u£d_size
 +ğ
m
->
expÜt_’Œ›s_couÁ
 * (*m->
expÜt_’Œ›s
);

5754 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

5755 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

5756 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
 && me->
u
.
loÿl
.
v¬_»f
) {

5758 
s
->
memÜy_u£d_couÁ
 += 1;

5759 
	`compu‹_v®ue_size
(
me
->
u
.
loÿl
.
v¬_»f
->
v®ue
, 
hp
);

5763 ià(
m
->
¡¬_expÜt_’Œ›s
) {

5764 
s
->
memÜy_u£d_couÁ
 += 1;

5765 
s
->
memÜy_u£d_size
 +ğ
m
->
¡¬_expÜt_’Œ›s_couÁ
 * (*m->
¡¬_expÜt_’Œ›s
);

5767 ià(
m
->
impÜt_’Œ›s
) {

5768 
s
->
memÜy_u£d_couÁ
 += 1;

5769 
s
->
memÜy_u£d_size
 +ğ
m
->
impÜt_’Œ›s_couÁ
 * (*m->
impÜt_’Œ›s
);

5771 
	`compu‹_v®ue_size
(
m
->
moduË_ns
, 
hp
);

5772 
	`compu‹_v®ue_size
(
m
->
func_obj
, 
hp
);

5776 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

5777 
JSGCObjeùH—d”
 *
gp
 = 
	`li¡_’Œy
(
–
, JSGCObjeùH—d”, 
lšk
);

5778 
JSObjeù
 *
p
;

5779 
JSSh­e
 *
sh
;

5780 
JSSh­ePrİ”ty
 *
´s
;

5783 ià(
gp
->
gc_obj_ty³
 =ğ
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
) {

5784 
	`compu‹_by‹code_size
((
JSFunùiÚBy‹code
 *)
gp
, 
hp
);

5786 } ià(
gp
->
gc_obj_ty³
 !ğ
JS_GC_OBJ_TYPE_JS_OBJECT
) {

5789 
p
 = (
JSObjeù
 *)
gp
;

5790 
sh
 = 
p
->
sh­e
;

5791 
s
->
obj_couÁ
++;

5792 ià(
p
->
´İ
) {

5793 
s
->
memÜy_u£d_couÁ
++;

5794 
s
->
´İ_size
 +ğ
sh
->´İ_siz* (*
p
->
´İ
);

5795 
s
->
´İ_couÁ
 +ğ
sh
->prop_count;

5796 
´s
 = 
	`g‘_sh­e_´İ
(
sh
);

5797 
i
 = 0; i < 
sh
->
´İ_couÁ
; i++) {

5798 
JSPrİ”ty
 *
´
 = &
p
->
´İ
[
i
];

5799 ià(
´s
->
©om
 !ğ
JS_ATOM_NULL
 && !Õrs->
æags
 & 
JS_PROP_TMASK
)) {

5800 
	`compu‹_v®ue_size
(
´
->
u
.
v®ue
, 
hp
);

5802 
´s
++;

5806 ià(!
sh
->
is_hashed
) {

5807 
hash_size
 = 
sh
->
´İ_hash_mask
 + 1;

5808 
s
->
sh­e_couÁ
++;

5809 
s
->
sh­e_size
 +ğ
	`g‘_sh­e_size
(
hash_size
, 
sh
->
´İ_size
);

5812 
p
->
şass_id
) {

5813 
JS_CLASS_ARRAY
:

5814 
JS_CLASS_ARGUMENTS
:

5815 
s
->
¬¿y_couÁ
++;

5816 ià(
p
->
ç¡_¬¿y
) {

5817 
s
->
ç¡_¬¿y_couÁ
++;

5818 ià(
p
->
u
.
¬¿y
.u.
v®ues
) {

5819 
s
->
memÜy_u£d_couÁ
++;

5820 
s
->
memÜy_u£d_size
 +ğ
p
->
u
.
¬¿y
.
couÁ
 *

5821 (*
p
->
u
.
¬¿y
.u.
v®ues
);

5822 
s
->
ç¡_¬¿y_–em’ts
 +ğ
p
->
u
.
¬¿y
.
couÁ
;

5823 
i
 = 0; i < 
p
->
u
.
¬¿y
.
couÁ
; i++) {

5824 
	`compu‹_v®ue_size
(
p
->
u
.
¬¿y
.u.
v®ues
[
i
], 
hp
);

5829 
JS_CLASS_NUMBER
:

5830 
JS_CLASS_STRING
:

5831 
JS_CLASS_BOOLEAN
:

5832 
JS_CLASS_SYMBOL
:

5833 
JS_CLASS_DATE
:

5834 #ifdeà
CONFIG_BIGNUM


5835 
JS_CLASS_BIG_INT
:

5836 
JS_CLASS_BIG_FLOAT
:

5837 
JS_CLASS_BIG_DECIMAL
:

5839 
	`compu‹_v®ue_size
(
p
->
u
.
objeù_d©a
, 
hp
);

5841 
JS_CLASS_C_FUNCTION
:

5842 
s
->
c_func_couÁ
++;

5844 
JS_CLASS_BYTECODE_FUNCTION
:

5846 
JSFunùiÚBy‹code
 *
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

5847 
JSV¬Ref
 **
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

5849 ià(
v¬_»fs
) {

5850 
s
->
memÜy_u£d_couÁ
++;

5851 
s
->
js_func_size
 +ğ
b
->
şosu»_v¬_couÁ
 * (*
v¬_»fs
);

5852 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

5853 ià(
v¬_»fs
[
i
]) {

5854 
»f_couÁ
 = 
v¬_»fs
[
i
]->
h—d”
.ref_count;

5855 
s
->
memÜy_u£d_couÁ
 +ğ1 / 
»f_couÁ
;

5856 
s
->
js_func_size
 +ğ(*
v¬_»fs
[
i
]è/ 
»f_couÁ
;

5858 ià(
v¬_»fs
[
i
]->
pv®ue
 =ğ&v¬_»fs[i]->
v®ue
) {

5860 
	`compu‹_v®ue_size
(
v¬_»fs
[
i
]->
v®ue
, 
hp
);

5867 
JS_CLASS_BOUND_FUNCTION
:

5869 
JSBoundFunùiÚ
 *
bf
 = 
p
->
u
.
bound_funùiÚ
;

5871 
i
 = 0; i < 
bf
->
¬gc
; i++) {

5872 
	`compu‹_v®ue_size
(
bf
->
¬gv
[
i
], 
hp
);

5874 
s
->
memÜy_u£d_couÁ
 += 1;

5875 
s
->
memÜy_u£d_size
 +ğ(*
bf
è+ bf->
¬gc
 * (*bf->
¬gv
);

5878 
JS_CLASS_C_FUNCTION_DATA
:

5880 
JSCFunùiÚD©aRecÜd
 *
fd
 = 
p
->
u
.
c_funùiÚ_d©a_»cÜd
;

5881 ià(
fd
) {

5882 
i
 = 0; i < 
fd
->
d©a_Ën
; i++) {

5883 
	`compu‹_v®ue_size
(
fd
->
d©a
[
i
], 
hp
);

5885 
s
->
memÜy_u£d_couÁ
 += 1;

5886 
s
->
memÜy_u£d_size
 +ğ(*
fd
è+ fd->
d©a_Ën
 * (*fd->
d©a
);

5890 
JS_CLASS_REGEXP
:

5891 
	`compu‹_js¡ršg_size
(
p
->
u
.
»gexp
.
·‰”n
, 
hp
);

5892 
	`compu‹_js¡ršg_size
(
p
->
u
.
»gexp
.
by‹code
, 
hp
);

5895 
JS_CLASS_FOR_IN_ITERATOR
:

5897 
JSFÜInI‹¿tÜ
 *
™
 = 
p
->
u
.
fÜ_š_™”©Ü
;

5898 ià(
™
) {

5899 
	`compu‹_v®ue_size
(
™
->
obj
, 
hp
);

5900 
s
->
memÜy_u£d_couÁ
 += 1;

5901 
s
->
memÜy_u£d_size
 +ğ(*
™
);

5905 
JS_CLASS_ARRAY_BUFFER
:

5906 
JS_CLASS_SHARED_ARRAY_BUFFER
:

5908 
JSA¼ayBufãr
 *
abuf
 = 
p
->
u
.
¬¿y_bufãr
;

5909 ià(
abuf
) {

5910 
s
->
memÜy_u£d_couÁ
 += 1;

5911 
s
->
memÜy_u£d_size
 +ğ(*
abuf
);

5912 ià(
abuf
->
d©a
) {

5913 
s
->
memÜy_u£d_couÁ
 += 1;

5914 
s
->
memÜy_u£d_size
 +ğ
abuf
->
by‹_Ëngth
;

5919 
JS_CLASS_GENERATOR
:

5920 
JS_CLASS_UINT8C_ARRAY
:

5921 
JS_CLASS_INT8_ARRAY
:

5922 
JS_CLASS_UINT8_ARRAY
:

5923 
JS_CLASS_INT16_ARRAY
:

5924 
JS_CLASS_UINT16_ARRAY
:

5925 
JS_CLASS_INT32_ARRAY
:

5926 
JS_CLASS_UINT32_ARRAY
:

5927 #ifdeà
CONFIG_BIGNUM


5928 
JS_CLASS_BIG_INT64_ARRAY
:

5929 
JS_CLASS_BIG_UINT64_ARRAY
:

5931 
JS_CLASS_FLOAT32_ARRAY
:

5932 
JS_CLASS_FLOAT64_ARRAY
:

5933 
JS_CLASS_DATAVIEW
:

5934 #ifdeà
CONFIG_BIGNUM


5935 
JS_CLASS_FLOAT_ENV
:

5937 
JS_CLASS_MAP
:

5938 
JS_CLASS_SET
:

5939 
JS_CLASS_WEAKMAP
:

5940 
JS_CLASS_WEAKSET
:

5941 
JS_CLASS_MAP_ITERATOR
:

5942 
JS_CLASS_SET_ITERATOR
:

5943 
JS_CLASS_ARRAY_ITERATOR
:

5944 
JS_CLASS_STRING_ITERATOR
:

5945 
JS_CLASS_PROXY
:

5946 
JS_CLASS_PROMISE
:

5947 
JS_CLASS_PROMISE_RESOLVE_FUNCTION
:

5948 
JS_CLASS_PROMISE_REJECT_FUNCTION
:

5949 
JS_CLASS_ASYNC_FUNCTION_RESOLVE
:

5950 
JS_CLASS_ASYNC_FUNCTION_REJECT
:

5951 
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
:

5952 
JS_CLASS_ASYNC_GENERATOR
:

5956 ià(
p
->
u
.
İaque
) {

5957 
s
->
memÜy_u£d_couÁ
 += 1;

5962 
s
->
obj_size
 +ğs->
obj_couÁ
 * (
JSObjeù
);

5965 
s
->
memÜy_u£d_couÁ
++;

5966 
s
->
memÜy_u£d_size
 +ğ(
¹
->
sh­e_hash
[0]è*„t->
sh­e_hash_size
;

5967 
i
 = 0; i < 
¹
->
sh­e_hash_size
; i++) {

5968 
JSSh­e
 *
sh
;

5969 
sh
 = 
¹
->
sh­e_hash
[
i
]; sh !ğ
NULL
; sh = sh->
sh­e_hash_Ãxt
) {

5970 
hash_size
 = 
sh
->
´İ_hash_mask
 + 1;

5971 
s
->
sh­e_couÁ
++;

5972 
s
->
sh­e_size
 +ğ
	`g‘_sh­e_size
(
hash_size
, 
sh
->
´İ_size
);

5977 
s
->
memÜy_u£d_couÁ
 += 2;

5978 
s
->
©om_couÁ
 = 
¹
->atom_count;

5979 
s
->
©om_size
 = (
¹
->
©om_¬¿y
[0]) *„t->atom_size +

5980 (
¹
->
©om_hash
[0]è*„t->
©om_hash_size
;

5981 
i
 = 0; i < 
¹
->
©om_size
; i++) {

5982 
JSAtomSŒuù
 *
p
 = 
¹
->
©om_¬¿y
[
i
];

5983 ià(!
	`©om_is_ä“
(
p
)) {

5984 
s
->
©om_size
 +ğ((*
p
è+ (p->
Ën
 <<…->
is_wide_ch¬
) +

5985 1 - 
p
->
is_wide_ch¬
);

5988 
s
->
¡r_couÁ
 = 
	`round
(
mem
.str_count);

5989 
s
->
¡r_size
 = 
	`round
(
mem
.str_size);

5990 
s
->
js_func_couÁ
 = 
mem
.js_func_count;

5991 
s
->
js_func_size
 = 
	`round
(
mem
.js_func_size);

5992 
s
->
js_func_code_size
 = 
mem
.js_func_code_size;

5993 
s
->
js_func_pc2lše_couÁ
 = 
mem
.js_func_pc2line_count;

5994 
s
->
js_func_pc2lše_size
 = 
mem
.js_func_pc2line_size;

5995 
s
->
memÜy_u£d_couÁ
 +ğ
	`round
(
mem
.memory_used_count) +

5996 
s
->
©om_couÁ
 + s->
¡r_couÁ
 +

5997 
s
->
obj_couÁ
 + s->
sh­e_couÁ
 +

5998 
s
->
js_func_couÁ
 + s->
js_func_pc2lše_couÁ
;

5999 
s
->
memÜy_u£d_size
 +ğs->
©om_size
 + s->
¡r_size
 +

6000 
s
->
obj_size
 + s->
´İ_size
 + s->
sh­e_size
 +

6001 
s
->
js_func_size
 + s->
js_func_code_size
 + s->
js_func_pc2lše_size
;

6002 
	}
}

6004 
	$JS_DumpMemÜyU§ge
(
FILE
 *
å
, cÚ¡ 
JSMemÜyU§ge
 *
s
, 
JSRuÁime
 *
¹
)

6006 
	`årštf
(
å
, "QuickJS memory usage -- "

6007 #ifdeà
CONFIG_BIGNUM


6010 "% v”siÚ, %d-b™, m®loølim™: %"
PRId64
"\n\n",

6011 
CONFIG_VERSION
, ()(*è* 8, (
sšt64_t
)(
ssize_t
)
s
->
m®loc_lim™
);

6013 ià(
¹
) {

6015 cÚ¡ *
Çme
;

6016 
size_t
 
size
;

6017 } 
objeù_ty³s
[] = {

6018 { "JSRuÁime", (
JSRuÁime
) },

6019 { "JSCÚ‹xt", (
JSCÚ‹xt
) },

6020 { "JSObjeù", (
JSObjeù
) },

6021 { "JSSŒšg", (
JSSŒšg
) },

6022 { "JSFunùiÚBy‹code", (
JSFunùiÚBy‹code
) },

6024 
i
, 
u§ge_size_ok
 = 0;

6025 
i
 = 0; i < 
	`couÁof
(
objeù_ty³s
); i++) {

6026 
size
 = 
objeù_ty³s
[
i
].size;

6027 *
p
 = 
	`js_m®loc_¹
(
¹
, 
size
);

6028 ià(
p
) {

6029 
size1
 = 
	`js_m®loc_u§bË_size_¹
(
¹
, 
p
);

6030 ià(
size1
 >ğ
size
) {

6031 
u§ge_size_ok
 = 1;

6032 
	`årštf
(
å
, " %3u + %-2u %s\n",

6033 
size
, 
size1
 - size, 
objeù_ty³s
[
i
].
Çme
);

6035 
	`js_ä“_¹
(
¹
, 
p
);

6038 ià(!
u§ge_size_ok
) {

6039 
	`årštf
(
å
, " malloc_usable_size unavailable\n");

6042 
obj_şas£s
[
JS_CLASS_INIT_COUNT
 + 1] = { 0 };

6043 
şass_id
;

6044 
li¡_h—d
 *
–
;

6045 
	`li¡_fÜ_—ch
(
–
, &
¹
->
gc_obj_li¡
) {

6046 
JSGCObjeùH—d”
 *
gp
 = 
	`li¡_’Œy
(
–
, JSGCObjeùH—d”, 
lšk
);

6047 
JSObjeù
 *
p
;

6048 ià(
gp
->
gc_obj_ty³
 =ğ
JS_GC_OBJ_TYPE_JS_OBJECT
) {

6049 
p
 = (
JSObjeù
 *)
gp
;

6050 
obj_şas£s
[
	`mš_ušt32
(
p
->
şass_id
, 
JS_CLASS_INIT_COUNT
)]++;

6053 
	`årštf
(
å
, "\n" "JSObject classes\n");

6054 ià(
obj_şas£s
[0])

6055 
	`årštf
(
å
, " %5d %2.0d %s\n", 
obj_şas£s
[0], 0, "none");

6056 
şass_id
 = 1; cÏss_id < 
JS_CLASS_INIT_COUNT
; class_id++) {

6057 ià(
obj_şas£s
[
şass_id
]) {

6058 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6059 
	`årštf
(
å
, " %5d %2.0d %s\n", 
obj_şas£s
[
şass_id
], class_id,

6060 
	`JS_AtomG‘SŒRT
(
¹
, 
buf
, (buf), 
js_¡d_şass_def
[
şass_id
 - 1].
şass_Çme
));

6063 ià(
obj_şas£s
[
JS_CLASS_INIT_COUNT
])

6064 
	`årštf
(
å
, " %5d %2.0d %s\n", 
obj_şas£s
[
JS_CLASS_INIT_COUNT
], 0, "other");

6066 
	`årštf
(
å
, "\n");

6069 
	`årštf
(
å
, "%-20s %8s %8s\n", "NAME", "COUNT", "SIZE");

6071 ià(
s
->
m®loc_couÁ
) {

6072 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er block)\n",

6073 "memÜy‡Îoÿ‹d", 
s
->
m®loc_couÁ
, s->
m®loc_size
,

6074 ()
s
->
m®loc_size
 / s->
m®loc_couÁ
);

6075 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%d overhead, %0.1f‡verage slack)\n",

6076 "memÜy u£d", 
s
->
memÜy_u£d_couÁ
, s->
memÜy_u£d_size
,

6077 
MALLOC_OVERHEAD
, (()(
s
->
m®loc_size
 - s->
memÜy_u£d_size
) /

6078 
s
->
memÜy_u£d_couÁ
));

6080 ià(
s
->
©om_couÁ
) {

6081 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er‡tom)\n",

6082 "©oms", 
s
->
©om_couÁ
, s->
©om_size
,

6083 ()
s
->
©om_size
 / s->
©om_couÁ
);

6085 ià(
s
->
¡r_couÁ
) {

6086 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er string)\n",

6087 "¡ršgs", 
s
->
¡r_couÁ
, s->
¡r_size
,

6088 ()
s
->
¡r_size
 / s->
¡r_couÁ
);

6090 ià(
s
->
obj_couÁ
) {

6091 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er object)\n",

6092 "objeùs", 
s
->
obj_couÁ
, s->
obj_size
,

6093 ()
s
->
obj_size
 / s->
obj_couÁ
);

6094 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er object)\n",

6095 "…rİ”t›s", 
s
->
´İ_couÁ
, s->
´İ_size
,

6096 ()
s
->
´İ_couÁ
 / s->
obj_couÁ
);

6097 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er shape)\n",

6098 " sh­es", 
s
->
sh­e_couÁ
, s->
sh­e_size
,

6099 ()
s
->
sh­e_size
 / s->
sh­e_couÁ
);

6101 ià(
s
->
js_func_couÁ
) {

6102 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64"\n",

6103 "by‹codfunùiÚs", 
s
->
js_func_couÁ
, s->
js_func_size
);

6104 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er function)\n",

6105 " by‹code", 
s
->
js_func_couÁ
, s->
js_func_code_size
,

6106 ()
s
->
js_func_code_size
 / s->
js_func_couÁ
);

6107 ià(
s
->
js_func_pc2lše_couÁ
) {

6108 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er function)\n",

6109 "…c2lše", 
s
->
js_func_pc2lše_couÁ
,

6110 
s
->
js_func_pc2lše_size
,

6111 ()
s
->
js_func_pc2lše_size
 / s->
js_func_pc2lše_couÁ
);

6114 ià(
s
->
c_func_couÁ
) {

6115 
	`årštf
(
å
, "%-20 %8"
PRId64
"\n", "C funùiÚs", 
s
->
c_func_couÁ
);

6117 ià(
s
->
¬¿y_couÁ
) {

6118 
	`årštf
(
å
, "%-20 %8"
PRId64
"\n", "¬¿ys", 
s
->
¬¿y_couÁ
);

6119 ià(
s
->
ç¡_¬¿y_couÁ
) {

6120 
	`årštf
(
å
, "%-20 %8"
PRId64
"\n", " fa¡‡¼ays", 
s
->
ç¡_¬¿y_couÁ
);

6121 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64" (%0.1f…er fast‡rray)\n",

6122 "ƒËm’ts", 
s
->
ç¡_¬¿y_–em’ts
,

6123 
s
->
ç¡_¬¿y_–em’ts
 * ()(
JSV®ue
),

6124 ()
s
->
ç¡_¬¿y_–em’ts
 / s->
ç¡_¬¿y_couÁ
);

6127 ià(
s
->
bš¬y_objeù_couÁ
) {

6128 
	`årštf
(
å
, "%-20 %8"
PRId64
" %8"PRId64"\n",

6129 "bš¬y objeùs", 
s
->
bš¬y_objeù_couÁ
, s->
bš¬y_objeù_size
);

6131 
	}
}

6133 
JSV®ue
 
	$JS_G‘Glob®Objeù
(
JSCÚ‹xt
 *
ùx
)

6135  
	`JS_DupV®ue
(
ùx
, ctx->
glob®_obj
);

6136 
	}
}

6139 
JSV®ue
 
	$JS_Throw
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
obj
)

6141 
JSRuÁime
 *
¹
 = 
ùx
->rt;

6142 
	`JS_F»eV®ue
(
ùx
, 
¹
->
cu¼’t_exû±iÚ
);

6143 
¹
->
cu¼’t_exû±iÚ
 = 
obj
;

6144  
JS_EXCEPTION
;

6145 
	}
}

6148 
JSV®ue
 
	$JS_G‘Exû±iÚ
(
JSCÚ‹xt
 *
ùx
)

6150 
JSV®ue
 
v®
;

6151 
JSRuÁime
 *
¹
 = 
ùx
->rt;

6152 
v®
 = 
¹
->
cu¼’t_exû±iÚ
;

6153 
¹
->
cu¼’t_exû±iÚ
 = 
JS_NULL
;

6154  
v®
;

6155 
	}
}

6157 
	$dbuf_put_Ëb128
(
DynBuf
 *
s
, 
ušt32_t
 
v
)

6159 
ušt32_t
 
a
;

6161 
a
 = 
v
 & 0x7f;

6162 
v
 >>= 7;

6163 ià(
v
 != 0) {

6164 
	`dbuf_putc
(
s
, 
a
 | 0x80);

6166 
	`dbuf_putc
(
s
, 
a
);

6170 
	}
}

6172 
	$dbuf_put_¦eb128
(
DynBuf
 *
s
, 
št32_t
 
v1
)

6174 
ušt32_t
 
v
 = 
v1
;

6175 
	`dbuf_put_Ëb128
(
s
, (2 * 
v
) ^ -(v >> 31));

6176 
	}
}

6178 
	$g‘_Ëb128
(
ušt32_t
 *
pv®
, cÚ¡ 
ušt8_t
 *
buf
,

6179 cÚ¡ 
ušt8_t
 *
buf_’d
)

6181 cÚ¡ 
ušt8_t
 *
±r
 = 
buf
;

6182 
ušt32_t
 
v
, 
a
, 
i
;

6183 
v
 = 0;

6184 
i
 = 0; i < 5; i++) {

6185 ià(
	`uÆik–y
(
±r
 >ğ
buf_’d
))

6187 
a
 = *
±r
++;

6188 
v
 |ğ(
a
 & 0x7fè<< (
i
 * 7);

6189 ià(!(
a
 & 0x80)) {

6190 *
pv®
 = 
v
;

6191  
±r
 - 
buf
;

6194 *
pv®
 = 0;

6196 
	}
}

6198 
	$g‘_¦eb128
(
št32_t
 *
pv®
, cÚ¡ 
ušt8_t
 *
buf
,

6199 cÚ¡ 
ušt8_t
 *
buf_’d
)

6201 
»t
;

6202 
ušt32_t
 
v®
;

6203 
»t
 = 
	`g‘_Ëb128
(&
v®
, 
buf
, 
buf_’d
);

6204 ià(
»t
 < 0) {

6205 *
pv®
 = 0;

6208 *
pv®
 = (
v®
 >> 1) ^ -(val & 1);

6209  
»t
;

6210 
	}
}

6212 
	$fšd_lše_num
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚBy‹code
 *
b
,

6213 
ušt32_t
 
pc_v®ue
)

6215 cÚ¡ 
ušt8_t
 *
p_’d
, *
p
;

6216 
Ãw_lše_num
, 
lše_num
, 
pc
, 
v
, 
»t
;

6217 
İ
;

6219 ià(!
b
->
has_debug
 || !b->
debug
.
pc2lše_buf
) {

6224 
p
 = 
b
->
debug
.
pc2lše_buf
;

6225 
p_’d
 = 
p
 + 
b
->
debug
.
pc2lše_Ën
;

6226 
pc
 = 0;

6227 
lše_num
 = 
b
->
debug
.line_num;

6228 
p
 < 
p_’d
) {

6229 
İ
 = *
p
++;

6230 ià(
İ
 == 0) {

6231 
ušt32_t
 
v®
;

6232 
»t
 = 
	`g‘_Ëb128
(&
v®
, 
p
, 
p_’d
);

6233 ià(
»t
 < 0)

6234 
ç
;

6235 
pc
 +ğ
v®
;

6236 
p
 +ğ
»t
;

6237 
»t
 = 
	`g‘_¦eb128
(&
v
, 
p
, 
p_’d
);

6238 ià(
»t
 < 0) {

6239 
ç
:

6241  
b
->
debug
.
lše_num
;

6243 
p
 +ğ
»t
;

6244 
Ãw_lše_num
 = 
lše_num
 + 
v
;

6246 
İ
 -ğ
PC2LINE_OP_FIRST
;

6247 
pc
 +ğ(
İ
 / 
PC2LINE_RANGE
);

6248 
Ãw_lše_num
 = 
lše_num
 + (
İ
 % 
PC2LINE_RANGE
è+ 
PC2LINE_BASE
;

6250 ià(
pc_v®ue
 < 
pc
)

6251  
lše_num
;

6252 
lše_num
 = 
Ãw_lše_num
;

6254  
lše_num
;

6255 
	}
}

6260 cÚ¡ *
	$g‘_func_Çme
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func
)

6262 
JSPrİ”ty
 *
´
;

6263 
JSSh­ePrİ”ty
 *
´s
;

6264 
JSV®ueCÚ¡
 
v®
;

6266 ià(
	`JS_VALUE_GET_TAG
(
func
è!ğ
JS_TAG_OBJECT
)

6267  
NULL
;

6268 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
	`JS_VALUE_GET_OBJ
(
func
), 
JS_ATOM_Çme
);

6269 ià(!
´s
)

6270  
NULL
;

6271 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è!ğ
JS_PROP_NORMAL
)

6272  
NULL
;

6273 
v®
 = 
´
->
u
.
v®ue
;

6274 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_STRING
)

6275  
NULL
;

6276  
	`JS_ToCSŒšg
(
ùx
, 
v®
);

6277 
	}
}

6279 
	#JS_BACKTRACE_FLAG_SKIP_FIRST_LEVEL
 (1 << 0)

	)

6281 
	#JS_BACKTRACE_FLAG_SINGLE_LEVEL
 (1 << 1)

	)

6285 
	$bud_backŒaû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
”rÜ_obj
,

6286 cÚ¡ *
f’ame
, 
lše_num
,

6287 
backŒaû_æags
)

6289 
JSSckF¿me
 *
sf
;

6290 
JSV®ue
 
¡r
;

6291 
DynBuf
 
dbuf
;

6292 cÚ¡ *
func_Çme_¡r
;

6293 cÚ¡ *
¡r1
;

6294 
JSObjeù
 *
p
;

6295 
BOOL
 
backŒaû_b¬r›r
;

6297 
	`js_dbuf_š™
(
ùx
, &
dbuf
);

6298 ià(
f’ame
) {

6299 
	`dbuf_´štf
(&
dbuf
, "‡ˆ%s", 
f’ame
);

6300 ià(
lše_num
 != -1)

6301 
	`dbuf_´štf
(&
dbuf
, ":%d", 
lše_num
);

6302 
	`dbuf_putc
(&
dbuf
, '\n');

6303 
¡r
 = 
	`JS_NewSŒšg
(
ùx
, 
f’ame
);

6304 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
”rÜ_obj
, 
JS_ATOM_feName
, 
¡r
,

6305 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

6306 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
”rÜ_obj
, 
JS_ATOM_lšeNumb”
, 
	`JS_NewIÁ32
(ùx, 
lše_num
),

6307 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

6308 ià(
backŒaû_æags
 & 
JS_BACKTRACE_FLAG_SINGLE_LEVEL
)

6309 
dÚe
;

6311 
sf
 = 
ùx
->
¹
->
cu¼’t_¡ack_äame
; sà!ğ
NULL
; sàğsf->
´ev_äame
) {

6312 ià(
backŒaû_æags
 & 
JS_BACKTRACE_FLAG_SKIP_FIRST_LEVEL
) {

6313 
backŒaû_æags
 &ğ~
JS_BACKTRACE_FLAG_SKIP_FIRST_LEVEL
;

6316 
func_Çme_¡r
 = 
	`g‘_func_Çme
(
ùx
, 
sf
->
cur_func
);

6317 ià(!
func_Çme_¡r
 || func_name_str[0] == '\0')

6318 
¡r1
 = "<anonymous>";

6320 
¡r1
 = 
func_Çme_¡r
;

6321 
	`dbuf_´štf
(&
dbuf
, "‡ˆ%s", 
¡r1
);

6322 
	`JS_F»eCSŒšg
(
ùx
, 
func_Çme_¡r
);

6324 
p
 = 
	`JS_VALUE_GET_OBJ
(
sf
->
cur_func
);

6325 
backŒaû_b¬r›r
 = 
FALSE
;

6326 ià(
	`js_şass_has_by‹code
(
p
->
şass_id
)) {

6327 
JSFunùiÚBy‹code
 *
b
;

6328 
©om_buf
[
ATOM_GET_STR_BUF_SIZE
];

6329 
lše_num1
;

6331 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

6332 
backŒaû_b¬r›r
 = 
b
->backtrace_barrier;

6333 ià(
b
->
has_debug
) {

6334 
lše_num1
 = 
	`fšd_lše_num
(
ùx
, 
b
,

6335 
sf
->
cur_pc
 - 
b
->
by‹_code_buf
 - 1);

6336 
	`dbuf_´štf
(&
dbuf
, " (%s",

6337 
	`JS_AtomG‘SŒ
(
ùx
, 
©om_buf
, (atom_buf),

6338 
b
->
debug
.
f’ame
));

6339 ià(
lše_num1
 != -1)

6340 
	`dbuf_´štf
(&
dbuf
, ":%d", 
lše_num1
);

6341 
	`dbuf_putc
(&
dbuf
, ')');

6344 
	`dbuf_´štf
(&
dbuf
, " (native)");

6346 
	`dbuf_putc
(&
dbuf
, '\n');

6348 ià(
backŒaû_b¬r›r
)

6351 
dÚe
:

6352 
	`dbuf_putc
(&
dbuf
, '\0');

6353 ià(
	`dbuf_”rÜ
(&
dbuf
))

6354 
¡r
 = 
JS_NULL
;

6356 
¡r
 = 
	`JS_NewSŒšg
(
ùx
, (*)
dbuf
.
buf
);

6357 
	`dbuf_ä“
(&
dbuf
);

6358 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
”rÜ_obj
, 
JS_ATOM_¡ack
, 
¡r
,

6359 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

6360 
	}
}

6363 
BOOL
 
	$is_backŒaû_Ãeded
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

6365 
JSObjeù
 *
p
;

6366 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

6367  
FALSE
;

6368 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

6369 ià(
p
->
şass_id
 !ğ
JS_CLASS_ERROR
)

6370  
FALSE
;

6371 ià(
	`fšd_own_´İ”ty1
(
p
, 
JS_ATOM_¡ack
))

6372  
FALSE
;

6373  
TRUE
;

6374 
	}
}

6376 
JSV®ue
 
	$JS_NewE¼Ü
(
JSCÚ‹xt
 *
ùx
)

6378  
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_ERROR
);

6379 
	}
}

6381 
JSV®ue
 
	$JS_ThrowE¼Ü2
(
JSCÚ‹xt
 *
ùx
, 
JSE¼ÜEnum
 
”rÜ_num
,

6382 cÚ¡ *
fmt
, 
va_li¡
 
­
, 
BOOL
 
add_backŒaû
)

6384 
buf
[256];

6385 
JSV®ue
 
obj
, 
»t
;

6387 
	`v¢´štf
(
buf
, (buf), 
fmt
, 
­
);

6388 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
Çtive_”rÜ_´Ùo
[
”rÜ_num
],

6389 
JS_CLASS_ERROR
);

6390 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
obj
))) {

6392 
obj
 = 
JS_NULL
;

6394 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_mes§ge
,

6395 
	`JS_NewSŒšg
(
ùx
, 
buf
),

6396 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

6398 ià(
add_backŒaû
) {

6399 
	`bud_backŒaû
(
ùx
, 
obj
, 
NULL
, 0, 0);

6401 
»t
 = 
	`JS_Throw
(
ùx
, 
obj
);

6402  
»t
;

6403 
	}
}

6405 
JSV®ue
 
	$JS_ThrowE¼Ü
(
JSCÚ‹xt
 *
ùx
, 
JSE¼ÜEnum
 
”rÜ_num
,

6406 cÚ¡ *
fmt
, 
va_li¡
 
­
)

6408 
JSRuÁime
 *
¹
 = 
ùx
->rt;

6409 
JSSckF¿me
 *
sf
;

6410 
BOOL
 
add_backŒaû
;

6413 
sf
 = 
¹
->
cu¼’t_¡ack_äame
;

6414 
add_backŒaû
 = !
¹
->
š_out_of_memÜy
 &&

6415 (!
sf
 || (
	`JS_G‘FunùiÚBy‹code
(sf->
cur_func
è=ğ
NULL
));

6416  
	`JS_ThrowE¼Ü2
(
ùx
, 
”rÜ_num
, 
fmt
, 
­
, 
add_backŒaû
);

6417 
	}
}

6419 
JSV®ue
 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$JS_ThrowSyÁaxE¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...)

6421 
JSV®ue
 
v®
;

6422 
va_li¡
 
­
;

6424 
	`va_¡¬t
(
­
, 
fmt
);

6425 
v®
 = 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_SYNTAX_ERROR
, 
fmt
, 
­
);

6426 
	`va_’d
(
­
);

6427  
v®
;

6428 
	}
}

6430 
JSV®ue
 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$JS_ThrowTy³E¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...)

6432 
JSV®ue
 
v®
;

6433 
va_li¡
 
­
;

6435 
	`va_¡¬t
(
­
, 
fmt
);

6436 
v®
 = 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_TYPE_ERROR
, 
fmt
, 
­
);

6437 
	`va_’d
(
­
);

6438  
v®
;

6439 
	}
}

6441 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 3, 4))è
	$JS_ThrowTy³E¼ÜOrF®£
(
JSCÚ‹xt
 *
ùx
, 
æags
, cÚ¡ *
fmt
, ...)

6443 
va_li¡
 
­
;

6445 ià((
æags
 & 
JS_PROP_THROW
) ||

6446 ((
æags
 & 
JS_PROP_THROW_STRICT
è&& 
	`is_¡riù_mode
(
ùx
))) {

6447 
	`va_¡¬t
(
­
, 
fmt
);

6448 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_TYPE_ERROR
, 
fmt
, 
­
);

6449 
	`va_’d
(
­
);

6452  
FALSE
;

6454 
	}
}

6456 
	$JS_ThrowTy³E¼ÜR—dOÆy
(
JSCÚ‹xt
 *
ùx
, 
æags
, 
JSAtom
 
©om
)

6458 ià((
æags
 & 
JS_PROP_THROW
) ||

6459 ((
æags
 & 
JS_PROP_THROW_STRICT
è&& 
	`is_¡riù_mode
(
ùx
))) {

6460 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6461 
	`JS_ThrowTy³E¼Ü
(
ùx
, "%s is„ead-only",

6462 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
©om
));

6465  
FALSE
;

6467 
	}
}

6469 
JSV®ue
 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$JS_ThrowReã»nûE¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...)

6471 
JSV®ue
 
v®
;

6472 
va_li¡
 
­
;

6474 
	`va_¡¬t
(
­
, 
fmt
);

6475 
v®
 = 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_REFERENCE_ERROR
, 
fmt
, 
­
);

6476 
	`va_’d
(
­
);

6477  
v®
;

6478 
	}
}

6480 
JSV®ue
 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$JS_ThrowRªgeE¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...)

6482 
JSV®ue
 
v®
;

6483 
va_li¡
 
­
;

6485 
	`va_¡¬t
(
­
, 
fmt
);

6486 
v®
 = 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_RANGE_ERROR
, 
fmt
, 
­
);

6487 
	`va_’d
(
­
);

6488  
v®
;

6489 
	}
}

6491 
JSV®ue
 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$JS_ThrowIÁ”ÇlE¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...)

6493 
JSV®ue
 
v®
;

6494 
va_li¡
 
­
;

6496 
	`va_¡¬t
(
­
, 
fmt
);

6497 
v®
 = 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_INTERNAL_ERROR
, 
fmt
, 
­
);

6498 
	`va_’d
(
­
);

6499  
v®
;

6500 
	}
}

6502 
JSV®ue
 
	$JS_ThrowOutOfMemÜy
(
JSCÚ‹xt
 *
ùx
)

6504 
JSRuÁime
 *
¹
 = 
ùx
->rt;

6505 ià(!
¹
->
š_out_of_memÜy
) {

6506 
¹
->
š_out_of_memÜy
 = 
TRUE
;

6507 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "out of memory");

6508 
¹
->
š_out_of_memÜy
 = 
FALSE
;

6510  
JS_EXCEPTION
;

6511 
	}
}

6513 
JSV®ue
 
	$JS_ThrowSckOv”æow
(
JSCÚ‹xt
 *
ùx
)

6515  
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "stack overflow");

6516 
	}
}

6518 
JSV®ue
 
	$JS_ThrowTy³E¼ÜNÙAnObjeù
(
JSCÚ‹xt
 *
ùx
)

6520  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡n object");

6521 
	}
}

6523 
JSV®ue
 
	$JS_ThrowTy³E¼ÜNÙASymbŞ
(
JSCÚ‹xt
 *
ùx
)

6525  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ symbol");

6526 
	}
}

6528 
JSV®ue
 
	$JS_ThrowReã»nûE¼ÜNÙDefšed
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
)

6530 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6531  
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "%s is‚ot defined",

6532 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
Çme
));

6533 
	}
}

6535 
JSV®ue
 
	$JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
)

6537 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6538  
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "%s is‚ot initialized",

6539 
Çme
 =ğ
JS_ATOM_NULL
 ? "lexical variable" :

6540 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
Çme
));

6541 
	}
}

6543 
JSV®ue
 
	$JS_ThrowTy³E¼ÜInv®idCÏss
(
JSCÚ‹xt
 *
ùx
, 
şass_id
)

6545 
JSRuÁime
 *
¹
 = 
ùx
->rt;

6546 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6547 
JSAtom
 
Çme
;

6548 
Çme
 = 
¹
->
şass_¬¿y
[
şass_id
].
şass_Çme
;

6549  
	`JS_ThrowTy³E¼Ü
(
ùx
, "%s objectƒxpected",

6550 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
Çme
));

6551 
	}
}

6554 
	$JS_S‘PrÙÙy³IÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

6555 
JSV®ueCÚ¡
 
´Ùo_v®
,

6556 
BOOL
 
throw_æag
)

6558 
JSObjeù
 *
´Ùo
, *
p
, *
p1
;

6559 
JSSh­e
 *
sh
;

6561 ià(
throw_æag
) {

6562 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_NULL
 ||

6563 
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_UNDEFINED
)

6564 
nÙ_obj
;

6566 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

6567 
nÙ_obj
;

6569 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

6570 ià(
	`JS_VALUE_GET_TAG
(
´Ùo_v®
è!ğ
JS_TAG_OBJECT
) {

6571 ià(
	`JS_VALUE_GET_TAG
(
´Ùo_v®
è!ğ
JS_TAG_NULL
) {

6572 
nÙ_obj
:

6573 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

6576 
´Ùo
 = 
NULL
;

6578 
´Ùo
 = 
	`JS_VALUE_GET_OBJ
(
´Ùo_v®
);

6581 ià(
throw_æag
 && 
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

6582  
TRUE
;

6584 ià(
	`uÆik–y
(
p
->
şass_id
 =ğ
JS_CLASS_PROXY
))

6585  
	`js_´oxy_£tPrÙÙy³Of
(
ùx
, 
obj
, 
´Ùo_v®
, 
throw_æag
);

6586 
sh
 = 
p
->
sh­e
;

6587 ià(
sh
->
´Ùo
 ==…roto)

6588  
TRUE
;

6589 ià(!
p
->
ex‹nsibË
) {

6590 ià(
throw_æag
) {

6591 
	`JS_ThrowTy³E¼Ü
(
ùx
, "object is‚otƒxtensible");

6594  
FALSE
;

6597 ià(
´Ùo
) {

6599 
p1
 = 
´Ùo
;

6601 ià(
p1
 =ğ
p
) {

6602 ià(
throw_æag
) {

6603 
	`JS_ThrowTy³E¼Ü
(
ùx
, "circular…rototype chain");

6606  
FALSE
;

6610 
p1
 =…1->
sh­e
->
´Ùo
;

6611 } 
p1
 !ğ
NULL
);

6612 
	`JS_DupV®ue
(
ùx
, 
´Ùo_v®
);

6615 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, 
NULL
))

6617 
sh
 = 
p
->
sh­e
;

6618 ià(
sh
->
´Ùo
)

6619 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
sh
->
´Ùo
));

6620 
sh
->
´Ùo
 =…roto;

6621  
TRUE
;

6622 
	}
}

6625 
	$JS_S‘PrÙÙy³
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, JSV®ueCÚ¡ 
´Ùo_v®
)

6627  
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
obj
, 
´Ùo_v®
, 
TRUE
);

6628 
	}
}

6631 
JSV®ueCÚ¡
 
	$JS_G‘PrÙÙy³
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

6633 
JSObjeù
 *
p
;

6635 
	`JS_VALUE_GET_NORM_TAG
(
v®
)) {

6636 #ifdeà
CONFIG_BIGNUM


6637 
JS_TAG_BIG_INT
:

6638 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_INT
];

6640 
JS_TAG_BIG_FLOAT
:

6641 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_FLOAT
];

6643 
JS_TAG_BIG_DECIMAL
:

6644 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_DECIMAL
];

6647 
JS_TAG_INT
:

6648 
JS_TAG_FLOAT64
:

6649 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_NUMBER
];

6651 
JS_TAG_BOOL
:

6652 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_BOOLEAN
];

6654 
JS_TAG_STRING
:

6655 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_STRING
];

6657 
JS_TAG_SYMBOL
:

6658 
v®
 = 
ùx
->
şass_´Ùo
[
JS_CLASS_SYMBOL
];

6660 
JS_TAG_OBJECT
:

6661 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

6662 ià(
	`uÆik–y
(
p
->
şass_id
 =ğ
JS_CLASS_PROXY
)) {

6663 
v®
 = 
	`js_´oxy_g‘PrÙÙy³Of
(
ùx
, val);

6665 
p
 =…->
sh­e
->
´Ùo
;

6666 ià(!
p
)

6667 
v®
 = 
JS_NULL
;

6669 
v®
 = 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
);

6672 
JS_TAG_NULL
:

6673 
JS_TAG_UNDEFINED
:

6675 
v®
 = 
JS_NULL
;

6678  
v®
;

6679 
	}
}

6682 
	$JS_Ordš¬yIsIn¡ªûOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
,

6683 
JSV®ueCÚ¡
 
obj
)

6685 
JSV®ue
 
obj_´Ùo
;

6686 
JSObjeù
 *
´Ùo
;

6687 cÚ¡ 
JSObjeù
 *
p
, *
´Ùo1
;

6688 
BOOL
 
»t
;

6690 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
obj
))

6691  
FALSE
;

6692 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

6693 ià(
p
->
şass_id
 =ğ
JS_CLASS_BOUND_FUNCTION
) {

6694 
JSBoundFunùiÚ
 *
s
 = 
p
->
u
.
bound_funùiÚ
;

6695  
	`JS_IsIn¡ªûOf
(
ùx
, 
v®
, 
s
->
func_obj
);

6699 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

6700  
FALSE
;

6701 
»t
 = 
FALSE
;

6702 
obj_´Ùo
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_´ÙÙy³
);

6703 ià(
	`JS_VALUE_GET_TAG
(
obj_´Ùo
è!ğ
JS_TAG_OBJECT
) {

6704 ià(!
	`JS_IsExû±iÚ
(
obj_´Ùo
))

6705 
	`JS_ThrowTy³E¼Ü
(
ùx
, "operand 'prototype'…roperty is‚ot‡n object");

6706 
»t
 = -1;

6707 
dÚe
;

6709 
´Ùo
 = 
	`JS_VALUE_GET_OBJ
(
obj_´Ùo
);

6710 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

6712 
´Ùo1
 = 
p
->
sh­e
->
´Ùo
;

6713 ià(!
´Ùo1
) {

6714 ià(
p
->
şass_id
 =ğ
JS_CLASS_PROXY
) {

6715 
JSV®ueCÚ¡
 
´Ùo_v®
;

6716 
´Ùo_v®
 = 
	`JS_G‘PrÙÙy³
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, (
JSObjeù
 *)
p
));

6717 ià(
	`JS_IsExû±iÚ
(
´Ùo_v®
)) {

6718 
»t
 = -1;

6719 
dÚe
;

6721 
´Ùo1
 = 
	`JS_VALUE_GET_OBJ
(
´Ùo_v®
);

6722 ià(!
´Ùo1
)

6728 
p
 = 
´Ùo1
;

6729 ià(
´Ùo
 =ğ
p
) {

6730 
»t
 = 
TRUE
;

6734 
dÚe
:

6735 
	`JS_F»eV®ue
(
ùx
, 
obj_´Ùo
);

6736  
»t
;

6737 
	}
}

6740 
	$JS_IsIn¡ªûOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
, JSV®ueCÚ¡ 
obj
)

6742 
JSV®ue
 
m‘hod
;

6744 ià(!
	`JS_IsObjeù
(
obj
))

6745 
ç
;

6746 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_hasIn¡ªû
);

6747 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

6749 ià(!
	`JS_IsNuÎ
(
m‘hod
è&& !
	`JS_IsUndefšed
(method)) {

6750 
JSV®ue
 
»t
;

6751 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
obj
, 1, &
v®
);

6752  
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

6756 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
obj
)) {

6757 
ç
:

6758 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid 'instanceof'„ight operand");

6761  
	`JS_Ordš¬yIsIn¡ªûOf
(
ùx
, 
v®
, 
obj
);

6762 
	}
}

6764 
	$JS_AutoIn™Prİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSAtom
 
´İ
, 
JSPrİ”ty
 *
´
)

6766 
»t
;

6767 
JSCÚ‹xt
 *
»®m
;

6769 ià(
´
->
u
.
š™
.u.
š™_id
 >ğ
JS_AUTOINIT_ID_PROP
) {

6770 
»®m
 = 
´
->
u
.
š™
.u.realm;

6771 
»t
 = 
	`JS_In¡ªtŸ‹FunùiÚLi¡I‹m
(
»®m
, 
p
, 
´İ
, 
´
->
u
.
š™
.
İaque
);

6772 ià(
»t
)

6773  
»t
;

6775 
´
->
u
.
š™
.u.
š™_id
) {

6776 
JS_AUTOINIT_ID_PROTOTYPE
:

6777 
»t
 = 
	`js_š¡ªtŸ‹_´ÙÙy³
(
ùx
, 
p
, 
´İ
, 
´
->
u
.
š™
.
İaque
);

6779 
JS_AUTOINIT_ID_MODULE_NS
:

6780 
»t
 = 
	`js_moduË_ns_autoš™
(
ùx
, 
p
, 
´İ
, 
´
->
u
.
š™
.
İaque
);

6783 
	`abÜt
();

6786  
»t
;

6787 
	}
}

6789 
JSV®ue
 
	$JS_G‘Prİ”tyIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

6790 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
this_obj
,

6791 
BOOL
 
throw_»f_”rÜ
)

6793 
JSObjeù
 *
p
;

6794 
JSPrİ”ty
 *
´
;

6795 
JSSh­ePrİ”ty
 *
´s
;

6796 
ušt32_t
 
g
;

6798 
g
 = 
	`JS_VALUE_GET_TAG
(
obj
);

6799 ià(
	`uÆik–y
(
g
 !ğ
JS_TAG_OBJECT
)) {

6800 
g
) {

6801 
JS_TAG_NULL
:

6802 
JS_TAG_UNDEFINED
:

6803  
	`JS_ThrowTy³E¼Ü
(
ùx
, "value has‚o…roperty");

6804 
JS_TAG_EXCEPTION
:

6805  
JS_EXCEPTION
;

6806 
JS_TAG_STRING
:

6808 
JSSŒšg
 *
p1
 = 
	`JS_VALUE_GET_STRING
(
obj
);

6809 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

6810 
ušt32_t
 
idx
, 
ch
;

6811 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

6812 ià(
idx
 < 
p1
->
Ën
) {

6813 ià(
p1
->
is_wide_ch¬
)

6814 
ch
 = 
p1
->
u
.
¡r16
[
idx
];

6816 
ch
 = 
p1
->
u
.
¡r8
[
idx
];

6817  
	`js_Ãw_¡ršg_ch¬
(
ùx
, 
ch
);

6819 } ià(
´İ
 =ğ
JS_ATOM_Ëngth
) {

6820  
	`JS_NewIÁ32
(
ùx
, 
p1
->
Ën
);

6828 
p
 = 
	`JS_VALUE_GET_OBJ
(
	`JS_G‘PrÙÙy³
(
ùx
, 
obj
));

6829 ià(!
p
)

6830  
JS_UNDEFINED
;

6832 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

6836 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

6837 ià(
´s
) {

6839 ià(
	`uÆik–y
(
´s
->
æags
 & 
JS_PROP_TMASK
)) {

6840 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

6841 ià(
	`uÆik–y
(!
´
->
u
.
g‘£t
.
g‘‹r
)) {

6842  
JS_UNDEFINED
;

6844 
JSV®ue
 
func
 = 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
g‘‹r
);

6846 
func
 = 
	`JS_DupV®ue
(
ùx
, func);

6847  
	`JS_C®lF»e
(
ùx
, 
func
, 
this_obj
, 0, 
NULL
);

6849 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

6850 
JSV®ue
 
v®
 = *
´
->
u
.
v¬_»f
->
pv®ue
;

6851 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
v®
)))

6852  
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

6853  
	`JS_DupV®ue
(
ùx
, 
v®
);

6854 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

6856 ià(
	`JS_AutoIn™Prİ”ty
(
ùx
, 
p
, 
´İ
, 
´
))

6857  
JS_EXCEPTION
;

6861  
	`JS_DupV®ue
(
ùx
, 
´
->
u
.
v®ue
);

6864 ià(
	`uÆik–y
(
p
->
is_exÙic
)) {

6866 ià(
p
->
ç¡_¬¿y
) {

6867 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

6868 
ušt32_t
 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

6869 ià(
idx
 < 
p
->
u
.
¬¿y
.
couÁ
) {

6871  
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
idx
);

6872 } ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

6873 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

6874 
ty³d_¬¿y_oob
;

6876 } ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

6877 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

6878 
»t
;

6879 
»t
 = 
	`JS_AtomIsNum”icIndex
(
ùx
, 
´İ
);

6880 ià(
»t
 != 0) {

6881 ià(
»t
 < 0)

6882  
JS_EXCEPTION
;

6883 
ty³d_¬¿y_oob
:

6884 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
))

6885  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

6886  
JS_UNDEFINED
;

6890 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

6891 ià(
em
) {

6892 ià(
em
->
g‘_´İ”ty
) {

6894  
em
->
	`g‘_´İ”ty
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
),

6895 
´İ
, 
this_obj
);

6897 ià(
em
->
g‘_own_´İ”ty
) {

6898 
JSPrİ”tyDesütÜ
 
desc
;

6899 
»t
;

6901 
»t
 = 
em
->
	`g‘_own_´İ”ty
(
ùx
, &
desc
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
´İ
);

6902 ià(
»t
 < 0)

6903  
JS_EXCEPTION
;

6904 ià(
»t
) {

6905 ià(
desc
.
æags
 & 
JS_PROP_GETSET
) {

6906 
	`JS_F»eV®ue
(
ùx
, 
desc
.
£‰”
);

6907  
	`JS_C®lF»e
(
ùx
, 
desc
.
g‘‹r
, 
this_obj
, 0, 
NULL
);

6909  
desc
.
v®ue
;

6916 
p
 =…->
sh­e
->
´Ùo
;

6917 ià(!
p
)

6920 ià(
	`uÆik–y
(
throw_»f_”rÜ
)) {

6921  
	`JS_ThrowReã»nûE¼ÜNÙDefšed
(
ùx
, 
´İ
);

6923  
JS_UNDEFINED
;

6925 
	}
}

6927 
JSV®ue
 
	$JS_ThrowTy³E¼ÜPriv©eNÙFound
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
©om
)

6929 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6930  
	`JS_ThrowTy³E¼Ü
(
ùx
, "private class field %s does‚otƒxist",

6931 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
©om
));

6932 
	}
}

6936 
	$JS_DefšePriv©eF›ld
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

6937 
JSV®ueCÚ¡
 
Çme
, 
JSV®ue
 
v®
)

6939 
JSObjeù
 *
p
;

6940 
JSSh­ePrİ”ty
 *
´s
;

6941 
JSPrİ”ty
 *
´
;

6942 
JSAtom
 
´İ
;

6944 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)) {

6945 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

6946 
ç
;

6949 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
Çme
è!ğ
JS_TAG_SYMBOL
)) {

6950 
	`JS_ThrowTy³E¼ÜNÙASymbŞ
(
ùx
);

6951 
ç
;

6953 
´İ
 = 
	`js_symbŞ_to_©om
(
ùx
, (
JSV®ue
)
Çme
);

6954 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

6955 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

6956 ià(
´s
) {

6957 
buf
[
ATOM_GET_STR_BUF_SIZE
];

6958 
	`JS_ThrowTy³E¼Ü
(
ùx
, "private class field %s‡lreadyƒxists",

6959 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
´İ
));

6960 
ç
;

6962 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
´İ
, 
JS_PROP_C_W_E
);

6963 ià(
	`uÆik–y
(!
´
)) {

6964 
ç
:

6965 
	`JS_F»eV®ue
(
ùx
, 
v®
);

6968 
´
->
u
.
v®ue
 = 
v®
;

6970 
	}
}

6972 
JSV®ue
 
	$JS_G‘Priv©eF›ld
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

6973 
JSV®ueCÚ¡
 
Çme
)

6975 
JSObjeù
 *
p
;

6976 
JSSh­ePrİ”ty
 *
´s
;

6977 
JSPrİ”ty
 *
´
;

6978 
JSAtom
 
´İ
;

6980 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
))

6981  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

6983 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
Çme
è!ğ
JS_TAG_SYMBOL
))

6984  
	`JS_ThrowTy³E¼ÜNÙASymbŞ
(
ùx
);

6985 
´İ
 = 
	`js_symbŞ_to_©om
(
ùx
, (
JSV®ue
)
Çme
);

6986 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

6987 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

6988 ià(!
´s
) {

6989 
	`JS_ThrowTy³E¼ÜPriv©eNÙFound
(
ùx
, 
´İ
);

6990  
JS_EXCEPTION
;

6992  
	`JS_DupV®ue
(
ùx
, 
´
->
u
.
v®ue
);

6993 
	}
}

6995 
	$JS_S‘Priv©eF›ld
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

6996 
JSV®ueCÚ¡
 
Çme
, 
JSV®ue
 
v®
)

6998 
JSObjeù
 *
p
;

6999 
JSSh­ePrİ”ty
 *
´s
;

7000 
JSPrİ”ty
 *
´
;

7001 
JSAtom
 
´İ
;

7003 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)) {

7004 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

7005 
ç
;

7008 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
Çme
è!ğ
JS_TAG_SYMBOL
)) {

7009 
	`JS_ThrowTy³E¼ÜNÙASymbŞ
(
ùx
);

7010 
ç
;

7012 
´İ
 = 
	`js_symbŞ_to_©om
(
ùx
, (
JSV®ue
)
Çme
);

7013 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

7014 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

7015 ià(!
´s
) {

7016 
	`JS_ThrowTy³E¼ÜPriv©eNÙFound
(
ùx
, 
´İ
);

7017 
ç
:

7018 
	`JS_F»eV®ue
(
ùx
, 
v®
);

7021 
	`£t_v®ue
(
ùx
, &
´
->
u
.
v®ue
, 
v®
);

7023 
	}
}

7025 
	$JS_AddB¿nd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, JSV®ueCÚ¡ 
home_obj
)

7027 
JSObjeù
 *
p
, *
p1
;

7028 
JSSh­ePrİ”ty
 *
´s
;

7029 
JSPrİ”ty
 *
´
;

7030 
JSV®ue
 
b¿nd
;

7031 
JSAtom
 
b¿nd_©om
;

7033 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
home_obj
è!ğ
JS_TAG_OBJECT
)) {

7034 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

7037 
p
 = 
	`JS_VALUE_GET_OBJ
(
home_obj
);

7038 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
JS_ATOM_Priv©e_b¿nd
);

7039 ià(!
´s
) {

7040 
b¿nd
 = 
	`JS_NewSymbŞFromAtom
(
ùx
, 
JS_ATOM_b¿nd
, 
JS_ATOM_TYPE_PRIVATE
);

7041 ià(
	`JS_IsExû±iÚ
(
b¿nd
))

7044 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
JS_ATOM_Priv©e_b¿nd
, 
JS_PROP_C_W_E
);

7045 ià(!
´
) {

7046 
	`JS_F»eV®ue
(
ùx
, 
b¿nd
);

7049 
´
->
u
.
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
b¿nd
);

7051 
b¿nd
 = 
	`JS_DupV®ue
(
ùx
, 
´
->
u
.
v®ue
);

7053 
b¿nd_©om
 = 
	`js_symbŞ_to_©om
(
ùx
, 
b¿nd
);

7055 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)) {

7056 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

7057 
	`JS_F»eAtom
(
ùx
, 
b¿nd_©om
);

7060 
p1
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

7061 
´
 = 
	`add_´İ”ty
(
ùx
, 
p1
, 
b¿nd_©om
, 
JS_PROP_C_W_E
);

7062 
	`JS_F»eAtom
(
ùx
, 
b¿nd_©om
);

7063 ià(!
´
)

7065 
´
->
u
.
v®ue
 = 
JS_UNDEFINED
;

7067 
	}
}

7069 
	$JS_CheckB¿nd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, JSV®ueCÚ¡ 
func
)

7071 
JSObjeù
 *
p
, *
p1
, *
home_obj
;

7072 
JSSh­ePrİ”ty
 *
´s
;

7073 
JSPrİ”ty
 *
´
;

7074 
JSV®ueCÚ¡
 
b¿nd
;

7077 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
func
è!ğ
JS_TAG_OBJECT
)) {

7078 
nÙ_obj
:

7079 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

7082 
p1
 = 
	`JS_VALUE_GET_OBJ
(
func
);

7083 ià(!
	`js_şass_has_by‹code
(
p1
->
şass_id
))

7084 
nÙ_obj
;

7085 
home_obj
 = 
p1
->
u
.
func
.
home_objeù
;

7086 ià(!
home_obj
)

7087 
nÙ_obj
;

7088 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
home_obj
, 
JS_ATOM_Priv©e_b¿nd
);

7089 ià(!
´s
) {

7090 
	`JS_ThrowTy³E¼Ü
(
ùx
, "expecting <brand>…rivate field");

7093 
b¿nd
 = 
´
->
u
.
v®ue
;

7095 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
b¿nd
è!ğ
JS_TAG_SYMBOL
))

7096 
nÙ_obj
;

7099 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
))

7100 
nÙ_obj
;

7101 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

7102 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
	`js_symbŞ_to_©om
(
ùx
, (
JSV®ue
)
b¿nd
));

7103 ià(!
´s
) {

7104 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid brand on object");

7108 
	}
}

7110 
	$num_keys_cmp
(cÚ¡ *
p1
, cÚ¡ *
p2
, *
İaque
)

7112 
JSCÚ‹xt
 *
ùx
 = 
İaque
;

7113 
JSAtom
 
©om1
 = ((cÚ¡ 
JSPrİ”tyEnum
 *)
p1
)->
©om
;

7114 
JSAtom
 
©om2
 = ((cÚ¡ 
JSPrİ”tyEnum
 *)
p2
)->
©om
;

7115 
ušt32_t
 
v1
, 
v2
;

7116 
BOOL
 
©om1_is_š‹g”
, 
©om2_is_š‹g”
;

7118 
©om1_is_š‹g”
 = 
	`JS_AtomIsA¼ayIndex
(
ùx
, &
v1
, 
©om1
);

7119 
©om2_is_š‹g”
 = 
	`JS_AtomIsA¼ayIndex
(
ùx
, &
v2
, 
©om2
);

7120 
	`as£¹
(
©om1_is_š‹g”
 && 
©om2_is_š‹g”
);

7121 ià(
v1
 < 
v2
)

7123 ià(
v1
 =ğ
v2
)

7127 
	}
}

7129 
	$js_ä“_´İ_’um
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyEnum
 *
b
, 
ušt32_t
 
Ën
)

7131 
ušt32_t
 
i
;

7132 ià(
b
) {

7133 
i
 = 0; i < 
Ën
; i++)

7134 
	`JS_F»eAtom
(
ùx
, 
b
[
i
].
©om
);

7135 
	`js_ä“
(
ùx
, 
b
);

7137 
	}
}

7141 
__exû±iÚ
 
	$JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
JSCÚ‹xt
 *
ùx
,

7142 
JSPrİ”tyEnum
 **
±ab
,

7143 
ušt32_t
 *
¶’
,

7144 
JSObjeù
 *
p
, 
æags
)

7146 
i
, 
j
;

7147 
JSSh­e
 *
sh
;

7148 
JSSh­ePrİ”ty
 *
´s
;

7149 
JSPrİ”tyEnum
 *
b_©om
, *
b_exÙic
;

7150 
JSAtom
 
©om
;

7151 
ušt32_t
 
num_keys_couÁ
, 
¡r_keys_couÁ
, 
sym_keys_couÁ
, 
©om_couÁ
;

7152 
ušt32_t
 
num_šdex
, 
¡r_šdex
, 
sym_šdex
, 
exÙic_couÁ
;

7153 
BOOL
 
is_’um”abË
, 
num_sÜ‹d
;

7154 
ušt32_t
 
num_key
;

7155 
JSAtomKšdEnum
 
kšd
;

7158 *
±ab
 = 
NULL
;

7159 *
¶’
 = 0;

7162 
num_keys_couÁ
 = 0;

7163 
¡r_keys_couÁ
 = 0;

7164 
sym_keys_couÁ
 = 0;

7165 
exÙic_couÁ
 = 0;

7166 
b_exÙic
 = 
NULL
;

7167 
sh
 = 
p
->
sh­e
;

7168 
i
 = 0, 
´s
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
; i++,…rs++) {

7169 
©om
 = 
´s
->atom;

7170 ià(
©om
 !ğ
JS_ATOM_NULL
) {

7171 
is_’um”abË
 = ((
´s
->
æags
 & 
JS_PROP_ENUMERABLE
) != 0);

7172 
kšd
 = 
	`JS_AtomG‘Kšd
(
ùx
, 
©om
);

7173 ià((!(
æags
 & 
JS_GPN_ENUM_ONLY
è|| 
is_’um”abË
) &&

7174 ((
æags
 >> 
kšd
) & 1) != 0) {

7177 ià(
	`uÆik–y
((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) &&

7178 (
æags
 & (
JS_GPN_SET_ENUM
 | 
JS_GPN_ENUM_ONLY
))) {

7179 
JSV¬Ref
 *
v¬_»f
 = 
p
->
´İ
[
i
].
u
.var_ref;

7180 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(*
v¬_»f
->
pv®ue
))) {

7181 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

7185 ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
num_key
, 
©om
)) {

7186 
num_keys_couÁ
++;

7187 } ià(
kšd
 =ğ
JS_ATOM_KIND_STRING
) {

7188 
¡r_keys_couÁ
++;

7190 
sym_keys_couÁ
++;

7196 ià(
p
->
is_exÙic
) {

7197 ià(
p
->
ç¡_¬¿y
) {

7200 ià((
æags
 & (
JS_GPN_SET_ENUM
 | 
JS_GPN_ENUM_ONLY
)) &&

7201 (
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

7202 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) &&

7203 
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
) &&

7204 
	`ty³d_¬¿y_g‘_Ëngth
(
ùx
, 
p
) != 0) {

7205 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

7208 
num_keys_couÁ
 +ğ
p
->
u
.
¬¿y
.
couÁ
;

7210 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

7211 ià(
em
 &&ƒm->
g‘_own_´İ”ty_Çmes
) {

7212 ià(
em
->
	`g‘_own_´İ”ty_Çmes
(
ùx
, &
b_exÙic
, &
exÙic_couÁ
,

7213 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
)))

7215 
i
 = 0; i < 
exÙic_couÁ
; i++) {

7216 
©om
 = 
b_exÙic
[
i
].atom;

7217 
kšd
 = 
	`JS_AtomG‘Kšd
(
ùx
, 
©om
);

7218 ià(((
æags
 >> 
kšd
) & 1) != 0) {

7219 
is_’um”abË
 = 
FALSE
;

7220 ià(
æags
 & (
JS_GPN_SET_ENUM
 | 
JS_GPN_ENUM_ONLY
)) {

7221 
JSPrİ”tyDesütÜ
 
desc
;

7222 
»s
;

7224 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
©om
);

7225 ià(
»s
 < 0) {

7226 
	`js_ä“_´İ_’um
(
ùx
, 
b_exÙic
, 
exÙic_couÁ
);

7229 ià(
»s
) {

7230 
is_’um”abË
 =

7231 ((
desc
.
æags
 & 
JS_PROP_ENUMERABLE
) != 0);

7232 
	`js_ä“_desc
(
ùx
, &
desc
);

7234 
b_exÙic
[
i
].
is_’um”abË
 = is_enumerable;

7236 ià(!(
æags
 & 
JS_GPN_ENUM_ONLY
è|| 
is_’um”abË
) {

7237 ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
num_key
, 
©om
)) {

7238 
num_keys_couÁ
++;

7239 } ià(
kšd
 =ğ
JS_ATOM_KIND_STRING
) {

7240 
¡r_keys_couÁ
++;

7242 
sym_keys_couÁ
++;

7253 
©om_couÁ
 = 
num_keys_couÁ
 + 
¡r_keys_couÁ
 + 
sym_keys_couÁ
;

7255 
b_©om
 = 
	`js_m®loc
(
ùx
, Ñab_©om[0]è* 
	`max_št
(
©om_couÁ
, 1));

7256 ià(!
b_©om
) {

7257 
	`js_ä“_´İ_’um
(
ùx
, 
b_exÙic
, 
exÙic_couÁ
);

7261 
num_šdex
 = 0;

7262 
¡r_šdex
 = 
num_keys_couÁ
;

7263 
sym_šdex
 = 
¡r_šdex
 + 
¡r_keys_couÁ
;

7265 
num_sÜ‹d
 = 
TRUE
;

7266 
sh
 = 
p
->
sh­e
;

7267 
i
 = 0, 
´s
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
; i++,…rs++) {

7268 
©om
 = 
´s
->atom;

7269 ià(
©om
 !ğ
JS_ATOM_NULL
) {

7270 
is_’um”abË
 = ((
´s
->
æags
 & 
JS_PROP_ENUMERABLE
) != 0);

7271 
kšd
 = 
	`JS_AtomG‘Kšd
(
ùx
, 
©om
);

7272 ià((!(
æags
 & 
JS_GPN_ENUM_ONLY
è|| 
is_’um”abË
) &&

7273 ((
æags
 >> 
kšd
) & 1) != 0) {

7274 ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
num_key
, 
©om
)) {

7275 
j
 = 
num_šdex
++;

7276 
num_sÜ‹d
 = 
FALSE
;

7277 } ià(
kšd
 =ğ
JS_ATOM_KIND_STRING
) {

7278 
j
 = 
¡r_šdex
++;

7280 
j
 = 
sym_šdex
++;

7282 
b_©om
[
j
].
©om
 = 
	`JS_DupAtom
(
ùx
,‡tom);

7283 
b_©om
[
j
].
is_’um”abË
 = is_enumerable;

7288 ià(
p
->
is_exÙic
) {

7289 ià(
p
->
ç¡_¬¿y
) {

7290 
i
 = 0; i < 
p
->
u
.
¬¿y
.
couÁ
; i++) {

7291 
b_©om
[
num_šdex
].
©om
 = 
	`__JS_AtomFromUIÁ32
(
i
);

7292 ià(
b_©om
[
num_šdex
].
©om
 =ğ
JS_ATOM_NULL
) {

7293 
	`js_ä“_´İ_’um
(
ùx
, 
b_exÙic
, 
exÙic_couÁ
);

7294 
	`js_ä“_´İ_’um
(
ùx
, 
b_©om
, 
num_šdex
);

7297 
b_©om
[
num_šdex
].
is_’um”abË
 = 
TRUE
;

7298 
num_šdex
++;

7301 ià(
exÙic_couÁ
 > 0) {

7302 
i
 = 0; i < 
exÙic_couÁ
; i++) {

7303 
©om
 = 
b_exÙic
[
i
].atom;

7304 
is_’um”abË
 = 
b_exÙic
[
i
].is_enumerable;

7305 
kšd
 = 
	`JS_AtomG‘Kšd
(
ùx
, 
©om
);

7306 ià((!(
æags
 & 
JS_GPN_ENUM_ONLY
è|| 
is_’um”abË
) &&

7307 ((
æags
 >> 
kšd
) & 1) != 0) {

7308 ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
num_key
, 
©om
)) {

7309 
j
 = 
num_šdex
++;

7310 
num_sÜ‹d
 = 
FALSE
;

7311 } ià(
kšd
 =ğ
JS_ATOM_KIND_STRING
) {

7312 
j
 = 
¡r_šdex
++;

7314 
j
 = 
sym_šdex
++;

7316 
b_©om
[
j
].
©om
 =‡tom;

7317 
b_©om
[
j
].
is_’um”abË
 = is_enumerable;

7319 
	`JS_F»eAtom
(
ùx
, 
©om
);

7323 
	`js_ä“
(
ùx
, 
b_exÙic
);

7326 
	`as£¹
(
num_šdex
 =ğ
num_keys_couÁ
);

7327 
	`as£¹
(
¡r_šdex
 =ğ
num_keys_couÁ
 + 
¡r_keys_couÁ
);

7328 
	`as£¹
(
sym_šdex
 =ğ
©om_couÁ
);

7330 ià(
num_keys_couÁ
 !ğ0 && !
num_sÜ‹d
) {

7331 
	`rqsÜt
(
b_©om
, 
num_keys_couÁ
, Ñab_©om[0]), 
num_keys_cmp
,

7332 
ùx
);

7334 *
±ab
 = 
b_©om
;

7335 *
¶’
 = 
©om_couÁ
;

7337 
	}
}

7339 
	$JS_G‘OwnPrİ”tyNames
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyEnum
 **
±ab
,

7340 
ušt32_t
 *
¶’
, 
JSV®ueCÚ¡
 
obj
, 
æags
)

7342 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
) {

7343 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

7346  
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, 
±ab
, 
¶’
,

7347 
	`JS_VALUE_GET_OBJ
(
obj
), 
æags
);

7348 
	}
}

7353 
	$JS_G‘OwnPrİ”tyIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
desc
,

7354 
JSObjeù
 *
p
, 
JSAtom
 
´İ
)

7356 
JSSh­ePrİ”ty
 *
´s
;

7357 
JSPrİ”ty
 *
´
;

7359 
»Œy
:

7360 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

7361 ià(
´s
) {

7362 ià(
desc
) {

7363 
desc
->
æags
 = 
´s
->æag & 
JS_PROP_C_W_E
;

7364 
desc
->
g‘‹r
 = 
JS_UNDEFINED
;

7365 
desc
->
£‰”
 = 
JS_UNDEFINED
;

7366 
desc
->
v®ue
 = 
JS_UNDEFINED
;

7367 ià(
	`uÆik–y
(
´s
->
æags
 & 
JS_PROP_TMASK
)) {

7368 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

7369 
desc
->
æags
 |ğ
JS_PROP_GETSET
;

7370 ià(
´
->
u
.
g‘£t
.
g‘‹r
)

7371 
desc
->
g‘‹r
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.getter));

7372 ià(
´
->
u
.
g‘£t
.
£‰”
)

7373 
desc
->
£‰”
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.setter));

7374 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

7375 
JSV®ue
 
v®
 = *
´
->
u
.
v¬_»f
->
pv®ue
;

7376 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
v®
))) {

7377 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

7380 
desc
->
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
v®
);

7381 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

7383 ià(
	`JS_AutoIn™Prİ”ty
(
ùx
, 
p
, 
´İ
, 
´
))

7385 
»Œy
;

7388 
desc
->
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
´
->
u
.value);

7392 ià(
	`uÆik–y
((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
)) {

7393 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(*
´
->
u
.
v¬_»f
->
pv®ue
))) {

7394 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

7397 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

7401  
TRUE
;

7403 ià(
p
->
is_exÙic
) {

7404 ià(
p
->
ç¡_¬¿y
) {

7406 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

7407 
ušt32_t
 
idx
;

7408 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

7409 ià(
idx
 < 
p
->
u
.
¬¿y
.
couÁ
) {

7410 ià(
desc
) {

7411 
desc
->
æags
 = 
JS_PROP_WRITABLE
 | 
JS_PROP_ENUMERABLE
;

7412 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
 ||

7413 
p
->
şass_id
 =ğ
JS_CLASS_ARGUMENTS
)

7414 
desc
->
æags
 |ğ
JS_PROP_CONFIGURABLE
;

7415 
desc
->
g‘‹r
 = 
JS_UNDEFINED
;

7416 
desc
->
£‰”
 = 
JS_UNDEFINED
;

7417 
desc
->
v®ue
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
idx
);

7419  
TRUE
;

7422 ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

7423 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

7424 
»t
;

7425 
»t
 = 
	`JS_AtomIsNum”icIndex
(
ùx
, 
´İ
);

7426 ià(
»t
 != 0) {

7427 ià(
»t
 < 0)

7429 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

7430 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

7436 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

7437 ià(
em
 &&ƒm->
g‘_own_´İ”ty
) {

7438  
em
->
	`g‘_own_´İ”ty
(
ùx
, 
desc
,

7439 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
´İ
);

7443  
FALSE
;

7444 
	}
}

7446 
	$JS_G‘OwnPrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
desc
,

7447 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
´İ
)

7449 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
) {

7450 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

7453  
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, 
desc
, 
	`JS_VALUE_GET_OBJ
(
obj
), 
´İ
);

7454 
	}
}

7457 
	$JS_IsEx‹nsibË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

7459 
JSObjeù
 *
p
;

7461 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
))

7462  
FALSE
;

7463 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

7464 ià(
	`uÆik–y
(
p
->
şass_id
 =ğ
JS_CLASS_PROXY
))

7465  
	`js_´oxy_isEx‹nsibË
(
ùx
, 
obj
);

7467  
p
->
ex‹nsibË
;

7468 
	}
}

7471 
	$JS_P»v’tEx‹nsiÚs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

7473 
JSObjeù
 *
p
;

7475 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
))

7476  
FALSE
;

7477 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

7478 ià(
	`uÆik–y
(
p
->
şass_id
 =ğ
JS_CLASS_PROXY
))

7479  
	`js_´oxy_´ev’tEx‹nsiÚs
(
ùx
, 
obj
);

7480 
p
->
ex‹nsibË
 = 
FALSE
;

7481  
TRUE
;

7482 
	}
}

7485 
	$JS_HasPrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
´İ
)

7487 
JSObjeù
 *
p
;

7488 
»t
;

7490 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
))

7491  
FALSE
;

7492 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

7494 ià(
p
->
is_exÙic
) {

7495 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

7496 ià(
em
 &&ƒm->
has_´İ”ty
)

7497  
em
->
	`has_´İ”ty
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
´İ
);

7499 
»t
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, 
NULL
, 
p
, 
´İ
);

7500 ià(
»t
 != 0)

7501  
»t
;

7502 ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

7503 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

7504 
»t
 = 
	`JS_AtomIsNum”icIndex
(
ùx
, 
´İ
);

7505 ià(
»t
 != 0) {

7506 ià(
»t
 < 0)

7510  
FALSE
;

7513 
p
 =…->
sh­e
->
´Ùo
;

7514 ià(!
p
)

7517  
FALSE
;

7518 
	}
}

7521 
JSAtom
 
	$js_symbŞ_to_©om
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

7523 
JSAtomSŒuù
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

7524  
	`js_g‘_©om_šdex
(
ùx
->
¹
, 
p
);

7525 
	}
}

7528 
JSAtom
 
	$JS_V®ueToAtom
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

7530 
JSAtom
 
©om
;

7531 
ušt32_t
 
g
;

7532 
g
 = 
	`JS_VALUE_GET_TAG
(
v®
);

7533 ià(
g
 =ğ
JS_TAG_INT
 &&

7534 (
ušt32_t
)
	`JS_VALUE_GET_INT
(
v®
è<ğ
JS_ATOM_MAX_INT
) {

7536 
©om
 = 
	`__JS_AtomFromUIÁ32
(
	`JS_VALUE_GET_INT
(
v®
));

7537 } ià(
g
 =ğ
JS_TAG_SYMBOL
) {

7538 
JSAtomSŒuù
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

7539 
©om
 = 
	`JS_DupAtom
(
ùx
, 
	`js_g‘_©om_šdex
(ùx->
¹
, 
p
));

7541 
JSV®ue
 
¡r
;

7542 
¡r
 = 
	`JS_ToPrİ”tyKey
(
ùx
, 
v®
);

7543 ià(
	`JS_IsExû±iÚ
(
¡r
))

7544  
JS_ATOM_NULL
;

7545 ià(
	`JS_VALUE_GET_TAG
(
¡r
è=ğ
JS_TAG_SYMBOL
) {

7546 
©om
 = 
	`js_symbŞ_to_©om
(
ùx
, 
¡r
);

7548 
©om
 = 
	`JS_NewAtomSŒ
(
ùx
, 
	`JS_VALUE_GET_STRING
(
¡r
));

7551  
©om
;

7552 
	}
}

7554 
JSV®ue
 
	$JS_G‘Prİ”tyV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

7555 
JSV®ue
 
´İ
)

7557 
JSAtom
 
©om
;

7558 
JSV®ue
 
»t
;

7560 ià(
	`lik–y
(
	`JS_VALUE_GET_TAG
(
this_obj
è=ğ
JS_TAG_OBJECT
 &&

7561 
	`JS_VALUE_GET_TAG
(
´İ
è=ğ
JS_TAG_INT
)) {

7562 
JSObjeù
 *
p
;

7563 
ušt32_t
 
idx
, 
Ën
;

7565 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

7566 
idx
 = 
	`JS_VALUE_GET_INT
(
´İ
);

7567 
Ën
 = (
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
;

7568 ià(
	`uÆik–y
(
idx
 >ğ
Ën
))

7569 
¦ow_·th
;

7570 
p
->
şass_id
) {

7571 
JS_CLASS_ARRAY
:

7572 
JS_CLASS_ARGUMENTS
:

7573  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
¬¿y
.u.
v®ues
[
idx
]);

7574 
JS_CLASS_INT8_ARRAY
:

7575  
	`JS_NewIÁ32
(
ùx
, 
p
->
u
.
¬¿y
.u.
št8_±r
[
idx
]);

7576 
JS_CLASS_UINT8C_ARRAY
:

7577 
JS_CLASS_UINT8_ARRAY
:

7578  
	`JS_NewIÁ32
(
ùx
, 
p
->
u
.
¬¿y
.u.
ušt8_±r
[
idx
]);

7579 
JS_CLASS_INT16_ARRAY
:

7580  
	`JS_NewIÁ32
(
ùx
, 
p
->
u
.
¬¿y
.u.
št16_±r
[
idx
]);

7581 
JS_CLASS_UINT16_ARRAY
:

7582  
	`JS_NewIÁ32
(
ùx
, 
p
->
u
.
¬¿y
.u.
ušt16_±r
[
idx
]);

7583 
JS_CLASS_INT32_ARRAY
:

7584  
	`JS_NewIÁ32
(
ùx
, 
p
->
u
.
¬¿y
.u.
št32_±r
[
idx
]);

7585 
JS_CLASS_UINT32_ARRAY
:

7586  
	`JS_NewUšt32
(
ùx
, 
p
->
u
.
¬¿y
.u.
ušt32_±r
[
idx
]);

7587 #ifdeà
CONFIG_BIGNUM


7588 
JS_CLASS_BIG_INT64_ARRAY
:

7589  
	`JS_NewBigIÁ64
(
ùx
, 
p
->
u
.
¬¿y
.u.
št64_±r
[
idx
]);

7590 
JS_CLASS_BIG_UINT64_ARRAY
:

7591  
	`JS_NewBigUšt64
(
ùx
, 
p
->
u
.
¬¿y
.u.
ušt64_±r
[
idx
]);

7593 
JS_CLASS_FLOAT32_ARRAY
:

7594  
	`__JS_NewFlßt64
(
ùx
, 
p
->
u
.
¬¿y
.u.
æßt_±r
[
idx
]);

7595 
JS_CLASS_FLOAT64_ARRAY
:

7596  
	`__JS_NewFlßt64
(
ùx
, 
p
->
u
.
¬¿y
.u.
doubË_±r
[
idx
]);

7598 
¦ow_·th
;

7601 
¦ow_·th
:

7602 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

7603 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

7604 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

7605  
JS_EXCEPTION
;

7606 
»t
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_obj
, 
©om
);

7607 
	`JS_F»eAtom
(
ùx
, 
©om
);

7608  
»t
;

7610 
	}
}

7612 
JSV®ue
 
	$JS_G‘Prİ”tyUšt32
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

7613 
ušt32_t
 
idx
)

7615  
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
this_obj
, 
	`JS_NewUšt32
(ùx, 
idx
));

7616 
	}
}

7623 
	$JS_TryG‘Prİ”tyIÁ64
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
sšt64_t
 
idx
, 
JSV®ue
 *
pv®
)

7625 
JSV®ue
 
v®
 = 
JS_UNDEFINED
;

7626 
JSAtom
 
´İ
;

7627 
´e£Á
;

7629 ià(
	`lik–y
((
ušt64_t
)
idx
 <ğ
JS_ATOM_MAX_INT
)) {

7631 
´e£Á
 = 
	`JS_HasPrİ”ty
(
ùx
, 
obj
, 
	`__JS_AtomFromUIÁ32
(
idx
));

7632 ià(
´e£Á
 > 0) {

7633 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
obj
, 
	`JS_NewIÁ32
(ùx, 
idx
));

7634 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

7635 
´e£Á
 = -1;

7638 
´İ
 = 
	`JS_NewAtomIÁ64
(
ùx
, 
idx
);

7639 
´e£Á
 = -1;

7640 ià(
	`lik–y
(
´İ
 !ğ
JS_ATOM_NULL
)) {

7641 
´e£Á
 = 
	`JS_HasPrİ”ty
(
ùx
, 
obj
, 
´İ
);

7642 ià(
´e£Á
 > 0) {

7643 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
´İ
);

7644 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

7645 
´e£Á
 = -1;

7647 
	`JS_F»eAtom
(
ùx
, 
´İ
);

7650 *
pv®
 = 
v®
;

7651  
´e£Á
;

7652 
	}
}

7654 
JSV®ue
 
	$JS_G‘Prİ”tyIÁ64
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
sšt64_t
 
idx
)

7656 
JSAtom
 
´İ
;

7657 
JSV®ue
 
v®
;

7659 ià((
ušt64_t
)
idx
 <ğ
INT32_MAX
) {

7661  
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
obj
, 
	`JS_NewIÁ32
(ùx, 
idx
));

7663 
´İ
 = 
	`JS_NewAtomIÁ64
(
ùx
, 
idx
);

7664 ià(
´İ
 =ğ
JS_ATOM_NULL
)

7665  
JS_EXCEPTION
;

7667 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
´İ
);

7668 
	`JS_F»eAtom
(
ùx
, 
´İ
);

7669  
v®
;

7670 
	}
}

7672 
JSV®ue
 
	$JS_G‘Prİ”tySŒ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

7673 cÚ¡ *
´İ
)

7675 
JSAtom
 
©om
;

7676 
JSV®ue
 
»t
;

7677 
©om
 = 
	`JS_NewAtom
(
ùx
, 
´İ
);

7678 
»t
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_obj
, 
©om
);

7679 
	`JS_F»eAtom
(
ùx
, 
©om
);

7680  
»t
;

7681 
	}
}

7685 
JSPrİ”ty
 *
	$add_´İ”ty
(
JSCÚ‹xt
 *
ùx
,

7686 
JSObjeù
 *
p
, 
JSAtom
 
´İ
, 
´İ_æags
)

7688 
JSSh­e
 *
sh
, *
Ãw_sh
;

7690 
sh
 = 
p
->
sh­e
;

7691 ià(
sh
->
is_hashed
) {

7693 
Ãw_sh
 = 
	`fšd_hashed_sh­e_´İ
(
ùx
->
¹
, 
sh
, 
´İ
, 
´İ_æags
);

7694 ià(
Ãw_sh
) {

7697 ià(
Ãw_sh
->
´İ_size
 !ğ
sh
->prop_size) {

7698 
JSPrİ”ty
 *
Ãw_´İ
;

7699 
Ãw_´İ
 = 
	`js_»®loc
(
ùx
, 
p
->
´İ
, (p->prop[0]) *

7700 
Ãw_sh
->
´İ_size
);

7701 ià(!
Ãw_´İ
)

7702  
NULL
;

7703 
p
->
´İ
 = 
Ãw_´İ
;

7705 
p
->
sh­e
 = 
	`js_dup_sh­e
(
Ãw_sh
);

7706 
	`js_ä“_sh­e
(
ùx
->
¹
, 
sh
);

7707  &
p
->
´İ
[
Ãw_sh
->
´İ_couÁ
 - 1];

7708 } ià(
sh
->
h—d”
.
»f_couÁ
 != 1) {

7710 
Ãw_sh
 = 
	`js_şÚe_sh­e
(
ùx
, 
sh
);

7711 ià(!
Ãw_sh
)

7712  
NULL
;

7714 
Ãw_sh
->
is_hashed
 = 
TRUE
;

7715 
	`js_sh­e_hash_lšk
(
ùx
->
¹
, 
Ãw_sh
);

7716 
	`js_ä“_sh­e
(
ùx
->
¹
, 
p
->
sh­e
);

7717 
p
->
sh­e
 = 
Ãw_sh
;

7720 
	`as£¹
(
p
->
sh­e
->
h—d”
.
»f_couÁ
 == 1);

7721 ià(
	`add_sh­e_´İ”ty
(
ùx
, &
p
->
sh­e
,…, 
´İ
, 
´İ_æags
))

7722  
NULL
;

7723  &
p
->
´İ
[p->
sh­e
->
´İ_couÁ
 - 1];

7724 
	}
}

7728 
no_šlše
 
__exû±iÚ
 
	$cÚv”t_ç¡_¬¿y_to_¬¿y
(
JSCÚ‹xt
 *
ùx
,

7729 
JSObjeù
 *
p
)

7731 
JSPrİ”ty
 *
´
;

7732 
JSSh­e
 *
sh
;

7733 
JSV®ue
 *
b
;

7734 
ušt32_t
 
i
, 
Ën
, 
Ãw_couÁ
;

7736 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, 
NULL
))

7738 
Ën
 = 
p
->
u
.
¬¿y
.
couÁ
;

7740 
sh
 = 
p
->
sh­e
;

7741 
Ãw_couÁ
 = 
sh
->
´İ_couÁ
 + 
Ën
;

7742 ià(
Ãw_couÁ
 > 
sh
->
´İ_size
) {

7743 ià(
	`»size_´İ”t›s
(
ùx
, &
p
->
sh­e
,…, 
Ãw_couÁ
))

7747 
b
 = 
p
->
u
.
¬¿y
.u.
v®ues
;

7748 
i
 = 0; i < 
Ën
; i++) {

7751 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
	`__JS_AtomFromUIÁ32
(
i
), 
JS_PROP_C_W_E
);

7752 
´
->
u
.
v®ue
 = *
b
++;

7754 
	`js_ä“
(
ùx
, 
p
->
u
.
¬¿y
.u.
v®ues
);

7755 
p
->
u
.
¬¿y
.
couÁ
 = 0;

7756 
p
->
u
.
¬¿y
.u.
v®ues
 = 
NULL
;

7757 
p
->
u
.
¬¿y
.
u1
.
size
 = 0;

7758 
p
->
ç¡_¬¿y
 = 0;

7760 
	}
}

7762 
	$d–‘e_´İ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSAtom
 
©om
)

7764 
JSSh­e
 *
sh
;

7765 
JSSh­ePrİ”ty
 *
´
, *
Ír
, *
´İ
;

7766 
JSPrİ”ty
 *
´1
;

7767 
ušt32_t
 
Ír_idx
;

7768 
šŒ_t
 
h
, 
h1
;

7770 
»do
:

7771 
sh
 = 
p
->
sh­e
;

7772 
h1
 = 
©om
 & 
sh
->
´İ_hash_mask
;

7773 
h
 = 
sh
->
´İ_hash_’d
[-
h1
 - 1];

7774 
´İ
 = 
	`g‘_sh­e_´İ
(
sh
);

7775 
Ír
 = 
NULL
;

7776 
Ír_idx
 = 0;

7777 
h
 != 0) {

7778 
´
 = &
´İ
[
h
 - 1];

7779 ià(
	`lik–y
(
´
->
©om
 ==‡tom)) {

7781 ià(!(
´
->
æags
 & 
JS_PROP_CONFIGURABLE
))

7782  
FALSE
;

7784 ià(
Ír
)

7785 
Ír_idx
 = 
Ír
 - 
	`g‘_sh­e_´İ
(
sh
);

7786 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, &
´
))

7788 
sh
 = 
p
->
sh­e
;

7790 ià(
Ír
) {

7791 
Ír
 = 
	`g‘_sh­e_´İ
(
sh
è+ 
Ír_idx
;

7792 
Ír
->
hash_Ãxt
 = 
´
->hash_next;

7794 
sh
->
´İ_hash_’d
[-
h1
 - 1] = 
´
->
hash_Ãxt
;

7797 
´1
 = &
p
->
´İ
[
h
 - 1];

7798 
	`ä“_´İ”ty
(
ùx
->
¹
, 
´1
, 
´
->
æags
);

7799 
	`JS_F»eAtom
(
ùx
, 
´
->
©om
);

7801 
´
->
æags
 = 0;

7802 
´
->
©om
 = 
JS_ATOM_NULL
;

7803 
´1
->
u
.
v®ue
 = 
JS_UNDEFINED
;

7804  
TRUE
;

7806 
Ír
 = 
´
;

7807 
h
 = 
´
->
hash_Ãxt
;

7810 ià(
p
->
is_exÙic
) {

7811 ià(
p
->
ç¡_¬¿y
) {

7812 
ušt32_t
 
idx
;

7813 ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
idx
, 
©om
) &&

7814 
idx
 < 
p
->
u
.
¬¿y
.
couÁ
) {

7815 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
 ||

7816 
p
->
şass_id
 =ğ
JS_CLASS_ARGUMENTS
) {

7818 ià(
idx
 =ğ
p
->
u
.
¬¿y
.
couÁ
 - 1) {

7819 
	`JS_F»eV®ue
(
ùx
, 
p
->
u
.
¬¿y
.u.
v®ues
[
idx
]);

7820 
p
->
u
.
¬¿y
.
couÁ
 = 
idx
;

7821  
TRUE
;

7823 ià(
	`cÚv”t_ç¡_¬¿y_to_¬¿y
(
ùx
, 
p
))

7825 
»do
;

7827  
FALSE
;

7831 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

7832 ià(
em
 &&ƒm->
d–‘e_´İ”ty
) {

7833  
em
->
	`d–‘e_´İ”ty
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
©om
);

7838  
TRUE
;

7839 
	}
}

7841 
	$ÿÎ_£‰”
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
£‰”
,

7842 
JSV®ueCÚ¡
 
this_obj
, 
JSV®ue
 
v®
, 
æags
)

7844 
JSV®ue
 
»t
, 
func
;

7845 ià(
	`lik–y
(
£‰”
)) {

7846 
func
 = 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
£‰”
);

7848 
func
 = 
	`JS_DupV®ue
(
ùx
, func);

7849 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
func
, 
this_obj
, 1, (
JSV®ueCÚ¡
 *)&
v®
);

7850 
	`JS_F»eV®ue
(
ùx
, 
v®
);

7851 ià(
	`JS_IsExû±iÚ
(
»t
))

7853 
	`JS_F»eV®ue
(
ùx
, 
»t
);

7854  
TRUE
;

7856 
	`JS_F»eV®ue
(
ùx
, 
v®
);

7857 ià((
æags
 & 
JS_PROP_THROW
) ||

7858 ((
æags
 & 
JS_PROP_THROW_STRICT
è&& 
	`is_¡riù_mode
(
ùx
))) {

7859 
	`JS_ThrowTy³E¼Ü
(
ùx
, "no setter for…roperty");

7862  
FALSE
;

7864 
	}
}

7867 
	$£t_¬¿y_Ëngth
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSPrİ”ty
 *
´İ
,

7868 
JSV®ue
 
v®
, 
æags
)

7870 
ušt32_t
 
Ën
, 
idx
, 
cur_Ën
;

7871 
i
, 
»t
;

7873 
»t
 = 
	`JS_ToA¼ayL’gthF»e
(
ùx
, &
Ën
, 
v®
);

7874 ià(
»t
)

7876 ià(
	`lik–y
(
p
->
ç¡_¬¿y
)) {

7877 
ušt32_t
 
Şd_Ën
 = 
p
->
u
.
¬¿y
.
couÁ
;

7878 ià(
Ën
 < 
Şd_Ën
) {

7879 
i
 = 
Ën
; i < 
Şd_Ën
; i++) {

7880 
	`JS_F»eV®ue
(
ùx
, 
p
->
u
.
¬¿y
.u.
v®ues
[
i
]);

7882 
p
->
u
.
¬¿y
.
couÁ
 = 
Ën
;

7884 
´İ
->
u
.
v®ue
 = 
	`JS_NewUšt32
(
ùx
, 
Ën
);

7888 
	`JS_ToUšt32
(
ùx
, &
cur_Ën
, 
´İ
->
u
.
v®ue
);

7889 ià(
Ën
 < 
cur_Ën
) {

7890 
ušt32_t
 
d
;

7891 
JSSh­e
 *
sh
;

7892 
JSSh­ePrİ”ty
 *
´
;

7894 
d
 = 
cur_Ën
 - 
Ën
;

7895 
sh
 = 
p
->
sh­e
;

7896 ià(
d
 <ğ
sh
->
´İ_couÁ
) {

7897 
JSAtom
 
©om
;

7900 
cur_Ën
 > 
Ën
) {

7901 
©om
 = 
	`JS_NewAtomUIÁ32
(
ùx
, 
cur_Ën
 - 1);

7902 
»t
 = 
	`d–‘e_´İ”ty
(
ùx
, 
p
, 
©om
);

7903 
	`JS_F»eAtom
(
ùx
, 
©om
);

7904 ià(
	`uÆik–y
(!
»t
)) {

7909 
cur_Ën
--;

7915 
cur_Ën
 = 
Ën
;

7916 
i
 = 0, 
´
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
;

7917 
i
++, 
´
++) {

7918 ià(
´
->
©om
 !ğ
JS_ATOM_NULL
 &&

7919 
	`JS_AtomIsA¼ayIndex
(
ùx
, &
idx
, 
´
->
©om
)) {

7920 ià(
idx
 >ğ
cur_Ën
 &&

7921 !(
´
->
æags
 & 
JS_PROP_CONFIGURABLE
)) {

7922 
cur_Ën
 = 
idx
 + 1;

7927 
i
 = 0, 
´
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
;

7928 
i
++, 
´
++) {

7929 ià(
´
->
©om
 !ğ
JS_ATOM_NULL
 &&

7930 
	`JS_AtomIsA¼ayIndex
(
ùx
, &
idx
, 
´
->
©om
)) {

7931 ià(
idx
 >ğ
cur_Ën
) {

7933 
	`d–‘e_´İ”ty
(
ùx
, 
p
, 
´
->
©om
);

7935 
sh
 = 
p
->
sh­e
;

7936 
´
 = 
	`g‘_sh­e_´İ
(
sh
è+ 
i
;

7942 
cur_Ën
 = 
Ën
;

7944 
	`£t_v®ue
(
ùx
, &
p
->
´İ
[0].
u
.
v®ue
, 
	`JS_NewUšt32
(ùx, 
cur_Ën
));

7945 ià(
	`uÆik–y
(
cur_Ën
 > 
Ën
)) {

7946  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "not configurable");

7949  
TRUE
;

7950 
	}
}

7954 
	$add_ç¡_¬¿y_–em’t
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

7955 
JSV®ue
 
v®
, 
æags
)

7957 
ušt32_t
 
Ãw_Ën
, 
¬¿y_Ën
;

7960 
Ãw_Ën
 = 
p
->
u
.
¬¿y
.
couÁ
 + 1;

7963 ià(
	`lik–y
(
	`JS_VALUE_GET_TAG
(
p
->
´İ
[0].
u
.
v®ue
è=ğ
JS_TAG_INT
)) {

7964 
¬¿y_Ën
 = 
	`JS_VALUE_GET_INT
(
p
->
´İ
[0].
u
.
v®ue
);

7965 ià(
Ãw_Ën
 > 
¬¿y_Ën
) {

7966 ià(
	`uÆik–y
(!(
	`g‘_sh­e_´İ
(
p
->
sh­e
)->
æags
 & 
JS_PROP_WRITABLE
))) {

7967 
	`JS_F»eV®ue
(
ùx
, 
v®
);

7968  
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
æags
, 
JS_ATOM_Ëngth
);

7970 
p
->
´İ
[0].
u
.
v®ue
 = 
	`JS_NewIÁ32
(
ùx
, 
Ãw_Ën
);

7973 ià(
	`uÆik–y
(
Ãw_Ën
 > 
p
->
u
.
¬¿y
.
u1
.
size
)) {

7974 
ušt32_t
 
Ãw_size
;

7975 
size_t
 
¦ack
;

7976 
JSV®ue
 *
Ãw_¬¿y_´İ
;

7978 
Ãw_size
 = 
	`max_št
(
Ãw_Ën
, 
p
->
u
.
¬¿y
.
u1
.
size
 * 3 / 2);

7979 
Ãw_¬¿y_´İ
 = 
	`js_»®loc2
(
ùx
, 
p
->
u
.
¬¿y
.u.
v®ues
, (
JSV®ue
è* 
Ãw_size
, &
¦ack
);

7980 ià(!
Ãw_¬¿y_´İ
) {

7981 
	`JS_F»eV®ue
(
ùx
, 
v®
);

7984 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_¬¿y_´İ
);

7985 
p
->
u
.
¬¿y
.u.
v®ues
 = 
Ãw_¬¿y_´İ
;

7986 
p
->
u
.
¬¿y
.
u1
.
size
 = 
Ãw_size
;

7988 
p
->
u
.
¬¿y
.u.
v®ues
[
Ãw_Ën
 - 1] = 
v®
;

7989 
p
->
u
.
¬¿y
.
couÁ
 = 
Ãw_Ën
;

7990  
TRUE
;

7991 
	}
}

7993 
	$js_ä“_desc
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
desc
)

7995 
	`JS_F»eV®ue
(
ùx
, 
desc
->
g‘‹r
);

7996 
	`JS_F»eV®ue
(
ùx
, 
desc
->
£‰”
);

7997 
	`JS_F»eV®ue
(
ùx
, 
desc
->
v®ue
);

7998 
	}
}

8001 
	$JS_S‘Prİ”tyG’”ic
(
JSCÚ‹xt
 *
ùx
,

8002 
JSObjeù
 *
p
, 
JSAtom
 
´İ
,

8003 
JSV®ue
 
v®
, 
JSV®ueCÚ¡
 
this_obj
,

8004 
æags
)

8006 
»t
;

8007 
JSPrİ”tyDesütÜ
 
desc
;

8009 
p
 !ğ
NULL
) {

8010 ià(
p
->
is_exÙic
) {

8011 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

8012 ià(
em
 &&ƒm->
£t_´İ”ty
) {

8013 
»t
 = 
em
->
	`£t_´İ”ty
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
), 
´İ
,

8014 
v®
, 
this_obj
, 
æags
);

8015 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8016  
»t
;

8020 
»t
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
´İ
);

8021 ià(
»t
 < 0)

8022  
»t
;

8023 ià(
»t
) {

8024 ià(
desc
.
æags
 & 
JS_PROP_GETSET
) {

8025 
JSObjeù
 *
£‰”
;

8026 ià(
	`JS_IsUndefšed
(
desc
.
£‰”
))

8027 
£‰”
 = 
NULL
;

8029 
£‰”
 = 
	`JS_VALUE_GET_OBJ
(
desc
.setter);

8030 
»t
 = 
	`ÿÎ_£‰”
(
ùx
, 
£‰”
, 
this_obj
, 
v®
, 
æags
);

8031 
	`JS_F»eV®ue
(
ùx
, 
desc
.
g‘‹r
);

8032 
	`JS_F»eV®ue
(
ùx
, 
desc
.
£‰”
);

8033  
»t
;

8035 
	`JS_F»eV®ue
(
ùx
, 
desc
.
v®ue
);

8036 ià(!(
desc
.
æags
 & 
JS_PROP_WRITABLE
)) {

8037 
»ad_Úly_”rÜ
;

8042 
p
 =…->
sh­e
->
´Ùo
;

8045 ià(!
	`JS_IsObjeù
(
this_obj
))

8046  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "receiver is‚ot‡n object");

8048 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

8051 
»t
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
´İ
);

8052 ià(
»t
 < 0)

8053  
»t
;

8054 ià(
»t
) {

8055 ià(
desc
.
æags
 & 
JS_PROP_GETSET
) {

8056 
	`JS_F»eV®ue
(
ùx
, 
desc
.
g‘‹r
);

8057 
	`JS_F»eV®ue
(
ùx
, 
desc
.
£‰”
);

8058 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8059  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "setter is forbidden");

8061 
	`JS_F»eV®ue
(
ùx
, 
desc
.
v®ue
);

8062 ià(!(
desc
.
æags
 & 
JS_PROP_WRITABLE
) ||

8063 
p
->
şass_id
 =ğ
JS_CLASS_MODULE_NS
) {

8064 
»ad_Úly_”rÜ
:

8065 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8066  
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
æags
, 
´İ
);

8069 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
v®
,

8070 
JS_UNDEFINED
, JS_UNDEFINED,

8071 
JS_PROP_HAS_VALUE
);

8072 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8073  
»t
;

8076 
»t
 = 
	`JS_C»©ePrİ”ty
(
ùx
, 
p
, 
´İ
, 
v®
, 
JS_UNDEFINED
, JS_UNDEFINED,

8077 
æags
 |

8078 
JS_PROP_HAS_VALUE
 |

8079 
JS_PROP_HAS_ENUMERABLE
 |

8080 
JS_PROP_HAS_WRITABLE
 |

8081 
JS_PROP_HAS_CONFIGURABLE
 |

8082 
JS_PROP_C_W_E
);

8083 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8084  
»t
;

8085 
	}
}

8091 
	$JS_S‘Prİ”tyIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8092 
JSAtom
 
´İ
, 
JSV®ue
 
v®
, 
æags
)

8094 
JSObjeù
 *
p
, *
p1
;

8095 
JSSh­ePrİ”ty
 *
´s
;

8096 
JSPrİ”ty
 *
´
;

8097 
ušt32_t
 
g
;

8098 
JSPrİ”tyDesütÜ
 
desc
;

8099 
»t
;

8101 
	`´štf
("JS_S‘Prİ”tyIÁ”Çl: "); 
	`´št_©om
(
ùx
, 
´İ
);…rintf("\n");

8103 
g
 = 
	`JS_VALUE_GET_TAG
(
this_obj
);

8104 ià(
	`uÆik–y
(
g
 !ğ
JS_TAG_OBJECT
)) {

8105 
g
) {

8106 
JS_TAG_NULL
:

8107 
JS_TAG_UNDEFINED
:

8108 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8109 
	`JS_ThrowTy³E¼Ü
(
ùx
, "value has‚o…roperty");

8113 
p
 = 
NULL
;

8114 
p1
 = 
	`JS_VALUE_GET_OBJ
(
	`JS_G‘PrÙÙy³
(
ùx
, 
this_obj
));

8115 
´ÙÙy³_lookup
;

8118 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

8119 
»Œy
:

8120 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

8121 ià(
´s
) {

8122 ià(
	`lik–y
((
´s
->
æags
 & (
JS_PROP_TMASK
 | 
JS_PROP_WRITABLE
 |

8123 
JS_PROP_LENGTH
)è=ğ
JS_PROP_WRITABLE
)) {

8125 
	`£t_v®ue
(
ùx
, &
´
->
u
.
v®ue
, 
v®
);

8126  
TRUE
;

8127 } ià((
´s
->
æags
 & (
JS_PROP_LENGTH
 | 
JS_PROP_WRITABLE
)) ==

8128 (
JS_PROP_LENGTH
 | 
JS_PROP_WRITABLE
)) {

8129 
	`as£¹
(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
);

8130 
	`as£¹
(
´İ
 =ğ
JS_ATOM_Ëngth
);

8131  
	`£t_¬¿y_Ëngth
(
ùx
, 
p
, 
´
, 
v®
, 
æags
);

8132 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

8133  
	`ÿÎ_£‰”
(
ùx
, 
´
->
u
.
g‘£t
.
£‰”
, 
this_obj
, 
v®
, 
æags
);

8134 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

8138 ià(
p
->
şass_id
 =ğ
JS_CLASS_MODULE_NS
)

8139 
»ad_Úly_´İ
;

8140 
	`£t_v®ue
(
ùx
, 
´
->
u
.
v¬_»f
->
pv®ue
, 
v®
);

8141  
TRUE
;

8142 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

8144 ià(
	`JS_AutoIn™Prİ”ty
(
ùx
, 
p
, 
´İ
, 
´
)) {

8145 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8148 
»Œy
;

8150 
»ad_Úly_´İ
;

8154 
p1
 = 
p
;

8156 ià(
p1
->
is_exÙic
) {

8157 ià(
p1
->
ç¡_¬¿y
) {

8158 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

8159 
ušt32_t
 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

8160 ià(
idx
 < 
p1
->
u
.
¬¿y
.
couÁ
) {

8161 ià(
	`uÆik–y
(
p
 =ğ
p1
))

8162  
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
this_obj
, 
	`JS_NewIÁ32
(ùx, 
idx
), 
v®
, 
æags
);

8165 } ià(
p1
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

8166 
p1
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

8167 
ty³d_¬¿y_oob
;

8169 } ià(
p1
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

8170 
p1
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

8171 
»t
 = 
	`JS_AtomIsNum”icIndex
(
ùx
, 
´İ
);

8172 ià(
»t
 != 0) {

8173 ià(
»t
 < 0) {

8174 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8177 
ty³d_¬¿y_oob
:

8178 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

8179 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8180 ià(
	`JS_IsExû±iÚ
(
v®
))

8182 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p1
)) {

8183 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

8186  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "out-of-bound‚umeric index");

8190 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p1
->
şass_id
].
exÙic
;

8191 ià(
em
) {

8192 ià(
em
->
£t_´İ”ty
) {

8193 
»t
 = 
em
->
	`£t_´İ”ty
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p1
), 
´İ
,

8194 
v®
, 
this_obj
, 
æags
);

8195 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8196  
»t
;

8198 ià(
em
->
g‘_own_´İ”ty
) {

8199 
»t
 = 
em
->
	`g‘_own_´İ”ty
(
ùx
, &
desc
,

8200 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p1
), 
´İ
);

8201 ià(
»t
 < 0) {

8202 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8203  
»t
;

8205 ià(
»t
) {

8206 ià(
desc
.
æags
 & 
JS_PROP_GETSET
) {

8207 
JSObjeù
 *
£‰”
;

8208 ià(
	`JS_IsUndefšed
(
desc
.
£‰”
))

8209 
£‰”
 = 
NULL
;

8211 
£‰”
 = 
	`JS_VALUE_GET_OBJ
(
desc
.setter);

8212 
»t
 = 
	`ÿÎ_£‰”
(
ùx
, 
£‰”
, 
this_obj
, 
v®
, 
æags
);

8213 
	`JS_F»eV®ue
(
ùx
, 
desc
.
g‘‹r
);

8214 
	`JS_F»eV®ue
(
ùx
, 
desc
.
£‰”
);

8215  
»t
;

8217 
	`JS_F»eV®ue
(
ùx
, 
desc
.
v®ue
);

8218 ià(!(
desc
.
æags
 & 
JS_PROP_WRITABLE
))

8219 
»ad_Úly_´İ
;

8220 ià(
	`lik–y
(
p
 =ğ
p1
)) {

8221 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
v®
,

8222 
JS_UNDEFINED
, JS_UNDEFINED,

8223 
JS_PROP_HAS_VALUE
);

8224 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8225  
»t
;

8235 
p1
 =…1->
sh­e
->
´Ùo
;

8236 
´ÙÙy³_lookup
:

8237 ià(!
p1
)

8240 
»Œy2
:

8241 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p1
, 
´İ
);

8242 ià(
´s
) {

8243 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

8244  
	`ÿÎ_£‰”
(
ùx
, 
´
->
u
.
g‘£t
.
£‰”
, 
this_obj
, 
v®
, 
æags
);

8245 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

8247 ià(
	`JS_AutoIn™Prİ”ty
(
ùx
, 
p1
, 
´İ
, 
´
))

8249 
»Œy2
;

8250 } ià(!(
´s
->
æags
 & 
JS_PROP_WRITABLE
)) {

8251 
»ad_Úly_´İ
:

8252 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8253  
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
æags
, 
´İ
);

8258 ià(
	`uÆik–y
(
æags
 & 
JS_PROP_NO_ADD
)) {

8259 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8260 
	`JS_ThrowReã»nûE¼ÜNÙDefšed
(
ùx
, 
´İ
);

8264 ià(
	`uÆik–y
(!
p
)) {

8265 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8266  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "not‡n object");

8269 ià(
	`uÆik–y
(!
p
->
ex‹nsibË
)) {

8270 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8271  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "object is‚otƒxtensible");

8274 ià(
p
->
is_exÙic
) {

8275 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
 &&…->
ç¡_¬¿y
 &&

8276 
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

8277 
ušt32_t
 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

8278 ià(
idx
 =ğ
p
->
u
.
¬¿y
.
couÁ
) {

8280  
	`add_ç¡_¬¿y_–em’t
(
ùx
, 
p
, 
v®
, 
æags
);

8282 
g’”ic_ü—‹_´İ
;

8285 
g’”ic_ü—‹_´İ
:

8286 
»t
 = 
	`JS_C»©ePrİ”ty
(
ùx
, 
p
, 
´İ
, 
v®
, 
JS_UNDEFINED
, JS_UNDEFINED,

8287 
æags
 |

8288 
JS_PROP_HAS_VALUE
 |

8289 
JS_PROP_HAS_ENUMERABLE
 |

8290 
JS_PROP_HAS_WRITABLE
 |

8291 
JS_PROP_HAS_CONFIGURABLE
 |

8292 
JS_PROP_C_W_E
);

8293 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8294  
»t
;

8298 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
´İ
, 
JS_PROP_C_W_E
);

8299 ià(
	`uÆik–y
(!
´
)) {

8300 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8303 
´
->
u
.
v®ue
 = 
v®
;

8304  
TRUE
;

8305 
	}
}

8308 
	$JS_S‘Prİ”tyV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8309 
JSV®ue
 
´İ
, JSV®u
v®
, 
æags
)

8311 ià(
	`lik–y
(
	`JS_VALUE_GET_TAG
(
this_obj
è=ğ
JS_TAG_OBJECT
 &&

8312 
	`JS_VALUE_GET_TAG
(
´İ
è=ğ
JS_TAG_INT
)) {

8313 
JSObjeù
 *
p
;

8314 
ušt32_t
 
idx
;

8315 
d
;

8316 
št32_t
 
v
;

8319 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

8320 
idx
 = 
	`JS_VALUE_GET_INT
(
´İ
);

8321 
p
->
şass_id
) {

8322 
JS_CLASS_ARRAY
:

8323 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
)) {

8324 
JSObjeù
 *
p1
;

8325 
JSSh­e
 *
sh1
;

8328 ià(
idx
 !ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
 ||

8329 !
p
->
ç¡_¬¿y
 || !p->
ex‹nsibË
)

8330 
¦ow_·th
;

8332 
p1
 = 
p
->
sh­e
->
´Ùo
;

8333 
p1
 !ğ
NULL
) {

8334 
sh1
 = 
p1
->
sh­e
;

8335 ià(
p1
->
şass_id
 =ğ
JS_CLASS_ARRAY
) {

8336 ià(
	`uÆik–y
(!
p1
->
ç¡_¬¿y
))

8337 
¦ow_·th
;

8338 } ià(
p1
->
şass_id
 =ğ
JS_CLASS_OBJECT
) {

8339 ià(
	`uÆik–y
(
sh1
->
has_sm®l_¬¿y_šdex
))

8340 
¦ow_·th
;

8342 
¦ow_·th
;

8344 
p1
 = 
sh1
->
´Ùo
;

8347  
	`add_ç¡_¬¿y_–em’t
(
ùx
, 
p
, 
v®
, 
æags
);

8349 
	`£t_v®ue
(
ùx
, &
p
->
u
.
¬¿y
.u.
v®ues
[
idx
], 
v®
);

8351 
JS_CLASS_ARGUMENTS
:

8352 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8353 
¦ow_·th
;

8354 
	`£t_v®ue
(
ùx
, &
p
->
u
.
¬¿y
.u.
v®ues
[
idx
], 
v®
);

8356 
JS_CLASS_UINT8C_ARRAY
:

8357 ià(
	`JS_ToUšt8CÏmpF»e
(
ùx
, &
v
, 
v®
))

8361 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8362 
_out_of_bound
;

8363 
p
->
u
.
¬¿y
.u.
ušt8_±r
[
idx
] = 
v
;

8365 
JS_CLASS_INT8_ARRAY
:

8366 
JS_CLASS_UINT8_ARRAY
:

8367 ià(
	`JS_ToIÁ32F»e
(
ùx
, &
v
, 
v®
))

8369 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8370 
_out_of_bound
;

8371 
p
->
u
.
¬¿y
.u.
ušt8_±r
[
idx
] = 
v
;

8373 
JS_CLASS_INT16_ARRAY
:

8374 
JS_CLASS_UINT16_ARRAY
:

8375 ià(
	`JS_ToIÁ32F»e
(
ùx
, &
v
, 
v®
))

8377 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8378 
_out_of_bound
;

8379 
p
->
u
.
¬¿y
.u.
ušt16_±r
[
idx
] = 
v
;

8381 
JS_CLASS_INT32_ARRAY
:

8382 
JS_CLASS_UINT32_ARRAY
:

8383 ià(
	`JS_ToIÁ32F»e
(
ùx
, &
v
, 
v®
))

8385 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8386 
_out_of_bound
;

8387 
p
->
u
.
¬¿y
.u.
ušt32_±r
[
idx
] = 
v
;

8389 #ifdeà
CONFIG_BIGNUM


8390 
JS_CLASS_BIG_INT64_ARRAY
:

8391 
JS_CLASS_BIG_UINT64_ARRAY
:

8394 
št64_t
 
v
;

8395 ià(
	`JS_ToBigIÁ64F»e
(
ùx
, &
v
, 
v®
))

8397 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8398 
_out_of_bound
;

8399 
p
->
u
.
¬¿y
.u.
ušt64_±r
[
idx
] = 
v
;

8403 
JS_CLASS_FLOAT32_ARRAY
:

8404 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
v®
))

8406 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
))

8407 
_out_of_bound
;

8408 
p
->
u
.
¬¿y
.u.
æßt_±r
[
idx
] = 
d
;

8410 
JS_CLASS_FLOAT64_ARRAY
:

8411 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
v®
))

8413 ià(
	`uÆik–y
(
idx
 >ğ(
ušt32_t
)
p
->
u
.
¬¿y
.
couÁ
)) {

8414 
_out_of_bound
:

8415 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

8416 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

8419  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "out-of-bound‚umeric index");

8422 
p
->
u
.
¬¿y
.u.
doubË_±r
[
idx
] = 
d
;

8425 
¦ow_·th
;

8427  
TRUE
;

8429 
JSAtom
 
©om
;

8430 
»t
;

8431 
¦ow_·th
:

8432 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

8433 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

8434 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
)) {

8435 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8438 
»t
 = 
	`JS_S‘Prİ”tyIÁ”Çl
(
ùx
, 
this_obj
, 
©om
, 
v®
, 
æags
);

8439 
	`JS_F»eAtom
(
ùx
, 
©om
);

8440  
»t
;

8442 
	}
}

8444 
	$JS_S‘Prİ”tyUšt32
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8445 
ušt32_t
 
idx
, 
JSV®ue
 
v®
)

8447  
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
this_obj
, 
	`JS_NewUšt32
(ùx, 
idx
), 
v®
,

8448 
JS_PROP_THROW
);

8449 
	}
}

8451 
	$JS_S‘Prİ”tyIÁ64
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8452 
sšt64_t
 
idx
, 
JSV®ue
 
v®
)

8454 
JSAtom
 
´İ
;

8455 
»s
;

8457 ià((
ušt64_t
)
idx
 <ğ
INT32_MAX
) {

8459  
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
this_obj
, 
	`JS_NewIÁ32
(ùx, 
idx
), 
v®
,

8460 
JS_PROP_THROW
);

8462 
´İ
 = 
	`JS_NewAtomIÁ64
(
ùx
, 
idx
);

8463 ià(
´İ
 =ğ
JS_ATOM_NULL
) {

8464 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8467 
»s
 = 
	`JS_S‘Prİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
v®
);

8468 
	`JS_F»eAtom
(
ùx
, 
´İ
);

8469  
»s
;

8470 
	}
}

8472 
	$JS_S‘Prİ”tySŒ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8473 cÚ¡ *
´İ
, 
JSV®ue
 
v®
)

8475 
JSAtom
 
©om
;

8476 
»t
;

8477 
©om
 = 
	`JS_NewAtom
(
ùx
, 
´İ
);

8478 
»t
 = 
	`JS_S‘Prİ”tyIÁ”Çl
(
ùx
, 
this_obj
, 
©om
, 
v®
, 
JS_PROP_THROW
);

8479 
	`JS_F»eAtom
(
ùx
, 
©om
);

8480  
»t
;

8481 
	}
}

8487 
	$g‘_´İ_æags
(
æags
, 
def_æags
)

8489 
mask
;

8490 
mask
 = (
æags
 >> 
JS_PROP_HAS_SHIFT
è& 
JS_PROP_C_W_E
;

8491  (
æags
 & 
mask
è| (
def_æags
 & ~mask);

8492 
	}
}

8494 
	$JS_C»©ePrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

8495 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
v®
,

8496 
JSV®ueCÚ¡
 
g‘‹r
, JSV®ueCÚ¡ 
£‰”
,

8497 
æags
)

8499 
JSPrİ”ty
 *
´
;

8500 
»t
, 
´İ_æags
;

8503 ià(
p
->
is_exÙic
) {

8504 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
) {

8505 
ušt32_t
 
idx
, 
Ën
;

8507 ià(
p
->
ç¡_¬¿y
) {

8508 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

8509 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

8510 ià(
idx
 =ğ
p
->
u
.
¬¿y
.
couÁ
) {

8511 ià(!
p
->
ex‹nsibË
)

8512 
nÙ_ex‹nsibË
;

8513 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
))

8514 
cÚv”t_to_¬¿y
;

8515 
´İ_æags
 = 
	`g‘_´İ_æags
(
æags
, 0);

8516 ià(
´İ_æags
 !ğ
JS_PROP_C_W_E
)

8517 
cÚv”t_to_¬¿y
;

8518  
	`add_ç¡_¬¿y_–em’t
(
ùx
, 
p
,

8519 
	`JS_DupV®ue
(
ùx
, 
v®
), 
æags
);

8521 
cÚv”t_to_¬¿y
;

8523 } ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
idx
, 
´İ
)) {

8525 
cÚv”t_to_¬¿y
:

8526 ià(
	`cÚv”t_ç¡_¬¿y_to_¬¿y
(
ùx
, 
p
))

8528 
g’”ic_¬¿y
;

8530 } ià(
	`JS_AtomIsA¼ayIndex
(
ùx
, &
idx
, 
´İ
)) {

8531 
JSPrİ”ty
 *
¶’
;

8532 
JSSh­ePrİ”ty
 *
p¦’
;

8533 
g’”ic_¬¿y
:

8535 
¶’
 = &
p
->
´İ
[0];

8536 
	`JS_ToUšt32
(
ùx
, &
Ën
, 
¶’
->
u
.
v®ue
);

8537 ià((
idx
 + 1è> 
Ën
) {

8538 
p¦’
 = 
	`g‘_sh­e_´İ
(
p
->
sh­e
);

8539 ià(
	`uÆik–y
(!(
p¦’
->
æags
 & 
JS_PROP_WRITABLE
)))

8540  
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
æags
, 
JS_ATOM_Ëngth
);

8543 
Ën
 = 
idx
 + 1;

8544 
	`£t_v®ue
(
ùx
, &
¶’
->
u
.
v®ue
, 
	`JS_NewUšt32
(ùx, 
Ën
));

8547 } ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

8548 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

8549 
»t
 = 
	`JS_AtomIsNum”icIndex
(
ùx
, 
´İ
);

8550 ià(
»t
 != 0) {

8551 ià(
»t
 < 0)

8553  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "cannot create‚umeric index inyped‡rray");

8555 } ià(!(
æags
 & 
JS_PROP_NO_EXOTIC
)) {

8556 cÚ¡ 
JSCÏssExÙicM‘hods
 *
em
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
exÙic
;

8557 ià(
em
) {

8558 ià(
em
->
defše_own_´İ”ty
) {

8559  
em
->
	`defše_own_´İ”ty
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
),

8560 
´İ
, 
v®
, 
g‘‹r
, 
£‰”
, 
æags
);

8562 
»t
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
));

8563 ià(
»t
 < 0)

8565 ià(!
»t
)

8566 
nÙ_ex‹nsibË
;

8571 ià(!
p
->
ex‹nsibË
) {

8572 
nÙ_ex‹nsibË
:

8573  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "object is‚otƒxtensible");

8576 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

8577 
´İ_æags
 = (
æags
 & (
JS_PROP_CONFIGURABLE
 | 
JS_PROP_ENUMERABLE
)) |

8578 
JS_PROP_GETSET
;

8580 
´İ_æags
 = 
æags
 & 
JS_PROP_C_W_E
;

8582 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
´İ
, 
´İ_æags
);

8583 ià(
	`uÆik–y
(!
´
))

8585 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

8586 
´
->
u
.
g‘£t
.
g‘‹r
 = 
NULL
;

8587 ià((
æags
 & 
JS_PROP_HAS_GET
è&& 
	`JS_IsFunùiÚ
(
ùx
, 
g‘‹r
)) {

8588 
´
->
u
.
g‘£t
.
g‘‹r
 =

8589 
	`JS_VALUE_GET_OBJ
(
	`JS_DupV®ue
(
ùx
, 
g‘‹r
));

8591 
´
->
u
.
g‘£t
.
£‰”
 = 
NULL
;

8592 ià((
æags
 & 
JS_PROP_HAS_SET
è&& 
	`JS_IsFunùiÚ
(
ùx
, 
£‰”
)) {

8593 
´
->
u
.
g‘£t
.
£‰”
 =

8594 
	`JS_VALUE_GET_OBJ
(
	`JS_DupV®ue
(
ùx
, 
£‰”
));

8597 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

8598 
´
->
u
.
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
v®
);

8600 
´
->
u
.
v®ue
 = 
JS_UNDEFINED
;

8603  
TRUE
;

8604 
	}
}

8607 
BOOL
 
	$check_defše_´İ_æags
(
´İ_æags
, 
æags
)

8609 
BOOL
 
has_acûssÜ
, 
is_g‘£t
;

8611 ià(!(
´İ_æags
 & 
JS_PROP_CONFIGURABLE
)) {

8612 ià((
æags
 & (
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_CONFIGURABLE
)) ==

8613 (
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_CONFIGURABLE
)) {

8614  
FALSE
;

8616 ià((
æags
 & 
JS_PROP_HAS_ENUMERABLE
) &&

8617 (
æags
 & 
JS_PROP_ENUMERABLE
è!ğ(
´İ_æags
 & JS_PROP_ENUMERABLE))

8618  
FALSE
;

8620 ià(
æags
 & (
JS_PROP_HAS_VALUE
 | 
JS_PROP_HAS_WRITABLE
 |

8621 
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

8622 ià(!(
´İ_æags
 & 
JS_PROP_CONFIGURABLE
)) {

8623 
has_acûssÜ
 = ((
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) != 0);

8624 
is_g‘£t
 = ((
´İ_æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
);

8625 ià(
has_acûssÜ
 !ğ
is_g‘£t
)

8626  
FALSE
;

8627 ià(!
has_acûssÜ
 && !
is_g‘£t
 && !(
´İ_æags
 & 
JS_PROP_WRITABLE
)) {

8629 ià((
æags
 & (
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_WRITABLE
)) ==

8630 (
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_WRITABLE
))

8631  
FALSE
;

8635  
TRUE
;

8636 
	}
}

8639 
	$js_sh­e_´•¬e_upd©e
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

8640 
JSSh­ePrİ”ty
 **
µrs
)

8642 
JSSh­e
 *
sh
;

8643 
ušt32_t
 
idx
 = 0;

8645 
sh
 = 
p
->
sh­e
;

8646 ià(
sh
->
is_hashed
) {

8647 ià(
sh
->
h—d”
.
»f_couÁ
 != 1) {

8648 ià(
µrs
)

8649 
idx
 = *
µrs
 - 
	`g‘_sh­e_´İ
(
sh
);

8651 
sh
 = 
	`js_şÚe_sh­e
(
ùx
, sh);

8652 ià(!
sh
)

8654 
	`js_ä“_sh­e
(
ùx
->
¹
, 
p
->
sh­e
);

8655 
p
->
sh­e
 = 
sh
;

8656 ià(
µrs
)

8657 *
µrs
 = 
	`g‘_sh­e_´İ
(
sh
è+ 
idx
;

8659 
	`js_sh­e_hash_uÆšk
(
ùx
->
¹
, 
sh
);

8660 
sh
->
is_hashed
 = 
FALSE
;

8664 
	}
}

8666 
	$js_upd©e_´İ”ty_æags
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

8667 
JSSh­ePrİ”ty
 **
µrs
, 
æags
)

8669 ià(
æags
 !ğ(*
µrs
)->flags) {

8670 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, 
µrs
))

8672 (*
µrs
)->
æags
 = flags;

8675 
	}
}

8687 
	$JS_DefšePrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8688 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
v®
,

8689 
JSV®ueCÚ¡
 
g‘‹r
, JSV®ueCÚ¡ 
£‰”
, 
æags
)

8691 
JSObjeù
 *
p
;

8692 
JSSh­ePrİ”ty
 *
´s
;

8693 
JSPrİ”ty
 *
´
;

8694 
mask
, 
»s
;

8696 ià(
	`JS_VALUE_GET_TAG
(
this_obj
è!ğ
JS_TAG_OBJECT
) {

8697 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

8700 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

8702 
»do_´İ_upd©e
:

8703 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

8704 ià(
´s
) {

8706 ià(!
	`check_defše_´İ_æags
(
´s
->
æags
, flags)) {

8707 
nÙ_cÚfigu¿bË
:

8708  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "property is‚ot configurable");

8711 
»Œy
:

8712 ià(
æags
 & (
JS_PROP_HAS_VALUE
 | 
JS_PROP_HAS_WRITABLE
 |

8713 
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

8714 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

8715 
JSObjeù
 *
Ãw_g‘‹r
, *
Ãw_£‰”
;

8717 ià(
	`JS_IsFunùiÚ
(
ùx
, 
g‘‹r
)) {

8718 
Ãw_g‘‹r
 = 
	`JS_VALUE_GET_OBJ
(
g‘‹r
);

8720 
Ãw_g‘‹r
 = 
NULL
;

8722 ià(
	`JS_IsFunùiÚ
(
ùx
, 
£‰”
)) {

8723 
Ãw_£‰”
 = 
	`JS_VALUE_GET_OBJ
(
£‰”
);

8725 
Ãw_£‰”
 = 
NULL
;

8728 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è!ğ
JS_PROP_GETSET
) {

8729 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, &
´s
))

8732 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

8733 
	`ä“_v¬_»f
(
ùx
->
¹
, 
´
->
u
.
v¬_»f
);

8734 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

8736 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, &
´s
))

8738 
	`js_autoš™_ä“
(
ùx
->
¹
, 
´
);

8739 
´s
->
æags
 &ğ~
JS_PROP_TMASK
;

8740 
´
->
u
.
v®ue
 = 
JS_UNDEFINED
;

8741 
»Œy
;

8743 
	`JS_F»eV®ue
(
ùx
, 
´
->
u
.
v®ue
);

8745 
´s
->
æags
 = (prs->flags &

8746 (
JS_PROP_CONFIGURABLE
 | 
JS_PROP_ENUMERABLE
)) |

8747 
JS_PROP_GETSET
;

8748 
´
->
u
.
g‘£t
.
g‘‹r
 = 
NULL
;

8749 
´
->
u
.
g‘£t
.
£‰”
 = 
NULL
;

8751 ià(!(
´s
->
æags
 & 
JS_PROP_CONFIGURABLE
)) {

8752 ià((
æags
 & 
JS_PROP_HAS_GET
) &&

8753 
Ãw_g‘‹r
 !ğ
´
->
u
.
g‘£t
.
g‘‹r
) {

8754 
nÙ_cÚfigu¿bË
;

8756 ià((
æags
 & 
JS_PROP_HAS_SET
) &&

8757 
Ãw_£‰”
 !ğ
´
->
u
.
g‘£t
.
£‰”
) {

8758 
nÙ_cÚfigu¿bË
;

8762 ià(
æags
 & 
JS_PROP_HAS_GET
) {

8763 ià(
´
->
u
.
g‘£t
.
g‘‹r
)

8764 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
g‘‹r
));

8765 ià(
Ãw_g‘‹r
)

8766 
	`JS_DupV®ue
(
ùx
, 
g‘‹r
);

8767 
´
->
u
.
g‘£t
.
g‘‹r
 = 
Ãw_g‘‹r
;

8769 ià(
æags
 & 
JS_PROP_HAS_SET
) {

8770 ià(
´
->
u
.
g‘£t
.
£‰”
)

8771 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
£‰”
));

8772 ià(
Ãw_£‰”
)

8773 
	`JS_DupV®ue
(
ùx
, 
£‰”
);

8774 
´
->
u
.
g‘£t
.
£‰”
 = 
Ãw_£‰”
;

8777 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

8779 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, &
´s
))

8781 ià(
´
->
u
.
g‘£t
.
g‘‹r
)

8782 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
g‘‹r
));

8783 ià(
´
->
u
.
g‘£t
.
£‰”
)

8784 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
´
->
u
.
g‘£t
.
£‰”
));

8785 
´s
->
æags
 &ğ~(
JS_PROP_TMASK
 | 
JS_PROP_WRITABLE
);

8786 
´
->
u
.
v®ue
 = 
JS_UNDEFINED
;

8787 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

8789 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

8791 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, &
´s
))

8793 
	`js_autoš™_ä“
(
ùx
->
¹
, 
´
);

8794 
´s
->
æags
 &ğ~
JS_PROP_TMASK
;

8795 
´
->
u
.
v®ue
 = 
JS_UNDEFINED
;

8797 ià((
´s
->
æags
 & (
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
)) == 0 &&

8798 (
æags
 & 
JS_PROP_HAS_VALUE
) &&

8799 !
	`js_§me_v®ue
(
ùx
, 
v®
, 
´
->
u
.
v®ue
)) {

8800 
nÙ_cÚfigu¿bË
;

8803 ià(
´s
->
æags
 & 
JS_PROP_LENGTH
) {

8804 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

8805 
»s
 = 
	`£t_¬¿y_Ëngth
(
ùx
, 
p
, 
´
, 
	`JS_DupV®ue
(ùx, 
v®
),

8806 
æags
);

8808 
»s
 = 
TRUE
;

8813 ià((
æags
 & (
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_WRITABLE
)) ==

8814 
JS_PROP_HAS_WRITABLE
) {

8815 
´s
 = 
	`g‘_sh­e_´İ
(
p
->
sh­e
);

8816 ià(
	`js_upd©e_´İ”ty_æags
(
ùx
, 
p
, &
´s
,

8817 
´s
->
æags
 & ~(
JS_PROP_WRITABLE
 | 
JS_PROP_LENGTH
)))

8820  
»s
;

8821 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

8822 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

8823 ià(
p
->
şass_id
 =ğ
JS_CLASS_MODULE_NS
) {

8827 ià(!
	`js_§me_v®ue
(
ùx
, 
v®
, *
´
->
u
.
v¬_»f
->
pv®ue
))

8828 
nÙ_cÚfigu¿bË
;

8831 
	`£t_v®ue
(
ùx
, 
´
->
u
.
v¬_»f
->
pv®ue
,

8832 
	`JS_DupV®ue
(
ùx
, 
v®
));

8836 ià((
æags
 & (
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_WRITABLE
)) == JS_PROP_HAS_WRITABLE) {

8837 
JSV®ue
 
v®1
;

8838 ià(
	`js_sh­e_´•¬e_upd©e
(
ùx
, 
p
, &
´s
))

8840 
v®1
 = 
	`JS_DupV®ue
(
ùx
, *
´
->
u
.
v¬_»f
->
pv®ue
);

8841 
	`ä“_v¬_»f
(
ùx
->
¹
, 
´
->
u
.
v¬_»f
);

8842 
´
->
u
.
v®ue
 = 
v®1
;

8843 
´s
->
æags
 &ğ~(
JS_PROP_TMASK
 | 
JS_PROP_WRITABLE
);

8845 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

8847 
	`abÜt
();

8849 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

8850 
	`JS_F»eV®ue
(
ùx
, 
´
->
u
.
v®ue
);

8851 
´
->
u
.
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
v®
);

8853 ià(
æags
 & 
JS_PROP_HAS_WRITABLE
) {

8854 ià(
	`js_upd©e_´İ”ty_æags
(
ùx
, 
p
, &
´s
,

8855 (
´s
->
æags
 & ~
JS_PROP_WRITABLE
) |

8856 (
æags
 & 
JS_PROP_WRITABLE
)))

8862 
mask
 = 0;

8863 ià(
æags
 & 
JS_PROP_HAS_CONFIGURABLE
)

8864 
mask
 |ğ
JS_PROP_CONFIGURABLE
;

8865 ià(
æags
 & 
JS_PROP_HAS_ENUMERABLE
)

8866 
mask
 |ğ
JS_PROP_ENUMERABLE
;

8867 ià(
	`js_upd©e_´İ”ty_æags
(
ùx
, 
p
, &
´s
,

8868 (
´s
->
æags
 & ~
mask
) | (flags & mask)))

8870  
TRUE
;

8874 ià(
p
->
ç¡_¬¿y
) {

8875 
ušt32_t
 
idx
;

8876 
ušt32_t
 
´İ_æags
;

8877 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
) {

8878 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

8879 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

8880 ià(
idx
 < 
p
->
u
.
¬¿y
.
couÁ
) {

8881 
´İ_æags
 = 
	`g‘_´İ_æags
(
æags
, 
JS_PROP_C_W_E
);

8882 ià(
´İ_æags
 !ğ
JS_PROP_C_W_E
)

8883 
cÚv”t_to_¦ow_¬¿y
;

8884 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

8885 
cÚv”t_to_¦ow_¬¿y
:

8886 ià(
	`cÚv”t_ç¡_¬¿y_to_¬¿y
(
ùx
, 
p
))

8889 
»do_´İ_upd©e
;

8891 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

8892 
	`£t_v®ue
(
ùx
, &
p
->
u
.
¬¿y
.u.
v®ues
[
idx
], 
	`JS_DupV®ue
(ùx, 
v®
));

8894  
TRUE
;

8897 } ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

8898 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

8899 
JSV®ue
 
num
;

8900 
»t
;

8902 ià(!
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

8904 
num
 = 
	`JS_AtomIsNum”icIndex1
(
ùx
, 
´İ
);

8905 ià(
	`JS_IsUndefšed
(
num
))

8906 
ty³d_¬¿y_dÚe
;

8907 ià(
	`JS_IsExû±iÚ
(
num
))

8909 
»t
 = 
	`JS_Numb”IsIÁeg”
(
ùx
, 
num
);

8910 ià(
»t
 < 0) {

8911 
	`JS_F»eV®ue
(
ùx
, 
num
);

8914 ià(!
»t
) {

8915 
	`JS_F»eV®ue
(
ùx
, 
num
);

8916  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "non integer index inyped‡rray");

8918 
»t
 = 
	`JS_Numb”IsNeg©iveOrMšusZ”o
(
ùx
, 
num
);

8919 
	`JS_F»eV®ue
(
ùx
, 
num
);

8920 ià(
»t
) {

8921  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "negative index inyped‡rray");

8923 ià(!
	`__JS_AtomIsTaggedIÁ
(
´İ
))

8924 
ty³d_¬¿y_oob
;

8926 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

8928 ià(
idx
 >ğ
	`ty³d_¬¿y_g‘_Ëngth
(
ùx
, 
p
)) {

8929 
ty³d_¬¿y_oob
:

8930  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "out-of-bound index inyped‡rray");

8932 
´İ_æags
 = 
	`g‘_´İ_æags
(
æags
, 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
);

8933 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
) ||

8934 
´İ_æags
 !ğ(
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
)) {

8935  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "invalid descriptor flags");

8937 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

8938  
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
this_obj
, 
	`JS_NewIÁ32
(ùx, 
idx
), 
	`JS_DupV®ue
(ùx, 
v®
), 
æags
);

8940  
TRUE
;

8941 
ty³d_¬¿y_dÚe
: ;

8945  
	`JS_C»©ePrİ”ty
(
ùx
, 
p
, 
´İ
, 
v®
, 
g‘‹r
, 
£‰”
, 
æags
);

8946 
	}
}

8948 
	$JS_DefšeAutoIn™Prİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8949 
JSAtom
 
´İ
, 
JSAutoIn™IDEnum
 
id
,

8950 *
İaque
, 
æags
)

8952 
JSObjeù
 *
p
;

8953 
JSPrİ”ty
 *
´
;

8955 ià(
	`JS_VALUE_GET_TAG
(
this_obj
è!ğ
JS_TAG_OBJECT
)

8956  
FALSE
;

8958 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

8960 ià(
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
)) {

8962 
	`abÜt
();

8963  
FALSE
;

8967 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
´İ
, (
æags
 & 
JS_PROP_C_W_E
è| 
JS_PROP_AUTOINIT
);

8968 ià(
	`uÆik–y
(!
´
))

8970 ià(
id
 =ğ
JS_AUTOINIT_ID_PROP
) {

8971 
´
->
u
.
š™
.u.
»®m
 = 
	`JS_DupCÚ‹xt
(
ùx
);

8973 
´
->
u
.
š™
.u.
š™_id
 = 
id
;

8975 
´
->
u
.
š™
.
İaque
 = opaque;

8976  
TRUE
;

8977 
	}
}

8980 
	$JS_DefšePrİ”tyV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8981 
JSAtom
 
´İ
, 
JSV®ue
 
v®
, 
æags
)

8983 
»t
;

8984 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
v®
, 
JS_UNDEFINED
, JS_UNDEFINED,

8985 
æags
 | 
JS_PROP_HAS_VALUE
 | 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_HAS_ENUMERABLE
);

8986 
	`JS_F»eV®ue
(
ùx
, 
v®
);

8987  
»t
;

8988 
	}
}

8990 
	$JS_DefšePrİ”tyV®ueV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

8991 
JSV®ue
 
´İ
, JSV®u
v®
, 
æags
)

8993 
JSAtom
 
©om
;

8994 
»t
;

8995 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

8996 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

8997 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
)) {

8998 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9001 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
this_obj
, 
©om
, 
v®
, 
æags
);

9002 
	`JS_F»eAtom
(
ùx
, 
©om
);

9003  
»t
;

9004 
	}
}

9006 
	$JS_DefšePrİ”tyV®ueUšt32
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

9007 
ušt32_t
 
idx
, 
JSV®ue
 
v®
, 
æags
)

9009  
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
this_obj
, 
	`JS_NewUšt32
(ùx, 
idx
),

9010 
v®
, 
æags
);

9011 
	}
}

9013 
	$JS_DefšePrİ”tyV®ueIÁ64
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

9014 
sšt64_t
 
idx
, 
JSV®ue
 
v®
, 
æags
)

9016  
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
this_obj
, 
	`JS_NewIÁ64
(ùx, 
idx
),

9017 
v®
, 
æags
);

9018 
	}
}

9020 
	$JS_DefšePrİ”tyV®ueSŒ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

9021 cÚ¡ *
´İ
, 
JSV®ue
 
v®
, 
æags
)

9023 
JSAtom
 
©om
;

9024 
»t
;

9025 
©om
 = 
	`JS_NewAtom
(
ùx
, 
´İ
);

9026 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
this_obj
, 
©om
, 
v®
, 
æags
);

9027 
	`JS_F»eAtom
(
ùx
, 
©om
);

9028  
»t
;

9029 
	}
}

9032 
	$JS_DefšePrİ”tyG‘S‘
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

9033 
JSAtom
 
´İ
, 
JSV®ue
 
g‘‹r
, JSV®u
£‰”
,

9034 
æags
)

9036 
»t
;

9037 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
JS_UNDEFINED
, 
g‘‹r
, 
£‰”
,

9038 
æags
 | 
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
 |

9039 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_HAS_ENUMERABLE
);

9040 
	`JS_F»eV®ue
(
ùx
, 
g‘‹r
);

9041 
	`JS_F»eV®ue
(
ùx
, 
£‰”
);

9042  
»t
;

9043 
	}
}

9045 
	$JS_C»©eD©aPrİ”tyUšt32
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

9046 
sšt64_t
 
idx
, 
JSV®ue
 
v®
, 
æags
)

9048  
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
this_obj
, 
	`JS_NewIÁ64
(ùx, 
idx
),

9049 
v®
, 
æags
 | 
JS_PROP_CONFIGURABLE
 |

9050 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
);

9051 
	}
}

9055 
BOOL
 
	$js_objeù_has_Çme
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

9057 
JSPrİ”ty
 *
´
;

9058 
JSSh­ePrİ”ty
 *
´s
;

9059 
JSV®ueCÚ¡
 
v®
;

9060 
JSSŒšg
 *
p
;

9062 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
	`JS_VALUE_GET_OBJ
(
obj
), 
JS_ATOM_Çme
);

9063 ià(!
´s
)

9064  
FALSE
;

9065 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è!ğ
JS_PROP_NORMAL
)

9066  
TRUE
;

9067 
v®
 = 
´
->
u
.
v®ue
;

9068 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_STRING
)

9069  
TRUE
;

9070 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

9071  (
p
->
Ën
 != 0);

9072 
	}
}

9074 
	$JS_DefšeObjeùName
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

9075 
JSAtom
 
Çme
, 
æags
)

9077 ià(
Çme
 !ğ
JS_ATOM_NULL


9078 && 
	`JS_IsObjeù
(
obj
)

9079 && !
	`js_objeù_has_Çme
(
ùx
, 
obj
)

9080 && 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_Çme
, 
	`JS_AtomToSŒšg
(ùx, 
Çme
), 
æags
) < 0) {

9084 
	}
}

9086 
	$JS_DefšeObjeùNameCompu‹d
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

9087 
JSV®ueCÚ¡
 
¡r
, 
æags
)

9089 ià(
	`JS_IsObjeù
(
obj
) &&

9090 !
	`js_objeù_has_Çme
(
ùx
, 
obj
)) {

9091 
JSAtom
 
´İ
;

9092 
JSV®ue
 
Çme_¡r
;

9093 
´İ
 = 
	`JS_V®ueToAtom
(
ùx
, 
¡r
);

9094 ià(
´İ
 =ğ
JS_ATOM_NULL
)

9096 
Çme_¡r
 = 
	`js_g‘_funùiÚ_Çme
(
ùx
, 
´İ
);

9097 
	`JS_F»eAtom
(
ùx
, 
´İ
);

9098 ià(
	`JS_IsExû±iÚ
(
Çme_¡r
))

9100 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_Çme
, 
Çme_¡r
, 
æags
) < 0)

9104 
	}
}

9106 
	#DEFINE_GLOBAL_LEX_VAR
 (1 << 7)

	)

9107 
	#DEFINE_GLOBAL_FUNC_VAR
 (1 << 6)

	)

9109 
JSV®ue
 
	$JS_ThrowSyÁaxE¼ÜV¬Redeş¬©iÚ
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
)

9111 
buf
[
ATOM_GET_STR_BUF_SIZE
];

9112  
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "redeclaration of %s",

9113 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
´İ
));

9114 
	}
}

9118 
	$JS_CheckDefšeGlob®V¬
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
, 
æags
)

9120 
JSObjeù
 *
p
;

9121 
JSSh­ePrİ”ty
 *
´s
;

9122 
buf
[
ATOM_GET_STR_BUF_SIZE
];

9124 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_obj
);

9125 
´s
 = 
	`fšd_own_´İ”ty1
(
p
, 
´İ
);

9127 ià(
æags
 & 
DEFINE_GLOBAL_LEX_VAR
) {

9128 ià(
´s
 && !Õrs->
æags
 & 
JS_PROP_CONFIGURABLE
))

9129 
ç_»deş¬©iÚ
;

9131 ià(!
´s
 && !
p
->
ex‹nsibË
)

9132 
defše_”rÜ
;

9133 ià(
æags
 & 
DEFINE_GLOBAL_FUNC_VAR
) {

9134 ià(
´s
) {

9135 ià(!(
´s
->
æags
 & 
JS_PROP_CONFIGURABLE
) &&

9136 ((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
 ||

9137 ((
´s
->
æags
 & (
JS_PROP_WRITABLE
 | 
JS_PROP_ENUMERABLE
)) !=

9138 (
JS_PROP_WRITABLE
 | 
JS_PROP_ENUMERABLE
)))) {

9139 
defše_”rÜ
:

9140 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot define variable %s",

9141 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
´İ
));

9148 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_v¬_obj
);

9149 
´s
 = 
	`fšd_own_´İ”ty1
(
p
, 
´İ
);

9150 ià(
´s
) {

9151 
ç_»deş¬©iÚ
:

9152 
	`JS_ThrowSyÁaxE¼ÜV¬Redeş¬©iÚ
(
ùx
, 
´İ
);

9156 
	}
}

9161 
	$JS_DefšeGlob®V¬
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
, 
def_æags
)

9163 
JSObjeù
 *
p
;

9164 
JSSh­ePrİ”ty
 *
´s
;

9165 
JSPrİ”ty
 *
´
;

9166 
JSV®ue
 
v®
;

9167 
æags
;

9169 ià(
def_æags
 & 
DEFINE_GLOBAL_LEX_VAR
) {

9170 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_v¬_obj
);

9171 
æags
 = 
JS_PROP_ENUMERABLE
 | (
def_æags
 & 
JS_PROP_WRITABLE
) |

9172 
JS_PROP_CONFIGURABLE
;

9173 
v®
 = 
JS_UNINITIALIZED
;

9175 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_obj
);

9176 
æags
 = 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
 |

9177 (
def_æags
 & 
JS_PROP_CONFIGURABLE
);

9178 
v®
 = 
JS_UNDEFINED
;

9180 
´s
 = 
	`fšd_own_´İ”ty1
(
p
, 
´İ
);

9181 ià(
´s
)

9183 ià(!
p
->
ex‹nsibË
)

9185 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
´İ
, 
æags
);

9186 ià(
	`uÆik–y
(!
´
))

9188 
´
->
u
.
v®ue
 = 
v®
;

9190 
	}
}

9194 
	$JS_DefšeGlob®FunùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
,

9195 
JSV®ueCÚ¡
 
func
, 
def_æags
)

9198 
JSObjeù
 *
p
;

9199 
JSSh­ePrİ”ty
 *
´s
;

9200 
æags
;

9202 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_obj
);

9203 
´s
 = 
	`fšd_own_´İ”ty1
(
p
, 
´İ
);

9204 
æags
 = 
JS_PROP_HAS_VALUE
 | 
JS_PROP_THROW
;

9205 ià(!
´s
 || (´s->
æags
 & 
JS_PROP_CONFIGURABLE
)) {

9206 
æags
 |ğ
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
 | 
def_æags
 |

9207 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_HAS_ENUMERABLE
;

9209 ià(
	`JS_DefšePrİ”ty
(
ùx
, ctx->
glob®_obj
, 
´İ
, 
func
,

9210 
JS_UNDEFINED
, JS_UNDEFINED, 
æags
) < 0)

9213 
	}
}

9215 
JSV®ue
 
	$JS_G‘Glob®V¬
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
,

9216 
BOOL
 
throw_»f_”rÜ
)

9218 
JSObjeù
 *
p
;

9219 
JSSh­ePrİ”ty
 *
´s
;

9220 
JSPrİ”ty
 *
´
;

9223 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_v¬_obj
);

9224 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

9225 ià(
´s
) {

9227 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
´
->
u
.
v®ue
)))

9228  
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

9229  
	`JS_DupV®ue
(
ùx
, 
´
->
u
.
v®ue
);

9231  
	`JS_G‘Prİ”tyIÁ”Çl
(
ùx
, ctx->
glob®_obj
, 
´İ
,

9232 
ùx
->
glob®_obj
, 
throw_»f_”rÜ
);

9233 
	}
}

9236 
	$JS_G‘Glob®V¬Ref
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
, 
JSV®ue
 *
¥
)

9238 
JSObjeù
 *
p
;

9239 
JSSh­ePrİ”ty
 *
´s
;

9240 
JSPrİ”ty
 *
´
;

9243 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_v¬_obj
);

9244 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

9245 ià(
´s
) {

9249 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
´
->
u
.
v®ue
))) {

9250 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

9253 ià(
	`uÆik–y
(!(
´s
->
æags
 & 
JS_PROP_WRITABLE
))) {

9254  
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
JS_PROP_THROW
, 
´İ
);

9256 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, ctx->
glob®_v¬_obj
);

9258 
»t
;

9259 
»t
 = 
	`JS_HasPrİ”ty
(
ùx
, ctx->
glob®_obj
, 
´İ
);

9260 ià(
»t
 < 0)

9262 ià(
»t
) {

9263 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, ctx->
glob®_obj
);

9265 
¥
[0] = 
JS_UNDEFINED
;

9268 
¥
[1] = 
	`JS_AtomToV®ue
(
ùx
, 
´İ
);

9270 
	}
}

9273 
	$JS_CheckGlob®V¬
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
)

9275 
JSObjeù
 *
p
;

9276 
JSSh­ePrİ”ty
 *
´s
;

9277 
»t
;

9280 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_v¬_obj
);

9281 
´s
 = 
	`fšd_own_´İ”ty1
(
p
, 
´İ
);

9282 ià(
´s
) {

9283 
»t
 = 
TRUE
;

9285 
»t
 = 
	`JS_HasPrİ”ty
(
ùx
, ctx->
glob®_obj
, 
´İ
);

9286 ià(
»t
 < 0)

9289  
»t
;

9290 
	}
}

9296 
	$JS_S‘Glob®V¬
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
´İ
, 
JSV®ue
 
v®
,

9297 
æag
)

9299 
JSObjeù
 *
p
;

9300 
JSSh­ePrİ”ty
 *
´s
;

9301 
JSPrİ”ty
 *
´
;

9302 
æags
;

9305 
p
 = 
	`JS_VALUE_GET_OBJ
(
ùx
->
glob®_v¬_obj
);

9306 
´s
 = 
	`fšd_own_´İ”ty
(&
´
, 
p
, 
´İ
);

9307 ià(
´s
) {

9309 ià(
æag
 != 1) {

9310 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
´
->
u
.
v®ue
))) {

9311 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9312 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
´s
->
©om
);

9315 ià(
	`uÆik–y
(!(
´s
->
æags
 & 
JS_PROP_WRITABLE
))) {

9316 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9317  
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
JS_PROP_THROW
, 
´İ
);

9320 
	`£t_v®ue
(
ùx
, &
´
->
u
.
v®ue
, 
v®
);

9324 
æags
 = 
JS_PROP_THROW_STRICT
;

9325 ià(
æag
 !ğ2 && 
	`is_¡riù_mode
(
ùx
))

9326 
æags
 |ğ
JS_PROP_NO_ADD
;

9327  
	`JS_S‘Prİ”tyIÁ”Çl
(
ùx
, ctx->
glob®_obj
, 
´İ
, 
v®
, 
æags
);

9328 
	}
}

9333 
	$JS_D–‘ePrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
´İ
, 
æags
)

9335 
JSV®ue
 
obj1
;

9336 
JSObjeù
 *
p
;

9337 
»s
;

9339 
obj1
 = 
	`JS_ToObjeù
(
ùx
, 
obj
);

9340 ià(
	`JS_IsExû±iÚ
(
obj1
))

9342 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj1
);

9343 
»s
 = 
	`d–‘e_´İ”ty
(
ùx
, 
p
, 
´İ
);

9344 
	`JS_F»eV®ue
(
ùx
, 
obj1
);

9345 ià(
»s
 !ğ
FALSE
)

9346  
»s
;

9347 ià((
æags
 & 
JS_PROP_THROW
) ||

9348 ((
æags
 & 
JS_PROP_THROW_STRICT
è&& 
	`is_¡riù_mode
(
ùx
))) {

9349 
	`JS_ThrowTy³E¼Ü
(
ùx
, "could‚ot delete…roperty");

9352  
FALSE
;

9353 
	}
}

9355 
	$JS_D–‘ePrİ”tyIÁ64
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
sšt64_t
 
idx
, 
æags
)

9357 
JSAtom
 
´İ
;

9358 
»s
;

9360 ià((
ušt64_t
)
idx
 <ğ
JS_ATOM_MAX_INT
) {

9362  
	`JS_D–‘ePrİ”ty
(
ùx
, 
obj
, 
	`__JS_AtomFromUIÁ32
(
idx
), 
æags
);

9364 
´İ
 = 
	`JS_NewAtomIÁ64
(
ùx
, 
idx
);

9365 ià(
´İ
 =ğ
JS_ATOM_NULL
)

9367 
»s
 = 
	`JS_D–‘ePrİ”ty
(
ùx
, 
obj
, 
´İ
, 
æags
);

9368 
	`JS_F»eAtom
(
ùx
, 
´İ
);

9369  
»s
;

9370 
	}
}

9372 
BOOL
 
	$JS_IsFunùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

9374 
JSObjeù
 *
p
;

9375 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9376  
FALSE
;

9377 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

9378 
p
->
şass_id
) {

9379 
JS_CLASS_BYTECODE_FUNCTION
:

9380  
TRUE
;

9381 
JS_CLASS_PROXY
:

9382  
p
->
u
.
´oxy_d©a
->
is_func
;

9384  (
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
ÿÎ
 !ğ
NULL
);

9386 
	}
}

9388 
BOOL
 
	$JS_IsCFunùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
, 
JSCFunùiÚ
 *
func
, 
magic
)

9390 
JSObjeù
 *
p
;

9391 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9392  
FALSE
;

9393 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

9394 ià(
p
->
şass_id
 =ğ
JS_CLASS_C_FUNCTION
)

9395  (
p
->
u
.
cfunc
.
c_funùiÚ
.
g’”ic
 =ğ
func
 &&…->u.cfunc.
magic
 == magic);

9397  
FALSE
;

9398 
	}
}

9400 
BOOL
 
	$JS_IsCÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

9402 
JSObjeù
 *
p
;

9403 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9404  
FALSE
;

9405 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

9406  
p
->
is_cÚ¡ruùÜ
;

9407 
	}
}

9409 
BOOL
 
	$JS_S‘CÚ¡ruùÜB™
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
, 
BOOL
 
v®
)

9411 
JSObjeù
 *
p
;

9412 ià(
	`JS_VALUE_GET_TAG
(
func_obj
è!ğ
JS_TAG_OBJECT
)

9413  
FALSE
;

9414 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

9415 
p
->
is_cÚ¡ruùÜ
 = 
v®
;

9416  
TRUE
;

9417 
	}
}

9419 
BOOL
 
	$JS_IsE¼Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

9421 
JSObjeù
 *
p
;

9422 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9423  
FALSE
;

9424 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

9425  (
p
->
şass_id
 =ğ
JS_CLASS_ERROR
);

9426 
	}
}

9429 
BOOL
 
	$JS_IsUnÿtchabËE¼Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

9431 
JSObjeù
 *
p
;

9432 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9433  
FALSE
;

9434 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

9435  
p
->
şass_id
 =ğ
JS_CLASS_ERROR
 &&…->
is_unÿtchabË_”rÜ
;

9436 
	}
}

9438 
	$JS_S‘UnÿtchabËE¼Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
, 
BOOL
 
æag
)

9440 
JSObjeù
 *
p
;

9441 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9443 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

9444 ià(
p
->
şass_id
 =ğ
JS_CLASS_ERROR
)

9445 
p
->
is_unÿtchabË_”rÜ
 = 
æag
;

9446 
	}
}

9448 
	$JS_Re£tUnÿtchabËE¼Ü
(
JSCÚ‹xt
 *
ùx
)

9450 
	`JS_S‘UnÿtchabËE¼Ü
(
ùx
, ctx->
¹
->
cu¼’t_exû±iÚ
, 
FALSE
);

9451 
	}
}

9453 
	$JS_S‘O·que
(
JSV®ue
 
obj
, *
İaque
)

9455 
JSObjeù
 *
p
;

9456 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

9457 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

9458 
p
->
u
.
İaque
 = opaque;

9460 
	}
}

9463 *
	$JS_G‘O·que
(
JSV®ueCÚ¡
 
obj
, 
JSCÏssID
 
şass_id
)

9465 
JSObjeù
 *
p
;

9466 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

9467  
NULL
;

9468 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

9469 ià(
p
->
şass_id
 != class_id)

9470  
NULL
;

9471  
p
->
u
.
İaque
;

9472 
	}
}

9474 *
	$JS_G‘O·que2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSCÏssID
 
şass_id
)

9476 *
p
 = 
	`JS_G‘O·que
(
obj
, 
şass_id
);

9477 ià(
	`uÆik–y
(!
p
)) {

9478 
	`JS_ThrowTy³E¼ÜInv®idCÏss
(
ùx
, 
şass_id
);

9480  
p
;

9481 
	}
}

9483 
	#HINT_STRING
 0

	)

9484 
	#HINT_NUMBER
 1

	)

9485 
	#HINT_NONE
 2

	)

9487 
	#HINT_FORCE_ORDINARY
 (1 << 4)

	)

9489 
JSV®ue
 
	$JS_ToPrim™iveF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
, 
hšt
)

9491 
i
;

9492 
BOOL
 
fÜû_Üdš¬y
;

9494 
JSAtom
 
m‘hod_Çme
;

9495 
JSV®ue
 
m‘hod
, 
»t
;

9496 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
)

9497  
v®
;

9498 
fÜû_Üdš¬y
 = 
hšt
 & 
HINT_FORCE_ORDINARY
;

9499 
hšt
 &ğ~
HINT_FORCE_ORDINARY
;

9500 ià(!
fÜû_Üdš¬y
) {

9501 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
v®
, 
JS_ATOM_SymbŞ_toPrim™ive
);

9502 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

9503 
exû±iÚ
;

9506 ià(!
	`JS_IsUndefšed
(
m‘hod
è&& !
	`JS_IsNuÎ
(method)) {

9507 
JSAtom
 
©om
;

9508 
JSV®ue
 
¬g
;

9509 
hšt
) {

9510 
HINT_STRING
:

9511 
©om
 = 
JS_ATOM_¡ršg
;

9513 
HINT_NUMBER
:

9514 
©om
 = 
JS_ATOM_numb”
;

9517 
HINT_NONE
:

9518 
©om
 = 
JS_ATOM_deçuÉ
;

9521 
¬g
 = 
	`JS_AtomToSŒšg
(
ùx
, 
©om
);

9522 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
v®
, 1, (
JSV®ueCÚ¡
 *)&
¬g
);

9523 
	`JS_F»eV®ue
(
ùx
, 
¬g
);

9524 ià(
	`JS_IsExû±iÚ
(
»t
))

9525 
exû±iÚ
;

9526 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9527 ià(
	`JS_VALUE_GET_TAG
(
»t
è!ğ
JS_TAG_OBJECT
)

9528  
»t
;

9529 
	`JS_F»eV®ue
(
ùx
, 
»t
);

9530  
	`JS_ThrowTy³E¼Ü
(
ùx
, "toPrimitive");

9533 ià(
hšt
 !ğ
HINT_STRING
)

9534 
hšt
 = 
HINT_NUMBER
;

9535 
i
 = 0; i < 2; i++) {

9536 ià((
i
 ^ 
hšt
) == 0) {

9537 
m‘hod_Çme
 = 
JS_ATOM_toSŒšg
;

9539 
m‘hod_Çme
 = 
JS_ATOM_v®ueOf
;

9541 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
v®
, 
m‘hod_Çme
);

9542 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

9543 
exû±iÚ
;

9544 ià(
	`JS_IsFunùiÚ
(
ùx
, 
m‘hod
)) {

9545 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
v®
, 0, 
NULL
);

9546 ià(
	`JS_IsExû±iÚ
(
»t
))

9547 
exû±iÚ
;

9548 ià(
	`JS_VALUE_GET_TAG
(
»t
è!ğ
JS_TAG_OBJECT
) {

9549 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9550  
»t
;

9552 
	`JS_F»eV®ue
(
ùx
, 
»t
);

9554 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

9557 
	`JS_ThrowTy³E¼Ü
(
ùx
, "toPrimitive");

9558 
exû±iÚ
:

9559 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9560  
JS_EXCEPTION
;

9561 
	}
}

9563 
JSV®ue
 
	$JS_ToPrim™ive
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
, 
hšt
)

9565  
	`JS_ToPrim™iveF»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
v®
), 
hšt
);

9566 
	}
}

9568 
	$JS_ToBoŞF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

9570 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_TAG
(
v®
);

9571 
g
) {

9572 
JS_TAG_INT
:

9573  
	`JS_VALUE_GET_INT
(
v®
) != 0;

9574 
JS_TAG_BOOL
:

9575 
JS_TAG_NULL
:

9576 
JS_TAG_UNDEFINED
:

9577  
	`JS_VALUE_GET_INT
(
v®
);

9578 
JS_TAG_EXCEPTION
:

9580 
JS_TAG_STRING
:

9582 
BOOL
 
»t
 = 
	`JS_VALUE_GET_STRING
(
v®
)->
Ën
 != 0;

9583 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9584  
»t
;

9586 #ifdeà
CONFIG_BIGNUM


9587 
JS_TAG_BIG_INT
:

9588 
JS_TAG_BIG_FLOAT
:

9590 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

9591 
BOOL
 
»t
;

9592 
»t
 = 
p
->
num
.
ex²
 !ğ
BF_EXP_ZERO
 &&…->num.ex² !ğ
BF_EXP_NAN
;

9593 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9594  
»t
;

9596 
JS_TAG_BIG_DECIMAL
:

9598 
JSBigDecim®
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

9599 
BOOL
 
»t
;

9600 
»t
 = 
p
->
num
.
ex²
 !ğ
BF_EXP_ZERO
 &&…->num.ex² !ğ
BF_EXP_NAN
;

9601 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9602  
»t
;

9606 ià(
	`JS_TAG_IS_FLOAT64
(
g
)) {

9607 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

9608  !
	`i¢ª
(
d
) && d != 0;

9610 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9611  
TRUE
;

9614 
	}
}

9616 
	$JS_ToBoŞ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

9618  
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
v®
));

9619 
	}
}

9621 
	$sk_¥aûs
(cÚ¡ *
pc
)

9623 cÚ¡ 
ušt8_t
 *
p
, *
p_Ãxt
, *
p_¡¬t
;

9624 
ušt32_t
 
c
;

9626 
p
 = 
p_¡¬t
 = (cÚ¡ 
ušt8_t
 *)
pc
;

9628 
c
 = *
p
;

9629 ià(
c
 < 128) {

9630 ià(!((
c
 >= 0x09 && c <= 0x0d) || (c == 0x20)))

9632 
p
++;

9634 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

9635 ià(!
	`Ìe_is_¥aû
(
c
))

9637 
p
 = 
p_Ãxt
;

9640  
p
 - 
p_¡¬t
;

9641 
	}
}

9643 
šlše
 
	$to_dig™
(
c
)

9645 ià(
c
 >= '0' && c <= '9')

9646  
c
 - '0';

9647 ià(
c
 >= 'A' && c <= 'Z')

9648  
c
 - 'A' + 10;

9649 ià(
c
 >= 'a' && c <= 'z')

9650  
c
 - 'a' + 10;

9653 
	}
}

9656 
	$js_¡¹od
(cÚ¡ *
p
, 
¿dix
, 
BOOL
 
is_æßt
)

9658 
d
;

9659 
c
;

9661 ià(!
is_æßt
 || 
¿dix
 != 10) {

9662 
ušt64_t
 
n_max
, 
n
;

9663 
št_exp
, 
is_Ãg
;

9665 
is_Ãg
 = 0;

9666 ià(*
p
 == '-') {

9667 
is_Ãg
 = 1;

9668 
p
++;

9672 *
p
 == '0')

9673 
p
++;

9674 
n
 = 0;

9675 ià(
¿dix
 == 10)

9676 
n_max
 = ((
ušt64_t
)-1 - 9) / 10;

9678 
n_max
 = ((
ušt64_t
)-1 - (
¿dix
 - 1)) /„adix;

9680 
št_exp
 = 0;

9681 *
p
 != '\0') {

9682 
c
 = 
	`to_dig™
((
ušt8_t
)*
p
);

9683 ià(
c
 >ğ
¿dix
)

9685 ià(
n
 <ğ
n_max
) {

9686 
n
 =‚ * 
¿dix
 + 
c
;

9688 
št_exp
++;

9690 
p
++;

9692 
d
 = 
n
;

9693 ià(
št_exp
 != 0) {

9694 
d
 *ğ
	`pow
(
¿dix
, 
št_exp
);

9696 ià(
is_Ãg
)

9697 
d
 = -d;

9699 
d
 = 
	`¡¹od
(
p
, 
NULL
);

9701  
d
;

9702 
	}
}

9704 
	#ATOD_INT_ONLY
 (1 << 0)

	)

9706 
	#ATOD_ACCEPT_BIN_OCT
 (1 << 2)

	)

9708 
	#ATOD_ACCEPT_LEGACY_OCTAL
 (1 << 4)

	)

9710 
	#ATOD_ACCEPT_UNDERSCORES
 (1 << 5)

	)

9712 
	#ATOD_ACCEPT_SUFFIX
 (1 << 6)

	)

9714 
	#ATOD_TYPE_MASK
 (3 << 7)

	)

9715 
	#ATOD_TYPE_FLOAT64
 (0 << 7)

	)

9716 
	#ATOD_TYPE_BIG_INT
 (1 << 7)

	)

9717 
	#ATOD_TYPE_BIG_FLOAT
 (2 << 7)

	)

9718 
	#ATOD_TYPE_BIG_DECIMAL
 (3 << 7)

	)

9721 
	#ATOD_MODE_BIGINT
 (1 << 9)

	)

9723 
	#ATOD_ACCEPT_PREFIX_AFTER_SIGN
 (1 << 10)

	)

9725 #ifdeà
CONFIG_BIGNUM


9726 
JSV®ue
 
	$js_¡ršg_to_bigšt
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
,

9727 
¿dix
, 
æags
, 
¦imb_t
 *
³xpÚ’t
)

9729 
bf_t
 
a_s
, *
a
 = &a_s;

9730 
»t
;

9731 
JSV®ue
 
v®
;

9732 
v®
 = 
	`JS_NewBigIÁ
(
ùx
);

9733 ià(
	`JS_IsExû±iÚ
(
v®
))

9734  
v®
;

9735 
a
 = 
	`JS_G‘BigIÁ
(
v®
);

9736 
»t
 = 
	`bf_©of
(
a
, 
buf
, 
NULL
, 
¿dix
, 
BF_PREC_INF
, 
BF_RNDZ
);

9737 ià(
»t
 & 
BF_ST_MEM_ERROR
) {

9738 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9739  
	`JS_ThrowOutOfMemÜy
(
ùx
);

9741 
v®
 = 
	`JS_Com·ùBigIÁ1
(
ùx
, v®, (
æags
 & 
ATOD_MODE_BIGINT
) != 0);

9742  
v®
;

9743 
	}
}

9745 
JSV®ue
 
	$js_¡ršg_to_bigæßt
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
,

9746 
¿dix
, 
æags
, 
¦imb_t
 *
³xpÚ’t
)

9748 
bf_t
 *
a
;

9749 
»t
;

9750 
JSV®ue
 
v®
;

9752 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

9753 ià(
	`JS_IsExû±iÚ
(
v®
))

9754  
v®
;

9755 
a
 = 
	`JS_G‘BigFlßt
(
v®
);

9756 ià(
æags
 & 
ATOD_ACCEPT_SUFFIX
) {

9758 
»t
 = 
	`bf_©of2
(
a
, 
³xpÚ’t
, 
buf
, 
NULL
, 
¿dix
, 
BF_PREC_INF
,

9759 
BF_RNDZ
 | 
BF_ATOF_EXPONENT
);

9761 
»t
 = 
	`bf_©of
(
a
, 
buf
, 
NULL
, 
¿dix
, 
ùx
->
å_’v
.
´ec
,

9762 
ùx
->
å_’v
.
æags
);

9764 ià(
»t
 & 
BF_ST_MEM_ERROR
) {

9765 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9766  
	`JS_ThrowOutOfMemÜy
(
ùx
);

9768  
v®
;

9769 
	}
}

9771 
JSV®ue
 
	$js_¡ršg_to_bigdecim®
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
,

9772 
¿dix
, 
æags
, 
¦imb_t
 *
³xpÚ’t
)

9774 
bfdec_t
 *
a
;

9775 
»t
;

9776 
JSV®ue
 
v®
;

9778 
v®
 = 
	`JS_NewBigDecim®
(
ùx
);

9779 ià(
	`JS_IsExû±iÚ
(
v®
))

9780  
v®
;

9781 
a
 = 
	`JS_G‘BigDecim®
(
v®
);

9782 
»t
 = 
	`bfdec_©of
(
a
, 
buf
, 
NULL
, 
BF_PREC_INF
,

9783 
BF_RNDZ
 | 
BF_ATOF_NO_NAN_INF
);

9784 ià(
»t
 & 
BF_ST_MEM_ERROR
) {

9785 
	`JS_F»eV®ue
(
ùx
, 
v®
);

9786  
	`JS_ThrowOutOfMemÜy
(
ùx
);

9788  
v®
;

9789 
	}
}

9795 #ifdeà
CONFIG_BIGNUM


9796 
JSV®ue
 
	$js_©of2
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
, cÚ¡ **
µ
,

9797 
¿dix
, 
æags
, 
¦imb_t
 *
³xpÚ’t
)

9799 
JSV®ue
 
	$js_©of
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
, cÚ¡ **
µ
,

9800 
¿dix
, 
æags
)

9803 cÚ¡ *
p
, *
p_¡¬t
;

9804 
£p
, 
is_Ãg
;

9805 
BOOL
 
is_æßt
, 
has_Ëgacy_où®
;

9806 
©od_ty³
 = 
æags
 & 
ATOD_TYPE_MASK
;

9807 
buf1
[64], *
buf
;

9808 
i
, 
j
, 
Ën
;

9809 
BOOL
 
buf_®loÿ‹d
 = 
FALSE
;

9810 
JSV®ue
 
v®
;

9813 
£p
 = (
æags
 & 
ATOD_ACCEPT_UNDERSCORES
) ? '_' : 256;

9814 
has_Ëgacy_où®
 = 
FALSE
;

9816 
p
 = 
¡r
;

9817 
p_¡¬t
 = 
p
;

9818 
is_Ãg
 = 0;

9819 ià(
p
[0] == '+') {

9820 
p
++;

9821 
p_¡¬t
++;

9822 ià(!(
æags
 & 
ATOD_ACCEPT_PREFIX_AFTER_SIGN
))

9823 
no_¿dix_´efix
;

9824 } ià(
p
[0] == '-') {

9825 
p
++;

9826 
p_¡¬t
++;

9827 
is_Ãg
 = 1;

9828 ià(!(
æags
 & 
ATOD_ACCEPT_PREFIX_AFTER_SIGN
))

9829 
no_¿dix_´efix
;

9831 ià(
p
[0] == '0') {

9832 ià((
p
[1] == 'x' ||…[1] == 'X') &&

9833 (
¿dix
 == 0 ||„adix == 16)) {

9834 
p
 += 2;

9835 
¿dix
 = 16;

9836 } ià((
p
[1] == 'o' ||…[1] == 'O') &&

9837 
¿dix
 =ğ0 && (
æags
 & 
ATOD_ACCEPT_BIN_OCT
)) {

9838 
p
 += 2;

9839 
¿dix
 = 8;

9840 } ià((
p
[1] == 'b' ||…[1] == 'B') &&

9841 
¿dix
 =ğ0 && (
æags
 & 
ATOD_ACCEPT_BIN_OCT
)) {

9842 
p
 += 2;

9843 
¿dix
 = 2;

9844 } ià((
p
[1] >= '0' &&…[1] <= '9') &&

9845 
¿dix
 =ğ0 && (
æags
 & 
ATOD_ACCEPT_LEGACY_OCTAL
)) {

9846 
i
;

9847 
has_Ëgacy_où®
 = 
TRUE
;

9848 
£p
 = 256;

9849 
i
 = 1; (
p
[i] >= '0' &&…[i] <= '7'); i++)

9851 ià(
p
[
i
] == '8' ||…[i] == '9')

9852 
no_´efix
;

9853 
p
 += 1;

9854 
¿dix
 = 8;

9856 
no_´efix
;

9859 ià(
	`to_dig™
((
ušt8_t
)*
p
è>ğ
¿dix
)

9860 
ç
;

9861 
no_´efix
: ;

9863 
no_¿dix_´efix
:

9864 ià(!(
æags
 & 
ATOD_INT_ONLY
) &&

9865 (
©od_ty³
 =ğ
ATOD_TYPE_FLOAT64
 ||

9866 
©od_ty³
 =ğ
ATOD_TYPE_BIG_FLOAT
) &&

9867 
	`¡r¡¬t
(
p
, "Infinity", &p)) {

9868 #ifdeà
CONFIG_BIGNUM


9869 ià(
©od_ty³
 =ğ
ATOD_TYPE_BIG_FLOAT
) {

9870 
bf_t
 *
a
;

9871 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

9872 ià(
	`JS_IsExû±iÚ
(
v®
))

9873 
dÚe
;

9874 
a
 = 
	`JS_G‘BigFlßt
(
v®
);

9875 
	`bf_£t_šf
(
a
, 
is_Ãg
);

9879 
d
 = 1.0 / 0.0;

9880 ià(
is_Ãg
)

9881 
d
 = -d;

9882 
v®
 = 
	`JS_NewFlßt64
(
ùx
, 
d
);

9884 
dÚe
;

9887 ià(
¿dix
 == 0)

9888 
¿dix
 = 10;

9889 
is_æßt
 = 
FALSE
;

9890 
p_¡¬t
 = 
p
;

9891 
	`to_dig™
((
ušt8_t
)*
p
è< 
¿dix


9892 || (*
p
 =ğ
£p
 && (
¿dix
 != 10 ||

9893 
p
 !ğ
p_¡¬t
 + 1 ||…[-1] != '0') &&

9894 
	`to_dig™
((
ušt8_t
)
p
[1]è< 
¿dix
)) {

9895 
p
++;

9897 ià(!(
æags
 & 
ATOD_INT_ONLY
)) {

9898 ià(*
p
 =ğ'.' && (°> 
p_¡¬t
 || 
	`to_dig™
((
ušt8_t
í[1]è< 
¿dix
)) {

9899 
is_æßt
 = 
TRUE
;

9900 
p
++;

9901 ià(*
p
 =ğ
£p
)

9902 
ç
;

9903 
	`to_dig™
((
ušt8_t
)*
p
è< 
¿dix
 ||

9904 (*
p
 =ğ
£p
 && 
	`to_dig™
((
ušt8_t
í[1]è< 
¿dix
))

9905 
p
++;

9907 ià(
p
 > 
p_¡¬t
 &&

9908 (((*
p
 =ğ'e' || *°=ğ'E'è&& 
¿dix
 == 10) ||

9909 ((*
p
 =ğ'p' || *°=ğ'P'è&& (
¿dix
 == 2 ||„adix == 8 ||„adix == 16)))) {

9910 cÚ¡ *
p1
 = 
p
 + 1;

9911 
is_æßt
 = 
TRUE
;

9912 ià(*
p1
 == '+') {

9913 
p1
++;

9914 } ià(*
p1
 == '-') {

9915 
p1
++;

9917 ià(
	`is_dig™
((
ušt8_t
)*
p1
)) {

9918 
p
 = 
p1
 + 1;

9919 
	`is_dig™
((
ušt8_t
)*
p
è|| (*°=ğ
£p
 && is_digit((uint8_t)p[1])))

9920 
p
++;

9924 ià(
p
 =ğ
p_¡¬t
)

9925 
ç
;

9927 
buf
 = 
buf1
;

9928 
buf_®loÿ‹d
 = 
FALSE
;

9929 
Ën
 = 
p
 - 
p_¡¬t
;

9930 ià(
	`uÆik–y
((
Ën
 + 2è> (
buf1
))) {

9931 
buf
 = 
	`js_m®loc_¹
(
ùx
->
¹
, 
Ën
 + 2);

9932 ià(!
buf
)

9933 
mem_”rÜ
;

9934 
buf_®loÿ‹d
 = 
TRUE
;

9937 
j
 = 0;

9938 ià(
is_Ãg
)

9939 
buf
[
j
++] = '-';

9940 
i
 = 0; i < 
Ën
; i++) {

9941 ià(
p_¡¬t
[
i
] != '_')

9942 
buf
[
j
++] = 
p_¡¬t
[
i
];

9944 
buf
[
j
] = '\0';

9946 #ifdeà
CONFIG_BIGNUM


9947 ià(
æags
 & 
ATOD_ACCEPT_SUFFIX
) {

9948 ià(*
p
 == 'n') {

9949 
p
++;

9950 
©od_ty³
 = 
ATOD_TYPE_BIG_INT
;

9951 } ià(*
p
 == 'l') {

9952 
p
++;

9953 
©od_ty³
 = 
ATOD_TYPE_BIG_FLOAT
;

9954 } ià(*
p
 == 'm') {

9955 
p
++;

9956 
©od_ty³
 = 
ATOD_TYPE_BIG_DECIMAL
;

9958 ià(
æags
 & 
ATOD_MODE_BIGINT
) {

9959 ià(!
is_æßt
)

9960 
©od_ty³
 = 
ATOD_TYPE_BIG_INT
;

9961 ià(
has_Ëgacy_où®
)

9962 
ç
;

9964 ià(
is_æßt
 && 
¿dix
 != 10)

9965 
ç
;

9969 ià(
©od_ty³
 =ğ
ATOD_TYPE_FLOAT64
) {

9970 ià(
æags
 & 
ATOD_MODE_BIGINT
) {

9971 ià(!
is_æßt
)

9972 
©od_ty³
 = 
ATOD_TYPE_BIG_INT
;

9973 ià(
has_Ëgacy_où®
)

9974 
ç
;

9976 ià(
is_æßt
 && 
¿dix
 != 10)

9977 
ç
;

9982 
©od_ty³
) {

9983 
ATOD_TYPE_FLOAT64
:

9985 
d
;

9986 
d
 = 
	`js_¡¹od
(
buf
, 
¿dix
, 
is_æßt
);

9988 
v®
 = 
	`JS_NewFlßt64
(
ùx
, 
d
);

9991 
ATOD_TYPE_BIG_INT
:

9992 ià(
has_Ëgacy_où®
 || 
is_æßt
)

9993 
ç
;

9994 
v®
 = 
ùx
->
¹
->
bigšt_İs
.
	`äom_¡ršg
(ùx, 
buf
, 
¿dix
, 
æags
, 
NULL
);

9996 
ATOD_TYPE_BIG_FLOAT
:

9997 ià(
has_Ëgacy_où®
)

9998 
ç
;

9999 
v®
 = 
ùx
->
¹
->
bigæßt_İs
.
	`äom_¡ršg
(ùx, 
buf
, 
¿dix
, 
æags
,

10000 
³xpÚ’t
);

10002 
ATOD_TYPE_BIG_DECIMAL
:

10003 ià(
¿dix
 != 10)

10004 
ç
;

10005 
v®
 = 
ùx
->
¹
->
bigdecim®_İs
.
	`äom_¡ršg
(ùx, 
buf
, 
¿dix
, 
æags
, 
NULL
);

10008 
	`abÜt
();

10012 
d
;

10013 ()
has_Ëgacy_où®
;

10014 ià(
is_æßt
 && 
¿dix
 != 10)

10015 
ç
;

10016 
d
 = 
	`js_¡¹od
(
buf
, 
¿dix
, 
is_æßt
);

10017 
v®
 = 
	`JS_NewFlßt64
(
ùx
, 
d
);

10021 
dÚe
:

10022 ià(
buf_®loÿ‹d
)

10023 
	`js_ä“_¹
(
ùx
->
¹
, 
buf
);

10024 ià(
µ
)

10025 *
µ
 = 
p
;

10026  
v®
;

10027 
ç
:

10028 
v®
 = 
JS_NAN
;

10029 
dÚe
;

10030 
mem_”rÜ
:

10031 
v®
 = 
	`JS_ThrowOutOfMemÜy
(
ùx
);

10032 
dÚe
;

10033 
	}
}

10035 #ifdeà
CONFIG_BIGNUM


10036 
JSV®ue
 
	$js_©of
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
¡r
, cÚ¡ **
µ
,

10037 
¿dix
, 
æags
)

10039  
	`js_©of2
(
ùx
, 
¡r
, 
µ
, 
¿dix
, 
æags
, 
NULL
);

10040 
	}
}

10043 
	eJSToNumb”HštEnum
 {

10044 
	mTON_FLAG_NUMBER
,

10045 
	mTON_FLAG_NUMERIC
,

10046 } 
	tJSToNumb”HštEnum
;

10048 
JSV®ue
 
	$JS_ToNumb”HštF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
,

10049 
JSToNumb”HštEnum
 
æag
)

10051 
ušt32_t
 
g
;

10052 
JSV®ue
 
»t
;

10054 
»do
:

10055 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10056 
g
) {

10057 #ifdeà
CONFIG_BIGNUM


10058 
JS_TAG_BIG_DECIMAL
:

10059 ià(
æag
 !ğ
TON_FLAG_NUMERIC
) {

10060 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10061  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot convert bigdecimalo‚umber");

10063 
»t
 = 
v®
;

10065 
JS_TAG_BIG_INT
:

10066 ià(
æag
 !ğ
TON_FLAG_NUMERIC
) {

10067 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10068  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot convert biginto‚umber");

10070 
»t
 = 
v®
;

10072 
JS_TAG_BIG_FLOAT
:

10073 ià(
æag
 !ğ
TON_FLAG_NUMERIC
) {

10074 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10075  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot convert bigfloato‚umber");

10077 
»t
 = 
v®
;

10080 
JS_TAG_FLOAT64
:

10081 
JS_TAG_INT
:

10082 
JS_TAG_EXCEPTION
:

10083 
»t
 = 
v®
;

10085 
JS_TAG_BOOL
:

10086 
JS_TAG_NULL
:

10087 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 
	`JS_VALUE_GET_INT
(
v®
));

10089 
JS_TAG_UNDEFINED
:

10090 
»t
 = 
JS_NAN
;

10092 
JS_TAG_OBJECT
:

10093 
v®
 = 
	`JS_ToPrim™iveF»e
(
ùx
, v®, 
HINT_NUMBER
);

10094 ià(
	`JS_IsExû±iÚ
(
v®
))

10095  
JS_EXCEPTION
;

10096 
»do
;

10097 
JS_TAG_STRING
:

10099 cÚ¡ *
¡r
;

10100 cÚ¡ *
p
;

10101 
size_t
 
Ën
;

10103 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
v®
);

10104 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10105 ià(!
¡r
)

10106  
JS_EXCEPTION
;

10107 
p
 = 
¡r
;

10108 
p
 +ğ
	`sk_¥aûs
(p);

10109 ià((
p
 - 
¡r
è=ğ
Ën
) {

10110 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 0);

10112 
æags
 = 
ATOD_ACCEPT_BIN_OCT
;

10113 
»t
 = 
	`js_©of
(
ùx
, 
p
, &p, 0, 
æags
);

10114 ià(!
	`JS_IsExû±iÚ
(
»t
)) {

10115 
p
 +ğ
	`sk_¥aûs
(p);

10116 ià((
p
 - 
¡r
è!ğ
Ën
) {

10117 
	`JS_F»eV®ue
(
ùx
, 
»t
);

10118 
»t
 = 
JS_NAN
;

10122 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

10125 
JS_TAG_SYMBOL
:

10126 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10127  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot convert symbolo‚umber");

10129 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10130 
»t
 = 
JS_NAN
;

10133  
»t
;

10134 
	}
}

10136 
JSV®ue
 
	$JS_ToNumb”F»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

10138  
	`JS_ToNumb”HštF»e
(
ùx
, 
v®
, 
TON_FLAG_NUMBER
);

10139 
	}
}

10141 
JSV®ue
 
	$JS_ToNum”icF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

10143  
	`JS_ToNumb”HštF»e
(
ùx
, 
v®
, 
TON_FLAG_NUMERIC
);

10144 
	}
}

10146 
JSV®ue
 
	$JS_ToNum”ic
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10148  
	`JS_ToNum”icF»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
v®
));

10149 
	}
}

10151 
__exû±iÚ
 
	$__JS_ToFlßt64F»e
(
JSCÚ‹xt
 *
ùx
, *
´es
,

10152 
JSV®ue
 
v®
)

10154 
d
;

10155 
ušt32_t
 
g
;

10157 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10158 ià(
	`JS_IsExû±iÚ
(
v®
)) {

10159 *
´es
 = 
JS_FLOAT64_NAN
;

10162 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10163 
g
) {

10164 
JS_TAG_INT
:

10165 
d
 = 
	`JS_VALUE_GET_INT
(
v®
);

10167 
JS_TAG_FLOAT64
:

10168 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10170 #ifdeà
CONFIG_BIGNUM


10171 
JS_TAG_BIG_INT
:

10172 
JS_TAG_BIG_FLOAT
:

10174 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10178 
	`bf_g‘_æßt64
(&
p
->
num
, &
d
, 
BF_RNDN
);

10179 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10184 
	`abÜt
();

10186 *
´es
 = 
d
;

10188 
	}
}

10190 
šlše
 
	$JS_ToFlßt64F»e
(
JSCÚ‹xt
 *
ùx
, *
´es
, 
JSV®ue
 
v®
)

10192 
ušt32_t
 
g
;

10194 
g
 = 
	`JS_VALUE_GET_TAG
(
v®
);

10195 ià(
g
 <ğ
JS_TAG_NULL
) {

10196 *
´es
 = 
	`JS_VALUE_GET_INT
(
v®
);

10198 } ià(
	`JS_TAG_IS_FLOAT64
(
g
)) {

10199 *
´es
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10202  
	`__JS_ToFlßt64F»e
(
ùx
, 
´es
, 
v®
);

10204 
	}
}

10206 
	$JS_ToFlßt64
(
JSCÚ‹xt
 *
ùx
, *
´es
, 
JSV®ueCÚ¡
 
v®
)

10208  
	`JS_ToFlßt64F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10209 
	}
}

10211 
JSV®ue
 
	$JS_ToNumb”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10213  
	`JS_ToNumb”F»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
v®
));

10214 
	}
}

10217 
__maybe_unu£d
 
JSV®ue
 
	$JS_ToIÁeg”F»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

10219 
ušt32_t
 
g
;

10220 
JSV®ue
 
»t
;

10222 
»do
:

10223 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10224 
g
) {

10225 
JS_TAG_INT
:

10226 
JS_TAG_BOOL
:

10227 
JS_TAG_NULL
:

10228 
JS_TAG_UNDEFINED
:

10229 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 
	`JS_VALUE_GET_INT
(
v®
));

10231 
JS_TAG_FLOAT64
:

10233 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10234 ià(
	`i¢ª
(
d
)) {

10235 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 0);

10238 
d
 = 
	`Œunc
(d) + 0.0;

10239 
»t
 = 
	`JS_NewFlßt64
(
ùx
, 
d
);

10243 #ifdeà
CONFIG_BIGNUM


10244 
JS_TAG_BIG_FLOAT
:

10246 
bf_t
 
a_s
, *
a
, 
r_s
, *
r
 = &r_s;

10247 
BOOL
 
is_Çn
;

10249 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
v®
);

10250 ià(!
	`bf_is_fš™e
(
a
)) {

10251 
is_Çn
 = 
	`bf_is_Çn
(
a
);

10252 ià(
is_Çn
)

10253 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 0);

10255 
»t
 = 
	`JS_DupV®ue
(
ùx
, 
v®
);

10257 
»t
 = 
	`JS_NewBigIÁ
(
ùx
);

10258 ià(!
	`JS_IsExû±iÚ
(
»t
)) {

10259 
r
 = 
	`JS_G‘BigIÁ
(
»t
);

10260 
	`bf_£t
(
r
, 
a
);

10261 
	`bf_ršt
(
r
, 
BF_RNDZ
);

10262 
»t
 = 
	`JS_Com·ùBigIÁ
(
ùx
,„et);

10265 ià(
a
 =ğ&
a_s
)

10266 
	`bf_d–‘e
(
a
);

10267 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10272 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10273 ià(
	`JS_IsExû±iÚ
(
v®
))

10274  
v®
;

10275 
»do
;

10277  
»t
;

10278 
	}
}

10281 
	$JS_ToIÁ32S©F»e
(
JSCÚ‹xt
 *
ùx
, *
´es
, 
JSV®ue
 
v®
)

10283 
ušt32_t
 
g
;

10284 
»t
;

10286 
»do
:

10287 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10288 
g
) {

10289 
JS_TAG_INT
:

10290 
JS_TAG_BOOL
:

10291 
JS_TAG_NULL
:

10292 
JS_TAG_UNDEFINED
:

10293 
»t
 = 
	`JS_VALUE_GET_INT
(
v®
);

10295 
JS_TAG_EXCEPTION
:

10296 *
´es
 = 0;

10298 
JS_TAG_FLOAT64
:

10300 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10301 ià(
	`i¢ª
(
d
)) {

10302 
»t
 = 0;

10304 ià(
d
 < 
INT32_MIN
)

10305 
»t
 = 
INT32_MIN
;

10306 ià(
d
 > 
INT32_MAX
)

10307 
»t
 = 
INT32_MAX
;

10309 
»t
 = ()
d
;

10313 #ifdeà
CONFIG_BIGNUM


10314 
JS_TAG_BIG_FLOAT
:

10316 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10317 
	`bf_g‘_št32
(&
»t
, &
p
->
num
, 0);

10318 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10323 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10324 ià(
	`JS_IsExû±iÚ
(
v®
)) {

10325 *
´es
 = 0;

10328 
»do
;

10330 *
´es
 = 
»t
;

10332 
	}
}

10334 
	$JS_ToIÁ32S©
(
JSCÚ‹xt
 *
ùx
, *
´es
, 
JSV®ueCÚ¡
 
v®
)

10336  
	`JS_ToIÁ32S©F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10337 
	}
}

10339 
	$JS_ToIÁ32CÏmp
(
JSCÚ‹xt
 *
ùx
, *
´es
, 
JSV®ueCÚ¡
 
v®
,

10340 
mš
, 
max
, 
mš_off£t
)

10342 
»s
 = 
	`JS_ToIÁ32S©F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10343 ià(
»s
 == 0) {

10344 ià(*
´es
 < 
mš
) {

10345 *
´es
 +ğ
mš_off£t
;

10346 ià(*
´es
 < 
mš
)

10347 *
´es
 = 
mš
;

10349 ià(*
´es
 > 
max
)

10350 *
´es
 = 
max
;

10353  
»s
;

10354 
	}
}

10356 
	$JS_ToIÁ64S©F»e
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 *
´es
, 
JSV®ue
 
v®
)

10358 
ušt32_t
 
g
;

10360 
»do
:

10361 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10362 
g
) {

10363 
JS_TAG_INT
:

10364 
JS_TAG_BOOL
:

10365 
JS_TAG_NULL
:

10366 
JS_TAG_UNDEFINED
:

10367 *
´es
 = 
	`JS_VALUE_GET_INT
(
v®
);

10369 
JS_TAG_EXCEPTION
:

10370 *
´es
 = 0;

10372 
JS_TAG_FLOAT64
:

10374 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10375 ià(
	`i¢ª
(
d
)) {

10376 *
´es
 = 0;

10378 ià(
d
 < 
INT64_MIN
)

10379 *
´es
 = 
INT64_MIN
;

10380 ià(
d
 > 
INT64_MAX
)

10381 *
´es
 = 
INT64_MAX
;

10383 *
´es
 = (
sšt64_t
)
d
;

10387 #ifdeà
CONFIG_BIGNUM


10388 
JS_TAG_BIG_FLOAT
:

10390 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10391 
	`bf_g‘_št64
(
´es
, &
p
->
num
, 0);

10392 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10397 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10398 ià(
	`JS_IsExû±iÚ
(
v®
)) {

10399 *
´es
 = 0;

10402 
»do
;

10404 
	}
}

10406 
	$JS_ToIÁ64S©
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
)

10408  
	`JS_ToIÁ64S©F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10409 
	}
}

10411 
	$JS_ToIÁ64CÏmp
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
,

10412 
sšt64_t
 
mš
, sšt64_ˆ
max
, 
št64_t
 
Ãg_off£t
)

10414 
»s
 = 
	`JS_ToIÁ64S©F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10415 ià(
»s
 == 0) {

10416 ià(*
´es
 < 0)

10417 *
´es
 +ğ
Ãg_off£t
;

10418 ià(*
´es
 < 
mš
)

10419 *
´es
 = 
mš
;

10420 ià(*
´es
 > 
max
)

10421 *
´es
 = 
max
;

10423  
»s
;

10424 
	}
}

10428 
	$JS_ToIÁ64F»e
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
´es
, 
JSV®ue
 
v®
)

10430 
ušt32_t
 
g
;

10431 
sšt64_t
 
»t
;

10433 
»do
:

10434 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10435 
g
) {

10436 
JS_TAG_INT
:

10437 
JS_TAG_BOOL
:

10438 
JS_TAG_NULL
:

10439 
JS_TAG_UNDEFINED
:

10440 
»t
 = 
	`JS_VALUE_GET_INT
(
v®
);

10442 
JS_TAG_FLOAT64
:

10444 
JSFlßt64UniÚ
 
u
;

10445 
d
;

10446 
e
;

10447 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10448 
u
.
d
 = d;

10450 
e
 = (
u
.
u64
 >> 52) & 0x7ff;

10451 ià(
	`lik–y
(
e
 <= (1023 + 62))) {

10453 
»t
 = (
sšt64_t
)
d
;

10454 } ià(
e
 <= (1023 + 62 + 53)) {

10455 
ušt64_t
 
v
;

10457 
v
 = (
u
.
u64
 & (((
ušt64_t
)1 << 52) - 1)) | ((uint64_t)1 << 52);

10458 
»t
 = 
v
 << ((
e
 - 1023) - 52);

10460 ià(
u
.
u64
 >> 63)

10461 
»t
 = -ret;

10463 
»t
 = 0;

10467 #ifdeà
CONFIG_BIGNUM


10468 
JS_TAG_BIG_FLOAT
:

10470 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10471 
	`bf_g‘_št64
(&
»t
, &
p
->
num
, 
BF_GET_INT_MOD
);

10472 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10477 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10478 ià(
	`JS_IsExû±iÚ
(
v®
)) {

10479 *
´es
 = 0;

10482 
»do
;

10484 *
´es
 = 
»t
;

10486 
	}
}

10488 
	$JS_ToIÁ64
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
)

10490  
	`JS_ToIÁ64F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10491 
	}
}

10493 
	$JS_ToIÁ64Ext
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
)

10495 ià(
	`JS_IsBigIÁ
(
ùx
, 
v®
))

10496  
	`JS_ToBigIÁ64
(
ùx
, 
´es
, 
v®
);

10498  
	`JS_ToIÁ64
(
ùx
, 
´es
, 
v®
);

10499 
	}
}

10502 
	$JS_ToIÁ32F»e
(
JSCÚ‹xt
 *
ùx
, 
št32_t
 *
´es
, 
JSV®ue
 
v®
)

10504 
ušt32_t
 
g
;

10505 
št32_t
 
»t
;

10507 
»do
:

10508 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10509 
g
) {

10510 
JS_TAG_INT
:

10511 
JS_TAG_BOOL
:

10512 
JS_TAG_NULL
:

10513 
JS_TAG_UNDEFINED
:

10514 
»t
 = 
	`JS_VALUE_GET_INT
(
v®
);

10516 
JS_TAG_FLOAT64
:

10518 
JSFlßt64UniÚ
 
u
;

10519 
d
;

10520 
e
;

10521 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10522 
u
.
d
 = d;

10524 
e
 = (
u
.
u64
 >> 52) & 0x7ff;

10525 ià(
	`lik–y
(
e
 <= (1023 + 30))) {

10527 
»t
 = (
št32_t
)
d
;

10528 } ià(
e
 <= (1023 + 30 + 53)) {

10529 
ušt64_t
 
v
;

10531 
v
 = (
u
.
u64
 & (((
ušt64_t
)1 << 52) - 1)) | ((uint64_t)1 << 52);

10532 
v
 = v << ((
e
 - 1023) - 52 + 32);

10533 
»t
 = 
v
 >> 32;

10535 ià(
u
.
u64
 >> 63)

10536 
»t
 = -ret;

10538 
»t
 = 0;

10542 #ifdeà
CONFIG_BIGNUM


10543 
JS_TAG_BIG_FLOAT
:

10545 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10546 
	`bf_g‘_št32
(&
»t
, &
p
->
num
, 
BF_GET_INT_MOD
);

10547 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10552 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10553 ià(
	`JS_IsExû±iÚ
(
v®
)) {

10554 *
´es
 = 0;

10557 
»do
;

10559 *
´es
 = 
»t
;

10561 
	}
}

10563 
	$JS_ToIÁ32
(
JSCÚ‹xt
 *
ùx
, 
št32_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
)

10565  
	`JS_ToIÁ32F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

10566 
	}
}

10568 
šlše
 
	$JS_ToUšt32F»e
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
´es
, 
JSV®ue
 
v®
)

10570  
	`JS_ToIÁ32F»e
(
ùx
, (
št32_t
 *)
´es
, 
v®
);

10571 
	}
}

10573 
	$JS_ToUšt8CÏmpF»e
(
JSCÚ‹xt
 *
ùx
, 
št32_t
 *
´es
, 
JSV®ue
 
v®
)

10575 
ušt32_t
 
g
;

10576 
»s
;

10578 
»do
:

10579 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10580 
g
) {

10581 
JS_TAG_INT
:

10582 
JS_TAG_BOOL
:

10583 
JS_TAG_NULL
:

10584 
JS_TAG_UNDEFINED
:

10585 
»s
 = 
	`JS_VALUE_GET_INT
(
v®
);

10586 #ifdeà
CONFIG_BIGNUM


10587 
št_şamp
:

10589 
»s
 = 
	`max_št
(0, 
	`mš_št
(255,„es));

10591 
JS_TAG_FLOAT64
:

10593 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10594 ià(
	`i¢ª
(
d
)) {

10595 
»s
 = 0;

10597 ià(
d
 < 0)

10598 
»s
 = 0;

10599 ià(
d
 > 255)

10600 
»s
 = 255;

10602 
»s
 = 
	`Ìšt
(
d
);

10606 #ifdeà
CONFIG_BIGNUM


10607 
JS_TAG_BIG_FLOAT
:

10609 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10610 
bf_t
 
r_s
, *
r
 = &r_s;

10611 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

10612 
	`bf_£t
(
r
, &
p
->
num
);

10613 
	`bf_ršt
(
r
, 
BF_RNDN
);

10614 
	`bf_g‘_št32
(&
»s
, 
r
, 0);

10615 
	`bf_d–‘e
(
r
);

10616 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10618 
št_şamp
;

10621 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10622 ià(
	`JS_IsExû±iÚ
(
v®
)) {

10623 *
´es
 = 0;

10626 
»do
;

10628 *
´es
 = 
»s
;

10630 
	}
}

10632 
__exû±iÚ
 
	$JS_ToA¼ayL’gthF»e
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
¶’
,

10633 
JSV®ue
 
v®
)

10635 
ušt32_t
 
g
, 
Ën
;

10637 
»do
:

10638 
g
 = 
	`JS_VALUE_GET_TAG
(
v®
);

10639 
g
) {

10640 
JS_TAG_INT
:

10641 
JS_TAG_BOOL
:

10642 
JS_TAG_NULL
:

10644 
v
;

10645 
v
 = 
	`JS_VALUE_GET_INT
(
v®
);

10646 ià(
v
 < 0)

10647 
ç
;

10648 
Ën
 = 
v
;

10651 #ifdeà
CONFIG_BIGNUM


10652 
JS_TAG_BIG_INT
:

10653 
JS_TAG_BIG_FLOAT
:

10655 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10656 
bf_t
 
a
;

10657 
BOOL
 
»s
;

10658 
	`bf_g‘_št32
((
št32_t
 *)&
Ën
, &
p
->
num
, 
BF_GET_INT_MOD
);

10659 
	`bf_š™
(
ùx
->
bf_ùx
, &
a
);

10660 
	`bf_£t_ui
(&
a
, 
Ën
);

10661 
»s
 = 
	`bf_cmp_eq
(&
a
, &
p
->
num
);

10662 
	`bf_d–‘e
(&
a
);

10663 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10664 ià(!
»s
)

10665 
ç
;

10670 ià(
	`JS_TAG_IS_FLOAT64
(
g
)) {

10671 
d
;

10672 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10673 
Ën
 = (
ušt32_t
)
d
;

10674 ià(
Ën
 !ğ
d
) {

10675 
ç
:

10676 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‡rray†ength");

10680 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

10681 ià(
	`JS_IsExû±iÚ
(
v®
))

10683 
»do
;

10687 *
¶’
 = 
Ën
;

10689 
	}
}

10691 
	#MAX_SAFE_INTEGER
 (((
št64_t
)1 << 53è- 1)

	)

10693 
BOOL
 
	$is_§ã_š‹g”
(
d
)

10695  
	`isfš™e
(
d
è&& 
	`æoÜ
(d) == d &&

10696 
	`çbs
(
d
è<ğ()
MAX_SAFE_INTEGER
;

10697 
	}
}

10699 
	$JS_ToIndex
(
JSCÚ‹xt
 *
ùx
, 
ušt64_t
 *
¶’
, 
JSV®ueCÚ¡
 
v®
)

10701 
sšt64_t
 
v
;

10702 ià(
	`JS_ToIÁ64S©
(
ùx
, &
v
, 
v®
))

10704 ià(
v
 < 0 || v > 
MAX_SAFE_INTEGER
) {

10705 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‡rray index");

10706 *
¶’
 = 0;

10709 *
¶’
 = 
v
;

10711 
	}
}

10715 
__exû±iÚ
 
	$JS_ToL’gthF»e
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
¶’
,

10716 
JSV®ue
 
v®
)

10718 
»s
 = 
	`JS_ToIÁ64CÏmp
(
ùx
, 
¶’
, 
v®
, 0, 
MAX_SAFE_INTEGER
, 0);

10719 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10720  
»s
;

10721 
	}
}

10724 
	$JS_Numb”IsIÁeg”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10726 
d
;

10727 ià(!
	`JS_IsNumb”
(
v®
))

10728  
FALSE
;

10729 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d
, 
v®
)))

10731  
	`isfš™e
(
d
è&& 
	`æoÜ
(d) == d;

10732 
	}
}

10734 
BOOL
 
	$JS_Numb”IsNeg©iveOrMšusZ”o
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10736 
ušt32_t
 
g
;

10738 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

10739 
g
) {

10740 
JS_TAG_INT
:

10742 
v
;

10743 
v
 = 
	`JS_VALUE_GET_INT
(
v®
);

10744  (
v
 < 0);

10746 
JS_TAG_FLOAT64
:

10748 
JSFlßt64UniÚ
 
u
;

10749 
u
.
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

10750  (
u
.
u64
 >> 63);

10752 #ifdeà
CONFIG_BIGNUM


10753 
JS_TAG_BIG_INT
:

10755 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10757  
p
->
num
.
sign
 && !
	`bf_is_z”o
(&p->num);

10759 
JS_TAG_BIG_FLOAT
:

10761 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10762  
p
->
num
.
sign
;

10765 
JS_TAG_BIG_DECIMAL
:

10767 
JSBigDecim®
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

10768  
p
->
num
.
sign
;

10773  
FALSE
;

10775 
	}
}

10777 #ifdeà
CONFIG_BIGNUM


10779 
JSV®ue
 
	$js_bigšt_to_¡ršg1
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
, 
¿dix
)

10781 
JSV®ue
 
»t
;

10782 
bf_t
 
a_s
, *
a
;

10783 *
¡r
;

10784 
§ved_sign
;

10786 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
v®
);

10787 ià(!
a
)

10788  
JS_EXCEPTION
;

10789 
§ved_sign
 = 
a
->
sign
;

10790 ià(
a
->
ex²
 =ğ
BF_EXP_ZERO
)

10791 
a
->
sign
 = 0;

10792 
¡r
 = 
	`bf_áß
(
NULL
, 
a
, 
¿dix
, 0, 
BF_RNDZ
 | 
BF_FTOA_FORMAT_FRAC
 |

10793 
BF_FTOA_JS_QUIRKS
);

10794 
a
->
sign
 = 
§ved_sign
;

10795 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

10796 ià(!
¡r
)

10797  
	`JS_ThrowOutOfMemÜy
(
ùx
);

10798 
»t
 = 
	`JS_NewSŒšg
(
ùx
, 
¡r
);

10799 
	`bf_ä“
(
ùx
->
bf_ùx
, 
¡r
);

10800  
»t
;

10801 
	}
}

10803 
JSV®ue
 
	$js_bigšt_to_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10805  
	`js_bigšt_to_¡ršg1
(
ùx
, 
v®
, 10);

10806 
	}
}

10808 
JSV®ue
 
	$js_áß
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®1
, 
¿dix
,

10809 
limb_t
 
´ec
, 
bf_æags_t
 
æags
)

10811 
JSV®ue
 
v®
, 
»t
;

10812 
bf_t
 
a_s
, *
a
;

10813 *
¡r
;

10814 
§ved_sign
;

10816 
v®
 = 
	`JS_ToNum”ic
(
ùx
, 
v®1
);

10817 ià(
	`JS_IsExû±iÚ
(
v®
))

10818  
v®
;

10819 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
v®
);

10820 
§ved_sign
 = 
a
->
sign
;

10821 ià(
a
->
ex²
 =ğ
BF_EXP_ZERO
)

10822 
a
->
sign
 = 0;

10823 
æags
 |ğ
BF_FTOA_JS_QUIRKS
;

10824 ià((
æags
 & 
BF_FTOA_FORMAT_MASK
è=ğ
BF_FTOA_FORMAT_FREE_MIN
) {

10828 ià((
¿dix
 & (radix - 1)) != 0) {

10829 
bf_t
 
r_s
, *
r
 = &r_s;

10830 
´ec
, 
æags1
;

10832 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_BIG_FLOAT
) {

10833 
´ec
 = 
ùx
->
å_’v
.prec;

10834 
æags1
 = 
ùx
->
å_’v
.
æags
 &

10835 (
BF_FLAG_SUBNORMAL
 | (
BF_EXP_BITS_MASK
 << 
BF_EXP_BITS_SHIFT
));

10837 
´ec
 = 53;

10838 
æags1
 = 
	`bf_£t_exp_b™s
(11è| 
BF_FLAG_SUBNORMAL
;

10840 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

10841 
	`bf_£t
(
r
, 
a
);

10842 
	`bf_round
(
r
, 
´ec
, 
æags1
 | 
BF_RNDN
);

10843 
¡r
 = 
	`bf_áß
(
NULL
, 
r
, 
¿dix
, 
´ec
, 
æags1
 | 
æags
);

10844 
	`bf_d–‘e
(
r
);

10846 
¡r
 = 
	`bf_áß
(
NULL
, 
a
, 
¿dix
, 
BF_PREC_INF
, 
æags
);

10849 
¡r
 = 
	`bf_áß
(
NULL
, 
a
, 
¿dix
, 
´ec
, 
æags
);

10851 
a
->
sign
 = 
§ved_sign
;

10852 ià(
a
 =ğ&
a_s
)

10853 
	`bf_d–‘e
(
a
);

10854 
	`JS_F»eV®ue
(
ùx
, 
v®
);

10855 ià(!
¡r
)

10856  
	`JS_ThrowOutOfMemÜy
(
ùx
);

10857 
»t
 = 
	`JS_NewSŒšg
(
ùx
, 
¡r
);

10858 
	`bf_ä“
(
ùx
->
bf_ùx
, 
¡r
);

10859  
»t
;

10860 
	}
}

10862 
JSV®ue
 
	$js_bigæßt_to_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10864  
	`js_áß
(
ùx
, 
v®
, 10, 0, 
BF_RNDN
 | 
BF_FTOA_FORMAT_FREE_MIN
);

10865 
	}
}

10867 
JSV®ue
 
	$js_bigdecim®_to_¡ršg1
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
,

10868 
limb_t
 
´ec
, 
æags
)

10870 
JSV®ue
 
»t
;

10871 
bfdec_t
 *
a
;

10872 *
¡r
;

10873 
§ved_sign
;

10875 
a
 = 
	`JS_ToBigDecim®
(
ùx
, 
v®
);

10876 
§ved_sign
 = 
a
->
sign
;

10877 ià(
a
->
ex²
 =ğ
BF_EXP_ZERO
)

10878 
a
->
sign
 = 0;

10879 
¡r
 = 
	`bfdec_áß
(
NULL
, 
a
, 
´ec
, 
æags
 | 
BF_FTOA_JS_QUIRKS
);

10880 
a
->
sign
 = 
§ved_sign
;

10881 ià(!
¡r
)

10882  
	`JS_ThrowOutOfMemÜy
(
ùx
);

10883 
»t
 = 
	`JS_NewSŒšg
(
ùx
, 
¡r
);

10884 
	`bf_ä“
(
ùx
->
bf_ùx
, 
¡r
);

10885  
»t
;

10886 
	}
}

10888 
JSV®ue
 
	$js_bigdecim®_to_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

10890  
	`js_bigdecim®_to_¡ršg1
(
ùx
, 
v®
, 0,

10891 
BF_RNDZ
 | 
BF_FTOA_FORMAT_FREE
);

10892 
	}
}

10897 *
	$i64tß
(*
buf_’d
, 
sšt64_t
 
n
, 
ba£
)

10899 *
q
 = 
buf_’d
;

10900 
dig™
, 
is_Ãg
;

10902 
is_Ãg
 = 0;

10903 ià(
n
 < 0) {

10904 
is_Ãg
 = 1;

10905 
n
 = -n;

10907 *--
q
 = '\0';

10909 
dig™
 = (
ušt64_t
)
n
 % 
ba£
;

10910 
n
 = (
ušt64_t
ê / 
ba£
;

10911 ià(
dig™
 < 10)

10912 
dig™
 += '0';

10914 
dig™
 += 'a' - 10;

10915 *--
q
 = 
dig™
;

10916 } 
n
 != 0);

10917 ià(
is_Ãg
)

10918 *--
q
 = '-';

10919  
q
;

10920 
	}
}

10923 
	$js_ecvt1
(
d
, 
n_dig™s
, *
deıt
, *
sign
, *
buf
,

10924 
roundšg_mode
, *
buf1
, 
buf1_size
)

10926 ià(
roundšg_mode
 !ğ
FE_TONEAREST
)

10927 
	`ã£Œound
(
roundšg_mode
);

10928 
	`¢´štf
(
buf1
, 
buf1_size
, "%+.*e", 
n_dig™s
 - 1, 
d
);

10929 ià(
roundšg_mode
 !ğ
FE_TONEAREST
)

10930 
	`ã£Œound
(
FE_TONEAREST
);

10931 *
sign
 = (
buf1
[0] == '-');

10933 
buf
[0] = 
buf1
[1];

10934 ià(
n_dig™s
 > 1)

10935 
	`memıy
(
buf
 + 1, 
buf1
 + 3, 
n_dig™s
 - 1);

10936 
buf
[
n_dig™s
] = '\0';

10938 *
deıt
 = 
	`©oi
(
buf1
 + 
n_dig™s
 + 2 + (n_digits > 1)) + 1;

10939 
	}
}

10942 
	#JS_DTOA_BUF_SIZE
 128

	)

10946 
	$js_ecvt
(
d
, 
n_dig™s
, *
deıt
, *
sign
, *
buf
,

10947 
BOOL
 
is_fixed
)

10949 
roundšg_mode
;

10950 
buf_tmp
[
JS_DTOA_BUF_SIZE
];

10952 ià(!
is_fixed
) {

10953 
n_dig™s_mš
, 
n_dig™s_max
;

10955 
n_dig™s_mš
 = 1;

10956 
n_dig™s_max
 = 17;

10957 
n_dig™s_mš
 < 
n_dig™s_max
) {

10958 
n_dig™s
 = (
n_dig™s_mš
 + 
n_dig™s_max
) / 2;

10959 
	`js_ecvt1
(
d
, 
n_dig™s
, 
deıt
, 
sign
, 
buf
, 
FE_TONEAREST
,

10960 
buf_tmp
, (buf_tmp));

10961 ià(
	`¡¹od
(
buf_tmp
, 
NULL
è=ğ
d
) {

10963 
n_dig™s
 >ğ2 && 
buf
[n_digits - 1] == '0')

10964 
n_dig™s
--;

10965 
n_dig™s_max
 = 
n_dig™s
;

10967 
n_dig™s_mš
 = 
n_dig™s
 + 1;

10970 
n_dig™s
 = 
n_dig™s_max
;

10971 
roundšg_mode
 = 
FE_TONEAREST
;

10973 
roundšg_mode
 = 
FE_TONEAREST
;

10974 #ifdeà
CONFIG_PRINTF_RNDN


10976 
buf1
[
JS_DTOA_BUF_SIZE
], 
buf2
[JS_DTOA_BUF_SIZE];

10977 
deıt1
, 
sign1
, 
deıt2
, 
sign2
;

10982 
	`js_ecvt1
(
d
, 
n_dig™s
 + 1, &
deıt1
, &
sign1
, 
buf1
, 
FE_TONEAREST
,

10983 
buf_tmp
, (buf_tmp));

10985 ià(
buf1
[
n_dig™s
] == '5') {

10986 
	`js_ecvt1
(
d
, 
n_dig™s
 + 1, &
deıt1
, &
sign1
, 
buf1
, 
FE_DOWNWARD
,

10987 
buf_tmp
, (buf_tmp));

10988 
	`js_ecvt1
(
d
, 
n_dig™s
 + 1, &
deıt2
, &
sign2
, 
buf2
, 
FE_UPWARD
,

10989 
buf_tmp
, (buf_tmp));

10990 ià(
	`memcmp
(
buf1
, 
buf2
, 
n_dig™s
 + 1è=ğ0 && 
deıt1
 =ğ
deıt2
) {

10992 ià(
sign1
)

10993 
roundšg_mode
 = 
FE_DOWNWARD
;

10995 
roundšg_mode
 = 
FE_UPWARD
;

11001 
	`js_ecvt1
(
d
, 
n_dig™s
, 
deıt
, 
sign
, 
buf
, 
roundšg_mode
,

11002 
buf_tmp
, (buf_tmp));

11003  
n_dig™s
;

11004 
	}
}

11006 
	$js_fcvt1
(*
buf
, 
buf_size
, 
d
, 
n_dig™s
,

11007 
roundšg_mode
)

11009 
n
;

11010 ià(
roundšg_mode
 !ğ
FE_TONEAREST
)

11011 
	`ã£Œound
(
roundšg_mode
);

11012 
n
 = 
	`¢´štf
(
buf
, 
buf_size
, "%.*f", 
n_dig™s
, 
d
);

11013 ià(
roundšg_mode
 !ğ
FE_TONEAREST
)

11014 
	`ã£Œound
(
FE_TONEAREST
);

11015 
	`as£¹
(
n
 < 
buf_size
);

11016  
n
;

11017 
	}
}

11019 
	$js_fcvt
(*
buf
, 
buf_size
, 
d
, 
n_dig™s
)

11021 
roundšg_mode
;

11022 
roundšg_mode
 = 
FE_TONEAREST
;

11023 #ifdeà
CONFIG_PRINTF_RNDN


11025 
n1
, 
n2
;

11026 
buf1
[
JS_DTOA_BUF_SIZE
];

11027 
buf2
[
JS_DTOA_BUF_SIZE
];

11033 
n1
 = 
	`js_fcvt1
(
buf1
, (buf1), 
d
, 
n_dig™s
 + 1, 
FE_TONEAREST
);

11034 
roundšg_mode
 = 
FE_TONEAREST
;

11036 ià(
buf1
[
n1
 - 1] == '5') {

11037 
n1
 = 
	`js_fcvt1
(
buf1
, (buf1), 
d
, 
n_dig™s
 + 1, 
FE_DOWNWARD
);

11038 
n2
 = 
	`js_fcvt1
(
buf2
, (buf2), 
d
, 
n_dig™s
 + 1, 
FE_UPWARD
);

11039 ià(
n1
 =ğ
n2
 && 
	`memcmp
(
buf1
, 
buf2
,‚1) == 0) {

11041 ià(
buf1
[0] == '-')

11042 
roundšg_mode
 = 
FE_DOWNWARD
;

11044 
roundšg_mode
 = 
FE_UPWARD
;

11049 
	`js_fcvt1
(
buf
, 
buf_size
, 
d
, 
n_dig™s
, 
roundšg_mode
);

11050 
	}
}

11054 
	#JS_DTOA_VAR_FORMAT
 (0 << 0)

	)

11056 
	#JS_DTOA_FIXED_FORMAT
 (1 << 0)

	)

11058 
	#JS_DTOA_FRAC_FORMAT
 (2 << 0)

	)

11060 
	#JS_DTOA_FORCE_EXP
 (1 << 2)

	)

11065 
	$js_dtß1
(*
buf
, 
d
, 
¿dix
, 
n_dig™s
, 
æags
)

11067 *
q
;

11069 ià(!
	`isfš™e
(
d
)) {

11070 ià(
	`i¢ª
(
d
)) {

11071 
	`¡rıy
(
buf
, "NaN");

11073 
q
 = 
buf
;

11074 ià(
d
 < 0)

11075 *
q
++ = '-';

11076 
	`¡rıy
(
q
, "Infinity");

11078 } ià(
æags
 =ğ
JS_DTOA_VAR_FORMAT
) {

11079 
sšt64_t
 
i64
;

11080 
buf1
[70], *
±r
;

11081 
i64
 = (
sšt64_t
)
d
;

11082 ià(
d
 !ğ
i64
 || i64 > 
MAX_SAFE_INTEGER
 || i64 < -MAX_SAFE_INTEGER)

11083 
g’”ic_cÚv
;

11085 
±r
 = 
	`i64tß
(
buf1
 + (buf1), 
i64
, 
¿dix
);

11086 
	`¡rıy
(
buf
, 
±r
);

11088 ià(
d
 == 0.0)

11089 
d
 = 0.0;

11090 ià(
æags
 =ğ
JS_DTOA_FRAC_FORMAT
) {

11091 
	`js_fcvt
(
buf
, 
JS_DTOA_BUF_SIZE
, 
d
, 
n_dig™s
);

11093 
buf1
[
JS_DTOA_BUF_SIZE
];

11094 
sign
, 
deıt
, 
k
, 
n
, 
i
, 
p
, 
n_max
;

11095 
BOOL
 
is_fixed
;

11096 
g’”ic_cÚv
:

11097 
is_fixed
 = ((
æags
 & 3è=ğ
JS_DTOA_FIXED_FORMAT
);

11098 ià(
is_fixed
) {

11099 
n_max
 = 
n_dig™s
;

11101 
n_max
 = 21;

11104 
k
 = 
	`js_ecvt
(
d
, 
n_dig™s
, &
deıt
, &
sign
, 
buf1
, 
is_fixed
);

11105 
n
 = 
deıt
;

11106 
q
 = 
buf
;

11107 ià(
sign
)

11108 *
q
++ = '-';

11109 ià(
æags
 & 
JS_DTOA_FORCE_EXP
)

11110 
fÜû_exp
;

11111 ià(
n
 >ğ1 &&‚ <ğ
n_max
) {

11112 ià(
k
 <ğ
n
) {

11113 
	`memıy
(
q
, 
buf1
, 
k
);

11114 
q
 +ğ
k
;

11115 
i
 = 0; i < (
n
 - 
k
); i++)

11116 *
q
++ = '0';

11117 *
q
 = '\0';

11120 
	`memıy
(
q
, 
buf1
, 
n
);

11121 
q
 +ğ
n
;

11122 *
q
++ = '.';

11123 
i
 = 0; i < (
k
 - 
n
); i++)

11124 *
q
++ = 
buf1
[
n
 + 
i
];

11125 *
q
 = '\0';

11127 } ià(
n
 >= -5 &&‚ <= 0) {

11128 *
q
++ = '0';

11129 *
q
++ = '.';

11130 
i
 = 0; i < -
n
; i++)

11131 *
q
++ = '0';

11132 
	`memıy
(
q
, 
buf1
, 
k
);

11133 
q
 +ğ
k
;

11134 *
q
 = '\0';

11136 
fÜû_exp
:

11138 *
q
++ = 
buf1
[0];

11139 ià(
k
 > 1) {

11140 *
q
++ = '.';

11141 
i
 = 1; i < 
k
; i++)

11142 *
q
++ = 
buf1
[
i
];

11144 *
q
++ = 'e';

11145 
p
 = 
n
 - 1;

11146 ià(
p
 >= 0)

11147 *
q
++ = '+';

11148 
	`¥rštf
(
q
, "%d", 
p
);

11152 
	}
}

11154 
JSV®ue
 
	$js_dtß
(
JSCÚ‹xt
 *
ùx
,

11155 
d
, 
¿dix
, 
n_dig™s
, 
æags
)

11157 
buf
[
JS_DTOA_BUF_SIZE
];

11158 
	`js_dtß1
(
buf
, 
d
, 
¿dix
, 
n_dig™s
, 
æags
);

11159  
	`JS_NewSŒšg
(
ùx
, 
buf
);

11160 
	}
}

11162 
JSV®ue
 
	$JS_ToSŒšgIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
, 
BOOL
 
is_ToPrİ”tyKey
)

11164 
ušt32_t
 
g
;

11165 cÚ¡ *
¡r
;

11166 
buf
[32];

11168 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

11169 
g
) {

11170 
JS_TAG_STRING
:

11171  
	`JS_DupV®ue
(
ùx
, 
v®
);

11172 
JS_TAG_INT
:

11173 
	`¢´štf
(
buf
, (buf), "%d", 
	`JS_VALUE_GET_INT
(
v®
));

11174 
¡r
 = 
buf
;

11175 
Ãw_¡ršg
;

11176 
JS_TAG_BOOL
:

11177  
	`JS_AtomToSŒšg
(
ùx
, 
	`JS_VALUE_GET_BOOL
(
v®
) ?

11178 
JS_ATOM_Œue
 : 
JS_ATOM_çl£
);

11179 
JS_TAG_NULL
:

11180  
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_nuÎ
);

11181 
JS_TAG_UNDEFINED
:

11182  
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_undefšed
);

11183 
JS_TAG_EXCEPTION
:

11184  
JS_EXCEPTION
;

11185 
JS_TAG_OBJECT
:

11187 
JSV®ue
 
v®1
, 
»t
;

11188 
v®1
 = 
	`JS_ToPrim™ive
(
ùx
, 
v®
, 
HINT_STRING
);

11189 ià(
	`JS_IsExû±iÚ
(
v®1
))

11190  
v®1
;

11191 
»t
 = 
	`JS_ToSŒšgIÁ”Çl
(
ùx
, 
v®1
, 
is_ToPrİ”tyKey
);

11192 
	`JS_F»eV®ue
(
ùx
, 
v®1
);

11193  
»t
;

11196 
JS_TAG_FUNCTION_BYTECODE
:

11197 
¡r
 = "[function bytecode]";

11198 
Ãw_¡ršg
;

11199 
JS_TAG_SYMBOL
:

11200 ià(
is_ToPrİ”tyKey
) {

11201  
	`JS_DupV®ue
(
ùx
, 
v®
);

11203  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot convert symbolo string");

11205 
JS_TAG_FLOAT64
:

11206  
	`js_dtß
(
ùx
, 
	`JS_VALUE_GET_FLOAT64
(
v®
), 10, 0,

11207 
JS_DTOA_VAR_FORMAT
);

11208 #ifdeà
CONFIG_BIGNUM


11209 
JS_TAG_BIG_INT
:

11210  
ùx
->
¹
->
bigšt_İs
.
	`to_¡ršg
(ùx, 
v®
);

11211 
JS_TAG_BIG_FLOAT
:

11212  
ùx
->
¹
->
bigæßt_İs
.
	`to_¡ršg
(ùx, 
v®
);

11213 
JS_TAG_BIG_DECIMAL
:

11214  
ùx
->
¹
->
bigdecim®_İs
.
	`to_¡ršg
(ùx, 
v®
);

11217 
¡r
 = "[unsupportedype]";

11218 
Ãw_¡ršg
:

11219  
	`JS_NewSŒšg
(
ùx
, 
¡r
);

11221 
	}
}

11223 
JSV®ue
 
	$JS_ToSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

11225  
	`JS_ToSŒšgIÁ”Çl
(
ùx
, 
v®
, 
FALSE
);

11226 
	}
}

11228 
JSV®ue
 
	$JS_ToSŒšgF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

11230 
JSV®ue
 
»t
;

11231 
»t
 = 
	`JS_ToSŒšg
(
ùx
, 
v®
);

11232 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11233  
»t
;

11234 
	}
}

11236 
JSV®ue
 
	$JS_ToLoÿËSŒšgF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

11238 ià(
	`JS_IsUndefšed
(
v®
è|| 
	`JS_IsNuÎ
(val))

11239  
	`JS_ToSŒšgF»e
(
ùx
, 
v®
);

11240  
	`JS_InvokeF»e
(
ùx
, 
v®
, 
JS_ATOM_toLoÿËSŒšg
, 0, 
NULL
);

11241 
	}
}

11243 
JSV®ue
 
	$JS_ToPrİ”tyKey
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

11245  
	`JS_ToSŒšgIÁ”Çl
(
ùx
, 
v®
, 
TRUE
);

11246 
	}
}

11248 
JSV®ue
 
	$JS_ToSŒšgCheckObjeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

11250 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_TAG
(
v®
);

11251 ià(
g
 =ğ
JS_TAG_NULL
 ||ag =ğ
JS_TAG_UNDEFINED
)

11252  
	`JS_ThrowTy³E¼Ü
(
ùx
, "null or undefined‡re forbidden");

11253  
	`JS_ToSŒšg
(
ùx
, 
v®
);

11254 
	}
}

11256 
JSV®ue
 
	$JS_ToQuÙedSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®1
)

11258 
JSV®ue
 
v®
;

11259 
JSSŒšg
 *
p
;

11260 
i
;

11261 
ušt32_t
 
c
;

11262 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

11263 
buf
[16];

11265 
v®
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
v®1
);

11266 ià(
	`JS_IsExû±iÚ
(
v®
))

11267  
v®
;

11268 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

11270 ià(
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
p
->
Ën
 + 2))

11271 
ç
;

11273 ià(
	`¡ršg_bufãr_putc8
(
b
, '\"'))

11274 
ç
;

11275 
i
 = 0; i < 
p
->
Ën
; ) {

11276 
c
 = 
	`¡ršg_g‘c
(
p
, &
i
);

11277 
c
) {

11279 
c
 = 't';

11280 
quÙe
;

11282 
c
 = 'r';

11283 
quÙe
;

11285 
c
 = 'n';

11286 
quÙe
;

11288 
c
 = 'b';

11289 
quÙe
;

11291 
c
 = 'f';

11292 
quÙe
;

11295 
quÙe
:

11296 ià(
	`¡ršg_bufãr_putc8
(
b
, '\\'))

11297 
ç
;

11298 ià(
	`¡ršg_bufãr_putc8
(
b
, 
c
))

11299 
ç
;

11302 ià(
c
 < 32 || (c >= 0xd800 && c < 0xe000)) {

11303 
	`¢´štf
(
buf
, (buf), "\\u%04x", 
c
);

11304 ià(
	`¡ršg_bufãr_puts8
(
b
, 
buf
))

11305 
ç
;

11307 ià(
	`¡ršg_bufãr_putc
(
b
, 
c
))

11308 
ç
;

11313 ià(
	`¡ršg_bufãr_putc8
(
b
, '\"'))

11314 
ç
;

11315 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11316  
	`¡ršg_bufãr_’d
(
b
);

11317 
ç
:

11318 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11319 
	`¡ršg_bufãr_ä“
(
b
);

11320  
JS_EXCEPTION
;

11321 
	}
}

11323 
__maybe_unu£d
 
	$JS_DumpObjeùH—d”
(
JSRuÁime
 *
¹
)

11325 
	`´štf
("%14s %4s %4s %14s %10s %s\n",

11327 
	}
}

11330 
__maybe_unu£d
 
	$JS_DumpObjeù
(
JSRuÁime
 *
¹
, 
JSObjeù
 *
p
)

11332 
ušt32_t
 
i
;

11333 
©om_buf
[
ATOM_GET_STR_BUF_SIZE
];

11334 
JSSh­e
 *
sh
;

11335 
JSSh­ePrİ”ty
 *
´s
;

11336 
JSPrİ”ty
 *
´
;

11337 
BOOL
 
is_fœ¡
 = 
TRUE
;

11340 
sh
 = 
p
->
sh­e
;

11341 
	`´štf
("%14p %4d ",

11342 (*)
p
,

11343 
p
->
h—d”
.
»f_couÁ
);

11344 ià(
sh
) {

11345 
	`´štf
("%3d%c %14p ",

11346 
sh
->
h—d”
.
»f_couÁ
,

11347 " *"[
sh
->
is_hashed
],

11348 (*)
sh
->
´Ùo
);

11350 
	`´štf
("%3s %14s ", "-", "-");

11352 
	`´štf
("%10s ",

11353 
	`JS_AtomG‘SŒRT
(
¹
, 
©om_buf
, ×tom_buf),„t->
şass_¬¿y
[
p
->
şass_id
].
şass_Çme
));

11354 ià(
p
->
is_exÙic
 &&…->
ç¡_¬¿y
) {

11355 
	`´štf
("[ ");

11356 
i
 = 0; i < 
p
->
u
.
¬¿y
.
couÁ
; i++) {

11357 ià(
i
 != 0)

11358 
	`´štf
(", ");

11359 
p
->
şass_id
) {

11360 
JS_CLASS_ARRAY
:

11361 
JS_CLASS_ARGUMENTS
:

11362 
	`JS_DumpV®ueShÜt
(
¹
, 
p
->
u
.
¬¿y
.u.
v®ues
[
i
]);

11364 
JS_CLASS_UINT8C_ARRAY
 ... 
JS_CLASS_FLOAT64_ARRAY
:

11366 
size
 = 1 << 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

11367 cÚ¡ 
ušt8_t
 *
b
 = 
p
->
u
.
¬¿y
.u.
ušt8_±r
 + 
i
 * 
size
;

11368 
size
-- > 0)

11369 
	`´štf
("%02X", *
b
++);

11374 
	`´štf
(" ] ");

11377 ià(
sh
) {

11378 
	`´štf
("{ ");

11379 
i
 = 0, 
´s
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
; i++,…rs++) {

11380 ià(
´s
->
©om
 !ğ
JS_ATOM_NULL
) {

11381 
´
 = &
p
->
´İ
[
i
];

11382 ià(!
is_fœ¡
)

11383 
	`´štf
(", ");

11384 
	`´štf
("%s: ",

11385 
	`JS_AtomG‘SŒRT
(
¹
, 
©om_buf
, ×tom_buf), 
´s
->
©om
));

11386 ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_GETSET
) {

11387 
	`´štf
("[g‘£ˆ%°%p]", (*)
´
->
u
.
g‘£t
.
g‘‹r
,

11388 (*)
´
->
u
.
g‘£t
.
£‰”
);

11389 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_VARREF
) {

11390 
	`´štf
("[v¬»à%p]", (*)
´
->
u
.
v¬_»f
);

11391 } ià((
´s
->
æags
 & 
JS_PROP_TMASK
è=ğ
JS_PROP_AUTOINIT
) {

11392 
	`´štf
("[autoš™ %°%p]", (*)
´
->
u
.
š™
.u.
»®m
,

11393 (*)
´
->
u
.
š™
.
İaque
);

11395 
	`JS_DumpV®ueShÜt
(
¹
, 
´
->
u
.
v®ue
);

11397 
is_fœ¡
 = 
FALSE
;

11400 
	`´štf
(" }");

11403 ià(
	`js_şass_has_by‹code
(
p
->
şass_id
)) {

11404 
JSFunùiÚBy‹code
 *
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

11405 
JSV¬Ref
 **
v¬_»fs
;

11406 ià(
b
->
şosu»_v¬_couÁ
) {

11407 
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

11408 
	`´štf
(" Closure:");

11409 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

11410 
	`´štf
(" ");

11411 
	`JS_DumpV®ueShÜt
(
¹
, 
v¬_»fs
[
i
]->
v®ue
);

11413 ià(
p
->
u
.
func
.
home_objeù
) {

11414 
	`´štf
(" HomeObject: ");

11415 
	`JS_DumpV®ueShÜt
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
->
u
.
func
.
home_objeù
));

11419 
	`´štf
("\n");

11420 
	}
}

11422 
__maybe_unu£d
 
	$JS_DumpGCObjeù
(
JSRuÁime
 *
¹
, 
JSGCObjeùH—d”
 *
p
)

11424 ià(
p
->
gc_obj_ty³
 =ğ
JS_GC_OBJ_TYPE_JS_OBJECT
) {

11425 
	`JS_DumpObjeù
(
¹
, (
JSObjeù
 *)
p
);

11427 
	`´štf
("%14p %4d ",

11428 (*)
p
,

11429 
p
->
»f_couÁ
);

11430 
p
->
gc_obj_ty³
) {

11431 
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
:

11432 
	`´štf
("[function bytecode]");

11434 
JS_GC_OBJ_TYPE_SHAPE
:

11435 
	`´štf
("[shape]");

11437 
JS_GC_OBJ_TYPE_VAR_REF
:

11438 
	`´štf
("[var_ref]");

11440 
JS_GC_OBJ_TYPE_ASYNC_FUNCTION
:

11441 
	`´štf
("[async_function]");

11443 
JS_GC_OBJ_TYPE_JS_CONTEXT
:

11444 
	`´štf
("[js_context]");

11447 
	`´štf
("[unknowÀ%d]", 
p
->
gc_obj_ty³
);

11450 
	`´štf
("\n");

11452 
	}
}

11454 
__maybe_unu£d
 
	$JS_DumpV®ueShÜt
(
JSRuÁime
 *
¹
,

11455 
JSV®ueCÚ¡
 
v®
)

11457 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

11458 cÚ¡ *
¡r
;

11460 
g
) {

11461 
JS_TAG_INT
:

11462 
	`´štf
("%d", 
	`JS_VALUE_GET_INT
(
v®
));

11464 
JS_TAG_BOOL
:

11465 ià(
	`JS_VALUE_GET_BOOL
(
v®
))

11466 
¡r
 = "true";

11468 
¡r
 = "false";

11469 
´št_¡r
;

11470 
JS_TAG_NULL
:

11471 
¡r
 = "null";

11472 
´št_¡r
;

11473 
JS_TAG_EXCEPTION
:

11474 
¡r
 = "exception";

11475 
´št_¡r
;

11476 
JS_TAG_UNINITIALIZED
:

11477 
¡r
 = "uninitialized";

11478 
´št_¡r
;

11479 
JS_TAG_UNDEFINED
:

11480 
¡r
 = "undefined";

11481 
´št_¡r
:

11482 
	`´štf
("%s", 
¡r
);

11484 
JS_TAG_FLOAT64
:

11485 
	`´štf
("%.14g", 
	`JS_VALUE_GET_FLOAT64
(
v®
));

11487 #ifdeà
CONFIG_BIGNUM


11488 
JS_TAG_BIG_INT
:

11490 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11491 *
¡r
;

11492 
¡r
 = 
	`bf_áß
(
NULL
, &
p
->
num
, 10, 0,

11493 
BF_RNDZ
 | 
BF_FTOA_FORMAT_FRAC
);

11494 
	`´štf
("%¢", 
¡r
);

11495 
	`bf_»®loc
(&
¹
->
bf_ùx
, 
¡r
, 0);

11498 
JS_TAG_BIG_FLOAT
:

11500 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11501 *
¡r
;

11502 
¡r
 = 
	`bf_áß
(
NULL
, &
p
->
num
, 16, 
BF_PREC_INF
,

11503 
BF_RNDZ
 | 
BF_FTOA_FORMAT_FREE
 | 
BF_FTOA_ADD_PREFIX
);

11504 
	`´štf
("%¦", 
¡r
);

11505 
	`bf_ä“
(&
¹
->
bf_ùx
, 
¡r
);

11508 
JS_TAG_BIG_DECIMAL
:

11510 
JSBigDecim®
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11511 *
¡r
;

11512 
¡r
 = 
	`bfdec_áß
(
NULL
, &
p
->
num
, 
BF_PREC_INF
,

11513 
BF_RNDZ
 | 
BF_FTOA_FORMAT_FREE
);

11514 
	`´štf
("%sm", 
¡r
);

11515 
	`bf_ä“
(&
¹
->
bf_ùx
, 
¡r
);

11519 
JS_TAG_STRING
:

11521 
JSSŒšg
 *
p
;

11522 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

11523 
	`JS_DumpSŒšg
(
¹
, 
p
);

11526 
JS_TAG_FUNCTION_BYTECODE
:

11528 
JSFunùiÚBy‹code
 *
b
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11529 
buf
[
ATOM_GET_STR_BUF_SIZE
];

11530 
	`´štf
("[by‹cod%s]", 
	`JS_AtomG‘SŒRT
(
¹
, 
buf
, (buf), 
b
->
func_Çme
));

11533 
JS_TAG_OBJECT
:

11535 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

11536 
JSAtom
 
©om
 = 
¹
->
şass_¬¿y
[
p
->
şass_id
].
şass_Çme
;

11537 
©om_buf
[
ATOM_GET_STR_BUF_SIZE
];

11538 
	`´štf
("[%s %p]",

11539 
	`JS_AtomG‘SŒRT
(
¹
, 
©om_buf
, ×tom_buf), 
©om
), (*)
p
);

11542 
JS_TAG_SYMBOL
:

11544 
JSAtomSŒuù
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11545 
©om_buf
[
ATOM_GET_STR_BUF_SIZE
];

11546 
	`´štf
("Symbol(%s)",

11547 
	`JS_AtomG‘SŒRT
(
¹
, 
©om_buf
, ×tom_buf), 
	`js_g‘_©om_šdex
Ôt, 
p
)));

11550 
JS_TAG_MODULE
:

11551 
	`´štf
("[module]");

11554 
	`´štf
("[unknowÀg %d]", 
g
);

11557 
	}
}

11559 
__maybe_unu£d
 
	$JS_DumpV®ue
(
JSCÚ‹xt
 *
ùx
,

11560 
JSV®ueCÚ¡
 
v®
)

11562 
	`JS_DumpV®ueShÜt
(
ùx
->
¹
, 
v®
);

11563 
	}
}

11565 
__maybe_unu£d
 
	$JS_PrštV®ue
(
JSCÚ‹xt
 *
ùx
,

11566 cÚ¡ *
¡r
,

11567 
JSV®ueCÚ¡
 
v®
)

11569 
	`´štf
("%s=", 
¡r
);

11570 
	`JS_DumpV®ueShÜt
(
ùx
->
¹
, 
v®
);

11571 
	`´štf
("\n");

11572 
	}
}

11575 
	$JS_IsA¼ay
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

11577 
JSObjeù
 *
p
;

11578 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_OBJECT
) {

11579 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

11580 ià(
	`uÆik–y
(
p
->
şass_id
 =ğ
JS_CLASS_PROXY
))

11581  
	`js_´oxy_isA¼ay
(
ùx
, 
v®
);

11583  
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
;

11585  
FALSE
;

11587 
	}
}

11589 
	$js_pow
(
a
, 
b
)

11591 ià(
	`uÆik–y
(!
	`isfš™e
(
b
)è&& 
	`çbs
(
a
) == 1) {

11593  
JS_FLOAT64_NAN
;

11595  
	`pow
(
a
, 
b
);

11597 
	}
}

11599 #ifdeà
CONFIG_BIGNUM


11601 
JSV®ue
 
	$JS_NewBigIÁ64_1
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 
v
)

11603 
JSV®ue
 
v®
;

11604 
bf_t
 *
a
;

11605 
v®
 = 
	`JS_NewBigIÁ
(
ùx
);

11606 ià(
	`JS_IsExû±iÚ
(
v®
))

11607  
v®
;

11608 
a
 = 
	`JS_G‘BigIÁ
(
v®
);

11609 ià(
	`bf_£t_si
(
a
, 
v
)) {

11610 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11611  
	`JS_ThrowOutOfMemÜy
(
ùx
);

11613  
v®
;

11614 
	}
}

11616 
JSV®ue
 
	$JS_NewBigIÁ64
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 
v
)

11618 ià(
	`is_m©h_mode
(
ùx
) &&

11619 
v
 >ğ-
MAX_SAFE_INTEGER
 && v <= MAX_SAFE_INTEGER) {

11620  
	`JS_NewIÁ64
(
ùx
, 
v
);

11622  
	`JS_NewBigIÁ64_1
(
ùx
, 
v
);

11624 
	}
}

11626 
JSV®ue
 
	$JS_NewBigUšt64
(
JSCÚ‹xt
 *
ùx
, 
ušt64_t
 
v
)

11628 
JSV®ue
 
v®
;

11629 ià(
	`is_m©h_mode
(
ùx
è&& 
v
 <ğ
MAX_SAFE_INTEGER
) {

11630 
v®
 = 
	`JS_NewIÁ64
(
ùx
, 
v
);

11632 
bf_t
 *
a
;

11633 
v®
 = 
	`JS_NewBigIÁ
(
ùx
);

11634 ià(
	`JS_IsExû±iÚ
(
v®
))

11635  
v®
;

11636 
a
 = 
	`JS_G‘BigIÁ
(
v®
);

11637 ià(
	`bf_£t_ui
(
a
, 
v
)) {

11638 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11639  
	`JS_ThrowOutOfMemÜy
(
ùx
);

11642  
v®
;

11643 
	}
}

11648 
bf_t
 *
	$JS_ToBigFlßt
(
JSCÚ‹xt
 *
ùx
, 
bf_t
 *
buf
, 
JSV®ueCÚ¡
 
v®
)

11650 
ušt32_t
 
g
;

11651 
bf_t
 *
r
;

11652 
JSBigFlßt
 *
p
;

11654 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

11655 
g
) {

11656 
JS_TAG_INT
:

11657 
JS_TAG_BOOL
:

11658 
JS_TAG_NULL
:

11659 
r
 = 
buf
;

11660 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

11661 ià(
	`bf_£t_si
(
r
, 
	`JS_VALUE_GET_INT
(
v®
)))

11662 
ç
;

11664 
JS_TAG_FLOAT64
:

11665 
r
 = 
buf
;

11666 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

11667 ià(
	`bf_£t_æßt64
(
r
, 
	`JS_VALUE_GET_FLOAT64
(
v®
))) {

11668 
ç
:

11669 
	`bf_d–‘e
(
r
);

11670  
NULL
;

11673 
JS_TAG_BIG_INT
:

11674 
JS_TAG_BIG_FLOAT
:

11675 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11676 
r
 = &
p
->
num
;

11678 
JS_TAG_UNDEFINED
:

11680 
r
 = 
buf
;

11681 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

11682 
	`bf_£t_Çn
(
r
);

11685  
r
;

11686 
	}
}

11689 
bfdec_t
 *
	$JS_ToBigDecim®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

11691 
ušt32_t
 
g
;

11692 
JSBigDecim®
 *
p
;

11693 
bfdec_t
 *
r
;

11695 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

11696 
g
) {

11697 
JS_TAG_BIG_DECIMAL
:

11698 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11699 
r
 = &
p
->
num
;

11702 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigdecimalƒxpected");

11703 
r
 = 
NULL
;

11706  
r
;

11707 
	}
}

11710 
JSV®ue
 
	$JS_SŒšgToBigIÁ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

11712 cÚ¡ *
¡r
, *
p
;

11713 
size_t
 
Ën
;

11714 
æags
;

11716 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
v®
);

11717 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11718 ià(!
¡r
)

11719  
JS_EXCEPTION
;

11720 
p
 = 
¡r
;

11721 
p
 +ğ
	`sk_¥aûs
(p);

11722 ià((
p
 - 
¡r
è=ğ
Ën
) {

11723 
v®
 = 
	`JS_NewBigIÁ64
(
ùx
, 0);

11725 
æags
 = 
ATOD_INT_ONLY
 | 
ATOD_ACCEPT_BIN_OCT
 | 
ATOD_TYPE_BIG_INT
;

11726 ià(
	`is_m©h_mode
(
ùx
))

11727 
æags
 |ğ
ATOD_MODE_BIGINT
;

11728 
v®
 = 
	`js_©of
(
ùx
, 
p
, &p, 0, 
æags
);

11729 
p
 +ğ
	`sk_¥aûs
(p);

11730 ià(!
	`JS_IsExû±iÚ
(
v®
)) {

11731 ià((
p
 - 
¡r
è!ğ
Ën
) {

11732 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11733 
v®
 = 
JS_NAN
;

11737 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

11738  
v®
;

11739 
	}
}

11741 
JSV®ue
 
	$JS_SŒšgToBigIÁE¼
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

11743 
v®
 = 
	`JS_SŒšgToBigIÁ
(
ùx
, val);

11744 ià(
	`JS_VALUE_IS_NAN
(
v®
))

11745  
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "invalid bigint†iteral");

11746  
v®
;

11747 
	}
}

11751 
bf_t
 *
	$JS_ToBigIÁF»e
(
JSCÚ‹xt
 *
ùx
, 
bf_t
 *
buf
, 
JSV®ue
 
v®
)

11753 
ušt32_t
 
g
;

11754 
bf_t
 *
r
;

11755 
JSBigFlßt
 *
p
;

11757 
»do
:

11758 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

11759 
g
) {

11760 
JS_TAG_INT
:

11761 
JS_TAG_NULL
:

11762 
JS_TAG_UNDEFINED
:

11763 ià(!
	`is_m©h_mode
(
ùx
))

11764 
ç
;

11766 
JS_TAG_BOOL
:

11767 
r
 = 
buf
;

11768 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

11769 
	`bf_£t_si
(
r
, 
	`JS_VALUE_GET_INT
(
v®
));

11771 
JS_TAG_FLOAT64
:

11773 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

11774 ià(!
	`is_m©h_mode
(
ùx
))

11775 
ç
;

11776 ià(!
	`isfš™e
(
d
))

11777 
ç
;

11778 
r
 = 
buf
;

11779 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

11780 
d
 = 
	`Œunc
(d);

11781 
	`bf_£t_æßt64
(
r
, 
d
);

11784 
JS_TAG_BIG_INT
:

11785 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11786 
r
 = &
p
->
num
;

11788 
JS_TAG_BIG_FLOAT
:

11789 ià(!
	`is_m©h_mode
(
ùx
))

11790 
ç
;

11791 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11792 ià(!
	`bf_is_fš™e
(&
p
->
num
))

11793 
ç
;

11794 
r
 = 
buf
;

11795 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

11796 
	`bf_£t
(
r
, &
p
->
num
);

11797 
	`bf_ršt
(
r
, 
BF_RNDZ
);

11798 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11800 
JS_TAG_STRING
:

11801 
v®
 = 
	`JS_SŒšgToBigIÁE¼
(
ùx
, val);

11802 ià(
	`JS_IsExû±iÚ
(
v®
))

11803  
NULL
;

11804 
»do
;

11805 
JS_TAG_OBJECT
:

11806 
v®
 = 
	`JS_ToPrim™iveF»e
(
ùx
, v®, 
HINT_NUMBER
);

11807 ià(
	`JS_IsExû±iÚ
(
v®
))

11808  
NULL
;

11809 
»do
;

11811 
ç
:

11812 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11813 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto bigint");

11814  
NULL
;

11816  
r
;

11817 
	}
}

11819 
bf_t
 *
	$JS_ToBigIÁ
(
JSCÚ‹xt
 *
ùx
, 
bf_t
 *
buf
, 
JSV®ueCÚ¡
 
v®
)

11821  
	`JS_ToBigIÁF»e
(
ùx
, 
buf
, 
	`JS_DupV®ue
(ùx, 
v®
));

11822 
	}
}

11824 
__maybe_unu£d
 
JSV®ue
 
	$JS_ToBigIÁV®ueF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

11826 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_BIG_INT
) {

11827  
v®
;

11829 
bf_t
 
a_s
, *
a
, *
r
;

11830 
»t
;

11831 
JSV®ue
 
»s
;

11833 
»s
 = 
	`JS_NewBigIÁ
(
ùx
);

11834 ià(
	`JS_IsExû±iÚ
(
»s
))

11835  
JS_EXCEPTION
;

11836 
a
 = 
	`JS_ToBigIÁF»e
(
ùx
, &
a_s
, 
v®
);

11837 ià(!
a
) {

11838 
	`JS_F»eV®ue
(
ùx
, 
»s
);

11839  
JS_EXCEPTION
;

11841 
r
 = 
	`JS_G‘BigIÁ
(
»s
);

11842 
»t
 = 
	`bf_£t
(
r
, 
a
);

11843 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

11844 ià(
»t
) {

11845 
	`JS_F»eV®ue
(
ùx
, 
»s
);

11846  
	`JS_ThrowOutOfMemÜy
(
ùx
);

11848  
	`JS_Com·ùBigIÁ
(
ùx
, 
»s
);

11850 
	}
}

11853 
	$JS_F»eBigIÁ
(
JSCÚ‹xt
 *
ùx
, 
bf_t
 *
a
, bf_ˆ*
buf
)

11855 ià(
a
 =ğ
buf
) {

11856 
	`bf_d–‘e
(
a
);

11858 
JSBigFlßt
 *
p
 = (JSBigFlßˆ*)((
ušt8_t
 *)
a
 -

11859 
	`off£tof
(
JSBigFlßt
, 
num
));

11860 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_BIG_FLOAT
, 
p
));

11862 
	}
}

11865 
	$JS_ToBigIÁ64F»e
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 *
´es
, 
JSV®ue
 
v®
)

11867 
bf_t
 
a_s
, *
a
;

11869 
a
 = 
	`JS_ToBigIÁF»e
(
ùx
, &
a_s
, 
v®
);

11870 ià(!
a
) {

11871 *
´es
 = 0;

11874 
	`bf_g‘_št64
(
´es
, 
a
, 
BF_GET_INT_MOD
);

11875 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

11877 
	}
}

11879 
	$JS_ToBigIÁ64
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
)

11881  
	`JS_ToBigIÁ64F»e
(
ùx
, 
´es
, 
	`JS_DupV®ue
(ùx, 
v®
));

11882 
	}
}

11884 
JSBigFlßt
 *
	$js_Ãw_bf
(
JSCÚ‹xt
 *
ùx
)

11886 
JSBigFlßt
 *
p
;

11887 
p
 = 
	`js_m®loc
(
ùx
, (*p));

11888 ià(!
p
)

11889  
NULL
;

11890 
p
->
h—d”
.
»f_couÁ
 = 1;

11891 
	`bf_š™
(
ùx
->
bf_ùx
, &
p
->
num
);

11892  
p
;

11893 
	}
}

11895 
JSV®ue
 
	$JS_NewBigFlßt
(
JSCÚ‹xt
 *
ùx
)

11897 
JSBigFlßt
 *
p
;

11898 
p
 = 
	`js_m®loc
(
ùx
, (*p));

11899 ià(!
p
)

11900  
JS_EXCEPTION
;

11901 
p
->
h—d”
.
»f_couÁ
 = 1;

11902 
	`bf_š™
(
ùx
->
bf_ùx
, &
p
->
num
);

11903  
	`JS_MKPTR
(
JS_TAG_BIG_FLOAT
, 
p
);

11904 
	}
}

11906 
JSV®ue
 
	$JS_NewBigDecim®
(
JSCÚ‹xt
 *
ùx
)

11908 
JSBigDecim®
 *
p
;

11909 
p
 = 
	`js_m®loc
(
ùx
, (*p));

11910 ià(!
p
)

11911  
JS_EXCEPTION
;

11912 
p
->
h—d”
.
»f_couÁ
 = 1;

11913 
	`bfdec_š™
(
ùx
->
bf_ùx
, &
p
->
num
);

11914  
	`JS_MKPTR
(
JS_TAG_BIG_DECIMAL
, 
p
);

11915 
	}
}

11917 
JSV®ue
 
	$JS_NewBigIÁ
(
JSCÚ‹xt
 *
ùx
)

11919 
JSBigFlßt
 *
p
;

11920 
p
 = 
	`js_m®loc
(
ùx
, (*p));

11921 ià(!
p
)

11922  
JS_EXCEPTION
;

11923 
p
->
h—d”
.
»f_couÁ
 = 1;

11924 
	`bf_š™
(
ùx
->
bf_ùx
, &
p
->
num
);

11925  
	`JS_MKPTR
(
JS_TAG_BIG_INT
, 
p
);

11926 
	}
}

11928 
JSV®ue
 
	$JS_Com·ùBigIÁ1
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
,

11929 
BOOL
 
cÚv”t_to_§ã_š‹g”
)

11931 
št64_t
 
v
;

11932 
bf_t
 *
a
;

11934 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_BIG_INT
)

11935  
v®
;

11936 
a
 = 
	`JS_G‘BigIÁ
(
v®
);

11937 ià(
cÚv”t_to_§ã_š‹g”
 && 
	`bf_g‘_št64
(&
v
, 
a
, 0) == 0 &&

11938 
v
 >ğ-
MAX_SAFE_INTEGER
 && v <= MAX_SAFE_INTEGER) {

11939 
	`JS_F»eV®ue
(
ùx
, 
v®
);

11940  
	`JS_NewIÁ64
(
ùx
, 
v
);

11941 } ià(
a
->
ex²
 =ğ
BF_EXP_ZERO
 &&‡->
sign
) {

11942 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

11943 
	`as£¹
(
p
->
h—d”
.
»f_couÁ
 == 1);

11944 
a
->
sign
 = 0;

11946  
v®
;

11947 
	}
}

11953 
JSV®ue
 
	$JS_Com·ùBigIÁ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

11955  
	`JS_Com·ùBigIÁ1
(
ùx
, 
v®
, 
	`is_m©h_mode
(ctx));

11956 
	}
}

11960 cÚ¡ 
	gjs_ov”lßdabË_İ”©Ü_Çmes
[
JS_OVOP_COUNT
][4] = {

11982 
	$g‘_ovİ_äom_İcode
(
OPCodeEnum
 
İ
)

11984 
İ
) {

11985 
OP_add
:

11986  
JS_OVOP_ADD
;

11987 
OP_sub
:

11988  
JS_OVOP_SUB
;

11989 
OP_mul
:

11990  
JS_OVOP_MUL
;

11991 
OP_div
:

11992  
JS_OVOP_DIV
;

11993 
OP_mod
:

11994 
OP_m©h_mod
:

11995  
JS_OVOP_MOD
;

11996 
OP_pow
:

11997  
JS_OVOP_POW
;

11998 
OP_Ü
:

11999  
JS_OVOP_OR
;

12000 
OP_ªd
:

12001  
JS_OVOP_AND
;

12002 
OP_xÜ
:

12003  
JS_OVOP_XOR
;

12004 
OP_shl
:

12005  
JS_OVOP_SHL
;

12006 
OP_§r
:

12007  
JS_OVOP_SAR
;

12008 
OP_shr
:

12009  
JS_OVOP_SHR
;

12010 
OP_eq
:

12011 
OP_Ãq
:

12012  
JS_OVOP_EQ
;

12013 
OP_É
:

12014 
OP_Ée
:

12015 
OP_gt
:

12016 
OP_g‹
:

12017  
JS_OVOP_LESS
;

12018 
OP_¶us
:

12019  
JS_OVOP_POS
;

12020 
OP_Ãg
:

12021  
JS_OVOP_NEG
;

12022 
OP_šc
:

12023  
JS_OVOP_INC
;

12024 
OP_dec
:

12025  
JS_OVOP_DEC
;

12027 
	`abÜt
();

12029 
	}
}

12032 
JSObjeù
 *
	$fšd_bš¬y_İ
(
JSBš¬yO³¿tÜDef
 *
def
,

12033 
ušt32_t
 
İ”©Ü_šdex
,

12034 
JSOv”lßdabËO³¿tÜEnum
 
İ
)

12036 
JSBš¬yO³¿tÜDefEÁry
 *
’t
;

12037 
i
;

12038 
i
 = 0; i < 
def
->
couÁ
; i++) {

12039 
’t
 = &
def
->
b
[
i
];

12040 ià(
’t
->
İ”©Ü_šdex
 == operator_index)

12041  
’t
->
İs
[
İ
];

12043  
NULL
;

12044 
	}
}

12048 
__exû±iÚ
 
	$js_ÿÎ_bš¬y_İ_çÎback
(
JSCÚ‹xt
 *
ùx
,

12049 
JSV®ue
 *
´‘
,

12050 
JSV®ueCÚ¡
 
İ1
,

12051 
JSV®ueCÚ¡
 
İ2
,

12052 
OPCodeEnum
 
İ
,

12053 
BOOL
 
is_num”ic
,

12054 
hšt
)

12056 
JSV®ue
 
İ£t1_obj
, 
İ£t2_obj
, 
m‘hod
, 
»t
, 
Ãw_İ1
, 
Ãw_İ2
;

12057 
JSO³¿tÜS‘D©a
 *
İ£t1
, *
İ£t2
;

12058 
JSOv”lßdabËO³¿tÜEnum
 
ovİ
;

12059 
JSObjeù
 *
p
;

12060 
JSV®ueCÚ¡
 
¬gs
[2];

12062 ià(!
ùx
->
®low_İ”©Ü_ov”lßdšg
)

12065 
İ£t2_obj
 = 
JS_UNDEFINED
;

12066 
İ£t1_obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
İ1
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
);

12067 ià(
	`JS_IsExû±iÚ
(
İ£t1_obj
))

12068 
exû±iÚ
;

12069 ià(
	`JS_IsUndefšed
(
İ£t1_obj
))

12071 
İ£t1
 = 
	`JS_G‘O·que2
(
ùx
, 
İ£t1_obj
, 
JS_CLASS_OPERATOR_SET
);

12072 ià(!
İ£t1
)

12073 
exû±iÚ
;

12075 
İ£t2_obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
İ2
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
);

12076 ià(
	`JS_IsExû±iÚ
(
İ£t2_obj
))

12077 
exû±iÚ
;

12078 ià(
	`JS_IsUndefšed
(
İ£t2_obj
)) {

12079 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12082 
İ£t2
 = 
	`JS_G‘O·que2
(
ùx
, 
İ£t2_obj
, 
JS_CLASS_OPERATOR_SET
);

12083 ià(!
İ£t2
)

12084 
exû±iÚ
;

12086 ià(
İ£t1
->
is_´im™ive
 && 
İ£t2
->is_primitive) {

12087 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12088 
	`JS_F»eV®ue
(
ùx
, 
İ£t2_obj
);

12092 
ovİ
 = 
	`g‘_ovİ_äom_İcode
(
İ
);

12094 ià(
İ£t1
->
İ”©Ü_couÁ”
 =ğ
İ£t2
->operator_counter) {

12095 
p
 = 
İ£t1
->
£lf_İs
[
ovİ
];

12096 } ià(
İ£t1
->
İ”©Ü_couÁ”
 > 
İ£t2
->operator_counter) {

12097 
p
 = 
	`fšd_bš¬y_İ
(&
İ£t1
->
Ëá
, 
İ£t2
->
İ”©Ü_couÁ”
, 
ovİ
);

12099 
p
 = 
	`fšd_bš¬y_İ
(&
İ£t2
->
right
, 
İ£t1
->
İ”©Ü_couÁ”
, 
ovİ
);

12101 ià(!
p
) {

12102 
	`JS_ThrowTy³E¼Ü
(
ùx
, "operator %s:‚o function defined",

12103 
js_ov”lßdabË_İ”©Ü_Çmes
[
ovİ
]);

12104 
exû±iÚ
;

12107 ià(
İ£t1
->
is_´im™ive
) {

12108 ià(
is_num”ic
) {

12109 
Ãw_İ1
 = 
	`JS_ToNum”ic
(
ùx
, 
İ1
);

12111 
Ãw_İ1
 = 
	`JS_ToPrim™ive
(
ùx
, 
İ1
, 
hšt
);

12113 ià(
	`JS_IsExû±iÚ
(
Ãw_İ1
))

12114 
exû±iÚ
;

12116 
Ãw_İ1
 = 
	`JS_DupV®ue
(
ùx
, 
İ1
);

12119 ià(
İ£t2
->
is_´im™ive
) {

12120 ià(
is_num”ic
) {

12121 
Ãw_İ2
 = 
	`JS_ToNum”ic
(
ùx
, 
İ2
);

12123 
Ãw_İ2
 = 
	`JS_ToPrim™ive
(
ùx
, 
İ2
, 
hšt
);

12125 ià(
	`JS_IsExû±iÚ
(
Ãw_İ2
)) {

12126 
	`JS_F»eV®ue
(
ùx
, 
Ãw_İ1
);

12127 
exû±iÚ
;

12130 
Ãw_İ2
 = 
	`JS_DupV®ue
(
ùx
, 
İ2
);

12136 
m‘hod
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
));

12137 ià(
ovİ
 =ğ
JS_OVOP_LESS
 && (
İ
 =ğ
OP_Ée
 || o°=ğ
OP_gt
)) {

12138 
¬gs
[0] = 
Ãw_İ2
;

12139 
¬gs
[1] = 
Ãw_İ1
;

12141 
¬gs
[0] = 
Ãw_İ1
;

12142 
¬gs
[1] = 
Ãw_İ2
;

12144 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
JS_UNDEFINED
, 2, 
¬gs
);

12145 
	`JS_F»eV®ue
(
ùx
, 
Ãw_İ1
);

12146 
	`JS_F»eV®ue
(
ùx
, 
Ãw_İ2
);

12147 ià(
	`JS_IsExû±iÚ
(
»t
))

12148 
exû±iÚ
;

12149 ià(
ovİ
 =ğ
JS_OVOP_EQ
) {

12150 
BOOL
 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

12151 ià(
İ
 =ğ
OP_Ãq
)

12152 
»s
 ^= 1;

12153 
»t
 = 
	`JS_NewBoŞ
(
ùx
, 
»s
);

12154 } ià(
ovİ
 =ğ
JS_OVOP_LESS
) {

12155 ià(
	`JS_IsUndefšed
(
»t
)) {

12156 
»t
 = 
JS_FALSE
;

12158 
BOOL
 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

12159 ià(
İ
 =ğ
OP_Ée
 || o°=ğ
OP_g‹
)

12160 
»s
 ^= 1;

12161 
»t
 = 
	`JS_NewBoŞ
(
ùx
, 
»s
);

12164 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12165 
	`JS_F»eV®ue
(
ùx
, 
İ£t2_obj
);

12166 *
´‘
 = 
»t
;

12168 
exû±iÚ
:

12169 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12170 
	`JS_F»eV®ue
(
ùx
, 
İ£t2_obj
);

12171 *
´‘
 = 
JS_UNDEFINED
;

12173 
	}
}

12177 
__exû±iÚ
 
	$js_ÿÎ_bš¬y_İ_sim¶e
(
JSCÚ‹xt
 *
ùx
,

12178 
JSV®ue
 *
´‘
,

12179 
JSV®ueCÚ¡
 
obj
,

12180 
JSV®ueCÚ¡
 
İ1
,

12181 
JSV®ueCÚ¡
 
İ2
,

12182 
OPCodeEnum
 
İ
)

12184 
JSV®ue
 
İ£t1_obj
, 
m‘hod
, 
»t
, 
Ãw_İ1
, 
Ãw_İ2
;

12185 
JSO³¿tÜS‘D©a
 *
İ£t1
;

12186 
JSOv”lßdabËO³¿tÜEnum
 
ovİ
;

12187 
JSObjeù
 *
p
;

12188 
JSV®ueCÚ¡
 
¬gs
[2];

12190 
İ£t1_obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
);

12191 ià(
	`JS_IsExû±iÚ
(
İ£t1_obj
))

12192 
exû±iÚ
;

12193 ià(
	`JS_IsUndefšed
(
İ£t1_obj
))

12195 
İ£t1
 = 
	`JS_G‘O·que2
(
ùx
, 
İ£t1_obj
, 
JS_CLASS_OPERATOR_SET
);

12196 ià(!
İ£t1
)

12197 
exû±iÚ
;

12198 
ovİ
 = 
	`g‘_ovİ_äom_İcode
(
İ
);

12200 
p
 = 
İ£t1
->
£lf_İs
[
ovİ
];

12201 ià(!
p
) {

12202 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12206 
Ãw_İ1
 = 
	`JS_ToNum”ic
(
ùx
, 
İ1
);

12207 ià(
	`JS_IsExû±iÚ
(
Ãw_İ1
))

12208 
exû±iÚ
;

12209 
Ãw_İ2
 = 
	`JS_ToNum”ic
(
ùx
, 
İ2
);

12210 ià(
	`JS_IsExû±iÚ
(
Ãw_İ2
)) {

12211 
	`JS_F»eV®ue
(
ùx
, 
Ãw_İ1
);

12212 
exû±iÚ
;

12215 
m‘hod
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
));

12216 
¬gs
[0] = 
Ãw_İ1
;

12217 
¬gs
[1] = 
Ãw_İ2
;

12218 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
JS_UNDEFINED
, 2, 
¬gs
);

12219 
	`JS_F»eV®ue
(
ùx
, 
Ãw_İ1
);

12220 
	`JS_F»eV®ue
(
ùx
, 
Ãw_İ2
);

12221 ià(
	`JS_IsExû±iÚ
(
»t
))

12222 
exû±iÚ
;

12223 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12224 *
´‘
 = 
»t
;

12226 
exû±iÚ
:

12227 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12228 *
´‘
 = 
JS_UNDEFINED
;

12230 
	}
}

12234 
__exû±iÚ
 
	$js_ÿÎ_uÇry_İ_çÎback
(
JSCÚ‹xt
 *
ùx
,

12235 
JSV®ue
 *
´‘
,

12236 
JSV®ueCÚ¡
 
İ1
,

12237 
OPCodeEnum
 
İ
)

12239 
JSV®ue
 
İ£t1_obj
, 
m‘hod
, 
»t
;

12240 
JSO³¿tÜS‘D©a
 *
İ£t1
;

12241 
JSOv”lßdabËO³¿tÜEnum
 
ovİ
;

12242 
JSObjeù
 *
p
;

12244 ià(!
ùx
->
®low_İ”©Ü_ov”lßdšg
)

12247 
İ£t1_obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
İ1
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
);

12248 ià(
	`JS_IsExû±iÚ
(
İ£t1_obj
))

12249 
exû±iÚ
;

12250 ià(
	`JS_IsUndefšed
(
İ£t1_obj
))

12252 
İ£t1
 = 
	`JS_G‘O·que2
(
ùx
, 
İ£t1_obj
, 
JS_CLASS_OPERATOR_SET
);

12253 ià(!
İ£t1
)

12254 
exû±iÚ
;

12255 ià(
İ£t1
->
is_´im™ive
) {

12256 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12260 
ovİ
 = 
	`g‘_ovİ_äom_İcode
(
İ
);

12262 
p
 = 
İ£t1
->
£lf_İs
[
ovİ
];

12263 ià(!
p
) {

12264 
	`JS_ThrowTy³E¼Ü
(
ùx
, "no overloaded operator %s",

12265 
js_ov”lßdabË_İ”©Ü_Çmes
[
ovİ
]);

12266 
exû±iÚ
;

12268 
m‘hod
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
));

12269 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
JS_UNDEFINED
, 1, &
İ1
);

12270 ià(
	`JS_IsExû±iÚ
(
»t
))

12271 
exû±iÚ
;

12272 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12273 *
´‘
 = 
»t
;

12275 
exû±iÚ
:

12276 
	`JS_F»eV®ue
(
ùx
, 
İ£t1_obj
);

12277 *
´‘
 = 
JS_UNDEFINED
;

12279 
	}
}

12281 
JSV®ue
 
	$throw_bf_exû±iÚ
(
JSCÚ‹xt
 *
ùx
, 
¡©us
)

12283 cÚ¡ *
¡r
;

12284 ià(
¡©us
 & 
BF_ST_MEM_ERROR
)

12285  
	`JS_ThrowOutOfMemÜy
(
ùx
);

12286 ià(
¡©us
 & 
BF_ST_DIVIDE_ZERO
) {

12287 
¡r
 = "division by zero";

12288 } ià(
¡©us
 & 
BF_ST_INVALID_OP
) {

12289 
¡r
 = "invalid operation";

12291 
¡r
 = "integer overflow";

12293  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "%s", 
¡r
);

12294 
	}
}

12296 
	$js_uÇry_¬™h_bigšt
(
JSCÚ‹xt
 *
ùx
,

12297 
JSV®ue
 *
´es
, 
OPCodeEnum
 
İ
, JSV®u
İ1
)

12299 
bf_t
 
a_s
, *
r
, *
a
;

12300 
»t
, 
v
;

12301 
JSV®ue
 
»s
;

12303 ià(
İ
 =ğ
OP_¶us
 && !
	`is_m©h_mode
(
ùx
)) {

12304 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigint‡rgument with unary +");

12305 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12308 
»s
 = 
	`JS_NewBigIÁ
(
ùx
);

12309 ià(
	`JS_IsExû±iÚ
(
»s
)) {

12310 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12313 
r
 = 
	`JS_G‘BigIÁ
(
»s
);

12314 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
İ1
);

12315 
»t
 = 0;

12316 
İ
) {

12317 
OP_šc
:

12318 
OP_dec
:

12319 
v
 = 2 * (
İ
 - 
OP_dec
) - 1;

12320 
»t
 = 
	`bf_add_si
(
r
, 
a
, 
v
, 
BF_PREC_INF
, 
BF_RNDZ
);

12322 
OP_¶us
:

12323 
»t
 = 
	`bf_£t
(
r
, 
a
);

12325 
OP_Ãg
:

12326 
»t
 = 
	`bf_£t
(
r
, 
a
);

12327 
	`bf_Ãg
(
r
);

12329 
OP_nÙ
:

12330 
»t
 = 
	`bf_add_si
(
r
, 
a
, 1, 
BF_PREC_INF
, 
BF_RNDZ
);

12331 
	`bf_Ãg
(
r
);

12334 
	`abÜt
();

12336 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

12337 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12338 ià(
	`uÆik–y
(
»t
)) {

12339 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12340 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12343 
»s
 = 
	`JS_Com·ùBigIÁ
(
ùx
,„es);

12344 *
´es
 = 
»s
;

12346 
	}
}

12348 
	$js_uÇry_¬™h_bigæßt
(
JSCÚ‹xt
 *
ùx
,

12349 
JSV®ue
 *
´es
, 
OPCodeEnum
 
İ
, JSV®u
İ1
)

12351 
bf_t
 
a_s
, *
r
, *
a
;

12352 
»t
, 
v
;

12353 
JSV®ue
 
»s
;

12355 ià(
İ
 =ğ
OP_¶us
 && !
	`is_m©h_mode
(
ùx
)) {

12356 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigfloat‡rgument with unary +");

12357 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12361 
»s
 = 
	`JS_NewBigFlßt
(
ùx
);

12362 ià(
	`JS_IsExû±iÚ
(
»s
)) {

12363 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12366 
r
 = 
	`JS_G‘BigFlßt
(
»s
);

12367 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

12368 
»t
 = 0;

12369 
İ
) {

12370 
OP_šc
:

12371 
OP_dec
:

12372 
v
 = 2 * (
İ
 - 
OP_dec
) - 1;

12373 
»t
 = 
	`bf_add_si
(
r
, 
a
, 
v
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

12375 
OP_¶us
:

12376 
»t
 = 
	`bf_£t
(
r
, 
a
);

12378 
OP_Ãg
:

12379 
»t
 = 
	`bf_£t
(
r
, 
a
);

12380 
	`bf_Ãg
(
r
);

12383 
	`abÜt
();

12385 ià(
a
 =ğ&
a_s
)

12386 
	`bf_d–‘e
(
a
);

12387 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12388 ià(
	`uÆik–y
(
»t
 & 
BF_ST_MEM_ERROR
)) {

12389 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12390 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12393 *
´es
 = 
»s
;

12395 
	}
}

12397 
	$js_uÇry_¬™h_bigdecim®
(
JSCÚ‹xt
 *
ùx
,

12398 
JSV®ue
 *
´es
, 
OPCodeEnum
 
İ
, JSV®u
İ1
)

12400 
bfdec_t
 *
r
, *
a
;

12401 
»t
, 
v
;

12402 
JSV®ue
 
»s
;

12404 ià(
İ
 =ğ
OP_¶us
 && !
	`is_m©h_mode
(
ùx
)) {

12405 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigdecimal‡rgument with unary +");

12406 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12410 
»s
 = 
	`JS_NewBigDecim®
(
ùx
);

12411 ià(
	`JS_IsExû±iÚ
(
»s
)) {

12412 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12415 
r
 = 
	`JS_G‘BigDecim®
(
»s
);

12416 
a
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ1
);

12417 
»t
 = 0;

12418 
İ
) {

12419 
OP_šc
:

12420 
OP_dec
:

12421 
v
 = 2 * (
İ
 - 
OP_dec
) - 1;

12422 
»t
 = 
	`bfdec_add_si
(
r
, 
a
, 
v
, 
BF_PREC_INF
, 
BF_RNDZ
);

12424 
OP_¶us
:

12425 
»t
 = 
	`bfdec_£t
(
r
, 
a
);

12427 
OP_Ãg
:

12428 
»t
 = 
	`bfdec_£t
(
r
, 
a
);

12429 
	`bfdec_Ãg
(
r
);

12432 
	`abÜt
();

12434 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12435 ià(
	`uÆik–y
(
»t
)) {

12436 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12437 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12440 *
´es
 = 
»s
;

12442 
	}
}

12444 
no_šlše
 
__exû±iÚ
 
	$js_uÇry_¬™h_¦ow
(
JSCÚ‹xt
 *
ùx
,

12445 
JSV®ue
 *
¥
,

12446 
OPCodeEnum
 
İ
)

12448 
JSV®ue
 
İ1
, 
v®
;

12449 
v
, 
»t
;

12450 
ušt32_t
 
g
;

12452 
İ1
 = 
¥
[-1];

12454 ià(
	`JS_TAG_IS_FLOAT64
(
	`JS_VALUE_GET_TAG
(
İ1
)))

12455 
hªdË_æßt64
;

12456 ià(
	`JS_IsObjeù
(
İ1
)) {

12457 
»t
 = 
	`js_ÿÎ_uÇry_İ_çÎback
(
ùx
, &
v®
, 
İ1
, 
İ
);

12458 ià(
»t
 < 0)

12460 ià(
»t
) {

12461 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12462 
¥
[-1] = 
v®
;

12467 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

12468 ià(
	`JS_IsExû±iÚ
(
İ1
))

12469 
exû±iÚ
;

12470 
g
 = 
	`JS_VALUE_GET_TAG
(
İ1
);

12471 
g
) {

12472 
JS_TAG_INT
:

12474 
št64_t
 
v64
;

12475 
v64
 = 
	`JS_VALUE_GET_INT
(
İ1
);

12476 
İ
) {

12477 
OP_šc
:

12478 
OP_dec
:

12479 
v
 = 2 * (
İ
 - 
OP_dec
) - 1;

12480 
v64
 +ğ
v
;

12482 
OP_¶us
:

12484 
OP_Ãg
:

12485 ià(
v64
 == 0) {

12486 
¥
[-1] = 
	`__JS_NewFlßt64
(
ùx
, -0.0);

12489 
v64
 = -v64;

12493 
	`abÜt
();

12495 
¥
[-1] = 
	`JS_NewIÁ64
(
ùx
, 
v64
);

12498 
JS_TAG_BIG_INT
:

12499 
hªdË_bigšt
:

12500 ià(
ùx
->
¹
->
bigšt_İs
.
	`uÇry_¬™h
(ùx, 
¥
 - 1, 
İ
, 
İ1
))

12501 
exû±iÚ
;

12503 
JS_TAG_BIG_FLOAT
:

12504 ià(
ùx
->
¹
->
bigæßt_İs
.
	`uÇry_¬™h
(ùx, 
¥
 - 1, 
İ
, 
İ1
))

12505 
exû±iÚ
;

12507 
JS_TAG_BIG_DECIMAL
:

12508 ià(
ùx
->
¹
->
bigdecim®_İs
.
	`uÇry_¬™h
(ùx, 
¥
 - 1, 
İ
, 
İ1
))

12509 
exû±iÚ
;

12512 
hªdË_æßt64
:

12514 
d
;

12515 ià(
	`is_m©h_mode
(
ùx
))

12516 
hªdË_bigšt
;

12517 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
);

12518 
İ
) {

12519 
OP_šc
:

12520 
OP_dec
:

12521 
v
 = 2 * (
İ
 - 
OP_dec
) - 1;

12522 
d
 +ğ
v
;

12524 
OP_¶us
:

12526 
OP_Ãg
:

12527 
d
 = -d;

12530 
	`abÜt
();

12532 
¥
[-1] = 
	`__JS_NewFlßt64
(
ùx
, 
d
);

12537 
exû±iÚ
:

12538 
¥
[-1] = 
JS_UNDEFINED
;

12540 
	}
}

12542 
__exû±iÚ
 
	$js_po¡_šc_¦ow
(
JSCÚ‹xt
 *
ùx
,

12543 
JSV®ue
 *
¥
, 
OPCodeEnum
 
İ
)

12545 
JSV®ue
 
İ1
;

12548 
İ1
 = 
¥
[-1];

12549 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

12550 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

12551 
¥
[-1] = 
JS_UNDEFINED
;

12554 
¥
[-1] = 
İ1
;

12555 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, 
İ1
);

12556  
	`js_uÇry_¬™h_¦ow
(
ùx
, 
¥
 + 1, 
İ
 - 
OP_po¡_dec
 + 
OP_dec
);

12557 
	}
}

12559 
no_šlše
 
	$js_nÙ_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

12561 
JSV®ue
 
İ1
, 
v®
;

12562 
»t
;

12564 
İ1
 = 
¥
[-1];

12565 ià(
	`JS_IsObjeù
(
İ1
)) {

12566 
»t
 = 
	`js_ÿÎ_uÇry_İ_çÎback
(
ùx
, &
v®
, 
İ1
, 
OP_nÙ
);

12567 ià(
»t
 < 0)

12569 ià(
»t
) {

12570 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12571 
¥
[-1] = 
v®
;

12576 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

12577 ià(
	`JS_IsExû±iÚ
(
İ1
))

12578 
exû±iÚ
;

12579 ià(
	`is_m©h_mode
(
ùx
è|| 
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_BIG_INT
) {

12580 ià(
ùx
->
¹
->
bigšt_İs
.
	`uÇry_¬™h
(ùx, 
¥
 - 1, 
OP_nÙ
, 
İ1
))

12581 
exû±iÚ
;

12583 
št32_t
 
v1
;

12584 ià(
	`uÆik–y
(
	`JS_ToIÁ32F»e
(
ùx
, &
v1
, 
İ1
)))

12585 
exû±iÚ
;

12586 
¥
[-1] = 
	`JS_NewIÁ32
(
ùx
, ~
v1
);

12589 
exû±iÚ
:

12590 
¥
[-1] = 
JS_UNDEFINED
;

12592 
	}
}

12594 
	$js_bš¬y_¬™h_bigæßt
(
JSCÚ‹xt
 *
ùx
, 
OPCodeEnum
 
İ
,

12595 
JSV®ue
 *
´es
, JSV®u
İ1
, JSV®u
İ2
)

12597 
bf_t
 
a_s
, 
b_s
, *
r
, *
a
, *
b
;

12598 
»t
;

12599 
JSV®ue
 
»s
;

12601 
»s
 = 
	`JS_NewBigFlßt
(
ùx
);

12602 ià(
	`JS_IsExû±iÚ
(
»s
)) {

12603 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12604 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12607 
r
 = 
	`JS_G‘BigFlßt
(
»s
);

12608 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

12609 
b
 = 
	`JS_ToBigFlßt
(
ùx
, &
b_s
, 
İ2
);

12610 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

12611 
İ
) {

12612 
OP_add
:

12613 
»t
 = 
	`bf_add
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

12615 
OP_sub
:

12616 
»t
 = 
	`bf_sub
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

12618 
OP_mul
:

12619 
»t
 = 
	`bf_mul
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

12621 
OP_div
:

12622 
»t
 = 
	`bf_div
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

12624 
OP_m©h_mod
:

12626 
»t
 = 
	`bf_»m
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
,

12627 
BF_DIVREM_EUCLIDIAN
);

12629 
OP_mod
:

12630 
»t
 = 
	`bf_»m
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
,

12631 
BF_RNDZ
);

12633 
OP_pow
:

12634 
»t
 = 
	`bf_pow
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
,

12635 
ùx
->
å_’v
.
æags
 | 
BF_POW_JS_QUIRKS
);

12638 
	`abÜt
();

12640 ià(
a
 =ğ&
a_s
)

12641 
	`bf_d–‘e
(
a
);

12642 ià(
b
 =ğ&
b_s
)

12643 
	`bf_d–‘e
(
b
);

12644 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12645 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12646 ià(
	`uÆik–y
(
»t
 & 
BF_ST_MEM_ERROR
)) {

12647 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12648 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12651 *
´es
 = 
»s
;

12653 
	}
}

12655 
	$js_bš¬y_¬™h_bigšt
(
JSCÚ‹xt
 *
ùx
, 
OPCodeEnum
 
İ
,

12656 
JSV®ue
 *
´es
, JSV®u
İ1
, JSV®u
İ2
)

12658 
bf_t
 
a_s
, 
b_s
, *
r
, *
a
, *
b
;

12659 
»t
;

12660 
JSV®ue
 
»s
;

12662 
»s
 = 
	`JS_NewBigIÁ
(
ùx
);

12663 ià(
	`JS_IsExû±iÚ
(
»s
))

12664 
ç
;

12665 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
İ1
);

12666 ià(!
a
)

12667 
ç
;

12668 
b
 = 
	`JS_ToBigIÁ
(
ùx
, &
b_s
, 
İ2
);

12669 ià(!
b
) {

12670 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

12671 
ç
;

12673 
r
 = 
	`JS_G‘BigIÁ
(
»s
);

12674 
»t
 = 0;

12675 
İ
) {

12676 
OP_add
:

12677 
»t
 = 
	`bf_add
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12679 
OP_sub
:

12680 
»t
 = 
	`bf_sub
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12682 
OP_mul
:

12683 
»t
 = 
	`bf_mul
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12685 
OP_div
:

12686 ià(!
	`is_m©h_mode
(
ùx
)) {

12687 
bf_t
 
»m_s
, *
»m
 = &rem_s;

12688 
	`bf_š™
(
ùx
->
bf_ùx
, 
»m
);

12689 
»t
 = 
	`bf_div»m
(
r
, 
»m
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
,

12690 
BF_RNDZ
);

12691 
	`bf_d–‘e
(
»m
);

12693 
m©h_mode_div_pow
;

12696 
OP_m©h_mod
:

12698 
»t
 = 
	`bf_»m
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
,

12699 
BF_DIVREM_EUCLIDIAN
è& 
BF_ST_INVALID_OP
;

12701 
OP_mod
:

12702 
»t
 = 
	`bf_»m
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
,

12703 
BF_RNDZ
è& 
BF_ST_INVALID_OP
;

12705 
OP_pow
:

12706 ià(
b
->
sign
) {

12707 ià(!
	`is_m©h_mode
(
ùx
)) {

12708 
»t
 = 
BF_ST_INVALID_OP
;

12710 
m©h_mode_div_pow
:

12711 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12712 
»t
 = 
	`js_ÿÎ_bš¬y_İ_sim¶e
(
ùx
, &
»s
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_INT
], 
İ1
, 
İ2
, 
İ
);

12713 ià(
»t
 != 0) {

12714 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

12715 
	`JS_F»eBigIÁ
(
ùx
, 
b
, &
b_s
);

12716 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12717 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12718 ià(
»t
 < 0) {

12721 *
´es
 = 
»s
;

12727 
»s
 = 
	`JS_NewBigFlßt
(
ùx
);

12728 ià(
	`JS_IsExû±iÚ
(
»s
)) {

12729 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

12730 
	`JS_F»eBigIÁ
(
ùx
, 
b
, &
b_s
);

12731 
ç
;

12733 
r
 = 
	`JS_G‘BigFlßt
(
»s
);

12734 ià(
İ
 =ğ
OP_div
) {

12735 
»t
 = 
	`bf_div
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
è& 
BF_ST_MEM_ERROR
;

12737 
»t
 = 
	`bf_pow
(
r
, 
a
, 
b
, 
ùx
->
å_’v
.
´ec
,

12738 
ùx
->
å_’v
.
æags
 | 
BF_POW_JS_QUIRKS
è& 
BF_ST_MEM_ERROR
;

12740 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

12741 
	`JS_F»eBigIÁ
(
ùx
, 
b
, &
b_s
);

12742 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12743 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12744 ià(
	`uÆik–y
(
»t
)) {

12745 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12746 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12749 *
´es
 = 
»s
;

12753 
»t
 = 
	`bf_pow
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
 | 
BF_POW_JS_QUIRKS
);

12758 
OP_shl
:

12759 
OP_§r
:

12761 
¦imb_t
 
v2
;

12762 #ià
LIMB_BITS
 == 32

12763 
	`bf_g‘_št32
(&
v2
, 
b
, 0);

12764 ià(
v2
 =ğ
INT32_MIN
)

12765 
v2
 = 
INT32_MIN
 + 1;

12767 
	`bf_g‘_št64
(&
v2
, 
b
, 0);

12768 ià(
v2
 =ğ
INT64_MIN
)

12769 
v2
 = 
INT64_MIN
 + 1;

12771 ià(
İ
 =ğ
OP_§r
)

12772 
v2
 = -v2;

12773 
»t
 = 
	`bf_£t
(
r
, 
a
);

12774 
»t
 |ğ
	`bf_mul_2exp
(
r
, 
v2
, 
BF_PREC_INF
, 
BF_RNDZ
);

12775 ià(
v2
 < 0) {

12776 
»t
 |ğ
	`bf_ršt
(
r
, 
BF_RNDD
è& (
BF_ST_OVERFLOW
 | 
BF_ST_MEM_ERROR
);

12780 
OP_ªd
:

12781 
»t
 = 
	`bf_logic_ªd
(
r
, 
a
, 
b
);

12783 
OP_Ü
:

12784 
»t
 = 
	`bf_logic_Ü
(
r
, 
a
, 
b
);

12786 
OP_xÜ
:

12787 
»t
 = 
	`bf_logic_xÜ
(
r
, 
a
, 
b
);

12790 
	`abÜt
();

12792 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

12793 
	`JS_F»eBigIÁ
(
ùx
, 
b
, &
b_s
);

12794 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12795 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12796 ià(
	`uÆik–y
(
»t
)) {

12797 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12798 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12801 *
´es
 = 
	`JS_Com·ùBigIÁ
(
ùx
, 
»s
);

12803 
ç
:

12804 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12805 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12806 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12808 
	}
}

12811 
	$js_bfdec_pow
(
bfdec_t
 *
r
, cÚ¡ bfdec_ˆ*
a
, cÚ¡ bfdec_ˆ*
b
)

12813 
bfdec_t
 
b1
;

12814 
št32_t
 
b2
;

12815 
»t
;

12817 
	`bfdec_š™
(
b
->
ùx
, &
b1
);

12818 
»t
 = 
	`bfdec_£t
(&
b1
, 
b
);

12819 ià(
»t
) {

12820 
	`bfdec_d–‘e
(&
b1
);

12821  
»t
;

12823 
»t
 = 
	`bfdec_ršt
(&
b1
, 
BF_RNDZ
);

12824 ià(
»t
) {

12825 
	`bfdec_d–‘e
(&
b1
);

12826  
BF_ST_INVALID_OP
;

12828 
»t
 = 
	`bfdec_g‘_št32
(&
b2
, &
b1
);

12829 
	`bfdec_d–‘e
(&
b1
);

12830 ià(
»t
)

12831  
»t
;

12832 ià(
b2
 < 0)

12833  
BF_ST_INVALID_OP
;

12834  
	`bfdec_pow_ui
(
r
, 
a
, 
b2
);

12835 
	}
}

12837 
	$js_bš¬y_¬™h_bigdecim®
(
JSCÚ‹xt
 *
ùx
, 
OPCodeEnum
 
İ
,

12838 
JSV®ue
 *
´es
, JSV®u
İ1
, JSV®u
İ2
)

12840 
bfdec_t
 *
r
, *
a
, *
b
;

12841 
»t
;

12842 
JSV®ue
 
»s
;

12844 
»s
 = 
	`JS_NewBigDecim®
(
ùx
);

12845 ià(
	`JS_IsExû±iÚ
(
»s
))

12846 
ç
;

12847 
r
 = 
	`JS_G‘BigDecim®
(
»s
);

12849 
a
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ1
);

12850 ià(!
a
)

12851 
ç
;

12852 
b
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ2
);

12853 ià(!
b
)

12854 
ç
;

12855 
İ
) {

12856 
OP_add
:

12857 
»t
 = 
	`bfdec_add
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12859 
OP_sub
:

12860 
»t
 = 
	`bfdec_sub
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12862 
OP_mul
:

12863 
»t
 = 
	`bfdec_mul
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12865 
OP_div
:

12866 
»t
 = 
	`bfdec_div
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
);

12868 
OP_m©h_mod
:

12870 
»t
 = 
	`bfdec_»m
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
, 
BF_DIVREM_EUCLIDIAN
);

12872 
OP_mod
:

12873 
»t
 = 
	`bfdec_»m
(
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
, BF_RNDZ);

12875 
OP_pow
:

12876 
»t
 = 
	`js_bfdec_pow
(
r
, 
a
, 
b
);

12879 
	`abÜt
();

12881 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12882 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12883 ià(
	`uÆik–y
(
»t
)) {

12884 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12885 
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

12888 *
´es
 = 
»s
;

12890 
ç
:

12891 
	`JS_F»eV®ue
(
ùx
, 
»s
);

12892 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12893 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12895 
	}
}

12897 
no_šlše
 
__exû±iÚ
 
	$js_bš¬y_¬™h_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

12898 
OPCodeEnum
 
İ
)

12900 
JSV®ue
 
İ1
, 
İ2
, 
»s
;

12901 
ušt32_t
 
g1
, 
g2
;

12902 
»t
;

12903 
d1
, 
d2
;

12905 
İ1
 = 
¥
[-2];

12906 
İ2
 = 
¥
[-1];

12907 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

12908 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

12910 ià(
g1
 =ğ
JS_TAG_FLOAT64
 && 
g2
 == JS_TAG_FLOAT64) {

12911 
d1
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
);

12912 
d2
 = 
	`JS_VALUE_GET_FLOAT64
(
İ2
);

12913 
hªdË_æßt64
;

12917 ià((
g1
 =ğ
JS_TAG_OBJECT
 &&

12918 (
g2
 !ğ
JS_TAG_NULL
 &&ag2 !ğ
JS_TAG_UNDEFINED
)) ||

12919 (
g2
 =ğ
JS_TAG_OBJECT
 &&

12920 (
g1
 !ğ
JS_TAG_NULL
 &&ag1 !ğ
JS_TAG_UNDEFINED
))) {

12921 
»t
 = 
	`js_ÿÎ_bš¬y_İ_çÎback
(
ùx
, &
»s
, 
İ1
, 
İ2
, 
İ
, 
TRUE
, 0);

12922 ià(
»t
 != 0) {

12923 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12924 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12925 ià(
»t
 < 0) {

12926 
exû±iÚ
;

12928 
¥
[-2] = 
»s
;

12934 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

12935 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

12936 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

12937 
exû±iÚ
;

12939 
İ2
 = 
	`JS_ToNum”icF»e
(
ùx
, op2);

12940 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

12941 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

12942 
exû±iÚ
;

12944 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

12945 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

12947 ià(
g1
 =ğ
JS_TAG_INT
 && 
g2
 == JS_TAG_INT) {

12948 
št32_t
 
v1
, 
v2
;

12949 
št64_t
 
v
;

12950 
v1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

12951 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

12952 
İ
) {

12953 
OP_sub
:

12954 
v
 = (
št64_t
)
v1
 - (št64_t)
v2
;

12956 
OP_mul
:

12957 
v
 = (
št64_t
)
v1
 * (št64_t)
v2
;

12958 ià(
	`is_m©h_mode
(
ùx
) &&

12959 (
v
 < -
MAX_SAFE_INTEGER
 || v > MAX_SAFE_INTEGER))

12960 
hªdË_bigšt
;

12961 ià(
v
 =ğ0 && (
v1
 | 
v2
) < 0) {

12962 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, -0.0);

12966 
OP_div
:

12967 ià(
	`is_m©h_mode
(
ùx
))

12968 
hªdË_bigšt
;

12969 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, ()
v1
 / ()
v2
);

12971 
OP_m©h_mod
:

12972 ià(
	`uÆik–y
(
v2
 == 0)) {

12973 
	`throw_bf_exû±iÚ
(
ùx
, 
BF_ST_DIVIDE_ZERO
);

12974 
exû±iÚ
;

12976 
v
 = (
št64_t
)
v1
 % (št64_t)
v2
;

12977 ià(
v
 < 0) {

12978 ià(
v2
 < 0)

12979 
v
 -ğ
v2
;

12981 
v
 +ğ
v2
;

12984 
OP_mod
:

12985 ià(
v1
 < 0 || 
v2
 <= 0) {

12986 
¥
[-2] = 
	`JS_NewFlßt64
(
ùx
, 
	`fmod
(
v1
, 
v2
));

12989 
v
 = (
št64_t
)
v1
 % (št64_t)
v2
;

12992 
OP_pow
:

12993 ià(!
	`is_m©h_mode
(
ùx
)) {

12994 
¥
[-2] = 
	`JS_NewFlßt64
(
ùx
, 
	`js_pow
(
v1
, 
v2
));

12997 
hªdË_bigšt
;

13001 
	`abÜt
();

13003 
¥
[-2] = 
	`JS_NewIÁ64
(
ùx
, 
v
);

13004 } ià(
g1
 =ğ
JS_TAG_BIG_DECIMAL
 || 
g2
 == JS_TAG_BIG_DECIMAL) {

13005 ià(
ùx
->
¹
->
bigdecim®_İs
.
	`bš¬y_¬™h
(ùx, 
İ
, 
¥
 - 2, 
İ1
, 
İ2
))

13006 
exû±iÚ
;

13007 } ià(
g1
 =ğ
JS_TAG_BIG_FLOAT
 || 
g2
 == JS_TAG_BIG_FLOAT) {

13008 ià(
ùx
->
¹
->
bigæßt_İs
.
	`bš¬y_¬™h
(ùx, 
İ
, 
¥
 - 2, 
İ1
, 
İ2
))

13009 
exû±iÚ
;

13010 } ià(
g1
 =ğ
JS_TAG_BIG_INT
 || 
g2
 == JS_TAG_BIG_INT) {

13011 
hªdË_bigšt
:

13012 ià(
ùx
->
¹
->
bigšt_İs
.
	`bš¬y_¬™h
(ùx, 
İ
, 
¥
 - 2, 
İ1
, 
İ2
))

13013 
exû±iÚ
;

13015 
dr
;

13017 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d1
, 
İ1
)) {

13018 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13019 
exû±iÚ
;

13021 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d2
, 
İ2
))

13022 
exû±iÚ
;

13023 
hªdË_æßt64
:

13024 ià(
	`is_m©h_mode
(
ùx
è&& 
	`is_§ã_š‹g”
(
d1
è&& is_§ã_š‹g”(
d2
))

13025 
hªdË_bigšt
;

13026 
İ
) {

13027 
OP_sub
:

13028 
dr
 = 
d1
 - 
d2
;

13030 
OP_mul
:

13031 
dr
 = 
d1
 * 
d2
;

13033 
OP_div
:

13034 
dr
 = 
d1
 / 
d2
;

13036 
OP_mod
:

13037 
dr
 = 
	`fmod
(
d1
, 
d2
);

13039 
OP_m©h_mod
:

13040 
d2
 = 
	`çbs
(d2);

13041 
dr
 = 
	`fmod
(
d1
, 
d2
);

13043 ià(
dr
 < 0)

13044 
dr
 +ğ
d2
;

13046 
OP_pow
:

13047 
dr
 = 
	`js_pow
(
d1
, 
d2
);

13050 
	`abÜt
();

13052 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, 
dr
);

13055 
exû±iÚ
:

13056 
¥
[-2] = 
JS_UNDEFINED
;

13057 
¥
[-1] = 
JS_UNDEFINED
;

13059 
	}
}

13061 
no_šlše
 
__exû±iÚ
 
	$js_add_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

13063 
JSV®ue
 
İ1
, 
İ2
, 
»s
;

13064 
ušt32_t
 
g1
, 
g2
;

13065 
»t
;

13067 
İ1
 = 
¥
[-2];

13068 
İ2
 = 
¥
[-1];

13070 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13071 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13073 ià(
g1
 =ğ
JS_TAG_FLOAT64
 && 
g2
 == JS_TAG_FLOAT64) {

13074 
d1
, 
d2
;

13075 
d1
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
);

13076 
d2
 = 
	`JS_VALUE_GET_FLOAT64
(
İ2
);

13077 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, 
d1
 + 
d2
);

13081 ià(
g1
 =ğ
JS_TAG_OBJECT
 || 
g2
 == JS_TAG_OBJECT) {

13083 ià((
g1
 =ğ
JS_TAG_OBJECT
 &&

13084 (
g2
 !ğ
JS_TAG_NULL
 &&ag2 !ğ
JS_TAG_UNDEFINED
 &&

13085 
g2
 !ğ
JS_TAG_STRING
)) ||

13086 (
g2
 =ğ
JS_TAG_OBJECT
 &&

13087 (
g1
 !ğ
JS_TAG_NULL
 &&ag1 !ğ
JS_TAG_UNDEFINED
 &&

13088 
g1
 !ğ
JS_TAG_STRING
))) {

13089 
»t
 = 
	`js_ÿÎ_bš¬y_İ_çÎback
(
ùx
, &
»s
, 
İ1
, 
İ2
, 
OP_add
,

13090 
FALSE
, 
HINT_NONE
);

13091 ià(
»t
 != 0) {

13092 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13093 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13094 ià(
»t
 < 0) {

13095 
exû±iÚ
;

13097 
¥
[-2] = 
»s
;

13103 
İ1
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op1, 
HINT_NONE
);

13104 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13105 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13106 
exû±iÚ
;

13109 
İ2
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op2, 
HINT_NONE
);

13110 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13111 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13112 
exû±iÚ
;

13114 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13115 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13118 ià(
g1
 =ğ
JS_TAG_STRING
 || 
g2
 == JS_TAG_STRING) {

13119 
¥
[-2] = 
	`JS_CÚÿtSŒšg
(
ùx
, 
İ1
, 
İ2
);

13120 ià(
	`JS_IsExû±iÚ
(
¥
[-2]))

13121 
exû±iÚ
;

13125 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

13126 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13127 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13128 
exû±iÚ
;

13130 
İ2
 = 
	`JS_ToNum”icF»e
(
ùx
, op2);

13131 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13132 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13133 
exû±iÚ
;

13135 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13136 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13138 ià(
g1
 =ğ
JS_TAG_INT
 && 
g2
 == JS_TAG_INT) {

13139 
št32_t
 
v1
, 
v2
;

13140 
št64_t
 
v
;

13141 
v1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

13142 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

13143 
v
 = (
št64_t
)
v1
 + (št64_t)
v2
;

13144 
¥
[-2] = 
	`JS_NewIÁ64
(
ùx
, 
v
);

13145 } ià(
g1
 =ğ
JS_TAG_BIG_DECIMAL
 || 
g2
 == JS_TAG_BIG_DECIMAL) {

13146 ià(
ùx
->
¹
->
bigdecim®_İs
.
	`bš¬y_¬™h
(ùx, 
OP_add
, 
¥
 - 2, 
İ1
, 
İ2
))

13147 
exû±iÚ
;

13148 } ià(
g1
 =ğ
JS_TAG_BIG_FLOAT
 || 
g2
 == JS_TAG_BIG_FLOAT) {

13149 ià(
ùx
->
¹
->
bigæßt_İs
.
	`bš¬y_¬™h
(ùx, 
OP_add
, 
¥
 - 2, 
İ1
, 
İ2
))

13150 
exû±iÚ
;

13151 } ià(
g1
 =ğ
JS_TAG_BIG_INT
 || 
g2
 == JS_TAG_BIG_INT) {

13152 
hªdË_bigšt
:

13153 ià(
ùx
->
¹
->
bigšt_İs
.
	`bš¬y_¬™h
(ùx, 
OP_add
, 
¥
 - 2, 
İ1
, 
İ2
))

13154 
exû±iÚ
;

13156 
d1
, 
d2
;

13158 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d1
, 
İ1
)) {

13159 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13160 
exû±iÚ
;

13162 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d2
, 
İ2
))

13163 
exû±iÚ
;

13164 ià(
	`is_m©h_mode
(
ùx
è&& 
	`is_§ã_š‹g”
(
d1
è&& is_§ã_š‹g”(
d2
))

13165 
hªdË_bigšt
;

13166 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, 
d1
 + 
d2
);

13169 
exû±iÚ
:

13170 
¥
[-2] = 
JS_UNDEFINED
;

13171 
¥
[-1] = 
JS_UNDEFINED
;

13173 
	}
}

13175 
no_šlše
 
__exû±iÚ
 
	$js_bš¬y_logic_¦ow
(
JSCÚ‹xt
 *
ùx
,

13176 
JSV®ue
 *
¥
,

13177 
OPCodeEnum
 
İ
)

13179 
JSV®ue
 
İ1
, 
İ2
, 
»s
;

13180 
»t
;

13181 
ušt32_t
 
g1
, 
g2
;

13182 
ušt32_t
 
v1
, 
v2
, 
r
;

13184 
İ1
 = 
¥
[-2];

13185 
İ2
 = 
¥
[-1];

13186 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13187 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13190 ià((
g1
 =ğ
JS_TAG_OBJECT
 &&

13191 (
g2
 !ğ
JS_TAG_NULL
 &&ag2 !ğ
JS_TAG_UNDEFINED
)) ||

13192 (
g2
 =ğ
JS_TAG_OBJECT
 &&

13193 (
g1
 !ğ
JS_TAG_NULL
 &&ag1 !ğ
JS_TAG_UNDEFINED
))) {

13194 
»t
 = 
	`js_ÿÎ_bš¬y_İ_çÎback
(
ùx
, &
»s
, 
İ1
, 
İ2
, 
İ
, 
TRUE
, 0);

13195 ià(
»t
 != 0) {

13196 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13197 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13198 ià(
»t
 < 0) {

13199 
exû±iÚ
;

13201 
¥
[-2] = 
»s
;

13207 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

13208 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13209 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13210 
exû±iÚ
;

13212 
İ2
 = 
	`JS_ToNum”icF»e
(
ùx
, op2);

13213 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13214 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13215 
exû±iÚ
;

13218 ià(
	`is_m©h_mode
(
ùx
))

13219 
bigšt_İ
;

13221 
g1
 = 
	`JS_VALUE_GET_TAG
(
İ1
);

13222 
g2
 = 
	`JS_VALUE_GET_TAG
(
İ2
);

13223 ià(
g1
 =ğ
JS_TAG_BIG_INT
 || 
g2
 == JS_TAG_BIG_INT) {

13224 ià(
g1
 !ğ
g2
) {

13225 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13226 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13227 
	`JS_ThrowTy³E¼Ü
(
ùx
, "both operands must be bigint");

13228 
exû±iÚ
;

13230 
bigšt_İ
:

13231 ià(
ùx
->
¹
->
bigšt_İs
.
	`bš¬y_¬™h
(ùx, 
İ
, 
¥
 - 2, 
İ1
, 
İ2
))

13232 
exû±iÚ
;

13235 ià(
	`uÆik–y
(
	`JS_ToIÁ32F»e
(
ùx
, (
št32_t
 *)&
v1
, 
İ1
))) {

13236 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13237 
exû±iÚ
;

13239 ià(
	`uÆik–y
(
	`JS_ToIÁ32F»e
(
ùx
, (
št32_t
 *)&
v2
, 
İ2
)))

13240 
exû±iÚ
;

13241 
İ
) {

13242 
OP_shl
:

13243 
r
 = 
v1
 << (
v2
 & 0x1f);

13245 
OP_§r
:

13246 
r
 = ()
v1
 >> (
v2
 & 0x1f);

13248 
OP_ªd
:

13249 
r
 = 
v1
 & 
v2
;

13251 
OP_Ü
:

13252 
r
 = 
v1
 | 
v2
;

13254 
OP_xÜ
:

13255 
r
 = 
v1
 ^ 
v2
;

13258 
	`abÜt
();

13260 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

13263 
exû±iÚ
:

13264 
¥
[-2] = 
JS_UNDEFINED
;

13265 
¥
[-1] = 
JS_UNDEFINED
;

13267 
	}
}

13270 
	$js_com·»_bigæßt
(
JSCÚ‹xt
 *
ùx
, 
OPCodeEnum
 
İ
,

13271 
JSV®ue
 
İ1
, JSV®u
İ2
)

13273 
bf_t
 
a_s
, 
b_s
, *
a
, *
b
;

13274 
»s
;

13276 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

13277 ià(!
a
) {

13278 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13281 
b
 = 
	`JS_ToBigFlßt
(
ùx
, &
b_s
, 
İ2
);

13282 ià(!
b
) {

13283 ià(
a
 =ğ&
a_s
)

13284 
	`bf_d–‘e
(
a
);

13285 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13288 
İ
) {

13289 
OP_É
:

13290 
»s
 = 
	`bf_cmp_É
(
a
, 
b
);

13292 
OP_Ée
:

13293 
»s
 = 
	`bf_cmp_Ë
(
a
, 
b
);

13295 
OP_gt
:

13296 
»s
 = 
	`bf_cmp_É
(
b
, 
a
);

13298 
OP_g‹
:

13299 
»s
 = 
	`bf_cmp_Ë
(
b
, 
a
);

13301 
OP_eq
:

13302 
»s
 = 
	`bf_cmp_eq
(
a
, 
b
);

13305 
	`abÜt
();

13307 ià(
a
 =ğ&
a_s
)

13308 
	`bf_d–‘e
(
a
);

13309 ià(
b
 =ğ&
b_s
)

13310 
	`bf_d–‘e
(
b
);

13311 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13312 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13313  
»s
;

13314 
	}
}

13316 
	$js_com·»_bigdecim®
(
JSCÚ‹xt
 *
ùx
, 
OPCodeEnum
 
İ
,

13317 
JSV®ue
 
İ1
, JSV®u
İ2
)

13319 
bfdec_t
 *
a
, *
b
;

13320 
»s
;

13325 
İ1
 = 
	`JS_ToBigDecim®F»e
(
ùx
, op1, 
TRUE
);

13326 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13327 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13330 
İ2
 = 
	`JS_ToBigDecim®F»e
(
ùx
, op2, 
TRUE
);

13331 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13332 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13335 
a
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ1
);

13336 
b
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ2
);

13338 
İ
) {

13339 
OP_É
:

13340 
»s
 = 
	`bfdec_cmp_É
(
a
, 
b
);

13342 
OP_Ée
:

13343 
»s
 = 
	`bfdec_cmp_Ë
(
a
, 
b
);

13345 
OP_gt
:

13346 
»s
 = 
	`bfdec_cmp_É
(
b
, 
a
);

13348 
OP_g‹
:

13349 
»s
 = 
	`bfdec_cmp_Ë
(
b
, 
a
);

13351 
OP_eq
:

13352 
»s
 = 
	`bfdec_cmp_eq
(
a
, 
b
);

13355 
	`abÜt
();

13357 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13358 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13359  
»s
;

13360 
	}
}

13362 
no_šlše
 
	$js_»ÏtiÚ®_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

13363 
OPCodeEnum
 
İ
)

13365 
JSV®ue
 
İ1
, 
İ2
, 
»t
;

13366 
»s
;

13367 
ušt32_t
 
g1
, 
g2
;

13369 
İ1
 = 
¥
[-2];

13370 
İ2
 = 
¥
[-1];

13371 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13372 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13374 ià((
g1
 =ğ
JS_TAG_OBJECT
 &&

13375 (
g2
 !ğ
JS_TAG_NULL
 &&ag2 !ğ
JS_TAG_UNDEFINED
)) ||

13376 (
g2
 =ğ
JS_TAG_OBJECT
 &&

13377 (
g1
 !ğ
JS_TAG_NULL
 &&ag1 !ğ
JS_TAG_UNDEFINED
))) {

13378 
»s
 = 
	`js_ÿÎ_bš¬y_İ_çÎback
(
ùx
, &
»t
, 
İ1
, 
İ2
, 
İ
,

13379 
FALSE
, 
HINT_NUMBER
);

13380 ià(
»s
 != 0) {

13381 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13382 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13383 ià(
»s
 < 0) {

13384 
exû±iÚ
;

13386 
¥
[-2] = 
»t
;

13391 
İ1
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op1, 
HINT_NUMBER
);

13392 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13393 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13394 
exû±iÚ
;

13396 
İ2
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op2, 
HINT_NUMBER
);

13397 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13398 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13399 
exû±iÚ
;

13401 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13402 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13404 ià(
g1
 =ğ
JS_TAG_STRING
 && 
g2
 == JS_TAG_STRING) {

13405 
JSSŒšg
 *
p1
, *
p2
;

13406 
p1
 = 
	`JS_VALUE_GET_STRING
(
İ1
);

13407 
p2
 = 
	`JS_VALUE_GET_STRING
(
İ2
);

13408 
»s
 = 
	`js_¡ršg_com·»
(
ùx
, 
p1
, 
p2
);

13409 
İ
) {

13410 
OP_É
:

13411 
»s
 = (res < 0);

13413 
OP_Ée
:

13414 
»s
 = (res <= 0);

13416 
OP_gt
:

13417 
»s
 = (res > 0);

13420 
OP_g‹
:

13421 
»s
 = (res >= 0);

13424 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13425 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13426 } ià((
g1
 <ğ
JS_TAG_NULL
 ||ag1 =ğ
JS_TAG_FLOAT64
) &&

13427 (
g2
 <ğ
JS_TAG_NULL
 ||ag2 =ğ
JS_TAG_FLOAT64
)) {

13429 
d1
, 
d2
;

13430 ià(
g1
 =ğ
JS_TAG_FLOAT64
) {

13431 
d1
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
);

13433 
d1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

13435 ià(
g2
 =ğ
JS_TAG_FLOAT64
) {

13436 
d2
 = 
	`JS_VALUE_GET_FLOAT64
(
İ2
);

13438 
d2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

13440 
İ
) {

13441 
OP_É
:

13442 
»s
 = (
d1
 < 
d2
);

13444 
OP_Ée
:

13445 
»s
 = (
d1
 <ğ
d2
);

13447 
OP_gt
:

13448 
»s
 = (
d1
 > 
d2
);

13451 
OP_g‹
:

13452 
»s
 = (
d1
 >ğ
d2
);

13456 ià(((
g1
 =ğ
JS_TAG_BIG_INT
 && 
g2
 =ğ
JS_TAG_STRING
) ||

13457 (
g2
 =ğ
JS_TAG_BIG_INT
 && 
g1
 =ğ
JS_TAG_STRING
)) &&

13458 !
	`is_m©h_mode
(
ùx
)) {

13459 ià(
g1
 =ğ
JS_TAG_STRING
) {

13460 
İ1
 = 
	`JS_SŒšgToBigIÁ
(
ùx
, op1);

13461 ià(
	`JS_VALUE_GET_TAG
(
İ1
è!ğ
JS_TAG_BIG_INT
)

13462 
šv®id_bigšt_¡ršg
;

13464 ià(
g2
 =ğ
JS_TAG_STRING
) {

13465 
İ2
 = 
	`JS_SŒšgToBigIÁ
(
ùx
, op2);

13466 ià(
	`JS_VALUE_GET_TAG
(
İ2
è!ğ
JS_TAG_BIG_INT
) {

13467 
šv®id_bigšt_¡ršg
:

13468 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13469 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13470 
»s
 = 
FALSE
;

13471 
dÚe
;

13475 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

13476 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13477 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13478 
exû±iÚ
;

13480 
İ2
 = 
	`JS_ToNum”icF»e
(
ùx
, op2);

13481 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13482 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13483 
exû±iÚ
;

13487 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_BIG_DECIMAL
 ||

13488 
	`JS_VALUE_GET_TAG
(
İ2
è=ğ
JS_TAG_BIG_DECIMAL
) {

13489 
»s
 = 
ùx
->
¹
->
bigdecim®_İs
.
	`com·»
(ùx, 
İ
, 
İ1
, 
İ2
);

13490 ià(
»s
 < 0)

13491 
exû±iÚ
;

13492 } ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_BIG_FLOAT
 ||

13493 
	`JS_VALUE_GET_TAG
(
İ2
è=ğ
JS_TAG_BIG_FLOAT
) {

13494 
»s
 = 
ùx
->
¹
->
bigæßt_İs
.
	`com·»
(ùx, 
İ
, 
İ1
, 
İ2
);

13495 ià(
»s
 < 0)

13496 
exû±iÚ
;

13498 
»s
 = 
ùx
->
¹
->
bigšt_İs
.
	`com·»
(ùx, 
İ
, 
İ1
, 
İ2
);

13499 ià(
»s
 < 0)

13500 
exû±iÚ
;

13503 
dÚe
:

13504 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»s
);

13506 
exû±iÚ
:

13507 
¥
[-2] = 
JS_UNDEFINED
;

13508 
¥
[-1] = 
JS_UNDEFINED
;

13510 
	}
}

13512 
BOOL
 
	$g_is_numb”
(
ušt32_t
 
g
)

13514  (
g
 =ğ
JS_TAG_INT
 ||ag =ğ
JS_TAG_BIG_INT
 ||

13515 
g
 =ğ
JS_TAG_FLOAT64
 ||ag =ğ
JS_TAG_BIG_FLOAT
 ||

13516 
g
 =ğ
JS_TAG_BIG_DECIMAL
);

13517 
	}
}

13519 
no_šlše
 
__exû±iÚ
 
	$js_eq_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

13520 
BOOL
 
is_Ãq
)

13522 
JSV®ue
 
İ1
, 
İ2
, 
»t
;

13523 
»s
;

13524 
ušt32_t
 
g1
, 
g2
;

13526 
İ1
 = 
¥
[-2];

13527 
İ2
 = 
¥
[-1];

13528 
»do
:

13529 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

13530 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

13531 ià(
	`g_is_numb”
(
g1
è&&ag_is_numb”(
g2
)) {

13532 ià(
g1
 =ğ
JS_TAG_INT
 && 
g2
 == JS_TAG_INT) {

13533 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
è=ğJS_VALUE_GET_INT(
İ2
);

13534 } ià((
g1
 =ğ
JS_TAG_FLOAT64
 &&

13535 (
g2
 =ğ
JS_TAG_INT
 ||ag2 =ğ
JS_TAG_FLOAT64
)) ||

13536 (
g2
 =ğ
JS_TAG_FLOAT64
 &&

13537 (
g1
 =ğ
JS_TAG_INT
 ||ag1 =ğ
JS_TAG_FLOAT64
))) {

13538 
d1
, 
d2
;

13539 ià(
g1
 =ğ
JS_TAG_FLOAT64
) {

13540 
d1
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
);

13542 
d1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

13544 ià(
g2
 =ğ
JS_TAG_FLOAT64
) {

13545 
d2
 = 
	`JS_VALUE_GET_FLOAT64
(
İ2
);

13547 
d2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

13549 
»s
 = (
d1
 =ğ
d2
);

13550 } ià(
g1
 =ğ
JS_TAG_BIG_DECIMAL
 || 
g2
 == JS_TAG_BIG_DECIMAL) {

13551 
»s
 = 
ùx
->
¹
->
bigdecim®_İs
.
	`com·»
(ùx, 
OP_eq
, 
İ1
, 
İ2
);

13552 ià(
»s
 < 0)

13553 
exû±iÚ
;

13554 } ià(
g1
 =ğ
JS_TAG_BIG_FLOAT
 || 
g2
 == JS_TAG_BIG_FLOAT) {

13555 
»s
 = 
ùx
->
¹
->
bigæßt_İs
.
	`com·»
(ùx, 
OP_eq
, 
İ1
, 
İ2
);

13556 ià(
»s
 < 0)

13557 
exû±iÚ
;

13559 
»s
 = 
ùx
->
¹
->
bigšt_İs
.
	`com·»
(ùx, 
OP_eq
, 
İ1
, 
İ2
);

13560 ià(
»s
 < 0)

13561 
exû±iÚ
;

13563 } ià(
g1
 =ğ
g2
) {

13564 ià(
g1
 =ğ
JS_TAG_OBJECT
) {

13566 
»s
 = 
	`js_ÿÎ_bš¬y_İ_çÎback
(
ùx
, &
»t
, 
İ1
, 
İ2
,

13567 
is_Ãq
 ? 
OP_Ãq
 : 
OP_eq
,

13568 
FALSE
, 
HINT_NONE
);

13569 ià(
»s
 != 0) {

13570 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13571 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13572 ià(
»s
 < 0) {

13573 
exû±iÚ
;

13575 
¥
[-2] = 
»t
;

13580 
»s
 = 
	`js_¡riù_eq2
(
ùx
, 
İ1
, 
İ2
, 
JS_EQ_STRICT
);

13581 } ià((
g1
 =ğ
JS_TAG_NULL
 && 
g2
 =ğ
JS_TAG_UNDEFINED
) ||

13582 (
g2
 =ğ
JS_TAG_NULL
 && 
g1
 =ğ
JS_TAG_UNDEFINED
)) {

13583 
»s
 = 
TRUE
;

13584 } ià((
g1
 =ğ
JS_TAG_STRING
 && 
	`g_is_numb”
(
g2
)) ||

13585 (
g2
 =ğ
JS_TAG_STRING
 && 
	`g_is_numb”
(
g1
))) {

13587 ià((
g1
 =ğ
JS_TAG_BIG_INT
 || 
g2
 == JS_TAG_BIG_INT) &&

13588 !
	`is_m©h_mode
(
ùx
)) {

13589 ià(
g1
 =ğ
JS_TAG_STRING
) {

13590 
İ1
 = 
	`JS_SŒšgToBigIÁ
(
ùx
, op1);

13591 ià(
	`JS_VALUE_GET_TAG
(
İ1
è!ğ
JS_TAG_BIG_INT
)

13592 
šv®id_bigšt_¡ršg
;

13594 ià(
g2
 =ğ
JS_TAG_STRING
) {

13595 
İ2
 = 
	`JS_SŒšgToBigIÁ
(
ùx
, op2);

13596 ià(
	`JS_VALUE_GET_TAG
(
İ2
è!ğ
JS_TAG_BIG_INT
) {

13597 
šv®id_bigšt_¡ršg
:

13598 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13599 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13600 
»s
 = 
FALSE
;

13601 
dÚe
;

13605 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

13606 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13607 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13608 
exû±iÚ
;

13610 
İ2
 = 
	`JS_ToNum”icF»e
(
ùx
, op2);

13611 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13612 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13613 
exû±iÚ
;

13616 
»s
 = 
	`js_¡riù_eq
(
ùx
, 
İ1
, 
İ2
);

13617 } ià(
g1
 =ğ
JS_TAG_BOOL
) {

13618 
İ1
 = 
	`JS_NewIÁ32
(
ùx
, 
	`JS_VALUE_GET_INT
(op1));

13619 
»do
;

13620 } ià(
g2
 =ğ
JS_TAG_BOOL
) {

13621 
İ2
 = 
	`JS_NewIÁ32
(
ùx
, 
	`JS_VALUE_GET_INT
(op2));

13622 
»do
;

13623 } ià((
g1
 =ğ
JS_TAG_OBJECT
 &&

13624 (
	`g_is_numb”
(
g2
è||ag2 =ğ
JS_TAG_STRING
 ||ag2 =ğ
JS_TAG_SYMBOL
)) ||

13625 (
g2
 =ğ
JS_TAG_OBJECT
 &&

13626 (
	`g_is_numb”
(
g1
è||ag1 =ğ
JS_TAG_STRING
 ||ag1 =ğ
JS_TAG_SYMBOL
))) {

13629 
»s
 = 
	`js_ÿÎ_bš¬y_İ_çÎback
(
ùx
, &
»t
, 
İ1
, 
İ2
,

13630 
is_Ãq
 ? 
OP_Ãq
 : 
OP_eq
,

13631 
FALSE
, 
HINT_NONE
);

13632 ià(
»s
 != 0) {

13633 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13634 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13635 ià(
»s
 < 0) {

13636 
exû±iÚ
;

13638 
¥
[-2] = 
»t
;

13643 
İ1
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op1, 
HINT_NONE
);

13644 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13645 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13646 
exû±iÚ
;

13648 
İ2
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op2, 
HINT_NONE
);

13649 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13650 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13651 
exû±iÚ
;

13653 
»do
;

13655 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13656 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13657 
»s
 = 
FALSE
;

13659 
dÚe
:

13660 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»s
 ^ 
is_Ãq
);

13662 
exû±iÚ
:

13663 
¥
[-2] = 
JS_UNDEFINED
;

13664 
¥
[-1] = 
JS_UNDEFINED
;

13666 
	}
}

13668 
no_šlše
 
	$js_shr_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

13670 
JSV®ue
 
İ1
, 
İ2
;

13671 
ušt32_t
 
v1
, 
v2
, 
r
;

13673 
İ1
 = 
¥
[-2];

13674 
İ2
 = 
¥
[-1];

13675 
İ1
 = 
	`JS_ToNum”icF»e
(
ùx
, op1);

13676 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13677 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13678 
exû±iÚ
;

13680 
İ2
 = 
	`JS_ToNum”icF»e
(
ùx
, op2);

13681 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13682 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13683 
exû±iÚ
;

13686 ià(!
	`is_m©h_mode
(
ùx
) &&

13687 (
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_BIG_INT
 ||

13688 
	`JS_VALUE_GET_TAG
(
İ2
è=ğ
JS_TAG_BIG_INT
)) {

13689 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigint operands‡re forbidden for >>>");

13690 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13691 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13692 
exû±iÚ
;

13695 
	`JS_ToUšt32F»e
(
ùx
, &
v1
, 
İ1
);

13696 
	`JS_ToUšt32F»e
(
ùx
, &
v2
, 
İ2
);

13697 
r
 = 
v1
 >> (
v2
 & 0x1f);

13698 
¥
[-2] = 
	`JS_NewUšt32
(
ùx
, 
r
);

13700 
exû±iÚ
:

13701 
¥
[-2] = 
JS_UNDEFINED
;

13702 
¥
[-1] = 
JS_UNDEFINED
;

13704 
	}
}

13706 
JSV®ue
 
	$js_mul_pow10_to_æßt64
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
bf_t
 *
a
,

13707 
št64_t
 
expÚ’t
)

13709 
bf_t
 
r_s
, *
r
 = &r_s;

13710 
d
;

13711 
»t
;

13714 
	`bf_š™
(
ùx
->
bf_ùx
, 
r
);

13715 
»t
 = 
	`bf_mul_pow_¿dix
(
r
, 
a
, 10, 
expÚ’t
,

13716 53, 
	`bf_£t_exp_b™s
(11è| 
BF_RNDN
 |

13717 
BF_FLAG_SUBNORMAL
);

13718 
	`bf_g‘_æßt64
(
r
, &
d
, 
BF_RNDN
);

13719 
	`bf_d–‘e
(
r
);

13720 ià(
»t
 & 
BF_ST_MEM_ERROR
)

13721  
	`JS_ThrowOutOfMemÜy
(
ùx
);

13723  
	`__JS_NewFlßt64
(
ùx
, 
d
);

13724 
	}
}

13726 
no_šlše
 
	$js_mul_pow10
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

13728 
bf_t
 
a_s
, *
a
, *
r
;

13729 
JSV®ue
 
İ1
, 
İ2
, 
»s
;

13730 
št64_t
 
e
;

13731 
»t
;

13733 
»s
 = 
	`JS_NewBigFlßt
(
ùx
);

13734 ià(
	`JS_IsExû±iÚ
(
»s
))

13736 
r
 = 
	`JS_G‘BigFlßt
(
»s
);

13737 
İ1
 = 
¥
[-2];

13738 
İ2
 = 
¥
[-1];

13739 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

13740 ià(!
a
)

13742 ià(
	`JS_IsBigIÁ
(
ùx
, 
İ2
)) {

13743 
»t
 = 
	`JS_ToBigIÁ64
(
ùx
, &
e
, 
İ2
);

13745 
»t
 = 
	`JS_ToIÁ64
(
ùx
, &
e
, 
İ2
);

13747 ià(
»t
) {

13748 ià(
a
 =ğ&
a_s
)

13749 
	`bf_d–‘e
(
a
);

13750 
	`JS_F»eV®ue
(
ùx
, 
»s
);

13754 
	`bf_mul_pow_¿dix
(
r
, 
a
, 10, 
e
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

13755 ià(
a
 =ğ&
a_s
)

13756 
	`bf_d–‘e
(
a
);

13757 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13758 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13759 
¥
[-2] = 
»s
;

13761 
	}
}

13765 
JSV®ue
 
	$JS_ThrowUnsuµÜ‹dBigšt
(
JSCÚ‹xt
 *
ùx
)

13767  
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigint is‚ot supported");

13768 
	}
}

13770 
JSV®ue
 
	$JS_NewBigIÁ64
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 
v
)

13772  
	`JS_ThrowUnsuµÜ‹dBigšt
(
ùx
);

13773 
	}
}

13775 
JSV®ue
 
	$JS_NewBigUšt64
(
JSCÚ‹xt
 *
ùx
, 
ušt64_t
 
v
)

13777  
	`JS_ThrowUnsuµÜ‹dBigšt
(
ùx
);

13778 
	}
}

13780 
	$JS_ToBigIÁ64
(
JSCÚ‹xt
 *
ùx
, 
sšt64_t
 *
´es
, 
JSV®ueCÚ¡
 
v®
)

13782 
	`JS_ThrowUnsuµÜ‹dBigšt
(
ùx
);

13783 *
´es
 = 0;

13785 
	}
}

13787 
no_šlše
 
__exû±iÚ
 
	$js_uÇry_¬™h_¦ow
(
JSCÚ‹xt
 *
ùx
,

13788 
JSV®ue
 *
¥
,

13789 
OPCodeEnum
 
İ
)

13791 
JSV®ue
 
İ1
;

13792 
d
;

13794 
İ1
 = 
¥
[-1];

13795 ià(
	`uÆik–y
(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
İ1
))) {

13796 
¥
[-1] = 
JS_UNDEFINED
;

13799 
İ
) {

13800 
OP_šc
:

13801 
d
++;

13803 
OP_dec
:

13804 
d
--;

13806 
OP_¶us
:

13808 
OP_Ãg
:

13809 
d
 = -d;

13812 
	`abÜt
();

13814 
¥
[-1] = 
	`JS_NewFlßt64
(
ùx
, 
d
);

13816 
	}
}

13819 
__exû±iÚ
 
	$js_po¡_šc_¦ow
(
JSCÚ‹xt
 *
ùx
,

13820 
JSV®ue
 *
¥
, 
OPCodeEnum
 
İ
)

13822 
JSV®ue
 
İ1
;

13823 
d
, 
r
;

13825 
İ1
 = 
¥
[-1];

13826 ià(
	`uÆik–y
(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
İ1
))) {

13827 
¥
[-1] = 
JS_UNDEFINED
;

13830 
r
 = 
d
 + 2 * (
İ
 - 
OP_po¡_dec
) - 1;

13831 
¥
[0] = 
	`JS_NewFlßt64
(
ùx
, 
r
);

13832 
¥
[-1] = 
	`JS_NewFlßt64
(
ùx
, 
d
);

13834 
	}
}

13836 
no_šlše
 
__exû±iÚ
 
	$js_bš¬y_¬™h_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

13837 
OPCodeEnum
 
İ
)

13839 
JSV®ue
 
İ1
, 
İ2
;

13840 
d1
, 
d2
, 
r
;

13842 
İ1
 = 
¥
[-2];

13843 
İ2
 = 
¥
[-1];

13844 ià(
	`uÆik–y
(
	`JS_ToFlßt64F»e
(
ùx
, &
d1
, 
İ1
))) {

13845 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13846 
exû±iÚ
;

13848 ià(
	`uÆik–y
(
	`JS_ToFlßt64F»e
(
ùx
, &
d2
, 
İ2
))) {

13849 
exû±iÚ
;

13851 
İ
) {

13852 
OP_sub
:

13853 
r
 = 
d1
 - 
d2
;

13855 
OP_mul
:

13856 
r
 = 
d1
 * 
d2
;

13858 
OP_div
:

13859 
r
 = 
d1
 / 
d2
;

13861 
OP_mod
:

13862 
r
 = 
	`fmod
(
d1
, 
d2
);

13864 
OP_pow
:

13865 
r
 = 
	`js_pow
(
d1
, 
d2
);

13868 
	`abÜt
();

13870 
¥
[-2] = 
	`JS_NewFlßt64
(
ùx
, 
r
);

13872 
exû±iÚ
:

13873 
¥
[-2] = 
JS_UNDEFINED
;

13874 
¥
[-1] = 
JS_UNDEFINED
;

13876 
	}
}

13878 
no_šlše
 
__exû±iÚ
 
	$js_add_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

13880 
JSV®ue
 
İ1
, 
İ2
;

13881 
ušt32_t
 
g1
, 
g2
;

13883 
İ1
 = 
¥
[-2];

13884 
İ2
 = 
¥
[-1];

13885 
g1
 = 
	`JS_VALUE_GET_TAG
(
İ1
);

13886 
g2
 = 
	`JS_VALUE_GET_TAG
(
İ2
);

13887 ià((
g1
 =ğ
JS_TAG_INT
 || 
	`JS_TAG_IS_FLOAT64
(tag1)) &&

13888 (
g2
 =ğ
JS_TAG_INT
 || 
	`JS_TAG_IS_FLOAT64
(tag2))) {

13889 
add_numb”s
;

13891 
İ1
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op1, 
HINT_NONE
);

13892 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13893 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13894 
exû±iÚ
;

13896 
İ2
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op2, 
HINT_NONE
);

13897 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13898 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13899 
exû±iÚ
;

13901 
g1
 = 
	`JS_VALUE_GET_TAG
(
İ1
);

13902 
g2
 = 
	`JS_VALUE_GET_TAG
(
İ2
);

13903 ià(
g1
 =ğ
JS_TAG_STRING
 || 
g2
 == JS_TAG_STRING) {

13904 
¥
[-2] = 
	`JS_CÚÿtSŒšg
(
ùx
, 
İ1
, 
İ2
);

13905 ià(
	`JS_IsExû±iÚ
(
¥
[-2]))

13906 
exû±iÚ
;

13908 
d1
, 
d2
;

13909 
add_numb”s
:

13910 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d1
, 
İ1
)) {

13911 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13912 
exû±iÚ
;

13914 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d2
, 
İ2
))

13915 
exû±iÚ
;

13916 
¥
[-2] = 
	`JS_NewFlßt64
(
ùx
, 
d1
 + 
d2
);

13920 
exû±iÚ
:

13921 
¥
[-2] = 
JS_UNDEFINED
;

13922 
¥
[-1] = 
JS_UNDEFINED
;

13924 
	}
}

13926 
no_šlše
 
__exû±iÚ
 
	$js_bš¬y_logic_¦ow
(
JSCÚ‹xt
 *
ùx
,

13927 
JSV®ue
 *
¥
,

13928 
OPCodeEnum
 
İ
)

13930 
JSV®ue
 
İ1
, 
İ2
;

13931 
ušt32_t
 
v1
, 
v2
, 
r
;

13933 
İ1
 = 
¥
[-2];

13934 
İ2
 = 
¥
[-1];

13935 ià(
	`uÆik–y
(
	`JS_ToIÁ32F»e
(
ùx
, (
št32_t
 *)&
v1
, 
İ1
))) {

13936 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13937 
exû±iÚ
;

13939 ià(
	`uÆik–y
(
	`JS_ToIÁ32F»e
(
ùx
, (
št32_t
 *)&
v2
, 
İ2
)))

13940 
exû±iÚ
;

13941 
İ
) {

13942 
OP_shl
:

13943 
r
 = 
v1
 << (
v2
 & 0x1f);

13945 
OP_§r
:

13946 
r
 = ()
v1
 >> (
v2
 & 0x1f);

13948 
OP_ªd
:

13949 
r
 = 
v1
 & 
v2
;

13951 
OP_Ü
:

13952 
r
 = 
v1
 | 
v2
;

13954 
OP_xÜ
:

13955 
r
 = 
v1
 ^ 
v2
;

13958 
	`abÜt
();

13960 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

13962 
exû±iÚ
:

13963 
¥
[-2] = 
JS_UNDEFINED
;

13964 
¥
[-1] = 
JS_UNDEFINED
;

13966 
	}
}

13968 
no_šlše
 
	$js_nÙ_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

13970 
št32_t
 
v1
;

13972 ià(
	`uÆik–y
(
	`JS_ToIÁ32F»e
(
ùx
, &
v1
, 
¥
[-1]))) {

13973 
¥
[-1] = 
JS_UNDEFINED
;

13976 
¥
[-1] = 
	`JS_NewIÁ32
(
ùx
, ~
v1
);

13978 
	}
}

13980 
no_šlše
 
	$js_»ÏtiÚ®_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

13981 
OPCodeEnum
 
İ
)

13983 
JSV®ue
 
İ1
, 
İ2
;

13984 
»s
;

13986 
İ1
 = 
¥
[-2];

13987 
İ2
 = 
¥
[-1];

13988 
İ1
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op1, 
HINT_NUMBER
);

13989 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

13990 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

13991 
exû±iÚ
;

13993 
İ2
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op2, 
HINT_NUMBER
);

13994 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

13995 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

13996 
exû±iÚ
;

13998 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_STRING
 &&

13999 
	`JS_VALUE_GET_TAG
(
İ2
è=ğ
JS_TAG_STRING
) {

14000 
JSSŒšg
 *
p1
, *
p2
;

14001 
p1
 = 
	`JS_VALUE_GET_STRING
(
İ1
);

14002 
p2
 = 
	`JS_VALUE_GET_STRING
(
İ2
);

14003 
»s
 = 
	`js_¡ršg_com·»
(
ùx
, 
p1
, 
p2
);

14004 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14005 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14006 
İ
) {

14007 
OP_É
:

14008 
»s
 = (res < 0);

14010 
OP_Ée
:

14011 
»s
 = (res <= 0);

14013 
OP_gt
:

14014 
»s
 = (res > 0);

14017 
OP_g‹
:

14018 
»s
 = (res >= 0);

14022 
d1
, 
d2
;

14023 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d1
, 
İ1
)) {

14024 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14025 
exû±iÚ
;

14027 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d2
, 
İ2
))

14028 
exû±iÚ
;

14029 
İ
) {

14030 
OP_É
:

14031 
»s
 = (
d1
 < 
d2
);

14033 
OP_Ée
:

14034 
»s
 = (
d1
 <ğ
d2
);

14036 
OP_gt
:

14037 
»s
 = (
d1
 > 
d2
);

14040 
OP_g‹
:

14041 
»s
 = (
d1
 >ğ
d2
);

14045 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»s
);

14047 
exû±iÚ
:

14048 
¥
[-2] = 
JS_UNDEFINED
;

14049 
¥
[-1] = 
JS_UNDEFINED
;

14051 
	}
}

14053 
no_šlše
 
__exû±iÚ
 
	$js_eq_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

14054 
BOOL
 
is_Ãq
)

14056 
JSV®ue
 
İ1
, 
İ2
;

14057 
g1
, 
g2
;

14058 
BOOL
 
»s
;

14060 
İ1
 = 
¥
[-2];

14061 
İ2
 = 
¥
[-1];

14062 
»do
:

14063 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

14064 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

14065 ià(
g1
 =ğ
g2
 ||

14066 (
g1
 =ğ
JS_TAG_INT
 && 
g2
 =ğ
JS_TAG_FLOAT64
) ||

14067 (
g2
 =ğ
JS_TAG_INT
 && 
g1
 =ğ
JS_TAG_FLOAT64
)) {

14068 
»s
 = 
	`js_¡riù_eq
(
ùx
, 
İ1
, 
İ2
);

14069 } ià((
g1
 =ğ
JS_TAG_NULL
 && 
g2
 =ğ
JS_TAG_UNDEFINED
) ||

14070 (
g2
 =ğ
JS_TAG_NULL
 && 
g1
 =ğ
JS_TAG_UNDEFINED
)) {

14071 
»s
 = 
TRUE
;

14072 } ià((
g1
 =ğ
JS_TAG_STRING
 && (
g2
 =ğ
JS_TAG_INT
 ||

14073 
g2
 =ğ
JS_TAG_FLOAT64
)) ||

14074 (
g2
 =ğ
JS_TAG_STRING
 && (
g1
 =ğ
JS_TAG_INT
 ||

14075 
g1
 =ğ
JS_TAG_FLOAT64
))) {

14076 
d1
;

14077 
d2
;

14078 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d1
, 
İ1
)) {

14079 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14080 
exû±iÚ
;

14082 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d2
, 
İ2
))

14083 
exû±iÚ
;

14084 
»s
 = (
d1
 =ğ
d2
);

14085 } ià(
g1
 =ğ
JS_TAG_BOOL
) {

14086 
İ1
 = 
	`JS_NewIÁ32
(
ùx
, 
	`JS_VALUE_GET_INT
(op1));

14087 
»do
;

14088 } ià(
g2
 =ğ
JS_TAG_BOOL
) {

14089 
İ2
 = 
	`JS_NewIÁ32
(
ùx
, 
	`JS_VALUE_GET_INT
(op2));

14090 
»do
;

14091 } ià(
g1
 =ğ
JS_TAG_OBJECT
 &&

14092 (
g2
 =ğ
JS_TAG_INT
 ||ag2 =ğ
JS_TAG_FLOAT64
 ||ag2 =ğ
JS_TAG_STRING
 ||ag2 =ğ
JS_TAG_SYMBOL
)) {

14093 
İ1
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op1, 
HINT_NONE
);

14094 ià(
	`JS_IsExû±iÚ
(
İ1
)) {

14095 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14096 
exû±iÚ
;

14098 
»do
;

14099 } ià(
g2
 =ğ
JS_TAG_OBJECT
 &&

14100 (
g1
 =ğ
JS_TAG_INT
 ||ag1 =ğ
JS_TAG_FLOAT64
 ||ag1 =ğ
JS_TAG_STRING
 ||ag1 =ğ
JS_TAG_SYMBOL
)) {

14101 
İ2
 = 
	`JS_ToPrim™iveF»e
(
ùx
, op2, 
HINT_NONE
);

14102 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

14103 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14104 
exû±iÚ
;

14106 
»do
;

14108 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14109 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14110 
»s
 = 
FALSE
;

14112 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»s
 ^ 
is_Ãq
);

14114 
exû±iÚ
:

14115 
¥
[-2] = 
JS_UNDEFINED
;

14116 
¥
[-1] = 
JS_UNDEFINED
;

14118 
	}
}

14120 
no_šlše
 
	$js_shr_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

14122 
JSV®ue
 
İ1
, 
İ2
;

14123 
ušt32_t
 
v1
, 
v2
, 
r
;

14125 
İ1
 = 
¥
[-2];

14126 
İ2
 = 
¥
[-1];

14127 ià(
	`uÆik–y
(
	`JS_ToUšt32F»e
(
ùx
, &
v1
, 
İ1
))) {

14128 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14129 
exû±iÚ
;

14131 ià(
	`uÆik–y
(
	`JS_ToUšt32F»e
(
ùx
, &
v2
, 
İ2
)))

14132 
exû±iÚ
;

14133 
r
 = 
v1
 >> (
v2
 & 0x1f);

14134 
¥
[-2] = 
	`JS_NewUšt32
(
ùx
, 
r
);

14136 
exû±iÚ
:

14137 
¥
[-2] = 
JS_UNDEFINED
;

14138 
¥
[-1] = 
JS_UNDEFINED
;

14140 
	}
}

14145 
BOOL
 
	$js_¡riù_eq2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
İ1
, JSV®u
İ2
,

14146 
JSSŒiùEqModeEnum
 
eq_mode
)

14148 
BOOL
 
»s
;

14149 
g1
, 
g2
;

14150 
d1
, 
d2
;

14152 
g1
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

14153 
g2
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ2
);

14154 
g1
) {

14155 
JS_TAG_BOOL
:

14156 ià(
g1
 !ğ
g2
) {

14157 
»s
 = 
FALSE
;

14159 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
è=ğJS_VALUE_GET_INT(
İ2
);

14160 
dÚe_no_ä“
;

14163 
JS_TAG_NULL
:

14164 
JS_TAG_UNDEFINED
:

14165 
»s
 = (
g1
 =ğ
g2
);

14167 
JS_TAG_STRING
:

14169 
JSSŒšg
 *
p1
, *
p2
;

14170 ià(
g1
 !ğ
g2
) {

14171 
»s
 = 
FALSE
;

14173 
p1
 = 
	`JS_VALUE_GET_STRING
(
İ1
);

14174 
p2
 = 
	`JS_VALUE_GET_STRING
(
İ2
);

14175 
»s
 = (
	`js_¡ršg_com·»
(
ùx
, 
p1
, 
p2
) == 0);

14179 
JS_TAG_SYMBOL
:

14181 
JSAtomSŒuù
 *
p1
, *
p2
;

14182 ià(
g1
 !ğ
g2
) {

14183 
»s
 = 
FALSE
;

14185 
p1
 = 
	`JS_VALUE_GET_PTR
(
İ1
);

14186 
p2
 = 
	`JS_VALUE_GET_PTR
(
İ2
);

14187 
»s
 = (
p1
 =ğ
p2
);

14191 
JS_TAG_OBJECT
:

14192 ià(
g1
 !ğ
g2
)

14193 
»s
 = 
FALSE
;

14195 
»s
 = 
	`JS_VALUE_GET_OBJ
(
İ1
è=ğJS_VALUE_GET_OBJ(
İ2
);

14197 
JS_TAG_INT
:

14198 
d1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

14199 ià(
g2
 =ğ
JS_TAG_INT
) {

14200 
d2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

14201 
numb”_‹¡
;

14202 } ià(
g2
 =ğ
JS_TAG_FLOAT64
) {

14203 
d2
 = 
	`JS_VALUE_GET_FLOAT64
(
İ2
);

14204 
numb”_‹¡
;

14206 
»s
 = 
FALSE
;

14209 
JS_TAG_FLOAT64
:

14210 
d1
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
);

14211 ià(
g2
 =ğ
JS_TAG_FLOAT64
) {

14212 
d2
 = 
	`JS_VALUE_GET_FLOAT64
(
İ2
);

14213 } ià(
g2
 =ğ
JS_TAG_INT
) {

14214 
d2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

14216 
»s
 = 
FALSE
;

14219 
numb”_‹¡
:

14220 ià(
	`uÆik–y
(
eq_mode
 >ğ
JS_EQ_SAME_VALUE
)) {

14221 
JSFlßt64UniÚ
 
u1
, 
u2
;

14223 ià(
	`i¢ª
(
d1
è|| i¢ª(
d2
)) {

14224 
»s
 = 
	`i¢ª
(
d1
è=ği¢ª(
d2
);

14225 } ià(
eq_mode
 =ğ
JS_EQ_SAME_VALUE_ZERO
) {

14226 
»s
 = (
d1
 =ğ
d2
);

14228 
u1
.
d
 = 
d1
;

14229 
u2
.
d
 = 
d2
;

14230 
»s
 = (
u1
.
u64
 =ğ
u2
.u64);

14233 
»s
 = (
d1
 =ğ
d2
);

14235 
dÚe_no_ä“
;

14236 #ifdeà
CONFIG_BIGNUM


14237 
JS_TAG_BIG_INT
:

14239 
bf_t
 
a_s
, *
a
, 
b_s
, *
b
;

14240 ià(
g1
 !ğ
g2
) {

14241 
»s
 = 
FALSE
;

14244 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

14245 
b
 = 
	`JS_ToBigFlßt
(
ùx
, &
b_s
, 
İ2
);

14246 
»s
 = 
	`bf_cmp_eq
(
a
, 
b
);

14247 ià(
a
 =ğ&
a_s
)

14248 
	`bf_d–‘e
(
a
);

14249 ià(
b
 =ğ&
b_s
)

14250 
	`bf_d–‘e
(
b
);

14253 
JS_TAG_BIG_FLOAT
:

14255 
JSBigFlßt
 *
p1
, *
p2
;

14256 cÚ¡ 
bf_t
 *
a
, *
b
;

14257 ià(
g1
 !ğ
g2
) {

14258 
»s
 = 
FALSE
;

14261 
p1
 = 
	`JS_VALUE_GET_PTR
(
İ1
);

14262 
p2
 = 
	`JS_VALUE_GET_PTR
(
İ2
);

14263 
a
 = &
p1
->
num
;

14264 
b
 = &
p2
->
num
;

14265 ià(
	`uÆik–y
(
eq_mode
 >ğ
JS_EQ_SAME_VALUE
)) {

14266 ià(
eq_mode
 =ğ
JS_EQ_SAME_VALUE_ZERO
 &&

14267 
a
->
ex²
 =ğ
BF_EXP_ZERO
 && 
b
->expn == BF_EXP_ZERO) {

14268 
»s
 = 
TRUE
;

14270 
»s
 = (
	`bf_cmp_fuÎ
(
a
, 
b
) == 0);

14273 
»s
 = 
	`bf_cmp_eq
(
a
, 
b
);

14277 
JS_TAG_BIG_DECIMAL
:

14279 
JSBigDecim®
 *
p1
, *
p2
;

14280 cÚ¡ 
bfdec_t
 *
a
, *
b
;

14281 ià(
g1
 !ğ
g2
) {

14282 
»s
 = 
FALSE
;

14285 
p1
 = 
	`JS_VALUE_GET_PTR
(
İ1
);

14286 
p2
 = 
	`JS_VALUE_GET_PTR
(
İ2
);

14287 
a
 = &
p1
->
num
;

14288 
b
 = &
p2
->
num
;

14289 
»s
 = 
	`bfdec_cmp_eq
(
a
, 
b
);

14294 
»s
 = 
FALSE
;

14297 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14298 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14299 
dÚe_no_ä“
:

14300  
»s
;

14301 
	}
}

14303 
BOOL
 
	$js_¡riù_eq
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
İ1
, JSV®u
İ2
)

14305  
	`js_¡riù_eq2
(
ùx
, 
İ1
, 
İ2
, 
JS_EQ_STRICT
);

14306 
	}
}

14308 
BOOL
 
	$js_§me_v®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
İ1
, JSV®ueCÚ¡ 
İ2
)

14310  
	`js_¡riù_eq2
(
ùx
,

14311 
	`JS_DupV®ue
(
ùx
, 
İ1
), JS_DupV®ue(ùx, 
İ2
),

14312 
JS_EQ_SAME_VALUE
);

14313 
	}
}

14315 
BOOL
 
	$js_§me_v®ue_z”o
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
İ1
, JSV®ueCÚ¡ 
İ2
)

14317  
	`js_¡riù_eq2
(
ùx
,

14318 
	`JS_DupV®ue
(
ùx
, 
İ1
), JS_DupV®ue(ùx, 
İ2
),

14319 
JS_EQ_SAME_VALUE_ZERO
);

14320 
	}
}

14322 
no_šlše
 
	$js_¡riù_eq_¦ow
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

14323 
BOOL
 
is_Ãq
)

14325 
BOOL
 
»s
;

14326 
»s
 = 
	`js_¡riù_eq
(
ùx
, 
¥
[-2], sp[-1]);

14327 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»s
 ^ 
is_Ãq
);

14329 
	}
}

14331 
__exû±iÚ
 
	$js_İ”©Ü_š
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

14333 
JSV®ue
 
İ1
, 
İ2
;

14334 
JSAtom
 
©om
;

14335 
»t
;

14337 
İ1
 = 
¥
[-2];

14338 
İ2
 = 
¥
[-1];

14340 ià(
	`JS_VALUE_GET_TAG
(
İ2
è!ğ
JS_TAG_OBJECT
) {

14341 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid 'in' operand");

14344 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
İ1
);

14345 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

14347 
»t
 = 
	`JS_HasPrİ”ty
(
ùx
, 
İ2
, 
©om
);

14348 
	`JS_F»eAtom
(
ùx
, 
©om
);

14349 ià(
»t
 < 0)

14351 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14352 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14353 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»t
);

14355 
	}
}

14357 
__exû±iÚ
 
	$js_has_unscİabË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

14358 
JSAtom
 
©om
)

14360 
JSV®ue
 
¬r
, 
v®
;

14361 
»t
;

14363 
¬r
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_unscİabËs
);

14364 ià(
	`JS_IsExû±iÚ
(
¬r
))

14366 
»t
 = 0;

14367 ià(
	`JS_IsObjeù
(
¬r
)) {

14368 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¬r
, 
©om
);

14369 
»t
 = 
	`JS_ToBoŞF»e
(
ùx
, 
v®
);

14371 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

14372  
»t
;

14373 
	}
}

14375 
__exû±iÚ
 
	$js_İ”©Ü_š¡ªûof
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

14377 
JSV®ue
 
İ1
, 
İ2
;

14378 
BOOL
 
»t
;

14380 
İ1
 = 
¥
[-2];

14381 
İ2
 = 
¥
[-1];

14382 
»t
 = 
	`JS_IsIn¡ªûOf
(
ùx
, 
İ1
, 
İ2
);

14383 ià(
»t
 < 0)

14384  
»t
;

14385 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14386 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14387 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»t
);

14389 
	}
}

14391 
__exû±iÚ
 
	$js_İ”©Ü_ty³of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
İ1
)

14393 
JSAtom
 
©om
;

14394 
ušt32_t
 
g
;

14396 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
İ1
);

14397 
g
) {

14398 #ifdeà
CONFIG_BIGNUM


14399 
JS_TAG_BIG_INT
:

14400 
©om
 = 
JS_ATOM_bigšt
;

14402 
JS_TAG_BIG_FLOAT
:

14403 
©om
 = 
JS_ATOM_bigæßt
;

14405 
JS_TAG_BIG_DECIMAL
:

14406 
©om
 = 
JS_ATOM_bigdecim®
;

14409 
JS_TAG_INT
:

14410 
JS_TAG_FLOAT64
:

14411 
©om
 = 
JS_ATOM_numb”
;

14413 
JS_TAG_UNDEFINED
:

14414 
©om
 = 
JS_ATOM_undefšed
;

14416 
JS_TAG_BOOL
:

14417 
©om
 = 
JS_ATOM_boŞ—n
;

14419 
JS_TAG_STRING
:

14420 
©om
 = 
JS_ATOM_¡ršg
;

14422 
JS_TAG_OBJECT
:

14423 ià(
	`JS_IsFunùiÚ
(
ùx
, 
İ1
))

14424 
©om
 = 
JS_ATOM_funùiÚ
;

14426 
obj_ty³
;

14428 
JS_TAG_NULL
:

14429 
obj_ty³
:

14430 
©om
 = 
JS_ATOM_objeù
;

14432 
JS_TAG_SYMBOL
:

14433 
©om
 = 
JS_ATOM_symbŞ
;

14436 
©om
 = 
JS_ATOM_unknown
;

14439  
©om
;

14440 
	}
}

14442 
__exû±iÚ
 
	$js_İ”©Ü_d–‘e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

14444 
JSV®ue
 
İ1
, 
İ2
;

14445 
JSAtom
 
©om
;

14446 
»t
;

14448 
İ1
 = 
¥
[-2];

14449 
İ2
 = 
¥
[-1];

14450 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
İ2
);

14451 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

14453 
»t
 = 
	`JS_D–‘ePrİ”ty
(
ùx
, 
İ1
, 
©om
, 
JS_PROP_THROW_STRICT
);

14454 
	`JS_F»eAtom
(
ùx
, 
©om
);

14455 ià(
	`uÆik–y
(
»t
 < 0))

14457 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14458 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

14459 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
»t
);

14461 
	}
}

14463 
JSV®ue
 
	$js_throw_ty³_”rÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

14464 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

14466  
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid…roperty‡ccess");

14467 
	}
}

14472 
JSV®ue
 
	$js_funùiÚ_´Ùo_ÿÎ”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

14473 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

14475 
JSFunùiÚBy‹code
 *
b
 = 
	`JS_G‘FunùiÚBy‹code
(
this_v®
);

14476 ià(!
b
 || (b->
js_mode
 & 
JS_MODE_STRICT
è|| !b->
has_´ÙÙy³
) {

14477  
	`js_throw_ty³_”rÜ
(
ùx
, 
this_v®
, 0, 
NULL
);

14479  
JS_UNDEFINED
;

14480 
	}
}

14482 
JSV®ue
 
	$js_funùiÚ_´Ùo_feName
(
JSCÚ‹xt
 *
ùx
,

14483 
JSV®ueCÚ¡
 
this_v®
)

14485 
JSFunùiÚBy‹code
 *
b
 = 
	`JS_G‘FunùiÚBy‹code
(
this_v®
);

14486 ià(
b
 && b->
has_debug
) {

14487  
	`JS_AtomToSŒšg
(
ùx
, 
b
->
debug
.
f’ame
);

14489  
JS_UNDEFINED
;

14490 
	}
}

14492 
JSV®ue
 
	$js_funùiÚ_´Ùo_lšeNumb”
(
JSCÚ‹xt
 *
ùx
,

14493 
JSV®ueCÚ¡
 
this_v®
)

14495 
JSFunùiÚBy‹code
 *
b
 = 
	`JS_G‘FunùiÚBy‹code
(
this_v®
);

14496 ià(
b
 && b->
has_debug
) {

14497  
	`JS_NewIÁ32
(
ùx
, 
b
->
debug
.
lše_num
);

14499  
JS_UNDEFINED
;

14500 
	}
}

14502 
	$js_¬gum’ts_defše_own_´İ”ty
(
JSCÚ‹xt
 *
ùx
,

14503 
JSV®ueCÚ¡
 
this_obj
,

14504 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
v®
,

14505 
JSV®ueCÚ¡
 
g‘‹r
, JSV®ueCÚ¡ 
£‰”
, 
æags
)

14507 
JSObjeù
 *
p
;

14508 
ušt32_t
 
idx
;

14509 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

14511 ià(
p
->
ç¡_¬¿y
 && 
	`JS_AtomIsA¼ayIndex
(
ùx
, &
idx
, 
´İ
) &&

14512 
idx
 < 
p
->
u
.
¬¿y
.
couÁ
) {

14513 ià(
	`cÚv”t_ç¡_¬¿y_to_¬¿y
(
ùx
, 
p
))

14517  
	`JS_DefšePrİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
v®
, 
g‘‹r
, 
£‰”
,

14518 
æags
 | 
JS_PROP_NO_EXOTIC
);

14519 
	}
}

14521 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_¬gum’ts_exÙic_m‘hods
 = {

14522 .
defše_own_´İ”ty
 = 
js_¬gum’ts_defše_own_´İ”ty
,

14525 
JSV®ue
 
	$js_bud_¬gum’ts
(
JSCÚ‹xt
 *
ùx
, 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

14527 
JSV®ue
 
v®
, *
b
;

14528 
JSPrİ”ty
 *
´
;

14529 
JSObjeù
 *
p
;

14530 
i
;

14532 
v®
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_OBJECT
],

14533 
JS_CLASS_ARGUMENTS
);

14534 ià(
	`JS_IsExû±iÚ
(
v®
))

14535  
v®
;

14536 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

14539 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
JS_ATOM_Ëngth
,

14540 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

14541 
´
->
u
.
v®ue
 = 
	`JS_NewIÁ32
(
ùx
, 
¬gc
);

14544 
b
 = 
NULL
;

14545 ià(
¬gc
 > 0) {

14546 
b
 = 
	`js_m®loc
(
ùx
, Ñab[0]è* 
¬gc
);

14547 ià(!
b
) {

14548 
	`JS_F»eV®ue
(
ùx
, 
v®
);

14549  
JS_EXCEPTION
;

14551 
i
 = 0; i < 
¬gc
; i++) {

14552 
b
[
i
] = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[i]);

14555 
p
->
u
.
¬¿y
.u.
v®ues
 = 
b
;

14556 
p
->
u
.
¬¿y
.
couÁ
 = 
¬gc
;

14558 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
v®
, 
JS_ATOM_SymbŞ_™”©Ü
,

14559 
	`JS_DupV®ue
(
ùx
, ctx->
¬¿y_´Ùo_v®ues
),

14560 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
);

14562 
	`JS_DefšePrİ”ty
(
ùx
, 
v®
, 
JS_ATOM_ÿÎ“
, 
JS_UNDEFINED
,

14563 
ùx
->
throw_ty³_”rÜ
, ctx->throw_type_error,

14564 
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
);

14565  
v®
;

14566 
	}
}

14568 
	#GLOBAL_VAR_OFFSET
 0x40000000

	)

14569 
	#ARGUMENT_VAR_OFFSET
 0x20000000

	)

14572 
JSV®ue
 
	$js_bud_m­³d_¬gum’ts
(
JSCÚ‹xt
 *
ùx
, 
¬gc
,

14573 
JSV®ueCÚ¡
 *
¬gv
,

14574 
JSSckF¿me
 *
sf
, 
¬g_couÁ
)

14576 
JSV®ue
 
v®
;

14577 
JSPrİ”ty
 *
´
;

14578 
JSObjeù
 *
p
;

14579 
i
;

14581 
v®
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_OBJECT
],

14582 
JS_CLASS_MAPPED_ARGUMENTS
);

14583 ià(
	`JS_IsExû±iÚ
(
v®
))

14584  
v®
;

14585 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

14588 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
JS_ATOM_Ëngth
,

14589 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

14590 
´
->
u
.
v®ue
 = 
	`JS_NewIÁ32
(
ùx
, 
¬gc
);

14592 
i
 = 0; i < 
¬g_couÁ
; i++) {

14593 
JSV¬Ref
 *
v¬_»f
;

14594 
v¬_»f
 = 
	`g‘_v¬_»f
(
ùx
, 
sf
, 
i
, 
TRUE
);

14595 ià(!
v¬_»f
)

14596 
ç
;

14597 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
	`__JS_AtomFromUIÁ32
(
i
), 
JS_PROP_C_W_E
 | 
JS_PROP_VARREF
);

14598 ià(!
´
) {

14599 
	`ä“_v¬_»f
(
ùx
->
¹
, 
v¬_»f
);

14600 
ç
;

14602 
´
->
u
.
v¬_»f
 = var_ref;

14607 
i
 = 
¬g_couÁ
; i < 
¬gc
; i++) {

14608 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
v®
, 
i
,

14609 
	`JS_DupV®ue
(
ùx
, 
¬gv
[
i
]),

14610 
JS_PROP_C_W_E
) < 0)

14611 
ç
;

14614 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
v®
, 
JS_ATOM_SymbŞ_™”©Ü
,

14615 
	`JS_DupV®ue
(
ùx
, ctx->
¬¿y_´Ùo_v®ues
),

14616 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
);

14618 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
v®
, 
JS_ATOM_ÿÎ“
,

14619 
	`JS_DupV®ue
(
ùx
, ctx->
¹
->
cu¼’t_¡ack_äame
->
cur_func
),

14620 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
);

14621  
v®
;

14622 
ç
:

14623 
	`JS_F»eV®ue
(
ùx
, 
v®
);

14624  
JS_EXCEPTION
;

14625 
	}
}

14627 
JSV®ue
 
	$js_bud_»¡
(
JSCÚ‹xt
 *
ùx
, 
fœ¡
, 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

14629 
JSV®ue
 
v®
;

14630 
i
, 
»t
;

14632 
v®
 = 
	`JS_NewA¼ay
(
ùx
);

14633 ià(
	`JS_IsExû±iÚ
(
v®
))

14634  
v®
;

14635 
i
 = 
fœ¡
; i < 
¬gc
; i++) {

14636 
»t
 = 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
v®
, 
i
 - 
fœ¡
,

14637 
	`JS_DupV®ue
(
ùx
, 
¬gv
[
i
]),

14638 
JS_PROP_C_W_E
);

14639 ià(
»t
 < 0) {

14640 
	`JS_F»eV®ue
(
ùx
, 
v®
);

14641  
JS_EXCEPTION
;

14644  
v®
;

14645 
	}
}

14647 
JSV®ue
 
	$bud_fÜ_š_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
obj
)

14649 
JSObjeù
 *
p
, *
p1
;

14650 
JSPrİ”tyEnum
 *
b_©om
;

14651 
i
;

14652 
JSV®ue
 
’um_obj
;

14653 
JSFÜInI‹¿tÜ
 *
™
;

14654 
ušt32_t
 
g
, 
b_©om_couÁ
;

14656 
g
 = 
	`JS_VALUE_GET_TAG
(
obj
);

14657 ià(
g
 !ğ
JS_TAG_OBJECT
 &&ag !ğ
JS_TAG_NULL
 &&ag !ğ
JS_TAG_UNDEFINED
) {

14658 
obj
 = 
	`JS_ToObjeùF»e
(
ùx
, obj);

14661 
™
 = 
	`js_m®loc
(
ùx
, (*it));

14662 ià(!
™
) {

14663 
	`JS_F»eV®ue
(
ùx
, 
obj
);

14664  
JS_EXCEPTION
;

14666 
’um_obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
JS_NULL
, 
JS_CLASS_FOR_IN_ITERATOR
);

14667 ià(
	`JS_IsExû±iÚ
(
’um_obj
)) {

14668 
	`js_ä“
(
ùx
, 
™
);

14669 
	`JS_F»eV®ue
(
ùx
, 
obj
);

14670  
JS_EXCEPTION
;

14672 
™
->
is_¬¿y
 = 
FALSE
;

14673 
™
->
obj
 = obj;

14674 
™
->
idx
 = 0;

14675 
p
 = 
	`JS_VALUE_GET_OBJ
(
’um_obj
);

14676 
p
->
u
.
fÜ_š_™”©Ü
 = 
™
;

14678 ià(
g
 =ğ
JS_TAG_NULL
 ||ag =ğ
JS_TAG_UNDEFINED
)

14679  
’um_obj
;

14681 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

14684 
p1
 = 
p
->
sh­e
->
´Ùo
;

14685 
p1
 !ğ
NULL
) {

14686 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
b_©om
, &
b_©om_couÁ
, 
p1
,

14687 
JS_GPN_STRING_MASK
 | 
JS_GPN_ENUM_ONLY
))

14688 
ç
;

14689 
	`js_ä“_´İ_’um
(
ùx
, 
b_©om
, 
b_©om_couÁ
);

14690 ià(
b_©om_couÁ
 != 0) {

14691 
¦ow_·th
;

14693 
p1
 =…1->
sh­e
->
´Ùo
;

14695 ià(
p
->
ç¡_¬¿y
) {

14696 
JSSh­e
 *
sh
;

14697 
JSSh­ePrİ”ty
 *
´s
;

14699 
sh
 = 
p
->
sh­e
;

14700 
i
 = 0, 
´s
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
; i++,…rs++) {

14701 ià(
´s
->
æags
 & 
JS_PROP_ENUMERABLE
)

14702 
nÜm®_ÿ£
;

14706 ià((
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

14707 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) &&

14708 
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
) &&

14709 
	`ty³d_¬¿y_g‘_Ëngth
(
ùx
, 
p
) != 0) {

14710 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

14711 
ç
;

14714 
™
->
is_¬¿y
 = 
TRUE
;

14715 
™
->
¬¿y_Ëngth
 = 
p
->
u
.
¬¿y
.
couÁ
;

14717 
nÜm®_ÿ£
:

14718 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
b_©om
, &
b_©om_couÁ
, 
p
,

14719 
JS_GPN_STRING_MASK
 | 
JS_GPN_ENUM_ONLY
))

14720 
ç
;

14721 
i
 = 0; i < 
b_©om_couÁ
; i++) {

14722 
	`JS_S‘Prİ”tyIÁ”Çl
(
ùx
, 
’um_obj
, 
b_©om
[
i
].
©om
, 
JS_NULL
, 0);

14724 
	`js_ä“_´İ_’um
(
ùx
, 
b_©om
, 
b_©om_couÁ
);

14726  
’um_obj
;

14728 
¦ow_·th
:

14731 
p
 !ğ
NULL
) {

14732 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
b_©om
, &
b_©om_couÁ
, 
p
,

14733 
JS_GPN_STRING_MASK
 | 
JS_GPN_SET_ENUM
))

14734 
ç
;

14735 
i
 = 0; i < 
b_©om_couÁ
; i++) {

14736 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
’um_obj
, 
b_©om
[
i
].
©om
, 
JS_NULL
,

14737 (
b_©om
[
i
].
is_’um”abË
 ?

14738 
JS_PROP_ENUMERABLE
 : 0));

14740 
	`js_ä“_´İ_’um
(
ùx
, 
b_©om
, 
b_©om_couÁ
);

14741 
p
 =…->
sh­e
->
´Ùo
;

14743  
’um_obj
;

14745 
ç
:

14746 
	`JS_F»eV®ue
(
ùx
, 
’um_obj
);

14747  
JS_EXCEPTION
;

14748 
	}
}

14751 
__exû±iÚ
 
	$js_fÜ_š_¡¬t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

14753 
¥
[-1] = 
	`bud_fÜ_š_™”©Ü
(
ùx
, sp[-1]);

14754 ià(
	`JS_IsExû±iÚ
(
¥
[-1]))

14757 
	}
}

14760 
__exû±iÚ
 
	$js_fÜ_š_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

14762 
JSV®ueCÚ¡
 
’um_obj
;

14763 
JSObjeù
 *
p
;

14764 
JSAtom
 
´İ
;

14765 
JSFÜInI‹¿tÜ
 *
™
;

14766 
»t
;

14768 
’um_obj
 = 
¥
[-1];

14770 ià(
	`JS_VALUE_GET_TAG
(
’um_obj
è!ğ
JS_TAG_OBJECT
)

14771 
dÚe
;

14772 
p
 = 
	`JS_VALUE_GET_OBJ
(
’um_obj
);

14773 ià(
p
->
şass_id
 !ğ
JS_CLASS_FOR_IN_ITERATOR
)

14774 
dÚe
;

14775 
™
 = 
p
->
u
.
fÜ_š_™”©Ü
;

14778 ià(
™
->
is_¬¿y
) {

14779 ià(
™
->
idx
 >ğ™->
¬¿y_Ëngth
)

14780 
dÚe
;

14781 
´İ
 = 
	`__JS_AtomFromUIÁ32
(
™
->
idx
);

14782 
™
->
idx
++;

14784 
JSSh­e
 *
sh
 = 
p
->
sh­e
;

14785 
JSSh­ePrİ”ty
 *
´s
;

14786 ià(
™
->
idx
 >ğ
sh
->
´İ_couÁ
)

14787 
dÚe
;

14788 
´s
 = 
	`g‘_sh­e_´İ
(
sh
è+ 
™
->
idx
;

14789 
´İ
 = 
´s
->
©om
;

14790 
™
->
idx
++;

14791 ià(
´İ
 =ğ
JS_ATOM_NULL
 || !(
´s
->
æags
 & 
JS_PROP_ENUMERABLE
))

14795 
»t
 = 
	`JS_HasPrİ”ty
(
ùx
, 
™
->
obj
, 
´İ
);

14796 ià(
»t
 < 0)

14797  
»t
;

14798 ià(
»t
)

14802 
¥
[0] = 
	`JS_AtomToV®ue
(
ùx
, 
´İ
);

14803 
¥
[1] = 
JS_FALSE
;

14805 
dÚe
:

14807 
¥
[0] = 
JS_UNDEFINED
;

14808 
¥
[1] = 
JS_TRUE
;

14810 
	}
}

14812 
JSV®ue
 
	$JS_G‘I‹¿tÜ2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

14813 
JSV®ueCÚ¡
 
m‘hod
)

14815 
JSV®ue
 
’um_obj
;

14817 
’um_obj
 = 
	`JS_C®l
(
ùx
, 
m‘hod
, 
obj
, 0, 
NULL
);

14818 ià(
	`JS_IsExû±iÚ
(
’um_obj
))

14819  
’um_obj
;

14820 ià(!
	`JS_IsObjeù
(
’um_obj
)) {

14821 
	`JS_F»eV®ue
(
ùx
, 
’um_obj
);

14822  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

14824  
’um_obj
;

14825 
	}
}

14827 
JSV®ue
 
	$JS_G‘I‹¿tÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
BOOL
 
is_async
)

14829 
JSV®ue
 
m‘hod
, 
»t
, 
sync_™”
;

14831 ià(
is_async
) {

14832 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_asyncI‹¿tÜ
);

14833 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

14834  
m‘hod
;

14835 ià(
	`JS_IsUndefšed
(
m‘hod
è|| 
	`JS_IsNuÎ
(method)) {

14836 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_™”©Ü
);

14837 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

14838  
m‘hod
;

14839 
sync_™”
 = 
	`JS_G‘I‹¿tÜ2
(
ùx
, 
obj
, 
m‘hod
);

14840 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

14841 ià(
	`JS_IsExû±iÚ
(
sync_™”
))

14842  
sync_™”
;

14843 
»t
 = 
	`JS_C»©eAsyncFromSyncI‹¿tÜ
(
ùx
, 
sync_™”
);

14844 
	`JS_F»eV®ue
(
ùx
, 
sync_™”
);

14845  
»t
;

14848 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_™”©Ü
);

14849 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

14850  
m‘hod
;

14852 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
m‘hod
)) {

14853 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

14854  
	`JS_ThrowTy³E¼Ü
(
ùx
, "value is‚ot iterable");

14856 
»t
 = 
	`JS_G‘I‹¿tÜ2
(
ùx
, 
obj
, 
m‘hod
);

14857 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

14858  
»t
;

14859 
	}
}

14862 
JSV®ue
 
	$JS_I‹¿tÜNext2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
’um_obj
,

14863 
JSV®ueCÚ¡
 
m‘hod
,

14864 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, *
pdÚe
)

14866 
JSV®ue
 
obj
;

14870 ià(
	`JS_IsObjeù
(
m‘hod
)) {

14871 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
m‘hod
);

14872 ià(
p
->
şass_id
 =ğ
JS_CLASS_C_FUNCTION
 &&

14873 
p
->
u
.
cfunc
.
ırÙo
 =ğ
JS_CFUNC_™”©Ü_Ãxt
) {

14874 
JSCFunùiÚTy³
 
func
;

14875 
JSV®ueCÚ¡
 
¬gs
[1];

14878 ià(
¬gc
 == 0) {

14879 
¬gs
[0] = 
JS_UNDEFINED
;

14880 
¬gv
 = 
¬gs
;

14882 
func
 = 
p
->
u
.
cfunc
.
c_funùiÚ
;

14883  
func
.
	`™”©Ü_Ãxt
(
ùx
, 
’um_obj
, 
¬gc
, 
¬gv
,

14884 
pdÚe
, 
p
->
u
.
cfunc
.
magic
);

14887 
obj
 = 
	`JS_C®l
(
ùx
, 
m‘hod
, 
’um_obj
, 
¬gc
, 
¬gv
);

14888 ià(
	`JS_IsExû±iÚ
(
obj
))

14889 
ç
;

14890 ià(!
	`JS_IsObjeù
(
obj
)) {

14891 
	`JS_F»eV®ue
(
ùx
, 
obj
);

14892 
	`JS_ThrowTy³E¼Ü
(
ùx
, "iterator must„eturn‡n object");

14893 
ç
;

14895 *
pdÚe
 = 2;

14896  
obj
;

14897 
ç
:

14898 *
pdÚe
 = 
FALSE
;

14899  
JS_EXCEPTION
;

14900 
	}
}

14902 
JSV®ue
 
	$JS_I‹¿tÜNext
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
’um_obj
,

14903 
JSV®ueCÚ¡
 
m‘hod
,

14904 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
BOOL
 *
pdÚe
)

14906 
JSV®ue
 
obj
, 
v®ue
, 
dÚe_v®
;

14907 
dÚe
;

14909 
obj
 = 
	`JS_I‹¿tÜNext2
(
ùx
, 
’um_obj
, 
m‘hod
, 
¬gc
, 
¬gv
, &
dÚe
);

14910 ià(
	`JS_IsExû±iÚ
(
obj
))

14911 
ç
;

14912 ià(
dÚe
 != 2) {

14913 *
pdÚe
 = 
dÚe
;

14914  
obj
;

14916 
dÚe_v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_dÚe
);

14917 ià(
	`JS_IsExû±iÚ
(
dÚe_v®
))

14918 
ç
;

14919 *
pdÚe
 = 
	`JS_ToBoŞF»e
(
ùx
, 
dÚe_v®
);

14920 
v®ue
 = 
JS_UNDEFINED
;

14921 ià(!*
pdÚe
) {

14922 
v®ue
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_v®ue
);

14924 
	`JS_F»eV®ue
(
ùx
, 
obj
);

14925  
v®ue
;

14927 
ç
:

14928 
	`JS_F»eV®ue
(
ùx
, 
obj
);

14929 *
pdÚe
 = 
FALSE
;

14930  
JS_EXCEPTION
;

14931 
	}
}

14934 
	$JS_I‹¿tÜClo£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
’um_obj
,

14935 
BOOL
 
is_exû±iÚ_³ndšg
)

14937 
JSV®ue
 
m‘hod
, 
»t
, 
ex_obj
;

14938 
»s
;

14940 ià(
is_exû±iÚ_³ndšg
) {

14941 
ex_obj
 = 
ùx
->
¹
->
cu¼’t_exû±iÚ
;

14942 
ùx
->
¹
->
cu¼’t_exû±iÚ
 = 
JS_NULL
;

14943 
»s
 = -1;

14945 
ex_obj
 = 
JS_UNDEFINED
;

14946 
»s
 = 0;

14948 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
’um_obj
, 
JS_ATOM_»tuº
);

14949 ià(
	`JS_IsExû±iÚ
(
m‘hod
)) {

14950 
»s
 = -1;

14951 
dÚe
;

14953 ià(
	`JS_IsUndefšed
(
m‘hod
è|| 
	`JS_IsNuÎ
(method)) {

14954 
dÚe
;

14956 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
’um_obj
, 0, 
NULL
);

14957 ià(!
is_exû±iÚ_³ndšg
) {

14958 ià(
	`JS_IsExû±iÚ
(
»t
)) {

14959 
»s
 = -1;

14960 } ià(!
	`JS_IsObjeù
(
»t
)) {

14961 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

14962 
»s
 = -1;

14965 
	`JS_F»eV®ue
(
ùx
, 
»t
);

14966 
dÚe
:

14967 ià(
is_exû±iÚ_³ndšg
) {

14968 
	`JS_Throw
(
ùx
, 
ex_obj
);

14970  
»s
;

14971 
	}
}

14974 
__exû±iÚ
 
	$js_fÜ_of_¡¬t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

14975 
BOOL
 
is_async
)

14977 
JSV®ue
 
İ1
, 
obj
, 
m‘hod
;

14978 
İ1
 = 
¥
[-1];

14979 
obj
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
İ1
, 
is_async
);

14980 ià(
	`JS_IsExû±iÚ
(
obj
))

14982 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

14983 
¥
[-1] = 
obj
;

14984 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ãxt
);

14985 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

14987 
¥
[0] = 
m‘hod
;

14989 
	}
}

14992 
__exû±iÚ
 
	$js_fÜ_of_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
, 
off£t
)

14994 
JSV®ue
 
v®ue
 = 
JS_UNDEFINED
;

14995 
dÚe
 = 1;

14997 ià(
	`lik–y
(!
	`JS_IsUndefšed
(
¥
[
off£t
]))) {

14998 
v®ue
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
¥
[
off£t
], sp[off£ˆ+ 1], 0, 
NULL
, &
dÚe
);

14999 ià(
	`JS_IsExû±iÚ
(
v®ue
))

15000 
dÚe
 = -1;

15001 ià(
dÚe
) {

15004 
	`JS_F»eV®ue
(
ùx
, 
¥
[
off£t
]);

15005 
¥
[
off£t
] = 
JS_UNDEFINED
;

15006 ià(
dÚe
 < 0)

15010 
¥
[0] = 
v®ue
;

15011 
¥
[1] = 
	`JS_NewBoŞ
(
ùx
, 
dÚe
);

15013 
	}
}

15015 
__exû±iÚ
 
	$js_fÜ_awa™_of_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

15017 
JSV®ue
 
»suÉ
;

15018 
»suÉ
 = 
	`JS_C®l
(
ùx
, 
¥
[-2], sp[-3], 0, 
NULL
);

15019 ià(
	`JS_IsExû±iÚ
(
»suÉ
))

15021 
¥
[0] = 
»suÉ
;

15023 
	}
}

15025 
JSV®ue
 
	$JS_I‹¿tÜG‘Com¶‘eV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

15026 
BOOL
 *
pdÚe
)

15028 
JSV®ue
 
dÚe_v®
, 
v®ue
;

15029 
BOOL
 
dÚe
;

15030 
dÚe_v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_dÚe
);

15031 ià(
	`JS_IsExû±iÚ
(
dÚe_v®
))

15032 
ç
;

15033 
dÚe
 = 
	`JS_ToBoŞF»e
(
ùx
, 
dÚe_v®
);

15034 
v®ue
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_v®ue
);

15035 ià(
	`JS_IsExû±iÚ
(
v®ue
))

15036 
ç
;

15037 *
pdÚe
 = 
dÚe
;

15038  
v®ue
;

15039 
ç
:

15040 *
pdÚe
 = 
FALSE
;

15041  
JS_EXCEPTION
;

15042 
	}
}

15044 
__exû±iÚ
 
	$js_™”©Ü_g‘_v®ue_dÚe
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

15046 
JSV®ue
 
obj
, 
v®ue
;

15047 
BOOL
 
dÚe
;

15048 
obj
 = 
¥
[-1];

15049 ià(!
	`JS_IsObjeù
(
obj
)) {

15050 
	`JS_ThrowTy³E¼Ü
(
ùx
, "iterator must„eturn‡n object");

15053 
v®ue
 = 
	`JS_I‹¿tÜG‘Com¶‘eV®ue
(
ùx
, 
obj
, &
dÚe
);

15054 ià(
	`JS_IsExû±iÚ
(
v®ue
))

15056 
	`JS_F»eV®ue
(
ùx
, 
obj
);

15057 
¥
[-1] = 
v®ue
;

15058 
¥
[0] = 
	`JS_NewBoŞ
(
ùx
, 
dÚe
);

15060 
	}
}

15062 
JSV®ue
 
	$js_ü—‹_™”©Ü_»suÉ
(
JSCÚ‹xt
 *
ùx
,

15063 
JSV®ue
 
v®
,

15064 
BOOL
 
dÚe
)

15066 
JSV®ue
 
obj
;

15067 
obj
 = 
	`JS_NewObjeù
(
ùx
);

15068 ià(
	`JS_IsExû±iÚ
(
obj
)) {

15069 
	`JS_F»eV®ue
(
ùx
, 
v®
);

15070  
obj
;

15072 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_v®ue
,

15073 
v®
, 
JS_PROP_C_W_E
) < 0) {

15074 
ç
;

15076 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_dÚe
,

15077 
	`JS_NewBoŞ
(
ùx
, 
dÚe
), 
JS_PROP_C_W_E
) < 0) {

15078 
ç
:

15079 
	`JS_F»eV®ue
(
ùx
, 
obj
);

15080  
JS_EXCEPTION
;

15082  
obj
;

15083 
	}
}

15085 
JSV®ue
 
js_¬¿y_™”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

15086 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

15087 
BOOL
 *
pdÚe
, 
magic
);

15089 
JSV®ue
 
js_ü—‹_¬¿y_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

15090 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
);

15092 
BOOL
 
	$js_is_ç¡_¬¿y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

15095 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

15096 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

15097 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
 &&…->
ç¡_¬¿y
) {

15098  
TRUE
;

15101  
FALSE
;

15102 
	}
}

15105 
BOOL
 
	$js_g‘_ç¡_¬¿y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

15106 
JSV®ue
 **
¬½p
, 
ušt32_t
 *
couÁp
)

15109 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

15110 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

15111 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
 &&…->
ç¡_¬¿y
) {

15112 *
couÁp
 = 
p
->
u
.
¬¿y
.
couÁ
;

15113 *
¬½p
 = 
p
->
u
.
¬¿y
.u.
v®ues
;

15114  
TRUE
;

15117  
FALSE
;

15118 
	}
}

15120 
__exû±iÚ
 
	$js_­³nd_’um”©e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
)

15122 
JSV®ue
 
™”©Ü
, 
’umobj
, 
m‘hod
, 
v®ue
;

15123 
pos
, 
is_¬¿y_™”©Ü
;

15124 
JSV®ue
 *
¬½
;

15125 
ušt32_t
 
i
, 
couÁ32
;

15127 ià(
	`JS_VALUE_GET_TAG
(
¥
[-2]è!ğ
JS_TAG_INT
) {

15128 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "invalid index for‡ppend");

15132 
pos
 = 
	`JS_VALUE_GET_INT
(
¥
[-2]);

15140 
™”©Ü
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¥
[-1], 
JS_ATOM_SymbŞ_™”©Ü
);

15141 ià(
	`JS_IsExû±iÚ
(
™”©Ü
))

15143 
is_¬¿y_™”©Ü
 = 
	`JS_IsCFunùiÚ
(
ùx
, 
™”©Ü
,

15144 (
JSCFunùiÚ
 *)
js_ü—‹_¬¿y_™”©Ü
,

15145 
JS_ITERATOR_KIND_VALUE
);

15146 
	`JS_F»eV®ue
(
ùx
, 
™”©Ü
);

15148 
’umobj
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
¥
[-1], 
FALSE
);

15149 ià(
	`JS_IsExû±iÚ
(
’umobj
))

15151 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
’umobj
, 
JS_ATOM_Ãxt
);

15152 ià(
	`JS_IsExû±iÚ
(
m‘hod
)) {

15153 
	`JS_F»eV®ue
(
ùx
, 
’umobj
);

15156 ià(
is_¬¿y_™”©Ü


15157 && 
	`JS_IsCFunùiÚ
(
ùx
, 
m‘hod
, (
JSCFunùiÚ
 *)
js_¬¿y_™”©Ü_Ãxt
, 0)

15158 && 
	`js_g‘_ç¡_¬¿y
(
ùx
, 
¥
[-1], &
¬½
, &
couÁ32
)) {

15159 
sšt64_t
 
Ën
;

15161 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
¥
[-1]))

15162 
exû±iÚ
;

15163 
i
 = 0; i < 
couÁ32
; i++) {

15164 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
¥
[-3], 
pos
++,

15165 
	`JS_DupV®ue
(
ùx
, 
¬½
[
i
]), 
JS_PROP_C_W_E
) < 0)

15166 
exû±iÚ
;

15168 ià(
Ën
 > 
couÁ32
) {

15172 
pos
 +ğ
Ën
 - 
couÁ32
;

15173 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
¥
[-3], 
JS_ATOM_Ëngth
, 
	`JS_NewUšt32
(ùx, 
pos
)) < 0)

15174 
exû±iÚ
;

15178 
BOOL
 
dÚe
;

15179 
v®ue
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
’umobj
, 
m‘hod
, 0, 
NULL
, &
dÚe
);

15180 ià(
	`JS_IsExû±iÚ
(
v®ue
))

15181 
exû±iÚ
;

15182 ià(
dÚe
) {

15186 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
¥
[-3], 
pos
++, 
v®ue
, 
JS_PROP_C_W_E
) < 0)

15187 
exû±iÚ
;

15190 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
pos
);

15191 
	`JS_F»eV®ue
(
ùx
, 
’umobj
);

15192 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

15195 
exû±iÚ
:

15196 
	`JS_I‹¿tÜClo£
(
ùx
, 
’umobj
, 
TRUE
);

15197 
	`JS_F»eV®ue
(
ùx
, 
’umobj
);

15198 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

15200 
	}
}

15202 
__exû±iÚ
 
	$JS_CİyD©aPrİ”t›s
(
JSCÚ‹xt
 *
ùx
,

15203 
JSV®ueCÚ¡
 
rg‘
,

15204 
JSV®ueCÚ¡
 
sourû
,

15205 
JSV®ueCÚ¡
 
exşuded
,

15206 
BOOL
 
£rİ
)

15208 
JSPrİ”tyEnum
 *
b_©om
;

15209 
JSV®ue
 
v®
;

15210 
ušt32_t
 
i
, 
b_©om_couÁ
;

15211 
JSObjeù
 *
p
;

15212 
JSObjeù
 *
³xş
 = 
NULL
;

15213 
»t
 = 0, 
æags
;

15215 ià(
	`JS_VALUE_GET_TAG
(
sourû
è!ğ
JS_TAG_OBJECT
)

15218 ià(
	`JS_VALUE_GET_TAG
(
exşuded
è=ğ
JS_TAG_OBJECT
)

15219 
³xş
 = 
	`JS_VALUE_GET_OBJ
(
exşuded
);

15221 
p
 = 
	`JS_VALUE_GET_OBJ
(
sourû
);

15222 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
b_©om
, &
b_©om_couÁ
, 
p
,

15223 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
 |

15224 
JS_GPN_ENUM_ONLY
))

15227 
æags
 = 
JS_PROP_C_W_E
;

15229 
i
 = 0; i < 
b_©om_couÁ
; i++) {

15230 ià(
³xş
) {

15231 
»t
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, 
NULL
, 
³xş
, 
b_©om
[
i
].
©om
);

15232 ià(
»t
) {

15233 ià(
»t
 < 0)

15235 
»t
 = 0;

15239 
»t
 = -1;

15240 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
sourû
, 
b_©om
[
i
].
©om
);

15241 ià(
	`JS_IsExû±iÚ
(
v®
))

15243 ià(
£rİ
)

15244 
»t
 = 
	`JS_S‘Prİ”ty
(
ùx
, 
rg‘
, 
b_©om
[
i
].
©om
, 
v®
);

15246 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
rg‘
, 
b_©om
[
i
].
©om
, 
v®
, 
æags
);

15247 ià(
»t
 < 0)

15249 
»t
 = 0;

15251 
	`js_ä“_´İ_’um
(
ùx
, 
b_©om
, 
b_©om_couÁ
);

15252  
»t
;

15253 
	}
}

15256 
JSV®ueCÚ¡
 
	$JS_G‘AùiveFunùiÚ
(
JSCÚ‹xt
 *
ùx
)

15258  
ùx
->
¹
->
cu¼’t_¡ack_äame
->
cur_func
;

15259 
	}
}

15261 
JSV¬Ref
 *
	$g‘_v¬_»f
(
JSCÚ‹xt
 *
ùx
, 
JSSckF¿me
 *
sf
,

15262 
v¬_idx
, 
BOOL
 
is_¬g
)

15264 
JSV¬Ref
 *
v¬_»f
;

15265 
li¡_h—d
 *
–
;

15267 
	`li¡_fÜ_—ch
(
–
, &
sf
->
v¬_»f_li¡
) {

15268 
v¬_»f
 = 
	`li¡_’Œy
(
–
, 
JSV¬Ref
, 
h—d”
.
lšk
);

15269 ià(
v¬_»f
->
v¬_idx
 =ğv¬_idx && v¬_»f->
is_¬g
 == is_arg) {

15270 
v¬_»f
->
h—d”
.
»f_couÁ
++;

15271  
v¬_»f
;

15275 
v¬_»f
 = 
	`js_m®loc
(
ùx
, (
JSV¬Ref
));

15276 ià(!
v¬_»f
)

15277  
NULL
;

15278 
v¬_»f
->
h—d”
.
»f_couÁ
 = 1;

15279 
v¬_»f
->
is_d‘ached
 = 
FALSE
;

15280 
v¬_»f
->
is_¬g
 = is_arg;

15281 
v¬_»f
->
v¬_idx
 = var_idx;

15282 
	`li¡_add_
(&
v¬_»f
->
h—d”
.
lšk
, &
sf
->
v¬_»f_li¡
);

15283 ià(
is_¬g
)

15284 
v¬_»f
->
pv®ue
 = &
sf
->
¬g_buf
[
v¬_idx
];

15286 
v¬_»f
->
pv®ue
 = &
sf
->
v¬_buf
[
v¬_idx
];

15287 
v¬_»f
->
v®ue
 = 
JS_UNDEFINED
;

15288  
v¬_»f
;

15289 
	}
}

15291 
JSV®ue
 
	$js_şosu»2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
func_obj
,

15292 
JSFunùiÚBy‹code
 *
b
,

15293 
JSV¬Ref
 **
cur_v¬_»fs
,

15294 
JSSckF¿me
 *
sf
)

15296 
JSObjeù
 *
p
;

15297 
JSV¬Ref
 **
v¬_»fs
;

15298 
i
;

15300 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

15301 
p
->
u
.
func
.
funùiÚ_by‹code
 = 
b
;

15302 
p
->
u
.
func
.
home_objeù
 = 
NULL
;

15303 
p
->
u
.
func
.
v¬_»fs
 = 
NULL
;

15304 ià(
b
->
şosu»_v¬_couÁ
) {

15305 
v¬_»fs
 = 
	`js_m®locz
(
ùx
, (v¬_»fs[0]è* 
b
->
şosu»_v¬_couÁ
);

15306 ià(!
v¬_»fs
)

15307 
ç
;

15308 
p
->
u
.
func
.
v¬_»fs
 = var_refs;

15309 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

15310 
JSClosu»V¬
 *
cv
 = &
b
->
şosu»_v¬
[
i
];

15311 
JSV¬Ref
 *
v¬_»f
;

15312 ià(
cv
->
is_loÿl
) {

15314 
v¬_»f
 = 
	`g‘_v¬_»f
(
ùx
, 
sf
, 
cv
->
v¬_idx
, cv->
is_¬g
);

15315 ià(!
v¬_»f
)

15316 
ç
;

15318 
v¬_»f
 = 
cur_v¬_»fs
[
cv
->
v¬_idx
];

15319 
v¬_»f
->
h—d”
.
»f_couÁ
++;

15321 
v¬_»fs
[
i
] = 
v¬_»f
;

15324  
func_obj
;

15325 
ç
:

15327 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

15328  
JS_EXCEPTION
;

15329 
	}
}

15331 
	$js_š¡ªtŸ‹_´ÙÙy³
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSAtom
 
©om
, *
İaque
)

15333 
JSV®ue
 
obj
, 
this_v®
;

15334 
»t
;

15336 
this_v®
 = 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
);

15337 
obj
 = 
	`JS_NewObjeù
(
ùx
);

15338 ià(
	`JS_IsExû±iÚ
(
obj
))

15340 
	`£t_cyşe_æag
(
ùx
, 
obj
);

15341 
	`£t_cyşe_æag
(
ùx
, 
this_v®
);

15342 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_cÚ¡ruùÜ
,

15343 
	`JS_DupV®ue
(
ùx
, 
this_v®
),

15344 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

15345 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
this_v®
, 
©om
, 
obj
, 
JS_PROP_WRITABLE
è< 0 || 
»t
 < 0)

15348 
	}
}

15350 cÚ¡ 
ušt16_t
 
	gfunc_kšd_to_şass_id
[] = {

15351 [
JS_FUNC_NORMAL
] = 
JS_CLASS_BYTECODE_FUNCTION
,

15352 [
JS_FUNC_GENERATOR
] = 
JS_CLASS_GENERATOR_FUNCTION
,

15353 [
JS_FUNC_ASYNC
] = 
JS_CLASS_ASYNC_FUNCTION
,

15354 [
JS_FUNC_ASYNC_GENERATOR
] = 
JS_CLASS_ASYNC_GENERATOR_FUNCTION
,

15357 
JSV®ue
 
	$js_şosu»
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
bfunc
,

15358 
JSV¬Ref
 **
cur_v¬_»fs
,

15359 
JSSckF¿me
 *
sf
)

15361 
JSFunùiÚBy‹code
 *
b
;

15362 
JSV®ue
 
func_obj
;

15363 
JSAtom
 
Çme_©om
;

15365 
b
 = 
	`JS_VALUE_GET_PTR
(
bfunc
);

15366 
func_obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
func_kšd_to_şass_id
[
b
->
func_kšd
]);

15367 ià(
	`JS_IsExû±iÚ
(
func_obj
)) {

15368 
	`JS_F»eV®ue
(
ùx
, 
bfunc
);

15369  
JS_EXCEPTION
;

15371 
func_obj
 = 
	`js_şosu»2
(
ùx
, func_obj, 
b
, 
cur_v¬_»fs
, 
sf
);

15372 ià(
	`JS_IsExû±iÚ
(
func_obj
)) {

15374 
ç
;

15376 
Çme_©om
 = 
b
->
func_Çme
;

15377 ià(
Çme_©om
 =ğ
JS_ATOM_NULL
)

15378 
Çme_©om
 = 
JS_ATOM_em±y_¡ršg
;

15379 
	`js_funùiÚ_£t_´İ”t›s
(
ùx
, 
func_obj
, 
Çme_©om
,

15380 
b
->
defšed_¬g_couÁ
);

15382 ià(
b
->
func_kšd
 & 
JS_FUNC_GENERATOR
) {

15383 
JSV®ue
 
´Ùo
;

15384 
´Ùo_şass_id
;

15387 ià(
b
->
func_kšd
 =ğ
JS_FUNC_ASYNC_GENERATOR
)

15388 
´Ùo_şass_id
 = 
JS_CLASS_ASYNC_GENERATOR
;

15390 
´Ùo_şass_id
 = 
JS_CLASS_GENERATOR
;

15391 
´Ùo
 = 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
şass_´Ùo
[
´Ùo_şass_id
]);

15392 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

15393 
ç
;

15394 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_´ÙÙy³
, 
´Ùo
,

15395 
JS_PROP_WRITABLE
);

15396 } ià(
b
->
has_´ÙÙy³
) {

15400 
	`JS_S‘CÚ¡ruùÜB™
(
ùx
, 
func_obj
, 
TRUE
);

15401 
	`JS_DefšeAutoIn™Prİ”ty
(
ùx
, 
func_obj
, 
JS_ATOM_´ÙÙy³
,

15402 
JS_AUTOINIT_ID_PROTOTYPE
, 
NULL
,

15403 
JS_PROP_WRITABLE
);

15405  
func_obj
;

15406 
ç
:

15408 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

15409  
JS_EXCEPTION
;

15410 
	}
}

15412 
	#JS_DEFINE_CLASS_HAS_HERITAGE
 (1 << 0)

	)

15414 
	$js_İ_defše_şass
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¥
,

15415 
JSAtom
 
şass_Çme
, 
şass_æags
,

15416 
JSV¬Ref
 **
cur_v¬_»fs
,

15417 
JSSckF¿me
 *
sf
, 
BOOL
 
is_compu‹d_Çme
)

15419 
JSV®ue
 
bfunc
, 
·»Á_şass
, 
´Ùo
 = 
JS_UNDEFINED
;

15420 
JSV®ue
 
ùÜ
 = 
JS_UNDEFINED
, 
·»Á_´Ùo
 = JS_UNDEFINED;

15421 
JSFunùiÚBy‹code
 *
b
;

15423 
·»Á_şass
 = 
¥
[-2];

15424 
bfunc
 = 
¥
[-1];

15426 ià(
şass_æags
 & 
JS_DEFINE_CLASS_HAS_HERITAGE
) {

15427 ià(
	`JS_IsNuÎ
(
·»Á_şass
)) {

15428 
·»Á_´Ùo
 = 
JS_NULL
;

15429 
·»Á_şass
 = 
	`JS_DupV®ue
(
ùx
, ctx->
funùiÚ_´Ùo
);

15431 ià(!
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
·»Á_şass
)) {

15432 
	`JS_ThrowTy³E¼Ü
(
ùx
, "parent class must be constructor");

15433 
ç
;

15435 
·»Á_´Ùo
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
·»Á_şass
, 
JS_ATOM_´ÙÙy³
);

15436 ià(
	`JS_IsExû±iÚ
(
·»Á_´Ùo
))

15437 
ç
;

15438 ià(!
	`JS_IsNuÎ
(
·»Á_´Ùo
è&& !
	`JS_IsObjeù
(parent_proto)) {

15439 
	`JS_ThrowTy³E¼Ü
(
ùx
, "parent…rototype must be‡n object or‚ull");

15440 
ç
;

15445 
·»Á_´Ùo
 = 
	`JS_DupV®ue
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_OBJECT
]);

15446 
·»Á_şass
 = 
	`JS_DupV®ue
(
ùx
, ctx->
funùiÚ_´Ùo
);

15448 
´Ùo
 = 
	`JS_NewObjeùPrÙo
(
ùx
, 
·»Á_´Ùo
);

15449 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

15450 
ç
;

15452 
b
 = 
	`JS_VALUE_GET_PTR
(
bfunc
);

15453 
	`as£¹
(
b
->
func_kšd
 =ğ
JS_FUNC_NORMAL
);

15454 
ùÜ
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
·»Á_şass
,

15455 
JS_CLASS_BYTECODE_FUNCTION
);

15456 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

15457 
ç
;

15458 
ùÜ
 = 
	`js_şosu»2
(
ùx
, ctÜ, 
b
, 
cur_v¬_»fs
, 
sf
);

15459 
bfunc
 = 
JS_UNDEFINED
;

15460 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

15461 
ç
;

15462 
	`js_m‘hod_£t_home_objeù
(
ùx
, 
ùÜ
, 
´Ùo
);

15463 
	`JS_S‘CÚ¡ruùÜB™
(
ùx
, 
ùÜ
, 
TRUE
);

15465 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
ùÜ
, 
JS_ATOM_Ëngth
,

15466 
	`JS_NewIÁ32
(
ùx
, 
b
->
defšed_¬g_couÁ
),

15467 
JS_PROP_CONFIGURABLE
);

15469 ià(
is_compu‹d_Çme
) {

15470 ià(
	`JS_DefšeObjeùNameCompu‹d
(
ùx
, 
ùÜ
, 
¥
[-3],

15471 
JS_PROP_CONFIGURABLE
) < 0)

15472 
ç
;

15474 ià(
	`JS_DefšeObjeùName
(
ùx
, 
ùÜ
, 
şass_Çme
, 
JS_PROP_CONFIGURABLE
) < 0)

15475 
ç
;

15480 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
´Ùo
, 
JS_ATOM_cÚ¡ruùÜ
,

15481 
	`JS_DupV®ue
(
ùx
, 
ùÜ
),

15482 
JS_PROP_CONFIGURABLE
 |

15483 
JS_PROP_WRITABLE
 | 
JS_PROP_THROW
) < 0)

15484 
ç
;

15486 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
ùÜ
, 
JS_ATOM_´ÙÙy³
,

15487 
	`JS_DupV®ue
(
ùx
, 
´Ùo
), 
JS_PROP_THROW
) < 0)

15488 
ç
;

15489 
	`£t_cyşe_æag
(
ùx
, 
ùÜ
);

15490 
	`£t_cyşe_æag
(
ùx
, 
´Ùo
);

15492 
	`JS_F»eV®ue
(
ùx
, 
·»Á_´Ùo
);

15493 
	`JS_F»eV®ue
(
ùx
, 
·»Á_şass
);

15495 
¥
[-2] = 
ùÜ
;

15496 
¥
[-1] = 
´Ùo
;

15498 
ç
:

15499 
	`JS_F»eV®ue
(
ùx
, 
·»Á_şass
);

15500 
	`JS_F»eV®ue
(
ùx
, 
·»Á_´Ùo
);

15501 
	`JS_F»eV®ue
(
ùx
, 
bfunc
);

15502 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

15503 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

15504 
¥
[-2] = 
JS_UNDEFINED
;

15505 
¥
[-1] = 
JS_UNDEFINED
;

15507 
	}
}

15509 
	$şo£_v¬_»fs
(
JSRuÁime
 *
¹
, 
JSSckF¿me
 *
sf
)

15511 
li¡_h—d
 *
–
, *
–1
;

15512 
JSV¬Ref
 *
v¬_»f
;

15513 
v¬_idx
;

15515 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
sf
->
v¬_»f_li¡
) {

15516 
v¬_»f
 = 
	`li¡_’Œy
(
–
, 
JSV¬Ref
, 
h—d”
.
lšk
);

15517 
v¬_idx
 = 
v¬_»f
->var_idx;

15518 ià(
v¬_»f
->
is_¬g
)

15519 
v¬_»f
->
v®ue
 = 
	`JS_DupV®ueRT
(
¹
, 
sf
->
¬g_buf
[
v¬_idx
]);

15521 
v¬_»f
->
v®ue
 = 
	`JS_DupV®ueRT
(
¹
, 
sf
->
v¬_buf
[
v¬_idx
]);

15522 
v¬_»f
->
pv®ue
 = &v¬_»f->
v®ue
;

15524 
v¬_»f
->
is_d‘ached
 = 
TRUE
;

15525 
	`add_gc_objeù
(
¹
, &
v¬_»f
->
h—d”
, 
JS_GC_OBJ_TYPE_VAR_REF
);

15527 
	}
}

15529 
	$şo£_Ëxiÿl_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSSckF¿me
 *
sf
, 
idx
, 
is_¬g
)

15531 
li¡_h—d
 *
–
, *
–1
;

15532 
JSV¬Ref
 *
v¬_»f
;

15533 
v¬_idx
 = 
idx
;

15535 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
sf
->
v¬_»f_li¡
) {

15536 
v¬_»f
 = 
	`li¡_’Œy
(
–
, 
JSV¬Ref
, 
h—d”
.
lšk
);

15537 ià(
v¬_idx
 =ğ
v¬_»f
->v¬_idx && v¬_»f->
is_¬g
 == is_arg) {

15538 
v¬_»f
->
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
sf
->
v¬_buf
[
v¬_idx
]);

15539 
v¬_»f
->
pv®ue
 = &v¬_»f->
v®ue
;

15540 
	`li¡_d–
(&
v¬_»f
->
h—d”
.
lšk
);

15542 
v¬_»f
->
is_d‘ached
 = 
TRUE
;

15543 
	`add_gc_objeù
(
ùx
->
¹
, &
v¬_»f
->
h—d”
, 
JS_GC_OBJ_TYPE_VAR_REF
);

15546 
	}
}

15548 
	#JS_CALL_FLAG_COPY_ARGV
 (1 << 1)

	)

15549 
	#JS_CALL_FLAG_GENERATOR
 (1 << 2)

	)

15551 
JSV®ue
 
	$js_ÿÎ_c_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

15552 
JSV®ueCÚ¡
 
this_obj
,

15553 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
)

15555 
JSRuÁime
 *
¹
 = 
ùx
->rt;

15556 
JSCFunùiÚTy³
 
func
;

15557 
JSObjeù
 *
p
;

15558 
JSSckF¿me
 
sf_s
, *
sf
 = &sf_s, *
´ev_sf
;

15559 
JSV®ue
 
»t_v®
;

15560 
JSV®ueCÚ¡
 *
¬g_buf
;

15561 
¬g_couÁ
, 
i
;

15562 
JSCFunùiÚEnum
 
ırÙo
;

15564 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

15565 
ırÙo
 = 
p
->
u
.
cfunc
.cproto;

15566 
¬g_couÁ
 = 
p
->
u
.
cfunc
.
Ëngth
;

15569 ià(
	`js_check_¡ack_ov”æow
(
¹
, (
¬g_buf
[0]è* 
¬g_couÁ
))

15570  
	`JS_ThrowSckOv”æow
(
ùx
);

15572 
´ev_sf
 = 
¹
->
cu¼’t_¡ack_äame
;

15573 
sf
->
´ev_äame
 = 
´ev_sf
;

15574 
¹
->
cu¼’t_¡ack_äame
 = 
sf
;

15575 
ùx
 = 
p
->
u
.
cfunc
.
»®m
;

15577 #ifdeà
CONFIG_BIGNUM


15580 ià(
´ev_sf
)

15581 
sf
->
js_mode
 = 
´ev_sf
->js_mod& 
JS_MODE_MATH
;

15583 
sf
->
js_mode
 = 0;

15585 
sf
->
js_mode
 = 0;

15587 
sf
->
cur_func
 = (
JSV®ue
)
func_obj
;

15588 
sf
->
¬g_couÁ
 = 
¬gc
;

15589 
¬g_buf
 = 
¬gv
;

15591 ià(
	`uÆik–y
(
¬gc
 < 
¬g_couÁ
)) {

15593 
¬g_buf
 = 
	`®loÿ
(×rg_buf[0]è* 
¬g_couÁ
);

15594 
i
 = 0; i < 
¬gc
; i++)

15595 
¬g_buf
[
i
] = 
¬gv
[i];

15596 
i
 = 
¬gc
; i < 
¬g_couÁ
; i++)

15597 
¬g_buf
[
i
] = 
JS_UNDEFINED
;

15598 
sf
->
¬g_couÁ
 =‡rg_count;

15600 
sf
->
¬g_buf
 = (
JSV®ue
*)arg_buf;

15602 
func
 = 
p
->
u
.
cfunc
.
c_funùiÚ
;

15603 
ırÙo
) {

15604 
JS_CFUNC_cÚ¡ruùÜ
:

15605 
JS_CFUNC_cÚ¡ruùÜ_Ü_func
:

15606 ià(!(
æags
 & 
JS_CALL_FLAG_CONSTRUCTOR
)) {

15607 ià(
ırÙo
 =ğ
JS_CFUNC_cÚ¡ruùÜ
) {

15608 
nÙ_a_cÚ¡ruùÜ
:

15609 
»t_v®
 = 
	`JS_ThrowTy³E¼Ü
(
ùx
, "must be called with‚ew");

15612 
this_obj
 = 
JS_UNDEFINED
;

15617 
JS_CFUNC_g’”ic
:

15618 
»t_v®
 = 
func
.
	`g’”ic
(
ùx
, 
this_obj
, 
¬gc
, 
¬g_buf
);

15620 
JS_CFUNC_cÚ¡ruùÜ_magic
:

15621 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
:

15622 ià(!(
æags
 & 
JS_CALL_FLAG_CONSTRUCTOR
)) {

15623 ià(
ırÙo
 =ğ
JS_CFUNC_cÚ¡ruùÜ_magic
) {

15624 
nÙ_a_cÚ¡ruùÜ
;

15626 
this_obj
 = 
JS_UNDEFINED
;

15630 
JS_CFUNC_g’”ic_magic
:

15631 
»t_v®
 = 
func
.
	`g’”ic_magic
(
ùx
, 
this_obj
, 
¬gc
, 
¬g_buf
,

15632 
p
->
u
.
cfunc
.
magic
);

15634 
JS_CFUNC_g‘‹r
:

15635 
»t_v®
 = 
func
.
	`g‘‹r
(
ùx
, 
this_obj
);

15637 
JS_CFUNC_£‰”
:

15638 
»t_v®
 = 
func
.
	`£‰”
(
ùx
, 
this_obj
, 
¬g_buf
[0]);

15640 
JS_CFUNC_g‘‹r_magic
:

15641 
»t_v®
 = 
func
.
	`g‘‹r_magic
(
ùx
, 
this_obj
, 
p
->
u
.
cfunc
.
magic
);

15643 
JS_CFUNC_£‰”_magic
:

15644 
»t_v®
 = 
func
.
	`£‰”_magic
(
ùx
, 
this_obj
, 
¬g_buf
[0], 
p
->
u
.
cfunc
.
magic
);

15646 
JS_CFUNC_f_f
:

15648 
d1
;

15650 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d1
, 
¬g_buf
[0]))) {

15651 
»t_v®
 = 
JS_EXCEPTION
;

15654 
»t_v®
 = 
	`JS_NewFlßt64
(
ùx
, 
func
.
	`f_f
(
d1
));

15657 
JS_CFUNC_f_f_f
:

15659 
d1
, 
d2
;

15661 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d1
, 
¬g_buf
[0]))) {

15662 
»t_v®
 = 
JS_EXCEPTION
;

15665 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d2
, 
¬g_buf
[1]))) {

15666 
»t_v®
 = 
JS_EXCEPTION
;

15669 
»t_v®
 = 
	`JS_NewFlßt64
(
ùx
, 
func
.
	`f_f_f
(
d1
, 
d2
));

15672 
JS_CFUNC_™”©Ü_Ãxt
:

15674 
dÚe
;

15675 
»t_v®
 = 
func
.
	`™”©Ü_Ãxt
(
ùx
, 
this_obj
, 
¬gc
, 
¬g_buf
,

15676 &
dÚe
, 
p
->
u
.
cfunc
.
magic
);

15677 ià(!
	`JS_IsExû±iÚ
(
»t_v®
è&& 
dÚe
 != 2) {

15678 
»t_v®
 = 
	`js_ü—‹_™”©Ü_»suÉ
(
ùx
,„‘_v®, 
dÚe
);

15683 
	`abÜt
();

15686 
¹
->
cu¼’t_¡ack_äame
 = 
sf
->
´ev_äame
;

15687  
»t_v®
;

15688 
	}
}

15690 
JSV®ue
 
	$js_ÿÎ_bound_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

15691 
JSV®ueCÚ¡
 
this_obj
,

15692 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
)

15694 
JSObjeù
 *
p
;

15695 
JSBoundFunùiÚ
 *
bf
;

15696 
JSV®ueCÚ¡
 *
¬g_buf
, 
Ãw_rg‘
;

15697 
¬g_couÁ
, 
i
;

15699 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

15700 
bf
 = 
p
->
u
.
bound_funùiÚ
;

15701 
¬g_couÁ
 = 
bf
->
¬gc
 +‡rgc;

15702 ià(
	`js_check_¡ack_ov”æow
(
ùx
->
¹
, (
JSV®ue
è* 
¬g_couÁ
))

15703  
	`JS_ThrowSckOv”æow
(
ùx
);

15704 
¬g_buf
 = 
	`®loÿ
((
JSV®ue
è* 
¬g_couÁ
);

15705 
i
 = 0; i < 
bf
->
¬gc
; i++) {

15706 
¬g_buf
[
i
] = 
bf
->
¬gv
[i];

15708 
i
 = 0; i < 
¬gc
; i++) {

15709 
¬g_buf
[
bf
->
¬gc
 + 
i
] = 
¬gv
[i];

15711 ià(
æags
 & 
JS_CALL_FLAG_CONSTRUCTOR
) {

15712 
Ãw_rg‘
 = 
this_obj
;

15713 ià(
	`js_§me_v®ue
(
ùx
, 
func_obj
, 
Ãw_rg‘
))

15714 
Ãw_rg‘
 = 
bf
->
func_obj
;

15715  
	`JS_C®lCÚ¡ruùÜ2
(
ùx
, 
bf
->
func_obj
, 
Ãw_rg‘
,

15716 
¬g_couÁ
, 
¬g_buf
);

15718  
	`JS_C®l
(
ùx
, 
bf
->
func_obj
, bf->
this_v®
,

15719 
¬g_couÁ
, 
¬g_buf
);

15721 
	}
}

15723 
no_šlše
 
__exû±iÚ
 
	$__js_pŞl_š‹¼u±s
(
JSCÚ‹xt
 *
ùx
)

15725 
JSRuÁime
 *
¹
 = 
ùx
->rt;

15726 
ùx
->
š‹¼u±_couÁ”
 = 
JS_INTERRUPT_COUNTER_INIT
;

15727 ià(
¹
->
š‹¼u±_hªdËr
) {

15728 ià(
¹
->
	`š‹¼u±_hªdËr
Ôt,„t->
š‹¼u±_İaque
)) {

15730 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "interrupted");

15731 
	`JS_S‘UnÿtchabËE¼Ü
(
ùx
, ctx->
¹
->
cu¼’t_exû±iÚ
, 
TRUE
);

15736 
	}
}

15738 
šlše
 
__exû±iÚ
 
	$js_pŞl_š‹¼u±s
(
JSCÚ‹xt
 *
ùx
)

15740 ià(
	`uÆik–y
(--
ùx
->
š‹¼u±_couÁ”
 <= 0)) {

15741  
	`__js_pŞl_š‹¼u±s
(
ùx
);

15745 
	}
}

15749 
	mOP_SPECIAL_OBJECT_ARGUMENTS
,

15750 
	mOP_SPECIAL_OBJECT_MAPPED_ARGUMENTS
,

15751 
	mOP_SPECIAL_OBJECT_THIS_FUNC
,

15752 
	mOP_SPECIAL_OBJECT_NEW_TARGET
,

15753 
	mOP_SPECIAL_OBJECT_HOME_OBJECT
,

15754 
	mOP_SPECIAL_OBJECT_VAR_OBJECT
,

15755 
	mOP_SPECIAL_OBJECT_IMPORT_META
,

15756 } 
	tOPS³cŸlObjeùEnum
;

15758 
	#FUNC_RET_AWAIT
 0

	)

15759 
	#FUNC_RET_YIELD
 1

	)

15760 
	#FUNC_RET_YIELD_STAR
 2

	)

15763 
JSV®ue
 
	$JS_C®lIÁ”Çl
(
JSCÚ‹xt
 *
ÿÎ”_ùx
, 
JSV®ueCÚ¡
 
func_obj
,

15764 
JSV®ueCÚ¡
 
this_obj
, JSV®ueCÚ¡ 
Ãw_rg‘
,

15765 
¬gc
, 
JSV®ue
 *
¬gv
, 
æags
)

15767 
JSRuÁime
 *
¹
 = 
ÿÎ”_ùx
->rt;

15768 
JSCÚ‹xt
 *
ùx
;

15769 
JSObjeù
 *
p
;

15770 
JSFunùiÚBy‹code
 *
b
;

15771 
JSSckF¿me
 
sf_s
, *
sf
 = &sf_s;

15772 cÚ¡ 
ušt8_t
 *
pc
;

15773 
İcode
, 
¬g_®loÿ‹d_size
, 
i
;

15774 
JSV®ue
 *
loÿl_buf
, *
¡ack_buf
, *
v¬_buf
, *
¬g_buf
, *
¥
, 
»t_v®
, *
pv®
;

15775 
JSV¬Ref
 **
v¬_»fs
;

15776 
size_t
 
®loÿ_size
;

15778 #ià!
DIRECT_DISPATCH


15779 
	#SWITCH
(
pc
è
İcode
 = *pc++)

	)

15780 
	#CASE
(
İ
è
	)
op

15781 
	#DEFAULT
 

	)

15782 
	#BREAK
 

	)

15784 cÚ¡ * cÚ¡ 
di¥©ch_bË
[256] = {

15785 
	#DEF
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
è&& 
ÿ£_OP_
 ## id,

	)

15786 #ià
SHORT_OPCODES


15787 
	#def
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
)

	)

15789 
	#def
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
è&& 
ÿ£_deçuÉ
,

	)

15791 
	~<¹/js/quickjs-İcode.h
>

15792 [ 
OP_COUNT
 ... 255 ] = &&
ÿ£_deçuÉ


15794 
	#SWITCH
(
pc
è*
di¥©ch_bË
[
İcode
 = *pc++];

	)

15795 
	#CASE
(
İ
è
ÿ£_
 ## 
	)
op

15796 
	#DEFAULT
 
ÿ£_deçuÉ


	)

15797 
	#BREAK
 
	`SWITCH
(
pc
)

	)

15800 ià(
	`js_pŞl_š‹¼u±s
(
ÿÎ”_ùx
))

15801  
JS_EXCEPTION
;

15802 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
func_obj
è!ğ
JS_TAG_OBJECT
)) {

15803 ià(
æags
 & 
JS_CALL_FLAG_GENERATOR
) {

15804 
JSAsyncFunùiÚS‹
 *
s
 = 
	`JS_VALUE_GET_PTR
(
func_obj
);

15807 
sf
 = &
s
->
äame
;

15808 
p
 = 
	`JS_VALUE_GET_OBJ
(
sf
->
cur_func
);

15809 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

15810 
ùx
 = 
b
->
»®m
;

15811 
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

15812 
loÿl_buf
 = 
¬g_buf
 = 
sf
->arg_buf;

15813 
v¬_buf
 = 
sf
->var_buf;

15814 
¡ack_buf
 = 
sf
->
v¬_buf
 + 
b
->
v¬_couÁ
;

15815 
¥
 = 
sf
->
cur_¥
;

15816 
sf
->
cur_¥
 = 
NULL
;

15817 
pc
 = 
sf
->
cur_pc
;

15818 
sf
->
´ev_äame
 = 
¹
->
cu¼’t_¡ack_äame
;

15819 
¹
->
cu¼’t_¡ack_äame
 = 
sf
;

15820 ià(
s
->
throw_æag
)

15821 
exû±iÚ
;

15823 
»¡¬t
;

15825 
nÙ_a_funùiÚ
;

15828 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

15829 ià(
	`uÆik–y
(
p
->
şass_id
 !ğ
JS_CLASS_BYTECODE_FUNCTION
)) {

15830 
JSCÏssC®l
 *
ÿÎ_func
;

15831 
ÿÎ_func
 = 
¹
->
şass_¬¿y
[
p
->
şass_id
].
ÿÎ
;

15832 ià(!
ÿÎ_func
) {

15833 
nÙ_a_funùiÚ
:

15834  
	`JS_ThrowTy³E¼Ü
(
ÿÎ”_ùx
, "not‡ function");

15836  
	`ÿÎ_func
(
ÿÎ”_ùx
, 
func_obj
, 
this_obj
, 
¬gc
,

15837 (
JSV®ueCÚ¡
 *)
¬gv
, 
æags
);

15839 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

15841 ià(
	`uÆik–y
(
¬gc
 < 
b
->
¬g_couÁ
 || (
æags
 & 
JS_CALL_FLAG_COPY_ARGV
))) {

15842 
¬g_®loÿ‹d_size
 = 
b
->
¬g_couÁ
;

15844 
¬g_®loÿ‹d_size
 = 0;

15847 
®loÿ_size
 = (
JSV®ue
è* (
¬g_®loÿ‹d_size
 + 
b
->
v¬_couÁ
 +

15848 
b
->
¡ack_size
);

15849 ià(
	`js_check_¡ack_ov”æow
(
¹
, 
®loÿ_size
))

15850  
	`JS_ThrowSckOv”æow
(
ÿÎ”_ùx
);

15852 
sf
->
js_mode
 = 
b
->js_mode;

15853 
¬g_buf
 = 
¬gv
;

15854 
sf
->
¬g_couÁ
 = 
¬gc
;

15855 
sf
->
cur_func
 = (
JSV®ue
)
func_obj
;

15856 
	`š™_li¡_h—d
(&
sf
->
v¬_»f_li¡
);

15857 
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

15859 
loÿl_buf
 = 
	`®loÿ
(
®loÿ_size
);

15860 ià(
	`uÆik–y
(
¬g_®loÿ‹d_size
)) {

15861 
n
 = 
	`mš_št
(
¬gc
, 
b
->
¬g_couÁ
);

15862 
¬g_buf
 = 
loÿl_buf
;

15863 
i
 = 0; i < 
n
; i++)

15864 
¬g_buf
[
i
] = 
	`JS_DupV®ue
(
ÿÎ”_ùx
, 
¬gv
[i]);

15865 ; 
i
 < 
b
->
¬g_couÁ
; i++)

15866 
¬g_buf
[
i
] = 
JS_UNDEFINED
;

15867 
sf
->
¬g_couÁ
 = 
b
->arg_count;

15869 
v¬_buf
 = 
loÿl_buf
 + 
¬g_®loÿ‹d_size
;

15870 
sf
->
v¬_buf
 = var_buf;

15871 
sf
->
¬g_buf
 =‡rg_buf;

15873 
i
 = 0; i < 
b
->
v¬_couÁ
; i++)

15874 
v¬_buf
[
i
] = 
JS_UNDEFINED
;

15876 
¡ack_buf
 = 
v¬_buf
 + 
b
->
v¬_couÁ
;

15877 
¥
 = 
¡ack_buf
;

15878 
pc
 = 
b
->
by‹_code_buf
;

15879 
sf
->
´ev_äame
 = 
¹
->
cu¼’t_¡ack_äame
;

15880 
¹
->
cu¼’t_¡ack_äame
 = 
sf
;

15881 
ùx
 = 
b
->
»®m
;

15883 
»¡¬t
:

15885 
ÿÎ_¬gc
;

15886 
JSV®ue
 *
ÿÎ_¬gv
;

15888 
	`SWITCH
(
pc
) {

15889 
	`CASE
(
OP_push_i32
):

15890 *
¥
++ = 
	`JS_NewIÁ32
(
ùx
, 
	`g‘_u32
(
pc
));

15891 
pc
 += 4;

15892 
BREAK
;

15893 
	`CASE
(
OP_push_cÚ¡
):

15894 *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
b
->
ıoŞ
[
	`g‘_u32
(
pc
)]);

15895 
pc
 += 4;

15896 
BREAK
;

15897 #ià
SHORT_OPCODES


15898 
	`CASE
(
OP_push_mšus1
):

15899 
	`CASE
(
OP_push_0
):

15900 
	`CASE
(
OP_push_1
):

15901 
	`CASE
(
OP_push_2
):

15902 
	`CASE
(
OP_push_3
):

15903 
	`CASE
(
OP_push_4
):

15904 
	`CASE
(
OP_push_5
):

15905 
	`CASE
(
OP_push_6
):

15906 
	`CASE
(
OP_push_7
):

15907 *
¥
++ = 
	`JS_NewIÁ32
(
ùx
, 
İcode
 - 
OP_push_0
);

15908 
BREAK
;

15909 
	`CASE
(
OP_push_i8
):

15910 *
¥
++ = 
	`JS_NewIÁ32
(
ùx
, 
	`g‘_i8
(
pc
));

15911 
pc
 += 1;

15912 
BREAK
;

15913 
	`CASE
(
OP_push_i16
):

15914 *
¥
++ = 
	`JS_NewIÁ32
(
ùx
, 
	`g‘_i16
(
pc
));

15915 
pc
 += 2;

15916 
BREAK
;

15917 
	`CASE
(
OP_push_cÚ¡8
):

15918 *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
b
->
ıoŞ
[*
pc
++]);

15919 
BREAK
;

15920 
	`CASE
(
OP_fşosu»8
):

15921 *
¥
++ = 
	`js_şosu»
(
ùx
, 
	`JS_DupV®ue
(ùx, 
b
->
ıoŞ
[*
pc
++]), 
v¬_»fs
, 
sf
);

15922 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

15923 
exû±iÚ
;

15924 
BREAK
;

15925 
	`CASE
(
OP_push_em±y_¡ršg
):

15926 *
¥
++ = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

15927 
BREAK
;

15928 
	`CASE
(
OP_g‘_Ëngth
):

15930 
JSV®ue
 
v®
;

15932 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¥
[-1], 
JS_ATOM_Ëngth
);

15933 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

15934 
exû±iÚ
;

15935 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

15936 
¥
[-1] = 
v®
;

15938 
BREAK
;

15940 
	`CASE
(
OP_push_©om_v®ue
):

15941 *
¥
++ = 
	`JS_AtomToV®ue
(
ùx
, 
	`g‘_u32
(
pc
));

15942 
pc
 += 4;

15943 
BREAK
;

15944 
	`CASE
(
OP_undefšed
):

15945 *
¥
++ = 
JS_UNDEFINED
;

15946 
BREAK
;

15947 
	`CASE
(
OP_nuÎ
):

15948 *
¥
++ = 
JS_NULL
;

15949 
BREAK
;

15950 
	`CASE
(
OP_push_this
):

15953 
JSV®ue
 
v®
;

15954 ià(!(
b
->
js_mode
 & 
JS_MODE_STRICT
)) {

15955 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_TAG
(
this_obj
);

15956 ià(
	`lik–y
(
g
 =ğ
JS_TAG_OBJECT
))

15957 
nÜm®_this
;

15958 ià(
g
 =ğ
JS_TAG_NULL
 ||ag =ğ
JS_TAG_UNDEFINED
) {

15959 
v®
 = 
	`JS_DupV®ue
(
ùx
, ctx->
glob®_obj
);

15961 
v®
 = 
	`JS_ToObjeù
(
ùx
, 
this_obj
);

15962 ià(
	`JS_IsExû±iÚ
(
v®
))

15963 
exû±iÚ
;

15966 
nÜm®_this
:

15967 
v®
 = 
	`JS_DupV®ue
(
ùx
, 
this_obj
);

15969 *
¥
++ = 
v®
;

15971 
BREAK
;

15972 
	`CASE
(
OP_push_çl£
):

15973 *
¥
++ = 
JS_FALSE
;

15974 
BREAK
;

15975 
	`CASE
(
OP_push_Œue
):

15976 *
¥
++ = 
JS_TRUE
;

15977 
BREAK
;

15978 
	`CASE
(
OP_objeù
):

15979 *
¥
++ = 
	`JS_NewObjeù
(
ùx
);

15980 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

15981 
exû±iÚ
;

15982 
BREAK
;

15983 
	`CASE
(
OP_¥ecŸl_objeù
):

15985 
¬g
 = *
pc
++;

15986 
¬g
) {

15987 
OP_SPECIAL_OBJECT_ARGUMENTS
:

15988 *
¥
++ = 
	`js_bud_¬gum’ts
(
ùx
, 
¬gc
, (
JSV®ueCÚ¡
 *)
¬gv
);

15989 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

15990 
exû±iÚ
;

15992 
OP_SPECIAL_OBJECT_MAPPED_ARGUMENTS
:

15993 *
¥
++ = 
	`js_bud_m­³d_¬gum’ts
(
ùx
, 
¬gc
, (
JSV®ueCÚ¡
 *)
¬gv
,

15994 
sf
, 
	`mš_št
(
¬gc
, 
b
->
¬g_couÁ
));

15995 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

15996 
exû±iÚ
;

15998 
OP_SPECIAL_OBJECT_THIS_FUNC
:

15999 *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
sf
->
cur_func
);

16001 
OP_SPECIAL_OBJECT_NEW_TARGET
:

16002 *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
Ãw_rg‘
);

16004 
OP_SPECIAL_OBJECT_HOME_OBJECT
:

16006 
JSObjeù
 *
p1
;

16007 
p1
 = 
p
->
u
.
func
.
home_objeù
;

16008 ià(
	`uÆik–y
(!
p1
))

16009 *
¥
++ = 
JS_UNDEFINED
;

16011 *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p1
));

16014 
OP_SPECIAL_OBJECT_VAR_OBJECT
:

16015 *
¥
++ = 
	`JS_NewObjeùPrÙo
(
ùx
, 
JS_NULL
);

16016 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

16017 
exû±iÚ
;

16019 
OP_SPECIAL_OBJECT_IMPORT_META
:

16020 *
¥
++ = 
	`js_impÜt_m‘a
(
ùx
);

16021 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

16022 
exû±iÚ
;

16025 
	`abÜt
();

16028 
BREAK
;

16029 
	`CASE
(
OP_»¡
):

16031 
fœ¡
 = 
	`g‘_u16
(
pc
);

16032 
pc
 += 2;

16033 *
¥
++ = 
	`js_bud_»¡
(
ùx
, 
fœ¡
, 
¬gc
, (
JSV®ueCÚ¡
 *)
¬gv
);

16034 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

16035 
exû±iÚ
;

16037 
BREAK
;

16039 
	`CASE
(
OP_drİ
):

16040 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16041 
¥
--;

16042 
BREAK
;

16043 
	`CASE
(
OP_n
):

16044 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

16045 
¥
[-2] = sp[-1];

16046 
¥
--;

16047 
BREAK
;

16048 
	`CASE
(
OP_n1
):

16049 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

16050 
¥
[-3] = sp[-2];

16051 
¥
[-2] = sp[-1];

16052 
¥
--;

16053 
BREAK
;

16054 
	`CASE
(
OP_dup
):

16055 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, sp[-1]);

16056 
¥
++;

16057 
BREAK
;

16058 
	`CASE
(
OP_dup2
):

16059 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, sp[-2]);

16060 
¥
[1] = 
	`JS_DupV®ue
(
ùx
, sp[-1]);

16061 
¥
 += 2;

16062 
BREAK
;

16063 
	`CASE
(
OP_dup3
):

16064 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, sp[-3]);

16065 
¥
[1] = 
	`JS_DupV®ue
(
ùx
, sp[-2]);

16066 
¥
[2] = 
	`JS_DupV®ue
(
ùx
, sp[-1]);

16067 
¥
 += 3;

16068 
BREAK
;

16069 
	`CASE
(
OP_dup1
):

16070 
¥
[0] = sp[-1];

16071 
¥
[-1] = 
	`JS_DupV®ue
(
ùx
, sp[-2]);

16072 
¥
++;

16073 
BREAK
;

16074 
	`CASE
(
OP_š£¹2
):

16075 
¥
[0] = sp[-1];

16076 
¥
[-1] = sp[-2];

16077 
¥
[-2] = 
	`JS_DupV®ue
(
ùx
, sp[0]);

16078 
¥
++;

16079 
BREAK
;

16080 
	`CASE
(
OP_š£¹3
):

16081 
¥
[0] = sp[-1];

16082 
¥
[-1] = sp[-2];

16083 
¥
[-2] = sp[-3];

16084 
¥
[-3] = 
	`JS_DupV®ue
(
ùx
, sp[0]);

16085 
¥
++;

16086 
BREAK
;

16087 
	`CASE
(
OP_š£¹4
):

16088 
¥
[0] = sp[-1];

16089 
¥
[-1] = sp[-2];

16090 
¥
[-2] = sp[-3];

16091 
¥
[-3] = sp[-4];

16092 
¥
[-4] = 
	`JS_DupV®ue
(
ùx
, sp[0]);

16093 
¥
++;

16094 
BREAK
;

16095 
	`CASE
(
OP_³rm3
):

16097 
JSV®ue
 
tmp
;

16098 
tmp
 = 
¥
[-2];

16099 
¥
[-2] = sp[-3];

16100 
¥
[-3] = 
tmp
;

16102 
BREAK
;

16103 
	`CASE
(
OP_rÙ3l
):

16105 
JSV®ue
 
tmp
;

16106 
tmp
 = 
¥
[-3];

16107 
¥
[-3] = sp[-2];

16108 
¥
[-2] = sp[-1];

16109 
¥
[-1] = 
tmp
;

16111 
BREAK
;

16112 
	`CASE
(
OP_rÙ4l
):

16114 
JSV®ue
 
tmp
;

16115 
tmp
 = 
¥
[-4];

16116 
¥
[-4] = sp[-3];

16117 
¥
[-3] = sp[-2];

16118 
¥
[-2] = sp[-1];

16119 
¥
[-1] = 
tmp
;

16121 
BREAK
;

16122 
	`CASE
(
OP_rÙ5l
):

16124 
JSV®ue
 
tmp
;

16125 
tmp
 = 
¥
[-5];

16126 
¥
[-5] = sp[-4];

16127 
¥
[-4] = sp[-3];

16128 
¥
[-3] = sp[-2];

16129 
¥
[-2] = sp[-1];

16130 
¥
[-1] = 
tmp
;

16132 
BREAK
;

16133 
	`CASE
(
OP_rÙ3r
):

16135 
JSV®ue
 
tmp
;

16136 
tmp
 = 
¥
[-1];

16137 
¥
[-1] = sp[-2];

16138 
¥
[-2] = sp[-3];

16139 
¥
[-3] = 
tmp
;

16141 
BREAK
;

16142 
	`CASE
(
OP_³rm4
):

16144 
JSV®ue
 
tmp
;

16145 
tmp
 = 
¥
[-2];

16146 
¥
[-2] = sp[-3];

16147 
¥
[-3] = sp[-4];

16148 
¥
[-4] = 
tmp
;

16150 
BREAK
;

16151 
	`CASE
(
OP_³rm5
):

16153 
JSV®ue
 
tmp
;

16154 
tmp
 = 
¥
[-2];

16155 
¥
[-2] = sp[-3];

16156 
¥
[-3] = sp[-4];

16157 
¥
[-4] = sp[-5];

16158 
¥
[-5] = 
tmp
;

16160 
BREAK
;

16161 
	`CASE
(
OP_sw­
):

16163 
JSV®ue
 
tmp
;

16164 
tmp
 = 
¥
[-2];

16165 
¥
[-2] = sp[-1];

16166 
¥
[-1] = 
tmp
;

16168 
BREAK
;

16169 
	`CASE
(
OP_sw­2
):

16171 
JSV®ue
 
tmp1
, 
tmp2
;

16172 
tmp1
 = 
¥
[-4];

16173 
tmp2
 = 
¥
[-3];

16174 
¥
[-4] = sp[-2];

16175 
¥
[-3] = sp[-1];

16176 
¥
[-2] = 
tmp1
;

16177 
¥
[-1] = 
tmp2
;

16179 
BREAK
;

16181 
	`CASE
(
OP_fşosu»
):

16183 
JSV®ue
 
bfunc
 = 
	`JS_DupV®ue
(
ùx
, 
b
->
ıoŞ
[
	`g‘_u32
(
pc
)]);

16184 
pc
 += 4;

16185 *
¥
++ = 
	`js_şosu»
(
ùx
, 
bfunc
, 
v¬_»fs
, 
sf
);

16186 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

16187 
exû±iÚ
;

16189 
BREAK
;

16190 #ià
SHORT_OPCODES


16191 
	`CASE
(
OP_ÿÎ0
):

16192 
	`CASE
(
OP_ÿÎ1
):

16193 
	`CASE
(
OP_ÿÎ2
):

16194 
	`CASE
(
OP_ÿÎ3
):

16195 
ÿÎ_¬gc
 = 
İcode
 - 
OP_ÿÎ0
;

16196 
has_ÿÎ_¬gc
;

16198 
	`CASE
(
OP_ÿÎ
):

16199 
	`CASE
(
OP__ÿÎ
):

16201 
ÿÎ_¬gc
 = 
	`g‘_u16
(
pc
);

16202 
pc
 += 2;

16203 
has_ÿÎ_¬gc
;

16204 
has_ÿÎ_¬gc
:

16205 
ÿÎ_¬gv
 = 
¥
 - 
ÿÎ_¬gc
;

16206 
sf
->
cur_pc
 = 
pc
;

16207 
»t_v®
 = 
	`JS_C®lIÁ”Çl
(
ùx
, 
ÿÎ_¬gv
[-1], 
JS_UNDEFINED
,

16208 
JS_UNDEFINED
, 
ÿÎ_¬gc
, 
ÿÎ_¬gv
, 0);

16209 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16210 
exû±iÚ
;

16211 ià(
İcode
 =ğ
OP__ÿÎ
)

16212 
dÚe
;

16213 
i
 = -1; i < 
ÿÎ_¬gc
; i++)

16214 
	`JS_F»eV®ue
(
ùx
, 
ÿÎ_¬gv
[
i
]);

16215 
¥
 -ğ
ÿÎ_¬gc
 + 1;

16216 *
¥
++ = 
»t_v®
;

16218 
BREAK
;

16219 
	`CASE
(
OP_ÿÎ_cÚ¡ruùÜ
):

16221 
ÿÎ_¬gc
 = 
	`g‘_u16
(
pc
);

16222 
pc
 += 2;

16223 
ÿÎ_¬gv
 = 
¥
 - 
ÿÎ_¬gc
;

16224 
sf
->
cur_pc
 = 
pc
;

16225 
»t_v®
 = 
	`JS_C®lCÚ¡ruùÜIÁ”Çl
(
ùx
, 
ÿÎ_¬gv
[-2],

16226 
ÿÎ_¬gv
[-1],

16227 
ÿÎ_¬gc
, 
ÿÎ_¬gv
, 0);

16228 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16229 
exû±iÚ
;

16230 
i
 = -2; i < 
ÿÎ_¬gc
; i++)

16231 
	`JS_F»eV®ue
(
ùx
, 
ÿÎ_¬gv
[
i
]);

16232 
¥
 -ğ
ÿÎ_¬gc
 + 2;

16233 *
¥
++ = 
»t_v®
;

16235 
BREAK
;

16236 
	`CASE
(
OP_ÿÎ_m‘hod
):

16237 
	`CASE
(
OP__ÿÎ_m‘hod
):

16239 
ÿÎ_¬gc
 = 
	`g‘_u16
(
pc
);

16240 
pc
 += 2;

16241 
ÿÎ_¬gv
 = 
¥
 - 
ÿÎ_¬gc
;

16242 
sf
->
cur_pc
 = 
pc
;

16243 
»t_v®
 = 
	`JS_C®lIÁ”Çl
(
ùx
, 
ÿÎ_¬gv
[-1], call_argv[-2],

16244 
JS_UNDEFINED
, 
ÿÎ_¬gc
, 
ÿÎ_¬gv
, 0);

16245 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16246 
exû±iÚ
;

16247 ià(
İcode
 =ğ
OP__ÿÎ_m‘hod
)

16248 
dÚe
;

16249 
i
 = -2; i < 
ÿÎ_¬gc
; i++)

16250 
	`JS_F»eV®ue
(
ùx
, 
ÿÎ_¬gv
[
i
]);

16251 
¥
 -ğ
ÿÎ_¬gc
 + 2;

16252 *
¥
++ = 
»t_v®
;

16254 
BREAK
;

16255 
	`CASE
(
OP_¬¿y_äom
):

16257 
i
, 
»t
;

16259 
ÿÎ_¬gc
 = 
	`g‘_u16
(
pc
);

16260 
pc
 += 2;

16261 
»t_v®
 = 
	`JS_NewA¼ay
(
ùx
);

16262 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16263 
exû±iÚ
;

16264 
ÿÎ_¬gv
 = 
¥
 - 
ÿÎ_¬gc
;

16265 
i
 = 0; i < 
ÿÎ_¬gc
; i++) {

16266 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t_v®
, 
	`__JS_AtomFromUIÁ32
(
i
), 
ÿÎ_¬gv
[i],

16267 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
);

16268 
ÿÎ_¬gv
[
i
] = 
JS_UNDEFINED
;

16269 ià(
»t
 < 0) {

16270 
	`JS_F»eV®ue
(
ùx
, 
»t_v®
);

16271 
exû±iÚ
;

16274 
¥
 -ğ
ÿÎ_¬gc
;

16275 *
¥
++ = 
»t_v®
;

16277 
BREAK
;

16279 
	`CASE
(
OP_­¶y
):

16281 
magic
;

16282 
magic
 = 
	`g‘_u16
(
pc
);

16283 
pc
 += 2;

16285 
»t_v®
 = 
	`js_funùiÚ_­¶y
(
ùx
, 
¥
[-3], 2, (
JSV®ueCÚ¡
 *)&¥[-2], 
magic
);

16286 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16287 
exû±iÚ
;

16288 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

16289 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

16290 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16291 
¥
 -= 3;

16292 *
¥
++ = 
»t_v®
;

16294 
BREAK
;

16295 
	`CASE
(
OP_»tuº
):

16296 
»t_v®
 = *--
¥
;

16297 
dÚe
;

16298 
	`CASE
(
OP_»tuº_undef
):

16299 
»t_v®
 = 
JS_UNDEFINED
;

16300 
dÚe
;

16302 
	`CASE
(
OP_check_ùÜ_»tuº
):

16304 ià(!
	`JS_IsObjeù
(
¥
[-1])) {

16305 ià(!
	`JS_IsUndefšed
(
¥
[-1])) {

16306 
	`JS_ThrowTy³E¼Ü
(
ÿÎ”_ùx
, "derived class constructor must„eturn‡n object or undefined");

16307 
exû±iÚ
;

16309 
¥
[0] = 
JS_TRUE
;

16311 
¥
[0] = 
JS_FALSE
;

16313 
¥
++;

16314 
BREAK
;

16315 
	`CASE
(
OP_check_ùÜ
):

16316 ià(
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

16317 
	`JS_ThrowTy³E¼Ü
(
ÿÎ”_ùx
, "class constructors must be invoked with 'new'");

16318 
exû±iÚ
;

16320 
BREAK
;

16321 
	`CASE
(
OP_check_b¿nd
):

16322 ià(
	`JS_CheckB¿nd
(
ùx
, 
¥
[-2], sp[-1]) < 0)

16323 
exû±iÚ
;

16324 
BREAK
;

16325 
	`CASE
(
OP_add_b¿nd
):

16326 ià(
	`JS_AddB¿nd
(
ùx
, 
¥
[-2], sp[-1]) < 0)

16327 
exû±iÚ
;

16328 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

16329 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16330 
¥
 -= 2;

16331 
BREAK
;

16333 
	`CASE
(
OP_throw
):

16334 
	`JS_Throw
(
ùx
, *--
¥
);

16335 
exû±iÚ
;

16337 
	`CASE
(
OP_throw_v¬
):

16338 
	#JS_THROW_VAR_RO
 0

	)

16339 
	#JS_THROW_VAR_REDECL
 1

	)

16340 
	#JS_THROW_VAR_UNINITIALIZED
 2

	)

16341 
	#JS_THROW_VAR_DELETE_SUPER
 3

	)

16343 
JSAtom
 
©om
;

16344 
ty³
;

16345 
©om
 = 
	`g‘_u32
(
pc
);

16346 
ty³
 = 
pc
[4];

16347 
pc
 += 5;

16348 ià(
ty³
 =ğ
JS_THROW_VAR_RO
)

16349 
	`JS_ThrowTy³E¼ÜR—dOÆy
(
ùx
, 
JS_PROP_THROW
, 
©om
);

16351 ià(
ty³
 =ğ
JS_THROW_VAR_REDECL
)

16352 
	`JS_ThrowSyÁaxE¼ÜV¬Redeş¬©iÚ
(
ùx
, 
©om
);

16354 ià(
ty³
 =ğ
JS_THROW_VAR_UNINITIALIZED
)

16355 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
©om
);

16357 ià(
ty³
 =ğ
JS_THROW_VAR_DELETE_SUPER
)

16358 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "unsupported„eferenceo 'super'");

16360 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "šv®idhrow v¬y³ %d", 
ty³
);

16362 
exû±iÚ
;

16364 
	`CASE
(
OP_ev®
):

16366 
JSV®ueCÚ¡
 
obj
;

16367 
scİe_idx
;

16368 
ÿÎ_¬gc
 = 
	`g‘_u16
(
pc
);

16369 
scİe_idx
 = 
	`g‘_u16
(
pc
 + 2) - 1;

16370 
pc
 += 4;

16371 
ÿÎ_¬gv
 = 
¥
 - 
ÿÎ_¬gc
;

16372 
sf
->
cur_pc
 = 
pc
;

16373 ià(
	`js_§me_v®ue
(
ùx
, 
ÿÎ_¬gv
[-1], ctx->
ev®_obj
)) {

16374 ià(
ÿÎ_¬gc
 >= 1)

16375 
obj
 = 
ÿÎ_¬gv
[0];

16377 
obj
 = 
JS_UNDEFINED
;

16378 
»t_v®
 = 
	`JS_Ev®Objeù
(
ùx
, 
JS_UNDEFINED
, 
obj
,

16379 
JS_EVAL_TYPE_DIRECT
, 
scİe_idx
);

16381 
»t_v®
 = 
	`JS_C®lIÁ”Çl
(
ùx
, 
ÿÎ_¬gv
[-1], 
JS_UNDEFINED
,

16382 
JS_UNDEFINED
, 
ÿÎ_¬gc
, 
ÿÎ_¬gv
, 0);

16384 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16385 
exû±iÚ
;

16386 
i
 = -1; i < 
ÿÎ_¬gc
; i++)

16387 
	`JS_F»eV®ue
(
ùx
, 
ÿÎ_¬gv
[
i
]);

16388 
¥
 -ğ
ÿÎ_¬gc
 + 1;

16389 *
¥
++ = 
»t_v®
;

16391 
BREAK
;

16393 
	`CASE
(
OP_­¶y_ev®
):

16395 
scİe_idx
;

16396 
ušt32_t
 
Ën
;

16397 
JSV®ue
 *
b
;

16398 
JSV®ueCÚ¡
 
obj
;

16400 
scİe_idx
 = 
	`g‘_u16
(
pc
) - 1;

16401 
pc
 += 2;

16402 
b
 = 
	`bud_¬g_li¡
(
ùx
, &
Ën
, 
¥
[-1]);

16403 ià(!
b
)

16404 
exû±iÚ
;

16405 ià(
	`js_§me_v®ue
(
ùx
, 
¥
[-2], ctx->
ev®_obj
)) {

16406 ià(
Ën
 >= 1)

16407 
obj
 = 
b
[0];

16409 
obj
 = 
JS_UNDEFINED
;

16410 
»t_v®
 = 
	`JS_Ev®Objeù
(
ùx
, 
JS_UNDEFINED
, 
obj
,

16411 
JS_EVAL_TYPE_DIRECT
, 
scİe_idx
);

16413 
»t_v®
 = 
	`JS_C®l
(
ùx
, 
¥
[-2], 
JS_UNDEFINED
, 
Ën
,

16414 (
JSV®ueCÚ¡
 *)
b
);

16416 
	`ä“_¬g_li¡
(
ùx
, 
b
, 
Ën
);

16417 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
»t_v®
)))

16418 
exû±iÚ
;

16419 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

16420 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16421 
¥
 -= 2;

16422 *
¥
++ = 
»t_v®
;

16424 
BREAK
;

16426 
	`CASE
(
OP_»gexp
):

16428 
¥
[-2] = 
	`js_»gexp_cÚ¡ruùÜ_š‹º®
(
ùx
, 
JS_UNDEFINED
,

16429 
¥
[-2], sp[-1]);

16430 
¥
--;

16432 
BREAK
;

16434 
	`CASE
(
OP_g‘_su³r
):

16436 
JSV®ue
 
´Ùo
;

16437 
´Ùo
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_G‘PrÙÙy³
(ùx, 
¥
[-1]));

16438 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

16439 
exû±iÚ
;

16440 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16441 
¥
[-1] = 
´Ùo
;

16443 
BREAK
;

16445 
	`CASE
(
OP_impÜt
):

16447 
JSV®ue
 
v®
;

16448 
v®
 = 
	`js_dyÇmic_impÜt
(
ùx
, 
¥
[-1]);

16449 ià(
	`JS_IsExû±iÚ
(
v®
))

16450 
exû±iÚ
;

16451 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16452 
¥
[-1] = 
v®
;

16454 
BREAK
;

16456 
	`CASE
(
OP_check_v¬
):

16458 
»t
;

16459 
JSAtom
 
©om
;

16460 
©om
 = 
	`g‘_u32
(
pc
);

16461 
pc
 += 4;

16463 
»t
 = 
	`JS_CheckGlob®V¬
(
ùx
, 
©om
);

16464 ià(
»t
 < 0)

16465 
exû±iÚ
;

16466 *
¥
++ = 
	`JS_NewBoŞ
(
ùx
, 
»t
);

16468 
BREAK
;

16470 
	`CASE
(
OP_g‘_v¬_undef
):

16471 
	`CASE
(
OP_g‘_v¬
):

16473 
JSV®ue
 
v®
;

16474 
JSAtom
 
©om
;

16475 
©om
 = 
	`g‘_u32
(
pc
);

16476 
pc
 += 4;

16478 
v®
 = 
	`JS_G‘Glob®V¬
(
ùx
, 
©om
, 
İcode
 - 
OP_g‘_v¬_undef
);

16479 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

16480 
exû±iÚ
;

16481 *
¥
++ = 
v®
;

16483 
BREAK
;

16485 
	`CASE
(
OP_put_v¬
):

16486 
	`CASE
(
OP_put_v¬_š™
):

16488 
»t
;

16489 
JSAtom
 
©om
;

16490 
©om
 = 
	`g‘_u32
(
pc
);

16491 
pc
 += 4;

16493 
»t
 = 
	`JS_S‘Glob®V¬
(
ùx
, 
©om
, 
¥
[-1], 
İcode
 - 
OP_put_v¬
);

16494 
¥
--;

16495 ià(
	`uÆik–y
(
»t
 < 0))

16496 
exû±iÚ
;

16498 
BREAK
;

16500 
	`CASE
(
OP_put_v¬_¡riù
):

16502 
»t
;

16503 
JSAtom
 
©om
;

16504 
©om
 = 
	`g‘_u32
(
pc
);

16505 
pc
 += 4;

16508 ià(
	`uÆik–y
(!
	`JS_VALUE_GET_INT
(
¥
[-2]))) {

16509 
	`JS_ThrowReã»nûE¼ÜNÙDefšed
(
ùx
, 
©om
);

16510 
exû±iÚ
;

16512 
»t
 = 
	`JS_S‘Glob®V¬
(
ùx
, 
©om
, 
¥
[-1], 2);

16513 
¥
 -= 2;

16514 ià(
	`uÆik–y
(
»t
 < 0))

16515 
exû±iÚ
;

16517 
BREAK
;

16519 
	`CASE
(
OP_check_defše_v¬
):

16521 
JSAtom
 
©om
;

16522 
æags
;

16523 
©om
 = 
	`g‘_u32
(
pc
);

16524 
æags
 = 
pc
[4];

16525 
pc
 += 5;

16526 ià(
	`JS_CheckDefšeGlob®V¬
(
ùx
, 
©om
, 
æags
))

16527 
exû±iÚ
;

16529 
BREAK
;

16530 
	`CASE
(
OP_defše_v¬
):

16532 
JSAtom
 
©om
;

16533 
æags
;

16534 
©om
 = 
	`g‘_u32
(
pc
);

16535 
æags
 = 
pc
[4];

16536 
pc
 += 5;

16537 ià(
	`JS_DefšeGlob®V¬
(
ùx
, 
©om
, 
æags
))

16538 
exû±iÚ
;

16540 
BREAK
;

16541 
	`CASE
(
OP_defše_func
):

16543 
JSAtom
 
©om
;

16544 
æags
;

16545 
©om
 = 
	`g‘_u32
(
pc
);

16546 
æags
 = 
pc
[4];

16547 
pc
 += 5;

16548 ià(
	`JS_DefšeGlob®FunùiÚ
(
ùx
, 
©om
, 
¥
[-1], 
æags
))

16549 
exû±iÚ
;

16550 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

16551 
¥
--;

16553 
BREAK
;

16555 
	`CASE
(
OP_g‘_loc
):

16557 
idx
;

16558 
idx
 = 
	`g‘_u16
(
pc
);

16559 
pc
 += 2;

16560 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[
idx
]);

16561 
¥
++;

16563 
BREAK
;

16564 
	`CASE
(
OP_put_loc
):

16566 
idx
;

16567 
idx
 = 
	`g‘_u16
(
pc
);

16568 
pc
 += 2;

16569 
	`£t_v®ue
(
ùx
, &
v¬_buf
[
idx
], 
¥
[-1]);

16570 
¥
--;

16572 
BREAK
;

16573 
	`CASE
(
OP_£t_loc
):

16575 
idx
;

16576 
idx
 = 
	`g‘_u16
(
pc
);

16577 
pc
 += 2;

16578 
	`£t_v®ue
(
ùx
, &
v¬_buf
[
idx
], 
	`JS_DupV®ue
(ùx, 
¥
[-1]));

16580 
BREAK
;

16581 
	`CASE
(
OP_g‘_¬g
):

16583 
idx
;

16584 
idx
 = 
	`g‘_u16
(
pc
);

16585 
pc
 += 2;

16586 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, 
¬g_buf
[
idx
]);

16587 
¥
++;

16589 
BREAK
;

16590 
	`CASE
(
OP_put_¬g
):

16592 
idx
;

16593 
idx
 = 
	`g‘_u16
(
pc
);

16594 
pc
 += 2;

16595 
	`£t_v®ue
(
ùx
, &
¬g_buf
[
idx
], 
¥
[-1]);

16596 
¥
--;

16598 
BREAK
;

16599 
	`CASE
(
OP_£t_¬g
):

16601 
idx
;

16602 
idx
 = 
	`g‘_u16
(
pc
);

16603 
pc
 += 2;

16604 
	`£t_v®ue
(
ùx
, &
¬g_buf
[
idx
], 
	`JS_DupV®ue
(ùx, 
¥
[-1]));

16606 
BREAK
;

16608 #ià
SHORT_OPCODES


16609 
	`CASE
(
OP_g‘_loc8
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[*
pc
++]); 
BREAK
;

16610 
	`CASE
(
OP_put_loc8
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[*
pc
++], *--
¥
); 
BREAK
;

16611 
	`CASE
(
OP_£t_loc8
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[*
pc
++], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16613 
	`CASE
(
OP_g‘_loc0
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[0]); 
BREAK
;

16614 
	`CASE
(
OP_g‘_loc1
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[1]); 
BREAK
;

16615 
	`CASE
(
OP_g‘_loc2
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[2]); 
BREAK
;

16616 
	`CASE
(
OP_g‘_loc3
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[3]); 
BREAK
;

16617 
	`CASE
(
OP_put_loc0
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[0], *--
¥
); 
BREAK
;

16618 
	`CASE
(
OP_put_loc1
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[1], *--
¥
); 
BREAK
;

16619 
	`CASE
(
OP_put_loc2
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[2], *--
¥
); 
BREAK
;

16620 
	`CASE
(
OP_put_loc3
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[3], *--
¥
); 
BREAK
;

16621 
	`CASE
(
OP_£t_loc0
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[0], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16622 
	`CASE
(
OP_£t_loc1
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[1], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16623 
	`CASE
(
OP_£t_loc2
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[2], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16624 
	`CASE
(
OP_£t_loc3
): 
	`£t_v®ue
(
ùx
, &
v¬_buf
[3], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16625 
	`CASE
(
OP_g‘_¬g0
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
¬g_buf
[0]); 
BREAK
;

16626 
	`CASE
(
OP_g‘_¬g1
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
¬g_buf
[1]); 
BREAK
;

16627 
	`CASE
(
OP_g‘_¬g2
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
¬g_buf
[2]); 
BREAK
;

16628 
	`CASE
(
OP_g‘_¬g3
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, 
¬g_buf
[3]); 
BREAK
;

16629 
	`CASE
(
OP_put_¬g0
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[0], *--
¥
); 
BREAK
;

16630 
	`CASE
(
OP_put_¬g1
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[1], *--
¥
); 
BREAK
;

16631 
	`CASE
(
OP_put_¬g2
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[2], *--
¥
); 
BREAK
;

16632 
	`CASE
(
OP_put_¬g3
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[3], *--
¥
); 
BREAK
;

16633 
	`CASE
(
OP_£t_¬g0
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[0], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16634 
	`CASE
(
OP_£t_¬g1
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[1], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16635 
	`CASE
(
OP_£t_¬g2
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[2], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16636 
	`CASE
(
OP_£t_¬g3
): 
	`£t_v®ue
(
ùx
, &
¬g_buf
[3], 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16637 
	`CASE
(
OP_g‘_v¬_»f0
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, *
v¬_»fs
[0]->
pv®ue
); 
BREAK
;

16638 
	`CASE
(
OP_g‘_v¬_»f1
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, *
v¬_»fs
[1]->
pv®ue
); 
BREAK
;

16639 
	`CASE
(
OP_g‘_v¬_»f2
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, *
v¬_»fs
[2]->
pv®ue
); 
BREAK
;

16640 
	`CASE
(
OP_g‘_v¬_»f3
): *
¥
++ = 
	`JS_DupV®ue
(
ùx
, *
v¬_»fs
[3]->
pv®ue
); 
BREAK
;

16641 
	`CASE
(
OP_put_v¬_»f0
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[0]->
pv®ue
, *--
¥
); 
BREAK
;

16642 
	`CASE
(
OP_put_v¬_»f1
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[1]->
pv®ue
, *--
¥
); 
BREAK
;

16643 
	`CASE
(
OP_put_v¬_»f2
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[2]->
pv®ue
, *--
¥
); 
BREAK
;

16644 
	`CASE
(
OP_put_v¬_»f3
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[3]->
pv®ue
, *--
¥
); 
BREAK
;

16645 
	`CASE
(
OP_£t_v¬_»f0
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[0]->
pv®ue
, 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16646 
	`CASE
(
OP_£t_v¬_»f1
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[1]->
pv®ue
, 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16647 
	`CASE
(
OP_£t_v¬_»f2
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[2]->
pv®ue
, 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16648 
	`CASE
(
OP_£t_v¬_»f3
): 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[3]->
pv®ue
, 
	`JS_DupV®ue
(ùx, 
¥
[-1])); 
BREAK
;

16651 
	`CASE
(
OP_g‘_v¬_»f
):

16653 
idx
;

16654 
JSV®ue
 
v®
;

16655 
idx
 = 
	`g‘_u16
(
pc
);

16656 
pc
 += 2;

16657 
v®
 = *
v¬_»fs
[
idx
]->
pv®ue
;

16658 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, 
v®
);

16659 
¥
++;

16661 
BREAK
;

16662 
	`CASE
(
OP_put_v¬_»f
):

16664 
idx
;

16665 
idx
 = 
	`g‘_u16
(
pc
);

16666 
pc
 += 2;

16667 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[
idx
]->
pv®ue
, 
¥
[-1]);

16668 
¥
--;

16670 
BREAK
;

16671 
	`CASE
(
OP_£t_v¬_»f
):

16673 
idx
;

16674 
idx
 = 
	`g‘_u16
(
pc
);

16675 
pc
 += 2;

16676 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[
idx
]->
pv®ue
, 
	`JS_DupV®ue
(ùx, 
¥
[-1]));

16678 
BREAK
;

16679 
	`CASE
(
OP_g‘_v¬_»f_check
):

16681 
idx
;

16682 
JSV®ue
 
v®
;

16683 
idx
 = 
	`g‘_u16
(
pc
);

16684 
pc
 += 2;

16685 
v®
 = *
v¬_»fs
[
idx
]->
pv®ue
;

16686 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
v®
))) {

16687 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
JS_ATOM_NULL
);

16688 
exû±iÚ
;

16690 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, 
v®
);

16691 
¥
++;

16693 
BREAK
;

16694 
	`CASE
(
OP_put_v¬_»f_check
):

16696 
idx
;

16697 
idx
 = 
	`g‘_u16
(
pc
);

16698 
pc
 += 2;

16699 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(*
v¬_»fs
[
idx
]->
pv®ue
))) {

16700 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
JS_ATOM_NULL
);

16701 
exû±iÚ
;

16703 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[
idx
]->
pv®ue
, 
¥
[-1]);

16704 
¥
--;

16706 
BREAK
;

16707 
	`CASE
(
OP_put_v¬_»f_check_š™
):

16709 
idx
;

16710 
idx
 = 
	`g‘_u16
(
pc
);

16711 
pc
 += 2;

16712 ià(
	`uÆik–y
(!
	`JS_IsUnš™Ÿlized
(*
v¬_»fs
[
idx
]->
pv®ue
))) {

16713 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
JS_ATOM_NULL
);

16714 
exû±iÚ
;

16716 
	`£t_v®ue
(
ùx
, 
v¬_»fs
[
idx
]->
pv®ue
, 
¥
[-1]);

16717 
¥
--;

16719 
BREAK
;

16720 
	`CASE
(
OP_£t_loc_unš™Ÿlized
):

16722 
idx
;

16723 
idx
 = 
	`g‘_u16
(
pc
);

16724 
pc
 += 2;

16725 
	`£t_v®ue
(
ùx
, &
v¬_buf
[
idx
], 
JS_UNINITIALIZED
);

16727 
BREAK
;

16728 
	`CASE
(
OP_g‘_loc_check
):

16730 
idx
;

16731 
idx
 = 
	`g‘_u16
(
pc
);

16732 
pc
 += 2;

16733 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
v¬_buf
[
idx
]))) {

16734 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
JS_ATOM_NULL
);

16735 
exû±iÚ
;

16737 
¥
[0] = 
	`JS_DupV®ue
(
ùx
, 
v¬_buf
[
idx
]);

16738 
¥
++;

16740 
BREAK
;

16741 
	`CASE
(
OP_put_loc_check
):

16743 
idx
;

16744 
idx
 = 
	`g‘_u16
(
pc
);

16745 
pc
 += 2;

16746 ià(
	`uÆik–y
(
	`JS_IsUnš™Ÿlized
(
v¬_buf
[
idx
]))) {

16747 
	`JS_ThrowReã»nûE¼ÜUnš™Ÿlized
(
ùx
, 
JS_ATOM_NULL
);

16748 
exû±iÚ
;

16750 
	`£t_v®ue
(
ùx
, &
v¬_buf
[
idx
], 
¥
[-1]);

16751 
¥
--;

16753 
BREAK
;

16754 
	`CASE
(
OP_put_loc_check_š™
):

16756 
idx
;

16757 
idx
 = 
	`g‘_u16
(
pc
);

16758 
pc
 += 2;

16759 ià(
	`uÆik–y
(!
	`JS_IsUnš™Ÿlized
(
v¬_buf
[
idx
]))) {

16760 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "'this' can be initialized only once");

16761 
exû±iÚ
;

16763 
	`£t_v®ue
(
ùx
, &
v¬_buf
[
idx
], 
¥
[-1]);

16764 
¥
--;

16766 
BREAK
;

16767 
	`CASE
(
OP_şo£_loc
):

16769 
idx
;

16770 
idx
 = 
	`g‘_u16
(
pc
);

16771 
pc
 += 2;

16772 
	`şo£_Ëxiÿl_v¬
(
ùx
, 
sf
, 
idx
, 
FALSE
);

16774 
BREAK
;

16776 
	`CASE
(
OP_make_loc_»f
):

16777 
	`CASE
(
OP_make_¬g_»f
):

16778 
	`CASE
(
OP_make_v¬_»f_»f
):

16780 
JSV¬Ref
 *
v¬_»f
;

16781 
JSPrİ”ty
 *
´
;

16782 
JSAtom
 
©om
;

16783 
idx
;

16784 
©om
 = 
	`g‘_u32
(
pc
);

16785 
idx
 = 
	`g‘_u16
(
pc
 + 4);

16786 
pc
 += 6;

16787 *
¥
++ = 
	`JS_NewObjeùPrÙo
(
ùx
, 
JS_NULL
);

16788 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
¥
[-1])))

16789 
exû±iÚ
;

16790 ià(
İcode
 =ğ
OP_make_v¬_»f_»f
) {

16791 
v¬_»f
 = 
v¬_»fs
[
idx
];

16792 
v¬_»f
->
h—d”
.
»f_couÁ
++;

16794 
v¬_»f
 = 
	`g‘_v¬_»f
(
ùx
, 
sf
, 
idx
, 
İcode
 =ğ
OP_make_¬g_»f
);

16795 ià(!
v¬_»f
)

16796 
exû±iÚ
;

16798 
´
 = 
	`add_´İ”ty
(
ùx
, 
	`JS_VALUE_GET_OBJ
(
¥
[-1]), 
©om
,

16799 
JS_PROP_WRITABLE
 | 
JS_PROP_VARREF
);

16800 ià(!
´
) {

16801 
	`ä“_v¬_»f
(
¹
, 
v¬_»f
);

16802 
exû±iÚ
;

16804 
´
->
u
.
v¬_»f
 = var_ref;

16805 *
¥
++ = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

16807 
BREAK
;

16808 
	`CASE
(
OP_make_v¬_»f
):

16810 
JSAtom
 
©om
;

16811 
©om
 = 
	`g‘_u32
(
pc
);

16812 
pc
 += 4;

16814 ià(
	`JS_G‘Glob®V¬Ref
(
ùx
, 
©om
, 
¥
))

16815 
exû±iÚ
;

16816 
¥
 += 2;

16818 
BREAK
;

16820 
	`CASE
(
OP_gÙo
):

16821 
pc
 +ğ(
št32_t
)
	`g‘_u32
(pc);

16822 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16823 
exû±iÚ
;

16824 
BREAK
;

16825 #ià
SHORT_OPCODES


16826 
	`CASE
(
OP_gÙo16
):

16827 
pc
 +ğ(
št16_t
)
	`g‘_u16
(pc);

16828 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16829 
exû±iÚ
;

16830 
BREAK
;

16831 
	`CASE
(
OP_gÙo8
):

16832 
pc
 +ğ(
št8_t
)pc[0];

16833 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16834 
exû±iÚ
;

16835 
BREAK
;

16837 
	`CASE
(
OP_if_Œue
):

16839 
»s
;

16840 
JSV®ue
 
İ1
;

16842 
İ1
 = 
¥
[-1];

16843 
pc
 += 4;

16844 ià((
ušt32_t
)
	`JS_VALUE_GET_TAG
(
İ1
è<ğ
JS_TAG_UNDEFINED
) {

16845 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
);

16847 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
İ1
);

16849 
¥
--;

16850 ià(
»s
) {

16851 
pc
 +ğ(
št32_t
)
	`g‘_u32
(pc - 4) - 4;

16853 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16854 
exû±iÚ
;

16856 
BREAK
;

16857 
	`CASE
(
OP_if_çl£
):

16859 
»s
;

16860 
JSV®ue
 
İ1
;

16862 
İ1
 = 
¥
[-1];

16863 
pc
 += 4;

16864 ià((
ušt32_t
)
	`JS_VALUE_GET_TAG
(
İ1
è<ğ
JS_TAG_UNDEFINED
) {

16865 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
);

16867 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
İ1
);

16869 
¥
--;

16870 ià(!
»s
) {

16871 
pc
 +ğ(
št32_t
)
	`g‘_u32
(pc - 4) - 4;

16873 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16874 
exû±iÚ
;

16876 
BREAK
;

16877 #ià
SHORT_OPCODES


16878 
	`CASE
(
OP_if_Œue8
):

16880 
»s
;

16881 
JSV®ue
 
İ1
;

16883 
İ1
 = 
¥
[-1];

16884 
pc
 += 1;

16885 ià((
ušt32_t
)
	`JS_VALUE_GET_TAG
(
İ1
è<ğ
JS_TAG_UNDEFINED
) {

16886 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
);

16888 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
İ1
);

16890 
¥
--;

16891 ià(
»s
) {

16892 
pc
 +ğ(
št8_t
)pc[-1] - 1;

16894 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16895 
exû±iÚ
;

16897 
BREAK
;

16898 
	`CASE
(
OP_if_çl£8
):

16900 
»s
;

16901 
JSV®ue
 
İ1
;

16903 
İ1
 = 
¥
[-1];

16904 
pc
 += 1;

16905 ià((
ušt32_t
)
	`JS_VALUE_GET_TAG
(
İ1
è<ğ
JS_TAG_UNDEFINED
) {

16906 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
);

16908 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
İ1
);

16910 
¥
--;

16911 ià(!
»s
) {

16912 
pc
 +ğ(
št8_t
)pc[-1] - 1;

16914 ià(
	`uÆik–y
(
	`js_pŞl_š‹¼u±s
(
ùx
)))

16915 
exû±iÚ
;

16917 
BREAK
;

16919 
	`CASE
(
OP_ÿtch
):

16921 
št32_t
 
diff
;

16922 
diff
 = 
	`g‘_u32
(
pc
);

16923 
¥
[0] = 
	`JS_NewC©chOff£t
(
ùx
, 
pc
 + 
diff
 - 
b
->
by‹_code_buf
);

16924 
¥
++;

16925 
pc
 += 4;

16927 
BREAK
;

16928 
	`CASE
(
OP_gosub
):

16930 
št32_t
 
diff
;

16931 
diff
 = 
	`g‘_u32
(
pc
);

16933 
¥
[0] = 
	`JS_NewIÁ32
(
ùx
, 
pc
 + 4 - 
b
->
by‹_code_buf
);

16934 
¥
++;

16935 
pc
 +ğ
diff
;

16937 
BREAK
;

16938 
	`CASE
(
OP_»t
):

16940 
JSV®ue
 
İ1
;

16941 
ušt32_t
 
pos
;

16942 
İ1
 = 
¥
[-1];

16943 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
İ1
è!ğ
JS_TAG_INT
))

16944 
»t_ç
;

16945 
pos
 = 
	`JS_VALUE_GET_INT
(
İ1
);

16946 ià(
	`uÆik–y
(
pos
 >ğ
b
->
by‹_code_Ën
)) {

16947 
»t_ç
:

16948 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "invalid„et value");

16949 
exû±iÚ
;

16951 
¥
--;

16952 
pc
 = 
b
->
by‹_code_buf
 + 
pos
;

16954 
BREAK
;

16956 
	`CASE
(
OP_fÜ_š_¡¬t
):

16957 ià(
	`js_fÜ_š_¡¬t
(
ùx
, 
¥
))

16958 
exû±iÚ
;

16959 
BREAK
;

16960 
	`CASE
(
OP_fÜ_š_Ãxt
):

16961 ià(
	`js_fÜ_š_Ãxt
(
ùx
, 
¥
))

16962 
exû±iÚ
;

16963 
¥
 += 2;

16964 
BREAK
;

16965 
	`CASE
(
OP_fÜ_of_¡¬t
):

16966 ià(
	`js_fÜ_of_¡¬t
(
ùx
, 
¥
, 
FALSE
))

16967 
exû±iÚ
;

16968 
¥
 += 1;

16969 *
¥
++ = 
	`JS_NewC©chOff£t
(
ùx
, 0);

16970 
BREAK
;

16971 
	`CASE
(
OP_fÜ_of_Ãxt
):

16973 
off£t
 = -3 - 
pc
[0];

16974 
pc
 += 1;

16975 ià(
	`js_fÜ_of_Ãxt
(
ùx
, 
¥
, 
off£t
))

16976 
exû±iÚ
;

16977 
¥
 += 2;

16979 
BREAK
;

16980 
	`CASE
(
OP_fÜ_awa™_of_¡¬t
):

16981 ià(
	`js_fÜ_of_¡¬t
(
ùx
, 
¥
, 
TRUE
))

16982 
exû±iÚ
;

16983 
¥
 += 1;

16984 *
¥
++ = 
	`JS_NewC©chOff£t
(
ùx
, 0);

16985 
BREAK
;

16986 
	`CASE
(
OP_fÜ_awa™_of_Ãxt
):

16987 ià(
	`js_fÜ_awa™_of_Ãxt
(
ùx
, 
¥
))

16988 
exû±iÚ
;

16989 
¥
 += 1;

16990 
BREAK
;

16991 
	`CASE
(
OP_™”©Ü_g‘_v®ue_dÚe
):

16992 ià(
	`js_™”©Ü_g‘_v®ue_dÚe
(
ùx
, 
¥
))

16993 
exû±iÚ
;

16994 
¥
 += 1;

16995 
BREAK
;

16997 
	`CASE
(
OP_™”©Ü_şo£
):

16999 
¥
--;

17000 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17001 
¥
--;

17002 ià(!
	`JS_IsUndefšed
(
¥
[-1])) {

17003 ià(
	`JS_I‹¿tÜClo£
(
ùx
, 
¥
[-1], 
FALSE
))

17004 
exû±iÚ
;

17005 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17007 
¥
--;

17008 
BREAK
;

17009 
	`CASE
(
OP_™”©Ü_şo£_»tuº
):

17011 
JSV®ue
 
»t_v®
;

17014 
»t_v®
 = *--
¥
;

17015 
¥
 > 
¡ack_buf
 &&

17016 
	`JS_VALUE_GET_TAG
(
¥
[-1]è!ğ
JS_TAG_CATCH_OFFSET
) {

17017 
	`JS_F»eV®ue
(
ùx
, *--
¥
);

17019 ià(
	`uÆik–y
(
¥
 < 
¡ack_buf
 + 3)) {

17020 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "iterator_close_return");

17021 
	`JS_F»eV®ue
(
ùx
, 
»t_v®
);

17022 
exû±iÚ
;

17024 
¥
[0] = sp[-1];

17025 
¥
[-1] = sp[-2];

17026 
¥
[-2] = sp[-3];

17027 
¥
[-3] = 
»t_v®
;

17028 
¥
++;

17030 
BREAK
;

17032 
	`CASE
(
OP_async_™”©Ü_şo£
):

17035 
JSV®ue
 
»t
, 
m‘hod
;

17036 
»t_æag
;

17037 
¥
--;

17038 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¥
[-2], 
JS_ATOM_»tuº
);

17039 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

17040 
exû±iÚ
;

17041 ià(
	`JS_IsUndefšed
(
m‘hod
è|| 
	`JS_IsNuÎ
(method)) {

17042 
»t
 = 
JS_UNDEFINED
;

17043 
»t_æag
 = 
TRUE
;

17045 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
¥
[-2], 0, 
NULL
);

17046 ià(
	`JS_IsExû±iÚ
(
»t
))

17047 
exû±iÚ
;

17048 ià(!
	`JS_IsObjeù
(
»t
)) {

17049 
	`JS_F»eV®ue
(
ùx
, 
»t
);

17050 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

17051 
exû±iÚ
;

17053 
»t_æag
 = 
FALSE
;

17055 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17056 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17057 
¥
[-2] = 
»t
;

17058 
¥
[-1] = 
	`JS_NewBoŞ
(
ùx
, 
»t_æag
);

17060 
BREAK
;

17062 
	`CASE
(
OP_async_™”©Ü_Ãxt
):

17065 
JSV®ue
 
»t
;

17066 
»t
 = 
	`JS_C®l
(
ùx
, 
¥
[-3], sp[-4],

17067 1, (
JSV®ueCÚ¡
 *)(
¥
 - 1));

17068 ià(
	`JS_IsExû±iÚ
(
»t
))

17069 
exû±iÚ
;

17070 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17071 
¥
[-1] = 
»t
;

17073 
BREAK
;

17075 
	`CASE
(
OP_async_™”©Ü_g‘
):

17078 
JSV®ue
 
m‘hod
, 
»t
;

17079 
BOOL
 
»t_æag
;

17080 
æags
;

17081 
æags
 = *
pc
++;

17083 ià(
æags
 == 2) {

17084 
	`JS_ThrowTy³E¼Ü
(
ùx
, "iterator does‚ot have‡hrow method");

17085 
exû±iÚ
;

17087 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¥
[-4], 
æags
 ? 
JS_ATOM_throw
 : 
JS_ATOM_»tuº
);

17088 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

17089 
exû±iÚ
;

17090 ià(
	`JS_IsUndefšed
(
m‘hod
è|| 
	`JS_IsNuÎ
(method)) {

17091 
»t_æag
 = 
TRUE
;

17093 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
¥
[-4],

17094 1, (
JSV®ueCÚ¡
 *)(
¥
 - 1));

17095 ià(
	`JS_IsExû±iÚ
(
»t
))

17096 
exû±iÚ
;

17097 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17098 
¥
[-1] = 
»t
;

17099 
»t_æag
 = 
FALSE
;

17101 
¥
[0] = 
	`JS_NewBoŞ
(
ùx
, 
»t_æag
);

17102 
¥
 += 1;

17104 
BREAK
;

17106 
	`CASE
(
OP_ÊÙ
):

17108 
»s
;

17109 
JSV®ue
 
İ1
;

17111 
İ1
 = 
¥
[-1];

17112 ià((
ušt32_t
)
	`JS_VALUE_GET_TAG
(
İ1
è<ğ
JS_TAG_UNDEFINED
) {

17113 
»s
 = 
	`JS_VALUE_GET_INT
(
İ1
) != 0;

17115 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
İ1
);

17117 
¥
[-1] = 
	`JS_NewBoŞ
(
ùx
, !
»s
);

17119 
BREAK
;

17121 
	`CASE
(
OP_g‘_f›ld
):

17123 
JSV®ue
 
v®
;

17124 
JSAtom
 
©om
;

17125 
©om
 = 
	`g‘_u32
(
pc
);

17126 
pc
 += 4;

17128 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¥
[-1], 
©om
);

17129 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17130 
exû±iÚ
;

17131 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17132 
¥
[-1] = 
v®
;

17134 
BREAK
;

17136 
	`CASE
(
OP_g‘_f›ld2
):

17138 
JSV®ue
 
v®
;

17139 
JSAtom
 
©om
;

17140 
©om
 = 
	`g‘_u32
(
pc
);

17141 
pc
 += 4;

17143 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¥
[-1], 
©om
);

17144 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17145 
exû±iÚ
;

17146 *
¥
++ = 
v®
;

17148 
BREAK
;

17150 
	`CASE
(
OP_put_f›ld
):

17152 
»t
;

17153 
JSAtom
 
©om
;

17154 
©om
 = 
	`g‘_u32
(
pc
);

17155 
pc
 += 4;

17157 
»t
 = 
	`JS_S‘Prİ”tyIÁ”Çl
(
ùx
, 
¥
[-2], 
©om
, sp[-1],

17158 
JS_PROP_THROW_STRICT
);

17159 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17160 
¥
 -= 2;

17161 ià(
	`uÆik–y
(
»t
 < 0))

17162 
exû±iÚ
;

17164 
BREAK
;

17166 
	`CASE
(
OP_´iv©e_symbŞ
):

17168 
JSAtom
 
©om
;

17169 
JSV®ue
 
v®
;

17171 
©om
 = 
	`g‘_u32
(
pc
);

17172 
pc
 += 4;

17173 
v®
 = 
	`JS_NewSymbŞFromAtom
(
ùx
, 
©om
, 
JS_ATOM_TYPE_PRIVATE
);

17174 ià(
	`JS_IsExû±iÚ
(
v®
))

17175 
exû±iÚ
;

17176 *
¥
++ = 
v®
;

17178 
BREAK
;

17180 
	`CASE
(
OP_g‘_´iv©e_f›ld
):

17182 
JSV®ue
 
v®
;

17184 
v®
 = 
	`JS_G‘Priv©eF›ld
(
ùx
, 
¥
[-2], sp[-1]);

17185 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17186 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17187 
¥
[-2] = 
v®
;

17188 
¥
--;

17189 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17190 
exû±iÚ
;

17192 
BREAK
;

17194 
	`CASE
(
OP_put_´iv©e_f›ld
):

17196 
»t
;

17197 
»t
 = 
	`JS_S‘Priv©eF›ld
(
ùx
, 
¥
[-3], sp[-1], sp[-2]);

17198 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

17199 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17200 
¥
 -= 3;

17201 ià(
	`uÆik–y
(
»t
 < 0))

17202 
exû±iÚ
;

17204 
BREAK
;

17206 
	`CASE
(
OP_defše_´iv©e_f›ld
):

17208 
»t
;

17209 
»t
 = 
	`JS_DefšePriv©eF›ld
(
ùx
, 
¥
[-3], sp[-2], sp[-1]);

17210 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17211 
¥
 -= 2;

17212 ià(
	`uÆik–y
(
»t
 < 0))

17213 
exû±iÚ
;

17215 
BREAK
;

17217 
	`CASE
(
OP_defše_f›ld
):

17219 
»t
;

17220 
JSAtom
 
©om
;

17221 
©om
 = 
	`g‘_u32
(
pc
);

17222 
pc
 += 4;

17224 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
¥
[-2], 
©om
, sp[-1],

17225 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
);

17226 
¥
--;

17227 ià(
	`uÆik–y
(
»t
 < 0))

17228 
exû±iÚ
;

17230 
BREAK
;

17232 
	`CASE
(
OP_£t_Çme
):

17234 
»t
;

17235 
JSAtom
 
©om
;

17236 
©om
 = 
	`g‘_u32
(
pc
);

17237 
pc
 += 4;

17239 
»t
 = 
	`JS_DefšeObjeùName
(
ùx
, 
¥
[-1], 
©om
, 
JS_PROP_CONFIGURABLE
);

17240 ià(
	`uÆik–y
(
»t
 < 0))

17241 
exû±iÚ
;

17243 
BREAK
;

17244 
	`CASE
(
OP_£t_Çme_compu‹d
):

17246 
»t
;

17247 
»t
 = 
	`JS_DefšeObjeùNameCompu‹d
(
ùx
, 
¥
[-1], sp[-2], 
JS_PROP_CONFIGURABLE
);

17248 ià(
	`uÆik–y
(
»t
 < 0))

17249 
exû±iÚ
;

17251 
BREAK
;

17252 
	`CASE
(
OP_£t_´Ùo
):

17254 
JSV®ue
 
´Ùo
;

17255 
´Ùo
 = 
¥
[-1];

17256 ià(
	`JS_IsObjeù
(
´Ùo
è|| 
	`JS_IsNuÎ
(proto)) {

17257 ià(
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
¥
[-2], 
´Ùo
, 
TRUE
) < 0)

17258 
exû±iÚ
;

17260 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

17261 
¥
--;

17263 
BREAK
;

17264 
	`CASE
(
OP_£t_home_objeù
):

17265 
	`js_m‘hod_£t_home_objeù
(
ùx
, 
¥
[-1], sp[-2]);

17266 
BREAK
;

17267 
	`CASE
(
OP_defše_m‘hod
):

17268 
	`CASE
(
OP_defše_m‘hod_compu‹d
):

17270 
JSV®ue
 
g‘‹r
, 
£‰”
, 
v®ue
;

17271 
JSV®ueCÚ¡
 
obj
;

17272 
JSAtom
 
©om
;

17273 
æags
, 
»t
, 
İ_æags
;

17274 
BOOL
 
is_compu‹d
;

17275 
	#OP_DEFINE_METHOD_METHOD
 0

	)

17276 
	#OP_DEFINE_METHOD_GETTER
 1

	)

17277 
	#OP_DEFINE_METHOD_SETTER
 2

	)

17278 
	#OP_DEFINE_METHOD_ENUMERABLE
 4

	)

17280 
is_compu‹d
 = (
İcode
 =ğ
OP_defše_m‘hod_compu‹d
);

17281 ià(
is_compu‹d
) {

17282 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¥
[-2]);

17283 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

17284 
exû±iÚ
;

17285 
İcode
 +ğ
OP_defše_m‘hod
 - 
OP_defše_m‘hod_compu‹d
;

17287 
©om
 = 
	`g‘_u32
(
pc
);

17288 
pc
 += 4;

17290 
İ_æags
 = *
pc
++;

17292 
obj
 = 
¥
[-2 - 
is_compu‹d
];

17293 
æags
 = 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_CONFIGURABLE
 |

17294 
JS_PROP_HAS_ENUMERABLE
 | 
JS_PROP_THROW
;

17295 ià(
İ_æags
 & 
OP_DEFINE_METHOD_ENUMERABLE
)

17296 
æags
 |ğ
JS_PROP_ENUMERABLE
;

17297 
İ_æags
 &= 3;

17298 
v®ue
 = 
JS_UNDEFINED
;

17299 
g‘‹r
 = 
JS_UNDEFINED
;

17300 
£‰”
 = 
JS_UNDEFINED
;

17301 ià(
İ_æags
 =ğ
OP_DEFINE_METHOD_METHOD
) {

17302 
v®ue
 = 
¥
[-1];

17303 
æags
 |ğ
JS_PROP_HAS_VALUE
 | 
JS_PROP_HAS_WRITABLE
 | 
JS_PROP_WRITABLE
;

17304 } ià(
İ_æags
 =ğ
OP_DEFINE_METHOD_GETTER
) {

17305 
g‘‹r
 = 
¥
[-1];

17306 
æags
 |ğ
JS_PROP_HAS_GET
;

17308 
£‰”
 = 
¥
[-1];

17309 
æags
 |ğ
JS_PROP_HAS_SET
;

17311 
»t
 = 
	`js_m‘hod_£t_´İ”t›s
(
ùx
, 
¥
[-1], 
©om
, 
æags
, 
obj
);

17312 ià(
»t
 >= 0) {

17313 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
obj
, 
©om
, 
v®ue
,

17314 
g‘‹r
, 
£‰”
, 
æags
);

17316 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17317 ià(
is_compu‹d
) {

17318 
	`JS_F»eAtom
(
ùx
, 
©om
);

17319 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17321 
¥
 -ğ1 + 
is_compu‹d
;

17322 ià(
	`uÆik–y
(
»t
 < 0))

17323 
exû±iÚ
;

17325 
BREAK
;

17327 
	`CASE
(
OP_defše_şass
):

17328 
	`CASE
(
OP_defše_şass_compu‹d
):

17330 
şass_æags
;

17331 
JSAtom
 
©om
;

17333 
©om
 = 
	`g‘_u32
(
pc
);

17334 
şass_æags
 = 
pc
[4];

17335 
pc
 += 5;

17336 ià(
	`js_İ_defše_şass
(
ùx
, 
¥
, 
©om
, 
şass_æags
,

17337 
v¬_»fs
, 
sf
,

17338 (
İcode
 =ğ
OP_defše_şass_compu‹d
)) < 0)

17339 
exû±iÚ
;

17341 
BREAK
;

17343 
	`CASE
(
OP_g‘_¬¿y_–
):

17345 
JSV®ue
 
v®
;

17347 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
¥
[-2], sp[-1]);

17348 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17349 
¥
[-2] = 
v®
;

17350 
¥
--;

17351 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17352 
exû±iÚ
;

17354 
BREAK
;

17356 
	`CASE
(
OP_g‘_¬¿y_–2
):

17358 
JSV®ue
 
v®
;

17360 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
¥
[-2], sp[-1]);

17361 
¥
[-1] = 
v®
;

17362 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17363 
exû±iÚ
;

17365 
BREAK
;

17367 
	`CASE
(
OP_g‘_»f_v®ue
):

17369 
JSV®ue
 
v®
;

17370 ià(
	`uÆik–y
(
	`JS_IsUndefšed
(
¥
[-2]))) {

17371 
JSAtom
 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¥
[-1]);

17372 ià(
©om
 !ğ
JS_ATOM_NULL
) {

17373 
	`JS_ThrowReã»nûE¼ÜNÙDefšed
(
ùx
, 
©om
);

17374 
	`JS_F»eAtom
(
ùx
, 
©om
);

17376 
exû±iÚ
;

17378 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
¥
[-2],

17379 
	`JS_DupV®ue
(
ùx
, 
¥
[-1]));

17380 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17381 
exû±iÚ
;

17382 
¥
[0] = 
v®
;

17383 
¥
++;

17385 
BREAK
;

17387 
	`CASE
(
OP_g‘_su³r_v®ue
):

17389 
JSV®ue
 
v®
;

17390 
JSAtom
 
©om
;

17391 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¥
[-1]);

17392 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

17393 
exû±iÚ
;

17394 
v®
 = 
	`JS_G‘Prİ”tyIÁ”Çl
(
ùx
, 
¥
[-2], 
©om
, sp[-3], 
FALSE
);

17395 
	`JS_F»eAtom
(
ùx
, 
©om
);

17396 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

17397 
exû±iÚ
;

17398 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

17399 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17400 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

17401 
¥
[-3] = 
v®
;

17402 
¥
 -= 2;

17404 
BREAK
;

17406 
	`CASE
(
OP_put_¬¿y_–
):

17408 
»t
;

17410 
»t
 = 
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
¥
[-3], sp[-2], sp[-1], 
JS_PROP_THROW_STRICT
);

17411 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

17412 
¥
 -= 3;

17413 ià(
	`uÆik–y
(
»t
 < 0))

17414 
exû±iÚ
;

17416 
BREAK
;

17418 
	`CASE
(
OP_put_»f_v®ue
):

17420 
»t
;

17421 ià(
	`uÆik–y
(
	`JS_IsUndefšed
(
¥
[-3]))) {

17422 ià(
	`is_¡riù_mode
(
ùx
)) {

17423 
JSAtom
 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¥
[-2]);

17424 ià(
©om
 !ğ
JS_ATOM_NULL
) {

17425 
	`JS_ThrowReã»nûE¼ÜNÙDefšed
(
ùx
, 
©om
);

17426 
	`JS_F»eAtom
(
ùx
, 
©om
);

17428 
exû±iÚ
;

17430 
¥
[-3] = 
	`JS_DupV®ue
(
ùx
, ctx->
glob®_obj
);

17433 
»t
 = 
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
¥
[-3], sp[-2], sp[-1], 
JS_PROP_THROW_STRICT
);

17434 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

17435 
¥
 -= 3;

17436 ià(
	`uÆik–y
(
»t
 < 0))

17437 
exû±iÚ
;

17439 
BREAK
;

17441 
	`CASE
(
OP_put_su³r_v®ue
):

17443 
»t
;

17444 
JSAtom
 
©om
;

17445 ià(
	`JS_VALUE_GET_TAG
(
¥
[-3]è!ğ
JS_TAG_OBJECT
) {

17446 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

17447 
exû±iÚ
;

17449 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¥
[-2]);

17450 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

17451 
exû±iÚ
;

17452 
»t
 = 
	`JS_S‘Prİ”tyG’”ic
(
ùx
, 
	`JS_VALUE_GET_OBJ
(
¥
[-3]),

17453 
©om
, 
¥
[-1], sp[-4],

17454 
JS_PROP_THROW_STRICT
);

17455 
	`JS_F»eAtom
(
ùx
, 
©om
);

17456 
	`JS_F»eV®ue
(
ùx
, 
¥
[-4]);

17457 
	`JS_F»eV®ue
(
ùx
, 
¥
[-3]);

17458 
	`JS_F»eV®ue
(
ùx
, 
¥
[-2]);

17459 
¥
 -= 4;

17460 ià(
»t
 < 0)

17461 
exû±iÚ
;

17463 
BREAK
;

17465 
	`CASE
(
OP_defše_¬¿y_–
):

17467 
»t
;

17468 
»t
 = 
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
¥
[-3], 
	`JS_DupV®ue
(ctx, sp[-2]), sp[-1],

17469 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
);

17470 
¥
 -= 1;

17471 ià(
	`uÆik–y
(
»t
 < 0))

17472 
exû±iÚ
;

17474 
BREAK
;

17476 
	`CASE
(
OP_­³nd
):

17478 ià(
	`js_­³nd_’um”©e
(
ùx
, 
¥
))

17479 
exû±iÚ
;

17480 
	`JS_F»eV®ue
(
ùx
, *--
¥
);

17482 
BREAK
;

17484 
	`CASE
(
OP_cİy_d©a_´İ”t›s
):

17490 
mask
;

17492 
mask
 = *
pc
++;

17493 ià(
	`JS_CİyD©aPrİ”t›s
(
ùx
, 
¥
[-1 - (
mask
 & 3)],

17494 
¥
[-1 - ((
mask
 >> 2) & 7)],

17495 
¥
[-1 - ((
mask
 >> 5) & 7)], 0))

17496 
exû±iÚ
;

17498 
BREAK
;

17500 
	`CASE
(
OP_add
):

17502 
JSV®ue
 
İ1
, 
İ2
;

17503 
İ1
 = 
¥
[-2];

17504 
İ2
 = 
¥
[-1];

17505 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17506 
sšt64_t
 
r
;

17507 
r
 = (
sšt64_t
)
	`JS_VALUE_GET_INT
(
İ1
è+ JS_VALUE_GET_INT(
İ2
);

17508 ià(
	`uÆik–y
(()
r
 !=„))

17509 
add_¦ow
;

17510 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

17511 
¥
--;

17512 } ià(
	`JS_VALUE_IS_BOTH_FLOAT
(
İ1
, 
İ2
)) {

17513 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, 
	`JS_VALUE_GET_FLOAT64
(
İ1
) +

17514 
	`JS_VALUE_GET_FLOAT64
(
İ2
));

17515 
¥
--;

17517 
add_¦ow
:

17518 ià(
	`js_add_¦ow
(
ùx
, 
¥
))

17519 
exû±iÚ
;

17520 
¥
--;

17523 
BREAK
;

17524 
	`CASE
(
OP_add_loc
):

17526 
JSV®ue
 
İs
[2];

17527 
idx
;

17528 
idx
 = *
pc
;

17529 
pc
 += 1;

17531 
İs
[0] = 
v¬_buf
[
idx
];

17532 
İs
[1] = 
¥
[-1];

17533 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İs
[0], ops[1]))) {

17534 
sšt64_t
 
r
;

17535 
r
 = (
sšt64_t
)
	`JS_VALUE_GET_INT
(
İs
[0]) + JS_VALUE_GET_INT(ops[1]);

17536 ià(
	`uÆik–y
(()
r
 !=„))

17537 
add_loc_¦ow
;

17538 
v¬_buf
[
idx
] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

17539 
¥
--;

17540 } ià(
	`JS_VALUE_GET_TAG
(
İs
[0]è=ğ
JS_TAG_STRING
) {

17541 
¥
--;

17542 
İs
[1] = 
	`JS_ToPrim™iveF»e
(
ùx
, ops[1], 
HINT_NONE
);

17543 ià(
	`JS_IsExû±iÚ
(
İs
[1])) {

17544 
exû±iÚ
;

17548 
İs
[0] = 
	`JS_CÚÿtSŒšg
(
ùx
, ops[0], ops[1]);

17549 ià(
	`JS_IsExû±iÚ
(
İs
[0])) {

17550 
v¬_buf
[
idx
] = 
JS_UNDEFINED
;

17551 
exû±iÚ
;

17553 
v¬_buf
[
idx
] = 
İs
[0];

17555 
add_loc_¦ow
:

17558 
¥
--;

17562 ià(
	`js_add_¦ow
(
ùx
, 
İs
 + 2)) {

17563 
v¬_buf
[
idx
] = 
JS_UNDEFINED
;

17564 
exû±iÚ
;

17566 
v¬_buf
[
idx
] = 
İs
[0];

17569 
BREAK
;

17570 
	`CASE
(
OP_sub
):

17572 
JSV®ue
 
İ1
, 
İ2
;

17573 
İ1
 = 
¥
[-2];

17574 
İ2
 = 
¥
[-1];

17575 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17576 
sšt64_t
 
r
;

17577 
r
 = (
sšt64_t
)
	`JS_VALUE_GET_INT
(
İ1
è- JS_VALUE_GET_INT(
İ2
);

17578 ià(
	`uÆik–y
(()
r
 !=„))

17579 
bš¬y_¬™h_¦ow
;

17580 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

17581 
¥
--;

17582 } ià(
	`JS_VALUE_IS_BOTH_FLOAT
(
İ1
, 
İ2
)) {

17583 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, 
	`JS_VALUE_GET_FLOAT64
(
İ1
) -

17584 
	`JS_VALUE_GET_FLOAT64
(
İ2
));

17585 
¥
--;

17587 
bš¬y_¬™h_¦ow
;

17590 
BREAK
;

17591 
	`CASE
(
OP_mul
):

17593 
JSV®ue
 
İ1
, 
İ2
;

17594 
d
;

17595 
İ1
 = 
¥
[-2];

17596 
İ2
 = 
¥
[-1];

17597 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17598 
št32_t
 
v1
, 
v2
;

17599 
sšt64_t
 
r
;

17600 
v1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17601 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

17602 
r
 = (
sšt64_t
)
v1
 * 
v2
;

17603 ià(
	`uÆik–y
(()
r
 !=„)) {

17604 #ifdeà
CONFIG_BIGNUM


17605 ià(
	`uÆik–y
(
sf
->
js_mode
 & 
JS_MODE_MATH
) &&

17606 (
r
 < -
MAX_SAFE_INTEGER
 ||„ > MAX_SAFE_INTEGER))

17607 
bš¬y_¬™h_¦ow
;

17609 
d
 = ()
r
;

17610 
mul_å_»s
;

17613 ià(
	`uÆik–y
(
r
 =ğ0 && (
v1
 | 
v2
) < 0)) {

17614 
d
 = -0.0;

17615 
mul_å_»s
;

17617 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

17618 
¥
--;

17619 } ià(
	`JS_VALUE_IS_BOTH_FLOAT
(
İ1
, 
İ2
)) {

17620 #ifdeà
CONFIG_BIGNUM


17621 ià(
	`uÆik–y
(
sf
->
js_mode
 & 
JS_MODE_MATH
))

17622 
bš¬y_¬™h_¦ow
;

17624 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
İ1
è* JS_VALUE_GET_FLOAT64(
İ2
);

17625 
mul_å_»s
:

17626 
¥
[-2] = 
	`__JS_NewFlßt64
(
ùx
, 
d
);

17627 
¥
--;

17629 
bš¬y_¬™h_¦ow
;

17632 
BREAK
;

17633 
	`CASE
(
OP_div
):

17635 
JSV®ue
 
İ1
, 
İ2
;

17636 
İ1
 = 
¥
[-2];

17637 
İ2
 = 
¥
[-1];

17638 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17639 
v1
, 
v2
;

17640 ià(
	`uÆik–y
(
sf
->
js_mode
 & 
JS_MODE_MATH
))

17641 
bš¬y_¬™h_¦ow
;

17642 
v1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17643 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

17644 
¥
[-2] = 
	`JS_NewFlßt64
(
ùx
, ()
v1
 / ()
v2
);

17645 
¥
--;

17647 
bš¬y_¬™h_¦ow
;

17650 
BREAK
;

17651 
	`CASE
(
OP_mod
):

17652 #ifdeà
CONFIG_BIGNUM


17653 
	`CASE
(
OP_m©h_mod
):

17656 
JSV®ue
 
İ1
, 
İ2
;

17657 
İ1
 = 
¥
[-2];

17658 
İ2
 = 
¥
[-1];

17659 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17660 
v1
, 
v2
, 
r
;

17661 
v1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17662 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

17665 ià(
	`uÆik–y
(
v1
 < 0 || 
v2
 <= 0))

17666 
bš¬y_¬™h_¦ow
;

17667 
r
 = 
v1
 % 
v2
;

17668 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
r
);

17669 
¥
--;

17671 
bš¬y_¬™h_¦ow
;

17674 
BREAK
;

17675 
	`CASE
(
OP_pow
):

17676 
bš¬y_¬™h_¦ow
:

17677 ià(
	`js_bš¬y_¬™h_¦ow
(
ùx
, 
¥
, 
İcode
))

17678 
exû±iÚ
;

17679 
¥
--;

17680 
BREAK
;

17682 
	`CASE
(
OP_¶us
):

17684 
JSV®ue
 
İ1
;

17685 
ušt32_t
 
g
;

17686 
İ1
 = 
¥
[-1];

17687 
g
 = 
	`JS_VALUE_GET_TAG
(
İ1
);

17688 ià(
g
 =ğ
JS_TAG_INT
 || 
	`JS_TAG_IS_FLOAT64
(tag)) {

17690 ià(
	`js_uÇry_¬™h_¦ow
(
ùx
, 
¥
, 
İcode
))

17691 
exû±iÚ
;

17694 
BREAK
;

17695 
	`CASE
(
OP_Ãg
):

17697 
JSV®ue
 
İ1
;

17698 
ušt32_t
 
g
;

17699 
v®
;

17700 
d
;

17701 
İ1
 = 
¥
[-1];

17702 
g
 = 
	`JS_VALUE_GET_TAG
(
İ1
);

17703 ià(
g
 =ğ
JS_TAG_INT
) {

17704 
v®
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17706 ià(
	`uÆik–y
(
v®
 == 0)) {

17707 
d
 = -0.0;

17708 
Ãg_å_»s
;

17710 ià(
	`uÆik–y
(
v®
 =ğ
INT32_MIN
)) {

17711 
d
 = -()
v®
;

17712 
Ãg_å_»s
;

17714 
¥
[-1] = 
	`JS_NewIÁ32
(
ùx
, -
v®
);

17715 } ià(
	`JS_TAG_IS_FLOAT64
(
g
)) {

17716 
d
 = -
	`JS_VALUE_GET_FLOAT64
(
İ1
);

17717 
Ãg_å_»s
:

17718 
¥
[-1] = 
	`__JS_NewFlßt64
(
ùx
, 
d
);

17720 ià(
	`js_uÇry_¬™h_¦ow
(
ùx
, 
¥
, 
İcode
))

17721 
exû±iÚ
;

17724 
BREAK
;

17725 
	`CASE
(
OP_šc
):

17727 
JSV®ue
 
İ1
;

17728 
v®
;

17729 
İ1
 = 
¥
[-1];

17730 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_INT
) {

17731 
v®
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17732 ià(
	`uÆik–y
(
v®
 =ğ
INT32_MAX
))

17733 
šc_¦ow
;

17734 
¥
[-1] = 
	`JS_NewIÁ32
(
ùx
, 
v®
 + 1);

17736 
šc_¦ow
:

17737 ià(
	`js_uÇry_¬™h_¦ow
(
ùx
, 
¥
, 
İcode
))

17738 
exû±iÚ
;

17741 
BREAK
;

17742 
	`CASE
(
OP_dec
):

17744 
JSV®ue
 
İ1
;

17745 
v®
;

17746 
İ1
 = 
¥
[-1];

17747 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_INT
) {

17748 
v®
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17749 ià(
	`uÆik–y
(
v®
 =ğ
INT32_MIN
))

17750 
dec_¦ow
;

17751 
¥
[-1] = 
	`JS_NewIÁ32
(
ùx
, 
v®
 - 1);

17753 
dec_¦ow
:

17754 ià(
	`js_uÇry_¬™h_¦ow
(
ùx
, 
¥
, 
İcode
))

17755 
exû±iÚ
;

17758 
BREAK
;

17759 
	`CASE
(
OP_po¡_šc
):

17760 
	`CASE
(
OP_po¡_dec
):

17761 ià(
	`js_po¡_šc_¦ow
(
ùx
, 
¥
, 
İcode
))

17762 
exû±iÚ
;

17763 
¥
++;

17764 
BREAK
;

17765 
	`CASE
(
OP_šc_loc
):

17767 
JSV®ue
 
İ1
;

17768 
v®
;

17769 
idx
;

17770 
idx
 = *
pc
;

17771 
pc
 += 1;

17773 
İ1
 = 
v¬_buf
[
idx
];

17774 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_INT
) {

17775 
v®
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17776 ià(
	`uÆik–y
(
v®
 =ğ
INT32_MAX
))

17777 
šc_loc_¦ow
;

17778 
v¬_buf
[
idx
] = 
	`JS_NewIÁ32
(
ùx
, 
v®
 + 1);

17780 
šc_loc_¦ow
:

17781 ià(
	`js_uÇry_¬™h_¦ow
(
ùx
, 
v¬_buf
 + 
idx
 + 1, 
OP_šc
))

17782 
exû±iÚ
;

17785 
BREAK
;

17786 
	`CASE
(
OP_dec_loc
):

17788 
JSV®ue
 
İ1
;

17789 
v®
;

17790 
idx
;

17791 
idx
 = *
pc
;

17792 
pc
 += 1;

17794 
İ1
 = 
v¬_buf
[
idx
];

17795 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_INT
) {

17796 
v®
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17797 ià(
	`uÆik–y
(
v®
 =ğ
INT32_MIN
))

17798 
dec_loc_¦ow
;

17799 
v¬_buf
[
idx
] = 
	`JS_NewIÁ32
(
ùx
, 
v®
 - 1);

17801 
dec_loc_¦ow
:

17802 ià(
	`js_uÇry_¬™h_¦ow
(
ùx
, 
v¬_buf
 + 
idx
 + 1, 
OP_dec
))

17803 
exû±iÚ
;

17806 
BREAK
;

17807 
	`CASE
(
OP_nÙ
):

17809 
JSV®ue
 
İ1
;

17810 
İ1
 = 
¥
[-1];

17811 ià(
	`JS_VALUE_GET_TAG
(
İ1
è=ğ
JS_TAG_INT
) {

17812 
¥
[-1] = 
	`JS_NewIÁ32
(
ùx
, ~
	`JS_VALUE_GET_INT
(
İ1
));

17814 ià(
	`js_nÙ_¦ow
(
ùx
, 
¥
))

17815 
exû±iÚ
;

17818 
BREAK
;

17820 
	`CASE
(
OP_shl
):

17822 
JSV®ue
 
İ1
, 
İ2
;

17823 
İ1
 = 
¥
[-2];

17824 
İ2
 = 
¥
[-1];

17825 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17826 
ušt32_t
 
v1
, 
v2
;

17827 
v1
 = 
	`JS_VALUE_GET_INT
(
İ1
);

17828 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

17829 #ifdeà
CONFIG_BIGNUM


17831 
št64_t
 
r
;

17832 ià(
	`uÆik–y
(
sf
->
js_mode
 & 
JS_MODE_MATH
)) {

17833 ià(
v2
 > 0x1f)

17834 
shl_¦ow
;

17835 
r
 = (
št64_t
)
v1
 << 
v2
;

17836 ià(()
r
 !=„)

17837 
shl_¦ow
;

17839 
v2
 &= 0x1f;

17843 
v2
 &= 0x1f;

17845 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
, 
v1
 << 
v2
);

17846 
¥
--;

17848 #ifdeà
CONFIG_BIGNUM


17849 
shl_¦ow
:

17851 ià(
	`js_bš¬y_logic_¦ow
(
ùx
, 
¥
, 
İcode
))

17852 
exû±iÚ
;

17853 
¥
--;

17856 
BREAK
;

17857 
	`CASE
(
OP_shr
):

17859 
JSV®ue
 
İ1
, 
İ2
;

17860 
İ1
 = 
¥
[-2];

17861 
İ2
 = 
¥
[-1];

17862 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17863 
ušt32_t
 
v2
;

17864 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

17866 
v2
 &= 0x1f;

17867 
¥
[-2] = 
	`JS_NewUšt32
(
ùx
,

17868 (
ušt32_t
)
	`JS_VALUE_GET_INT
(
İ1
) >>

17869 
v2
);

17870 
¥
--;

17872 ià(
	`js_shr_¦ow
(
ùx
, 
¥
))

17873 
exû±iÚ
;

17874 
¥
--;

17877 
BREAK
;

17878 
	`CASE
(
OP_§r
):

17880 
JSV®ue
 
İ1
, 
İ2
;

17881 
İ1
 = 
¥
[-2];

17882 
İ2
 = 
¥
[-1];

17883 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17884 
ušt32_t
 
v2
;

17885 
v2
 = 
	`JS_VALUE_GET_INT
(
İ2
);

17886 #ifdeà
CONFIG_BIGNUM


17887 ià(
	`uÆik–y
(
v2
 > 0x1f)) {

17888 ià(
	`uÆik–y
(
sf
->
js_mode
 & 
JS_MODE_MATH
))

17889 
§r_¦ow
;

17891 
v2
 &= 0x1f;

17894 
v2
 &= 0x1f;

17896 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
,

17897 ()
	`JS_VALUE_GET_INT
(
İ1
è>> 
v2
);

17898 
¥
--;

17900 #ifdeà
CONFIG_BIGNUM


17901 
§r_¦ow
:

17903 ià(
	`js_bš¬y_logic_¦ow
(
ùx
, 
¥
, 
İcode
))

17904 
exû±iÚ
;

17905 
¥
--;

17908 
BREAK
;

17909 
	`CASE
(
OP_ªd
):

17911 
JSV®ue
 
İ1
, 
İ2
;

17912 
İ1
 = 
¥
[-2];

17913 
İ2
 = 
¥
[-1];

17914 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17915 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
,

17916 
	`JS_VALUE_GET_INT
(
İ1
) &

17917 
	`JS_VALUE_GET_INT
(
İ2
));

17918 
¥
--;

17920 ià(
	`js_bš¬y_logic_¦ow
(
ùx
, 
¥
, 
İcode
))

17921 
exû±iÚ
;

17922 
¥
--;

17925 
BREAK
;

17926 
	`CASE
(
OP_Ü
):

17928 
JSV®ue
 
İ1
, 
İ2
;

17929 
İ1
 = 
¥
[-2];

17930 
İ2
 = 
¥
[-1];

17931 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17932 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
,

17933 
	`JS_VALUE_GET_INT
(
İ1
) |

17934 
	`JS_VALUE_GET_INT
(
İ2
));

17935 
¥
--;

17937 ià(
	`js_bš¬y_logic_¦ow
(
ùx
, 
¥
, 
İcode
))

17938 
exû±iÚ
;

17939 
¥
--;

17942 
BREAK
;

17943 
	`CASE
(
OP_xÜ
):

17945 
JSV®ue
 
İ1
, 
İ2
;

17946 
İ1
 = 
¥
[-2];

17947 
İ2
 = 
¥
[-1];

17948 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) {

17949 
¥
[-2] = 
	`JS_NewIÁ32
(
ùx
,

17950 
	`JS_VALUE_GET_INT
(
İ1
) ^

17951 
	`JS_VALUE_GET_INT
(
İ2
));

17952 
¥
--;

17954 ià(
	`js_bš¬y_logic_¦ow
(
ùx
, 
¥
, 
İcode
))

17955 
exû±iÚ
;

17956 
¥
--;

17959 
BREAK
;

17962 
	#OP_CMP
(
İcode
, 
bš¬y_İ
, 
¦ow_ÿÎ
) \

17963 
	`CASE
(
İcode
): \

17965 
JSV®ue
 
İ1
, 
İ2
; \

17966 
İ1
 = 
¥
[-2]; \

17967 
İ2
 = 
¥
[-1]; \

17968 ià(
	`lik–y
(
	`JS_VALUE_IS_BOTH_INT
(
İ1
, 
İ2
))) { \

17969 
¥
[-2] = 
	`JS_NewBoŞ
(
ùx
, 
	`JS_VALUE_GET_INT
(
İ1
è
bš¬y_İ
 JS_VALUE_GET_INT(
İ2
)); \

17970 
¥
--; \

17972 ià(
¦ow_ÿÎ
) \

17973 
exû±iÚ
; \

17974 
¥
--; \

17977 
BREAK


	)

17979 
	`OP_CMP
(
OP_É
, <, 
	`js_»ÏtiÚ®_¦ow
(
ùx
, 
¥
, 
İcode
));

17980 
	`OP_CMP
(
OP_Ée
, <=, 
	`js_»ÏtiÚ®_¦ow
(
ùx
, 
¥
, 
İcode
));

17981 
	`OP_CMP
(
OP_gt
, >, 
	`js_»ÏtiÚ®_¦ow
(
ùx
, 
¥
, 
İcode
));

17982 
	`OP_CMP
(
OP_g‹
, >=, 
	`js_»ÏtiÚ®_¦ow
(
ùx
, 
¥
, 
İcode
));

17983 
	`OP_CMP
(
OP_eq
, ==, 
	`js_eq_¦ow
(
ùx
, 
¥
, 0));

17984 
	`OP_CMP
(
OP_Ãq
, !=, 
	`js_eq_¦ow
(
ùx
, 
¥
, 1));

17985 
	`OP_CMP
(
OP_¡riù_eq
, ==, 
	`js_¡riù_eq_¦ow
(
ùx
, 
¥
, 0));

17986 
	`OP_CMP
(
OP_¡riù_Ãq
, !=, 
	`js_¡riù_eq_¦ow
(
ùx
, 
¥
, 1));

17988 #ifdeà
CONFIG_BIGNUM


17989 
	`CASE
(
OP_mul_pow10
):

17990 ià(
¹
->
bigæßt_İs
.
	`mul_pow10
(
ùx
, 
¥
))

17991 
exû±iÚ
;

17992 
¥
--;

17993 
BREAK
;

17995 
	`CASE
(
OP_š
):

17996 ià(
	`js_İ”©Ü_š
(
ùx
, 
¥
))

17997 
exû±iÚ
;

17998 
¥
--;

17999 
BREAK
;

18000 
	`CASE
(
OP_š¡ªûof
):

18001 ià(
	`js_İ”©Ü_š¡ªûof
(
ùx
, 
¥
))

18002 
exû±iÚ
;

18003 
¥
--;

18004 
BREAK
;

18005 
	`CASE
(
OP_ty³of
):

18007 
JSV®ue
 
İ1
;

18008 
JSAtom
 
©om
;

18010 
İ1
 = 
¥
[-1];

18011 
©om
 = 
	`js_İ”©Ü_ty³of
(
ùx
, 
İ1
);

18012 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

18013 
¥
[-1] = 
	`JS_AtomToSŒšg
(
ùx
, 
©om
);

18015 
BREAK
;

18016 
	`CASE
(
OP_d–‘e
):

18017 ià(
	`js_İ”©Ü_d–‘e
(
ùx
, 
¥
))

18018 
exû±iÚ
;

18019 
¥
--;

18020 
BREAK
;

18021 
	`CASE
(
OP_d–‘e_v¬
):

18023 
JSAtom
 
©om
;

18024 
»t
;

18026 
©om
 = 
	`g‘_u32
(
pc
);

18027 
pc
 += 4;

18029 
»t
 = 
	`JS_D–‘ePrİ”ty
(
ùx
, ctx->
glob®_obj
, 
©om
, 0);

18030 ià(
	`uÆik–y
(
»t
 < 0))

18031 
exû±iÚ
;

18032 *
¥
++ = 
	`JS_NewBoŞ
(
ùx
, 
»t
);

18034 
BREAK
;

18036 
	`CASE
(
OP_to_objeù
):

18037 ià(
	`JS_VALUE_GET_TAG
(
¥
[-1]è!ğ
JS_TAG_OBJECT
) {

18038 
»t_v®
 = 
	`JS_ToObjeù
(
ùx
, 
¥
[-1]);

18039 ià(
	`JS_IsExû±iÚ
(
»t_v®
))

18040 
exû±iÚ
;

18041 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18042 
¥
[-1] = 
»t_v®
;

18044 
BREAK
;

18046 
	`CASE
(
OP_to_´İkey
):

18047 
	`JS_VALUE_GET_TAG
(
¥
[-1])) {

18048 
JS_TAG_INT
:

18049 
JS_TAG_STRING
:

18050 
JS_TAG_SYMBOL
:

18053 
»t_v®
 = 
	`JS_ToPrİ”tyKey
(
ùx
, 
¥
[-1]);

18054 ià(
	`JS_IsExû±iÚ
(
»t_v®
))

18055 
exû±iÚ
;

18056 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18057 
¥
[-1] = 
»t_v®
;

18060 
BREAK
;

18062 
	`CASE
(
OP_to_´İkey2
):

18064 ià(
	`uÆik–y
(
	`JS_IsUndefšed
(
¥
[-2]è|| 
	`JS_IsNuÎ
(sp[-2]))) {

18065 
	`JS_ThrowTy³E¼Ü
(
ùx
, "value has‚o…roperty");

18066 
exû±iÚ
;

18068 
	`JS_VALUE_GET_TAG
(
¥
[-1])) {

18069 
JS_TAG_INT
:

18070 
JS_TAG_STRING
:

18071 
JS_TAG_SYMBOL
:

18074 
»t_v®
 = 
	`JS_ToPrİ”tyKey
(
ùx
, 
¥
[-1]);

18075 ià(
	`JS_IsExû±iÚ
(
»t_v®
))

18076 
exû±iÚ
;

18077 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18078 
¥
[-1] = 
»t_v®
;

18081 
BREAK
;

18083 
	`CASE
(
OP_to_¡ršg
):

18084 ià(
	`JS_VALUE_GET_TAG
(
¥
[-1]è!ğ
JS_TAG_STRING
) {

18085 
»t_v®
 = 
	`JS_ToSŒšg
(
ùx
, 
¥
[-1]);

18086 ià(
	`JS_IsExû±iÚ
(
»t_v®
))

18087 
exû±iÚ
;

18088 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18089 
¥
[-1] = 
»t_v®
;

18091 
BREAK
;

18093 
	`CASE
(
OP_w™h_g‘_v¬
):

18094 
	`CASE
(
OP_w™h_put_v¬
):

18095 
	`CASE
(
OP_w™h_d–‘e_v¬
):

18096 
	`CASE
(
OP_w™h_make_»f
):

18097 
	`CASE
(
OP_w™h_g‘_»f
):

18098 
	`CASE
(
OP_w™h_g‘_»f_undef
):

18100 
JSAtom
 
©om
;

18101 
št32_t
 
diff
;

18102 
JSV®ue
 
obj
, 
v®
;

18103 
»t
, 
is_w™h
;

18104 
©om
 = 
	`g‘_u32
(
pc
);

18105 
diff
 = 
	`g‘_u32
(
pc
 + 4);

18106 
is_w™h
 = 
pc
[8];

18107 
pc
 += 9;

18109 
obj
 = 
¥
[-1];

18110 
»t
 = 
	`JS_HasPrİ”ty
(
ùx
, 
obj
, 
©om
);

18111 ià(
	`uÆik–y
(
»t
 < 0))

18112 
exû±iÚ
;

18113 ià(
»t
) {

18114 ià(
is_w™h
) {

18115 
»t
 = 
	`js_has_unscİabË
(
ùx
, 
obj
, 
©om
);

18116 ià(
	`uÆik–y
(
»t
 < 0))

18117 
exû±iÚ
;

18118 ià(
»t
)

18119 
no_w™h
;

18121 
İcode
) {

18122 
OP_w™h_g‘_v¬
:

18123 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
©om
);

18124 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

18125 
exû±iÚ
;

18126 
	`£t_v®ue
(
ùx
, &
¥
[-1], 
v®
);

18128 
OP_w™h_put_v¬
:

18129 
»t
 = 
	`JS_S‘Prİ”tyIÁ”Çl
(
ùx
, 
obj
, 
©om
, 
¥
[-2],

18130 
JS_PROP_THROW_STRICT
);

18131 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18132 
¥
 -= 2;

18133 ià(
	`uÆik–y
(
»t
 < 0))

18134 
exû±iÚ
;

18136 
OP_w™h_d–‘e_v¬
:

18137 
»t
 = 
	`JS_D–‘ePrİ”ty
(
ùx
, 
obj
, 
©om
, 0);

18138 ià(
	`uÆik–y
(
»t
 < 0))

18139 
exû±iÚ
;

18140 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18141 
¥
[-1] = 
	`JS_NewBoŞ
(
ùx
, 
»t
);

18143 
OP_w™h_make_»f
:

18145 *
¥
++ = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

18147 
OP_w™h_g‘_»f
:

18149 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
©om
);

18150 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

18151 
exû±iÚ
;

18152 *
¥
++ = 
v®
;

18154 
OP_w™h_g‘_»f_undef
:

18156 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
©om
);

18157 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
v®
)))

18158 
exû±iÚ
;

18159 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18160 
¥
[-1] = 
JS_UNDEFINED
;

18161 *
¥
++ = 
v®
;

18164 
pc
 +ğ
diff
 - 5;

18166 
no_w™h
:

18168 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18169 
¥
--;

18172 
BREAK
;

18174 
	`CASE
(
OP_awa™
):

18175 
»t_v®
 = 
	`JS_NewIÁ32
(
ùx
, 
FUNC_RET_AWAIT
);

18176 
dÚe_g’”©Ü
;

18177 
	`CASE
(
OP_y›ld
):

18178 
»t_v®
 = 
	`JS_NewIÁ32
(
ùx
, 
FUNC_RET_YIELD
);

18179 
dÚe_g’”©Ü
;

18180 
	`CASE
(
OP_y›ld_¡¬
):

18181 
	`CASE
(
OP_async_y›ld_¡¬
):

18182 
»t_v®
 = 
	`JS_NewIÁ32
(
ùx
, 
FUNC_RET_YIELD_STAR
);

18183 
dÚe_g’”©Ü
;

18184 
	`CASE
(
OP_»tuº_async
):

18185 
	`CASE
(
OP_š™Ÿl_y›ld
):

18186 
»t_v®
 = 
JS_UNDEFINED
;

18187 
dÚe_g’”©Ü
;

18189 
	`CASE
(
OP_nİ
):

18190 
BREAK
;

18191 
	`CASE
(
OP_is_undefšed_Ü_nuÎ
):

18192 ià(
	`JS_VALUE_GET_TAG
(
¥
[-1]è=ğ
JS_TAG_UNDEFINED
 ||

18193 
	`JS_VALUE_GET_TAG
(
¥
[-1]è=ğ
JS_TAG_NULL
) {

18194 
£t_Œue
;

18196 
ä“_ªd_£t_çl£
;

18198 #ià
SHORT_OPCODES


18199 
	`CASE
(
OP_is_undefšed
):

18200 ià(
	`JS_VALUE_GET_TAG
(
¥
[-1]è=ğ
JS_TAG_UNDEFINED
) {

18201 
£t_Œue
;

18203 
ä“_ªd_£t_çl£
;

18205 
	`CASE
(
OP_is_nuÎ
):

18206 ià(
	`JS_VALUE_GET_TAG
(
¥
[-1]è=ğ
JS_TAG_NULL
) {

18207 
£t_Œue
;

18209 
ä“_ªd_£t_çl£
;

18211 
	`CASE
(
OP_is_funùiÚ
):

18212 ià(
	`js_İ”©Ü_ty³of
(
ùx
, 
¥
[-1]è=ğ
JS_ATOM_funùiÚ
) {

18213 
ä“_ªd_£t_Œue
;

18215 
ä“_ªd_£t_çl£
;

18217 
ä“_ªd_£t_Œue
:

18218 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18220 
£t_Œue
:

18221 
¥
[-1] = 
JS_TRUE
;

18222 
BREAK
;

18223 
ä“_ªd_£t_çl£
:

18224 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18225 
¥
[-1] = 
JS_FALSE
;

18226 
BREAK
;

18227 
	`CASE
(
OP_šv®id
):

18228 
DEFAULT
:

18229 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "invalid opcode:…c=%u opcode=0x%02x",

18230 ()(
pc
 - 
b
->
by‹_code_buf
 - 1), 
İcode
);

18231 
exû±iÚ
;

18234 
exû±iÚ
:

18235 ià(
	`is_backŒaû_Ãeded
(
ùx
, 
¹
->
cu¼’t_exû±iÚ
)) {

18239 
sf
->
cur_pc
 = 
pc
;

18240 
	`bud_backŒaû
(
ùx
, 
¹
->
cu¼’t_exû±iÚ
, 
NULL
, 0, 0);

18242 ià(!
	`JS_IsUnÿtchabËE¼Ü
(
ùx
, 
¹
->
cu¼’t_exû±iÚ
)) {

18243 
¥
 > 
¡ack_buf
) {

18244 
JSV®ue
 
v®
 = *--
¥
;

18245 
	`JS_F»eV®ue
(
ùx
, 
v®
);

18246 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_CATCH_OFFSET
) {

18247 
pos
 = 
	`JS_VALUE_GET_INT
(
v®
);

18248 ià(
pos
 == 0) {

18250 
	`JS_F»eV®ue
(
ùx
, 
¥
[-1]);

18251 
¥
--;

18252 
	`JS_I‹¿tÜClo£
(
ùx
, 
¥
[-1], 
TRUE
);

18254 *
¥
++ = 
¹
->
cu¼’t_exû±iÚ
;

18255 
¹
->
cu¼’t_exû±iÚ
 = 
JS_NULL
;

18256 
pc
 = 
b
->
by‹_code_buf
 + 
pos
;

18257 
»¡¬t
;

18262 
»t_v®
 = 
JS_EXCEPTION
;

18266 ià(
b
->
func_kšd
 !ğ
JS_FUNC_NORMAL
) {

18267 
dÚe_g’”©Ü
:

18268 
sf
->
cur_pc
 = 
pc
;

18269 
sf
->
cur_¥
 = 
¥
;

18271 
dÚe
:

18272 ià(
	`uÆik–y
(!
	`li¡_em±y
(&
sf
->
v¬_»f_li¡
))) {

18274 
	`şo£_v¬_»fs
(
¹
, 
sf
);

18277 
pv®
 = 
loÿl_buf
;…v® < 
¥
;…val++) {

18278 
	`JS_F»eV®ue
(
ùx
, *
pv®
);

18281 
¹
->
cu¼’t_¡ack_äame
 = 
sf
->
´ev_äame
;

18282  
»t_v®
;

18283 
	}
}

18285 
JSV®ue
 
	$JS_C®l
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
, JSV®ueCÚ¡ 
this_obj
,

18286 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18288  
	`JS_C®lIÁ”Çl
(
ùx
, 
func_obj
, 
this_obj
, 
JS_UNDEFINED
,

18289 
¬gc
, (
JSV®ue
 *)
¬gv
, 
JS_CALL_FLAG_COPY_ARGV
);

18290 
	}
}

18292 
JSV®ue
 
	$JS_C®lF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
func_obj
, 
JSV®ueCÚ¡
 
this_obj
,

18293 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18295 
JSV®ue
 
»s
 = 
	`JS_C®lIÁ”Çl
(
ùx
, 
func_obj
, 
this_obj
, 
JS_UNDEFINED
,

18296 
¬gc
, (
JSV®ue
 *)
¬gv
, 
JS_CALL_FLAG_COPY_ARGV
);

18297 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

18298  
»s
;

18299 
	}
}

18303 
JSCÚ‹xt
 *
	$JS_G‘FunùiÚR—lm
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
)

18305 
JSObjeù
 *
p
;

18306 
JSCÚ‹xt
 *
»®m
;

18308 ià(
	`JS_VALUE_GET_TAG
(
func_obj
è!ğ
JS_TAG_OBJECT
)

18309  
ùx
;

18310 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

18311 
p
->
şass_id
) {

18312 
JS_CLASS_C_FUNCTION
:

18313 
»®m
 = 
p
->
u
.
cfunc
.realm;

18315 
JS_CLASS_BYTECODE_FUNCTION
:

18316 
JS_CLASS_GENERATOR_FUNCTION
:

18317 
JS_CLASS_ASYNC_FUNCTION
:

18318 
JS_CLASS_ASYNC_GENERATOR_FUNCTION
:

18320 
JSFunùiÚBy‹code
 *
b
;

18321 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

18322 
»®m
 = 
b
->realm;

18325 
JS_CLASS_PROXY
:

18327 
JSProxyD©a
 *
s
 = 
p
->
u
.
İaque
;

18328 ià(!
s
)

18329  
ùx
;

18330 ià(
s
->
is_»voked
) {

18331 
	`JS_ThrowTy³E¼ÜRevokedProxy
(
ùx
);

18332  
NULL
;

18334 
»®m
 = 
	`JS_G‘FunùiÚR—lm
(
ùx
, 
s
->
rg‘
);

18338 
JS_CLASS_BOUND_FUNCTION
:

18340 
JSBoundFunùiÚ
 *
bf
 = 
p
->
u
.
bound_funùiÚ
;

18341 
»®m
 = 
	`JS_G‘FunùiÚR—lm
(
ùx
, 
bf
->
func_obj
);

18345 
»®m
 = 
ùx
;

18348  
»®m
;

18349 
	}
}

18351 
JSV®ue
 
	$js_ü—‹_äom_ùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
ùÜ
,

18352 
şass_id
)

18354 
JSV®ue
 
´Ùo
, 
obj
;

18355 
JSCÚ‹xt
 *
»®m
;

18357 ià(
	`JS_IsUndefšed
(
ùÜ
)) {

18358 
´Ùo
 = 
	`JS_DupV®ue
(
ùx
, ctx->
şass_´Ùo
[
şass_id
]);

18360 
´Ùo
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
ùÜ
, 
JS_ATOM_´ÙÙy³
);

18361 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

18362  
´Ùo
;

18363 ià(!
	`JS_IsObjeù
(
´Ùo
)) {

18364 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

18365 
»®m
 = 
	`JS_G‘FunùiÚR—lm
(
ùx
, 
ùÜ
);

18366 ià(!
»®m
)

18367  
JS_EXCEPTION
;

18368 
´Ùo
 = 
	`JS_DupV®ue
(
ùx
, 
»®m
->
şass_´Ùo
[
şass_id
]);

18371 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
´Ùo
, 
şass_id
);

18372 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

18373  
obj
;

18374 
	}
}

18377 
JSV®ue
 
	$JS_C®lCÚ¡ruùÜIÁ”Çl
(
JSCÚ‹xt
 *
ùx
,

18378 
JSV®ueCÚ¡
 
func_obj
,

18379 
JSV®ueCÚ¡
 
Ãw_rg‘
,

18380 
¬gc
, 
JSV®ue
 *
¬gv
, 
æags
)

18382 
JSObjeù
 *
p
;

18383 
JSFunùiÚBy‹code
 *
b
;

18385 ià(
	`js_pŞl_š‹¼u±s
(
ùx
))

18386  
JS_EXCEPTION
;

18387 
æags
 |ğ
JS_CALL_FLAG_CONSTRUCTOR
;

18388 ià(
	`uÆik–y
(
	`JS_VALUE_GET_TAG
(
func_obj
è!ğ
JS_TAG_OBJECT
))

18389 
nÙ_a_funùiÚ
;

18390 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

18391 ià(
	`uÆik–y
(!
p
->
is_cÚ¡ruùÜ
))

18392  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ constructor");

18393 ià(
	`uÆik–y
(
p
->
şass_id
 !ğ
JS_CLASS_BYTECODE_FUNCTION
)) {

18394 
JSCÏssC®l
 *
ÿÎ_func
;

18395 
ÿÎ_func
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
ÿÎ
;

18396 ià(!
ÿÎ_func
) {

18397 
nÙ_a_funùiÚ
:

18398  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ function");

18400  
	`ÿÎ_func
(
ùx
, 
func_obj
, 
Ãw_rg‘
, 
¬gc
,

18401 (
JSV®ueCÚ¡
 *)
¬gv
, 
æags
);

18404 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

18405 ià(
b
->
is_d”ived_şass_cÚ¡ruùÜ
) {

18406  
	`JS_C®lIÁ”Çl
(
ùx
, 
func_obj
, 
JS_UNDEFINED
, 
Ãw_rg‘
, 
¬gc
, 
¬gv
, 
æags
);

18408 
JSV®ue
 
obj
, 
»t
;

18410 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_OBJECT
);

18411 ià(
	`JS_IsExû±iÚ
(
obj
))

18412  
JS_EXCEPTION
;

18413 
»t
 = 
	`JS_C®lIÁ”Çl
(
ùx
, 
func_obj
, 
obj
, 
Ãw_rg‘
, 
¬gc
, 
¬gv
, 
æags
);

18414 ià(
	`JS_VALUE_GET_TAG
(
»t
è=ğ
JS_TAG_OBJECT
 ||

18415 
	`JS_IsExû±iÚ
(
»t
)) {

18416 
	`JS_F»eV®ue
(
ùx
, 
obj
);

18417  
»t
;

18419 
	`JS_F»eV®ue
(
ùx
, 
»t
);

18420  
obj
;

18423 
	}
}

18425 
JSV®ue
 
	$JS_C®lCÚ¡ruùÜ2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

18426 
JSV®ueCÚ¡
 
Ãw_rg‘
,

18427 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18429  
	`JS_C®lCÚ¡ruùÜIÁ”Çl
(
ùx
, 
func_obj
, 
Ãw_rg‘
,

18430 
¬gc
, (
JSV®ue
 *)
¬gv
,

18431 
JS_CALL_FLAG_COPY_ARGV
);

18432 
	}
}

18434 
JSV®ue
 
	$JS_C®lCÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

18435 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18437  
	`JS_C®lCÚ¡ruùÜIÁ”Çl
(
ùx
, 
func_obj
, func_obj,

18438 
¬gc
, (
JSV®ue
 *)
¬gv
,

18439 
JS_CALL_FLAG_COPY_ARGV
);

18440 
	}
}

18442 
JSV®ue
 
	$JS_Invoke
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, 
JSAtom
 
©om
,

18443 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18445 
JSV®ue
 
func_obj
;

18446 
func_obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
©om
);

18447 ià(
	`JS_IsExû±iÚ
(
func_obj
))

18448  
func_obj
;

18449  
	`JS_C®lF»e
(
ùx
, 
func_obj
, 
this_v®
, 
¬gc
, 
¬gv
);

18450 
	}
}

18452 
JSV®ue
 
	$JS_InvokeF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
this_v®
, 
JSAtom
 
©om
,

18453 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18455 
JSV®ue
 
»s
 = 
	`JS_Invoke
(
ùx
, 
this_v®
, 
©om
, 
¬gc
, 
¬gv
);

18456 
	`JS_F»eV®ue
(
ùx
, 
this_v®
);

18457  
»s
;

18458 
	}
}

18461 
__exû±iÚ
 
	$async_func_š™
(
JSCÚ‹xt
 *
ùx
, 
JSAsyncFunùiÚS‹
 *
s
,

18462 
JSV®ueCÚ¡
 
func_obj
, JSV®ueCÚ¡ 
this_obj
,

18463 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

18465 
JSObjeù
 *
p
;

18466 
JSFunùiÚBy‹code
 *
b
;

18467 
JSSckF¿me
 *
sf
;

18468 
loÿl_couÁ
, 
i
, 
¬g_buf_Ën
, 
n
;

18470 
sf
 = &
s
->
äame
;

18471 
	`š™_li¡_h—d
(&
sf
->
v¬_»f_li¡
);

18472 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

18473 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

18474 
sf
->
js_mode
 = 
b
->js_mode;

18475 
sf
->
cur_pc
 = 
b
->
by‹_code_buf
;

18476 
¬g_buf_Ën
 = 
	`max_št
(
b
->
¬g_couÁ
, 
¬gc
);

18477 
loÿl_couÁ
 = 
¬g_buf_Ën
 + 
b
->
v¬_couÁ
 + b->
¡ack_size
;

18478 
sf
->
¬g_buf
 = 
	`js_m®loc
(
ùx
, (
JSV®ue
è* 
	`max_št
(
loÿl_couÁ
, 1));

18479 ià(!
sf
->
¬g_buf
)

18481 
sf
->
cur_func
 = 
	`JS_DupV®ue
(
ùx
, 
func_obj
);

18482 
s
->
this_v®
 = 
	`JS_DupV®ue
(
ùx
, 
this_obj
);

18483 
s
->
¬gc
 =‡rgc;

18484 
sf
->
¬g_couÁ
 = 
¬g_buf_Ën
;

18485 
sf
->
v¬_buf
 = sf->
¬g_buf
 + 
¬g_buf_Ën
;

18486 
sf
->
cur_¥
 = sf->
v¬_buf
 + 
b
->
v¬_couÁ
;

18487 
i
 = 0; i < 
¬gc
; i++)

18488 
sf
->
¬g_buf
[
i
] = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[i]);

18489 
n
 = 
¬g_buf_Ën
 + 
b
->
v¬_couÁ
;

18490 
i
 = 
¬gc
; i < 
n
; i++)

18491 
sf
->
¬g_buf
[
i
] = 
JS_UNDEFINED
;

18493 
	}
}

18495 
	$async_func_m¬k
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚS‹
 *
s
,

18496 
JS_M¬kFunc
 *
m¬k_func
)

18498 
JSSckF¿me
 *
sf
;

18499 
JSV®ue
 *
¥
;

18501 
sf
 = &
s
->
äame
;

18502 
	`JS_M¬kV®ue
(
¹
, 
sf
->
cur_func
, 
m¬k_func
);

18503 
	`JS_M¬kV®ue
(
¹
, 
s
->
this_v®
, 
m¬k_func
);

18504 ià(
sf
->
cur_¥
) {

18509 
¥
 = 
sf
->
¬g_buf
; s°< sf->
cur_¥
; sp++)

18510 
	`JS_M¬kV®ue
(
¹
, *
¥
, 
m¬k_func
);

18512 
	}
}

18514 
	$async_func_ä“
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚS‹
 *
s
)

18516 
JSSckF¿me
 *
sf
;

18517 
JSV®ue
 *
¥
;

18519 
sf
 = &
s
->
äame
;

18522 
	`şo£_v¬_»fs
(
¹
, 
sf
);

18524 ià(
sf
->
¬g_buf
) {

18526 
	`as£¹
(
sf
->
cur_¥
 !ğ
NULL
);

18527 
¥
 = 
sf
->
¬g_buf
; s°< sf->
cur_¥
; sp++) {

18528 
	`JS_F»eV®ueRT
(
¹
, *
¥
);

18530 
	`js_ä“_¹
(
¹
, 
sf
->
¬g_buf
);

18532 
	`JS_F»eV®ueRT
(
¹
, 
sf
->
cur_func
);

18533 
	`JS_F»eV®ueRT
(
¹
, 
s
->
this_v®
);

18534 
	}
}

18536 
JSV®ue
 
	$async_func_»sume
(
JSCÚ‹xt
 *
ùx
, 
JSAsyncFunùiÚS‹
 *
s
)

18538 
JSV®ue
 
func_obj
;

18541 
func_obj
 = 
	`JS_MKPTR
(
JS_TAG_INT
, 
s
);

18542  
	`JS_C®lIÁ”Çl
(
ùx
, 
func_obj
, 
s
->
this_v®
, 
JS_UNDEFINED
,

18543 
s
->
¬gc
, s->
äame
.
¬g_buf
, 
JS_CALL_FLAG_GENERATOR
);

18544 
	}
}

18549 
	eJSG’”©ÜS‹Enum
 {

18550 
	mJS_GENERATOR_STATE_SUSPENDED_START
,

18551 
	mJS_GENERATOR_STATE_SUSPENDED_YIELD
,

18552 
	mJS_GENERATOR_STATE_SUSPENDED_YIELD_STAR
,

18553 
	mJS_GENERATOR_STATE_EXECUTING
,

18554 
	mJS_GENERATOR_STATE_COMPLETED
,

18555 } 
	tJSG’”©ÜS‹Enum
;

18557 
	sJSG’”©ÜD©a
 {

18558 
JSG’”©ÜS‹Enum
 
	m¡©e
;

18559 
JSAsyncFunùiÚS‹
 
	mfunc_¡©e
;

18560 } 
	tJSG’”©ÜD©a
;

18562 
	$ä“_g’”©Ü_¡ack_¹
(
JSRuÁime
 *
¹
, 
JSG’”©ÜD©a
 *
s
)

18564 ià(
s
->
¡©e
 =ğ
JS_GENERATOR_STATE_COMPLETED
)

18566 
	`async_func_ä“
(
¹
, &
s
->
func_¡©e
);

18567 
s
->
¡©e
 = 
JS_GENERATOR_STATE_COMPLETED
;

18568 
	}
}

18570 
	$js_g’”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
obj
)

18572 
JSG’”©ÜD©a
 *
s
 = 
	`JS_G‘O·que
(
obj
, 
JS_CLASS_GENERATOR
);

18574 ià(
s
) {

18575 
	`ä“_g’”©Ü_¡ack_¹
(
¹
, 
s
);

18576 
	`js_ä“_¹
(
¹
, 
s
);

18578 
	}
}

18580 
	$ä“_g’”©Ü_¡ack
(
JSCÚ‹xt
 *
ùx
, 
JSG’”©ÜD©a
 *
s
)

18582 
	`ä“_g’”©Ü_¡ack_¹
(
ùx
->
¹
, 
s
);

18583 
	}
}

18585 
	$js_g’”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

18586 
JS_M¬kFunc
 *
m¬k_func
)

18588 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

18589 
JSG’”©ÜD©a
 *
s
 = 
p
->
u
.
g’”©Ü_d©a
;

18591 ià(!
s
 || s->
¡©e
 =ğ
JS_GENERATOR_STATE_COMPLETED
)

18593 
	`async_func_m¬k
(
¹
, &
s
->
func_¡©e
, 
m¬k_func
);

18594 
	}
}

18597 
	#GEN_MAGIC_NEXT
 0

	)

18598 
	#GEN_MAGIC_RETURN
 1

	)

18599 
	#GEN_MAGIC_THROW
 2

	)

18601 
JSV®ue
 
	$js_g’”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

18602 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

18603 
BOOL
 *
pdÚe
, 
magic
)

18605 
JSG’”©ÜD©a
 *
s
 = 
	`JS_G‘O·que
(
this_v®
, 
JS_CLASS_GENERATOR
);

18606 
JSSckF¿me
 *
sf
;

18607 
JSV®ue
 
»t
, 
func_»t
;

18608 
JSV®ueCÚ¡
 
™”_¬gs
[1];

18610 *
pdÚe
 = 
TRUE
;

18611 ià(!
s
)

18612  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ generator");

18613 
sf
 = &
s
->
func_¡©e
.
äame
;

18614 
»do
:

18615 
s
->
¡©e
) {

18617 
JS_GENERATOR_STATE_SUSPENDED_START
:

18618 ià(
magic
 =ğ
GEN_MAGIC_NEXT
) {

18619 
exec_no_¬g
;

18621 
	`ä“_g’”©Ü_¡ack
(
ùx
, 
s
);

18622 
dÚe
;

18625 
JS_GENERATOR_STATE_SUSPENDED_YIELD_STAR
:

18627 
dÚe
;

18628 
JSV®ue
 
m‘hod
, 
™”_obj
;

18630 
™”_obj
 = 
sf
->
cur_¥
[-2];

18631 ià(
magic
 =ğ
GEN_MAGIC_NEXT
) {

18632 
m‘hod
 = 
	`JS_DupV®ue
(
ùx
, 
sf
->
cur_¥
[-1]);

18634 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”_obj
,

18635 
magic
 =ğ
GEN_MAGIC_RETURN
 ?

18636 
JS_ATOM_»tuº
 : 
JS_ATOM_throw
);

18637 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

18638 
™”_exû±iÚ
;

18640 ià(
magic
 !ğ
GEN_MAGIC_NEXT
 &&

18641 (
	`JS_IsUndefšed
(
m‘hod
è|| 
	`JS_IsNuÎ
(method))) {

18643 ià(
magic
 =ğ
GEN_MAGIC_RETURN
) {

18644 
»t
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

18645 
™”_dÚe
;

18647 ià(
	`JS_I‹¿tÜClo£
(
ùx
, 
™”_obj
, 
FALSE
))

18648 
™”_exû±iÚ
;

18649 
	`JS_ThrowTy³E¼Ü
(
ùx
, "iterator does‚ot have‡hrow method");

18650 
™”_exû±iÚ
;

18653 
»t
 = 
	`JS_I‹¿tÜNext2
(
ùx
, 
™”_obj
, 
m‘hod
, 
¬gc
, 
¬gv
, &
dÚe
);

18654 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

18655 ià(
	`JS_IsExû±iÚ
(
»t
)) {

18656 
™”_exû±iÚ
:

18657 
exec_throw
;

18661 ià(
dÚe
 == 2) {

18662 
JSV®ue
 
dÚe_v®
, 
v®ue
;

18663 
dÚe_v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»t
, 
JS_ATOM_dÚe
);

18664 ià(
	`JS_IsExû±iÚ
(
dÚe_v®
)) {

18665 
	`JS_F»eV®ue
(
ùx
, 
»t
);

18666 
™”_exû±iÚ
;

18668 
dÚe
 = 
	`JS_ToBoŞF»e
(
ùx
, 
dÚe_v®
);

18669 ià(
dÚe
) {

18670 
v®ue
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»t
, 
JS_ATOM_v®ue
);

18671 
	`JS_F»eV®ue
(
ùx
, 
»t
);

18672 ià(
	`JS_IsExû±iÚ
(
v®ue
))

18673 
™”_exû±iÚ
;

18674 
»t
 = 
v®ue
;

18675 
™”_dÚe
;

18677 *
pdÚe
 = 2;

18680 ià(
dÚe
) {

18682 
™”_dÚe
:

18683 
	`JS_F»eV®ue
(
ùx
, 
sf
->
cur_¥
[-2]);

18684 
	`JS_F»eV®ue
(
ùx
, 
sf
->
cur_¥
[-1]);

18685 
sf
->
cur_¥
--;

18686 
exec_¬g
;

18688 *
pdÚe
 = 
FALSE
;

18694 
JS_GENERATOR_STATE_SUSPENDED_YIELD
:

18696 
»t
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

18697 ià(
magic
 =ğ
GEN_MAGIC_THROW
) {

18698 
	`JS_Throw
(
ùx
, 
»t
);

18699 
exec_throw
:

18700 
s
->
func_¡©e
.
throw_æag
 = 
TRUE
;

18702 
exec_¬g
:

18703 
sf
->
cur_¥
[-1] = 
»t
;

18704 
sf
->
cur_¥
[0] = 
	`JS_NewBoŞ
(
ùx
, (
magic
 =ğ
GEN_MAGIC_RETURN
));

18705 
sf
->
cur_¥
++;

18706 
exec_no_¬g
:

18707 
s
->
func_¡©e
.
throw_æag
 = 
FALSE
;

18709 
s
->
¡©e
 = 
JS_GENERATOR_STATE_EXECUTING
;

18710 
func_»t
 = 
	`async_func_»sume
(
ùx
, &
s
->
func_¡©e
);

18711 
s
->
¡©e
 = 
JS_GENERATOR_STATE_SUSPENDED_YIELD
;

18712 ià(
	`JS_IsExû±iÚ
(
func_»t
)) {

18714 
	`ä“_g’”©Ü_¡ack
(
ùx
, 
s
);

18715  
func_»t
;

18717 ià(
	`JS_VALUE_GET_TAG
(
func_»t
è=ğ
JS_TAG_INT
) {

18718 ià(
	`JS_VALUE_GET_INT
(
func_»t
è=ğ
FUNC_RET_YIELD_STAR
) {

18720 
s
->
¡©e
 = 
JS_GENERATOR_STATE_SUSPENDED_YIELD_STAR
;

18721 
™”_¬gs
[0] = 
JS_UNDEFINED
;

18722 
¬gc
 = 1;

18723 
¬gv
 = 
™”_¬gs
;

18724 
»do
;

18727 
»t
 = 
sf
->
cur_¥
[-1];

18728 
sf
->
cur_¥
[-1] = 
JS_UNDEFINED
;

18729 *
pdÚe
 = 
FALSE
;

18733 
»t
 = 
sf
->
cur_¥
[-1];

18734 
sf
->
cur_¥
[-1] = 
JS_UNDEFINED
;

18735 
	`JS_F»eV®ue
(
ùx
, 
func_»t
);

18736 
	`ä“_g’”©Ü_¡ack
(
ùx
, 
s
);

18739 
JS_GENERATOR_STATE_COMPLETED
:

18740 
dÚe
:

18742 
magic
) {

18744 
GEN_MAGIC_NEXT
:

18745 
»t
 = 
JS_UNDEFINED
;

18747 
GEN_MAGIC_RETURN
:

18748 
»t
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

18750 
GEN_MAGIC_THROW
:

18751 
»t
 = 
	`JS_Throw
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]));

18755 
JS_GENERATOR_STATE_EXECUTING
:

18756 
»t
 = 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot invoke‡„unning generator");

18759  
»t
;

18760 
	}
}

18762 
JSV®ue
 
	$js_g’”©Ü_funùiÚ_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

18763 
JSV®ueCÚ¡
 
this_obj
,

18764 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

18765 
æags
)

18767 
JSV®ue
 
obj
, 
func_»t
;

18768 
JSG’”©ÜD©a
 *
s
;

18770 
s
 = 
	`js_m®locz
(
ùx
, (*s));

18771 ià(!
s
)

18772  
JS_EXCEPTION
;

18773 
s
->
¡©e
 = 
JS_GENERATOR_STATE_SUSPENDED_START
;

18774 ià(
	`async_func_š™
(
ùx
, &
s
->
func_¡©e
, 
func_obj
, 
this_obj
, 
¬gc
, 
¬gv
)) {

18775 
s
->
¡©e
 = 
JS_GENERATOR_STATE_COMPLETED
;

18776 
ç
;

18780 
func_»t
 = 
	`async_func_»sume
(
ùx
, &
s
->
func_¡©e
);

18781 ià(
	`JS_IsExû±iÚ
(
func_»t
))

18782 
ç
;

18783 
	`JS_F»eV®ue
(
ùx
, 
func_»t
);

18785 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
func_obj
, 
JS_CLASS_GENERATOR
);

18786 ià(
	`JS_IsExû±iÚ
(
obj
))

18787 
ç
;

18788 
	`JS_S‘O·que
(
obj
, 
s
);

18789  
obj
;

18790 
ç
:

18791 
	`ä“_g’”©Ü_¡ack_¹
(
ùx
->
¹
, 
s
);

18792 
	`js_ä“
(
ùx
, 
s
);

18793  
JS_EXCEPTION
;

18794 
	}
}

18798 
	$js_async_funùiÚ_‹rmš©e
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚD©a
 *
s
)

18800 ià(
s
->
is_aùive
) {

18801 
	`async_func_ä“
(
¹
, &
s
->
func_¡©e
);

18802 
s
->
is_aùive
 = 
FALSE
;

18804 
	}
}

18806 
	$js_async_funùiÚ_ä“0
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚD©a
 *
s
)

18808 
	`js_async_funùiÚ_‹rmš©e
(
¹
, 
s
);

18809 
	`JS_F»eV®ueRT
(
¹
, 
s
->
»sŞvšg_funcs
[0]);

18810 
	`JS_F»eV®ueRT
(
¹
, 
s
->
»sŞvšg_funcs
[1]);

18811 
	`»move_gc_objeù
(&
s
->
h—d”
);

18812 
	`js_ä“_¹
(
¹
, 
s
);

18813 
	}
}

18815 
	$js_async_funùiÚ_ä“
(
JSRuÁime
 *
¹
, 
JSAsyncFunùiÚD©a
 *
s
)

18817 ià(--
s
->
h—d”
.
»f_couÁ
 == 0) {

18818 
	`js_async_funùiÚ_ä“0
(
¹
, 
s
);

18820 
	}
}

18822 
	$js_async_funùiÚ_»sŞve_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

18824 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

18825 
JSAsyncFunùiÚD©a
 *
s
 = 
p
->
u
.
async_funùiÚ_d©a
;

18826 ià(
s
) {

18827 
	`js_async_funùiÚ_ä“
(
¹
, 
s
);

18829 
	}
}

18831 
	$js_async_funùiÚ_»sŞve_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

18832 
JS_M¬kFunc
 *
m¬k_func
)

18834 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

18835 
JSAsyncFunùiÚD©a
 *
s
 = 
p
->
u
.
async_funùiÚ_d©a
;

18836 ià(
s
) {

18837 
	`m¬k_func
(
¹
, &
s
->
h—d”
);

18839 
	}
}

18841 
	$js_async_funùiÚ_»sŞve_ü—‹
(
JSCÚ‹xt
 *
ùx
,

18842 
JSAsyncFunùiÚD©a
 *
s
,

18843 
JSV®ue
 *
»sŞvšg_funcs
)

18845 
i
;

18846 
JSObjeù
 *
p
;

18848 
i
 = 0; i < 2; i++) {

18849 
»sŞvšg_funcs
[
i
] =

18850 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
funùiÚ_´Ùo
,

18851 
JS_CLASS_ASYNC_FUNCTION_RESOLVE
 + 
i
);

18852 ià(
	`JS_IsExû±iÚ
(
»sŞvšg_funcs
[
i
])) {

18853 ià(
i
 == 1)

18854 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

18857 
p
 = 
	`JS_VALUE_GET_OBJ
(
»sŞvšg_funcs
[
i
]);

18858 
s
->
h—d”
.
»f_couÁ
++;

18859 
p
->
u
.
async_funùiÚ_d©a
 = 
s
;

18862 
	}
}

18864 
	$js_async_funùiÚ_»sume
(
JSCÚ‹xt
 *
ùx
, 
JSAsyncFunùiÚD©a
 *
s
)

18866 
JSV®ue
 
func_»t
, 
»t2
;

18868 
func_»t
 = 
	`async_func_»sume
(
ùx
, &
s
->
func_¡©e
);

18869 ià(
	`JS_IsExû±iÚ
(
func_»t
)) {

18870 
JSV®ue
 
”rÜ
;

18871 
ç
:

18872 
”rÜ
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

18873 
»t2
 = 
	`JS_C®l
(
ùx
, 
s
->
»sŞvšg_funcs
[1], 
JS_UNDEFINED
,

18874 1, (
JSV®ueCÚ¡
 *)&
”rÜ
);

18875 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

18876 
	`js_async_funùiÚ_‹rmš©e
(
ùx
->
¹
, 
s
);

18877 
	`JS_F»eV®ue
(
ùx
, 
»t2
);

18879 
JSV®ue
 
v®ue
;

18880 
v®ue
 = 
s
->
func_¡©e
.
äame
.
cur_¥
[-1];

18881 
s
->
func_¡©e
.
äame
.
cur_¥
[-1] = 
JS_UNDEFINED
;

18882 ià(
	`JS_IsUndefšed
(
func_»t
)) {

18884 
»t2
 = 
	`JS_C®l
(
ùx
, 
s
->
»sŞvšg_funcs
[0], 
JS_UNDEFINED
,

18885 1, (
JSV®ueCÚ¡
 *)&
v®ue
);

18886 
	`JS_F»eV®ue
(
ùx
, 
»t2
);

18887 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

18888 
	`js_async_funùiÚ_‹rmš©e
(
ùx
->
¹
, 
s
);

18890 
JSV®ue
 
´omi£
, 
»sŞvšg_funcs
[2], 
»sŞvšg_funcs1
[2];

18891 
i
, 
»s
;

18894 
	`JS_F»eV®ue
(
ùx
, 
func_»t
);

18895 
´omi£
 = 
	`js_´omi£_»sŞve
(
ùx
, ctx->
´omi£_ùÜ
,

18896 1, (
JSV®ueCÚ¡
 *)&
v®ue
, 0);

18897 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

18898 ià(
	`JS_IsExû±iÚ
(
´omi£
))

18899 
ç
;

18900 ià(
	`js_async_funùiÚ_»sŞve_ü—‹
(
ùx
, 
s
, 
»sŞvšg_funcs
)) {

18901 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

18902 
ç
;

18907 
i
 = 0; i < 2; i++)

18908 
»sŞvšg_funcs1
[
i
] = 
JS_UNDEFINED
;

18909 
»s
 = 
	`³rfÜm_´omi£_th’
(
ùx
, 
´omi£
,

18910 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs
,

18911 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs1
);

18912 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

18913 
i
 = 0; i < 2; i++)

18914 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[
i
]);

18915 ià(
»s
)

18916 
ç
;

18919 
	}
}

18921 
JSV®ue
 
	$js_async_funùiÚ_»sŞve_ÿÎ
(
JSCÚ‹xt
 *
ùx
,

18922 
JSV®ueCÚ¡
 
func_obj
,

18923 
JSV®ueCÚ¡
 
this_obj
,

18924 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

18925 
æags
)

18927 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

18928 
JSAsyncFunùiÚD©a
 *
s
 = 
p
->
u
.
async_funùiÚ_d©a
;

18929 
BOOL
 
is_»jeù
 = 
p
->
şass_id
 - 
JS_CLASS_ASYNC_FUNCTION_RESOLVE
;

18930 
JSV®ueCÚ¡
 
¬g
;

18932 ià(
¬gc
 > 0)

18933 
¬g
 = 
¬gv
[0];

18935 
¬g
 = 
JS_UNDEFINED
;

18936 
s
->
func_¡©e
.
throw_æag
 = 
is_»jeù
;

18937 ià(
is_»jeù
) {

18938 
	`JS_Throw
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬g
));

18941 
s
->
func_¡©e
.
äame
.
cur_¥
[-1] = 
	`JS_DupV®ue
(
ùx
, 
¬g
);

18943 
	`js_async_funùiÚ_»sume
(
ùx
, 
s
);

18944  
JS_UNDEFINED
;

18945 
	}
}

18947 
JSV®ue
 
	$js_async_funùiÚ_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

18948 
JSV®ueCÚ¡
 
this_obj
,

18949 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
)

18951 
JSV®ue
 
´omi£
;

18952 
JSAsyncFunùiÚD©a
 *
s
;

18954 
s
 = 
	`js_m®locz
(
ùx
, (*s));

18955 ià(!
s
)

18956  
JS_EXCEPTION
;

18957 
s
->
h—d”
.
»f_couÁ
 = 1;

18958 
	`add_gc_objeù
(
ùx
->
¹
, &
s
->
h—d”
, 
JS_GC_OBJ_TYPE_ASYNC_FUNCTION
);

18959 
s
->
is_aùive
 = 
FALSE
;

18960 
s
->
»sŞvšg_funcs
[0] = 
JS_UNDEFINED
;

18961 
s
->
»sŞvšg_funcs
[1] = 
JS_UNDEFINED
;

18963 
´omi£
 = 
	`JS_NewPromi£C­ab™y
(
ùx
, 
s
->
»sŞvšg_funcs
);

18964 ià(
	`JS_IsExû±iÚ
(
´omi£
))

18965 
ç
;

18967 ià(
	`async_func_š™
(
ùx
, &
s
->
func_¡©e
, 
func_obj
, 
this_obj
, 
¬gc
, 
¬gv
)) {

18968 
ç
:

18969 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

18970 
	`js_async_funùiÚ_ä“
(
ùx
->
¹
, 
s
);

18971  
JS_EXCEPTION
;

18973 
s
->
is_aùive
 = 
TRUE
;

18975 
	`js_async_funùiÚ_»sume
(
ùx
, 
s
);

18977 
	`js_async_funùiÚ_ä“
(
ùx
->
¹
, 
s
);

18979  
´omi£
;

18980 
	}
}

18984 
	eJSAsyncG’”©ÜS‹Enum
 {

18985 
	mJS_ASYNC_GENERATOR_STATE_SUSPENDED_START
,

18986 
	mJS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD
,

18987 
	mJS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD_STAR
,

18988 
	mJS_ASYNC_GENERATOR_STATE_EXECUTING
,

18989 
	mJS_ASYNC_GENERATOR_STATE_AWAITING_RETURN
,

18990 
	mJS_ASYNC_GENERATOR_STATE_COMPLETED
,

18991 } 
	tJSAsyncG’”©ÜS‹Enum
;

18993 
	sJSAsyncG’”©ÜReque¡
 {

18994 
li¡_h—d
 
	mlšk
;

18996 
	mcom¶‘iÚ_ty³
;

18997 
JSV®ue
 
	m»suÉ
;

18999 
JSV®ue
 
	m´omi£
;

19000 
JSV®ue
 
	m»sŞvšg_funcs
[2];

19001 } 
	tJSAsyncG’”©ÜReque¡
;

19003 
	sJSAsyncG’”©ÜD©a
 {

19004 
JSObjeù
 *
	mg’”©Ü
;

19005 
JSAsyncG’”©ÜS‹Enum
 
	m¡©e
;

19006 
JSAsyncFunùiÚS‹
 
	mfunc_¡©e
;

19007 
li¡_h—d
 
	mqueue
;

19008 } 
	tJSAsyncG’”©ÜD©a
;

19010 
	$js_async_g’”©Ü_ä“
(
JSRuÁime
 *
¹
,

19011 
JSAsyncG’”©ÜD©a
 *
s
)

19013 
li¡_h—d
 *
–
, *
–1
;

19014 
JSAsyncG’”©ÜReque¡
 *
»q
;

19016 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
s
->
queue
) {

19017 
»q
 = 
	`li¡_’Œy
(
–
, 
JSAsyncG’”©ÜReque¡
, 
lšk
);

19018 
	`JS_F»eV®ueRT
(
¹
, 
»q
->
»suÉ
);

19019 
	`JS_F»eV®ueRT
(
¹
, 
»q
->
´omi£
);

19020 
	`JS_F»eV®ueRT
(
¹
, 
»q
->
»sŞvšg_funcs
[0]);

19021 
	`JS_F»eV®ueRT
(
¹
, 
»q
->
»sŞvšg_funcs
[1]);

19022 
	`js_ä“_¹
(
¹
, 
»q
);

19024 ià(
s
->
¡©e
 !ğ
JS_ASYNC_GENERATOR_STATE_COMPLETED
 &&

19025 
s
->
¡©e
 !ğ
JS_ASYNC_GENERATOR_STATE_AWAITING_RETURN
) {

19026 
	`async_func_ä“
(
¹
, &
s
->
func_¡©e
);

19028 
	`js_ä“_¹
(
¹
, 
s
);

19029 
	}
}

19031 
	$js_async_g’”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
obj
)

19033 
JSAsyncG’”©ÜD©a
 *
s
 = 
	`JS_G‘O·que
(
obj
, 
JS_CLASS_ASYNC_GENERATOR
);

19035 ià(
s
) {

19036 
	`js_async_g’”©Ü_ä“
(
¹
, 
s
);

19038 
	}
}

19040 
	$js_async_g’”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

19041 
JS_M¬kFunc
 *
m¬k_func
)

19043 
JSAsyncG’”©ÜD©a
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_ASYNC_GENERATOR
);

19044 
li¡_h—d
 *
–
;

19045 
JSAsyncG’”©ÜReque¡
 *
»q
;

19046 ià(
s
) {

19047 
	`li¡_fÜ_—ch
(
–
, &
s
->
queue
) {

19048 
»q
 = 
	`li¡_’Œy
(
–
, 
JSAsyncG’”©ÜReque¡
, 
lšk
);

19049 
	`JS_M¬kV®ue
(
¹
, 
»q
->
»suÉ
, 
m¬k_func
);

19050 
	`JS_M¬kV®ue
(
¹
, 
»q
->
´omi£
, 
m¬k_func
);

19051 
	`JS_M¬kV®ue
(
¹
, 
»q
->
»sŞvšg_funcs
[0], 
m¬k_func
);

19052 
	`JS_M¬kV®ue
(
¹
, 
»q
->
»sŞvšg_funcs
[1], 
m¬k_func
);

19054 ià(
s
->
¡©e
 !ğ
JS_ASYNC_GENERATOR_STATE_COMPLETED
 &&

19055 
s
->
¡©e
 !ğ
JS_ASYNC_GENERATOR_STATE_AWAITING_RETURN
) {

19056 
	`async_func_m¬k
(
¹
, &
s
->
func_¡©e
, 
m¬k_func
);

19059 
	}
}

19061 
JSV®ue
 
js_async_g’”©Ü_»sŞve_funùiÚ
(
JSCÚ‹xt
 *
ùx
,

19062 
JSV®ueCÚ¡
 
this_obj
,

19063 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

19064 
magic
, 
JSV®ue
 *
func_d©a
);

19066 
	$js_async_g’”©Ü_»sŞve_funùiÚ_ü—‹
(
JSCÚ‹xt
 *
ùx
,

19067 
JSV®ueCÚ¡
 
g’”©Ü
,

19068 
JSV®ue
 *
»sŞvšg_funcs
,

19069 
BOOL
 
is_»sume_Ãxt
)

19071 
i
;

19072 
JSV®ue
 
func
;

19074 
i
 = 0; i < 2; i++) {

19075 
func
 = 
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_async_g’”©Ü_»sŞve_funùiÚ
, 1,

19076 
i
 + 
is_»sume_Ãxt
 * 2, 1, &
g’”©Ü
);

19077 ià(
	`JS_IsExû±iÚ
(
func
)) {

19078 ià(
i
 == 1)

19079 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

19082 
»sŞvšg_funcs
[
i
] = 
func
;

19085 
	}
}

19087 
	$js_async_g’”©Ü_awa™
(
JSCÚ‹xt
 *
ùx
,

19088 
JSAsyncG’”©ÜD©a
 *
s
,

19089 
JSV®ueCÚ¡
 
v®ue
)

19091 
JSV®ue
 
´omi£
, 
»sŞvšg_funcs
[2], 
»sŞvšg_funcs1
[2];

19092 
i
, 
»s
;

19094 
´omi£
 = 
	`js_´omi£_»sŞve
(
ùx
, ctx->
´omi£_ùÜ
,

19095 1, &
v®ue
, 0);

19096 ià(
	`JS_IsExû±iÚ
(
´omi£
))

19097 
ç
;

19099 ià(
	`js_async_g’”©Ü_»sŞve_funùiÚ_ü—‹
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
s
->
g’”©Ü
),

19100 
»sŞvšg_funcs
, 
FALSE
)) {

19101 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

19102 
ç
;

19107 
i
 = 0; i < 2; i++)

19108 
»sŞvšg_funcs1
[
i
] = 
JS_UNDEFINED
;

19109 
»s
 = 
	`³rfÜm_´omi£_th’
(
ùx
, 
´omi£
,

19110 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs
,

19111 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs1
);

19112 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

19113 
i
 = 0; i < 2; i++)

19114 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[
i
]);

19115 ià(
»s
)

19116 
ç
;

19118 
ç
:

19120 
	}
}

19122 
	$js_async_g’”©Ü_»sŞve_Ü_»jeù
(
JSCÚ‹xt
 *
ùx
,

19123 
JSAsyncG’”©ÜD©a
 *
s
,

19124 
JSV®ueCÚ¡
 
»suÉ
,

19125 
is_»jeù
)

19127 
JSAsyncG’”©ÜReque¡
 *
Ãxt
;

19128 
JSV®ue
 
»t
;

19130 
Ãxt
 = 
	`li¡_’Œy
(
s
->
queue
.Ãxt, 
JSAsyncG’”©ÜReque¡
, 
lšk
);

19131 
	`li¡_d–
(&
Ãxt
->
lšk
);

19132 
»t
 = 
	`JS_C®l
(
ùx
, 
Ãxt
->
»sŞvšg_funcs
[
is_»jeù
], 
JS_UNDEFINED
, 1,

19133 &
»suÉ
);

19134 
	`JS_F»eV®ue
(
ùx
, 
»t
);

19135 
	`JS_F»eV®ue
(
ùx
, 
Ãxt
->
»suÉ
);

19136 
	`JS_F»eV®ue
(
ùx
, 
Ãxt
->
´omi£
);

19137 
	`JS_F»eV®ue
(
ùx
, 
Ãxt
->
»sŞvšg_funcs
[0]);

19138 
	`JS_F»eV®ue
(
ùx
, 
Ãxt
->
»sŞvšg_funcs
[1]);

19139 
	`js_ä“
(
ùx
, 
Ãxt
);

19140 
	}
}

19142 
	$js_async_g’”©Ü_»sŞve
(
JSCÚ‹xt
 *
ùx
,

19143 
JSAsyncG’”©ÜD©a
 *
s
,

19144 
JSV®ueCÚ¡
 
v®ue
,

19145 
BOOL
 
dÚe
)

19147 
JSV®ue
 
»suÉ
;

19148 
»suÉ
 = 
	`js_ü—‹_™”©Ü_»suÉ
(
ùx
, 
	`JS_DupV®ue
(ùx, 
v®ue
), 
dÚe
);

19150 
	`js_async_g’”©Ü_»sŞve_Ü_»jeù
(
ùx
, 
s
, 
»suÉ
, 0);

19151 
	`JS_F»eV®ue
(
ùx
, 
»suÉ
);

19152 
	}
}

19154 
	$js_async_g’”©Ü_»jeù
(
JSCÚ‹xt
 *
ùx
,

19155 
JSAsyncG’”©ÜD©a
 *
s
,

19156 
JSV®ueCÚ¡
 
exû±iÚ
)

19158 
	`js_async_g’”©Ü_»sŞve_Ü_»jeù
(
ùx
, 
s
, 
exû±iÚ
, 1);

19159 
	}
}

19161 
	$js_async_g’”©Ü_com¶‘e
(
JSCÚ‹xt
 *
ùx
,

19162 
JSAsyncG’”©ÜD©a
 *
s
)

19164 ià(
s
->
¡©e
 !ğ
JS_ASYNC_GENERATOR_STATE_COMPLETED
) {

19165 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_COMPLETED
;

19166 
	`async_func_ä“
(
ùx
->
¹
, &
s
->
func_¡©e
);

19168 
	}
}

19170 
	$js_async_g’”©Ü_com¶‘ed_»tuº
(
JSCÚ‹xt
 *
ùx
,

19171 
JSAsyncG’”©ÜD©a
 *
s
,

19172 
JSV®ueCÚ¡
 
v®ue
)

19174 
JSV®ue
 
´omi£
, 
»sŞvšg_funcs
[2], 
»sŞvšg_funcs1
[2];

19175 
»s
;

19177 
´omi£
 = 
	`js_´omi£_»sŞve
(
ùx
, ctx->
´omi£_ùÜ
,

19178 1, (
JSV®ueCÚ¡
 *)&
v®ue
, 0);

19179 ià(
	`JS_IsExû±iÚ
(
´omi£
))

19181 ià(
	`js_async_g’”©Ü_»sŞve_funùiÚ_ü—‹
(
ùx
,

19182 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
s
->
g’”©Ü
),

19183 
»sŞvšg_funcs1
,

19184 
TRUE
)) {

19185 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

19188 
»sŞvšg_funcs
[0] = 
JS_UNDEFINED
;

19189 
»sŞvšg_funcs
[1] = 
JS_UNDEFINED
;

19190 
»s
 = 
	`³rfÜm_´omi£_th’
(
ùx
, 
´omi£
,

19191 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs1
,

19192 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs
);

19193 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs1
[0]);

19194 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs1
[1]);

19195 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

19196  
»s
;

19197 
	}
}

19199 
	$js_async_g’”©Ü_»sume_Ãxt
(
JSCÚ‹xt
 *
ùx
,

19200 
JSAsyncG’”©ÜD©a
 *
s
)

19202 
JSAsyncG’”©ÜReque¡
 *
Ãxt
;

19203 
JSV®ue
 
func_»t
, 
v®ue
;

19206 ià(
	`li¡_em±y
(&
s
->
queue
))

19208 
Ãxt
 = 
	`li¡_’Œy
(
s
->
queue
.Ãxt, 
JSAsyncG’”©ÜReque¡
, 
lšk
);

19209 
s
->
¡©e
) {

19210 
JS_ASYNC_GENERATOR_STATE_EXECUTING
:

19212 
»sume_exec
;

19213 
JS_ASYNC_GENERATOR_STATE_AWAITING_RETURN
:

19214 
dÚe
;

19215 
JS_ASYNC_GENERATOR_STATE_SUSPENDED_START
:

19216 ià(
Ãxt
->
com¶‘iÚ_ty³
 =ğ
GEN_MAGIC_NEXT
) {

19217 
exec_no_¬g
;

19219 
	`js_async_g’”©Ü_com¶‘e
(
ùx
, 
s
);

19222 
JS_ASYNC_GENERATOR_STATE_COMPLETED
:

19223 ià(
Ãxt
->
com¶‘iÚ_ty³
 =ğ
GEN_MAGIC_NEXT
) {

19224 
	`js_async_g’”©Ü_»sŞve
(
ùx
, 
s
, 
JS_UNDEFINED
, 
TRUE
);

19225 } ià(
Ãxt
->
com¶‘iÚ_ty³
 =ğ
GEN_MAGIC_RETURN
) {

19226 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_AWAITING_RETURN
;

19227 
	`js_async_g’”©Ü_com¶‘ed_»tuº
(
ùx
, 
s
, 
Ãxt
->
»suÉ
);

19228 
dÚe
;

19230 
	`js_async_g’”©Ü_»jeù
(
ùx
, 
s
, 
Ãxt
->
»suÉ
);

19232 
dÚe
;

19233 
JS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD
:

19234 
JS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD_STAR
:

19235 
v®ue
 = 
	`JS_DupV®ue
(
ùx
, 
Ãxt
->
»suÉ
);

19236 ià(
Ãxt
->
com¶‘iÚ_ty³
 =ğ
GEN_MAGIC_THROW
 &&

19237 
s
->
¡©e
 =ğ
JS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD
) {

19238 
	`JS_Throw
(
ùx
, 
v®ue
);

19239 
s
->
func_¡©e
.
throw_æag
 = 
TRUE
;

19243 
s
->
func_¡©e
.
äame
.
cur_¥
[-1] = 
v®ue
;

19244 
s
->
func_¡©e
.
äame
.
cur_¥
[0] =

19245 
	`JS_NewIÁ32
(
ùx
, 
Ãxt
->
com¶‘iÚ_ty³
);

19246 
s
->
func_¡©e
.
äame
.
cur_¥
++;

19247 
exec_no_¬g
:

19248 
s
->
func_¡©e
.
throw_æag
 = 
FALSE
;

19250 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_EXECUTING
;

19251 
»sume_exec
:

19252 
func_»t
 = 
	`async_func_»sume
(
ùx
, &
s
->
func_¡©e
);

19253 ià(
	`JS_IsExû±iÚ
(
func_»t
)) {

19254 
v®ue
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

19255 
	`js_async_g’”©Ü_com¶‘e
(
ùx
, 
s
);

19256 
	`js_async_g’”©Ü_»jeù
(
ùx
, 
s
, 
v®ue
);

19257 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

19258 } ià(
	`JS_VALUE_GET_TAG
(
func_»t
è=ğ
JS_TAG_INT
) {

19259 
func_»t_code
;

19260 
v®ue
 = 
s
->
func_¡©e
.
äame
.
cur_¥
[-1];

19261 
s
->
func_¡©e
.
äame
.
cur_¥
[-1] = 
JS_UNDEFINED
;

19262 
func_»t_code
 = 
	`JS_VALUE_GET_INT
(
func_»t
);

19263 
func_»t_code
) {

19264 
FUNC_RET_YIELD
:

19265 
FUNC_RET_YIELD_STAR
:

19266 ià(
func_»t_code
 =ğ
FUNC_RET_YIELD_STAR
)

19267 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD_STAR
;

19269 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_SUSPENDED_YIELD
;

19270 
	`js_async_g’”©Ü_»sŞve
(
ùx
, 
s
, 
v®ue
, 
FALSE
);

19271 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

19273 
FUNC_RET_AWAIT
:

19274 
	`js_async_g’”©Ü_awa™
(
ùx
, 
s
, 
v®ue
);

19275 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

19276 
dÚe
;

19278 
	`abÜt
();

19281 
	`as£¹
(
	`JS_IsUndefšed
(
func_»t
));

19283 
v®ue
 = 
s
->
func_¡©e
.
äame
.
cur_¥
[-1];

19284 
s
->
func_¡©e
.
äame
.
cur_¥
[-1] = 
JS_UNDEFINED
;

19285 
	`js_async_g’”©Ü_com¶‘e
(
ùx
, 
s
);

19286 
	`js_async_g’”©Ü_»sŞve
(
ùx
, 
s
, 
v®ue
, 
TRUE
);

19287 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

19291 
	`abÜt
();

19294 
dÚe
: ;

19295 
	}
}

19297 
JSV®ue
 
	$js_async_g’”©Ü_»sŞve_funùiÚ
(
JSCÚ‹xt
 *
ùx
,

19298 
JSV®ueCÚ¡
 
this_obj
,

19299 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

19300 
magic
, 
JSV®ue
 *
func_d©a
)

19302 
BOOL
 
is_»jeù
 = 
magic
 & 1;

19303 
JSAsyncG’”©ÜD©a
 *
s
 = 
	`JS_G‘O·que
(
func_d©a
[0], 
JS_CLASS_ASYNC_GENERATOR
);

19304 
JSV®ueCÚ¡
 
¬g
 = 
¬gv
[0];

19308 ià(
magic
 >= 2) {

19310 
	`as£¹
(
s
->
¡©e
 =ğ
JS_ASYNC_GENERATOR_STATE_AWAITING_RETURN
 ||

19311 
s
->
¡©e
 =ğ
JS_ASYNC_GENERATOR_STATE_COMPLETED
);

19312 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_COMPLETED
;

19313 ià(
is_»jeù
) {

19314 
	`js_async_g’”©Ü_»jeù
(
ùx
, 
s
, 
¬g
);

19316 
	`js_async_g’”©Ü_»sŞve
(
ùx
, 
s
, 
¬g
, 
TRUE
);

19320 
	`as£¹
(
s
->
¡©e
 =ğ
JS_ASYNC_GENERATOR_STATE_EXECUTING
);

19321 
s
->
func_¡©e
.
throw_æag
 = 
is_»jeù
;

19322 ià(
is_»jeù
) {

19323 
	`JS_Throw
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬g
));

19326 
s
->
func_¡©e
.
äame
.
cur_¥
[-1] = 
	`JS_DupV®ue
(
ùx
, 
¬g
);

19328 
	`js_async_g’”©Ü_»sume_Ãxt
(
ùx
, 
s
);

19330  
JS_UNDEFINED
;

19331 
	}
}

19334 
JSV®ue
 
	$js_async_g’”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

19335 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

19336 
magic
)

19338 
JSAsyncG’”©ÜD©a
 *
s
 = 
	`JS_G‘O·que
(
this_v®
, 
JS_CLASS_ASYNC_GENERATOR
);

19339 
JSV®ue
 
´omi£
, 
»sŞvšg_funcs
[2];

19340 
JSAsyncG’”©ÜReque¡
 *
»q
;

19342 
´omi£
 = 
	`JS_NewPromi£C­ab™y
(
ùx
, 
»sŞvšg_funcs
);

19343 ià(
	`JS_IsExû±iÚ
(
´omi£
))

19344  
JS_EXCEPTION
;

19345 ià(!
s
) {

19346 
JSV®ue
 
”r
, 
»s2
;

19347 
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡n AsyncGenerator object");

19348 
”r
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

19349 
»s2
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[1], 
JS_UNDEFINED
,

19350 1, (
JSV®ueCÚ¡
 *)&
”r
);

19351 
	`JS_F»eV®ue
(
ùx
, 
”r
);

19352 
	`JS_F»eV®ue
(
ùx
, 
»s2
);

19353 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

19354 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

19355  
´omi£
;

19357 
»q
 = 
	`js_m®locz
(
ùx
, (*req));

19358 ià(!
»q
)

19359 
ç
;

19360 
»q
->
com¶‘iÚ_ty³
 = 
magic
;

19361 
»q
->
»suÉ
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

19362 
»q
->
´omi£
 = 
	`JS_DupV®ue
(
ùx
,…romise);

19363 
»q
->
»sŞvšg_funcs
[0] =„esolving_funcs[0];

19364 
»q
->
»sŞvšg_funcs
[1] =„esolving_funcs[1];

19365 
	`li¡_add_
(&
»q
->
lšk
, &
s
->
queue
);

19366 ià(
s
->
¡©e
 !ğ
JS_ASYNC_GENERATOR_STATE_EXECUTING
) {

19367 
	`js_async_g’”©Ü_»sume_Ãxt
(
ùx
, 
s
);

19369  
´omi£
;

19370 
ç
:

19371 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

19372 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

19373 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

19374  
JS_EXCEPTION
;

19375 
	}
}

19377 
JSV®ue
 
	$js_async_g’”©Ü_funùiÚ_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

19378 
JSV®ueCÚ¡
 
this_obj
,

19379 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

19380 
æags
)

19382 
JSV®ue
 
obj
, 
func_»t
;

19383 
JSAsyncG’”©ÜD©a
 *
s
;

19385 
s
 = 
	`js_m®locz
(
ùx
, (*s));

19386 ià(!
s
)

19387  
JS_EXCEPTION
;

19388 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_SUSPENDED_START
;

19389 
	`š™_li¡_h—d
(&
s
->
queue
);

19390 ià(
	`async_func_š™
(
ùx
, &
s
->
func_¡©e
, 
func_obj
, 
this_obj
, 
¬gc
, 
¬gv
)) {

19391 
s
->
¡©e
 = 
JS_ASYNC_GENERATOR_STATE_COMPLETED
;

19392 
ç
;

19397 
func_»t
 = 
	`async_func_»sume
(
ùx
, &
s
->
func_¡©e
);

19398 ià(
	`JS_IsExû±iÚ
(
func_»t
))

19399 
ç
;

19400 
	`JS_F»eV®ue
(
ùx
, 
func_»t
);

19402 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
func_obj
, 
JS_CLASS_ASYNC_GENERATOR
);

19403 ià(
	`JS_IsExû±iÚ
(
obj
))

19404 
ç
;

19405 
s
->
g’”©Ü
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

19406 
	`JS_S‘O·que
(
obj
, 
s
);

19407  
obj
;

19408 
ç
:

19409 
	`js_async_g’”©Ü_ä“
(
ùx
->
¹
, 
s
);

19410  
JS_EXCEPTION
;

19411 
	}
}

19416 
	mTOK_NUMBER
 = -128,

19417 
	mTOK_STRING
,

19418 
	mTOK_TEMPLATE
,

19419 
	mTOK_IDENT
,

19420 
	mTOK_REGEXP
,

19422 
	mTOK_MUL_ASSIGN
,

19423 
	mTOK_DIV_ASSIGN
,

19424 
	mTOK_MOD_ASSIGN
,

19425 
	mTOK_PLUS_ASSIGN
,

19426 
	mTOK_MINUS_ASSIGN
,

19427 
	mTOK_SHL_ASSIGN
,

19428 
	mTOK_SAR_ASSIGN
,

19429 
	mTOK_SHR_ASSIGN
,

19430 
	mTOK_AND_ASSIGN
,

19431 
	mTOK_XOR_ASSIGN
,

19432 
	mTOK_OR_ASSIGN
,

19433 #ifdeà
CONFIG_BIGNUM


19434 
	mTOK_MATH_POW_ASSIGN
,

19436 
	mTOK_POW_ASSIGN
,

19437 
	mTOK_DEC
,

19438 
	mTOK_INC
,

19439 
	mTOK_SHL
,

19440 
	mTOK_SAR
,

19441 
	mTOK_SHR
,

19442 
	mTOK_LT
,

19443 
	mTOK_LTE
,

19444 
	mTOK_GT
,

19445 
	mTOK_GTE
,

19446 
	mTOK_EQ
,

19447 
	mTOK_STRICT_EQ
,

19448 
	mTOK_NEQ
,

19449 
	mTOK_STRICT_NEQ
,

19450 
	mTOK_LAND
,

19451 
	mTOK_LOR
,

19452 #ifdeà
CONFIG_BIGNUM


19453 
	mTOK_MATH_POW
,

19455 
	mTOK_POW
,

19456 
	mTOK_ARROW
,

19457 
	mTOK_ELLIPSIS
,

19458 
	mTOK_DOUBLE_QUESTION_MARK
,

19459 
	mTOK_QUESTION_MARK_DOT
,

19460 
	mTOK_ERROR
,

19461 
	mTOK_PRIVATE_NAME
,

19462 
	mTOK_EOF
,

19464 
	mTOK_NULL
,

19465 
	mTOK_FALSE
,

19466 
	mTOK_TRUE
,

19467 
	mTOK_IF
,

19468 
	mTOK_ELSE
,

19469 
	mTOK_RETURN
,

19470 
	mTOK_VAR
,

19471 
	mTOK_THIS
,

19472 
	mTOK_DELETE
,

19473 
	mTOK_VOID
,

19474 
	mTOK_TYPEOF
,

19475 
	mTOK_NEW
,

19476 
	mTOK_IN
,

19477 
	mTOK_INSTANCEOF
,

19478 
	mTOK_DO
,

19479 
	mTOK_WHILE
,

19480 
	mTOK_FOR
,

19481 
	mTOK_BREAK
,

19482 
	mTOK_CONTINUE
,

19483 
	mTOK_SWITCH
,

19484 
	mTOK_CASE
,

19485 
	mTOK_DEFAULT
,

19486 
	mTOK_THROW
,

19487 
	mTOK_TRY
,

19488 
	mTOK_CATCH
,

19489 
	mTOK_FINALLY
,

19490 
	mTOK_FUNCTION
,

19491 
	mTOK_DEBUGGER
,

19492 
	mTOK_WITH
,

19494 
	mTOK_CLASS
,

19495 
	mTOK_CONST
,

19496 
	mTOK_ENUM
,

19497 
	mTOK_EXPORT
,

19498 
	mTOK_EXTENDS
,

19499 
	mTOK_IMPORT
,

19500 
	mTOK_SUPER
,

19502 
	mTOK_IMPLEMENTS
,

19503 
	mTOK_INTERFACE
,

19504 
	mTOK_LET
,

19505 
	mTOK_PACKAGE
,

19506 
	mTOK_PRIVATE
,

19507 
	mTOK_PROTECTED
,

19508 
	mTOK_PUBLIC
,

19509 
	mTOK_STATIC
,

19510 
	mTOK_YIELD
,

19511 
	mTOK_AWAIT
,

19512 
	mTOK_OF
,

19515 
	#TOK_FIRST_KEYWORD
 
TOK_NULL


	)

19516 
	#TOK_LAST_KEYWORD
 
TOK_AWAIT


	)

19519 
	#CP_NBSP
 0x00a0

	)

19520 
	#CP_BOM
 0xãff

	)

19522 
	#CP_LS
 0x2028

	)

19523 
	#CP_PS
 0x2029

	)

19525 
	sBlockEnv
 {

19526 
BlockEnv
 *
	m´ev
;

19527 
JSAtom
 
	mÏb–_Çme
;

19528 
	mÏb–_b»ak
;

19529 
	mÏb–_cÚt
;

19530 
	mdrİ_couÁ
;

19531 
	mÏb–_fš®ly
;

19532 
	mscİe_Ëv–
;

19533 
	mhas_™”©Ü
;

19534 } 
	tBlockEnv
;

19536 
	sJSHoi¡edDef
 {

19537 
	mıoŞ_idx
;

19538 
ušt8_t
 
	mfÜû_š™
 : 1;

19539 
ušt8_t
 
	mis_Ëxiÿl
 : 1;

19540 
ušt8_t
 
	mis_cÚ¡
 : 1;

19541 
	mv¬_idx
;

19542 
	mscİe_Ëv–
;

19543 
JSAtom
 
	mv¬_Çme
;

19544 } 
	tJSHoi¡edDef
;

19546 
	sR–ocEÁry
 {

19547 
R–ocEÁry
 *
	mÃxt
;

19548 
ušt32_t
 
	maddr
;

19549 
	msize
;

19550 } 
	tR–ocEÁry
;

19552 
	sJumpSlÙ
 {

19553 
	mİ
;

19554 
	msize
;

19555 
	mpos
;

19556 
	mÏb–
;

19557 } 
	tJumpSlÙ
;

19559 
	sLab–SlÙ
 {

19560 
	m»f_couÁ
;

19561 
	mpos
;

19562 
	mpos2
;

19563 
	maddr
;

19564 
R–ocEÁry
 *
	mfœ¡_»loc
;

19565 } 
	tLab–SlÙ
;

19567 
	sLšeNumb”SlÙ
 {

19568 
ušt32_t
 
	mpc
;

19569 
	mlše_num
;

19570 } 
	tLšeNumb”SlÙ
;

19572 
	eJSP¬£FunùiÚEnum
 {

19573 
	mJS_PARSE_FUNC_STATEMENT
,

19574 
	mJS_PARSE_FUNC_VAR
,

19575 
	mJS_PARSE_FUNC_EXPR
,

19576 
	mJS_PARSE_FUNC_ARROW
,

19577 
	mJS_PARSE_FUNC_GETTER
,

19578 
	mJS_PARSE_FUNC_SETTER
,

19579 
	mJS_PARSE_FUNC_METHOD
,

19580 
	mJS_PARSE_FUNC_CLASS_CONSTRUCTOR
,

19581 
	mJS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
,

19582 } 
	tJSP¬£FunùiÚEnum
;

19584 
	eJSP¬£ExpÜtEnum
 {

19585 
	mJS_PARSE_EXPORT_NONE
,

19586 
	mJS_PARSE_EXPORT_NAMED
,

19587 
	mJS_PARSE_EXPORT_DEFAULT
,

19588 } 
	tJSP¬£ExpÜtEnum
;

19590 
	sJSFunùiÚDef
 {

19591 
JSCÚ‹xt
 *
	mùx
;

19592 
JSFunùiÚDef
 *
	m·»Á
;

19593 
	m·»Á_ıoŞ_idx
;

19595 
	m·»Á_scİe_Ëv–
;

19596 
li¡_h—d
 
	mchd_li¡
;

19597 
li¡_h—d
 
	mlšk
;

19599 
BOOL
 
	mis_ev®
;

19600 
	mev®_ty³
;

19601 
BOOL
 
	mis_glob®_v¬
;

19603 
BOOL
 
	mis_func_ex´
;

19604 
BOOL
 
	mhas_home_objeù
;

19605 
BOOL
 
	mhas_´ÙÙy³
;

19606 
BOOL
 
	mhas_sim¶e_·¿m‘”_li¡
;

19607 
BOOL
 
	mhas_u£_¡riù
;

19608 
BOOL
 
	mhas_ev®_ÿÎ
;

19609 
BOOL
 
	mhas_¬gum’ts_bšdšg
;

19611 
BOOL
 
	mhas_this_bšdšg
;

19613 
BOOL
 
	mÃw_rg‘_®lowed
;

19615 
BOOL
 
	msu³r_ÿÎ_®lowed
;

19616 
BOOL
 
	msu³r_®lowed
;

19617 
BOOL
 
	m¬gum’ts_®lowed
;

19618 
BOOL
 
	mis_d”ived_şass_cÚ¡ruùÜ
;

19619 
BOOL
 
	mš_funùiÚ_body
;

19620 
BOOL
 
	mbackŒaû_b¬r›r
;

19621 
JSFunùiÚKšdEnum
 
	mfunc_kšd
 : 8;

19622 
JSP¬£FunùiÚEnum
 
	mfunc_ty³
 : 8;

19623 
ušt8_t
 
	mjs_mode
;

19624 
JSAtom
 
	mfunc_Çme
;

19626 
JSV¬Def
 *
	mv¬s
;

19627 
	mv¬_size
;

19628 
	mv¬_couÁ
;

19629 
JSV¬Def
 *
	m¬gs
;

19630 
	m¬g_size
;

19631 
	m¬g_couÁ
;

19632 
	mdefšed_¬g_couÁ
;

19633 
	mv¬_objeù_idx
;

19634 
	m¬gum’ts_v¬_idx
;

19635 
	mfunc_v¬_idx
;

19637 
	mev®_»t_idx
;

19638 
	mthis_v¬_idx
;

19639 
	mÃw_rg‘_v¬_idx
;

19640 
	mthis_aùive_func_v¬_idx
;

19641 
	mhome_objeù_v¬_idx
;

19642 
BOOL
 
	mÃed_home_objeù
;

19644 
	mscİe_Ëv–
;

19645 
	mscİe_fœ¡
;

19646 
	mscİe_size
;

19647 
	mscİe_couÁ
;

19648 
JSV¬Scİe
 *
	mscİes
;

19649 
JSV¬Scİe
 
	mdef_scİe_¬¿y
[4];

19651 
	mhoi¡ed_def_couÁ
;

19652 
	mhoi¡ed_def_size
;

19653 
JSHoi¡edDef
 *
	mhoi¡ed_def
;

19655 
DynBuf
 
	mby‹_code
;

19656 
	mÏ¡_İcode_pos
;

19657 
	mÏ¡_İcode_lše_num
;

19658 
BOOL
 
	mu£_shÜt_İcodes
;

19660 
Lab–SlÙ
 *
	mÏb–_¦Ùs
;

19661 
	mÏb–_size
;

19662 
	mÏb–_couÁ
;

19663 
BlockEnv
 *
	mtİ_b»ak
;

19666 
JSV®ue
 *
	mıoŞ
;

19667 
ušt32_t
 
	mıoŞ_couÁ
;

19668 
ušt32_t
 
	mıoŞ_size
;

19671 
	mşosu»_v¬_couÁ
;

19672 
	mşosu»_v¬_size
;

19673 
JSClosu»V¬
 *
	mşosu»_v¬
;

19675 
JumpSlÙ
 *
	mjump_¦Ùs
;

19676 
	mjump_size
;

19677 
	mjump_couÁ
;

19679 
LšeNumb”SlÙ
 *
	mlše_numb”_¦Ùs
;

19680 
	mlše_numb”_size
;

19681 
	mlše_numb”_couÁ
;

19682 
	mlše_numb”_Ï¡
;

19683 
	mlše_numb”_Ï¡_pc
;

19686 
JSAtom
 
	mf’ame
;

19687 
	mlše_num
;

19688 
DynBuf
 
	mpc2lše
;

19690 *
	msourû
;

19691 
	msourû_Ën
;

19693 
JSModuËDef
 *
	mmoduË
;

19694 } 
	tJSFunùiÚDef
;

19696 
	sJSTok’
 {

19697 
	mv®
;

19698 
	mlše_num
;

19699 cÚ¡ 
ušt8_t
 *
	m±r
;

19702 
JSV®ue
 
	m¡r
;

19703 
	m£p
;

19704 } 
	m¡r
;

19706 
JSV®ue
 
	mv®
;

19707 #ifdeà
CONFIG_BIGNUM


19708 
¦imb_t
 
	mexpÚ’t
;

19710 } 
	mnum
;

19712 
JSAtom
 
	m©om
;

19713 
BOOL
 
	mhas_esÿ³
;

19714 
BOOL
 
	mis_»£rved
;

19715 } 
	mid’t
;

19717 
JSV®ue
 
	mbody
;

19718 
JSV®ue
 
	mæags
;

19719 } 
	m»gexp
;

19720 } 
	mu
;

19721 } 
	tJSTok’
;

19723 
	sJSP¬£S‹
 {

19724 
JSCÚ‹xt
 *
	mùx
;

19725 
	mÏ¡_lše_num
;

19726 
	mlše_num
;

19727 cÚ¡ *
	mf’ame
;

19728 
JSTok’
 
	mtok’
;

19729 
BOOL
 
	mgÙ_lf
;

19730 cÚ¡ 
ušt8_t
 *
	mÏ¡_±r
;

19731 cÚ¡ 
ušt8_t
 *
	mbuf_±r
;

19732 cÚ¡ 
ušt8_t
 *
	mbuf_’d
;

19735 
JSFunùiÚDef
 *
	mcur_func
;

19736 
BOOL
 
	mis_moduË
;

19737 
BOOL
 
	m®low_html_comm’ts
;

19738 } 
	tJSP¬£S‹
;

19740 
	sJSOpCode
 {

19741 #ifdeà
DUMP_BYTECODE


19742 cÚ¡ *
	mÇme
;

19744 
ušt8_t
 
	msize
;

19747 
ušt8_t
 
	mn_pİ
;

19748 
ušt8_t
 
	mn_push
;

19749 
ušt8_t
 
	mfmt
;

19750 } 
	tJSOpCode
;

19752 cÚ¡ 
JSOpCode
 
	gİcode_šfo
[
OP_COUNT
 + (
OP_TEMP_END
 - 
OP_TEMP_START
)] = {

19753 
	#FMT
(
f
)

	)

19754 #ifdeà
DUMP_BYTECODE


19755 
	#DEF
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
è{ #id, size,‚_pİ,‚_push, 
OP_FMT_
 ## f },

	)

19757 
	#DEF
(
id
, 
size
, 
n_pİ
, 
n_push
, 
f
è{ size,‚_pİ,‚_push, 
OP_FMT_
 ## f },

	)

19759 
	~<¹/js/quickjs-İcode.h
>

19760 #undeà
DEF


19761 #undeà
FMT


19764 #ià
SHORT_OPCODES


19769 
	#shÜt_İcode_šfo
(
İ
) \

19770 
İcode_šfo
[(
İ
è>ğ
OP_TEMP_START
 ? \

19771 (
İ
è+ (
OP_TEMP_END
 - 
OP_TEMP_START
è: (İ)]

	)

19773 
	#shÜt_İcode_šfo
(
İ
è
İcode_šfo
[İ]

	)

19776 
__exû±iÚ
 
Ãxt_tok’
(
JSP¬£S‹
 *
s
);

19778 
	$ä“_tok’
(
JSP¬£S‹
 *
s
, 
JSTok’
 *
tok’
)

19780 
tok’
->
v®
) {

19781 #ifdeà
CONFIG_BIGNUM


19782 
TOK_NUMBER
:

19783 
	`JS_F»eV®ue
(
s
->
ùx
, 
tok’
->
u
.
num
.
v®
);

19786 
TOK_STRING
:

19787 
TOK_TEMPLATE
:

19788 
	`JS_F»eV®ue
(
s
->
ùx
, 
tok’
->
u
.
¡r
.str);

19790 
TOK_REGEXP
:

19791 
	`JS_F»eV®ue
(
s
->
ùx
, 
tok’
->
u
.
»gexp
.
body
);

19792 
	`JS_F»eV®ue
(
s
->
ùx
, 
tok’
->
u
.
»gexp
.
æags
);

19794 
TOK_IDENT
:

19795 
TOK_FIRST_KEYWORD
 ... 
TOK_LAST_KEYWORD
:

19796 
TOK_PRIVATE_NAME
:

19797 
	`JS_F»eAtom
(
s
->
ùx
, 
tok’
->
u
.
id’t
.
©om
);

19802 
	}
}

19804 
__©Œibu‹
((
unu£d
)è
	$dump_tok’
(
JSP¬£S‹
 *
s
,

19805 cÚ¡ 
JSTok’
 *
tok’
)

19807 
tok’
->
v®
) {

19808 
TOK_NUMBER
:

19810 
d
;

19811 
	`JS_ToFlßt64
(
s
->
ùx
, &
d
, 
tok’
->
u
.
num
.
v®
);

19812 
	`´štf
("numb”: %.14g\n", 
d
);

19815 
TOK_IDENT
:

19816 
dump_©om
:

19818 
buf
[
ATOM_GET_STR_BUF_SIZE
];

19819 
	`´štf
("ident: '%s'\n",

19820 
	`JS_AtomG‘SŒ
(
s
->
ùx
, 
buf
, (buf), 
tok’
->
u
.
id’t
.
©om
));

19823 
TOK_STRING
:

19825 cÚ¡ *
¡r
;

19827 
¡r
 = 
	`JS_ToCSŒšg
(
s
->
ùx
, 
tok’
->
u
.str.str);

19828 
	`´štf
("¡ršg: '%s'\n", 
¡r
);

19829 
	`JS_F»eCSŒšg
(
s
->
ùx
, 
¡r
);

19832 
TOK_TEMPLATE
:

19834 cÚ¡ *
¡r
;

19835 
¡r
 = 
	`JS_ToCSŒšg
(
s
->
ùx
, 
tok’
->
u
.str.str);

19836 
	`´štf
("‹m¶©e: `%s`\n", 
¡r
);

19837 
	`JS_F»eCSŒšg
(
s
->
ùx
, 
¡r
);

19840 
TOK_REGEXP
:

19842 cÚ¡ *
¡r
, *
¡r2
;

19843 
¡r
 = 
	`JS_ToCSŒšg
(
s
->
ùx
, 
tok’
->
u
.
»gexp
.
body
);

19844 
¡r2
 = 
	`JS_ToCSŒšg
(
s
->
ùx
, 
tok’
->
u
.
»gexp
.
æags
);

19845 
	`´štf
("»gexp: '%s' '%s'\n", 
¡r
, 
¡r2
);

19846 
	`JS_F»eCSŒšg
(
s
->
ùx
, 
¡r
);

19847 
	`JS_F»eCSŒšg
(
s
->
ùx
, 
¡r2
);

19850 
TOK_EOF
:

19851 
	`´štf
("eof\n");

19854 ià(
s
->
tok’
.
v®
 >ğ
TOK_NULL
 && s->tok’.v® <ğ
TOK_LAST_KEYWORD
) {

19855 
dump_©om
;

19856 } ià(
s
->
tok’
.
v®
 >= 256) {

19857 
	`´štf
("tok’: %d\n", 
tok’
->
v®
);

19859 
	`´štf
("tok’: '%c'\n", 
tok’
->
v®
);

19863 
	}
}

19865 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$js_·r£_”rÜ
(
JSP¬£S‹
 *
s
, cÚ¡ *
fmt
, ...)

19867 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

19868 
va_li¡
 
­
;

19869 
backŒaû_æags
;

19871 
	`va_¡¬t
(
­
, 
fmt
);

19872 
	`JS_ThrowE¼Ü2
(
ùx
, 
JS_SYNTAX_ERROR
, 
fmt
, 
­
, 
FALSE
);

19873 
	`va_’d
(
­
);

19874 
backŒaû_æags
 = 0;

19875 ià(
s
->
cur_func
 && s->cur_func->
backŒaû_b¬r›r
)

19876 
backŒaû_æags
 = 
JS_BACKTRACE_FLAG_SINGLE_LEVEL
;

19877 
	`bud_backŒaû
(
ùx
, ctx->
¹
->
cu¼’t_exû±iÚ
, 
s
->
f’ame
, s->
lše_num
,

19878 
backŒaû_æags
);

19880 
	}
}

19882 
	$js_·r£_ex³ù
(
JSP¬£S‹
 *
s
, 
tok
)

19884 ià(
s
->
tok’
.
v®
 !ğ
tok
) {

19886  
	`js_·r£_”rÜ
(
s
, "ex³ùšg '%c'", 
tok
);

19888  
	`Ãxt_tok’
(
s
);

19889 
	}
}

19891 
	$js_·r£_ex³ù_£mi
(
JSP¬£S‹
 *
s
)

19893 ià(
s
->
tok’
.
v®
 != ';') {

19895 ià(
s
->
tok’
.
v®
 =ğ
TOK_EOF
 || s->tok’.v® =ğ'}' || s->
gÙ_lf
) {

19898  
	`js_·r£_”rÜ
(
s
, "expecting '%c'", ';');

19900  
	`Ãxt_tok’
(
s
);

19901 
	}
}

19903 
	$js_·r£_”rÜ_»£rved_id’tif›r
(
JSP¬£S‹
 *
s
)

19905 
buf1
[
ATOM_GET_STR_BUF_SIZE
];

19906  
	`js_·r£_”rÜ
(
s
, "'%s' is‡„eserved identifier",

19907 
	`JS_AtomG‘SŒ
(
s
->
ùx
, 
buf1
, (buf1),

19908 
s
->
tok’
.
u
.
id’t
.
©om
));

19909 
	}
}

19911 
__exû±iÚ
 
	$js_·r£_‹m¶©e_·¹
(
JSP¬£S‹
 *
s
, cÚ¡ 
ušt8_t
 *
p
)

19913 
ušt32_t
 
c
;

19914 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

19917 ià(
	`¡ršg_bufãr_š™
(
s
->
ùx
, 
b
, 32))

19918 
ç
;

19920 ià(
p
 >ğ
s
->
buf_’d
)

19921 
uÃx³ùed_eof
;

19922 
c
 = *
p
++;

19923 ià(
c
 == '`') {

19927 ià(
c
 =ğ'$' && *
p
 == '{') {

19929 
p
++;

19932 ià(
c
 == '\\') {

19933 ià(
	`¡ršg_bufãr_putc8
(
b
, 
c
))

19934 
ç
;

19935 ià(
p
 >ğ
s
->
buf_’d
)

19936 
uÃx³ùed_eof
;

19937 
c
 = *
p
++;

19940 ià(
c
 == '\r') {

19941 ià(*
p
 == '\n')

19942 
p
++;

19943 
c
 = '\n';

19945 ià(
c
 == '\n') {

19946 
s
->
lše_num
++;

19947 } ià(
c
 >= 0x80) {

19948 cÚ¡ 
ušt8_t
 *
p_Ãxt
;

19949 
c
 = 
	`unicode_äom_utf8
(
p
 - 1, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

19950 ià(
c
 > 0x10FFFF) {

19951 
	`js_·r£_”rÜ
(
s
, "invalid UTF-8 sequence");

19952 
ç
;

19954 
p
 = 
p_Ãxt
;

19956 ià(
	`¡ršg_bufãr_putc
(
b
, 
c
))

19957 
ç
;

19959 
s
->
tok’
.
v®
 = 
TOK_TEMPLATE
;

19960 
s
->
tok’
.
u
.
¡r
.
£p
 = 
c
;

19961 
s
->
tok’
.
u
.
¡r
.¡¸ğ
	`¡ršg_bufãr_’d
(
b
);

19962 
s
->
buf_±r
 = 
p
;

19965 
uÃx³ùed_eof
:

19966 
	`js_·r£_”rÜ
(
s
, "unexpectedƒnd of string");

19967 
ç
:

19968 
	`¡ršg_bufãr_ä“
(
b
);

19970 
	}
}

19972 
__exû±iÚ
 
	$js_·r£_¡ršg
(
JSP¬£S‹
 *
s
, 
£p
,

19973 
BOOL
 
do_throw
, cÚ¡ 
ušt8_t
 *
p
,

19974 
JSTok’
 *
tok’
, cÚ¡ 
ušt8_t
 **
µ
)

19976 
»t
;

19977 
ušt32_t
 
c
;

19978 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

19981 ià(
	`¡ršg_bufãr_š™
(
s
->
ùx
, 
b
, 32))

19982 
ç
;

19984 ià(
p
 >ğ
s
->
buf_’d
)

19985 
šv®id_ch¬
;

19986 
c
 = *
p
;

19987 ià(
c
 < 0x20) {

19988 ià(!
s
->
cur_func
) {

19989 ià(
do_throw
)

19990 
	`js_·r£_”rÜ
(
s
, "invalid character in‡ JSON string");

19991 
ç
;

19993 ià(
£p
 == '`') {

19994 ià(
c
 == '\r') {

19995 ià(
p
[1] == '\n')

19996 
p
++;

19997 
c
 = '\n';

20000 } ià(
c
 == '\n' || c == '\r')

20001 
šv®id_ch¬
;

20003 
p
++;

20004 ià(
c
 =ğ
£p
)

20006 ià(
c
 =ğ'$' && *
p
 =ğ'{' && 
£p
 == '`') {

20008 
p
++;

20011 ià(
c
 == '\\') {

20012 
c
 = *
p
;

20013 
c
) {

20015 ià(
p
 >ğ
s
->
buf_’d
)

20016 
šv®id_ch¬
;

20017 
p
++;

20022 
p
++;

20025 ià(
p
[1] == '\n') {

20026 
p
++;

20031 
p
++;

20032 ià(
£p
 != '`')

20033 
s
->
lše_num
++;

20036 ià(
c
 >= '0' && c <= '7') {

20037 ià(!
s
->
cur_func
)

20038 
šv®id_où®
;

20039 ià(!(
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
è&& 
£p
 != '`')

20040 
·r£_esÿ³
;

20041 ià(
c
 =ğ'0' && !(
p
[1] >= '0' &&…[1] <= '9')) {

20042 
p
++;

20043 
c
 = '\0';

20045 
šv®id_où®
:

20046 ià(
do_throw
)

20047 
	`js_·r£_”rÜ
(
s
, "invalid octal syntax in strict mode");

20048 
ç
;

20050 } ià(
c
 >= 0x80) {

20051 cÚ¡ 
ušt8_t
 *
p_Ãxt
;

20052 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

20053 ià(
c
 > 0x10FFFF) {

20054 
šv®id_utf8
;

20056 
p
 = 
p_Ãxt
;

20058 ià(
c
 =ğ
CP_LS
 || c =ğ
CP_PS
)

20061 
·r£_esÿ³
:

20062 
»t
 = 
	`Ìe_·r£_esÿ³
(&
p
, 
TRUE
);

20063 ià(
»t
 == -1) {

20064 ià(
do_throw
)

20065 
	`js_·r£_”rÜ
(
s
, "malformedƒscape sequence in string†iteral");

20066 
ç
;

20067 } ià(
»t
 < 0) {

20069 
p
++;

20071 
c
 = 
»t
;

20076 } ià(
c
 >= 0x80) {

20077 cÚ¡ 
ušt8_t
 *
p_Ãxt
;

20078 
c
 = 
	`unicode_äom_utf8
(
p
 - 1, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

20079 ià(
c
 > 0x10FFFF)

20080 
šv®id_utf8
;

20081 
p
 = 
p_Ãxt
;

20083 ià(
	`¡ršg_bufãr_putc
(
b
, 
c
))

20084 
ç
;

20086 
tok’
->
v®
 = 
TOK_STRING
;

20087 
tok’
->
u
.
¡r
.
£p
 = 
c
;

20088 
tok’
->
u
.
¡r
.¡¸ğ
	`¡ršg_bufãr_’d
(
b
);

20089 *
µ
 = 
p
;

20092 
šv®id_utf8
:

20093 ià(
do_throw
)

20094 
	`js_·r£_”rÜ
(
s
, "invalid UTF-8 sequence");

20095 
ç
;

20096 
šv®id_ch¬
:

20097 ià(
do_throw
)

20098 
	`js_·r£_”rÜ
(
s
, "unexpectedƒnd of string");

20099 
ç
:

20100 
	`¡ršg_bufãr_ä“
(
b
);

20102 
	}
}

20104 
šlše
 
BOOL
 
	$tok’_is_p£udo_keywÜd
(
JSP¬£S‹
 *
s
, 
JSAtom
 
©om
) {

20105  
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && s->tok’.
u
.
id’t
.
©om
 ==‡tom &&

20106 !
s
->
tok’
.
u
.
id’t
.
has_esÿ³
;

20107 
	}
}

20109 
__exû±iÚ
 
	$js_·r£_»gexp
(
JSP¬£S‹
 *
s
)

20111 cÚ¡ 
ušt8_t
 *
p
;

20112 
BOOL
 
š_şass
;

20113 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

20114 
SŒšgBufãr
 
b2_s
, *
b2
 = &b2_s;

20115 
ušt32_t
 
c
;

20117 
p
 = 
s
->
buf_±r
;

20118 
p
++;

20119 
š_şass
 = 
FALSE
;

20120 ià(
	`¡ršg_bufãr_š™
(
s
->
ùx
, 
b
, 32))

20122 ià(
	`¡ršg_bufãr_š™
(
s
->
ùx
, 
b2
, 1))

20123 
ç
;

20125 ià(
p
 >ğ
s
->
buf_’d
) {

20126 
eof_”rÜ
:

20127 
	`js_·r£_”rÜ
(
s
, "unexpectedƒnd of„egexp");

20128 
ç
;

20130 
c
 = *
p
++;

20131 ià(
c
 == '\n' || c == '\r') {

20132 
eŞ_”rÜ
;

20133 } ià(
c
 == '/') {

20134 ià(!
š_şass
)

20136 } ià(
c
 == '[') {

20137 
š_şass
 = 
TRUE
;

20138 } ià(
c
 == ']') {

20140 
š_şass
 = 
FALSE
;

20141 } ià(
c
 == '\\') {

20142 ià(
	`¡ršg_bufãr_putc8
(
b
, 
c
))

20143 
ç
;

20144 
c
 = *
p
++;

20145 ià(
c
 == '\n' || c == '\r')

20146 
eŞ_”rÜ
;

20147 ià(
c
 =ğ'\0' && 
p
 >ğ
s
->
buf_’d
)

20148 
eof_”rÜ
;

20149 ià(
c
 >= 0x80) {

20150 cÚ¡ 
ušt8_t
 *
p_Ãxt
;

20151 
c
 = 
	`unicode_äom_utf8
(
p
 - 1, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

20152 ià(
c
 > 0x10FFFF) {

20153 
šv®id_utf8
;

20155 
p
 = 
p_Ãxt
;

20156 ià(
c
 =ğ
CP_LS
 || c =ğ
CP_PS
)

20157 
eŞ_”rÜ
;

20159 } ià(
c
 >= 0x80) {

20160 cÚ¡ 
ušt8_t
 *
p_Ãxt
;

20161 
c
 = 
	`unicode_äom_utf8
(
p
 - 1, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

20162 ià(
c
 > 0x10FFFF) {

20163 
šv®id_utf8
:

20164 
	`js_·r£_”rÜ
(
s
, "invalid UTF-8 sequence");

20165 
ç
;

20167 
p
 = 
p_Ãxt
;

20169 ià(
c
 =ğ
CP_LS
 || c =ğ
CP_PS
) {

20170 
eŞ_”rÜ
:

20171 
	`js_·r£_”rÜ
(
s
, "unexpected†ineerminator in„egexp");

20172 
ç
;

20175 ià(
	`¡ršg_bufãr_putc
(
b
, 
c
))

20176 
ç
;

20181 cÚ¡ 
ušt8_t
 *
p_Ãxt
 = 
p
;

20182 
c
 = *
p_Ãxt
++;

20183 ià(
c
 >= 0x80) {

20184 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &
p_Ãxt
);

20185 ià(
c
 > 0x10FFFF) {

20186 
šv®id_utf8
;

20189 ià(!
	`Ìe_js_is_id’t_Ãxt
(
c
))

20191 ià(
	`¡ršg_bufãr_putc
(
b2
, 
c
))

20192 
ç
;

20193 
p
 = 
p_Ãxt
;

20196 
s
->
tok’
.
v®
 = 
TOK_REGEXP
;

20197 
s
->
tok’
.
u
.
»gexp
.
body
 = 
	`¡ršg_bufãr_’d
(
b
);

20198 
s
->
tok’
.
u
.
»gexp
.
æags
 = 
	`¡ršg_bufãr_’d
(
b2
);

20199 
s
->
buf_±r
 = 
p
;

20201 
ç
:

20202 
	`¡ršg_bufãr_ä“
(
b
);

20203 
	`¡ršg_bufãr_ä“
(
b2
);

20205 
	}
}

20207 
__exû±iÚ
 
	$id’t_»®loc
(
JSCÚ‹xt
 *
ùx
, **
pbuf
, 
size_t
 *
psize
,

20208 *
¡©ic_buf
)

20210 *
buf
, *
Ãw_buf
;

20211 
size_t
 
size
, 
Ãw_size
;

20213 
buf
 = *
pbuf
;

20214 
size
 = *
psize
;

20215 ià(
size
 >ğ(
SIZE_MAX
 / 3) * 2)

20216 
Ãw_size
 = 
SIZE_MAX
;

20218 
Ãw_size
 = 
size
 + (size >> 1);

20219 ià(
buf
 =ğ
¡©ic_buf
) {

20220 
Ãw_buf
 = 
	`js_m®loc
(
ùx
, 
Ãw_size
);

20221 ià(!
Ãw_buf
)

20223 
	`memıy
(
Ãw_buf
, 
buf
, 
size
);

20225 
Ãw_buf
 = 
	`js_»®loc
(
ùx
, 
buf
, 
Ãw_size
);

20226 ià(!
Ãw_buf
)

20229 *
pbuf
 = 
Ãw_buf
;

20230 *
psize
 = 
Ãw_size
;

20232 
	}
}

20235 
JSAtom
 
	$·r£_id’t
(
JSP¬£S‹
 *
s
, cÚ¡ 
ušt8_t
 **
µ
,

20236 
BOOL
 *
pid’t_has_esÿ³
, 
c
, BOOL 
is_´iv©e
)

20238 cÚ¡ 
ušt8_t
 *
p
, *
p1
;

20239 
id’t_buf
[128], *
buf
;

20240 
size_t
 
id’t_size
, 
id’t_pos
;

20241 
JSAtom
 
©om
;

20243 
p
 = *
µ
;

20244 
buf
 = 
id’t_buf
;

20245 
id’t_size
 = (
id’t_buf
);

20246 
id’t_pos
 = 0;

20247 ià(
is_´iv©e
)

20248 
buf
[
id’t_pos
++] = '#';

20250 
p1
 = 
p
;

20252 ià(
c
 < 128) {

20253 
buf
[
id’t_pos
++] = 
c
;

20255 
id’t_pos
 +ğ
	`unicode_to_utf8
((
ušt8_t
*)
buf
 + id’t_pos, 
c
);

20257 
c
 = *
p1
++;

20258 ià(
c
 =ğ'\\' && *
p1
 == 'u') {

20259 
c
 = 
	`Ìe_·r£_esÿ³
(&
p1
, 
TRUE
);

20260 *
pid’t_has_esÿ³
 = 
TRUE
;

20261 } ià(
c
 >= 128) {

20262 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &
p1
);

20264 ià(!
	`Ìe_js_is_id’t_Ãxt
(
c
))

20266 
p
 = 
p1
;

20267 ià(
	`uÆik–y
(
id’t_pos
 >ğ
id’t_size
 - 
UTF8_CHAR_LEN_MAX
)) {

20268 ià(
	`id’t_»®loc
(
s
->
ùx
, &
buf
, &
id’t_size
, 
id’t_buf
)) {

20269 
©om
 = 
JS_ATOM_NULL
;

20270 
dÚe
;

20274 
©om
 = 
	`JS_NewAtomL’
(
s
->
ùx
, 
buf
, 
id’t_pos
);

20275 
dÚe
:

20276 ià(
	`uÆik–y
(
buf
 !ğ
id’t_buf
))

20277 
	`js_ä“
(
s
->
ùx
, 
buf
);

20278 *
µ
 = 
p
;

20279  
©om
;

20280 
	}
}

20283 
__exû±iÚ
 
	$Ãxt_tok’
(
JSP¬£S‹
 *
s
)

20285 cÚ¡ 
ušt8_t
 *
p
;

20286 
c
;

20287 
BOOL
 
id’t_has_esÿ³
;

20288 
JSAtom
 
©om
;

20290 ià(
	`js_check_¡ack_ov”æow
(
s
->
ùx
->
¹
, 0)) {

20291  
	`js_·r£_”rÜ
(
s
, "stack overflow");

20294 
	`ä“_tok’
(
s
, &s->
tok’
);

20296 
p
 = 
s
->
Ï¡_±r
 = s->
buf_±r
;

20297 
s
->
gÙ_lf
 = 
FALSE
;

20298 
s
->
Ï¡_lše_num
 = s->
tok’
.
lše_num
;

20299 
»do
:

20300 
s
->
tok’
.
lše_num
 = s->line_num;

20301 
s
->
tok’
.
±r
 = 
p
;

20302 
c
 = *
p
;

20303 
c
) {

20305 
s
->
tok’
.
v®
 = 
TOK_EOF
;

20308 ià(!
s
->
cur_func
) {

20310 
def_tok’
;

20312 ià(
	`js_·r£_‹m¶©e_·¹
(
s
, 
p
 + 1))

20313 
ç
;

20314 
p
 = 
s
->
buf_±r
;

20317 ià(!
s
->
cur_func
) {

20319 
def_tok’
;

20323 ià(
	`js_·r£_¡ršg
(
s
, 
c
, 
TRUE
, 
p
 + 1, &s->
tok’
, &p))

20324 
ç
;

20327 ià(
p
[1] == '\n') {

20328 
p
++;

20332 
p
++;

20333 
lše_‹rmš©Ü
:

20334 
s
->
gÙ_lf
 = 
TRUE
;

20335 
s
->
lše_num
++;

20336 
»do
;

20339 ià(!
s
->
cur_func
) {

20341 
def_tok’
;

20346 
p
++;

20347 
»do
;

20349 ià(
p
[1] == '*') {

20351 
p
 += 2;

20353 ià(*
p
 =ğ'\0' &&… >ğ
s
->
buf_’d
) {

20354 
	`js_·r£_”rÜ
(
s
, "unexpectedƒnd of comment");

20355 
ç
;

20357 ià(
p
[0] == '*' &&…[1] == '/') {

20358 
p
 += 2;

20361 ià(*
p
 == '\n') {

20362 
s
->
lše_num
++;

20363 
s
->
gÙ_lf
 = 
TRUE
;

20364 
p
++;

20365 } ià(*
p
 == '\r') {

20366 
s
->
gÙ_lf
 = 
TRUE
;

20367 
p
++;

20368 } ià(*
p
 >= 0x80) {

20369 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &p);

20370 ià(
c
 =ğ
CP_LS
 || c =ğ
CP_PS
) {

20371 
s
->
gÙ_lf
 = 
TRUE
;

20372 } ià(
c
 == -1) {

20373 
p
++;

20376 
p
++;

20379 
»do
;

20380 } ià(
p
[1] == '/') {

20382 
p
 += 2;

20383 
sk_lše_comm’t
:

20385 ià(*
p
 =ğ'\0' &&… >ğ
s
->
buf_’d
)

20387 ià(*
p
 == '\r' || *p == '\n')

20389 ià(*
p
 >= 0x80) {

20390 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &p);

20392 ià(
c
 =ğ
CP_LS
 || c =ğ
CP_PS
) {

20394 } ià(
c
 == -1) {

20395 
p
++;

20398 
p
++;

20401 
»do
;

20402 } ià(
p
[1] == '=') {

20403 
p
 += 2;

20404 
s
->
tok’
.
v®
 = 
TOK_DIV_ASSIGN
;

20406 
p
++;

20407 
s
->
tok’
.
v®
 = 
c
;

20411 ià(
p
[1] == 'u') {

20412 cÚ¡ 
ušt8_t
 *
p1
 = 
p
 + 1;

20413 
c1
 = 
	`Ìe_·r£_esÿ³
(&
p1
, 
TRUE
);

20414 ià(
c1
 >ğ0 && 
	`Ìe_js_is_id’t_fœ¡
(c1)) {

20415 
c
 = 
c1
;

20416 
p
 = 
p1
;

20417 
id’t_has_esÿ³
 = 
TRUE
;

20418 
has_id’t
;

20423 
def_tok’
;

20429 
p
++;

20430 
id’t_has_esÿ³
 = 
FALSE
;

20431 
has_id’t
:

20432 
©om
 = 
	`·r£_id’t
(
s
, &
p
, &
id’t_has_esÿ³
, 
c
, 
FALSE
);

20433 ià(
©om
 =ğ
JS_ATOM_NULL
)

20434 
ç
;

20435 
s
->
tok’
.
u
.
id’t
.
©om
 =‡tom;

20436 
s
->
tok’
.
u
.
id’t
.
has_esÿ³
 = 
id’t_has_esÿ³
;

20437 
s
->
tok’
.
u
.
id’t
.
is_»£rved
 = 
FALSE
;

20438 ià(
s
->
tok’
.
u
.
id’t
.
©om
 <ğ
JS_ATOM_LAST_KEYWORD
 ||

20439 (
s
->
tok’
.
u
.
id’t
.
©om
 <ğ
JS_ATOM_LAST_STRICT_KEYWORD
 &&

20440 
s
->
cur_func
 && (s->cur_func->
js_mode
 & 
JS_MODE_STRICT
)) ||

20441 (
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_y›ld
 && s->
cur_func
 &&

20442 ((
s
->
cur_func
->
func_kšd
 & 
JS_FUNC_GENERATOR
) ||

20443 (
s
->
cur_func
->
func_ty³
 =ğ
JS_PARSE_FUNC_ARROW
 &&

20444 !
s
->
cur_func
->
š_funùiÚ_body
 && s->cur_func->
·»Á
 &&

20445 (
s
->
cur_func
->
·»Á
->
func_kšd
 & 
JS_FUNC_GENERATOR
)))) ||

20446 (
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_awa™
 &&

20447 (
s
->
is_moduË
 ||

20448 (
s
->
cur_func
 &&

20449 ((
s
->
cur_func
->
func_kšd
 & 
JS_FUNC_ASYNC
) ||

20450 (
s
->
cur_func
->
func_ty³
 =ğ
JS_PARSE_FUNC_ARROW
 &&

20451 !
s
->
cur_func
->
š_funùiÚ_body
 && s->cur_func->
·»Á
 &&

20452 (
s
->
cur_func
->
·»Á
->
func_kšd
 & 
JS_FUNC_ASYNC
))))))) {

20453 ià(
id’t_has_esÿ³
) {

20454 
s
->
tok’
.
u
.
id’t
.
is_»£rved
 = 
TRUE
;

20455 
s
->
tok’
.
v®
 = 
TOK_IDENT
;

20458 
s
->
tok’
.
v®
 = s->tok’.
u
.
id’t
.
©om
 - 1 + 
TOK_FIRST_KEYWORD
;

20461 
s
->
tok’
.
v®
 = 
TOK_IDENT
;

20467 cÚ¡ 
ušt8_t
 *
p1
;

20468 
p
++;

20469 
p1
 = 
p
;

20470 
c
 = *
p1
++;

20471 ià(
c
 =ğ'\\' && *
p1
 == 'u') {

20472 
c
 = 
	`Ìe_·r£_esÿ³
(&
p1
, 
TRUE
);

20473 } ià(
c
 >= 128) {

20474 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &
p1
);

20476 ià(!
	`Ìe_js_is_id’t_fœ¡
(
c
)) {

20477 
	`js_·r£_”rÜ
(
s
, "invalid first character of…rivate‚ame");

20478 
ç
;

20480 
p
 = 
p1
;

20481 
id’t_has_esÿ³
 = 
FALSE
;

20482 
©om
 = 
	`·r£_id’t
(
s
, &
p
, &
id’t_has_esÿ³
, 
c
, 
TRUE
);

20483 ià(
©om
 =ğ
JS_ATOM_NULL
)

20484 
ç
;

20485 
s
->
tok’
.
u
.
id’t
.
©om
 =‡tom;

20486 
s
->
tok’
.
v®
 = 
TOK_PRIVATE_NAME
;

20490 ià(
p
[1] == '.' &&…[2] == '.') {

20491 
p
 += 3;

20492 
s
->
tok’
.
v®
 = 
TOK_ELLIPSIS
;

20495 ià(
p
[1] >= '0' &&…[1] <= '9') {

20496 
·r£_numb”
;

20498 
def_tok’
;

20503 ià(
	`is_dig™
(
p
[1]è&& (!
s
->
cur_func
 ||

20504 (
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
))) {

20505 
	`js_·r£_”rÜ
(
s
, "octal†iterals‡re deprecated in strict mode");

20506 
ç
;

20508 
·r£_numb”
;

20511 
·r£_numb”
:

20513 
JSV®ue
 
»t
;

20514 cÚ¡ 
ušt8_t
 *
p1
;

20515 
æags
, 
¿dix
;

20516 ià(!
s
->
cur_func
) {

20517 
æags
 = 0;

20518 
¿dix
 = 10;

20520 
æags
 = 
ATOD_ACCEPT_BIN_OCT
 | 
ATOD_ACCEPT_LEGACY_OCTAL
 |

20521 
ATOD_ACCEPT_UNDERSCORES
;

20522 #ifdeà
CONFIG_BIGNUM


20523 
æags
 |ğ
ATOD_ACCEPT_SUFFIX
;

20524 ià(
s
->
cur_func
->
js_mode
 & 
JS_MODE_MATH
) {

20525 
æags
 |ğ
ATOD_MODE_BIGINT
;

20526 ià(
s
->
cur_func
->
js_mode
 & 
JS_MODE_MATH
)

20527 
æags
 |ğ
ATOD_TYPE_BIG_FLOAT
;

20530 
¿dix
 = 0;

20532 #ifdeà
CONFIG_BIGNUM


20533 
s
->
tok’
.
u
.
num
.
expÚ’t
 = 0;

20534 
»t
 = 
	`js_©of2
(
s
->
ùx
, (cÚ¡ *)
p
, (cÚ¡ **)&p, 
¿dix
,

20535 
æags
, &
s
->
tok’
.
u
.
num
.
expÚ’t
);

20537 
»t
 = 
	`js_©of
(
s
->
ùx
, (cÚ¡ *)
p
, (cÚ¡ **)&p, 
¿dix
,

20538 
æags
);

20540 ià(
	`JS_IsExû±iÚ
(
»t
))

20541 
ç
;

20543 ià(
	`JS_VALUE_IS_NAN
(
»t
) ||

20544 
	`Ìe_js_is_id’t_Ãxt
(
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &
p1
))) {

20545 
	`JS_F»eV®ue
(
s
->
ùx
, 
»t
);

20546 
	`js_·r£_”rÜ
(
s
, "invalid‚umber†iteral");

20547 
ç
;

20549 
s
->
tok’
.
v®
 = 
TOK_NUMBER
;

20550 
s
->
tok’
.
u
.
num
.
v®
 = 
»t
;

20554 ià(
p
[1] == '=') {

20555 
p
 += 2;

20556 
s
->
tok’
.
v®
 = 
TOK_MUL_ASSIGN
;

20557 } ià(
p
[1] == '*') {

20558 ià(
p
[2] == '=') {

20559 
p
 += 3;

20560 
s
->
tok’
.
v®
 = 
TOK_POW_ASSIGN
;

20562 
p
 += 2;

20563 
s
->
tok’
.
v®
 = 
TOK_POW
;

20566 
def_tok’
;

20570 ià(
p
[1] == '=') {

20571 
p
 += 2;

20572 
s
->
tok’
.
v®
 = 
TOK_MOD_ASSIGN
;

20574 
def_tok’
;

20578 ià(
p
[1] == '=') {

20579 
p
 += 2;

20580 
s
->
tok’
.
v®
 = 
TOK_PLUS_ASSIGN
;

20581 } ià(
p
[1] == '+') {

20582 
p
 += 2;

20583 
s
->
tok’
.
v®
 = 
TOK_INC
;

20585 
def_tok’
;

20589 ià(
p
[1] == '=') {

20590 
p
 += 2;

20591 
s
->
tok’
.
v®
 = 
TOK_MINUS_ASSIGN
;

20592 } ià(
p
[1] == '-') {

20593 ià(
s
->
®low_html_comm’ts
 &&

20594 
p
[2] =ğ'>' && 
s
->
Ï¡_lše_num
 !ğs->
lše_num
) {

20598 
sk_lše_comm’t
;

20600 
p
 += 2;

20601 
s
->
tok’
.
v®
 = 
TOK_DEC
;

20603 
def_tok’
;

20607 ià(
p
[1] == '=') {

20608 
p
 += 2;

20609 
s
->
tok’
.
v®
 = 
TOK_LTE
;

20610 } ià(
p
[1] == '<') {

20611 ià(
p
[2] == '=') {

20612 
p
 += 3;

20613 
s
->
tok’
.
v®
 = 
TOK_SHL_ASSIGN
;

20615 
p
 += 2;

20616 
s
->
tok’
.
v®
 = 
TOK_SHL
;

20618 } ià(
s
->
®low_html_comm’ts
 &&

20619 
p
[1] == '!' &&…[2] == '-' &&…[3] == '-') {

20621 
sk_lše_comm’t
;

20623 
def_tok’
;

20627 ià(
p
[1] == '=') {

20628 
p
 += 2;

20629 
s
->
tok’
.
v®
 = 
TOK_GTE
;

20630 } ià(
p
[1] == '>') {

20631 ià(
p
[2] == '>') {

20632 ià(
p
[3] == '=') {

20633 
p
 += 4;

20634 
s
->
tok’
.
v®
 = 
TOK_SHR_ASSIGN
;

20636 
p
 += 3;

20637 
s
->
tok’
.
v®
 = 
TOK_SHR
;

20639 } ià(
p
[2] == '=') {

20640 
p
 += 3;

20641 
s
->
tok’
.
v®
 = 
TOK_SAR_ASSIGN
;

20643 
p
 += 2;

20644 
s
->
tok’
.
v®
 = 
TOK_SAR
;

20647 
def_tok’
;

20651 ià(
p
[1] == '=') {

20652 ià(
p
[2] == '=') {

20653 
p
 += 3;

20654 
s
->
tok’
.
v®
 = 
TOK_STRICT_EQ
;

20656 
p
 += 2;

20657 
s
->
tok’
.
v®
 = 
TOK_EQ
;

20659 } ià(
p
[1] == '>') {

20660 
p
 += 2;

20661 
s
->
tok’
.
v®
 = 
TOK_ARROW
;

20663 
def_tok’
;

20667 ià(
p
[1] == '=') {

20668 ià(
p
[2] == '=') {

20669 
p
 += 3;

20670 
s
->
tok’
.
v®
 = 
TOK_STRICT_NEQ
;

20672 
p
 += 2;

20673 
s
->
tok’
.
v®
 = 
TOK_NEQ
;

20676 
def_tok’
;

20680 ià(
p
[1] == '=') {

20681 
p
 += 2;

20682 
s
->
tok’
.
v®
 = 
TOK_AND_ASSIGN
;

20683 } ià(
p
[1] == '&') {

20684 
p
 += 2;

20685 
s
->
tok’
.
v®
 = 
TOK_LAND
;

20687 
def_tok’
;

20690 #ifdeà
CONFIG_BIGNUM


20694 ià(
p
[1] == '=') {

20695 
p
 += 2;

20696 ià(
s
->
cur_func
 && (s->cur_func->
js_mode
 & 
JS_MODE_MATH
))

20697 
s
->
tok’
.
v®
 = 
TOK_MATH_POW_ASSIGN
;

20699 
s
->
tok’
.
v®
 = 
TOK_XOR_ASSIGN
;

20700 } ià(
p
[1] == '^') {

20701 ià(
p
[2] == '=') {

20702 
p
 += 3;

20703 
s
->
tok’
.
v®
 = 
TOK_XOR_ASSIGN
;

20705 
p
 += 2;

20706 
s
->
tok’
.
v®
 = '^';

20709 
p
++;

20710 ià(
s
->
cur_func
 && (s->cur_func->
js_mode
 & 
JS_MODE_MATH
))

20711 
s
->
tok’
.
v®
 = 
TOK_MATH_POW
;

20713 
s
->
tok’
.
v®
 = '^';

20718 ià(
p
[1] == '=') {

20719 
p
 += 2;

20720 
s
->
tok’
.
v®
 = 
TOK_XOR_ASSIGN
;

20722 
def_tok’
;

20727 ià(
p
[1] == '=') {

20728 
p
 += 2;

20729 
s
->
tok’
.
v®
 = 
TOK_OR_ASSIGN
;

20730 } ià(
p
[1] == '|') {

20731 
p
 += 2;

20732 
s
->
tok’
.
v®
 = 
TOK_LOR
;

20734 
def_tok’
;

20738 ià(
p
[1] == '?') {

20739 
p
 += 2;

20740 
s
->
tok’
.
v®
 = 
TOK_DOUBLE_QUESTION_MARK
;

20741 } ià(
p
[1] == '.' && !(p[2] >= '0' &&…[2] <= '9')) {

20742 
p
 += 2;

20743 
s
->
tok’
.
v®
 = 
TOK_QUESTION_MARK_DOT
;

20745 
def_tok’
;

20749 ià(
c
 >= 128) {

20751 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &p);

20752 
c
) {

20753 
CP_PS
:

20754 
CP_LS
:

20755 ià(!
s
->
cur_func
) {

20757 
def_tok’
;

20761 
lše_‹rmš©Ü
;

20764 ià(
	`Ìe_is_¥aû
(
c
)) {

20765 ià(!
s
->
cur_func
) {

20767 
def_tok’
;

20769 
»do
;

20771 } ià(
	`Ìe_js_is_id’t_fœ¡
(
c
)) {

20772 
id’t_has_esÿ³
 = 
FALSE
;

20773 
has_id’t
;

20775 
	`js_·r£_”rÜ
(
s
, "unexpected character");

20776 
ç
;

20780 
def_tok’
:

20781 
s
->
tok’
.
v®
 = 
c
;

20782 
p
++;

20785 
s
->
buf_±r
 = 
p
;

20790 
ç
:

20791 
s
->
tok’
.
v®
 = 
TOK_ERROR
;

20793 
	}
}

20798 
	$sim¶e_Ãxt_tok’
(cÚ¡ 
ušt8_t
 **
µ
, 
BOOL
 
no_lše_‹rmš©Ü
)

20800 cÚ¡ 
ušt8_t
 *
p
;

20801 
ušt32_t
 
c
;

20804 
p
 = *
µ
;

20806 
c
 = *
p
++) {

20809 ià(
no_lše_‹rmš©Ü
)

20818 ià(*
p
 == '/') {

20819 ià(
no_lše_‹rmš©Ü
)

20821 *
p
 && *p != '\r' && *p != '\n')

20822 
p
++;

20825 ià(*
p
 == '*') {

20826 *++
p
) {

20827 ià((*
p
 =ğ'\r' || *°=ğ'\n'è&& 
no_lše_‹rmš©Ü
)

20829 ià(*
p
 == '*' &&…[1] == '/') {

20830 
p
 += 2;

20838 ià(*
p
 == '>')

20839  
TOK_ARROW
;

20842 ià(
	`Ìe_js_is_id’t_fœ¡
(
c
)) {

20843 ià(
c
 == 'i') {

20844 ià(
p
[0] =ğ'n' && !
	`Ìe_js_is_id’t_Ãxt
(p[1])) {

20845  
TOK_IN
;

20847 ià(
p
[0] == 'm' &&…[1] == 'p' &&…[2] == 'o' &&

20848 
p
[3] == 'r' &&…[4] == 't' &&

20849 !
	`Ìe_js_is_id’t_Ãxt
(
p
[5])) {

20850 *
µ
 = 
p
 + 5;

20851  
TOK_IMPORT
;

20853 } ià(
c
 =ğ'o' && *
p
 =ğ'f' && !
	`Ìe_js_is_id’t_Ãxt
(p[1])) {

20854  
TOK_OF
;

20855 } ià(
c
 =ğ'f' && 
p
[0] == 'u' &&…[1] == 'n' &&

20856 
p
[2] == 'c' &&…[3] == 't' &&…[4] == 'i' &&

20857 
p
[5] =ğ'o' &&…[6] =ğ'n' && !
	`Ìe_js_is_id’t_Ãxt
(p[7])) {

20858  
TOK_FUNCTION
;

20860  
TOK_IDENT
;

20864  
c
;

20866 
	}
}

20868 
	$³ek_tok’
(
JSP¬£S‹
 *
s
, 
BOOL
 
no_lše_‹rmš©Ü
)

20870 cÚ¡ 
ušt8_t
 *
p
 = 
s
->
buf_±r
;

20871  
	`sim¶e_Ãxt_tok’
(&
p
, 
no_lše_‹rmš©Ü
);

20872 
	}
}

20880 
BOOL
 
	$JS_D‘eùModuË
(cÚ¡ *
šput
, 
size_t
 
šput_Ën
)

20882 cÚ¡ 
ušt8_t
 *
p
 = (cÚ¡ ušt8_ˆ*)
šput
;

20883 
tok
;

20884 ià(
	`sim¶e_Ãxt_tok’
(&
p
, 
FALSE
è!ğ
TOK_IMPORT
)

20885  
FALSE
;

20886 
tok
 = 
	`sim¶e_Ãxt_tok’
(&
p
, 
FALSE
);

20887  (
tok
 != '.' &&ok != '(');

20888 
	}
}

20890 
šlše
 
	$g‘_´ev_İcode
(
JSFunùiÚDef
 *
fd
) {

20891 ià(
fd
->
Ï¡_İcode_pos
 < 0)

20892  
OP_šv®id
;

20894  
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
];

20895 
	}
}

20897 
BOOL
 
	$js_is_live_code
(
JSP¬£S‹
 *
s
) {

20898 
	`g‘_´ev_İcode
(
s
->
cur_func
)) {

20899 
OP__ÿÎ
:

20900 
OP__ÿÎ_m‘hod
:

20901 
OP_»tuº
:

20902 
OP_»tuº_undef
:

20903 
OP_»tuº_async
:

20904 
OP_throw
:

20905 
OP_throw_v¬
:

20906 
OP_gÙo
:

20907 #ià
SHORT_OPCODES


20908 
OP_gÙo8
:

20909 
OP_gÙo16
:

20911 
OP_»t
:

20912  
FALSE
;

20914  
TRUE
;

20916 
	}
}

20918 
	$em™_u8
(
JSP¬£S‹
 *
s
, 
ušt8_t
 
v®
)

20920 
	`dbuf_putc
(&
s
->
cur_func
->
by‹_code
, 
v®
);

20921 
	}
}

20923 
	$em™_u16
(
JSP¬£S‹
 *
s
, 
ušt16_t
 
v®
)

20925 
	`dbuf_put_u16
(&
s
->
cur_func
->
by‹_code
, 
v®
);

20926 
	}
}

20928 
	$em™_u32
(
JSP¬£S‹
 *
s
, 
ušt32_t
 
v®
)

20930 
	`dbuf_put_u32
(&
s
->
cur_func
->
by‹_code
, 
v®
);

20931 
	}
}

20933 
	$em™_İ
(
JSP¬£S‹
 *
s
, 
ušt8_t
 
v®
)

20935 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

20936 
DynBuf
 *
bc
 = &
fd
->
by‹_code
;

20941 ià(
	`uÆik–y
(
fd
->
Ï¡_İcode_lše_num
 !ğ
s
->
Ï¡_lše_num
)) {

20942 
	`dbuf_putc
(
bc
, 
OP_lše_num
);

20943 
	`dbuf_put_u32
(
bc
, 
s
->
Ï¡_lše_num
);

20944 
fd
->
Ï¡_İcode_lše_num
 = 
s
->
Ï¡_lše_num
;

20946 
fd
->
Ï¡_İcode_pos
 = 
bc
->
size
;

20947 
	`dbuf_putc
(
bc
, 
v®
);

20948 
	}
}

20950 
	$em™_©om
(
JSP¬£S‹
 *
s
, 
JSAtom
 
Çme
)

20952 
	`em™_u32
(
s
, 
	`JS_DupAtom
(s->
ùx
, 
Çme
));

20953 
	}
}

20955 
	$upd©e_Ïb–
(
JSFunùiÚDef
 *
s
, 
Ïb–
, 
d–
)

20957 
Lab–SlÙ
 *
ls
;

20959 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

20960 
ls
 = &
s
->
Ïb–_¦Ùs
[
Ïb–
];

20961 
ls
->
»f_couÁ
 +ğ
d–
;

20962 
	`as£¹
(
ls
->
»f_couÁ
 >= 0);

20963  
ls
->
»f_couÁ
;

20964 
	}
}

20966 
	$Ãw_Ïb–_fd
(
JSFunùiÚDef
 *
fd
, 
Ïb–
)

20968 
Lab–SlÙ
 *
ls
;

20970 ià(
Ïb–
 < 0) {

20971 ià(
fd
->
Ïb–_couÁ
 >ğfd->
Ïb–_size
) {

20972 
Ãw_size
;

20973 
size_t
 
¦ack
;

20974 
Lab–SlÙ
 *
Ãw_b
;

20977 
Ãw_size
 = 
fd
->
Ïb–_size
 * 3 / 2 + 4;

20978 
Ãw_b
 = 
	`js_»®loc2
(
fd
->
ùx
, fd->
Ïb–_¦Ùs
, 
Ãw_size
 * (*Ãw_b), &
¦ack
);

20979 ià(!
Ãw_b
)

20981 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_b
);

20982 
fd
->
Ïb–_¦Ùs
 = 
Ãw_b
;

20983 
fd
->
Ïb–_size
 = 
Ãw_size
;

20985 
Ïb–
 = 
fd
->
Ïb–_couÁ
++;

20986 
ls
 = &
fd
->
Ïb–_¦Ùs
[
Ïb–
];

20987 
ls
->
»f_couÁ
 = 0;

20988 
ls
->
pos
 = -1;

20989 
ls
->
pos2
 = -1;

20990 
ls
->
addr
 = -1;

20991 
ls
->
fœ¡_»loc
 = 
NULL
;

20993  
Ïb–
;

20994 
	}
}

20996 
	$Ãw_Ïb–
(
JSP¬£S‹
 *
s
)

20998  
	`Ãw_Ïb–_fd
(
s
->
cur_func
, -1);

20999 
	}
}

21002 
	$em™_Ïb–
(
JSP¬£S‹
 *
s
, 
Ïb–
)

21004 ià(
Ïb–
 >= 0) {

21005 
	`em™_İ
(
s
, 
OP_Ïb–
);

21006 
	`em™_u32
(
s
, 
Ïb–
);

21007 
s
->
cur_func
->
Ïb–_¦Ùs
[
Ïb–
].
pos
 = s->cur_func->
by‹_code
.
size
;

21008  
s
->
cur_func
->
by‹_code
.
size
 - 4;

21012 
	}
}

21015 
	$em™_gÙo
(
JSP¬£S‹
 *
s
, 
İcode
, 
Ïb–
)

21017 ià(
	`js_is_live_code
(
s
)) {

21018 ià(
Ïb–
 < 0)

21019 
Ïb–
 = 
	`Ãw_Ïb–
(
s
);

21020 
	`em™_İ
(
s
, 
İcode
);

21021 
	`em™_u32
(
s
, 
Ïb–
);

21022 
s
->
cur_func
->
Ïb–_¦Ùs
[
Ïb–
].
»f_couÁ
++;

21023  
Ïb–
;

21026 
	}
}

21029 
	$ıoŞ_add
(
JSP¬£S‹
 *
s
, 
JSV®ue
 
v®
)

21031 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

21032 ià(
fd
->
ıoŞ_couÁ
 >ğfd->
ıoŞ_size
) {

21033 
Ãw_size
;

21034 
size_t
 
¦ack
;

21035 
JSV®ue
 *
Ãw_b
;

21037 
Ãw_size
 = 
	`max_št
(
fd
->
ıoŞ_couÁ
 + 1, fd->
ıoŞ_size
 * 3 / 2);

21038 
Ãw_b
 = 
	`js_»®loc2
(
s
->
ùx
, 
fd
->
ıoŞ
, 
Ãw_size
 * (
JSV®ue
), &
¦ack
);

21039 ià(!
Ãw_b
)

21041 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_b
);

21042 
fd
->
ıoŞ
 = 
Ãw_b
;

21043 
fd
->
ıoŞ_size
 = 
Ãw_size
;

21045 
fd
->
ıoŞ
[fd->
ıoŞ_couÁ
++] = 
v®
;

21046  
fd
->
ıoŞ_couÁ
 - 1;

21047 
	}
}

21049 
__exû±iÚ
 
	$em™_push_cÚ¡
(
JSP¬£S‹
 *
s
, 
JSV®ueCÚ¡
 
v®
,

21050 
BOOL
 
as_©om
)

21052 
idx
;

21054 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_STRING
 && 
as_©om
) {

21055 
JSAtom
 
©om
;

21057 
	`JS_DupV®ue
(
s
->
ùx
, 
v®
);

21058 
©om
 = 
	`JS_NewAtomSŒ
(
s
->
ùx
, 
	`JS_VALUE_GET_STRING
(
v®
));

21059 ià(
©om
 !ğ
JS_ATOM_NULL
 && !
	`__JS_AtomIsTaggedIÁ
(atom)) {

21060 
	`em™_İ
(
s
, 
OP_push_©om_v®ue
);

21061 
	`em™_u32
(
s
, 
©om
);

21066 
idx
 = 
	`ıoŞ_add
(
s
, 
	`JS_DupV®ue
(s->
ùx
, 
v®
));

21067 ià(
idx
 < 0)

21069 
	`em™_İ
(
s
, 
OP_push_cÚ¡
);

21070 
	`em™_u32
(
s
, 
idx
);

21072 
	}
}

21076 
	$fšd_¬g
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21078 
i
;

21079 
i
 = 
fd
->
¬g_couÁ
; i-- > 0;) {

21080 ià(
fd
->
¬gs
[
i
].
v¬_Çme
 =ğ
Çme
)

21081  
i
 | 
ARGUMENT_VAR_OFFSET
;

21084 
	}
}

21086 
	$fšd_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21088 
i
;

21089 
i
 = 
fd
->
v¬_couÁ
; i-- > 0;) {

21090 ià(
fd
->
v¬s
[
i
].
v¬_Çme
 =ğ
Çme
 && fd->v¬s[i].
scİe_Ëv–
 == 0)

21091  
i
;

21093  
	`fšd_¬g
(
ùx
, 
fd
, 
Çme
);

21094 
	}
}

21098 
BOOL
 
	$is_chd_scİe
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
,

21099 
scİe
, 
·»Á_scİe
)

21101 
scİe
 >= 0) {

21102 ià(
scİe
 =ğ
·»Á_scİe
)

21103  
TRUE
;

21104 
scİe
 = 
fd
->
scİes
[scİe].
·»Á
;

21106  
FALSE
;

21107 
	}
}

21110 
	$fšd_v¬_š_chd_scİe
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
,

21111 
JSAtom
 
Çme
, 
scİe_Ëv–
)

21113 
i
;

21114 
i
 = 0; i < 
fd
->
v¬_couÁ
; i++) {

21115 
JSV¬Def
 *
vd
 = &
fd
->
v¬s
[
i
];

21116 ià(
vd
->
v¬_Çme
 =ğ
Çme
 && vd->
scİe_Ëv–
 == 0) {

21117 ià(
	`is_chd_scİe
(
ùx
, 
fd
, 
vd
->
func_poŞ_Ü_scİe_idx
,

21118 
scİe_Ëv–
))

21119  
i
;

21123 
	}
}

21126 
JSHoi¡edDef
 *
	$fšd_hoi¡ed_def
(
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21128 
i
;

21129 
i
 = 0; i < 
fd
->
hoi¡ed_def_couÁ
; i++) {

21130 
JSHoi¡edDef
 *
hf
 = &
fd
->
hoi¡ed_def
[
i
];

21131 ià(
hf
->
v¬_Çme
 =ğ
Çme
)

21132  
hf
;

21134  
NULL
;

21136 
	}
}

21138 
JSHoi¡edDef
 *
	$fšd_Ëxiÿl_hoi¡ed_def
(
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21140 
JSHoi¡edDef
 *
hf
 = 
	`fšd_hoi¡ed_def
(
fd
, 
Çme
);

21141 ià(
hf
 && hf->
is_Ëxiÿl
)

21142  
hf
;

21144  
NULL
;

21145 
	}
}

21147 
	$fšd_Ëxiÿl_deş
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
,

21148 
scİe_idx
, 
BOOL
 
check_ÿtch_v¬
)

21150 
scİe_idx
 >= 0) {

21151 
JSV¬Def
 *
vd
 = &
fd
->
v¬s
[
scİe_idx
];

21152 ià(
vd
->
v¬_Çme
 =ğ
Çme
 &&

21153 (
vd
->
is_Ëxiÿl
 || (vd->
v¬_kšd
 =ğ
JS_VAR_CATCH
 &&

21154 
check_ÿtch_v¬
)))

21155  
scİe_idx
;

21156 
scİe_idx
 = 
vd
->
scİe_Ãxt
;

21159 ià(
fd
->
is_ev®
 && fd->
ev®_ty³
 =ğ
JS_EVAL_TYPE_GLOBAL
) {

21160 ià(
	`fšd_Ëxiÿl_hoi¡ed_def
(
fd
, 
Çme
))

21161  
GLOBAL_VAR_OFFSET
;

21164 
	}
}

21166 
	$push_scİe
(
JSP¬£S‹
 *
s
) {

21167 ià(
s
->
cur_func
) {

21168 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

21169 
scİe
 = 
fd
->
scİe_couÁ
;

21171 ià((
fd
->
scİe_couÁ
 + 1è> fd->
scİe_size
) {

21172 
Ãw_size
;

21173 
size_t
 
¦ack
;

21174 
JSV¬Scİe
 *
Ãw_buf
;

21176 
Ãw_size
 = 
	`max_št
(
fd
->
scİe_couÁ
 + 1, fd->
scİe_size
 * 3 / 2);

21177 ià(
fd
->
scİes
 =ğfd->
def_scİe_¬¿y
) {

21178 
Ãw_buf
 = 
	`js_»®loc2
(
s
->
ùx
, 
NULL
, 
Ãw_size
 * (*
fd
->
scİes
), &
¦ack
);

21179 ià(!
Ãw_buf
)

21181 
	`memıy
(
Ãw_buf
, 
fd
->
scİes
, fd->
scİe_couÁ
 * (*fd->scopes));

21183 
Ãw_buf
 = 
	`js_»®loc2
(
s
->
ùx
, 
fd
->
scİes
, 
Ãw_size
 * (*fd->scİes), &
¦ack
);

21184 ià(!
Ãw_buf
)

21187 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_buf
);

21188 
fd
->
scİes
 = 
Ãw_buf
;

21189 
fd
->
scİe_size
 = 
Ãw_size
;

21191 
fd
->
scİe_couÁ
++;

21192 
fd
->
scİes
[
scİe
].
·»Á
 = fd->
scİe_Ëv–
;

21193 
fd
->
scİes
[
scİe
].
fœ¡
 = fd->
scİe_fœ¡
;

21194 
	`em™_İ
(
s
, 
OP_’‹r_scİe
);

21195 
	`em™_u16
(
s
, 
scİe
);

21196  
fd
->
scİe_Ëv–
 = 
scİe
;

21199 
	}
}

21201 
	$g‘_fœ¡_Ëxiÿl_v¬
(
JSFunùiÚDef
 *
fd
, 
scİe
)

21203 
scİe
 >= 0) {

21204 
scİe_idx
 = 
fd
->
scİes
[
scİe
].
fœ¡
;

21205 ià(
scİe_idx
 >= 0)

21206  
scİe_idx
;

21207 
scİe
 = 
fd
->
scİes
[scİe].
·»Á
;

21210 
	}
}

21212 
	$pİ_scİe
(
JSP¬£S‹
 *
s
) {

21213 ià(
s
->
cur_func
) {

21215 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

21216 
scİe
 = 
fd
->
scİe_Ëv–
;

21217 
	`em™_İ
(
s
, 
OP_Ëave_scİe
);

21218 
	`em™_u16
(
s
, 
scİe
);

21219 
fd
->
scİe_Ëv–
 = fd->
scİes
[
scİe
].
·»Á
;

21220 
fd
->
scİe_fœ¡
 = 
	`g‘_fœ¡_Ëxiÿl_v¬
(fd, fd->
scİe_Ëv–
);

21222 
	}
}

21224 
	$şo£_scİes
(
JSP¬£S‹
 *
s
, 
scİe
, 
scİe_¡İ
)

21226 
scİe
 > 
scİe_¡İ
) {

21227 
	`em™_İ
(
s
, 
OP_Ëave_scİe
);

21228 
	`em™_u16
(
s
, 
scİe
);

21229 
scİe
 = 
s
->
cur_func
->
scİes
[scİe].
·»Á
;

21231 
	}
}

21234 
	$add_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21236 
JSV¬Def
 *
vd
;

21239 ià(
fd
->
v¬_couÁ
 >ğ
JS_MAX_LOCAL_VARS
) {

21240 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "too many†ocal variables");

21243 ià((
fd
->
v¬_couÁ
 + 1è> fd->
v¬_size
) {

21244 
Ãw_size
;

21245 
size_t
 
¦ack
;

21246 
JSV¬Def
 *
Ãw_buf
;

21247 
Ãw_size
 = 
	`max_št
(
fd
->
v¬_couÁ
 + 1, fd->
v¬_size
 * 3 / 2);

21248 
Ãw_buf
 = 
	`js_»®loc2
(
ùx
, 
fd
->
v¬s
, 
Ãw_size
 * (*fd->v¬s), &
¦ack
);

21249 ià(!
Ãw_buf
)

21251 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_buf
);

21252 
fd
->
v¬s
 = 
Ãw_buf
;

21253 
fd
->
v¬_size
 = 
Ãw_size
;

21255 
vd
 = &
fd
->
v¬s
[fd->
v¬_couÁ
++];

21256 
	`mem£t
(
vd
, 0, (*vd));

21257 
vd
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
Çme
);

21258  
fd
->
v¬_couÁ
 - 1;

21259 
	}
}

21261 
	$add_scİe_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
,

21262 
JSV¬KšdEnum
 
v¬_kšd
)

21264 
idx
 = 
	`add_v¬
(
ùx
, 
fd
, 
Çme
);

21265 ià(
idx
 >= 0) {

21266 
JSV¬Def
 *
vd
 = &
fd
->
v¬s
[
idx
];

21267 
vd
->
v¬_kšd
 = var_kind;

21268 
vd
->
scİe_Ëv–
 = 
fd
->scope_level;

21269 
vd
->
scİe_Ãxt
 = 
fd
->
scİe_fœ¡
;

21270 
fd
->
scİes
[fd->
scİe_Ëv–
].
fœ¡
 = 
idx
;

21271 
fd
->
scİe_fœ¡
 = 
idx
;

21273  
idx
;

21274 
	}
}

21276 
	$add_func_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21278 
idx
 = 
fd
->
func_v¬_idx
;

21279 ià(
idx
 < 0 && (idx = 
	`add_v¬
(
ùx
, 
fd
, 
Çme
)) >= 0) {

21280 
fd
->
func_v¬_idx
 = 
idx
;

21281 
fd
->
v¬s
[
idx
].
is_func_v¬
 = 
TRUE
;

21282 ià(
fd
->
js_mode
 & 
JS_MODE_STRICT
)

21283 
fd
->
v¬s
[
idx
].
is_cÚ¡
 = 
TRUE
;

21285  
idx
;

21286 
	}
}

21288 
	$add_¬gum’ts_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21290 
idx
 = 
fd
->
¬gum’ts_v¬_idx
;

21291 ià(
idx
 < 0 && (idx = 
	`add_v¬
(
ùx
, 
fd
, 
Çme
)) >= 0) {

21292 
fd
->
¬gum’ts_v¬_idx
 = 
idx
;

21294  
idx
;

21295 
	}
}

21297 
	$add_¬g
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
)

21299 
JSV¬Def
 *
vd
;

21302 ià(
fd
->
¬g_couÁ
 >ğ
JS_MAX_LOCAL_VARS
) {

21303 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "too many‡rguments");

21306 ià((
fd
->
¬g_couÁ
 + 1è> fd->
¬g_size
) {

21307 
Ãw_size
;

21308 
size_t
 
¦ack
;

21309 
JSV¬Def
 *
Ãw_buf
;

21310 
Ãw_size
 = 
	`max_št
(
fd
->
¬g_couÁ
 + 1, fd->
¬g_size
 * 3 / 2);

21311 
Ãw_buf
 = 
	`js_»®loc2
(
ùx
, 
fd
->
¬gs
, 
Ãw_size
 * (*fd->¬gs), &
¦ack
);

21312 ià(!
Ãw_buf
)

21314 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_buf
);

21315 
fd
->
¬gs
 = 
Ãw_buf
;

21316 
fd
->
¬g_size
 = 
Ãw_size
;

21318 
vd
 = &
fd
->
¬gs
[fd->
¬g_couÁ
++];

21319 
	`mem£t
(
vd
, 0, (*vd));

21320 
vd
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
Çme
);

21321  
fd
->
¬g_couÁ
 - 1;

21322 
	}
}

21326 
JSHoi¡edDef
 *
	$add_hoi¡ed_def
(
JSCÚ‹xt
 *
ùx
,

21327 
JSFunùiÚDef
 *
s
, 
ıoŞ_idx
,

21328 
JSAtom
 
Çme
, 
v¬_idx
, 
BOOL
 
is_Ëxiÿl
)

21330 
JSHoi¡edDef
 *
hf
;

21332 ià(
s
->
hoi¡ed_def_couÁ
 >ğs->
hoi¡ed_def_size
) {

21333 
Ãw_size
;

21334 
size_t
 
¦ack
;

21335 
JSHoi¡edDef
 *
Ãw_b
;

21336 
Ãw_size
 = 
	`max_št
(
s
->
hoi¡ed_def_couÁ
 + 1,

21337 
s
->
hoi¡ed_def_size
 * 3 / 2);

21338 
Ãw_b
 = 
	`js_»®loc2
(
ùx
, 
s
->
hoi¡ed_def
, 
Ãw_size
 * (s->hoi¡ed_def[0]), &
¦ack
);

21339 ià(!
Ãw_b
)

21340  
NULL
;

21341 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_b
);

21342 
s
->
hoi¡ed_def
 = 
Ãw_b
;

21343 
s
->
hoi¡ed_def_size
 = 
Ãw_size
;

21345 
hf
 = &
s
->
hoi¡ed_def
[s->
hoi¡ed_def_couÁ
++];

21346 
hf
->
ıoŞ_idx
 = cpool_idx;

21347 
hf
->
fÜû_š™
 = 0;

21348 
hf
->
is_Ëxiÿl
 = is_lexical;

21349 
hf
->
is_cÚ¡
 = 
FALSE
;

21350 
hf
->
v¬_idx
 = var_idx;

21351 
hf
->
scİe_Ëv–
 = 
s
->scope_level;

21352 
hf
->
v¬_Çme
 = 
JS_ATOM_NULL
;

21353 ià(
Çme
 !ğ
JS_ATOM_NULL
) {

21354 
hf
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
Çme
);

21356  
hf
;

21357 
	}
}

21360 
	mJS_VAR_DEF_WITH
,

21361 
	mJS_VAR_DEF_LET
,

21362 
	mJS_VAR_DEF_CONST
,

21363 
	mJS_VAR_DEF_FUNCTION_DECL
,

21364 
	mJS_VAR_DEF_NEW_FUNCTION_DECL
,

21365 
	mJS_VAR_DEF_CATCH
,

21366 
	mJS_VAR_DEF_VAR
,

21367 } 
	tJSV¬DefEnum
;

21369 
	$defše_v¬
(
JSP¬£S‹
 *
s
, 
JSFunùiÚDef
 *
fd
, 
JSAtom
 
Çme
,

21370 
JSV¬DefEnum
 
v¬_def_ty³
)

21372 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

21373 
JSV¬Def
 *
vd
;

21374 
idx
;

21376 
v¬_def_ty³
) {

21377 
JS_VAR_DEF_WITH
:

21378 
idx
 = 
	`add_scİe_v¬
(
ùx
, 
fd
, 
Çme
, 
JS_VAR_NORMAL
);

21381 
JS_VAR_DEF_LET
:

21382 
JS_VAR_DEF_CONST
:

21383 
JS_VAR_DEF_FUNCTION_DECL
:

21384 
JS_VAR_DEF_NEW_FUNCTION_DECL
:

21385 
idx
 = 
	`fšd_Ëxiÿl_deş
(
ùx
, 
fd
, 
Çme
, fd->
scİe_fœ¡
, 
TRUE
);

21386 ià(
idx
 >= 0) {

21387 ià(
idx
 < 
GLOBAL_VAR_OFFSET
) {

21388 ià(
fd
->
v¬s
[
idx
].
scİe_Ëv–
 == fd->scope_level) {

21391 ià(!(!(
fd
->
js_mode
 & 
JS_MODE_STRICT
) &&

21392 
v¬_def_ty³
 =ğ
JS_VAR_DEF_FUNCTION_DECL
 &&

21393 
fd
->
v¬s
[
idx
].
v¬_kšd
 =ğ
JS_VAR_FUNCTION_DECL
)) {

21394 
»def_Ëx_”rÜ
;

21396 } ià(
fd
->
v¬s
[
idx
].
v¬_kšd
 =ğ
JS_VAR_CATCH
 && (fd->v¬s[idx].
scİe_Ëv–
 + 2) == fd->scope_level) {

21397 
»def_Ëx_”rÜ
;

21400 ià(
fd
->
scİe_Ëv–
 == 1) {

21401 
»def_Ëx_”rÜ
:

21403  
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of†exical identifier");

21407 ià(
v¬_def_ty³
 !ğ
JS_VAR_DEF_FUNCTION_DECL
 &&

21408 
v¬_def_ty³
 !ğ
JS_VAR_DEF_NEW_FUNCTION_DECL
 &&

21409 
fd
->
scİe_Ëv–
 == 1 &&

21410 
	`fšd_¬g
(
ùx
, 
fd
, 
Çme
) >= 0) {

21412  
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of…arameter‚ame");

21415 ià(
	`fšd_v¬_š_chd_scİe
(
ùx
, 
fd
, 
Çme
, fd->
scİe_Ëv–
) >= 0) {

21416  
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of‡ variable");

21419 ià(
fd
->
is_glob®_v¬
) {

21420 
JSHoi¡edDef
 *
hf
;

21421 
hf
 = 
	`fšd_hoi¡ed_def
(
fd
, 
Çme
);

21422 ià(
hf
 && 
	`is_chd_scİe
(
ùx
, 
fd
, hf->
scİe_Ëv–
,

21423 
fd
->
scİe_Ëv–
)) {

21424  
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of global identifier");

21428 ià(
fd
->
is_ev®
 &&

21429 (
fd
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_GLOBAL
 ||

21430 
fd
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
) &&

21431 
fd
->
scİe_Ëv–
 == 1) {

21432 
JSHoi¡edDef
 *
hf
;

21433 
hf
 = 
	`add_hoi¡ed_def
(
s
->
ùx
, 
fd
, -1, 
Çme
, -1, 
TRUE
);

21434 ià(!
hf
)

21436 
hf
->
is_cÚ¡
 = (
v¬_def_ty³
 =ğ
JS_VAR_DEF_CONST
);

21437 
idx
 = 
GLOBAL_VAR_OFFSET
;

21439 
JSV¬KšdEnum
 
v¬_kšd
;

21440 ià(
v¬_def_ty³
 =ğ
JS_VAR_DEF_FUNCTION_DECL
)

21441 
v¬_kšd
 = 
JS_VAR_FUNCTION_DECL
;

21442 ià(
v¬_def_ty³
 =ğ
JS_VAR_DEF_NEW_FUNCTION_DECL
)

21443 
v¬_kšd
 = 
JS_VAR_NEW_FUNCTION_DECL
;

21445 
v¬_kšd
 = 
JS_VAR_NORMAL
;

21446 
idx
 = 
	`add_scİe_v¬
(
ùx
, 
fd
, 
Çme
, 
v¬_kšd
);

21447 ià(
idx
 >= 0) {

21448 
vd
 = &
fd
->
v¬s
[
idx
];

21449 
vd
->
is_Ëxiÿl
 = 1;

21450 
vd
->
is_cÚ¡
 = (
v¬_def_ty³
 =ğ
JS_VAR_DEF_CONST
);

21455 
JS_VAR_DEF_CATCH
:

21456 
idx
 = 
	`add_scİe_v¬
(
ùx
, 
fd
, 
Çme
, 
JS_VAR_CATCH
);

21459 
JS_VAR_DEF_VAR
:

21460 ià(
	`fšd_Ëxiÿl_deş
(
ùx
, 
fd
, 
Çme
, fd->
scİe_fœ¡
,

21461 
FALSE
) >= 0) {

21462 
šv®id_Ëxiÿl_»defš™iÚ
:

21464  
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of†exical identifier");

21466 ià(
fd
->
is_glob®_v¬
) {

21467 
JSHoi¡edDef
 *
hf
;

21468 
hf
 = 
	`fšd_hoi¡ed_def
(
fd
, 
Çme
);

21469 ià(
hf
 && hf->
is_Ëxiÿl
 && hf->
scİe_Ëv–
 =ğ
fd
->scope_level &&

21470 
fd
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
) {

21471 
šv®id_Ëxiÿl_»defš™iÚ
;

21473 
hf
 = 
	`add_hoi¡ed_def
(
s
->
ùx
, 
fd
, -1, 
Çme
, -1, 
FALSE
);

21474 ià(!
hf
)

21476 
idx
 = 
GLOBAL_VAR_OFFSET
;

21479 
idx
 = 
	`fšd_v¬
(
ùx
, 
fd
, 
Çme
);

21480 ià(
idx
 >= 0)

21482 
idx
 = 
	`add_v¬
(
ùx
, 
fd
, 
Çme
);

21483 ià(
idx
 >= 0) {

21484 ià(
Çme
 =ğ
JS_ATOM_¬gum’ts
 && 
fd
->
has_¬gum’ts_bšdšg
)

21485 
fd
->
¬gum’ts_v¬_idx
 = 
idx
;

21486 
fd
->
v¬s
[
idx
].
func_poŞ_Ü_scİe_idx
 = fd->
scİe_Ëv–
;

21491 
	`abÜt
();

21493  
idx
;

21494 
	}
}

21497 
	$add_´iv©e_şass_f›ld
(
JSP¬£S‹
 *
s
, 
JSFunùiÚDef
 *
fd
,

21498 
JSAtom
 
Çme
, 
JSV¬KšdEnum
 
v¬_kšd
)

21500 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

21501 
JSV¬Def
 *
vd
;

21502 
idx
;

21504 
idx
 = 
	`add_scİe_v¬
(
ùx
, 
fd
, 
Çme
, 
v¬_kšd
);

21505 ià(
idx
 < 0)

21506  
idx
;

21507 
vd
 = &
fd
->
v¬s
[
idx
];

21508 
vd
->
is_Ëxiÿl
 = 1;

21509 
vd
->
is_cÚ¡
 = 1;

21510  
idx
;

21511 
	}
}

21513 
__exû±iÚ
 
js_·r£_ex´
(
JSP¬£S‹
 *
s
);

21514 
__exû±iÚ
 
js_·r£_funùiÚ_deş
(
JSP¬£S‹
 *
s
,

21515 
JSP¬£FunùiÚEnum
 
func_ty³
,

21516 
JSFunùiÚKšdEnum
 
func_kšd
,

21517 
JSAtom
 
func_Çme
, cÚ¡ 
ušt8_t
 *
±r
,

21518 
¡¬t_lše
);

21519 
JSFunùiÚDef
 *
js_·r£_funùiÚ_şass_f›lds_š™
(
JSP¬£S‹
 *
s
);

21520 
__exû±iÚ
 
js_·r£_funùiÚ_deş2
(
JSP¬£S‹
 *
s
,

21521 
JSP¬£FunùiÚEnum
 
func_ty³
,

21522 
JSFunùiÚKšdEnum
 
func_kšd
,

21523 
JSAtom
 
func_Çme
,

21524 cÚ¡ 
ušt8_t
 *
±r
,

21525 
funùiÚ_lše_num
,

21526 
JSP¬£ExpÜtEnum
 
expÜt_æag
,

21527 
JSFunùiÚDef
 **
pfd
);

21528 
__exû±iÚ
 
js_·r£_assign_ex´
(
JSP¬£S‹
 *
s
, 
š_acû±ed
);

21529 
__exû±iÚ
 
js_·r£_uÇry
(
JSP¬£S‹
 *
s
, 
expÚ’tŸtiÚ_æag
);

21530 
push_b»ak_’Œy
(
JSFunùiÚDef
 *
fd
, 
BlockEnv
 *
be
,

21531 
JSAtom
 
Ïb–_Çme
,

21532 
Ïb–_b»ak
, 
Ïb–_cÚt
,

21533 
drİ_couÁ
);

21534 
pİ_b»ak_’Œy
(
JSFunùiÚDef
 *
fd
);

21535 
JSExpÜtEÁry
 *
add_expÜt_’Œy
(
JSP¬£S‹
 *
s
, 
JSModuËDef
 *
m
,

21536 
JSAtom
 
loÿl_Çme
, JSAtom 
expÜt_Çme
,

21537 
JSExpÜtTy³Enum
 
expÜt_ty³
);

21540 
	$£®_‹m¶©e_obj
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

21542 
JSObjeù
 *
p
;

21543 
JSSh­ePrİ”ty
 *
´s
;

21545 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

21546 
´s
 = 
	`fšd_own_´İ”ty1
(
p
, 
JS_ATOM_Ëngth
);

21547 ià(
´s
) {

21548 ià(
	`js_upd©e_´İ”ty_æags
(
ùx
, 
p
, &
´s
,

21549 
´s
->
æags
 & ~(
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
)))

21552 
p
->
ex‹nsibË
 = 
FALSE
;

21554 
	}
}

21556 
__exû±iÚ
 
	$js_·r£_‹m¶©e
(
JSP¬£S‹
 *
s
, 
ÿÎ
, *
¬gc
)

21558 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

21559 
JSV®ue
 
¿w_¬¿y
, 
‹m¶©e_objeù
;

21560 
JSTok’
 
cooked
;

21561 
d•th
, 
»t
;

21563 
¿w_¬¿y
 = 
JS_UNDEFINED
;

21564 
‹m¶©e_objeù
 = 
JS_UNDEFINED
;

21565 ià(
ÿÎ
) {

21568 
‹m¶©e_objeù
 = 
	`JS_NewA¼ay
(
ùx
);

21569 ià(
	`JS_IsExû±iÚ
(
‹m¶©e_objeù
))

21572 
»t
 = 
	`em™_push_cÚ¡
(
s
, 
‹m¶©e_objeù
, 0);

21573 
	`JS_F»eV®ue
(
ùx
, 
‹m¶©e_objeù
);

21574 ià(
»t
)

21576 
¿w_¬¿y
 = 
	`JS_NewA¼ay
(
ùx
);

21577 ià(
	`JS_IsExû±iÚ
(
¿w_¬¿y
))

21579 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
‹m¶©e_objeù
, 
JS_ATOM_¿w
,

21580 
¿w_¬¿y
, 
JS_PROP_THROW
) < 0) {

21585 
d•th
 = 0;

21586 
s
->
tok’
.
v®
 =ğ
TOK_TEMPLATE
) {

21587 cÚ¡ 
ušt8_t
 *
p
 = 
s
->
tok’
.
±r
 + 1;

21588 
cooked
 = 
s
->
tok’
;

21589 ià(
ÿÎ
) {

21590 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
¿w_¬¿y
, 
d•th
,

21591 
	`JS_DupV®ue
(
ùx
, 
s
->
tok’
.
u
.
¡r
.str),

21592 
JS_PROP_ENUMERABLE
 | 
JS_PROP_THROW
) < 0) {

21598 ià(
	`js_·r£_¡ršg
(
s
, '`', 
FALSE
, 
p
, &
cooked
, &p)) {

21599 
cooked
.
u
.
¡r
.¡¸ğ
JS_UNDEFINED
;

21601 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
‹m¶©e_objeù
, 
d•th
,

21602 
cooked
.
u
.
¡r
.str,

21603 
JS_PROP_ENUMERABLE
 | 
JS_PROP_THROW
) < 0) {

21607 
JSSŒšg
 *
¡r
;

21611 
	`JS_F»eV®ue
(
ùx
, 
s
->
tok’
.
u
.
¡r
.str);

21612 
s
->
tok’
.
u
.
¡r
.¡¸ğ
JS_UNDEFINED
;

21613 ià(
	`js_·r£_¡ršg
(
s
, '`', 
TRUE
, 
p
, &
cooked
, &p))

21615 
¡r
 = 
	`JS_VALUE_GET_STRING
(
cooked
.
u
.str.str);

21616 ià(
¡r
->
Ën
 !ğ0 || 
d•th
 == 0) {

21617 
»t
 = 
	`em™_push_cÚ¡
(
s
, 
cooked
.
u
.
¡r
.str, 1);

21618 
	`JS_F»eV®ue
(
s
->
ùx
, 
cooked
.
u
.
¡r
.str);

21619 ià(
»t
)

21621 ià(
d•th
 == 0) {

21622 ià(
s
->
tok’
.
u
.
¡r
.
£p
 == '`')

21623 
dÚe1
;

21624 
	`em™_İ
(
s
, 
OP_g‘_f›ld2
);

21625 
	`em™_©om
(
s
, 
JS_ATOM_cÚÿt
);

21627 
d•th
++;

21629 
	`JS_F»eV®ue
(
s
->
ùx
, 
cooked
.
u
.
¡r
.str);

21632 ià(
s
->
tok’
.
u
.
¡r
.
£p
 == '`')

21633 
dÚe
;

21634 ià(
	`Ãxt_tok’
(
s
))

21636 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

21638 
d•th
++;

21639 ià(
s
->
tok’
.
v®
 != '}') {

21640  
	`js_·r£_”rÜ
(
s
, "expected '}'‡fteremplateƒxpression");

21643 
	`ä“_tok’
(
s
, &s->
tok’
);

21645 
s
->
gÙ_lf
 = 
FALSE
;

21646 
s
->
Ï¡_lše_num
 = s->
tok’
.
lše_num
;

21647 ià(
	`js_·r£_‹m¶©e_·¹
(
s
, s->
buf_±r
))

21650  
	`js_·r£_ex³ù
(
s
, 
TOK_TEMPLATE
);

21652 
dÚe
:

21653 ià(
ÿÎ
) {

21655 
	`£®_‹m¶©e_obj
(
ùx
, 
¿w_¬¿y
);

21656 
	`£®_‹m¶©e_obj
(
ùx
, 
‹m¶©e_objeù
);

21657 *
¬gc
 = 
d•th
 + 1;

21659 
	`em™_İ
(
s
, 
OP_ÿÎ_m‘hod
);

21660 
	`em™_u16
(
s
, 
d•th
 - 1);

21662 
dÚe1
:

21663  
	`Ãxt_tok’
(
s
);

21664 
	}
}

21667 
	#PROP_TYPE_IDENT
 0

	)

21668 
	#PROP_TYPE_VAR
 1

	)

21669 
	#PROP_TYPE_GET
 2

	)

21670 
	#PROP_TYPE_SET
 3

	)

21671 
	#PROP_TYPE_STAR
 4

	)

21672 
	#PROP_TYPE_ASYNC
 5

	)

21673 
	#PROP_TYPE_ASYNC_STAR
 6

	)

21675 
	#PROP_TYPE_PRIVATE
 (1 << 4)

	)

21677 
BOOL
 
	$tok’_is_id’t
(
tok
)

21680  (
tok
 =ğ
TOK_IDENT
 ||

21681 (
tok
 >ğ
TOK_FIRST_KEYWORD
 &&

21682 
tok
 <ğ
TOK_LAST_KEYWORD
));

21683 
	}
}

21686 
__exû±iÚ
 
	$js_·r£_´İ”ty_Çme
(
JSP¬£S‹
 *
s
,

21687 
JSAtom
 *
²ame
,

21688 
BOOL
 
®low_m‘hod
, BOOL 
®low_v¬
,

21689 
BOOL
 
®low_´iv©e
)

21691 
is_´iv©e
 = 0;

21692 
BOOL
 
is_nÚ_»£rved_id’t
;

21693 
JSAtom
 
Çme
;

21694 
´İ_ty³
;

21696 
´İ_ty³
 = 
PROP_TYPE_IDENT
;

21697 ià(
®low_m‘hod
) {

21698 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_g‘
)

21699 || 
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_£t
)) {

21701 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

21702 ià(
	`Ãxt_tok’
(
s
))

21703 
ç1
;

21704 ià(
s
->
tok’
.
v®
 == ':' || s->token.val == ',' ||

21705 
s
->
tok’
.
v®
 == '}' || s->token.val == '(') {

21706 
is_nÚ_»£rved_id’t
 = 
TRUE
;

21707 
id’t_found
;

21709 
´İ_ty³
 = 
PROP_TYPE_GET
 + (
Çme
 =ğ
JS_ATOM_£t
);

21710 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

21711 } ià(
s
->
tok’
.
v®
 == '*') {

21712 ià(
	`Ãxt_tok’
(
s
))

21713 
ç
;

21714 
´İ_ty³
 = 
PROP_TYPE_STAR
;

21715 } ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

21716 
	`³ek_tok’
(
s
, 
TRUE
) != '\n') {

21717 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

21718 ià(
	`Ãxt_tok’
(
s
))

21719 
ç1
;

21720 ià(
s
->
tok’
.
v®
 == ':' || s->token.val == ',' ||

21721 
s
->
tok’
.
v®
 == '}' || s->token.val == '(') {

21722 
is_nÚ_»£rved_id’t
 = 
TRUE
;

21723 
id’t_found
;

21725 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

21726 ià(
s
->
tok’
.
v®
 == '*') {

21727 ià(
	`Ãxt_tok’
(
s
))

21728 
ç
;

21729 
´İ_ty³
 = 
PROP_TYPE_ASYNC_STAR
;

21731 
´İ_ty³
 = 
PROP_TYPE_ASYNC
;

21736 ià(
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

21738 
is_nÚ_»£rved_id’t
 =

21739 (
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
);

21741 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

21742 ià(
	`Ãxt_tok’
(
s
))

21743 
ç1
;

21744 
id’t_found
:

21745 ià(
is_nÚ_»£rved_id’t
 &&

21746 
´İ_ty³
 =ğ
PROP_TYPE_IDENT
 && 
®low_v¬
) {

21747 ià(!(
s
->
tok’
.
v®
 == ':' ||

21748 (
s
->
tok’
.
v®
 =ğ'(' && 
®low_m‘hod
))) {

21749 
´İ_ty³
 = 
PROP_TYPE_VAR
;

21752 } ià(
s
->
tok’
.
v®
 =ğ
TOK_STRING
) {

21753 
Çme
 = 
	`JS_V®ueToAtom
(
s
->
ùx
, s->
tok’
.
u
.
¡r
.str);

21754 ià(
Çme
 =ğ
JS_ATOM_NULL
)

21755 
ç
;

21756 ià(
	`Ãxt_tok’
(
s
))

21757 
ç1
;

21758 } ià(
s
->
tok’
.
v®
 =ğ
TOK_NUMBER
) {

21759 
JSV®ue
 
v®
;

21760 
v®
 = 
s
->
tok’
.
u
.
num
.val;

21761 #ifdeà
CONFIG_BIGNUM


21762 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_BIG_FLOAT
) {

21763 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

21764 
v®
 = 
s
->
ùx
->
¹
->
bigæßt_İs
.

21765 
	`mul_pow10_to_æßt64
(
s
->
ùx
, &
p
->
num
,

21766 
s
->
tok’
.
u
.
num
.
expÚ’t
);

21767 ià(
	`JS_IsExû±iÚ
(
v®
))

21768 
ç
;

21769 
Çme
 = 
	`JS_V®ueToAtom
(
s
->
ùx
, 
v®
);

21770 
	`JS_F»eV®ue
(
s
->
ùx
, 
v®
);

21774 
Çme
 = 
	`JS_V®ueToAtom
(
s
->
ùx
, 
v®
);

21776 ià(
Çme
 =ğ
JS_ATOM_NULL
)

21777 
ç
;

21778 ià(
	`Ãxt_tok’
(
s
))

21779 
ç1
;

21780 } ià(
s
->
tok’
.
v®
 == '[') {

21781 ià(
	`Ãxt_tok’
(
s
))

21782 
ç
;

21783 ià(
	`js_·r£_ex´
(
s
))

21784 
ç
;

21785 ià(
	`js_·r£_ex³ù
(
s
, ']'))

21786 
ç
;

21787 
Çme
 = 
JS_ATOM_NULL
;

21788 } ià(
s
->
tok’
.
v®
 =ğ
TOK_PRIVATE_NAME
 && 
®low_´iv©e
) {

21789 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

21790 ià(
	`Ãxt_tok’
(
s
))

21791 
ç1
;

21792 
is_´iv©e
 = 
PROP_TYPE_PRIVATE
;

21794 
šv®id_´İ
;

21796 ià(
´İ_ty³
 !ğ
PROP_TYPE_IDENT
 &&…rİ_ty³ !ğ
PROP_TYPE_VAR
 &&

21797 
s
->
tok’
.
v®
 != '(') {

21798 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

21799 
šv®id_´İ
:

21800 
	`js_·r£_”rÜ
(
s
, "invalid…roperty‚ame");

21801 
ç
;

21803 *
²ame
 = 
Çme
;

21804  
´İ_ty³
 | 
is_´iv©e
;

21805 
ç1
:

21806 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

21807 
ç
:

21808 *
²ame
 = 
JS_ATOM_NULL
;

21810 
	}
}

21812 
	sJSP¬£Pos
 {

21813 
	mÏ¡_lše_num
;

21814 
	mlše_num
;

21815 
BOOL
 
	mgÙ_lf
;

21816 cÚ¡ 
ušt8_t
 *
	m±r
;

21817 } 
	tJSP¬£Pos
;

21819 
	$js_·r£_g‘_pos
(
JSP¬£S‹
 *
s
, 
JSP¬£Pos
 *
¥
)

21821 
¥
->
Ï¡_lše_num
 = 
s
->last_line_num;

21822 
¥
->
lše_num
 = 
s
->
tok’
.line_num;

21823 
¥
->
±r
 = 
s
->
tok’
.ptr;

21824 
¥
->
gÙ_lf
 = 
s
->got_lf;

21826 
	}
}

21828 
__exû±iÚ
 
	$js_·r£_£ek_tok’
(
JSP¬£S‹
 *
s
, cÚ¡ 
JSP¬£Pos
 *
¥
)

21830 
s
->
tok’
.
lše_num
 = 
¥
->
Ï¡_lše_num
;

21831 
s
->
lše_num
 = 
¥
->line_num;

21832 
s
->
buf_±r
 = 
¥
->
±r
;

21833 
s
->
gÙ_lf
 = 
¥
->got_lf;

21834  
	`Ãxt_tok’
(
s
);

21835 
	}
}

21838 
BOOL
 
	$is_»gexp_®lowed
(
tok
)

21840 
tok
) {

21841 
TOK_NUMBER
:

21842 
TOK_STRING
:

21843 
TOK_REGEXP
:

21844 
TOK_DEC
:

21845 
TOK_INC
:

21846 
TOK_NULL
:

21847 
TOK_FALSE
:

21848 
TOK_TRUE
:

21849 
TOK_THIS
:

21853 
TOK_IDENT
:

21854  
FALSE
;

21856  
TRUE
;

21858 
	}
}

21860 
	#SKIP_HAS_SEMI
 (1 << 0)

	)

21861 
	#SKIP_HAS_ELLIPSIS
 (1 << 1)

	)

21866 
	$js_·r£_sk_·»ns_tok’
(
JSP¬£S‹
 *
s
, *
pb™s
, 
BOOL
 
no_lše_‹rmš©Ü
)

21868 
¡©e
[256];

21869 
size_t
 
Ëv–
 = 0;

21870 
JSP¬£Pos
 
pos
;

21871 
Ï¡_tok
, 
tok
 = 
TOK_EOF
;

21872 
tok_Ën
, 
b™s
 = 0;

21875 
¡©e
[
Ëv–
++] = 0;

21877 
	`js_·r£_g‘_pos
(
s
, &
pos
);

21878 
Ï¡_tok
 = 0;

21880 
s
->
tok’
.
v®
) {

21884 ià(
Ëv–
 >ğ(
¡©e
))

21885 
dÚe
;

21886 
¡©e
[
Ëv–
++] = 
s
->
tok’
.
v®
;

21889 ià(
¡©e
[--
Ëv–
] != '(')

21890 
dÚe
;

21893 ià(
¡©e
[--
Ëv–
] != '[')

21894 
dÚe
;

21897 ià(
¡©e
[--
Ëv–
] != '{')

21898 
dÚe
;

21900 
TOK_EOF
:

21901 
dÚe
;

21903 ià(
Ëv–
 == 2) {

21904 
b™s
 |ğ
SKIP_HAS_SEMI
;

21907 
TOK_ELLIPSIS
:

21908 ià(
Ëv–
 == 2) {

21909 
b™s
 |ğ
SKIP_HAS_ELLIPSIS
;

21913 
TOK_DIV_ASSIGN
:

21914 
tok_Ën
 = 2;

21915 
·r£_»gexp
;

21917 
tok_Ën
 = 1;

21918 
·r£_»gexp
:

21919 ià(
	`is_»gexp_®lowed
(
Ï¡_tok
)) {

21920 
s
->
buf_±r
 -ğ
tok_Ën
;

21921 ià(
	`js_·r£_»gexp
(
s
)) {

21923 
dÚe
;

21929 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 &&

21930 (
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_of
) ||

21931 
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_y›ld
))) {

21932 
Ï¡_tok
 = 
TOK_OF
;

21934 
Ï¡_tok
 = 
s
->
tok’
.
v®
;

21936 ià(
	`Ãxt_tok’
(
s
)) {

21940 ià(
Ëv–
 <= 1) {

21941 
tok
 = 
s
->
tok’
.
v®
;

21942 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_of
))

21943 
tok
 = 
TOK_OF
;

21944 ià(
no_lše_‹rmš©Ü
 && 
s
->
Ï¡_lše_num
 !ğs->
tok’
.
lše_num
)

21945 
tok
 = '\n';

21949 
dÚe
:

21950 ià(
pb™s
) {

21951 *
pb™s
 = 
b™s
;

21953 ià(
	`js_·r£_£ek_tok’
(
s
, &
pos
))

21955  
tok
;

21956 
	}
}

21958 
	$£t_objeù_Çme
(
JSP¬£S‹
 *
s
, 
JSAtom
 
Çme
)

21960 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

21961 
İcode
;

21963 
İcode
 = 
	`g‘_´ev_İcode
(
fd
);

21964 ià(
İcode
 =ğ
OP_£t_Çme
) {

21966 
fd
->
by‹_code
.
size
 = fd->
Ï¡_İcode_pos
;

21967 
fd
->
Ï¡_İcode_pos
 = -1;

21968 
	`em™_İ
(
s
, 
OP_£t_Çme
);

21969 
	`em™_©om
(
s
, 
Çme
);

21970 } ià(
İcode
 =ğ
OP_£t_şass_Çme
) {

21971 
defše_şass_pos
;

21972 
JSAtom
 
©om
;

21973 
defše_şass_pos
 = 
fd
->
Ï¡_İcode_pos
 + 1 -

21974 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

21975 
	`as£¹
(
fd
->
by‹_code
.
buf
[
defše_şass_pos
] =ğ
OP_defše_şass
);

21978 
©om
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + 
defše_şass_pos
 + 1);

21979 
	`JS_F»eAtom
(
s
->
ùx
, 
©om
);

21980 
	`put_u32
(
fd
->
by‹_code
.
buf
 + 
defše_şass_pos
 + 1,

21981 
	`JS_DupAtom
(
s
->
ùx
, 
Çme
));

21982 
fd
->
Ï¡_İcode_pos
 = -1;

21984 
	}
}

21986 
	$£t_objeù_Çme_compu‹d
(
JSP¬£S‹
 *
s
)

21988 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

21989 
İcode
;

21991 
İcode
 = 
	`g‘_´ev_İcode
(
fd
);

21992 ià(
İcode
 =ğ
OP_£t_Çme
) {

21994 
fd
->
by‹_code
.
size
 = fd->
Ï¡_İcode_pos
;

21995 
fd
->
Ï¡_İcode_pos
 = -1;

21996 
	`em™_İ
(
s
, 
OP_£t_Çme_compu‹d
);

21997 } ià(
İcode
 =ğ
OP_£t_şass_Çme
) {

21998 
defše_şass_pos
;

21999 
defše_şass_pos
 = 
fd
->
Ï¡_İcode_pos
 + 1 -

22000 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

22001 
	`as£¹
(
fd
->
by‹_code
.
buf
[
defše_şass_pos
] =ğ
OP_defše_şass
);

22002 
fd
->
by‹_code
.
buf
[
defše_şass_pos
] = 
OP_defše_şass_compu‹d
;

22003 
fd
->
Ï¡_İcode_pos
 = -1;

22005 
	}
}

22007 
__exû±iÚ
 
	$js_·r£_objeù_l™”®
(
JSP¬£S‹
 *
s
)

22009 
JSAtom
 
Çme
 = 
JS_ATOM_NULL
;

22010 cÚ¡ 
ušt8_t
 *
¡¬t_±r
;

22011 
¡¬t_lše
, 
´İ_ty³
;

22012 
BOOL
 
has_´Ùo
;

22014 ià(
	`Ãxt_tok’
(
s
))

22015 
ç
;

22017 
	`em™_İ
(
s
, 
OP_objeù
);

22018 
has_´Ùo
 = 
FALSE
;

22019 
s
->
tok’
.
v®
 != '}') {

22021 
¡¬t_±r
 = 
s
->
tok’
.
±r
;

22022 
¡¬t_lše
 = 
s
->
tok’
.
lše_num
;

22024 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

22025 ià(
	`Ãxt_tok’
(
s
))

22027 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22029 
	`em™_İ
(
s
, 
OP_nuÎ
);

22030 
	`em™_İ
(
s
, 
OP_cİy_d©a_´İ”t›s
);

22031 
	`em™_u8
(
s
, 2 | (1 << 2) | (0 << 5));

22032 
	`em™_İ
(
s
, 
OP_drİ
);

22033 
	`em™_İ
(
s
, 
OP_drİ
);

22034 
Ãxt
;

22037 
´İ_ty³
 = 
	`js_·r£_´İ”ty_Çme
(
s
, &
Çme
, 
TRUE
, TRUE, 
FALSE
);

22038 ià(
´İ_ty³
 < 0)

22039 
ç
;

22041 ià(
´İ_ty³
 =ğ
PROP_TYPE_VAR
) {

22043 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22044 
	`em™_©om
(
s
, 
Çme
);

22045 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22046 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

22047 
	`em™_©om
(
s
, 
Çme
);

22048 } ià(
s
->
tok’
.
v®
 == '(') {

22049 
BOOL
 
is_g‘£t
 = (
´İ_ty³
 =ğ
PROP_TYPE_GET
 ||

22050 
´İ_ty³
 =ğ
PROP_TYPE_SET
);

22051 
JSP¬£FunùiÚEnum
 
func_ty³
;

22052 
JSFunùiÚKšdEnum
 
func_kšd
;

22053 
İ_æags
;

22055 
func_kšd
 = 
JS_FUNC_NORMAL
;

22056 ià(
is_g‘£t
) {

22057 
func_ty³
 = 
JS_PARSE_FUNC_GETTER
 + 
´İ_ty³
 - 
PROP_TYPE_GET
;

22059 
func_ty³
 = 
JS_PARSE_FUNC_METHOD
;

22060 ià(
´İ_ty³
 =ğ
PROP_TYPE_STAR
)

22061 
func_kšd
 = 
JS_FUNC_GENERATOR
;

22062 ià(
´İ_ty³
 =ğ
PROP_TYPE_ASYNC
)

22063 
func_kšd
 = 
JS_FUNC_ASYNC
;

22064 ià(
´İ_ty³
 =ğ
PROP_TYPE_ASYNC_STAR
)

22065 
func_kšd
 = 
JS_FUNC_ASYNC_GENERATOR
;

22067 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
func_ty³
, 
func_kšd
, 
JS_ATOM_NULL
,

22068 
¡¬t_±r
, 
¡¬t_lše
))

22069 
ç
;

22070 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

22071 
	`em™_İ
(
s
, 
OP_defše_m‘hod_compu‹d
);

22073 
	`em™_İ
(
s
, 
OP_defše_m‘hod
);

22074 
	`em™_©om
(
s
, 
Çme
);

22076 ià(
is_g‘£t
) {

22077 
İ_æags
 = 
OP_DEFINE_METHOD_GETTER
 +

22078 
´İ_ty³
 - 
PROP_TYPE_GET
;

22080 
İ_æags
 = 
OP_DEFINE_METHOD_METHOD
;

22082 
	`em™_u8
(
s
, 
İ_æags
 | 
OP_DEFINE_METHOD_ENUMERABLE
);

22084 ià(
	`js_·r£_ex³ù
(
s
, ':'))

22085 
ç
;

22086 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22087 
ç
;

22088 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

22089 
	`£t_objeù_Çme_compu‹d
(
s
);

22090 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

22091 
	`em™_İ
(
s
, 
OP_drİ
);

22092 } ià(
Çme
 =ğ
JS_ATOM___´Ùo__
) {

22093 ià(
has_´Ùo
) {

22094 
	`js_·r£_”rÜ
(
s
, "duplicate __proto__…roperty‚ame");

22095 
ç
;

22097 
	`em™_İ
(
s
, 
OP_£t_´Ùo
);

22098 
has_´Ùo
 = 
TRUE
;

22100 
	`£t_objeù_Çme
(
s
, 
Çme
);

22101 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

22102 
	`em™_©om
(
s
, 
Çme
);

22105 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

22106 
Ãxt
:

22107 
Çme
 = 
JS_ATOM_NULL
;

22108 ià(
s
->
tok’
.
v®
 != ',')

22110 ià(
	`Ãxt_tok’
(
s
))

22111 
ç
;

22113 ià(
	`js_·r£_ex³ù
(
s
, '}'))

22114 
ç
;

22116 
ç
:

22117 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

22119 
	}
}

22121 
__exû±iÚ
 
js_·r£_po¡fix_ex´
(
JSP¬£S‹
 *
s
,

22122 
BOOL
 
acû±_Í¬’
);

22125 
__exû±iÚ
 
	$js_·r£_şass_deçuÉ_ùÜ
(
JSP¬£S‹
 *
s
,

22126 
BOOL
 
has_su³r
,

22127 
JSFunùiÚDef
 **
pfd
)

22129 
JSP¬£Pos
 
pos
;

22130 cÚ¡ *
¡r
;

22131 
»t
, 
lše_num
;

22132 
JSP¬£FunùiÚEnum
 
func_ty³
;

22133 cÚ¡ 
ušt8_t
 *
§ved_buf_’d
;

22135 
	`js_·r£_g‘_pos
(
s
, &
pos
);

22136 ià(
has_su³r
) {

22137 
¡r
 = "(...a){super(...a);}";

22138 
func_ty³
 = 
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
;

22140 
¡r
 = "(){}";

22141 
func_ty³
 = 
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
;

22143 
lše_num
 = 
s
->
tok’
.line_num;

22144 
§ved_buf_’d
 = 
s
->
buf_’d
;

22145 
s
->
buf_±r
 = (
ušt8_t
 *)
¡r
;

22146 
s
->
buf_’d
 = (
ušt8_t
 *)(
¡r
 + 
	`¡¾’
(str));

22147 
»t
 = 
	`Ãxt_tok’
(
s
);

22148 ià(!
»t
) {

22149 
»t
 = 
	`js_·r£_funùiÚ_deş2
(
s
, 
func_ty³
, 
JS_FUNC_NORMAL
,

22150 
JS_ATOM_NULL
, (
ušt8_t
 *)
¡r
,

22151 
lše_num
, 
JS_PARSE_EXPORT_NONE
, 
pfd
);

22153 
s
->
buf_’d
 = 
§ved_buf_’d
;

22154 
»t
 |ğ
	`js_·r£_£ek_tok’
(
s
, &
pos
);

22155  
»t
;

22156 
	}
}

22159 
	$fšd_´iv©e_şass_f›ld
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
,

22160 
JSAtom
 
Çme
, 
scİe_Ëv–
)

22162 
idx
;

22163 
idx
 = 
fd
->
scİes
[
scİe_Ëv–
].
fœ¡
;

22164 
idx
 != -1) {

22165 ià(
fd
->
v¬s
[
idx
].
scİe_Ëv–
 != scope_level)

22167 ià(
fd
->
v¬s
[
idx
].
v¬_Çme
 =ğ
Çme
)

22168  
idx
;

22169 
idx
 = 
fd
->
v¬s
[idx].
scİe_Ãxt
;

22172 
	}
}

22177 
	$em™_şass_f›ld_š™
(
JSP¬£S‹
 *
s
)

22179 
Ïb–_Ãxt
;

22181 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22182 
	`em™_©om
(
s
, 
JS_ATOM_şass_f›lds_š™
);

22183 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22186 
	`em™_İ
(
s
, 
OP_dup
);

22187 
Ïb–_Ãxt
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

22189 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22190 
	`em™_©om
(
s
, 
JS_ATOM_this
);

22191 
	`em™_u16
(
s
, 0);

22193 
	`em™_İ
(
s
, 
OP_sw­
);

22195 
	`em™_İ
(
s
, 
OP_ÿÎ_m‘hod
);

22196 
	`em™_u16
(
s
, 0);

22198 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

22199 
	`em™_İ
(
s
, 
OP_drİ
);

22200 
	}
}

22203 
JSAtom
 
	$g‘_´iv©e_£‰”_Çme
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
)

22205  
	`js_©om_cÚÿt_¡r
(
ùx
, 
Çme
, "<set>");

22206 
	}
}

22209 
JSFunùiÚDef
 *
	mf›lds_š™_fd
;

22210 
	mcompu‹d_f›lds_couÁ
;

22211 
BOOL
 
	mhas_b¿nd
;

22212 
	mb¿nd_push_pos
;

22213 } 
	tCÏssF›ldsDef
;

22215 
__exû±iÚ
 
	$em™_şass_š™_¡¬t
(
JSP¬£S‹
 *
s
,

22216 
CÏssF›ldsDef
 *
cf
)

22218 
Ïb–_add_b¿nd
;

22220 
cf
->
f›lds_š™_fd
 = 
	`js_·r£_funùiÚ_şass_f›lds_š™
(
s
);

22221 ià(!
cf
->
f›lds_š™_fd
)

22224 
s
->
cur_func
 = 
cf
->
f›lds_š™_fd
;

22228 
	`em™_İ
(
s
, 
OP_push_çl£
);

22229 
cf
->
b¿nd_push_pos
 = cf->
f›lds_š™_fd
->
Ï¡_İcode_pos
;

22230 
Ïb–_add_b¿nd
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

22232 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22233 
	`em™_©om
(
s
, 
JS_ATOM_this
);

22234 
	`em™_u16
(
s
, 0);

22236 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22237 
	`em™_©om
(
s
, 
JS_ATOM_home_objeù
);

22238 
	`em™_u16
(
s
, 0);

22240 
	`em™_İ
(
s
, 
OP_add_b¿nd
);

22242 
	`em™_Ïb–
(
s
, 
Ïb–_add_b¿nd
);

22244 
s
->
cur_func
 = s->cur_func->
·»Á
;

22246 
	}
}

22248 
__exû±iÚ
 
	$add_b¿nd
(
JSP¬£S‹
 *
s
, 
CÏssF›ldsDef
 *
cf
)

22250 ià(!
cf
->
has_b¿nd
) {

22252 ià(!
cf
->
f›lds_š™_fd
) {

22253 ià(
	`em™_şass_š™_¡¬t
(
s
, 
cf
))

22257 
cf
->
f›lds_š™_fd
->
by‹_code
.
buf
[cf->
b¿nd_push_pos
] = 
OP_push_Œue
;

22259 
cf
->
has_b¿nd
 = 
TRUE
;

22262 
	}
}

22264 
	$em™_şass_š™_’d
(
JSP¬£S‹
 *
s
, 
CÏssF›ldsDef
 *
cf
)

22266 
ıoŞ_idx
;

22268 
s
->
cur_func
 = 
cf
->
f›lds_š™_fd
;

22269 
	`em™_İ
(
s
, 
OP_»tuº_undef
);

22270 
s
->
cur_func
 = s->cur_func->
·»Á
;

22272 
ıoŞ_idx
 = 
	`ıoŞ_add
(
s
, 
JS_NULL
);

22273 
cf
->
f›lds_š™_fd
->
·»Á_ıoŞ_idx
 = 
ıoŞ_idx
;

22274 
	`em™_İ
(
s
, 
OP_fşosu»
);

22275 
	`em™_u32
(
s
, 
ıoŞ_idx
);

22276 
	`em™_İ
(
s
, 
OP_£t_home_objeù
);

22277 
	}
}

22280 
__exû±iÚ
 
	$js_·r£_şass
(
JSP¬£S‹
 *
s
, 
BOOL
 
is_şass_ex´
,

22281 
JSP¬£ExpÜtEnum
 
expÜt_æag
)

22283 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

22284 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

22285 
JSAtom
 
Çme
 = 
JS_ATOM_NULL
, 
şass_Çme
 = JS_ATOM_NULL, 
şass_Çme1
;

22286 
JSAtom
 
şass_v¬_Çme
 = 
JS_ATOM_NULL
;

22287 
JSFunùiÚDef
 *
m‘hod_fd
, *
ùÜ_fd
;

22288 
§ved_js_mode
, 
şass_Çme_v¬_idx
, 
´İ_ty³
, 
ùÜ_ıoŞ_off£t
;

22289 
şass_æags
 = 0, 
i
, 
defše_şass_off£t
;

22290 
BOOL
 
is_¡©ic
, 
is_´iv©e
;

22291 cÚ¡ 
ušt8_t
 *
şass_¡¬t_±r
 = 
s
->
tok’
.
±r
;

22292 cÚ¡ 
ušt8_t
 *
¡¬t_±r
;

22293 
CÏssF›ldsDef
 
şass_f›lds
[2];

22296 
§ved_js_mode
 = 
fd
->
js_mode
;

22297 
fd
->
js_mode
 |ğ
JS_MODE_STRICT
;

22298 ià(
	`Ãxt_tok’
(
s
))

22299 
ç
;

22300 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

22301 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

22302 
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

22303 
ç
;

22305 
şass_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

22306 ià(
	`Ãxt_tok’
(
s
))

22307 
ç
;

22308 } ià(!
is_şass_ex´
 && 
expÜt_æag
 !ğ
JS_PARSE_EXPORT_DEFAULT
) {

22309 
	`js_·r£_”rÜ
(
s
, "class statement„equires‡‚ame");

22310 
ç
;

22312 ià(!
is_şass_ex´
) {

22313 ià(
şass_Çme
 =ğ
JS_ATOM_NULL
)

22314 
şass_v¬_Çme
 = 
JS_ATOM__deçuÉ_
;

22316 
şass_v¬_Çme
 = 
şass_Çme
;

22317 
şass_v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, class_var_name);

22320 
	`push_scİe
(
s
);

22322 ià(
s
->
tok’
.
v®
 =ğ
TOK_EXTENDS
) {

22323 
şass_æags
 = 
JS_DEFINE_CLASS_HAS_HERITAGE
;

22324 ià(
	`Ãxt_tok’
(
s
))

22325 
ç
;

22327 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
TRUE
))

22328 
ç
;

22330 
	`em™_İ
(
s
, 
OP_undefšed
);

22334 ià(
şass_Çme
 !ğ
JS_ATOM_NULL
) {

22335 
şass_Çme_v¬_idx
 = 
	`defše_v¬
(
s
, 
fd
, 
şass_Çme
, 
JS_VAR_DEF_CONST
);

22336 ià(
şass_Çme_v¬_idx
 < 0)

22337 
ç
;

22340 ià(
	`js_·r£_ex³ù
(
s
, '{'))

22341 
ç
;

22344 
	`push_scİe
(
s
);

22346 
	`em™_İ
(
s
, 
OP_push_cÚ¡
);

22347 
ùÜ_ıoŞ_off£t
 = 
fd
->
by‹_code
.
size
;

22348 
	`em™_u32
(
s
, 0);

22350 ià(
şass_Çme
 =ğ
JS_ATOM_NULL
) {

22351 ià(
şass_v¬_Çme
 !ğ
JS_ATOM_NULL
)

22352 
şass_Çme1
 = 
JS_ATOM_deçuÉ
;

22354 
şass_Çme1
 = 
JS_ATOM_em±y_¡ršg
;

22356 
şass_Çme1
 = 
şass_Çme
;

22359 
	`em™_İ
(
s
, 
OP_defše_şass
);

22360 
	`em™_©om
(
s
, 
şass_Çme1
);

22361 
	`em™_u8
(
s
, 
şass_æags
);

22362 
defše_şass_off£t
 = 
fd
->
Ï¡_İcode_pos
;

22364 
i
 = 0; i < 2; i++) {

22365 
CÏssF›ldsDef
 *
cf
 = &
şass_f›lds
[
i
];

22366 
cf
->
f›lds_š™_fd
 = 
NULL
;

22367 
cf
->
compu‹d_f›lds_couÁ
 = 0;

22368 
cf
->
has_b¿nd
 = 
FALSE
;

22371 
ùÜ_fd
 = 
NULL
;

22372 
s
->
tok’
.
v®
 != '}') {

22373 ià(
s
->
tok’
.
v®
 == ';') {

22374 ià(
	`Ãxt_tok’
(
s
))

22375 
ç
;

22378 
is_¡©ic
 = (
s
->
tok’
.
v®
 =ğ
TOK_STATIC
);

22379 
´İ_ty³
 = -1;

22380 ià(
is_¡©ic
) {

22381 ià(
	`Ãxt_tok’
(
s
))

22382 
ç
;

22384 ià(
s
->
tok’
.
v®
 == ';' || s->token.val == '=') {

22385 
is_¡©ic
 = 
FALSE
;

22386 
Çme
 = 
	`JS_DupAtom
(
ùx
, 
JS_ATOM_¡©ic
);

22387 
´İ_ty³
 = 
PROP_TYPE_IDENT
;

22390 ià(
is_¡©ic
)

22391 
	`em™_İ
(
s
, 
OP_sw­
);

22392 
¡¬t_±r
 = 
s
->
tok’
.
±r
;

22393 ià(
´İ_ty³
 < 0) {

22394 
´İ_ty³
 = 
	`js_·r£_´İ”ty_Çme
(
s
, &
Çme
, 
TRUE
, 
FALSE
, TRUE);

22395 ià(
´İ_ty³
 < 0)

22396 
ç
;

22398 
is_´iv©e
 = 
´İ_ty³
 & 
PROP_TYPE_PRIVATE
;

22399 
´İ_ty³
 &ğ~
PROP_TYPE_PRIVATE
;

22401 ià((
Çme
 =ğ
JS_ATOM_cÚ¡ruùÜ
 && !
is_¡©ic
 &&

22402 
´İ_ty³
 !ğ
PROP_TYPE_IDENT
) ||

22403 (
Çme
 =ğ
JS_ATOM_´ÙÙy³
 && 
is_¡©ic
) ||

22404 
Çme
 =ğ
JS_ATOM_hash_cÚ¡ruùÜ
) {

22405 
	`js_·r£_”rÜ
(
s
, "invalid method‚ame");

22406 
ç
;

22408 ià(
´İ_ty³
 =ğ
PROP_TYPE_GET
 ||…rİ_ty³ =ğ
PROP_TYPE_SET
) {

22409 
BOOL
 
is_£t
 = 
´İ_ty³
 - 
PROP_TYPE_GET
;

22410 
JSFunùiÚDef
 *
m‘hod_fd
;

22412 ià(
is_´iv©e
) {

22413 
idx
, 
v¬_kšd
;

22414 
idx
 = 
	`fšd_´iv©e_şass_f›ld
(
ùx
, 
fd
, 
Çme
, fd->
scİe_Ëv–
);

22415 ià(
idx
 >= 0) {

22416 
v¬_kšd
 = 
fd
->
v¬s
[
idx
].var_kind;

22417 ià(
v¬_kšd
 =ğ
JS_VAR_PRIVATE_FIELD
 ||

22418 
v¬_kšd
 =ğ
JS_VAR_PRIVATE_METHOD
 ||

22419 
v¬_kšd
 =ğ
JS_VAR_PRIVATE_GETTER_SETTER
 ||

22420 
v¬_kšd
 =ğ(
JS_VAR_PRIVATE_GETTER
 + 
is_£t
)) {

22421 
´iv©e_f›ld_®»ady_defšed
;

22423 
fd
->
v¬s
[
idx
].
v¬_kšd
 = 
JS_VAR_PRIVATE_GETTER_SETTER
;

22425 ià(
	`add_´iv©e_şass_f›ld
(
s
, 
fd
, 
Çme
,

22426 
JS_VAR_PRIVATE_GETTER
 + 
is_£t
) < 0)

22427 
ç
;

22429 ià(
	`add_b¿nd
(
s
, &
şass_f›lds
[
is_¡©ic
]) < 0)

22430 
ç
;

22433 ià(
	`js_·r£_funùiÚ_deş2
(
s
, 
JS_PARSE_FUNC_GETTER
 + 
is_£t
,

22434 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

22435 
¡¬t_±r
, 
s
->
tok’
.
lše_num
,

22436 
JS_PARSE_EXPORT_NONE
, &
m‘hod_fd
))

22437 
ç
;

22438 ià(
is_´iv©e
) {

22439 
m‘hod_fd
->
Ãed_home_objeù
 = 
TRUE
;

22440 
	`em™_İ
(
s
, 
OP_£t_home_objeù
);

22442 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22443 ià(
is_£t
) {

22444 
JSAtom
 
£‰”_Çme
;

22445 
»t
;

22447 
£‰”_Çme
 = 
	`g‘_´iv©e_£‰”_Çme
(
ùx
, 
Çme
);

22448 ià(
£‰”_Çme
 =ğ
JS_ATOM_NULL
)

22449 
ç
;

22450 
	`em™_©om
(
s
, 
£‰”_Çme
);

22451 
»t
 = 
	`add_´iv©e_şass_f›ld
(
s
, 
fd
, 
£‰”_Çme
,

22452 
JS_VAR_PRIVATE_SETTER
);

22453 
	`JS_F»eAtom
(
ùx
, 
£‰”_Çme
);

22454 ià(
»t
 < 0)

22455 
ç
;

22457 
	`em™_©om
(
s
, 
Çme
);

22459 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22461 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

22462 
	`em™_İ
(
s
, 
OP_defše_m‘hod_compu‹d
);

22464 
	`em™_İ
(
s
, 
OP_defše_m‘hod
);

22465 
	`em™_©om
(
s
, 
Çme
);

22467 
	`em™_u8
(
s
, 
OP_DEFINE_METHOD_GETTER
 + 
is_£t
);

22469 } ià(
´İ_ty³
 =ğ
PROP_TYPE_IDENT
 && 
s
->
tok’
.
v®
 != '(') {

22470 
CÏssF›ldsDef
 *
cf
 = &
şass_f›lds
[
is_¡©ic
];

22471 
JSAtom
 
f›ld_v¬_Çme
 = 
JS_ATOM_NULL
;

22476 ià(
Çme
 =ğ
JS_ATOM_cÚ¡ruùÜ
 ||‚am=ğ
JS_ATOM_´ÙÙy³
) {

22477 
	`js_·r£_”rÜ
(
s
, "invalid field‚ame");

22478 
ç
;

22481 ià(
is_´iv©e
) {

22482 ià(
	`fšd_´iv©e_şass_f›ld
(
ùx
, 
fd
, 
Çme
,

22483 
fd
->
scİe_Ëv–
) >= 0) {

22484 
´iv©e_f›ld_®»ady_defšed
;

22486 ià(
	`add_´iv©e_şass_f›ld
(
s
, 
fd
, 
Çme
,

22487 
JS_VAR_PRIVATE_FIELD
) < 0)

22488 
ç
;

22489 
	`em™_İ
(
s
, 
OP_´iv©e_symbŞ
);

22490 
	`em™_©om
(
s
, 
Çme
);

22491 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22492 
	`em™_©om
(
s
, 
Çme
);

22493 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22496 ià(!
cf
->
f›lds_š™_fd
) {

22497 ià(
	`em™_şass_š™_¡¬t
(
s
, 
cf
))

22498 
ç
;

22500 ià(
Çme
 =ğ
JS_ATOM_NULL
 ) {

22502 
f›ld_v¬_Çme
 = 
	`js_©om_cÚÿt_num
(
ùx
, 
JS_ATOM_compu‹d_f›ld
 + 
is_¡©ic
, 
cf
->
compu‹d_f›lds_couÁ
);

22503 ià(
f›ld_v¬_Çme
 =ğ
JS_ATOM_NULL
)

22504 
ç
;

22505 ià(
	`defše_v¬
(
s
, 
fd
, 
f›ld_v¬_Çme
, 
JS_VAR_DEF_CONST
) < 0) {

22506 
	`JS_F»eAtom
(
ùx
, 
f›ld_v¬_Çme
);

22507 
ç
;

22509 
	`em™_İ
(
s
, 
OP_to_´İkey
);

22510 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22511 
	`em™_©om
(
s
, 
f›ld_v¬_Çme
);

22512 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22514 
s
->
cur_func
 = 
cf
->
f›lds_š™_fd
;

22515 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22516 
	`em™_©om
(
s
, 
JS_ATOM_this
);

22517 
	`em™_u16
(
s
, 0);

22519 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

22520 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22521 
	`em™_©om
(
s
, 
f›ld_v¬_Çme
);

22522 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22523 
cf
->
compu‹d_f›lds_couÁ
++;

22524 
	`JS_F»eAtom
(
ùx
, 
f›ld_v¬_Çme
);

22525 } ià(
is_´iv©e
) {

22526 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

22527 
	`em™_©om
(
s
, 
Çme
);

22528 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22531 ià(
s
->
tok’
.
v®
 == '=') {

22532 ià(
	`Ãxt_tok’
(
s
))

22533 
ç
;

22534 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22535 
ç
;

22537 
	`em™_İ
(
s
, 
OP_undefšed
);

22539 ià(
is_´iv©e
) {

22540 
	`£t_objeù_Çme_compu‹d
(
s
);

22541 
	`em™_İ
(
s
, 
OP_defše_´iv©e_f›ld
);

22542 } ià(
Çme
 =ğ
JS_ATOM_NULL
) {

22543 
	`£t_objeù_Çme_compu‹d
(
s
);

22544 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

22545 
	`em™_İ
(
s
, 
OP_drİ
);

22547 
	`£t_objeù_Çme
(
s
, 
Çme
);

22548 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

22549 
	`em™_©om
(
s
, 
Çme
);

22551 
s
->
cur_func
 = s->cur_func->
·»Á
;

22552 ià(
	`js_·r£_ex³ù_£mi
(
s
))

22553 
ç
;

22555 
JSP¬£FunùiÚEnum
 
func_ty³
;

22556 
JSFunùiÚKšdEnum
 
func_kšd
;

22558 
func_ty³
 = 
JS_PARSE_FUNC_METHOD
;

22559 
func_kšd
 = 
JS_FUNC_NORMAL
;

22560 ià(
´İ_ty³
 =ğ
PROP_TYPE_STAR
) {

22561 
func_kšd
 = 
JS_FUNC_GENERATOR
;

22562 } ià(
´İ_ty³
 =ğ
PROP_TYPE_ASYNC
) {

22563 
func_kšd
 = 
JS_FUNC_ASYNC
;

22564 } ià(
´İ_ty³
 =ğ
PROP_TYPE_ASYNC_STAR
) {

22565 
func_kšd
 = 
JS_FUNC_ASYNC_GENERATOR
;

22566 } ià(
Çme
 =ğ
JS_ATOM_cÚ¡ruùÜ
 && !
is_¡©ic
) {

22567 ià(
ùÜ_fd
) {

22568 
	`js_·r£_”rÜ
(
s
, "property constructor‡ppears morehan once");

22569 
ç
;

22571 ià(
şass_æags
 & 
JS_DEFINE_CLASS_HAS_HERITAGE
)

22572 
func_ty³
 = 
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
;

22574 
func_ty³
 = 
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
;

22576 ià(
is_´iv©e
) {

22577 ià(
	`add_b¿nd
(
s
, &
şass_f›lds
[
is_¡©ic
]) < 0)

22578 
ç
;

22580 ià(
	`js_·r£_funùiÚ_deş2
(
s
, 
func_ty³
, 
func_kšd
, 
JS_ATOM_NULL
, 
¡¬t_±r
, s->
tok’
.
lše_num
, 
JS_PARSE_EXPORT_NONE
, &
m‘hod_fd
))

22581 
ç
;

22582 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
 ||

22583 
func_ty³
 =ğ
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
) {

22584 
ùÜ_fd
 = 
m‘hod_fd
;

22585 } ià(
is_´iv©e
) {

22586 
m‘hod_fd
->
Ãed_home_objeù
 = 
TRUE
;

22587 ià(
	`fšd_´iv©e_şass_f›ld
(
ùx
, 
fd
, 
Çme
,

22588 
fd
->
scİe_Ëv–
) >= 0) {

22589 
´iv©e_f›ld_®»ady_defšed
:

22590 
	`js_·r£_”rÜ
(
s
, "private class field is‡lready defined");

22591 
ç
;

22593 ià(
	`add_´iv©e_şass_f›ld
(
s
, 
fd
, 
Çme
,

22594 
JS_VAR_PRIVATE_METHOD
) < 0)

22595 
ç
;

22596 
	`em™_İ
(
s
, 
OP_£t_home_objeù
);

22597 
	`em™_İ
(
s
, 
OP_£t_Çme
);

22598 
	`em™_©om
(
s
, 
Çme
);

22599 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22600 
	`em™_©om
(
s
, 
Çme
);

22601 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22603 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

22604 
	`em™_İ
(
s
, 
OP_defše_m‘hod_compu‹d
);

22606 
	`em™_İ
(
s
, 
OP_defše_m‘hod
);

22607 
	`em™_©om
(
s
, 
Çme
);

22609 
	`em™_u8
(
s
, 
OP_DEFINE_METHOD_METHOD
);

22612 ià(
is_¡©ic
)

22613 
	`em™_İ
(
s
, 
OP_sw­
);

22614 
	`JS_F»eAtom
(
ùx
, 
Çme
);

22615 
Çme
 = 
JS_ATOM_NULL
;

22618 ià(
s
->
tok’
.
v®
 != '}') {

22619 
	`js_·r£_”rÜ
(
s
, "expecting '%c'", '}');

22620 
ç
;

22623 ià(!
ùÜ_fd
) {

22624 ià(
	`js_·r£_şass_deçuÉ_ùÜ
(
s
, 
şass_æags
 & 
JS_DEFINE_CLASS_HAS_HERITAGE
, &
ùÜ_fd
))

22625 
ç
;

22628 
	`put_u32
(
fd
->
by‹_code
.
buf
 + 
ùÜ_ıoŞ_off£t
, 
ùÜ_fd
->
·»Á_ıoŞ_idx
);

22631 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
)) {

22632 
	`js_ä“
(
ùx
, 
ùÜ_fd
->
sourû
);

22633 
ùÜ_fd
->
sourû_Ën
 = 
s
->
buf_±r
 - 
şass_¡¬t_±r
;

22634 
ùÜ_fd
->
sourû
 = 
	`js_¡ºdup
(
ùx
, (cÚ¡ *)
şass_¡¬t_±r
,

22635 
ùÜ_fd
->
sourû_Ën
);

22636 ià(!
ùÜ_fd
->
sourû
)

22637 
ç
;

22641 ià(
	`Ãxt_tok’
(
s
))

22642 
ç
;

22647 
CÏssF›ldsDef
 *
cf
 = &
şass_f›lds
[0];

22648 
v¬_idx
;

22650 
v¬_idx
 = 
	`defše_v¬
(
s
, 
fd
, 
JS_ATOM_şass_f›lds_š™
,

22651 
JS_VAR_DEF_CONST
);

22652 ià(
v¬_idx
 < 0)

22653 
ç
;

22654 ià(
cf
->
f›lds_š™_fd
) {

22655 
	`em™_şass_š™_’d
(
s
, 
cf
);

22657 
	`em™_İ
(
s
, 
OP_undefšed
);

22659 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22660 
	`em™_©om
(
s
, 
JS_ATOM_şass_f›lds_š™
);

22661 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

22665 
	`em™_İ
(
s
, 
OP_drİ
);

22668 ià(
şass_f›lds
[1].
f›lds_š™_fd
 !ğ
NULL
) {

22669 
CÏssF›ldsDef
 *
cf
 = &
şass_f›lds
[1];

22670 
	`em™_İ
(
s
, 
OP_dup
);

22671 
	`em™_şass_š™_’d
(
s
, 
cf
);

22672 
	`em™_İ
(
s
, 
OP_ÿÎ_m‘hod
);

22673 
	`em™_u16
(
s
, 0);

22674 
	`em™_İ
(
s
, 
OP_drİ
);

22677 ià(
şass_Çme
 !ğ
JS_ATOM_NULL
) {

22681 
	`em™_İ
(
s
, 
OP_dup
);

22682 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22683 
	`em™_©om
(
s
, 
şass_Çme
);

22684 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

22686 
	`pİ_scİe
(
s
);

22687 
	`pİ_scİe
(
s
);

22690 ià(
şass_v¬_Çme
 !ğ
JS_ATOM_NULL
) {

22691 ià(
	`defše_v¬
(
s
, 
fd
, 
şass_v¬_Çme
, 
JS_VAR_DEF_LET
) < 0)

22692 
ç
;

22693 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

22694 
	`em™_©om
(
s
, 
şass_v¬_Çme
);

22695 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

22697 ià(
şass_Çme
 =ğ
JS_ATOM_NULL
) {

22701 
	`em™_İ
(
s
, 
OP_£t_şass_Çme
);

22702 
	`em™_u32
(
s
, 
fd
->
Ï¡_İcode_pos
 + 1 - 
defše_şass_off£t
);

22706 ià(
expÜt_æag
 !ğ
JS_PARSE_EXPORT_NONE
) {

22707 ià(!
	`add_expÜt_’Œy
(
s
, 
fd
->
moduË
,

22708 
şass_v¬_Çme
,

22709 
expÜt_æag
 =ğ
JS_PARSE_EXPORT_NAMED
 ? 
şass_v¬_Çme
 : 
JS_ATOM_deçuÉ
,

22710 
JS_EXPORT_TYPE_LOCAL
))

22711 
ç
;

22714 
	`JS_F»eAtom
(
ùx
, 
şass_Çme
);

22715 
	`JS_F»eAtom
(
ùx
, 
şass_v¬_Çme
);

22716 
fd
->
js_mode
 = 
§ved_js_mode
;

22718 
ç
:

22719 
	`JS_F»eAtom
(
ùx
, 
Çme
);

22720 
	`JS_F»eAtom
(
ùx
, 
şass_Çme
);

22721 
	`JS_F»eAtom
(
ùx
, 
şass_v¬_Çme
);

22722 
fd
->
js_mode
 = 
§ved_js_mode
;

22724 
	}
}

22726 
__exû±iÚ
 
	$js_·r£_¬¿y_l™”®
(
JSP¬£S‹
 *
s
)

22728 
ušt32_t
 
idx
;

22729 
BOOL
 
Ãed_Ëngth
;

22731 ià(
	`Ãxt_tok’
(
s
))

22734 
idx
 = 0;

22735 
s
->
tok’
.
v®
 !ğ']' && 
idx
 < 32) {

22736 ià(
s
->
tok’
.
v®
 =ğ',' || s->tok’.v® =ğ
TOK_ELLIPSIS
)

22738 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22740 
idx
++;

22742 ià(
s
->
tok’
.
v®
 == ',') {

22743 ià(
	`Ãxt_tok’
(
s
))

22746 ià(
s
->
tok’
.
v®
 != ']')

22747 
dÚe
;

22749 
	`em™_İ
(
s
, 
OP_¬¿y_äom
);

22750 
	`em™_u16
(
s
, 
idx
);

22753 
Ãed_Ëngth
 = 
FALSE
;

22754 
s
->
tok’
.
v®
 !ğ']' && 
idx
 < 0x7fffffff) {

22755 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
)

22757 
Ãed_Ëngth
 = 
TRUE
;

22758 ià(
s
->
tok’
.
v®
 != ',') {

22759 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22761 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

22762 
	`em™_u32
(
s
, 
	`__JS_AtomFromUIÁ32
(
idx
));

22763 
Ãed_Ëngth
 = 
FALSE
;

22765 
idx
++;

22767 ià(
s
->
tok’
.
v®
 == ',') {

22768 ià(
	`Ãxt_tok’
(
s
))

22772 ià(
s
->
tok’
.
v®
 == ']') {

22773 ià(
Ãed_Ëngth
) {

22776 
	`em™_İ
(
s
, 
OP_dup
);

22777 
	`em™_İ
(
s
, 
OP_push_i32
);

22778 
	`em™_u32
(
s
, 
idx
);

22779 
	`em™_İ
(
s
, 
OP_put_f›ld
);

22780 
	`em™_©om
(
s
, 
JS_ATOM_Ëngth
);

22782 
dÚe
;

22786 
	`em™_İ
(
s
, 
OP_push_i32
);

22787 
	`em™_u32
(
s
, 
idx
);

22790 
s
->
tok’
.
v®
 != ']') {

22791 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

22792 ià(
	`Ãxt_tok’
(
s
))

22794 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22797 
	`em™_İ
(
s
, 
OP_­³nd
);

22799 
Ïb–_Ãxt
, 
Ïb–_dÚe
;

22800 
Ïb–_Ãxt
 = 
	`Ãw_Ïb–
(
s
);

22801 
Ïb–_dÚe
 = 
	`Ãw_Ïb–
(
s
);

22803 
	`em™_İ
(
s
, 
OP_fÜ_of_¡¬t
);

22804 
	`em™_İ
(
s
, 
OP_rÙ5l
);

22805 
	`em™_İ
(
s
, 
OP_rÙ5l
);

22806 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

22808 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

22809 
	`em™_u8
(
s
, 2);

22810 
	`em™_gÙo
(
s
, 
OP_if_Œue
, 
Ïb–_dÚe
);

22813 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

22814 
	`em™_İ
(
s
, 
OP_šc
);

22815 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_Ãxt
);

22816 
	`em™_Ïb–
(
s
, 
Ïb–_dÚe
);

22818 
	`em™_İ
(
s
, 
OP_drİ
);

22819 
	`em™_İ
(
s
, 
OP_n1
);

22820 
	`em™_İ
(
s
, 
OP_n1
);

22821 
	`em™_İ
(
s
, 
OP_n1
);

22824 
Ãed_Ëngth
 = 
TRUE
;

22825 ià(
s
->
tok’
.
v®
 != ',') {

22826 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

22829 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

22830 
Ãed_Ëngth
 = 
FALSE
;

22832 
	`em™_İ
(
s
, 
OP_šc
);

22834 ià(
s
->
tok’
.
v®
 != ',')

22836 ià(
	`Ãxt_tok’
(
s
))

22839 ià(
Ãed_Ëngth
) {

22842 
	`em™_İ
(
s
, 
OP_dup1
);

22843 
	`em™_İ
(
s
, 
OP_put_f›ld
);

22844 
	`em™_©om
(
s
, 
JS_ATOM_Ëngth
);

22846 
	`em™_İ
(
s
, 
OP_drİ
);

22848 
dÚe
:

22849  
	`js_·r£_ex³ù
(
s
, ']');

22850 
	}
}

22853 
BOOL
 
	$has_w™h_scİe
(
JSFunùiÚDef
 *
s
, 
scİe_Ëv–
)

22856 
s
) {

22857 
scİe_idx
 = 
s
->
scİes
[
scİe_Ëv–
].
fœ¡
;

22858 
scİe_idx
 >= 0) {

22859 
JSV¬Def
 *
vd
 = &
s
->
v¬s
[
scİe_idx
];

22861 ià(
vd
->
v¬_Çme
 =ğ
JS_ATOM__w™h_
)

22862  
TRUE
;

22863 
scİe_idx
 = 
vd
->
scİe_Ãxt
;

22866 
scİe_Ëv–
 = 
s
->
·»Á_scİe_Ëv–
;

22867 
s
 = s->
·»Á
;

22869  
FALSE
;

22870 
	}
}

22872 
	sJSLV®ue
 {

22873 
	mİcode
;

22874 
	mscİe
;

22875 
	mÏb–
;

22876 
	md•th
;

22877 
	mtok
;

22878 
JSAtom
 
	mÇme
;

22879 } 
	tJSLV®ue
;

22881 
__exû±iÚ
 
	$g‘_lv®ue
(
JSP¬£S‹
 *
s
, *
pİcode
, *
pscİe
,

22882 
JSAtom
 *
²ame
, *
¶ab–
, *
pd•th
, 
BOOL
 
k“p
,

22883 
tok
)

22885 
JSFunùiÚDef
 *
fd
;

22886 
İcode
, 
scİe
, 
Ïb–
, 
d•th
;

22887 
JSAtom
 
Çme
;

22890 
fd
 = 
s
->
cur_func
;

22891 
scİe
 = 0;

22892 
Çme
 = 
JS_ATOM_NULL
;

22893 
Ïb–
 = -1;

22894 
d•th
 = 0;

22895 
İcode
 = 
	`g‘_´ev_İcode
(
fd
)) {

22896 
OP_scİe_g‘_v¬
:

22897 
Çme
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

22898 
scİe
 = 
	`g‘_u16
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 5);

22899 ià((
Çme
 =ğ
JS_ATOM_¬gum’ts
 ||‚am=ğ
JS_ATOM_ev®
) &&

22900 (
fd
->
js_mode
 & 
JS_MODE_STRICT
)) {

22901  
	`js_·r£_”rÜ
(
s
, "invalid†value in strict mode");

22903 ià(
Çme
 =ğ
JS_ATOM_this
 ||‚am=ğ
JS_ATOM_Ãw_rg‘
)

22904 
šv®id_lv®ue
;

22905 
d•th
 = 2;

22907 
OP_g‘_f›ld
:

22908 
Çme
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

22909 
d•th
 = 1;

22911 
OP_scİe_g‘_´iv©e_f›ld
:

22912 
Çme
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

22913 
scİe
 = 
	`g‘_u16
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 5);

22914 
d•th
 = 1;

22916 
OP_g‘_¬¿y_–
:

22917 
d•th
 = 2;

22919 
OP_g‘_su³r_v®ue
:

22920 
d•th
 = 3;

22923 
šv®id_lv®ue
:

22924 ià(
tok
 =ğ
TOK_FOR
) {

22925  
	`js_·r£_”rÜ
(
s
, "invalid for in/of†eft hand-side");

22926 } ià(
tok
 =ğ
TOK_INC
 ||ok =ğ
TOK_DEC
) {

22927  
	`js_·r£_”rÜ
(
s
, "invalid increment/decrement operand");

22928 } ià(
tok
 == '[' ||ok == '{') {

22929  
	`js_·r£_”rÜ
(
s
, "invalid destructuringarget");

22931  
	`js_·r£_”rÜ
(
s
, "invalid‡ssignment†eft-hand side");

22935 
fd
->
by‹_code
.
size
 = fd->
Ï¡_İcode_pos
;

22936 
fd
->
Ï¡_İcode_pos
 = -1;

22938 ià(
k“p
) {

22940 
İcode
) {

22941 
OP_scİe_g‘_v¬
:

22942 
Ïb–
 = 
	`Ãw_Ïb–
(
s
);

22943 
	`em™_İ
(
s
, 
OP_scİe_make_»f
);

22944 
	`em™_©om
(
s
, 
Çme
);

22945 
	`em™_u32
(
s
, 
Ïb–
);

22946 
	`em™_u16
(
s
, 
scİe
);

22947 
	`upd©e_Ïb–
(
fd
, 
Ïb–
, 1);

22948 
	`em™_İ
(
s
, 
OP_g‘_»f_v®ue
);

22949 
İcode
 = 
OP_g‘_»f_v®ue
;

22951 
OP_g‘_f›ld
:

22952 
	`em™_İ
(
s
, 
OP_g‘_f›ld2
);

22953 
	`em™_©om
(
s
, 
Çme
);

22955 
OP_scİe_g‘_´iv©e_f›ld
:

22956 
	`em™_İ
(
s
, 
OP_scİe_g‘_´iv©e_f›ld2
);

22957 
	`em™_©om
(
s
, 
Çme
);

22958 
	`em™_u16
(
s
, 
scİe
);

22960 
OP_g‘_¬¿y_–
:

22962 
	`em™_İ
(
s
, 
OP_to_´İkey2
);

22963 
	`em™_İ
(
s
, 
OP_dup2
);

22964 
	`em™_İ
(
s
, 
OP_g‘_¬¿y_–
);

22966 
OP_g‘_su³r_v®ue
:

22967 
	`em™_İ
(
s
, 
OP_to_´İkey
);

22968 
	`em™_İ
(
s
, 
OP_dup3
);

22969 
	`em™_İ
(
s
, 
OP_g‘_su³r_v®ue
);

22972 
	`abÜt
();

22975 
İcode
) {

22976 
OP_scİe_g‘_v¬
:

22977 
Ïb–
 = 
	`Ãw_Ïb–
(
s
);

22978 
	`em™_İ
(
s
, 
OP_scİe_make_»f
);

22979 
	`em™_©om
(
s
, 
Çme
);

22980 
	`em™_u32
(
s
, 
Ïb–
);

22981 
	`em™_u16
(
s
, 
scİe
);

22982 
	`upd©e_Ïb–
(
fd
, 
Ïb–
, 1);

22983 
İcode
 = 
OP_g‘_»f_v®ue
;

22985 
OP_g‘_¬¿y_–
:

22986 
	`em™_İ
(
s
, 
OP_to_´İkey2
);

22988 
OP_g‘_su³r_v®ue
:

22989 
	`em™_İ
(
s
, 
OP_to_´İkey
);

22994 *
pİcode
 = 
İcode
;

22995 *
pscİe
 = 
scİe
;

22998 *
²ame
 = 
Çme
;

22999 *
¶ab–
 = 
Ïb–
;

23000 ià(
pd•th
)

23001 *
pd•th
 = 
d•th
;

23003 
	}
}

23007 
	$put_lv®ue
(
JSP¬£S‹
 *
s
, 
İcode
, 
scİe
,

23008 
JSAtom
 
Çme
, 
Ïb–
, 
BOOL
 
¥ecŸl
)

23010 
İcode
) {

23011 
OP_g‘_f›ld
:

23012 ià(!
¥ecŸl
)

23013 
	`em™_İ
(
s
, 
OP_š£¹2
);

23015 
	`em™_İ
(
s
, 
OP_³rm3
);

23016 
	`em™_İ
(
s
, 
OP_put_f›ld
);

23017 
	`em™_u32
(
s
, 
Çme
);

23019 
OP_scİe_g‘_´iv©e_f›ld
:

23020 ià(!
¥ecŸl
)

23021 
	`em™_İ
(
s
, 
OP_š£¹2
);

23023 
	`em™_İ
(
s
, 
OP_³rm3
);

23024 
	`em™_İ
(
s
, 
OP_scİe_put_´iv©e_f›ld
);

23025 
	`em™_u32
(
s
, 
Çme
);

23026 
	`em™_u16
(
s
, 
scİe
);

23028 
OP_g‘_¬¿y_–
:

23029 ià(!
¥ecŸl
)

23030 
	`em™_İ
(
s
, 
OP_š£¹3
);

23032 
	`em™_İ
(
s
, 
OP_³rm4
);

23033 
	`em™_İ
(
s
, 
OP_put_¬¿y_–
);

23035 
OP_g‘_»f_v®ue
:

23036 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

23037 
	`em™_Ïb–
(
s
, 
Ïb–
);

23038 ià(!
¥ecŸl
)

23039 
	`em™_İ
(
s
, 
OP_š£¹3
);

23041 
	`em™_İ
(
s
, 
OP_³rm4
);

23042 
	`em™_İ
(
s
, 
OP_put_»f_v®ue
);

23044 
OP_g‘_su³r_v®ue
:

23045 ià(!
¥ecŸl
)

23046 
	`em™_İ
(
s
, 
OP_š£¹4
);

23048 
	`em™_İ
(
s
, 
OP_³rm5
);

23049 
	`em™_İ
(
s
, 
OP_put_su³r_v®ue
);

23052 
	`abÜt
();

23054 
	}
}

23056 
	$put_lv®ue_nok“p
(
JSP¬£S‹
 *
s
, 
İcode
, 
scİe
,

23057 
JSAtom
 
Çme
, 
Ïb–
, 
v¬_tok
)

23059 
İcode
) {

23060 
OP_scİe_g‘_v¬
:

23061 
	`em™_İ
(
s
, (
v¬_tok
 =ğ
TOK_CONST
 || v¬_tok =ğ
TOK_LET
) ?

23062 
OP_scİe_put_v¬_š™
 : 
OP_scİe_put_v¬
);

23063 
	`em™_u32
(
s
, 
Çme
);

23064 
	`em™_u16
(
s
, 
scİe
);

23066 
OP_g‘_f›ld
:

23067 
	`em™_İ
(
s
, 
OP_put_f›ld
);

23068 
	`em™_u32
(
s
, 
Çme
);

23070 
OP_scİe_g‘_´iv©e_f›ld
:

23071 
	`em™_İ
(
s
, 
OP_scİe_put_´iv©e_f›ld
);

23072 
	`em™_u32
(
s
, 
Çme
);

23073 
	`em™_u16
(
s
, 
scİe
);

23075 
OP_g‘_¬¿y_–
:

23076 
	`em™_İ
(
s
, 
OP_put_¬¿y_–
);

23078 
OP_g‘_»f_v®ue
:

23080 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

23081 
	`em™_Ïb–
(
s
, 
Ïb–
);

23083 
	`em™_İ
(
s
, 
OP_put_»f_v®ue
);

23085 
OP_g‘_su³r_v®ue
:

23086 
	`em™_İ
(
s
, 
OP_put_su³r_v®ue
);

23089 
	`abÜt
();

23091 
	}
}

23093 
__exû±iÚ
 
	$js_·r£_ex´_·»n
(
JSP¬£S‹
 *
s
)

23095 ià(
	`js_·r£_ex³ù
(
s
, '('))

23097 ià(
	`js_·r£_ex´
(
s
))

23099 ià(
	`js_·r£_ex³ù
(
s
, ')'))

23102 
	}
}

23104 
	$js_unsuµÜ‹d_keywÜd
(
JSP¬£S‹
 *
s
, 
JSAtom
 
©om
)

23106 
buf
[
ATOM_GET_STR_BUF_SIZE
];

23107  
	`js_·r£_”rÜ
(
s
, "unsupported keyword: %s",

23108 
	`JS_AtomG‘SŒ
(
s
->
ùx
, 
buf
, (buf), 
©om
));

23109 
	}
}

23111 
__exû±iÚ
 
	$js_defše_v¬
(
JSP¬£S‹
 *
s
, 
JSAtom
 
Çme
, 
tok
)

23113 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

23114 
JSV¬DefEnum
 
v¬_def_ty³
;

23116 ià(
Çme
 =ğ
JS_ATOM_y›ld
 && 
fd
->
func_kšd
 =ğ
JS_FUNC_GENERATOR
) {

23117  
	`js_·r£_”rÜ
(
s
, "yield is‡„eserved identifier");

23119 ià((
Çme
 =ğ
JS_ATOM_¬gum’ts
 ||‚am=ğ
JS_ATOM_ev®
)

23120 && (
fd
->
js_mode
 & 
JS_MODE_STRICT
)) {

23121  
	`js_·r£_”rÜ
(
s
, "invalid variable‚ame in strict mode");

23123 ià((
Çme
 =ğ
JS_ATOM_Ët
 ||‚am=ğ
JS_ATOM_undefšed
)

23124 && (
tok
 =ğ
TOK_LET
 ||ok =ğ
TOK_CONST
)) {

23125  
	`js_·r£_”rÜ
(
s
, "invalid†exical variable‚ame");

23127 
tok
) {

23128 
TOK_LET
:

23129 
v¬_def_ty³
 = 
JS_VAR_DEF_LET
;

23131 
TOK_CONST
:

23132 
v¬_def_ty³
 = 
JS_VAR_DEF_CONST
;

23134 
TOK_VAR
:

23135 
v¬_def_ty³
 = 
JS_VAR_DEF_VAR
;

23137 
TOK_CATCH
:

23138 
v¬_def_ty³
 = 
JS_VAR_DEF_CATCH
;

23141 
	`abÜt
();

23143 ià(
	`defše_v¬
(
s
, 
fd
, 
Çme
, 
v¬_def_ty³
) < 0)

23146 
	}
}

23148 
	$js_em™_¥»ad_code
(
JSP¬£S‹
 *
s
, 
d•th
)

23150 
Ïb–_»¡_Ãxt
, 
Ïb–_»¡_dÚe
;

23156 
	`em™_İ
(
s
, 
OP_¬¿y_äom
);

23157 
	`em™_u16
(
s
, 0);

23158 
	`em™_İ
(
s
, 
OP_push_i32
);

23159 
	`em™_u32
(
s
, 0);

23160 
	`em™_Ïb–
(
s
, 
Ïb–_»¡_Ãxt
 = 
	`Ãw_Ïb–
(s));

23161 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

23162 
	`em™_u8
(
s
, 2 + 
d•th
);

23163 
Ïb–_»¡_dÚe
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

23165 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

23166 
	`em™_İ
(
s
, 
OP_šc
);

23167 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_»¡_Ãxt
);

23168 
	`em™_Ïb–
(
s
, 
Ïb–_»¡_dÚe
);

23170 
	`em™_İ
(
s
, 
OP_drİ
);

23171 
	`em™_İ
(
s
, 
OP_drİ
);

23172 
	}
}

23174 
	$js_·r£_check_du¶iÿ‹_·¿m‘”
(
JSP¬£S‹
 *
s
, 
JSAtom
 
Çme
)

23177 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

23178 
i
;

23179 
i
 = 0; i < 
fd
->
¬g_couÁ
; i++) {

23180 ià(
fd
->
¬gs
[
i
].
v¬_Çme
 =ğ
Çme
)

23181 
du¶iÿ‹
;

23183 
i
 = 0; i < 
fd
->
v¬_couÁ
; i++) {

23184 ià(
fd
->
v¬s
[
i
].
v¬_Çme
 =ğ
Çme
)

23185 
du¶iÿ‹
;

23189 
du¶iÿ‹
:

23190  
	`js_·r£_”rÜ
(
s
, "duplicate…arameter‚ames‚ot‡llowed inhis context");

23191 
	}
}

23193 
JSAtom
 
	$js_·r£_de¡ruùuršg_v¬
(
JSP¬£S‹
 *
s
, 
tok
, 
is_¬g
)

23195 
JSAtom
 
Çme
;

23197 ià(!(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
)

23198 || ((
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
) &&

23199 (
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_ev®
 || s->tok’.u.id’t.©om =ğ
JS_ATOM_¬gum’ts
))) {

23200 
	`js_·r£_”rÜ
(
s
, "invalid destructuringarget");

23201  
JS_ATOM_NULL
;

23203 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

23204 ià(
is_¬g
 && 
	`js_·r£_check_du¶iÿ‹_·¿m‘”
(
s
, 
Çme
))

23205 
ç
;

23206 ià(
	`Ãxt_tok’
(
s
))

23207 
ç
;

23209  
Çme
;

23210 
ç
:

23211 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

23212  
JS_ATOM_NULL
;

23213 
	}
}

23215 
	$js_·r£_de¡ruùuršg_–em’t
(
JSP¬£S‹
 *
s
, 
tok
, 
is_¬g
,

23216 
hasv®
, 
has_–lsis
,

23217 
BOOL
 
®low_š™Ÿliz”
)

23219 
Ïb–_·r£
, 
Ïb–_assign
, 
Ïb–_dÚe
, 
Ïb–_lv®ue
, 
d•th_lv®ue
;

23220 
¡¬t_addr
, 
assign_addr
;

23221 
JSAtom
 
´İ_Çme
, 
v¬_Çme
;

23222 
İcode
, 
scİe
, 
tok1
, 
sk_b™s
;

23224 ià(
has_–lsis
 < 0) {

23226 
	`js_·r£_sk_·»ns_tok’
(
s
, &
sk_b™s
, 
FALSE
);

23227 
has_–lsis
 = 
sk_b™s
 & 
SKIP_HAS_ELLIPSIS
;

23230 
Ïb–_·r£
 = 
	`Ãw_Ïb–
(
s
);

23231 
Ïb–_assign
 = 
	`Ãw_Ïb–
(
s
);

23233 
¡¬t_addr
 = 
s
->
cur_func
->
by‹_code
.
size
;

23234 ià(
hasv®
) {

23236 
	`em™_İ
(
s
, 
OP_dup
);

23237 
	`em™_İ
(
s
, 
OP_undefšed
);

23238 
	`em™_İ
(
s
, 
OP_¡riù_eq
);

23239 
	`em™_gÙo
(
s
, 
OP_if_Œue
, 
Ïb–_·r£
);

23240 
	`em™_Ïb–
(
s
, 
Ïb–_assign
);

23242 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_·r£
);

23243 
	`em™_Ïb–
(
s
, 
Ïb–_assign
);

23245 
	`em™_İ
(
s
, 
OP_dup
);

23247 
assign_addr
 = 
s
->
cur_func
->
by‹_code
.
size
;

23248 ià(
s
->
tok’
.
v®
 == '{') {

23249 ià(
	`Ãxt_tok’
(
s
))

23252 
	`em™_İ
(
s
, 
OP_to_objeù
);

23253 ià(
has_–lsis
) {

23255 
	`em™_İ
(
s
, 
OP_objeù
);

23256 
	`em™_İ
(
s
, 
OP_sw­
);

23258 
s
->
tok’
.
v®
 != '}') {

23259 
´İ_ty³
;

23260 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

23261 ià(!
has_–lsis
) {

23262 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "unexpectedƒllipsisoken");

23265 ià(
	`Ãxt_tok’
(
s
))

23267 ià(
tok
) {

23268 
v¬_Çme
 = 
	`js_·r£_de¡ruùuršg_v¬
(
s
, 
tok
, 
is_¬g
);

23269 ià(
v¬_Çme
 =ğ
JS_ATOM_NULL
)

23271 
İcode
 = 
OP_scİe_g‘_v¬
;

23272 
scİe
 = 
s
->
cur_func
->
scİe_Ëv–
;

23273 
Ïb–_lv®ue
 = -1;

23274 
d•th_lv®ue
 = 0;

23276 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
TRUE
))

23279 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
v¬_Çme
,

23280 &
Ïb–_lv®ue
, &
d•th_lv®ue
, 
FALSE
, '{'))

23283 ià(
s
->
tok’
.
v®
 != '}') {

23284 
	`js_·r£_”rÜ
(
s
, "assignment„est…roperty must be†ast");

23285 
v¬_”rÜ
;

23287 
	`em™_İ
(
s
, 
OP_objeù
);

23288 
	`em™_İ
(
s
, 
OP_cİy_d©a_´İ”t›s
);

23289 
	`em™_u8
(
s
, 0 | ((
d•th_lv®ue
 + 1) << 2) | ((depth_lvalue + 2) << 5));

23290 
£t_v®
;

23292 
´İ_ty³
 = 
	`js_·r£_´İ”ty_Çme
(
s
, &
´İ_Çme
, 
FALSE
, 
TRUE
, FALSE);

23293 ià(
´İ_ty³
 < 0)

23295 
v¬_Çme
 = 
JS_ATOM_NULL
;

23296 
İcode
 = 
OP_scİe_g‘_v¬
;

23297 
scİe
 = 
s
->
cur_func
->
scİe_Ëv–
;

23298 
Ïb–_lv®ue
 = -1;

23299 
d•th_lv®ue
 = 0;

23300 ià(
´İ_ty³
 =ğ
PROP_TYPE_IDENT
) {

23301 ià(
	`Ãxt_tok’
(
s
))

23302 
´İ_”rÜ
;

23303 ià((
s
->
tok’
.
v®
 == '[' || s->token.val == '{')

23304 && ((
tok1
 = 
	`js_·r£_sk_·»ns_tok’
(
s
, &
sk_b™s
, 
FALSE
)) == ',' ||

23305 
tok1
 == '=' ||ok1 == '}')) {

23306 ià(
´İ_Çme
 =ğ
JS_ATOM_NULL
) {

23308 ià(
has_–lsis
) {

23310 
	`em™_İ
(
s
, 
OP_to_´İkey
);

23311 
	`em™_İ
(
s
, 
OP_³rm3
);

23312 
	`em™_İ
(
s
, 
OP_nuÎ
);

23313 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

23314 
	`em™_İ
(
s
, 
OP_³rm3
);

23317 
	`em™_İ
(
s
, 
OP_g‘_¬¿y_–2
);

23320 ià(
has_–lsis
) {

23322 
	`em™_İ
(
s
, 
OP_sw­
);

23323 
	`em™_İ
(
s
, 
OP_nuÎ
);

23324 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

23325 
	`em™_©om
(
s
, 
´İ_Çme
);

23326 
	`em™_İ
(
s
, 
OP_sw­
);

23329 
	`em™_İ
(
s
, 
OP_g‘_f›ld2
);

23330 
	`em™_u32
(
s
, 
´İ_Çme
);

23332 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 
tok
, 
is_¬g
, 
TRUE
, -1, TRUE))

23334 ià(
s
->
tok’
.
v®
 == '}')

23337 ià(
	`js_·r£_ex³ù
(
s
, ','))

23341 ià(
´İ_Çme
 =ğ
JS_ATOM_NULL
) {

23342 
	`em™_İ
(
s
, 
OP_to_´İkey2
);

23343 ià(
has_–lsis
) {

23345 
	`em™_İ
(
s
, 
OP_³rm3
);

23346 
	`em™_İ
(
s
, 
OP_nuÎ
);

23347 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

23348 
	`em™_İ
(
s
, 
OP_³rm3
);

23351 
	`em™_İ
(
s
, 
OP_dup1
);

23353 ià(
has_–lsis
) {

23355 
	`em™_İ
(
s
, 
OP_sw­
);

23356 
	`em™_İ
(
s
, 
OP_nuÎ
);

23357 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

23358 
	`em™_©om
(
s
, 
´İ_Çme
);

23359 
	`em™_İ
(
s
, 
OP_sw­
);

23362 
	`em™_İ
(
s
, 
OP_dup
);

23364 ià(
tok
) {

23365 
v¬_Çme
 = 
	`js_·r£_de¡ruùuršg_v¬
(
s
, 
tok
, 
is_¬g
);

23366 ià(
v¬_Çme
 =ğ
JS_ATOM_NULL
)

23367 
´İ_”rÜ
;

23369 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
TRUE
))

23370 
´İ_”rÜ
;

23371 
lv®ue
:

23372 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
v¬_Çme
,

23373 &
Ïb–_lv®ue
, &
d•th_lv®ue
, 
FALSE
, '{'))

23374 
´İ_”rÜ
;

23376 ià(
´İ_Çme
 =ğ
JS_ATOM_NULL
) {

23377 
d•th_lv®ue
) {

23380 
	`em™_İ
(
s
, 
OP_rÙ3r
);

23384 
	`em™_İ
(
s
, 
OP_sw­2
);

23388 
	`em™_İ
(
s
, 
OP_rÙ5l
);

23389 
	`em™_İ
(
s
, 
OP_rÙ5l
);

23393 
d•th_lv®ue
) {

23396 
	`em™_İ
(
s
, 
OP_sw­
);

23400 
	`em™_İ
(
s
, 
OP_rÙ3l
);

23404 
	`em™_İ
(
s
, 
OP_rÙ4l
);

23409 ià(
´İ_Çme
 =ğ
JS_ATOM_NULL
) {

23413 
	`em™_İ
(
s
, 
OP_g‘_¬¿y_–
);

23418 
	`em™_İ
(
s
, 
OP_g‘_f›ld
);

23419 
	`em™_u32
(
s
, 
´İ_Çme
);

23423 ià(
is_¬g
 && 
	`js_·r£_check_du¶iÿ‹_·¿m‘”
(
s
, 
´İ_Çme
))

23424 
´İ_”rÜ
;

23425 ià((
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
) &&

23426 (
´İ_Çme
 =ğ
JS_ATOM_ev®
 ||…rİ_Çm=ğ
JS_ATOM_¬gum’ts
)) {

23427 
	`js_·r£_”rÜ
(
s
, "invalid destructuringarget");

23428 
´İ_”rÜ
;

23430 ià(
has_–lsis
) {

23432 
	`em™_İ
(
s
, 
OP_sw­
);

23433 
	`em™_İ
(
s
, 
OP_nuÎ
);

23434 
	`em™_İ
(
s
, 
OP_defše_f›ld
);

23435 
	`em™_©om
(
s
, 
´İ_Çme
);

23436 
	`em™_İ
(
s
, 
OP_sw­
);

23438 ià(!
tok
 ||ok =ğ
TOK_VAR
) {

23441 
	`em™_İ
(
s
, 
OP_dup
);

23442 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

23443 
	`em™_©om
(
s
, 
´İ_Çme
);

23444 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

23445 
lv®ue
;

23447 
v¬_Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, 
´İ_Çme
);

23449 
	`em™_İ
(
s
, 
OP_g‘_f›ld2
);

23450 
	`em™_u32
(
s
, 
´İ_Çme
);

23452 
£t_v®
:

23453 ià(
tok
) {

23454 ià(
	`js_defše_v¬
(
s
, 
v¬_Çme
, 
tok
))

23455 
v¬_”rÜ
;

23456 
scİe
 = 
s
->
cur_func
->
scİe_Ëv–
;

23458 ià(
s
->
tok’
.
v®
 == '=') {

23459 
Ïb–_hasv®
;

23460 
	`em™_İ
(
s
, 
OP_dup
);

23461 
	`em™_İ
(
s
, 
OP_undefšed
);

23462 
	`em™_İ
(
s
, 
OP_¡riù_eq
);

23463 
Ïb–_hasv®
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

23464 ià(
	`Ãxt_tok’
(
s
))

23465 
v¬_”rÜ
;

23466 
	`em™_İ
(
s
, 
OP_drİ
);

23467 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

23468 
v¬_”rÜ
;

23469 ià(
İcode
 =ğ
OP_scİe_g‘_v¬
 || opcod=ğ
OP_g‘_»f_v®ue
)

23470 
	`£t_objeù_Çme
(
s
, 
v¬_Çme
);

23471 
	`em™_Ïb–
(
s
, 
Ïb–_hasv®
);

23474 
	`put_lv®ue_nok“p
(
s
, 
İcode
, 
scİe
, 
v¬_Çme
, 
Ïb–_lv®ue
, 
tok
);

23475 ià(
s
->
tok’
.
v®
 == '}')

23478 ià(
	`js_·r£_ex³ù
(
s
, ','))

23482 
	`em™_İ
(
s
, 
OP_drİ
);

23483 ià(
has_–lsis
) {

23484 
	`em™_İ
(
s
, 
OP_drİ
);

23486 ià(
	`Ãxt_tok’
(
s
))

23488 } ià(
s
->
tok’
.
v®
 == '[') {

23489 
BOOL
 
has_¥»ad
;

23490 
’um_d•th
;

23491 
BlockEnv
 
block_’v
;

23493 ià(
	`Ãxt_tok’
(
s
))

23497 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
block_’v
,

23498 
JS_ATOM_NULL
, -1, -1, 2);

23499 
block_’v
.
has_™”©Ü
 = 
TRUE
;

23500 
	`em™_İ
(
s
, 
OP_fÜ_of_¡¬t
);

23501 
has_¥»ad
 = 
FALSE
;

23502 
s
->
tok’
.
v®
 != ']') {

23504 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

23505 ià(
	`Ãxt_tok’
(
s
))

23507 ià(
s
->
tok’
.
v®
 == ',' || s->token.val == ']')

23508  
	`js_·r£_”rÜ
(
s
, "missing binding…attern...");

23509 
has_¥»ad
 = 
TRUE
;

23511 ià(
s
->
tok’
.
v®
 == ',') {

23513 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

23514 
	`em™_u8
(
s
, 0);

23515 
	`em™_İ
(
s
, 
OP_drİ
);

23516 
	`em™_İ
(
s
, 
OP_drİ
);

23517 } ià((
s
->
tok’
.
v®
 == '[' || s->token.val == '{')

23518 && ((
tok1
 = 
	`js_·r£_sk_·»ns_tok’
(
s
, &
sk_b™s
, 
FALSE
)) == ',' ||

23519 
tok1
 == '=' ||ok1 == ']')) {

23520 ià(
has_¥»ad
) {

23521 ià(
tok1
 == '=')

23522  
	`js_·r£_”rÜ
(
s
, "restƒlement cannot have‡ default value");

23523 
	`js_em™_¥»ad_code
(
s
, 0);

23525 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

23526 
	`em™_u8
(
s
, 0);

23527 
	`em™_İ
(
s
, 
OP_drİ
);

23529 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 
tok
, 
is_¬g
, 
TRUE
, 
sk_b™s
 & 
SKIP_HAS_ELLIPSIS
, TRUE))

23532 
v¬_Çme
 = 
JS_ATOM_NULL
;

23533 
’um_d•th
 = 0;

23534 ià(
tok
) {

23535 
v¬_Çme
 = 
	`js_·r£_de¡ruùuršg_v¬
(
s
, 
tok
, 
is_¬g
);

23536 ià(
v¬_Çme
 =ğ
JS_ATOM_NULL
)

23537 
v¬_”rÜ
;

23538 ià(
	`js_defše_v¬
(
s
, 
v¬_Çme
, 
tok
))

23539 
v¬_”rÜ
;

23540 
İcode
 = 
OP_scİe_g‘_v¬
;

23541 
scİe
 = 
s
->
cur_func
->
scİe_Ëv–
;

23543 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
TRUE
))

23545 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
v¬_Çme
,

23546 &
Ïb–_lv®ue
, &
’um_d•th
, 
FALSE
, '[')) {

23550 ià(
has_¥»ad
) {

23551 
	`js_em™_¥»ad_code
(
s
, 
’um_d•th
);

23553 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

23554 
	`em™_u8
(
s
, 
’um_d•th
);

23555 
	`em™_İ
(
s
, 
OP_drİ
);

23557 ià(
s
->
tok’
.
v®
 =ğ'=' && !
has_¥»ad
) {

23559 
Ïb–_hasv®
;

23560 
	`em™_İ
(
s
, 
OP_dup
);

23561 
	`em™_İ
(
s
, 
OP_undefšed
);

23562 
	`em™_İ
(
s
, 
OP_¡riù_eq
);

23563 
Ïb–_hasv®
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

23564 ià(
	`Ãxt_tok’
(
s
))

23565 
v¬_”rÜ
;

23566 
	`em™_İ
(
s
, 
OP_drİ
);

23567 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

23568 
v¬_”rÜ
;

23569 ià(
İcode
 =ğ
OP_scİe_g‘_v¬
 || opcod=ğ
OP_g‘_»f_v®ue
)

23570 
	`£t_objeù_Çme
(
s
, 
v¬_Çme
);

23571 
	`em™_Ïb–
(
s
, 
Ïb–_hasv®
);

23574 
	`put_lv®ue_nok“p
(
s
, 
İcode
, 
scİe
, 
v¬_Çme
,

23575 
Ïb–_lv®ue
, 
tok
);

23577 ià(
s
->
tok’
.
v®
 == ']')

23579 ià(
has_¥»ad
)

23580  
	`js_·r£_”rÜ
(
s
, "restƒlement must behe†ast one");

23582 ià(
	`js_·r£_ex³ù
(
s
, ','))

23587 
	`em™_İ
(
s
, 
OP_™”©Ü_şo£
);

23588 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

23589 ià(
	`Ãxt_tok’
(
s
))

23592  
	`js_·r£_”rÜ
(
s
, "invalid‡ssignment syntax");

23594 ià(
s
->
tok’
.
v®
 =ğ'=' && 
®low_š™Ÿliz”
) {

23595 
Ïb–_dÚe
 = 
	`em™_gÙo
(
s
, 
OP_gÙo
, -1);

23596 ià(
	`Ãxt_tok’
(
s
))

23598 
	`em™_Ïb–
(
s
, 
Ïb–_·r£
);

23599 ià(
hasv®
)

23600 
	`em™_İ
(
s
, 
OP_drİ
);

23601 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

23603 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_assign
);

23604 
	`em™_Ïb–
(
s
, 
Ïb–_dÚe
);

23609 ià(!
hasv®
) {

23610 
	`js_·r£_”rÜ
(
s
, "too complicated destructuringƒxpression");

23614 
	`mem£t
(
s
->
cur_func
->
by‹_code
.
buf
 + 
¡¬t_addr
, 
OP_nİ
,

23615 
assign_addr
 - 
¡¬t_addr
);

23616 
s
->
cur_func
->
Ïb–_¦Ùs
[
Ïb–_·r£
].
»f_couÁ
--;

23620 
´İ_”rÜ
:

23621 
	`JS_F»eAtom
(
s
->
ùx
, 
´İ_Çme
);

23622 
v¬_”rÜ
:

23623 
	`JS_F»eAtom
(
s
->
ùx
, 
v¬_Çme
);

23625 
	}
}

23627 
	eFuncC®lTy³
 {

23628 
	mFUNC_CALL_NORMAL
,

23629 
	mFUNC_CALL_NEW
,

23630 
	mFUNC_CALL_SUPER_CTOR
,

23631 
	mFUNC_CALL_TEMPLATE
,

23632 } 
	tFuncC®lTy³
;

23634 
	$İtiÚ®_chaš_‹¡
(
JSP¬£S‹
 *
s
, *
pİtiÚ®_chaššg_Ïb–
,

23635 
drİ_couÁ
)

23637 
Ïb–_Ãxt
, 
i
;

23638 ià(*
pİtiÚ®_chaššg_Ïb–
 < 0)

23639 *
pİtiÚ®_chaššg_Ïb–
 = 
	`Ãw_Ïb–
(
s
);

23641 
	`em™_İ
(
s
, 
OP_dup
);

23642 
	`em™_İ
(
s
, 
OP_is_undefšed_Ü_nuÎ
);

23643 
Ïb–_Ãxt
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

23644 
i
 = 0; i < 
drİ_couÁ
; i++)

23645 
	`em™_İ
(
s
, 
OP_drİ
);

23646 
	`em™_İ
(
s
, 
OP_undefšed
);

23647 
	`em™_gÙo
(
s
, 
OP_gÙo
, *
pİtiÚ®_chaššg_Ïb–
);

23648 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

23649 
	}
}

23651 
__exû±iÚ
 
	$js_·r£_po¡fix_ex´
(
JSP¬£S‹
 *
s
, 
BOOL
 
acû±_Í¬’
)

23653 
FuncC®lTy³
 
ÿÎ_ty³
;

23654 
İtiÚ®_chaššg_Ïb–
;

23656 
ÿÎ_ty³
 = 
FUNC_CALL_NORMAL
;

23657 
s
->
tok’
.
v®
) {

23658 
TOK_NUMBER
:

23660 
JSV®ue
 
v®
;

23661 
v®
 = 
s
->
tok’
.
u
.
num
.val;

23663 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_INT
) {

23664 
	`em™_İ
(
s
, 
OP_push_i32
);

23665 
	`em™_u32
(
s
, 
	`JS_VALUE_GET_INT
(
v®
));

23667 #ifdeà
CONFIG_BIGNUM


23668 ià(
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_BIG_FLOAT
) {

23669 
¦imb_t
 
e
;

23670 
»t
;

23675 ià(
	`em™_push_cÚ¡
(
s
, 
v®
, 0) < 0)

23677 
e
 = 
s
->
tok’
.
u
.
num
.
expÚ’t
;

23678 ià(
e
 =ğ(
št32_t
)e) {

23679 
	`em™_İ
(
s
, 
OP_push_i32
);

23680 
	`em™_u32
(
s
, 
e
);

23682 
v®
 = 
	`JS_NewBigIÁ64_1
(
s
->
ùx
, 
e
);

23683 ià(
	`JS_IsExû±iÚ
(
v®
))

23685 
»t
 = 
	`em™_push_cÚ¡
(
s
, 
v®
, 0);

23686 
	`JS_F»eV®ue
(
s
->
ùx
, 
v®
);

23687 ià(
»t
 < 0)

23690 
	`em™_İ
(
s
, 
OP_mul_pow10
);

23694 ià(
	`em™_push_cÚ¡
(
s
, 
v®
, 0) < 0)

23698 ià(
	`Ãxt_tok’
(
s
))

23701 
TOK_TEMPLATE
:

23702 ià(
	`js_·r£_‹m¶©e
(
s
, 0, 
NULL
))

23705 
TOK_STRING
:

23706 ià(
	`em™_push_cÚ¡
(
s
, s->
tok’
.
u
.
¡r
.str, 1))

23708 ià(
	`Ãxt_tok’
(
s
))

23712 
TOK_DIV_ASSIGN
:

23713 
s
->
buf_±r
 -= 2;

23714 
·r£_»gexp
;

23716 
s
->
buf_±r
--;

23717 
·r£_»gexp
:

23719 
JSV®ue
 
¡r
;

23720 
»t
, 
backŒaû_æags
;

23721 ià(!
s
->
ùx
->
compe_»gexp
)

23722  
	`js_·r£_”rÜ
(
s
, "RegExp‡re‚ot supported");

23724 ià(
	`js_·r£_»gexp
(
s
))

23726 
»t
 = 
	`em™_push_cÚ¡
(
s
, s->
tok’
.
u
.
»gexp
.
body
, 0);

23727 
¡r
 = 
s
->
ùx
->
	`compe_»gexp
(s->ùx, s->
tok’
.
u
.
»gexp
.
body
,

23728 
s
->
tok’
.
u
.
»gexp
.
æags
);

23729 ià(
	`JS_IsExû±iÚ
(
¡r
)) {

23731 
backŒaû_æags
 = 0;

23732 ià(
s
->
cur_func
 && s->cur_func->
backŒaû_b¬r›r
)

23733 
backŒaû_æags
 = 
JS_BACKTRACE_FLAG_SINGLE_LEVEL
;

23734 
	`bud_backŒaû
(
s
->
ùx
, s->ùx->
¹
->
cu¼’t_exû±iÚ
,

23735 
s
->
f’ame
, s->
tok’
.
lše_num
,

23736 
backŒaû_æags
);

23739 
»t
 = 
	`em™_push_cÚ¡
(
s
, 
¡r
, 0);

23740 
	`JS_F»eV®ue
(
s
->
ùx
, 
¡r
);

23741 ià(
»t
)

23746 
	`em™_İ
(
s
, 
OP_»gexp
);

23747 ià(
	`Ãxt_tok’
(
s
))

23752 ià(
	`js_·r£_sk_·»ns_tok’
(
s
, 
NULL
, 
TRUE
è=ğ
TOK_ARROW
) {

23753 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_ARROW
,

23754 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

23755 
s
->
tok’
.
±r
, s->tok’.
lše_num
))

23758 ià(
	`js_·r£_ex´_·»n
(
s
))

23762 
TOK_FUNCTION
:

23763 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_EXPR
,

23764 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

23765 
s
->
tok’
.
±r
, s->tok’.
lše_num
))

23768 
TOK_CLASS
:

23769 ià(
	`js_·r£_şass
(
s
, 
TRUE
, 
JS_PARSE_EXPORT_NONE
))

23772 
TOK_NULL
:

23773 ià(
	`Ãxt_tok’
(
s
))

23775 
	`em™_İ
(
s
, 
OP_nuÎ
);

23777 
TOK_THIS
:

23778 ià(
	`Ãxt_tok’
(
s
))

23780 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

23781 
	`em™_©om
(
s
, 
JS_ATOM_this
);

23782 
	`em™_u16
(
s
, 0);

23784 
TOK_FALSE
:

23785 ià(
	`Ãxt_tok’
(
s
))

23787 
	`em™_İ
(
s
, 
OP_push_çl£
);

23789 
TOK_TRUE
:

23790 ià(
	`Ãxt_tok’
(
s
))

23792 
	`em™_İ
(
s
, 
OP_push_Œue
);

23794 
TOK_IDENT
:

23796 
JSAtom
 
Çme
;

23797 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

23798  
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

23800 ià(
	`³ek_tok’
(
s
, 
TRUE
è=ğ
TOK_ARROW
) {

23801 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_ARROW
,

23802 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

23803 
s
->
tok’
.
±r
, s->tok’.
lše_num
))

23805 } ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

23806 
	`³ek_tok’
(
s
, 
TRUE
) != '\n') {

23807 cÚ¡ 
ušt8_t
 *
sourû_±r
;

23808 
sourû_lše_num
;

23810 
sourû_±r
 = 
s
->
tok’
.
±r
;

23811 
sourû_lše_num
 = 
s
->
tok’
.
lše_num
;

23812 ià(
	`Ãxt_tok’
(
s
))

23814 ià(
s
->
tok’
.
v®
 =ğ
TOK_FUNCTION
) {

23815 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_EXPR
,

23816 
JS_FUNC_ASYNC
, 
JS_ATOM_NULL
,

23817 
sourû_±r
, 
sourû_lše_num
))

23819 } ià((
s
->
tok’
.
v®
 == '(' &&

23820 
	`js_·r£_sk_·»ns_tok’
(
s
, 
NULL
, 
TRUE
è=ğ
TOK_ARROW
) ||

23821 (
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
 &&

23822 
	`³ek_tok’
(
s
, 
TRUE
è=ğ
TOK_ARROW
)) {

23823 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_ARROW
,

23824 
JS_FUNC_ASYNC
, 
JS_ATOM_NULL
,

23825 
sourû_±r
, 
sourû_lše_num
))

23828 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, 
JS_ATOM_async
);

23829 
do_g‘_v¬
;

23832 ià(
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_¬gum’ts
 &&

23833 !
s
->
cur_func
->
¬gum’ts_®lowed
) {

23834 
	`js_·r£_”rÜ
(
s
, "'arguments' identifier is‚ot‡llowed in class field initializer");

23837 
Çme
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

23838 ià(
	`Ãxt_tok’
(
s
))

23840 
do_g‘_v¬
:

23841 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

23842 
	`em™_u32
(
s
, 
Çme
);

23843 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

23850 
sk_b™s
;

23851 ià(
	`js_·r£_sk_·»ns_tok’
(
s
, &
sk_b™s
, 
FALSE
) == '=') {

23852 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 0, 0, 
FALSE
, 
sk_b™s
 & 
SKIP_HAS_ELLIPSIS
, 
TRUE
))

23855 ià(
s
->
tok’
.
v®
 == '{') {

23856 ià(
	`js_·r£_objeù_l™”®
(
s
))

23859 ià(
	`js_·r£_¬¿y_l™”®
(
s
))

23865 
TOK_NEW
:

23866 ià(
	`Ãxt_tok’
(
s
))

23868 ià(
s
->
tok’
.
v®
 == '.') {

23869 ià(
	`Ãxt_tok’
(
s
))

23871 ià(!
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_rg‘
))

23872  
	`js_·r£_”rÜ
(
s
, "expectingarget");

23873 ià(!
s
->
cur_func
->
Ãw_rg‘_®lowed
)

23874  
	`js_·r£_”rÜ
(
s
, "new.target only‡llowed within functions");

23875 ià(
	`Ãxt_tok’
(
s
))

23877 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

23878 
	`em™_©om
(
s
, 
JS_ATOM_Ãw_rg‘
);

23879 
	`em™_u16
(
s
, 0);

23881 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
FALSE
))

23883 
acû±_Í¬’
 = 
TRUE
;

23884 ià(
s
->
tok’
.
v®
 != '(') {

23886 
	`em™_İ
(
s
, 
OP_dup
);

23887 
	`em™_İ
(
s
, 
OP_ÿÎ_cÚ¡ruùÜ
);

23888 
	`em™_u16
(
s
, 0);

23890 
ÿÎ_ty³
 = 
FUNC_CALL_NEW
;

23894 
TOK_SUPER
:

23895 ià(
	`Ãxt_tok’
(
s
))

23897 ià(
s
->
tok’
.
v®
 == '(') {

23898 ià(!
s
->
cur_func
->
su³r_ÿÎ_®lowed
)

23899  
	`js_·r£_”rÜ
(
s
, "super() is only valid in‡ derived class constructor");

23900 
ÿÎ_ty³
 = 
FUNC_CALL_SUPER_CTOR
;

23901 } ià(
s
->
tok’
.
v®
 == '.' || s->token.val == '[') {

23902 ià(!
s
->
cur_func
->
su³r_®lowed
)

23903  
	`js_·r£_”rÜ
(
s
, "'super' is only valid in‡ method");

23904 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

23905 
	`em™_©om
(
s
, 
JS_ATOM_this
);

23906 
	`em™_u16
(
s
, 0);

23907 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

23908 
	`em™_©om
(
s
, 
JS_ATOM_home_objeù
);

23909 
	`em™_u16
(
s
, 0);

23910 
	`em™_İ
(
s
, 
OP_g‘_su³r
);

23912  
	`js_·r£_”rÜ
(
s
, "invalid use of 'super'");

23915 
TOK_IMPORT
:

23916 ià(
	`Ãxt_tok’
(
s
))

23918 ià(
s
->
tok’
.
v®
 == '.') {

23919 ià(
	`Ãxt_tok’
(
s
))

23921 ià(!
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_m‘a
))

23922  
	`js_·r£_”rÜ
(
s
, "metaƒxpected");

23923 ià(!
s
->
is_moduË
)

23924  
	`js_·r£_”rÜ
(
s
, "import.meta only valid in module code");

23925 ià(
	`Ãxt_tok’
(
s
))

23927 
	`em™_İ
(
s
, 
OP_¥ecŸl_objeù
);

23928 
	`em™_u8
(
s
, 
OP_SPECIAL_OBJECT_IMPORT_META
);

23930 ià(
	`js_·r£_ex³ù
(
s
, '('))

23932 ià(!
acû±_Í¬’
)

23933  
	`js_·r£_”rÜ
(
s
, "invalid use of 'import()'");

23934 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

23936 ià(
	`js_·r£_ex³ù
(
s
, ')'))

23938 
	`em™_İ
(
s
, 
OP_impÜt
);

23942  
	`js_·r£_”rÜ
(
s
, "unexpectedoken inƒxpression: '%.*s'",

23943 ()(
s
->
buf_±r
 - s->
tok’
.
±r
), s->token.ptr);

23946 
İtiÚ®_chaššg_Ïb–
 = -1;

23948 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

23949 
BOOL
 
has_İtiÚ®_chaš
 = 
FALSE
;

23951 ià(
s
->
tok’
.
v®
 =ğ
TOK_QUESTION_MARK_DOT
) {

23953 ià(
	`Ãxt_tok’
(
s
))

23955 
has_İtiÚ®_chaš
 = 
TRUE
;

23956 ià(
s
->
tok’
.
v®
 =ğ'(' && 
acû±_Í¬’
) {

23957 
·r£_func_ÿÎ
;

23958 } ià(
s
->
tok’
.
v®
 == '[') {

23959 
·r£_¬¿y_acûss
;

23961 
·r£_´İ”ty
;

23963 } ià(
s
->
tok’
.
v®
 =ğ
TOK_TEMPLATE
 &&

23964 
ÿÎ_ty³
 =ğ
FUNC_CALL_NORMAL
) {

23965 ià(
İtiÚ®_chaššg_Ïb–
 >= 0) {

23966  
	`js_·r£_”rÜ
(
s
, "template†iteral cannot‡ppear in‡n optional chain");

23968 
ÿÎ_ty³
 = 
FUNC_CALL_TEMPLATE
;

23969 
·r£_func_ÿÎ2
;

23970 } ià(
s
->
tok’
.
v®
 =ğ'(' && 
acû±_Í¬’
) {

23971 
İcode
, 
¬g_couÁ
, 
drİ_couÁ
;

23974 
·r£_func_ÿÎ
:

23975 ià(
	`Ãxt_tok’
(
s
))

23978 ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_NORMAL
) {

23979 
·r£_func_ÿÎ2
:

23980 
İcode
 = 
	`g‘_´ev_İcode
(
fd
)) {

23981 
OP_g‘_f›ld
:

23983 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
OP_g‘_f›ld2
;

23984 
drİ_couÁ
 = 2;

23986 
OP_scİe_g‘_´iv©e_f›ld
:

23988 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
OP_scİe_g‘_´iv©e_f›ld2
;

23989 
drİ_couÁ
 = 2;

23991 
OP_g‘_¬¿y_–
:

23993 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
OP_g‘_¬¿y_–2
;

23994 
drİ_couÁ
 = 2;

23996 
OP_scİe_g‘_v¬
:

23998 
JSAtom
 
Çme
;

23999 
scİe
;

24000 
Çme
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

24001 
scİe
 = 
	`g‘_u16
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 5);

24002 ià(
Çme
 =ğ
JS_ATOM_ev®
 && 
ÿÎ_ty³
 =ğ
FUNC_CALL_NORMAL
) {

24004 
İcode
 = 
OP_ev®
;

24014 ià(
	`has_w™h_scİe
(
fd
, 
scİe
)) {

24015 
İcode
 = 
OP_scİe_g‘_»f
;

24016 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
İcode
;

24019 
drİ_couÁ
 = 1;

24022 
OP_g‘_su³r_v®ue
:

24023 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
OP_g‘_¬¿y_–
;

24025 
İcode
 = 
OP_g‘_¬¿y_–
;

24026 
drİ_couÁ
 = 2;

24029 
İcode
 = 
OP_šv®id
;

24030 
drİ_couÁ
 = 1;

24033 ià(
has_İtiÚ®_chaš
) {

24034 
	`İtiÚ®_chaš_‹¡
(
s
, &
İtiÚ®_chaššg_Ïb–
,

24035 
drİ_couÁ
);

24038 
İcode
 = 
OP_šv®id
;

24041 ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_TEMPLATE
) {

24042 ià(
	`js_·r£_‹m¶©e
(
s
, 1, &
¬g_couÁ
))

24044 
em™_func_ÿÎ
;

24045 } ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_SUPER_CTOR
) {

24046 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

24047 
	`em™_©om
(
s
, 
JS_ATOM_this_aùive_func
);

24048 
	`em™_u16
(
s
, 0);

24050 
	`em™_İ
(
s
, 
OP_g‘_su³r
);

24052 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

24053 
	`em™_©om
(
s
, 
JS_ATOM_Ãw_rg‘
);

24054 
	`em™_u16
(
s
, 0);

24055 } ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_NEW
) {

24056 
	`em™_İ
(
s
, 
OP_dup
);

24060 
¬g_couÁ
 = 0;

24061 
s
->
tok’
.
v®
 != ')') {

24062 ià(
¬g_couÁ
 >= 65535) {

24063  
	`js_·r£_”rÜ
(
s
, "Too many call‡rguments");

24065 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
)

24067 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

24069 
¬g_couÁ
++;

24070 ià(
s
->
tok’
.
v®
 == ')')

24073 ià(
	`js_·r£_ex³ù
(
s
, ','))

24076 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

24077 
	`em™_İ
(
s
, 
OP_¬¿y_äom
);

24078 
	`em™_u16
(
s
, 
¬g_couÁ
);

24079 
	`em™_İ
(
s
, 
OP_push_i32
);

24080 
	`em™_u32
(
s
, 
¬g_couÁ
);

24083 
s
->
tok’
.
v®
 != ')') {

24084 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

24085 ià(
	`Ãxt_tok’
(
s
))

24087 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

24091 
	`em™_İ
(
s
, 
OP_­³nd
);

24093 
Ïb–_Ãxt
, 
Ïb–_dÚe
;

24094 
Ïb–_Ãxt
 = 
	`Ãw_Ïb–
(
s
);

24095 
Ïb–_dÚe
 = 
	`Ãw_Ïb–
(
s
);

24097 
	`em™_İ
(
s
, 
OP_fÜ_of_¡¬t
);

24098 
	`em™_İ
(
s
, 
OP_rÙ5l
);

24099 
	`em™_İ
(
s
, 
OP_rÙ5l
);

24100 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

24102 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

24103 
	`em™_u8
(
s
, 2);

24104 
	`em™_gÙo
(
s
, 
OP_if_Œue
, 
Ïb–_dÚe
);

24107 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

24108 
	`em™_İ
(
s
, 
OP_šc
);

24109 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_Ãxt
);

24110 
	`em™_Ïb–
(
s
, 
Ïb–_dÚe
);

24112 
	`em™_İ
(
s
, 
OP_drİ
);

24113 
	`em™_İ
(
s
, 
OP_n1
);

24114 
	`em™_İ
(
s
, 
OP_n1
);

24115 
	`em™_İ
(
s
, 
OP_n1
);

24118 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

24121 
	`em™_İ
(
s
, 
OP_defše_¬¿y_–
);

24122 
	`em™_İ
(
s
, 
OP_šc
);

24124 ià(
s
->
tok’
.
v®
 == ')')

24127 ià(
	`js_·r£_ex³ù
(
s
, ','))

24130 ià(
	`Ãxt_tok’
(
s
))

24133 
	`em™_İ
(
s
, 
OP_drİ
);

24136 
İcode
) {

24137 
OP_g‘_f›ld
:

24138 
OP_scİe_g‘_´iv©e_f›ld
:

24139 
OP_g‘_¬¿y_–
:

24140 
OP_scİe_g‘_»f
:

24142 
	`em™_İ
(
s
, 
OP_³rm3
);

24143 
	`em™_İ
(
s
, 
OP_­¶y
);

24144 
	`em™_u16
(
s
, 
ÿÎ_ty³
 =ğ
FUNC_CALL_NEW
);

24146 
OP_ev®
:

24147 
	`em™_İ
(
s
, 
OP_­¶y_ev®
);

24148 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

24149 
fd
->
has_ev®_ÿÎ
 = 
TRUE
;

24152 ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_SUPER_CTOR
) {

24153 
	`em™_İ
(
s
, 
OP_­¶y
);

24154 
	`em™_u16
(
s
, 1);

24156 
	`em™_İ
(
s
, 
OP_dup
);

24157 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

24158 
	`em™_©om
(
s
, 
JS_ATOM_this
);

24159 
	`em™_u16
(
s
, 0);

24161 
	`em™_şass_f›ld_š™
(
s
);

24162 } ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_NEW
) {

24164 
	`em™_İ
(
s
, 
OP_³rm3
);

24165 
	`em™_İ
(
s
, 
OP_­¶y
);

24166 
	`em™_u16
(
s
, 1);

24169 
	`em™_İ
(
s
, 
OP_undefšed
);

24170 
	`em™_İ
(
s
, 
OP_sw­
);

24171 
	`em™_İ
(
s
, 
OP_­¶y
);

24172 
	`em™_u16
(
s
, 0);

24177 ià(
	`Ãxt_tok’
(
s
))

24179 
em™_func_ÿÎ
:

24180 
İcode
) {

24181 
OP_g‘_f›ld
:

24182 
OP_scİe_g‘_´iv©e_f›ld
:

24183 
OP_g‘_¬¿y_–
:

24184 
OP_scİe_g‘_»f
:

24185 
	`em™_İ
(
s
, 
OP_ÿÎ_m‘hod
);

24186 
	`em™_u16
(
s
, 
¬g_couÁ
);

24188 
OP_ev®
:

24189 
	`em™_İ
(
s
, 
OP_ev®
);

24190 
	`em™_u16
(
s
, 
¬g_couÁ
);

24191 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

24192 
fd
->
has_ev®_ÿÎ
 = 
TRUE
;

24195 ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_SUPER_CTOR
) {

24196 
	`em™_İ
(
s
, 
OP_ÿÎ_cÚ¡ruùÜ
);

24197 
	`em™_u16
(
s
, 
¬g_couÁ
);

24200 
	`em™_İ
(
s
, 
OP_dup
);

24201 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

24202 
	`em™_©om
(
s
, 
JS_ATOM_this
);

24203 
	`em™_u16
(
s
, 0);

24205 
	`em™_şass_f›ld_š™
(
s
);

24206 } ià(
ÿÎ_ty³
 =ğ
FUNC_CALL_NEW
) {

24207 
	`em™_İ
(
s
, 
OP_ÿÎ_cÚ¡ruùÜ
);

24208 
	`em™_u16
(
s
, 
¬g_couÁ
);

24210 
	`em™_İ
(
s
, 
OP_ÿÎ
);

24211 
	`em™_u16
(
s
, 
¬g_couÁ
);

24216 
ÿÎ_ty³
 = 
FUNC_CALL_NORMAL
;

24217 } ià(
s
->
tok’
.
v®
 == '.') {

24218 ià(
	`Ãxt_tok’
(
s
))

24220 ià(
s
->
tok’
.
v®
 =ğ
TOK_PRIVATE_NAME
) {

24222 ià(
	`g‘_´ev_İcode
(
fd
è=ğ
OP_g‘_su³r
) {

24223  
	`js_·r£_”rÜ
(
s
, "private class field forbidden‡fter super");

24225 
	`em™_İ
(
s
, 
OP_scİe_g‘_´iv©e_f›ld
);

24226 
	`em™_©om
(
s
, s->
tok’
.
u
.
id’t
.
©om
);

24227 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

24229 
·r£_´İ”ty
:

24230 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

24231  
	`js_·r£_”rÜ
(
s
, "expecting field‚ame");

24233 ià(
	`g‘_´ev_İcode
(
fd
è=ğ
OP_g‘_su³r
) {

24234 
JSV®ue
 
v®
;

24235 
»t
;

24236 
v®
 = 
	`JS_AtomToV®ue
(
s
->
ùx
, s->
tok’
.
u
.
id’t
.
©om
);

24237 
»t
 = 
	`em™_push_cÚ¡
(
s
, 
v®
, 1);

24238 
	`JS_F»eV®ue
(
s
->
ùx
, 
v®
);

24239 ià(
»t
)

24241 
	`em™_İ
(
s
, 
OP_g‘_su³r_v®ue
);

24243 ià(
has_İtiÚ®_chaš
) {

24244 
	`İtiÚ®_chaš_‹¡
(
s
, &
İtiÚ®_chaššg_Ïb–
, 1);

24246 
	`em™_İ
(
s
, 
OP_g‘_f›ld
);

24247 
	`em™_©om
(
s
, s->
tok’
.
u
.
id’t
.
©om
);

24250 ià(
	`Ãxt_tok’
(
s
))

24252 } ià(
s
->
tok’
.
v®
 == '[') {

24253 
´ev_İ
;

24255 
·r£_¬¿y_acûss
:

24256 
´ev_İ
 = 
	`g‘_´ev_İcode
(
fd
);

24257 ià(
has_İtiÚ®_chaš
) {

24258 
	`İtiÚ®_chaš_‹¡
(
s
, &
İtiÚ®_chaššg_Ïb–
, 1);

24260 ià(
	`Ãxt_tok’
(
s
))

24262 ià(
	`js_·r£_ex´
(
s
))

24264 ià(
	`js_·r£_ex³ù
(
s
, ']'))

24266 ià(
´ev_İ
 =ğ
OP_g‘_su³r
) {

24267 
	`em™_İ
(
s
, 
OP_g‘_su³r_v®ue
);

24269 
	`em™_İ
(
s
, 
OP_g‘_¬¿y_–
);

24275 ià(
İtiÚ®_chaššg_Ïb–
 >= 0)

24276 
	`em™_Ïb–
(
s
, 
İtiÚ®_chaššg_Ïb–
);

24278 
	}
}

24280 
__exû±iÚ
 
	$js_·r£_d–‘e
(
JSP¬£S‹
 *
s
)

24282 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

24283 
JSAtom
 
Çme
;

24284 
İcode
;

24286 ià(
	`Ãxt_tok’
(
s
))

24288 ià(
	`js_·r£_uÇry
(
s
, -1))

24290 
İcode
 = 
	`g‘_´ev_İcode
(
fd
)) {

24291 
OP_g‘_f›ld
:

24293 
JSV®ue
 
v®
;

24294 
»t
;

24296 
Çme
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

24297 
fd
->
by‹_code
.
size
 = fd->
Ï¡_İcode_pos
;

24298 
fd
->
Ï¡_İcode_pos
 = -1;

24299 
v®
 = 
	`JS_AtomToV®ue
(
s
->
ùx
, 
Çme
);

24300 
»t
 = 
	`em™_push_cÚ¡
(
s
, 
v®
, 1);

24301 
	`JS_F»eV®ue
(
s
->
ùx
, 
v®
);

24302 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

24303 ià(
»t
)

24304  
»t
;

24306 
do_d–‘e
;

24307 
OP_g‘_¬¿y_–
:

24308 
fd
->
by‹_code
.
size
 = fd->
Ï¡_İcode_pos
;

24309 
fd
->
Ï¡_İcode_pos
 = -1;

24310 
do_d–‘e
:

24311 
	`em™_İ
(
s
, 
OP_d–‘e
);

24313 
OP_scİe_g‘_v¬
:

24315 
Çme
 = 
	`g‘_u32
(
fd
->
by‹_code
.
buf
 + fd->
Ï¡_İcode_pos
 + 1);

24316 ià(
Çme
 =ğ
JS_ATOM_this
 ||‚am=ğ
JS_ATOM_Ãw_rg‘
)

24317 
»t_Œue
;

24318 ià(
fd
->
js_mode
 & 
JS_MODE_STRICT
) {

24319  
	`js_·r£_”rÜ
(
s
, "cannot delete‡ direct„eference in strict mode");

24321 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
OP_scİe_d–‘e_v¬
;

24324 
OP_scİe_g‘_´iv©e_f›ld
:

24325  
	`js_·r£_”rÜ
(
s
, "cannot delete‡…rivate class field");

24326 
OP_g‘_su³r_v®ue
:

24327 
	`em™_İ
(
s
, 
OP_throw_v¬
);

24328 
	`em™_©om
(
s
, 
JS_ATOM_NULL
);

24329 
	`em™_u8
(
s
, 
JS_THROW_VAR_DELETE_SUPER
);

24332 
»t_Œue
:

24333 
	`em™_İ
(
s
, 
OP_drİ
);

24334 
	`em™_İ
(
s
, 
OP_push_Œue
);

24338 
	}
}

24340 
__exû±iÚ
 
	$js_·r£_uÇry
(
JSP¬£S‹
 *
s
, 
expÚ’tŸtiÚ_æag
)

24342 
İ
;

24344 
s
->
tok’
.
v®
) {

24349 
TOK_VOID
:

24350 
İ
 = 
s
->
tok’
.
v®
;

24351 ià(
	`Ãxt_tok’
(
s
))

24353 ià(
	`js_·r£_uÇry
(
s
, -1))

24355 
İ
) {

24357 
	`em™_İ
(
s
, 
OP_Ãg
);

24360 
	`em™_İ
(
s
, 
OP_¶us
);

24363 
	`em™_İ
(
s
, 
OP_ÊÙ
);

24366 
	`em™_İ
(
s
, 
OP_nÙ
);

24368 
TOK_VOID
:

24369 
	`em™_İ
(
s
, 
OP_drİ
);

24370 
	`em™_İ
(
s
, 
OP_undefšed
);

24373 
	`abÜt
();

24375 
expÚ’tŸtiÚ_æag
 = 0;

24377 
TOK_DEC
:

24378 
TOK_INC
:

24380 
İcode
, 
İ
, 
scİe
, 
Ïb–
;

24381 
JSAtom
 
Çme
;

24382 
İ
 = 
s
->
tok’
.
v®
;

24383 ià(
	`Ãxt_tok’
(
s
))

24386 ià(
	`js_·r£_uÇry
(
s
, 0))

24388 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
Çme
, &
Ïb–
, 
NULL
, 
TRUE
, 
İ
))

24390 
	`em™_İ
(
s
, 
OP_dec
 + 
İ
 - 
TOK_DEC
);

24391 
	`put_lv®ue
(
s
, 
İcode
, 
scİe
, 
Çme
, 
Ïb–
, 
FALSE
);

24394 
TOK_TYPEOF
:

24396 
JSFunùiÚDef
 *
fd
;

24397 ià(
	`Ãxt_tok’
(
s
))

24399 ià(
	`js_·r£_uÇry
(
s
, -1))

24403 
fd
 = 
s
->
cur_func
;

24404 ià(
	`g‘_´ev_İcode
(
fd
è=ğ
OP_scİe_g‘_v¬
) {

24405 
fd
->
by‹_code
.
buf
[fd->
Ï¡_İcode_pos
] = 
OP_scİe_g‘_v¬_undef
;

24407 
	`em™_İ
(
s
, 
OP_ty³of
);

24408 
expÚ’tŸtiÚ_æag
 = 0;

24411 
TOK_DELETE
:

24412 ià(
	`js_·r£_d–‘e
(
s
))

24414 
expÚ’tŸtiÚ_æag
 = 0;

24416 
TOK_AWAIT
:

24417 ià(!(
s
->
cur_func
->
func_kšd
 & 
JS_FUNC_ASYNC
))

24418  
	`js_·r£_”rÜ
(
s
, "unexpected 'await' keyword");

24419 ià(!
s
->
cur_func
->
š_funùiÚ_body
)

24420  
	`js_·r£_”rÜ
(
s
, "await in defaultƒxpression");

24421 ià(
	`Ãxt_tok’
(
s
))

24423 ià(
	`js_·r£_uÇry
(
s
, -1))

24425 
	`em™_İ
(
s
, 
OP_awa™
);

24426 
expÚ’tŸtiÚ_æag
 = 0;

24429 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
TRUE
))

24431 ià(!
s
->
gÙ_lf
 &&

24432 (
s
->
tok’
.
v®
 =ğ
TOK_DEC
 || s->tok’.v® =ğ
TOK_INC
)) {

24433 
İcode
, 
İ
, 
scİe
, 
Ïb–
;

24434 
JSAtom
 
Çme
;

24435 
İ
 = 
s
->
tok’
.
v®
;

24436 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
Çme
, &
Ïb–
, 
NULL
, 
TRUE
, 
İ
))

24438 
	`em™_İ
(
s
, 
OP_po¡_dec
 + 
İ
 - 
TOK_DEC
);

24439 
	`put_lv®ue
(
s
, 
İcode
, 
scİe
, 
Çme
, 
Ïb–
, 
TRUE
);

24440 ià(
	`Ãxt_tok’
(
s
))

24445 ià(
expÚ’tŸtiÚ_æag
) {

24446 #ifdeà
CONFIG_BIGNUM


24447 ià(
s
->
tok’
.
v®
 =ğ
TOK_POW
 || s->tok’.v® =ğ
TOK_MATH_POW
) {

24451 ià(!(
s
->
cur_func
->
js_mode
 & 
JS_MODE_MATH
)) {

24452 ià(
expÚ’tŸtiÚ_æag
 < 0) {

24453 
	`JS_ThrowSyÁaxE¼Ü
(
s
->
ùx
, "unparenthesized unaryƒxpression can't‡ppear onhe†eft-hand side of '**'");

24457 ià(
	`Ãxt_tok’
(
s
))

24459 ià(
	`js_·r£_uÇry
(
s
, 1))

24461 
	`em™_İ
(
s
, 
OP_pow
);

24464 ià(
s
->
tok’
.
v®
 =ğ
TOK_POW
) {

24470 ià(
expÚ’tŸtiÚ_æag
 < 0) {

24471 
	`JS_ThrowSyÁaxE¼Ü
(
s
->
ùx
, "unparenthesized unaryƒxpression can't‡ppear onhe†eft-hand side of '**'");

24474 ià(
	`Ãxt_tok’
(
s
))

24476 ià(
	`js_·r£_uÇry
(
s
, 1))

24478 
	`em™_İ
(
s
, 
OP_pow
);

24483 
	}
}

24485 
__exû±iÚ
 
	$js_·r£_ex´_bš¬y
(
JSP¬£S‹
 *
s
, 
Ëv–
,

24486 
BOOL
 
š_acû±ed
)

24488 
İ
, 
İcode
;

24490 ià(
Ëv–
 == 0) {

24491  
	`js_·r£_uÇry
(
s
, 1);

24493 ià(
	`js_·r£_ex´_bš¬y
(
s
, 
Ëv–
 - 1, 
š_acû±ed
))

24496 
İ
 = 
s
->
tok’
.
v®
;

24497 
Ëv–
) {

24499 
İ
) {

24501 
İcode
 = 
OP_mul
;

24504 
İcode
 = 
OP_div
;

24507 #ifdeà
CONFIG_BIGNUM


24508 ià(
s
->
cur_func
->
js_mode
 & 
JS_MODE_MATH
)

24509 
İcode
 = 
OP_m©h_mod
;

24512 
İcode
 = 
OP_mod
;

24519 
İ
) {

24521 
İcode
 = 
OP_add
;

24524 
İcode
 = 
OP_sub
;

24531 
İ
) {

24532 
TOK_SHL
:

24533 
İcode
 = 
OP_shl
;

24535 
TOK_SAR
:

24536 
İcode
 = 
OP_§r
;

24538 
TOK_SHR
:

24539 
İcode
 = 
OP_shr
;

24546 
İ
) {

24548 
İcode
 = 
OP_É
;

24551 
İcode
 = 
OP_gt
;

24553 
TOK_LTE
:

24554 
İcode
 = 
OP_Ée
;

24556 
TOK_GTE
:

24557 
İcode
 = 
OP_g‹
;

24559 
TOK_INSTANCEOF
:

24560 
İcode
 = 
OP_š¡ªûof
;

24562 
TOK_IN
:

24563 ià(
š_acû±ed
) {

24564 
İcode
 = 
OP_š
;

24574 
İ
) {

24575 
TOK_EQ
:

24576 
İcode
 = 
OP_eq
;

24578 
TOK_NEQ
:

24579 
İcode
 = 
OP_Ãq
;

24581 
TOK_STRICT_EQ
:

24582 
İcode
 = 
OP_¡riù_eq
;

24584 
TOK_STRICT_NEQ
:

24585 
İcode
 = 
OP_¡riù_Ãq
;

24592 
İ
) {

24594 
İcode
 = 
OP_ªd
;

24601 
İ
) {

24603 
İcode
 = 
OP_xÜ
;

24610 
İ
) {

24612 
İcode
 = 
OP_Ü
;

24619 
	`abÜt
();

24621 ià(
	`Ãxt_tok’
(
s
))

24623 ià(
	`js_·r£_ex´_bš¬y
(
s
, 
Ëv–
 - 1, 
š_acû±ed
))

24625 
	`em™_İ
(
s
, 
İcode
);

24628 
	}
}

24630 
__exû±iÚ
 
	$js_·r£_logiÿl_ªd_Ü
(
JSP¬£S‹
 *
s
, 
İ
,

24631 
BOOL
 
š_acû±ed
)

24633 
Ïb–1
;

24635 ià(
İ
 =ğ
TOK_LAND
) {

24636 ià(
	`js_·r£_ex´_bš¬y
(
s
, 8, 
š_acû±ed
))

24639 ià(
	`js_·r£_logiÿl_ªd_Ü
(
s
, 
TOK_LAND
, 
š_acû±ed
))

24642 ià(
s
->
tok’
.
v®
 =ğ
İ
) {

24643 
Ïb–1
 = 
	`Ãw_Ïb–
(
s
);

24646 ià(
	`Ãxt_tok’
(
s
))

24648 
	`em™_İ
(
s
, 
OP_dup
);

24649 
	`em™_gÙo
(
s
, 
İ
 =ğ
TOK_LAND
 ? 
OP_if_çl£
 : 
OP_if_Œue
, 
Ïb–1
);

24650 
	`em™_İ
(
s
, 
OP_drİ
);

24652 ià(
İ
 =ğ
TOK_LAND
) {

24653 ià(
	`js_·r£_ex´_bš¬y
(
s
, 8, 
š_acû±ed
))

24656 ià(
	`js_·r£_logiÿl_ªd_Ü
(
s
, 
TOK_LAND
, 
š_acû±ed
))

24659 ià(
s
->
tok’
.
v®
 !ğ
İ
) {

24660 ià(
s
->
tok’
.
v®
 =ğ
TOK_DOUBLE_QUESTION_MARK
)

24661  
	`js_·r£_”rÜ
(
s
, "cannot mix ?? with && or ||");

24666 
	`em™_Ïb–
(
s
, 
Ïb–1
);

24669 
	}
}

24671 
__exû±iÚ
 
	$js_·r£_cßËsû_ex´
(
JSP¬£S‹
 *
s
, 
BOOL
 
š_acû±ed
)

24673 
Ïb–1
;

24675 ià(
	`js_·r£_logiÿl_ªd_Ü
(
s
, 
TOK_LOR
, 
š_acû±ed
))

24677 ià(
s
->
tok’
.
v®
 =ğ
TOK_DOUBLE_QUESTION_MARK
) {

24678 
Ïb–1
 = 
	`Ãw_Ïb–
(
s
);

24680 ià(
	`Ãxt_tok’
(
s
))

24683 
	`em™_İ
(
s
, 
OP_dup
);

24684 
	`em™_İ
(
s
, 
OP_is_undefšed_Ü_nuÎ
);

24685 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–1
);

24686 
	`em™_İ
(
s
, 
OP_drİ
);

24688 ià(
	`js_·r£_ex´_bš¬y
(
s
, 8, 
š_acû±ed
))

24690 ià(
s
->
tok’
.
v®
 !ğ
TOK_DOUBLE_QUESTION_MARK
)

24693 
	`em™_Ïb–
(
s
, 
Ïb–1
);

24696 
	}
}

24698 
__exû±iÚ
 
	$js_·r£_cÚd_ex´
(
JSP¬£S‹
 *
s
, 
BOOL
 
š_acû±ed
)

24700 
Ïb–1
, 
Ïb–2
;

24702 ià(
	`js_·r£_cßËsû_ex´
(
s
, 
š_acû±ed
))

24704 ià(
s
->
tok’
.
v®
 == '?') {

24705 ià(
	`Ãxt_tok’
(
s
))

24707 
Ïb–1
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

24709 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

24711 ià(
	`js_·r£_ex³ù
(
s
, ':'))

24714 
Ïb–2
 = 
	`em™_gÙo
(
s
, 
OP_gÙo
, -1);

24716 
	`em™_Ïb–
(
s
, 
Ïb–1
);

24718 ià(
	`js_·r£_assign_ex´
(
s
, 
š_acû±ed
))

24721 
	`em™_Ïb–
(
s
, 
Ïb–2
);

24724 
	}
}

24726 
em™_»tuº
(
JSP¬£S‹
 *
s
, 
BOOL
 
hasv®
);

24728 
__exû±iÚ
 
	$js_·r£_assign_ex´
(
JSP¬£S‹
 *
s
, 
BOOL
 
š_acû±ed
)

24730 
İcode
, 
İ
, 
scİe
;

24731 
JSAtom
 
Çme0
 = 
JS_ATOM_NULL
;

24732 
JSAtom
 
Çme
;

24734 ià(
s
->
tok’
.
v®
 =ğ
TOK_YIELD
) {

24735 
BOOL
 
is_¡¬
 = 
FALSE
;

24736 ià(!(
s
->
cur_func
->
func_kšd
 & 
JS_FUNC_GENERATOR
))

24737  
	`js_·r£_”rÜ
(
s
, "unexpected 'yield' keyword");

24738 ià(!
s
->
cur_func
->
š_funùiÚ_body
)

24739  
	`js_·r£_”rÜ
(
s
, "yield in defaultƒxpression");

24740 ià(
	`Ãxt_tok’
(
s
))

24744 ià(
s
->
tok’
.
v®
 != ';' && s->token.val != ')' &&

24745 
s
->
tok’
.
v®
 != ']' && s->token.val != '}' &&

24746 
s
->
tok’
.
v®
 !ğ',' && s->tok’.v® !ğ':' && !s->
gÙ_lf
) {

24747 ià(
s
->
tok’
.
v®
 == '*') {

24748 
is_¡¬
 = 
TRUE
;

24749 ià(
	`Ãxt_tok’
(
s
))

24752 ià(
	`js_·r£_assign_ex´
(
s
, 
š_acû±ed
))

24755 
	`em™_İ
(
s
, 
OP_undefšed
);

24757 ià(
s
->
cur_func
->
func_kšd
 =ğ
JS_FUNC_ASYNC_GENERATOR
) {

24758 
Ïb–_loİ
, 
Ïb–_»tuº
, 
Ïb–_Ãxt
;

24759 
Ïb–_»tuº1
, 
Ïb–_y›ld
, 
Ïb–_throw
, 
Ïb–_throw1
;

24760 
Ïb–_throw2
;

24762 ià(
is_¡¬
) {

24763 
Ïb–_loİ
 = 
	`Ãw_Ïb–
(
s
);

24764 
Ïb–_y›ld
 = 
	`Ãw_Ïb–
(
s
);

24766 
	`em™_İ
(
s
, 
OP_fÜ_awa™_of_¡¬t
);

24770 
	`em™_İ
(
s
, 
OP_drİ
);

24771 
	`em™_İ
(
s
, 
OP_undefšed
);

24773 
	`em™_İ
(
s
, 
OP_undefšed
);

24775 
	`em™_Ïb–
(
s
, 
Ïb–_loİ
);

24776 
	`em™_İ
(
s
, 
OP_async_™”©Ü_Ãxt
);

24777 
	`em™_İ
(
s
, 
OP_awa™
);

24778 
	`em™_İ
(
s
, 
OP_™”©Ü_g‘_v®ue_dÚe
);

24779 
Ïb–_Ãxt
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

24780 
	`em™_İ
(
s
, 
OP_awa™
);

24781 
	`em™_Ïb–
(
s
, 
Ïb–_y›ld
);

24782 
	`em™_İ
(
s
, 
OP_async_y›ld_¡¬
);

24783 
	`em™_İ
(
s
, 
OP_dup
);

24784 
Ïb–_»tuº
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

24785 
	`em™_İ
(
s
, 
OP_drİ
);

24786 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_loİ
);

24788 
	`em™_Ïb–
(
s
, 
Ïb–_»tuº
);

24789 
	`em™_İ
(
s
, 
OP_push_i32
);

24790 
	`em™_u32
(
s
, 2);

24791 
	`em™_İ
(
s
, 
OP_¡riù_eq
);

24792 
Ïb–_throw
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

24795 
	`em™_İ
(
s
, 
OP_awa™
);

24796 
	`em™_İ
(
s
, 
OP_async_™”©Ü_g‘
);

24797 
	`em™_u8
(
s
, 0);

24798 
Ïb–_»tuº1
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

24799 
	`em™_İ
(
s
, 
OP_awa™
);

24800 
	`em™_İ
(
s
, 
OP_™”©Ü_g‘_v®ue_dÚe
);

24803 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–_y›ld
);

24805 
	`em™_Ïb–
(
s
, 
Ïb–_»tuº1
);

24806 
	`em™_İ
(
s
, 
OP_n
);

24807 
	`em™_İ
(
s
, 
OP_n
);

24808 
	`em™_İ
(
s
, 
OP_n
);

24809 
	`em™_»tuº
(
s
, 
TRUE
);

24812 
	`em™_Ïb–
(
s
, 
Ïb–_throw
);

24813 
	`em™_İ
(
s
, 
OP_async_™”©Ü_g‘
);

24814 
	`em™_u8
(
s
, 1);

24815 
Ïb–_throw1
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

24816 
	`em™_İ
(
s
, 
OP_awa™
);

24817 
	`em™_İ
(
s
, 
OP_™”©Ü_g‘_v®ue_dÚe
);

24818 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–_y›ld
);

24821 
	`em™_İ
(
s
, 
OP_awa™
);

24822 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_Ãxt
);

24824 
	`em™_Ïb–
(
s
, 
Ïb–_throw1
);

24825 
	`em™_İ
(
s
, 
OP_async_™”©Ü_g‘
);

24826 
	`em™_u8
(
s
, 0);

24827 
Ïb–_throw2
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

24828 
	`em™_İ
(
s
, 
OP_awa™
);

24829 
	`em™_Ïb–
(
s
, 
Ïb–_throw2
);

24830 
	`em™_İ
(
s
, 
OP_async_™”©Ü_g‘
);

24831 
	`em™_u8
(
s
, 2);

24832 
	`em™_İ
(
s
, 
OP_drİ
);

24834 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

24835 
	`em™_İ
(
s
, 
OP_n
);

24837 
	`em™_İ
(
s
, 
OP_n
);

24838 
	`em™_İ
(
s
, 
OP_n
);

24840 
	`em™_İ
(
s
, 
OP_awa™
);

24841 
	`em™_İ
(
s
, 
OP_y›ld
);

24842 
Ïb–_Ãxt
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

24843 
	`em™_»tuº
(
s
, 
TRUE
);

24844 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

24847 
Ïb–_Ãxt
;

24848 ià(
is_¡¬
) {

24849 
	`em™_İ
(
s
, 
OP_fÜ_of_¡¬t
);

24850 
	`em™_İ
(
s
, 
OP_drİ
);

24851 
	`em™_İ
(
s
, 
OP_y›ld_¡¬
);

24853 
	`em™_İ
(
s
, 
OP_y›ld
);

24855 
Ïb–_Ãxt
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

24856 
	`em™_»tuº
(
s
, 
TRUE
);

24857 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

24861 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

24863 
Çme0
 = 
s
->
tok’
.
u
.
id’t
.
©om
;

24865 ià(
	`js_·r£_cÚd_ex´
(
s
, 
š_acû±ed
))

24868 
İ
 = 
s
->
tok’
.
v®
;

24869 ià(
İ
 =ğ'=' || (İ >ğ
TOK_MUL_ASSIGN
 && o°<ğ
TOK_POW_ASSIGN
)) {

24870 
Ïb–
;

24871 ià(
	`Ãxt_tok’
(
s
))

24873 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
Çme
, &
Ïb–
, 
NULL
, (
İ
 != '='), op) < 0)

24876 ià(
	`js_·r£_assign_ex´
(
s
, 
š_acû±ed
)) {

24877 
	`JS_F»eAtom
(
s
->
ùx
, 
Çme
);

24881 ià(
İ
 == '=') {

24882 ià(
İcode
 =ğ
OP_g‘_»f_v®ue
 && 
Çme
 =ğ
Çme0
) {

24883 
	`£t_objeù_Çme
(
s
, 
Çme
);

24886 cÚ¡ 
ušt8_t
 
assign_İcodes
[] = {

24887 
OP_mul
, 
OP_div
, 
OP_mod
, 
OP_add
, 
OP_sub
,

24888 
OP_shl
, 
OP_§r
, 
OP_shr
, 
OP_ªd
, 
OP_xÜ
, 
OP_Ü
,

24889 #ifdeà
CONFIG_BIGNUM


24890 
OP_pow
,

24892 
OP_pow
,

24894 
İ
 = 
assign_İcodes
[İ - 
TOK_MUL_ASSIGN
];

24895 #ifdeà
CONFIG_BIGNUM


24896 ià(
s
->
cur_func
->
js_mode
 & 
JS_MODE_MATH
) {

24897 ià(
İ
 =ğ
OP_mod
)

24898 
İ
 = 
OP_m©h_mod
;

24901 
	`em™_İ
(
s
, 
İ
);

24903 
	`put_lv®ue
(
s
, 
İcode
, 
scİe
, 
Çme
, 
Ïb–
, 
FALSE
);

24906 
	}
}

24908 
__exû±iÚ
 
	$js_·r£_ex´2
(
JSP¬£S‹
 *
s
, 
BOOL
 
š_acû±ed
)

24910 
BOOL
 
comma
 = 
FALSE
;

24912 ià(
	`js_·r£_assign_ex´
(
s
, 
š_acû±ed
))

24914 ià(
comma
) {

24920 
s
->
cur_func
->
Ï¡_İcode_pos
 = -1;

24922 ià(
s
->
tok’
.
v®
 != ',')

24924 
comma
 = 
TRUE
;

24925 ià(
	`Ãxt_tok’
(
s
))

24927 
	`em™_İ
(
s
, 
OP_drİ
);

24930 
	}
}

24932 
__exû±iÚ
 
	$js_·r£_ex´
(
JSP¬£S‹
 *
s
)

24934  
	`js_·r£_ex´2
(
s
, 
TRUE
);

24935 
	}
}

24937 
	$push_b»ak_’Œy
(
JSFunùiÚDef
 *
fd
, 
BlockEnv
 *
be
,

24938 
JSAtom
 
Ïb–_Çme
,

24939 
Ïb–_b»ak
, 
Ïb–_cÚt
,

24940 
drİ_couÁ
)

24942 
be
->
´ev
 = 
fd
->
tİ_b»ak
;

24943 
fd
->
tİ_b»ak
 = 
be
;

24944 
be
->
Ïb–_Çme
 =†abel_name;

24945 
be
->
Ïb–_b»ak
 =†abel_break;

24946 
be
->
Ïb–_cÚt
 =†abel_cont;

24947 
be
->
drİ_couÁ
 = drop_count;

24948 
be
->
Ïb–_fš®ly
 = -1;

24949 
be
->
scİe_Ëv–
 = 
fd
->scope_level;

24950 
be
->
has_™”©Ü
 = 
FALSE
;

24951 
	}
}

24953 
	$pİ_b»ak_’Œy
(
JSFunùiÚDef
 *
fd
)

24955 
BlockEnv
 *
be
;

24956 
be
 = 
fd
->
tİ_b»ak
;

24957 
fd
->
tİ_b»ak
 = 
be
->
´ev
;

24958 
	}
}

24960 
__exû±iÚ
 
	$em™_b»ak
(
JSP¬£S‹
 *
s
, 
JSAtom
 
Çme
, 
is_cÚt
)

24962 
BlockEnv
 *
tİ
;

24963 
i
, 
scİe_Ëv–
;

24965 
scİe_Ëv–
 = 
s
->
cur_func
->scope_level;

24966 
tİ
 = 
s
->
cur_func
->
tİ_b»ak
;

24967 
tİ
 !ğ
NULL
) {

24968 
	`şo£_scİes
(
s
, 
scİe_Ëv–
, 
tİ
->scope_level);

24969 
scİe_Ëv–
 = 
tİ
->scope_level;

24970 ià(
is_cÚt
 &&

24971 
tİ
->
Ïb–_cÚt
 != -1 &&

24972 (
Çme
 =ğ
JS_ATOM_NULL
 || 
tİ
->
Ïb–_Çme
 ==‚ame)) {

24974 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
tİ
->
Ïb–_cÚt
);

24977 ià(!
is_cÚt
 &&

24978 
tİ
->
Ïb–_b»ak
 != -1 &&

24979 (
Çme
 =ğ
JS_ATOM_NULL
 || 
tİ
->
Ïb–_Çme
 ==‚ame)) {

24980 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
tİ
->
Ïb–_b»ak
);

24983 
i
 = 0;

24984 ià(
tİ
->
has_™”©Ü
) {

24985 
	`em™_İ
(
s
, 
OP_™”©Ü_şo£
);

24986 
i
 += 3;

24988 ; 
i
 < 
tİ
->
drİ_couÁ
; i++)

24989 
	`em™_İ
(
s
, 
OP_drİ
);

24990 ià(
tİ
->
Ïb–_fš®ly
 != -1) {

24992 
	`em™_İ
(
s
, 
OP_undefšed
);

24993 
	`em™_gÙo
(
s
, 
OP_gosub
, 
tİ
->
Ïb–_fš®ly
);

24994 
	`em™_İ
(
s
, 
OP_drİ
);

24996 
tİ
 =İ->
´ev
;

24998 ià(
Çme
 =ğ
JS_ATOM_NULL
) {

24999 ià(
is_cÚt
)

25000  
	`js_·r£_”rÜ
(
s
, "continue must be inside†oop");

25002  
	`js_·r£_”rÜ
(
s
, "break must be inside†oop or switch");

25004  
	`js_·r£_”rÜ
(
s
, "break/continue†abel‚ot found");

25006 
	}
}

25009 
	$em™_»tuº
(
JSP¬£S‹
 *
s
, 
BOOL
 
hasv®
)

25011 
BlockEnv
 *
tİ
;

25012 
drİ_couÁ
;

25014 
drİ_couÁ
 = 0;

25015 
tİ
 = 
s
->
cur_func
->
tİ_b»ak
;

25016 
tİ
 !ğ
NULL
) {

25020 ià(
tİ
->
has_™”©Ü
) {

25024 ià(!
hasv®
) {

25025 
	`em™_İ
(
s
, 
OP_undefšed
);

25026 
hasv®
 = 
TRUE
;

25028 
	`em™_İ
(
s
, 
OP_™”©Ü_şo£_»tuº
);

25029 ià(
s
->
cur_func
->
func_kšd
 =ğ
JS_FUNC_ASYNC_GENERATOR
) {

25030 
Ïb–_Ãxt
;

25031 
	`em™_İ
(
s
, 
OP_async_™”©Ü_şo£
);

25032 
Ïb–_Ãxt
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
, -1);

25033 
	`em™_İ
(
s
, 
OP_awa™
);

25034 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

25035 
	`em™_İ
(
s
, 
OP_drİ
);

25037 
	`em™_İ
(
s
, 
OP_™”©Ü_şo£
);

25039 
drİ_couÁ
 = -3;

25041 
drİ_couÁ
 +ğ
tİ
->drop_count;

25042 ià(
tİ
->
Ïb–_fš®ly
 != -1) {

25043 
drİ_couÁ
) {

25045 
	`em™_İ
(
s
, 
hasv®
 ? 
OP_n
 : 
OP_drİ
);

25046 
drİ_couÁ
--;

25048 ià(!
hasv®
) {

25050 
	`em™_İ
(
s
, 
OP_undefšed
);

25051 
hasv®
 = 
TRUE
;

25053 
	`em™_gÙo
(
s
, 
OP_gosub
, 
tİ
->
Ïb–_fš®ly
);

25055 
tİ
 =İ->
´ev
;

25057 ià(
s
->
cur_func
->
is_d”ived_şass_cÚ¡ruùÜ
) {

25058 
Ïb–_»tuº
;

25062 ià(
hasv®
) {

25063 
	`em™_İ
(
s
, 
OP_check_ùÜ_»tuº
);

25064 
Ïb–_»tuº
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

25065 
	`em™_İ
(
s
, 
OP_drİ
);

25067 
Ïb–_»tuº
 = -1;

25072 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

25073 
	`em™_©om
(
s
, 
JS_ATOM_this
);

25074 
	`em™_u16
(
s
, 0);

25076 
	`em™_Ïb–
(
s
, 
Ïb–_»tuº
);

25077 
	`em™_İ
(
s
, 
OP_»tuº
);

25078 } ià(
s
->
cur_func
->
func_kšd
 !ğ
JS_FUNC_NORMAL
) {

25079 ià(!
hasv®
) {

25080 
	`em™_İ
(
s
, 
OP_undefšed
);

25081 } ià(
s
->
cur_func
->
func_kšd
 =ğ
JS_FUNC_ASYNC_GENERATOR
) {

25082 
	`em™_İ
(
s
, 
OP_awa™
);

25084 
	`em™_İ
(
s
, 
OP_»tuº_async
);

25086 
	`em™_İ
(
s
, 
hasv®
 ? 
OP_»tuº
 : 
OP_»tuº_undef
);

25088 
	}
}

25090 
	#DECL_MASK_FUNC
 (1 << 0è

	)

25092 
	#DECL_MASK_FUNC_WITH_LABEL
 (1 << 1)

	)

25093 
	#DECL_MASK_OTHER
 (1 << 2è

	)

25094 
	#DECL_MASK_ALL
 (
DECL_MASK_FUNC
 | 
DECL_MASK_FUNC_WITH_LABEL
 | 
DECL_MASK_OTHER
)

	)

25096 
__exû±iÚ
 
js_·r£_¡©em’t_Ü_deş
(
JSP¬£S‹
 *
s
,

25097 
deş_mask
);

25099 
__exû±iÚ
 
	$js_·r£_¡©em’t
(
JSP¬£S‹
 *
s
)

25101  
	`js_·r£_¡©em’t_Ü_deş
(
s
, 0);

25102 
	}
}

25104 
__exû±iÚ
 
	$js_·r£_block
(
JSP¬£S‹
 *
s
)

25106 ià(
	`js_·r£_ex³ù
(
s
, '{'))

25108 ià(
s
->
tok’
.
v®
 != '}') {

25109 
	`push_scİe
(
s
);

25111 ià(
	`js_·r£_¡©em’t_Ü_deş
(
s
, 
DECL_MASK_ALL
))

25113 ià(
s
->
tok’
.
v®
 == '}')

25116 
	`pİ_scİe
(
s
);

25118 ià(
	`Ãxt_tok’
(
s
))

25121 
	}
}

25123 
__exû±iÚ
 
	$js_·r£_v¬
(
JSP¬£S‹
 *
s
, 
BOOL
 
š_acû±ed
, 
tok
,

25124 
BOOL
 
expÜt_æag
)

25126 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

25127 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

25128 
JSAtom
 
Çme
 = 
JS_ATOM_NULL
;

25131 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

25132 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

25133  
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

25135 
Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

25136 ià(
Çme
 =ğ
JS_ATOM_Ët
 && (
tok
 =ğ
TOK_LET
 ||ok =ğ
TOK_CONST
)) {

25137 
	`js_·r£_”rÜ
(
s
, "'let' is‚ot‡ valid†exical identifier");

25138 
v¬_”rÜ
;

25140 ià(
	`Ãxt_tok’
(
s
))

25141 
v¬_”rÜ
;

25142 ià(
	`js_defše_v¬
(
s
, 
Çme
, 
tok
))

25143 
v¬_”rÜ
;

25144 ià(
expÜt_æag
) {

25145 ià(!
	`add_expÜt_’Œy
(
s
, s->
cur_func
->
moduË
, 
Çme
,‚ame,

25146 
JS_EXPORT_TYPE_LOCAL
))

25147 
v¬_”rÜ
;

25150 ià(
s
->
tok’
.
v®
 == '=') {

25151 ià(
	`Ãxt_tok’
(
s
))

25152 
v¬_”rÜ
;

25153 ià(
tok
 =ğ
TOK_VAR
) {

25155 
İcode
, 
scİe
, 
Ïb–
;

25156 
JSAtom
 
Çme1
;

25158 
	`em™_İ
(
s
, 
OP_scİe_g‘_v¬
);

25159 
	`em™_©om
(
s
, 
Çme
);

25160 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

25161 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
Çme1
, &
Ïb–
, 
NULL
, 
FALSE
, '=') < 0)

25162 
v¬_”rÜ
;

25163 ià(
	`js_·r£_assign_ex´
(
s
, 
š_acû±ed
)) {

25164 
	`JS_F»eAtom
(
ùx
, 
Çme1
);

25165 
v¬_”rÜ
;

25167 
	`£t_objeù_Çme
(
s
, 
Çme
);

25168 
	`put_lv®ue
(
s
, 
İcode
, 
scİe
, 
Çme1
, 
Ïb–
, 
FALSE
);

25169 
	`em™_İ
(
s
, 
OP_drİ
);

25171 ià(
	`js_·r£_assign_ex´
(
s
, 
š_acû±ed
))

25172 
v¬_”rÜ
;

25173 
	`£t_objeù_Çme
(
s
, 
Çme
);

25174 
	`em™_İ
(
s
, (
tok
 =ğ
TOK_CONST
 ||ok =ğ
TOK_LET
) ?

25175 
OP_scİe_put_v¬_š™
 : 
OP_scİe_put_v¬
);

25176 
	`em™_©om
(
s
, 
Çme
);

25177 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

25180 ià(
tok
 =ğ
TOK_CONST
) {

25181 
	`js_·r£_”rÜ
(
s
, "missing initializer for const variable");

25182 
v¬_”rÜ
;

25184 ià(
tok
 =ğ
TOK_LET
) {

25186 
	`em™_İ
(
s
, 
OP_undefšed
);

25187 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

25188 
	`em™_©om
(
s
, 
Çme
);

25189 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

25192 
	`JS_F»eAtom
(
ùx
, 
Çme
);

25194 
sk_b™s
;

25195 ià((
s
->
tok’
.
v®
 == '[' || s->token.val == '{')

25196 && 
	`js_·r£_sk_·»ns_tok’
(
s
, &
sk_b™s
, 
FALSE
) == '=') {

25197 
	`em™_İ
(
s
, 
OP_undefšed
);

25198 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 
tok
, 0, 
TRUE
, 
sk_b™s
 & 
SKIP_HAS_ELLIPSIS
, TRUE))

25201  
	`js_·r£_”rÜ
(
s
, "variable‚ameƒxpected");

25204 ià(
s
->
tok’
.
v®
 != ',')

25206 ià(
	`Ãxt_tok’
(
s
))

25211 
v¬_”rÜ
:

25212 
	`JS_F»eAtom
(
ùx
, 
Çme
);

25214 
	}
}

25217 
BOOL
 
	$is_Ïb–
(
JSP¬£S‹
 *
s
)

25219  (
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
 &&

25220 
	`³ek_tok’
(
s
, 
FALSE
) == ':');

25221 
	}
}

25224 
	$is_Ët
(
JSP¬£S‹
 *
s
, 
deş_mask
)

25226 
»s
 = 
FALSE
;

25228 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_Ët
)) {

25230 
JSP¬£Pos
 
pos
;

25231 
	`js_·r£_g‘_pos
(
s
, &
pos
);

25233 ià(
	`Ãxt_tok’
(
s
)) {

25234 
»s
 = -1;

25237 ià(
s
->
tok’
.
v®
 == '[') {

25240 
»s
 = 
TRUE
;

25243 ià(
s
->
tok’
.
v®
 == '{' ||

25244 (
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
) ||

25245 
s
->
tok’
.
v®
 =ğ
TOK_LET
 ||

25246 
s
->
tok’
.
v®
 =ğ
TOK_YIELD
 ||

25247 
s
->
tok’
.
v®
 =ğ
TOK_AWAIT
) {

25251 ià(
s
->
Ï¡_lše_num
 =ğs->
tok’
.
lše_num
 || (
deş_mask
 & 
DECL_MASK_OTHER
)) {

25252 
»s
 = 
TRUE
;

25259 ià(
	`js_·r£_£ek_tok’
(
s
, &
pos
)) {

25260 
»s
 = -1;

25263 
tok
 = 
	`³ek_tok’
(
s
, 
TRUE
);

25264 ià(
tok
 =ğ'{' ||ok =ğ
TOK_IDENT
 || 
	`³ek_tok’
(
s
, 
FALSE
) == '[') {

25265 
»s
 = 
TRUE
;

25269  
»s
;

25270 
	}
}

25274 
__exû±iÚ
 
	$js_·r£_fÜ_š_of
(
JSP¬£S‹
 *
s
, 
Ïb–_Çme
,

25275 
BOOL
 
is_async
)

25277 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

25278 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

25279 
JSAtom
 
v¬_Çme
;

25280 
BOOL
 
has_š™Ÿliz”
, 
is_fÜ_of
, 
has_de¡ruùuršg
;

25281 
tok
, 
tok1
, 
İcode
, 
scİe
, 
block_scİe_Ëv–
;

25282 
Ïb–_Ãxt
, 
Ïb–_ex´
, 
Ïb–_cÚt
, 
Ïb–_body
, 
Ïb–_b»ak
;

25283 
pos_Ãxt
, 
pos_ex´
;

25284 
BlockEnv
 
b»ak_’Œy
;

25286 
has_š™Ÿliz”
 = 
FALSE
;

25287 
has_de¡ruùuršg
 = 
FALSE
;

25288 
is_fÜ_of
 = 
FALSE
;

25289 
block_scİe_Ëv–
 = 
fd
->
scİe_Ëv–
;

25290 
Ïb–_cÚt
 = 
	`Ãw_Ïb–
(
s
);

25291 
Ïb–_body
 = 
	`Ãw_Ïb–
(
s
);

25292 
Ïb–_b»ak
 = 
	`Ãw_Ïb–
(
s
);

25293 
Ïb–_Ãxt
 = 
	`Ãw_Ïb–
(
s
);

25298 
	`push_scİe
(
s
);

25302 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
b»ak_’Œy
,

25303 
Ïb–_Çme
, 
Ïb–_b»ak
, 
Ïb–_cÚt
, 1);

25304 
b»ak_’Œy
.
scİe_Ëv–
 = 
block_scİe_Ëv–
;

25306 
Ïb–_ex´
 = 
	`em™_gÙo
(
s
, 
OP_gÙo
, -1);

25308 
pos_Ãxt
 = 
s
->
cur_func
->
by‹_code
.
size
;

25309 
	`em™_Ïb–
(
s
, 
Ïb–_Ãxt
);

25311 
tok
 = 
s
->
tok’
.
v®
;

25312 
	`is_Ët
(
s
, 
DECL_MASK_OTHER
)) {

25313 
TRUE
:

25314 
tok
 = 
TOK_LET
;

25316 
FALSE
:

25321 ià(
tok
 =ğ
TOK_VAR
 ||ok =ğ
TOK_LET
 ||ok =ğ
TOK_CONST
) {

25322 ià(
	`Ãxt_tok’
(
s
))

25325 ià(!(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
)) {

25326 ià(
s
->
tok’
.
v®
 == '[' || s->token.val == '{') {

25327 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 
tok
, 0, 
TRUE
, -1, 
FALSE
))

25329 
has_de¡ruùuršg
 = 
TRUE
;

25331  
	`js_·r£_”rÜ
(
s
, "variable‚ameƒxpected");

25333 
v¬_Çme
 = 
JS_ATOM_NULL
;

25335 
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

25336 ià(
	`Ãxt_tok’
(
s
)) {

25337 
	`JS_F»eAtom
(
s
->
ùx
, 
v¬_Çme
);

25340 ià(
	`js_defše_v¬
(
s
, 
v¬_Çme
, 
tok
)) {

25341 
	`JS_F»eAtom
(
s
->
ùx
, 
v¬_Çme
);

25344 
	`em™_İ
(
s
, (
tok
 =ğ
TOK_CONST
 ||ok =ğ
TOK_LET
) ?

25345 
OP_scİe_put_v¬_š™
 : 
OP_scİe_put_v¬
);

25346 
	`em™_©om
(
s
, 
v¬_Çme
);

25347 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

25350 
sk_b™s
;

25351 ià((
s
->
tok’
.
v®
 == '[' || s->token.val == '{')

25352 && ((
tok1
 = 
	`js_·r£_sk_·»ns_tok’
(
s
, &
sk_b™s
, 
FALSE
)è=ğ
TOK_IN
 ||ok1 =ğ
TOK_OF
)) {

25353 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 0, 0, 
TRUE
, 
sk_b™s
 & 
SKIP_HAS_ELLIPSIS
, TRUE))

25356 
lv®ue_Ïb–
, 
d•th
;

25357 ià(
	`js_·r£_po¡fix_ex´
(
s
, 
TRUE
))

25359 ià(
	`g‘_lv®ue
(
s
, &
İcode
, &
scİe
, &
v¬_Çme
, &
lv®ue_Ïb–
,

25360 &
d•th
, 
FALSE
, 
TOK_FOR
))

25364 
d•th
) {

25366 
	`em™_İ
(
s
, 
OP_sw­
);

25369 
	`em™_İ
(
s
, 
OP_rÙ3l
);

25372 
	`em™_İ
(
s
, 
OP_rÙ4l
);

25375 
	`abÜt
();

25377 
	`put_lv®ue_nok“p
(
s
, 
İcode
, 
scİe
, 
v¬_Çme
, 
lv®ue_Ïb–
,

25378 
TOK_FOR
 );

25380 
v¬_Çme
 = 
JS_ATOM_NULL
;

25382 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_body
);

25384 
pos_ex´
 = 
s
->
cur_func
->
by‹_code
.
size
;

25385 
	`em™_Ïb–
(
s
, 
Ïb–_ex´
);

25386 ià(
s
->
tok’
.
v®
 == '=') {

25388 
has_š™Ÿliz”
 = 
TRUE
;

25392 ià(
	`Ãxt_tok’
(
s
è|| 
	`js_·r£_assign_ex´
(s, 
FALSE
)) {

25393 
	`JS_F»eAtom
(
ùx
, 
v¬_Çme
);

25396 ià(
v¬_Çme
 !ğ
JS_ATOM_NULL
) {

25397 
	`em™_İ
(
s
, 
OP_scİe_put_v¬
);

25398 
	`em™_©om
(
s
, 
v¬_Çme
);

25399 
	`em™_u16
(
s
, 
fd
->
scİe_Ëv–
);

25402 
	`JS_F»eAtom
(
ùx
, 
v¬_Çme
);

25404 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_of
)) {

25405 
b»ak_’Œy
.
has_™”©Ü
 = 
is_fÜ_of
 = 
TRUE
;

25406 
b»ak_’Œy
.
drİ_couÁ
 += 2;

25407 ià(
has_š™Ÿliz”
)

25408 
š™Ÿliz”_”rÜ
;

25409 } ià(
s
->
tok’
.
v®
 =ğ
TOK_IN
) {

25410 ià(
is_async
)

25411  
	`js_·r£_”rÜ
(
s
, "'for‡wait'†oop should be used with 'of'");

25412 ià(
has_š™Ÿliz”
 &&

25413 (
tok
 !ğ
TOK_VAR
 || (
fd
->
js_mode
 & 
JS_MODE_STRICT
) ||

25414 
has_de¡ruùuršg
)) {

25415 
š™Ÿliz”_”rÜ
:

25416  
	`js_·r£_”rÜ
(
s
, "a declaration inhe head of‡ for-%s†oop can't have‡n initializer",

25417 
is_fÜ_of
 ? "of" : "in");

25420  
	`js_·r£_”rÜ
(
s
, "expected 'of' or 'in' in for controlƒxpression");

25422 ià(
	`Ãxt_tok’
(
s
))

25424 ià(
is_fÜ_of
) {

25425 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

25428 ià(
	`js_·r£_ex´
(
s
))

25433 
	`şo£_scİes
(
s
, s->
cur_func
->
scİe_Ëv–
, 
block_scİe_Ëv–
);

25434 ià(
is_fÜ_of
) {

25435 ià(
is_async
)

25436 
	`em™_İ
(
s
, 
OP_fÜ_awa™_of_¡¬t
);

25438 
	`em™_İ
(
s
, 
OP_fÜ_of_¡¬t
);

25441 
	`em™_İ
(
s
, 
OP_fÜ_š_¡¬t
);

25444 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_cÚt
);

25446 ià(
	`js_·r£_ex³ù
(
s
, ')'))

25449 ià(
OPTIMIZE
) {

25451 
DynBuf
 *
bc
 = &
s
->
cur_func
->
by‹_code
;

25452 
chunk_size
 = 
pos_ex´
 - 
pos_Ãxt
;

25453 
off£t
 = 
bc
->
size
 - 
pos_Ãxt
;

25454 
i
;

25455 
	`dbuf_»®loc
(
bc
, bc->
size
 + 
chunk_size
);

25456 
	`dbuf_put
(
bc
, bc->
buf
 + 
pos_Ãxt
, 
chunk_size
);

25457 
	`mem£t
(
bc
->
buf
 + 
pos_Ãxt
, 
OP_nİ
, 
chunk_size
);

25459 
s
->
cur_func
->
Ï¡_İcode_pos
 = 
bc
->
size
 - 5;

25461 
i
 = 
Ïb–_cÚt
; i < 
s
->
cur_func
->
Ïb–_couÁ
; i++) {

25462 
Lab–SlÙ
 *
ls
 = &
s
->
cur_func
->
Ïb–_¦Ùs
[
i
];

25463 ià(
ls
->
pos
 >ğ
pos_Ãxt
 &&†s->po < 
pos_ex´
)

25464 
ls
->
pos
 +ğ
off£t
;

25468 
	`em™_Ïb–
(
s
, 
Ïb–_body
);

25469 ià(
	`js_·r£_¡©em’t
(
s
))

25472 
	`şo£_scİes
(
s
, s->
cur_func
->
scİe_Ëv–
, 
block_scİe_Ëv–
);

25474 
	`em™_Ïb–
(
s
, 
Ïb–_cÚt
);

25475 ià(
is_fÜ_of
) {

25476 ià(
is_async
) {

25478 
	`em™_İ
(
s
, 
OP_fÜ_awa™_of_Ãxt
);

25480 
	`em™_İ
(
s
, 
OP_awa™
);

25482 
	`em™_İ
(
s
, 
OP_™”©Ü_g‘_v®ue_dÚe
);

25484 
	`em™_İ
(
s
, 
OP_fÜ_of_Ãxt
);

25485 
	`em™_u8
(
s
, 0);

25488 
	`em™_İ
(
s
, 
OP_fÜ_š_Ãxt
);

25491 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–_Ãxt
);

25493 
	`em™_İ
(
s
, 
OP_drİ
);

25495 
	`em™_Ïb–
(
s
, 
Ïb–_b»ak
);

25496 ià(
is_fÜ_of
) {

25498 
	`em™_İ
(
s
, 
OP_™”©Ü_şo£
);

25500 
	`em™_İ
(
s
, 
OP_drİ
);

25502 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

25503 
	`pİ_scİe
(
s
);

25505 
	}
}

25507 
	$£t_ev®_»t_undefšed
(
JSP¬£S‹
 *
s
)

25509 ià(
s
->
cur_func
->
ev®_»t_idx
 >= 0) {

25510 
	`em™_İ
(
s
, 
OP_undefšed
);

25511 
	`em™_İ
(
s
, 
OP_put_loc
);

25512 
	`em™_u16
(
s
, s->
cur_func
->
ev®_»t_idx
);

25514 
	}
}

25516 
__exû±iÚ
 
	$js_·r£_¡©em’t_Ü_deş
(
JSP¬£S‹
 *
s
,

25517 
deş_mask
)

25519 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

25520 
JSAtom
 
Ïb–_Çme
;

25521 
tok
;

25525 
Ïb–_Çme
 = 
JS_ATOM_NULL
;

25526 ià(
	`is_Ïb–
(
s
)) {

25527 
BlockEnv
 *
be
;

25529 
Ïb–_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

25531 
be
 = 
s
->
cur_func
->
tİ_b»ak
; be; bğbe->
´ev
) {

25532 ià(
be
->
Ïb–_Çme
 ==†abel_name) {

25533 
	`js_·r£_”rÜ
(
s
, "duplicate†abel‚ame");

25534 
ç
;

25538 ià(
	`Ãxt_tok’
(
s
))

25539 
ç
;

25540 ià(
	`js_·r£_ex³ù
(
s
, ':'))

25541 
ç
;

25542 ià(
s
->
tok’
.
v®
 !ğ
TOK_FOR


25543 && 
s
->
tok’
.
v®
 !ğ
TOK_DO


25544 && 
s
->
tok’
.
v®
 !ğ
TOK_WHILE
) {

25546 
Ïb–_b»ak
, 
mask
;

25547 
BlockEnv
 
b»ak_’Œy
;

25549 
Ïb–_b»ak
 = 
	`Ãw_Ïb–
(
s
);

25550 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
b»ak_’Œy
,

25551 
Ïb–_Çme
, 
Ïb–_b»ak
, -1, 0);

25552 ià(!(
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
) &&

25553 (
deş_mask
 & 
DECL_MASK_FUNC_WITH_LABEL
)) {

25554 
mask
 = 
DECL_MASK_FUNC
 | 
DECL_MASK_FUNC_WITH_LABEL
;

25556 
mask
 = 0;

25558 ià(
	`js_·r£_¡©em’t_Ü_deş
(
s
, 
mask
))

25559 
ç
;

25560 
	`em™_Ïb–
(
s
, 
Ïb–_b»ak
);

25561 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

25562 
dÚe
;

25566 
tok
 = 
s
->
tok’
.
v®
) {

25568 ià(
	`js_·r£_block
(
s
))

25569 
ç
;

25571 
TOK_RETURN
:

25572 ià(
s
->
cur_func
->
is_ev®
) {

25573 
	`js_·r£_”rÜ
(
s
, "return‚ot in‡ function");

25574 
ç
;

25576 ià(
	`Ãxt_tok’
(
s
))

25577 
ç
;

25578 ià(
s
->
tok’
.
v®
 !ğ';' && s->tok’.v® !ğ'}' && !s->
gÙ_lf
) {

25579 ià(
	`js_·r£_ex´
(
s
))

25580 
ç
;

25581 
	`em™_»tuº
(
s
, 
TRUE
);

25583 
	`em™_»tuº
(
s
, 
FALSE
);

25585 ià(
	`js_·r£_ex³ù_£mi
(
s
))

25586 
ç
;

25588 
TOK_THROW
:

25589 ià(
	`Ãxt_tok’
(
s
))

25590 
ç
;

25591 ià(
s
->
gÙ_lf
) {

25592 
	`js_·r£_”rÜ
(
s
, "lineerminator‚ot‡llowed‡fterhrow");

25593 
ç
;

25595 ià(
	`js_·r£_ex´
(
s
))

25596 
ç
;

25597 
	`em™_İ
(
s
, 
OP_throw
);

25598 ià(
	`js_·r£_ex³ù_£mi
(
s
))

25599 
ç
;

25601 
TOK_LET
:

25602 
TOK_CONST
:

25603 
ha¦‘
:

25604 ià(!(
deş_mask
 & 
DECL_MASK_OTHER
)) {

25605 
	`js_·r£_”rÜ
(
s
, "lexical declarations can't‡ppear in single-statement context");

25606 
ç
;

25609 
TOK_VAR
:

25610 ià(
	`Ãxt_tok’
(
s
))

25611 
ç
;

25612 ià(
	`js_·r£_v¬
(
s
, 
TRUE
, 
tok
, 
FALSE
))

25613 
ç
;

25614 ià(
	`js_·r£_ex³ù_£mi
(
s
))

25615 
ç
;

25617 
TOK_IF
:

25619 
Ïb–1
, 
Ïb–2
, 
mask
;

25620 ià(
	`Ãxt_tok’
(
s
))

25621 
ç
;

25623 
	`push_scİe
(
s
);

25624 
	`£t_ev®_»t_undefšed
(
s
);

25625 ià(
	`js_·r£_ex´_·»n
(
s
))

25626 
ç
;

25627 
Ïb–1
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

25628 ià(
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
)

25629 
mask
 = 0;

25631 
mask
 = 
DECL_MASK_FUNC
;

25633 ià(
	`js_·r£_¡©em’t_Ü_deş
(
s
, 
mask
))

25634 
ç
;

25636 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELSE
) {

25637 
Ïb–2
 = 
	`em™_gÙo
(
s
, 
OP_gÙo
, -1);

25638 ià(
	`Ãxt_tok’
(
s
))

25639 
ç
;

25641 
	`em™_Ïb–
(
s
, 
Ïb–1
);

25642 ià(
	`js_·r£_¡©em’t_Ü_deş
(
s
, 
mask
))

25643 
ç
;

25645 
Ïb–1
 = 
Ïb–2
;

25647 
	`em™_Ïb–
(
s
, 
Ïb–1
);

25648 
	`pİ_scİe
(
s
);

25651 
TOK_WHILE
:

25653 
Ïb–_cÚt
, 
Ïb–_b»ak
;

25654 
BlockEnv
 
b»ak_’Œy
;

25656 
Ïb–_cÚt
 = 
	`Ãw_Ïb–
(
s
);

25657 
Ïb–_b»ak
 = 
	`Ãw_Ïb–
(
s
);

25659 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
b»ak_’Œy
,

25660 
Ïb–_Çme
, 
Ïb–_b»ak
, 
Ïb–_cÚt
, 0);

25662 ià(
	`Ãxt_tok’
(
s
))

25663 
ç
;

25665 
	`£t_ev®_»t_undefšed
(
s
);

25667 
	`em™_Ïb–
(
s
, 
Ïb–_cÚt
);

25668 ià(
	`js_·r£_ex´_·»n
(
s
))

25669 
ç
;

25670 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–_b»ak
);

25672 ià(
	`js_·r£_¡©em’t
(
s
))

25673 
ç
;

25674 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_cÚt
);

25676 
	`em™_Ïb–
(
s
, 
Ïb–_b»ak
);

25678 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

25681 
TOK_DO
:

25683 
Ïb–_cÚt
, 
Ïb–_b»ak
, 
Ïb–1
;

25684 
BlockEnv
 
b»ak_’Œy
;

25686 
Ïb–_cÚt
 = 
	`Ãw_Ïb–
(
s
);

25687 
Ïb–_b»ak
 = 
	`Ãw_Ïb–
(
s
);

25688 
Ïb–1
 = 
	`Ãw_Ïb–
(
s
);

25690 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
b»ak_’Œy
,

25691 
Ïb–_Çme
, 
Ïb–_b»ak
, 
Ïb–_cÚt
, 0);

25693 ià(
	`Ãxt_tok’
(
s
))

25694 
ç
;

25696 
	`em™_Ïb–
(
s
, 
Ïb–1
);

25698 
	`£t_ev®_»t_undefšed
(
s
);

25700 ià(
	`js_·r£_¡©em’t
(
s
))

25701 
ç
;

25703 
	`em™_Ïb–
(
s
, 
Ïb–_cÚt
);

25704 ià(
	`js_·r£_ex³ù
(
s
, 
TOK_WHILE
))

25705 
ç
;

25706 ià(
	`js_·r£_ex´_·»n
(
s
))

25707 
ç
;

25709 ià(
s
->
tok’
.
v®
 == ';') {

25710 ià(
	`Ãxt_tok’
(
s
))

25711 
ç
;

25713 
	`em™_gÙo
(
s
, 
OP_if_Œue
, 
Ïb–1
);

25715 
	`em™_Ïb–
(
s
, 
Ïb–_b»ak
);

25717 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

25720 
TOK_FOR
:

25722 
Ïb–_cÚt
, 
Ïb–_b»ak
, 
Ïb–_body
, 
Ïb–_‹¡
;

25723 
pos_cÚt
, 
pos_body
, 
block_scİe_Ëv–
;

25724 
BlockEnv
 
b»ak_’Œy
;

25725 
tok
, 
b™s
;

25726 
BOOL
 
is_async
;

25728 ià(
	`Ãxt_tok’
(
s
))

25729 
ç
;

25731 
	`£t_ev®_»t_undefšed
(
s
);

25732 
b™s
 = 0;

25733 
is_async
 = 
FALSE
;

25734 ià(
s
->
tok’
.
v®
 == '(') {

25735 
	`js_·r£_sk_·»ns_tok’
(
s
, &
b™s
, 
FALSE
);

25736 } ià(
s
->
tok’
.
v®
 =ğ
TOK_AWAIT
) {

25737 ià(!(
s
->
cur_func
->
func_kšd
 & 
JS_FUNC_ASYNC
)) {

25738 
	`js_·r£_”rÜ
(
s
, "for‡wait is only valid in‡synchronous functions");

25739 
ç
;

25741 
is_async
 = 
TRUE
;

25742 ià(
	`Ãxt_tok’
(
s
))

25743 
ç
;

25745 ià(
	`js_·r£_ex³ù
(
s
, '('))

25746 
ç
;

25748 ià(!(
b™s
 & 
SKIP_HAS_SEMI
)) {

25750 ià(
	`js_·r£_fÜ_š_of
(
s
, 
Ïb–_Çme
, 
is_async
))

25751 
ç
;

25754 
block_scİe_Ëv–
 = 
s
->
cur_func
->
scİe_Ëv–
;

25758 
	`push_scİe
(
s
);

25760 
tok
 = 
s
->
tok’
.
v®
;

25761 ià(
tok
 != ';') {

25762 
	`is_Ët
(
s
, 
DECL_MASK_OTHER
)) {

25763 
TRUE
:

25764 
tok
 = 
TOK_LET
;

25766 
FALSE
:

25769 
ç
;

25771 ià(
tok
 =ğ
TOK_VAR
 ||ok =ğ
TOK_LET
 ||ok =ğ
TOK_CONST
) {

25772 ià(
	`Ãxt_tok’
(
s
))

25773 
ç
;

25774 ià(
	`js_·r£_v¬
(
s
, 
FALSE
, 
tok
, FALSE))

25775 
ç
;

25777 ià(
	`js_·r£_ex´2
(
s
, 
FALSE
))

25778 
ç
;

25779 
	`em™_İ
(
s
, 
OP_drİ
);

25783 
	`şo£_scİes
(
s
, s->
cur_func
->
scİe_Ëv–
, 
block_scİe_Ëv–
);

25785 ià(
	`js_·r£_ex³ù
(
s
, ';'))

25786 
ç
;

25788 
Ïb–_‹¡
 = 
	`Ãw_Ïb–
(
s
);

25789 
Ïb–_cÚt
 = 
	`Ãw_Ïb–
(
s
);

25790 
Ïb–_body
 = 
	`Ãw_Ïb–
(
s
);

25791 
Ïb–_b»ak
 = 
	`Ãw_Ïb–
(
s
);

25793 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
b»ak_’Œy
,

25794 
Ïb–_Çme
, 
Ïb–_b»ak
, 
Ïb–_cÚt
, 0);

25797 ià(
s
->
tok’
.
v®
 == ';') {

25799 
Ïb–_‹¡
 = 
Ïb–_body
;

25801 
	`em™_Ïb–
(
s
, 
Ïb–_‹¡
);

25802 ià(
	`js_·r£_ex´
(
s
))

25803 
ç
;

25804 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–_b»ak
);

25806 ià(
	`js_·r£_ex³ù
(
s
, ';'))

25807 
ç
;

25809 ià(
s
->
tok’
.
v®
 == ')') {

25811 
b»ak_’Œy
.
Ïb–_cÚt
 =†ab–_cÚˆğ
Ïb–_‹¡
;

25812 
pos_cÚt
 = 0;

25815 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_body
);

25817 
pos_cÚt
 = 
s
->
cur_func
->
by‹_code
.
size
;

25818 
	`em™_Ïb–
(
s
, 
Ïb–_cÚt
);

25819 ià(
	`js_·r£_ex´
(
s
))

25820 
ç
;

25821 
	`em™_İ
(
s
, 
OP_drİ
);

25822 ià(
Ïb–_‹¡
 !ğ
Ïb–_body
)

25823 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_‹¡
);

25825 ià(
	`js_·r£_ex³ù
(
s
, ')'))

25826 
ç
;

25828 
pos_body
 = 
s
->
cur_func
->
by‹_code
.
size
;

25829 
	`em™_Ïb–
(
s
, 
Ïb–_body
);

25830 ià(
	`js_·r£_¡©em’t
(
s
))

25831 
ç
;

25835 
	`şo£_scİes
(
s
, s->
cur_func
->
scİe_Ëv–
, 
block_scİe_Ëv–
);

25837 ià(
OPTIMIZE
 && 
Ïb–_‹¡
 !ğ
Ïb–_body
 && 
Ïb–_cÚt
 !=†abel_test) {

25839 
DynBuf
 *
bc
 = &
s
->
cur_func
->
by‹_code
;

25840 
chunk_size
 = 
pos_body
 - 
pos_cÚt
;

25841 
off£t
 = 
bc
->
size
 - 
pos_cÚt
;

25842 
i
;

25843 
	`dbuf_»®loc
(
bc
, bc->
size
 + 
chunk_size
);

25844 
	`dbuf_put
(
bc
, bc->
buf
 + 
pos_cÚt
, 
chunk_size
);

25845 
	`mem£t
(
bc
->
buf
 + 
pos_cÚt
, 
OP_nİ
, 
chunk_size
);

25847 
s
->
cur_func
->
Ï¡_İcode_pos
 = 
bc
->
size
 - 5;

25849 
i
 = 
Ïb–_cÚt
; i < 
s
->
cur_func
->
Ïb–_couÁ
; i++) {

25850 
Lab–SlÙ
 *
ls
 = &
s
->
cur_func
->
Ïb–_¦Ùs
[
i
];

25851 ià(
ls
->
pos
 >ğ
pos_cÚt
 &&†s->po < 
pos_body
)

25852 
ls
->
pos
 +ğ
off£t
;

25855 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_cÚt
);

25858 
	`em™_Ïb–
(
s
, 
Ïb–_b»ak
);

25860 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

25861 
	`pİ_scİe
(
s
);

25864 
TOK_BREAK
:

25865 
TOK_CONTINUE
:

25867 
is_cÚt
 = 
s
->
tok’
.
v®
 - 
TOK_BREAK
;

25868 
Ïb–
;

25870 ià(
	`Ãxt_tok’
(
s
))

25871 
ç
;

25872 ià(!
s
->
gÙ_lf
 && s->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
)

25873 
Ïb–
 = 
s
->
tok’
.
u
.
id’t
.
©om
;

25875 
Ïb–
 = 
JS_ATOM_NULL
;

25876 ià(
	`em™_b»ak
(
s
, 
Ïb–
, 
is_cÚt
))

25877 
ç
;

25878 ià(
Ïb–
 !ğ
JS_ATOM_NULL
) {

25879 ià(
	`Ãxt_tok’
(
s
))

25880 
ç
;

25882 ià(
	`js_·r£_ex³ù_£mi
(
s
))

25883 
ç
;

25886 
TOK_SWITCH
:

25888 
Ïb–_ÿ£
, 
Ïb–_b»ak
, 
Ïb–1
;

25889 
deçuÉ_Ïb–_pos
;

25890 
BlockEnv
 
b»ak_’Œy
;

25892 ià(
	`Ãxt_tok’
(
s
))

25893 
ç
;

25895 
	`£t_ev®_»t_undefšed
(
s
);

25896 ià(
	`js_·r£_ex´_·»n
(
s
))

25897 
ç
;

25899 
	`push_scİe
(
s
);

25900 
Ïb–_b»ak
 = 
	`Ãw_Ïb–
(
s
);

25901 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
b»ak_’Œy
,

25902 
Ïb–_Çme
, 
Ïb–_b»ak
, -1, 1);

25904 ià(
	`js_·r£_ex³ù
(
s
, '{'))

25905 
ç
;

25907 
deçuÉ_Ïb–_pos
 = -1;

25908 
Ïb–_ÿ£
 = -1;

25909 
s
->
tok’
.
v®
 != '}') {

25910 ià(
s
->
tok’
.
v®
 =ğ
TOK_CASE
) {

25911 
Ïb–1
 = -1;

25912 ià(
Ïb–_ÿ£
 >= 0) {

25914 
Ïb–1
 = 
	`em™_gÙo
(
s
, 
OP_gÙo
, -1);

25916 
	`em™_Ïb–
(
s
, 
Ïb–_ÿ£
);

25917 
Ïb–_ÿ£
 = -1;

25920 ià(
	`Ãxt_tok’
(
s
))

25921 
ç
;

25922 
	`em™_İ
(
s
, 
OP_dup
);

25923 ià(
	`js_·r£_ex´
(
s
))

25924 
ç
;

25925 ià(
	`js_·r£_ex³ù
(
s
, ':'))

25926 
ç
;

25927 
	`em™_İ
(
s
, 
OP_¡riù_eq
);

25928 ià(
s
->
tok’
.
v®
 =ğ
TOK_CASE
) {

25929 
Ïb–1
 = 
	`em™_gÙo
(
s
, 
OP_if_Œue
,†abel1);

25931 
Ïb–_ÿ£
 = 
	`em™_gÙo
(
s
, 
OP_if_çl£
, -1);

25932 
	`em™_Ïb–
(
s
, 
Ïb–1
);

25936 } ià(
s
->
tok’
.
v®
 =ğ
TOK_DEFAULT
) {

25937 ià(
	`Ãxt_tok’
(
s
))

25938 
ç
;

25939 ià(
	`js_·r£_ex³ù
(
s
, ':'))

25940 
ç
;

25941 ià(
deçuÉ_Ïb–_pos
 >= 0) {

25942 
	`js_·r£_”rÜ
(
s
, "duplicate default");

25943 
ç
;

25945 ià(
Ïb–_ÿ£
 < 0) {

25947 
Ïb–_ÿ£
 = 
	`em™_gÙo
(
s
, 
OP_gÙo
, -1);

25954 
	`em™_İ
(
s
, 
OP_Ïb–
);

25955 
	`em™_u32
(
s
, 0);

25956 
deçuÉ_Ïb–_pos
 = 
s
->
cur_func
->
by‹_code
.
size
 - 4;

25958 ià(
Ïb–_ÿ£
 < 0) {

25960 
	`js_·r£_”rÜ
(
s
, "invalid switch statement");

25961 
ç
;

25963 ià(
	`js_·r£_¡©em’t_Ü_deş
(
s
, 
DECL_MASK_ALL
))

25964 
ç
;

25967 ià(
	`js_·r£_ex³ù
(
s
, '}'))

25968 
ç
;

25969 ià(
deçuÉ_Ïb–_pos
 >= 0) {

25971 
	`put_u32
(
s
->
cur_func
->
by‹_code
.
buf
 + 
deçuÉ_Ïb–_pos
,

25972 
Ïb–_ÿ£
);

25973 
s
->
cur_func
->
Ïb–_¦Ùs
[
Ïb–_ÿ£
].
pos
 = 
deçuÉ_Ïb–_pos
 + 4;

25975 
	`em™_Ïb–
(
s
, 
Ïb–_ÿ£
);

25977 
	`em™_Ïb–
(
s
, 
Ïb–_b»ak
);

25978 
	`em™_İ
(
s
, 
OP_drİ
);

25980 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

25981 
	`pİ_scİe
(
s
);

25984 
TOK_TRY
:

25986 
Ïb–_ÿtch
, 
Ïb–_ÿtch2
, 
Ïb–_fš®ly
, 
Ïb–_’d
;

25987 
JSAtom
 
Çme
;

25988 
BlockEnv
 
block_’v
;

25990 
	`£t_ev®_»t_undefšed
(
s
);

25991 ià(
	`Ãxt_tok’
(
s
))

25992 
ç
;

25993 
Ïb–_ÿtch
 = 
	`Ãw_Ïb–
(
s
);

25994 
Ïb–_ÿtch2
 = 
	`Ãw_Ïb–
(
s
);

25995 
Ïb–_fš®ly
 = 
	`Ãw_Ïb–
(
s
);

25996 
Ïb–_’d
 = 
	`Ãw_Ïb–
(
s
);

25998 
	`em™_gÙo
(
s
, 
OP_ÿtch
, 
Ïb–_ÿtch
);

26000 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
block_’v
,

26001 
JS_ATOM_NULL
, -1, -1, 1);

26002 
block_’v
.
Ïb–_fš®ly
 =†abel_finally;

26004 ià(
	`js_·r£_block
(
s
))

26005 
ç
;

26007 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

26009 ià(
	`js_is_live_code
(
s
)) {

26011 
	`em™_İ
(
s
, 
OP_drİ
);

26013 
	`em™_İ
(
s
, 
OP_undefšed
);

26014 
	`em™_gÙo
(
s
, 
OP_gosub
, 
Ïb–_fš®ly
);

26015 
	`em™_İ
(
s
, 
OP_drİ
);

26017 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_’d
);

26020 ià(
s
->
tok’
.
v®
 =ğ
TOK_CATCH
) {

26021 ià(
	`Ãxt_tok’
(
s
))

26022 
ç
;

26024 
	`push_scİe
(
s
);

26025 
	`em™_Ïb–
(
s
, 
Ïb–_ÿtch
);

26027 ià(
s
->
tok’
.
v®
 == '{') {

26029 
	`em™_İ
(
s
, 
OP_drİ
);

26031 ià(
	`js_·r£_ex³ù
(
s
, '('))

26032 
ç
;

26033 ià(!(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 && !s->tok’.
u
.
id’t
.
is_»£rved
)) {

26034 ià(
s
->
tok’
.
v®
 == '[' || s->token.val == '{') {

26036 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 
TOK_LET
, 0, 
TRUE
, -1, TRUE))

26037 
ç
;

26039 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

26040 
ç
;

26043 
Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

26044 ià(
	`Ãxt_tok’
(
s
)

26045 || 
	`js_defše_v¬
(
s
, 
Çme
, 
TOK_CATCH
) < 0) {

26046 
	`JS_F»eAtom
(
ùx
, 
Çme
);

26047 
ç
;

26050 
	`em™_İ
(
s
, 
OP_scİe_put_v¬
);

26051 
	`em™_u32
(
s
, 
Çme
);

26052 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

26054 ià(
	`js_·r£_ex³ù
(
s
, ')'))

26055 
ç
;

26058 
	`em™_gÙo
(
s
, 
OP_ÿtch
, 
Ïb–_ÿtch2
);

26060 
	`push_scİe
(
s
);

26061 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
block_’v
, 
JS_ATOM_NULL
,

26063 
block_’v
.
Ïb–_fš®ly
 =†abel_finally;

26065 ià(
	`js_·r£_block
(
s
))

26066 
ç
;

26068 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

26069 
	`pİ_scİe
(
s
);

26070 
	`pİ_scİe
(
s
);

26072 ià(
	`js_is_live_code
(
s
)) {

26074 
	`em™_İ
(
s
, 
OP_drİ
);

26077 
	`em™_İ
(
s
, 
OP_undefšed
);

26078 
	`em™_gÙo
(
s
, 
OP_gosub
, 
Ïb–_fš®ly
);

26079 
	`em™_İ
(
s
, 
OP_drİ
);

26080 
	`em™_gÙo
(
s
, 
OP_gÙo
, 
Ïb–_’d
);

26084 
	`em™_Ïb–
(
s
, 
Ïb–_ÿtch2
);

26086 
	`em™_gÙo
(
s
, 
OP_gosub
, 
Ïb–_fš®ly
);

26087 
	`em™_İ
(
s
, 
OP_throw
);

26089 } ià(
s
->
tok’
.
v®
 =ğ
TOK_FINALLY
) {

26092 
	`em™_Ïb–
(
s
, 
Ïb–_ÿtch
);

26094 
	`em™_gÙo
(
s
, 
OP_gosub
, 
Ïb–_fš®ly
);

26095 
	`em™_İ
(
s
, 
OP_throw
);

26097 
	`js_·r£_”rÜ
(
s
, "expecting catch or finally");

26098 
ç
;

26100 
	`em™_Ïb–
(
s
, 
Ïb–_fš®ly
);

26101 ià(
s
->
tok’
.
v®
 =ğ
TOK_FINALLY
) {

26102 
§ved_ev®_»t_idx
;

26103 ià(
	`Ãxt_tok’
(
s
))

26104 
ç
;

26106 
	`push_b»ak_’Œy
(
s
->
cur_func
, &
block_’v
, 
JS_ATOM_NULL
,

26108 
§ved_ev®_»t_idx
 = 
s
->
cur_func
->
ev®_»t_idx
;

26109 
s
->
cur_func
->
ev®_»t_idx
 = -1;

26111 ià(
	`js_·r£_block
(
s
))

26112 
ç
;

26113 
s
->
cur_func
->
ev®_»t_idx
 = 
§ved_ev®_»t_idx
;

26114 
	`pİ_b»ak_’Œy
(
s
->
cur_func
);

26116 
	`em™_İ
(
s
, 
OP_»t
);

26117 
	`em™_Ïb–
(
s
, 
Ïb–_’d
);

26122 ià(
	`Ãxt_tok’
(
s
))

26123 
ç
;

26125 
TOK_WITH
:

26126 ià(
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
) {

26127 
	`js_·r£_”rÜ
(
s
, "invalid keyword: with");

26128 
ç
;

26130 
w™h_idx
;

26132 ià(
	`Ãxt_tok’
(
s
))

26133 
ç
;

26135 ià(
	`js_·r£_ex´_·»n
(
s
))

26136 
ç
;

26138 
	`push_scİe
(
s
);

26139 
w™h_idx
 = 
	`defše_v¬
(
s
, s->
cur_func
, 
JS_ATOM__w™h_
,

26140 
JS_VAR_DEF_WITH
);

26141 ià(
w™h_idx
 < 0)

26142 
ç
;

26143 
	`em™_İ
(
s
, 
OP_to_objeù
);

26144 
	`em™_İ
(
s
, 
OP_put_loc
);

26145 
	`em™_u16
(
s
, 
w™h_idx
);

26147 
	`£t_ev®_»t_undefšed
(
s
);

26148 ià(
	`js_·r£_¡©em’t
(
s
))

26149 
ç
;

26152 
	`pİ_scİe
(
s
);

26155 
TOK_FUNCTION
:

26157 ià(!(
deş_mask
 & 
DECL_MASK_FUNC
))

26158 
func_deş_”rÜ
;

26159 ià(!(
deş_mask
 & 
DECL_MASK_OTHER
è&& 
	`³ek_tok’
(
s
, 
FALSE
) == '*')

26160 
func_deş_”rÜ
;

26161 
·r£_func_v¬
;

26162 
TOK_IDENT
:

26163 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

26164 
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

26165 
ç
;

26168 
	`is_Ët
(
s
, 
deş_mask
)) {

26169 
TRUE
:

26170 
tok
 = 
TOK_LET
;

26171 
ha¦‘
;

26172 
FALSE
:

26175 
ç
;

26177 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

26178 
	`³ek_tok’
(
s
, 
TRUE
è=ğ
TOK_FUNCTION
) {

26179 ià(!(
deş_mask
 & 
DECL_MASK_OTHER
)) {

26180 
func_deş_”rÜ
:

26181 
	`js_·r£_”rÜ
(
s
, "function declarations can't‡ppear in single-statement context");

26182 
ç
;

26184 
·r£_func_v¬
:

26185 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_VAR
,

26186 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

26187 
s
->
tok’
.
±r
, s->tok’.
lše_num
))

26188 
ç
;

26191 
ha£x´
;

26193 
TOK_CLASS
:

26194 ià(!(
deş_mask
 & 
DECL_MASK_OTHER
)) {

26195 
	`js_·r£_”rÜ
(
s
, "class declarations can't‡ppear in single-statement context");

26196 
ç
;

26198 ià(
	`js_·r£_şass
(
s
, 
FALSE
, 
JS_PARSE_EXPORT_NONE
))

26202 
TOK_DEBUGGER
:

26204 ià(
	`Ãxt_tok’
(
s
))

26205 
ç
;

26206 ià(
	`js_·r£_ex³ù_£mi
(
s
))

26207 
ç
;

26210 
TOK_ENUM
:

26211 
TOK_EXPORT
:

26212 
TOK_EXTENDS
:

26213 
	`js_unsuµÜ‹d_keywÜd
(
s
, s->
tok’
.
u
.
id’t
.
©om
);

26214 
ç
;

26217 
ha£x´
:

26218 ià(
	`js_·r£_ex´
(
s
))

26219 
ç
;

26220 ià(
s
->
cur_func
->
ev®_»t_idx
 >= 0) {

26223 
	`em™_İ
(
s
, 
OP_put_loc
);

26224 
	`em™_u16
(
s
, s->
cur_func
->
ev®_»t_idx
);

26226 
	`em™_İ
(
s
, 
OP_drİ
);

26228 ià(
	`js_·r£_ex³ù_£mi
(
s
))

26229 
ç
;

26232 
dÚe
:

26233 
	`JS_F»eAtom
(
ùx
, 
Ïb–_Çme
);

26235 
ç
:

26236 
	`JS_F»eAtom
(
ùx
, 
Ïb–_Çme
);

26238 
	}
}

26241 
JSModuËDef
 *
	$js_Ãw_moduË_def
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
)

26243 
JSModuËDef
 *
m
;

26244 
m
 = 
	`js_m®locz
(
ùx
, (*m));

26245 ià(!
m
) {

26246 
	`JS_F»eAtom
(
ùx
, 
Çme
);

26247  
NULL
;

26249 
m
->
h—d”
.
»f_couÁ
 = 1;

26250 
m
->
moduË_Çme
 = 
Çme
;

26251 
m
->
moduË_ns
 = 
JS_UNDEFINED
;

26252 
m
->
func_obj
 = 
JS_UNDEFINED
;

26253 
m
->
ev®_exû±iÚ
 = 
JS_UNDEFINED
;

26254 
m
->
m‘a_obj
 = 
JS_UNDEFINED
;

26255 
	`li¡_add_
(&
m
->
lšk
, &
ùx
->
lßded_moduËs
);

26256  
m
;

26257 
	}
}

26259 
	$js_m¬k_moduË_def
(
JSRuÁime
 *
¹
, 
JSModuËDef
 *
m
,

26260 
JS_M¬kFunc
 *
m¬k_func
)

26262 
i
;

26264 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

26265 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

26266 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
 &&

26267 
me
->
u
.
loÿl
.
v¬_»f
) {

26268 
	`m¬k_func
(
¹
, &
me
->
u
.
loÿl
.
v¬_»f
->
h—d”
);

26272 
	`JS_M¬kV®ue
(
¹
, 
m
->
moduË_ns
, 
m¬k_func
);

26273 
	`JS_M¬kV®ue
(
¹
, 
m
->
func_obj
, 
m¬k_func
);

26274 
	`JS_M¬kV®ue
(
¹
, 
m
->
ev®_exû±iÚ
, 
m¬k_func
);

26275 
	`JS_M¬kV®ue
(
¹
, 
m
->
m‘a_obj
, 
m¬k_func
);

26276 
	}
}

26278 
	$js_ä“_moduË_def
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

26280 
i
;

26282 
	`JS_F»eAtom
(
ùx
, 
m
->
moduË_Çme
);

26284 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

26285 
JSReqModuËEÁry
 *
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

26286 
	`JS_F»eAtom
(
ùx
, 
rme
->
moduË_Çme
);

26288 
	`js_ä“
(
ùx
, 
m
->
»q_moduË_’Œ›s
);

26290 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

26291 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

26292 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
)

26293 
	`ä“_v¬_»f
(
ùx
->
¹
, 
me
->
u
.
loÿl
.
v¬_»f
);

26294 
	`JS_F»eAtom
(
ùx
, 
me
->
expÜt_Çme
);

26295 
	`JS_F»eAtom
(
ùx
, 
me
->
loÿl_Çme
);

26297 
	`js_ä“
(
ùx
, 
m
->
expÜt_’Œ›s
);

26299 
	`js_ä“
(
ùx
, 
m
->
¡¬_expÜt_’Œ›s
);

26301 
i
 = 0; i < 
m
->
impÜt_’Œ›s_couÁ
; i++) {

26302 
JSImpÜtEÁry
 *
mi
 = &
m
->
impÜt_’Œ›s
[
i
];

26303 
	`JS_F»eAtom
(
ùx
, 
mi
->
impÜt_Çme
);

26305 
	`js_ä“
(
ùx
, 
m
->
impÜt_’Œ›s
);

26307 
	`JS_F»eV®ue
(
ùx
, 
m
->
moduË_ns
);

26308 
	`JS_F»eV®ue
(
ùx
, 
m
->
func_obj
);

26309 
	`JS_F»eV®ue
(
ùx
, 
m
->
ev®_exû±iÚ
);

26310 
	`JS_F»eV®ue
(
ùx
, 
m
->
m‘a_obj
);

26311 
	`li¡_d–
(&
m
->
lšk
);

26312 
	`js_ä“
(
ùx
, 
m
);

26313 
	}
}

26315 
	$js_»size_¬¿y
(
JSCÚ‹xt
 *
ùx
, **
·¼ay
, 
–em_size
,

26316 *
psize
, *
pcouÁ
, 
Ãw_couÁ
)

26318 ià(
	`uÆik–y
(
Ãw_couÁ
 > *
psize
)) {

26319 
Ãw_size
;

26320 
size_t
 
¦ack
;

26321 *
Ãw_¬¿y
;

26323 
Ãw_size
 = 
	`max_št
(
Ãw_couÁ
, *
psize
 * 3 / 2);

26324 
Ãw_¬¿y
 = 
	`js_»®loc2
(
ùx
, *
·¼ay
, 
Ãw_size
 * 
–em_size
, &
¦ack
);

26325 ià(!
Ãw_¬¿y
)

26327 
Ãw_size
 +ğ
¦ack
 / 
–em_size
;

26328 *
psize
 = 
Ãw_size
;

26329 *
·¼ay
 = 
Ãw_¬¿y
;

26331 *
pcouÁ
 = 
Ãw_couÁ
;

26333 
	}
}

26335 
	$add_»q_moduË_’Œy
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
,

26336 
JSAtom
 
moduË_Çme
)

26338 
JSReqModuËEÁry
 *
rme
;

26339 
i
;

26342 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

26343 
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

26344 ià(
rme
->
moduË_Çme
 == module_name)

26345  
i
;

26348 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
m
->
»q_moduË_’Œ›s
,

26349 (
JSReqModuËEÁry
),

26350 &
m
->
»q_moduË_’Œ›s_size
, &m->
»q_moduË_’Œ›s_couÁ
,

26351 
m
->
»q_moduË_’Œ›s_couÁ
 + 1))

26353 
i
 = 
m
->
»q_moduË_’Œ›s_couÁ
 - 1;

26354 
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

26355 
rme
->
moduË_Çme
 = 
	`JS_DupAtom
(
ùx
, module_name);

26356 
rme
->
moduË
 = 
NULL
;

26357  
i
;

26358 
	}
}

26360 
JSExpÜtEÁry
 *
	$fšd_expÜt_’Œy
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
,

26361 
JSAtom
 
expÜt_Çme
)

26363 
JSExpÜtEÁry
 *
me
;

26364 
i
;

26365 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

26366 
me
 = &
m
->
expÜt_’Œ›s
[
i
];

26367 ià(
me
->
expÜt_Çme
 ==ƒxport_name)

26368  
me
;

26370  
NULL
;

26371 
	}
}

26373 
JSExpÜtEÁry
 *
	$add_expÜt_’Œy2
(
JSCÚ‹xt
 *
ùx
,

26374 
JSP¬£S‹
 *
s
, 
JSModuËDef
 *
m
,

26375 
JSAtom
 
loÿl_Çme
, JSAtom 
expÜt_Çme
,

26376 
JSExpÜtTy³Enum
 
expÜt_ty³
)

26378 
JSExpÜtEÁry
 *
me
;

26380 ià(
	`fšd_expÜt_’Œy
(
ùx
, 
m
, 
expÜt_Çme
)) {

26381 
buf1
[
ATOM_GET_STR_BUF_SIZE
];

26382 ià(
s
) {

26383 
	`js_·r£_”rÜ
(
s
, "duplicateƒxported‚ame '%s'",

26384 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
expÜt_Çme
));

26386 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "duplicateƒxported‚ame '%s'",

26387 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
expÜt_Çme
));

26389  
NULL
;

26392 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
m
->
expÜt_’Œ›s
,

26393 (
JSExpÜtEÁry
),

26394 &
m
->
expÜt_’Œ›s_size
, &m->
expÜt_’Œ›s_couÁ
,

26395 
m
->
expÜt_’Œ›s_couÁ
 + 1))

26396  
NULL
;

26397 
me
 = &
m
->
expÜt_’Œ›s
[m->
expÜt_’Œ›s_couÁ
 - 1];

26398 
	`mem£t
(
me
, 0, (*me));

26399 
me
->
loÿl_Çme
 = 
	`JS_DupAtom
(
ùx
,†ocal_name);

26400 
me
->
expÜt_Çme
 = 
	`JS_DupAtom
(
ùx
,ƒxport_name);

26401 
me
->
expÜt_ty³
 =ƒxport_type;

26402  
me
;

26403 
	}
}

26405 
JSExpÜtEÁry
 *
	$add_expÜt_’Œy
(
JSP¬£S‹
 *
s
, 
JSModuËDef
 *
m
,

26406 
JSAtom
 
loÿl_Çme
, JSAtom 
expÜt_Çme
,

26407 
JSExpÜtTy³Enum
 
expÜt_ty³
)

26409  
	`add_expÜt_’Œy2
(
s
->
ùx
, s, 
m
, 
loÿl_Çme
, 
expÜt_Çme
,

26410 
expÜt_ty³
);

26411 
	}
}

26413 
	$add_¡¬_expÜt_’Œy
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
,

26414 
»q_moduË_idx
)

26416 
JSSrExpÜtEÁry
 *
£
;

26418 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
m
->
¡¬_expÜt_’Œ›s
,

26419 (
JSSrExpÜtEÁry
),

26420 &
m
->
¡¬_expÜt_’Œ›s_size
, &m->
¡¬_expÜt_’Œ›s_couÁ
,

26421 
m
->
¡¬_expÜt_’Œ›s_couÁ
 + 1))

26423 
£
 = &
m
->
¡¬_expÜt_’Œ›s
[m->
¡¬_expÜt_’Œ›s_couÁ
 - 1];

26424 
£
->
»q_moduË_idx
 =„eq_module_idx;

26426 
	}
}

26429 
JSModuËDef
 *
	$JS_NewCModuË
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
Çme_¡r
,

26430 
JSModuËIn™Func
 *
func
)

26432 
JSModuËDef
 *
m
;

26433 
JSAtom
 
Çme
;

26434 
Çme
 = 
	`JS_NewAtom
(
ùx
, 
Çme_¡r
);

26435 ià(
Çme
 =ğ
JS_ATOM_NULL
)

26436  
NULL
;

26437 
m
 = 
	`js_Ãw_moduË_def
(
ùx
, 
Çme
);

26438 
m
->
š™_func
 = 
func
;

26439  
m
;

26440 
	}
}

26442 
	$JS_AddModuËExpÜt
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
, cÚ¡ *
expÜt_Çme
)

26444 
JSExpÜtEÁry
 *
me
;

26445 
JSAtom
 
Çme
;

26446 
Çme
 = 
	`JS_NewAtom
(
ùx
, 
expÜt_Çme
);

26447 ià(
Çme
 =ğ
JS_ATOM_NULL
)

26449 
me
 = 
	`add_expÜt_’Œy2
(
ùx
, 
NULL
, 
m
, 
JS_ATOM_NULL
, 
Çme
,

26450 
JS_EXPORT_TYPE_LOCAL
);

26451 
	`JS_F»eAtom
(
ùx
, 
Çme
);

26452 ià(!
me
)

26456 
	}
}

26458 
	$JS_S‘ModuËExpÜt
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
, cÚ¡ *
expÜt_Çme
,

26459 
JSV®ue
 
v®
)

26461 
JSExpÜtEÁry
 *
me
;

26462 
JSAtom
 
Çme
;

26463 
Çme
 = 
	`JS_NewAtom
(
ùx
, 
expÜt_Çme
);

26464 ià(
Çme
 =ğ
JS_ATOM_NULL
)

26465 
ç
;

26466 
me
 = 
	`fšd_expÜt_’Œy
(
ùx
, 
m
, 
Çme
);

26467 
	`JS_F»eAtom
(
ùx
, 
Çme
);

26468 ià(!
me
)

26469 
ç
;

26470 
	`£t_v®ue
(
ùx
, 
me
->
u
.
loÿl
.
v¬_»f
->
pv®ue
, 
v®
);

26472 
ç
:

26473 
	`JS_F»eV®ue
(
ùx
, 
v®
);

26475 
	}
}

26477 
	$JS_S‘ModuËLßd”Func
(
JSRuÁime
 *
¹
,

26478 
JSModuËNÜm®izeFunc
 *
moduË_nÜm®ize
,

26479 
JSModuËLßd”Func
 *
moduË_lßd”
, *
İaque
)

26481 
¹
->
moduË_nÜm®ize_func
 = 
moduË_nÜm®ize
;

26482 
¹
->
moduË_lßd”_func
 = 
moduË_lßd”
;

26483 
¹
->
moduË_lßd”_İaque
 = 
İaque
;

26484 
	}
}

26487 *
	$js_deçuÉ_moduË_nÜm®ize_Çme
(
JSCÚ‹xt
 *
ùx
,

26488 cÚ¡ *
ba£_Çme
,

26489 cÚ¡ *
Çme
)

26491 *
f’ame
, *
p
;

26492 cÚ¡ *
r
;

26493 
Ën
;

26495 ià(
Çme
[0] != '.') {

26497  
	`js_¡rdup
(
ùx
, 
Çme
);

26500 
p
 = 
	`¡¼chr
(
ba£_Çme
, '/');

26501 ià(
p
)

26502 
Ën
 = 
p
 - 
ba£_Çme
;

26504 
Ën
 = 0;

26506 
f’ame
 = 
	`js_m®loc
(
ùx
, 
Ën
 + 
	`¡¾’
(
Çme
) + 1 + 1);

26507 ià(!
f’ame
)

26508  
NULL
;

26509 
	`memıy
(
f’ame
, 
ba£_Çme
, 
Ën
);

26510 
f’ame
[
Ën
] = '\0';

26513 
r
 = 
Çme
;

26515 ià(
r
[0] == '.' &&„[1] == '/') {

26516 
r
 += 2;

26517 } ià(
r
[0] == '.' &&„[1] == '.' &&„[2] == '/') {

26520 ià(
f’ame
[0] == '\0')

26522 
p
 = 
	`¡¼chr
(
f’ame
, '/');

26523 ià(!
p
)

26524 
p
 = 
f’ame
;

26526 
p
++;

26527 ià(!
	`¡rcmp
(
p
, ".") || !strcmp(p, ".."))

26529 ià(
p
 > 
f’ame
)

26530 
p
--;

26531 *
p
 = '\0';

26532 
r
 += 3;

26537 ià(
f’ame
[0] != '\0')

26538 
	`¡rÿt
(
f’ame
, "/");

26539 
	`¡rÿt
(
f’ame
, 
r
);

26541  
f’ame
;

26542 
	}
}

26544 
JSModuËDef
 *
	$js_fšd_lßded_moduË
(
JSCÚ‹xt
 *
ùx
, 
JSAtom
 
Çme
)

26546 
li¡_h—d
 *
–
;

26547 
JSModuËDef
 *
m
;

26550 
	`li¡_fÜ_—ch
(
–
, &
ùx
->
lßded_moduËs
) {

26551 
m
 = 
	`li¡_’Œy
(
–
, 
JSModuËDef
, 
lšk
);

26552 ià(
m
->
moduË_Çme
 =ğ
Çme
)

26553  
m
;

26555  
NULL
;

26556 
	}
}

26559 
JSModuËDef
 *
	$js_ho¡_»sŞve_impÜ‹d_moduË
(
JSCÚ‹xt
 *
ùx
,

26560 
JSAtom
 
ba£_moduË_Çme
,

26561 
JSAtom
 
moduË_Çme1
)

26563 
JSRuÁime
 *
¹
 = 
ùx
->rt;

26564 
JSModuËDef
 *
m
;

26565 *
úame
;

26566 cÚ¡ *
ba£_úame
, *
úame1
;

26567 
JSAtom
 
moduË_Çme
;

26569 
ba£_úame
 = 
	`JS_AtomToCSŒšg
(
ùx
, 
ba£_moduË_Çme
);

26570 ià(!
ba£_úame
)

26571  
NULL
;

26572 
úame1
 = 
	`JS_AtomToCSŒšg
(
ùx
, 
moduË_Çme1
);

26573 ià(!
úame1
) {

26574 
	`JS_F»eCSŒšg
(
ùx
, 
ba£_úame
);

26575  
NULL
;

26578 ià(!
¹
->
moduË_nÜm®ize_func
) {

26579 
úame
 = 
	`js_deçuÉ_moduË_nÜm®ize_Çme
(
ùx
, 
ba£_úame
, 
úame1
);

26581 
úame
 = 
¹
->
	`moduË_nÜm®ize_func
(
ùx
, 
ba£_úame
, 
úame1
,

26582 
¹
->
moduË_lßd”_İaque
);

26584 
	`JS_F»eCSŒšg
(
ùx
, 
ba£_úame
);

26585 
	`JS_F»eCSŒšg
(
ùx
, 
úame1
);

26586 ià(!
úame
)

26587  
NULL
;

26589 
moduË_Çme
 = 
	`JS_NewAtom
(
ùx
, 
úame
);

26590 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
) {

26591 
	`js_ä“
(
ùx
, 
úame
);

26592  
NULL
;

26596 
m
 = 
	`js_fšd_lßded_moduË
(
ùx
, 
moduË_Çme
);

26597 ià(
m
) {

26598 
	`js_ä“
(
ùx
, 
úame
);

26599 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

26600  
m
;

26603 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

26606 ià(!
¹
->
moduË_lßd”_func
) {

26608 
	`JS_ThrowReã»nûE¼Ü
(
ùx
, "could‚ot†oad module '%s'",

26609 
úame
);

26610 
	`js_ä“
(
ùx
, 
úame
);

26611  
NULL
;

26614 
m
 = 
¹
->
	`moduË_lßd”_func
(
ùx
, 
úame
,„t->
moduË_lßd”_İaque
);

26615 
	`js_ä“
(
ùx
, 
úame
);

26616  
m
;

26617 
	}
}

26619 
	sJSResŞveEÁry
 {

26620 
JSModuËDef
 *
	mmoduË
;

26621 
JSAtom
 
	mÇme
;

26622 } 
	tJSResŞveEÁry
;

26624 
	sJSResŞveS‹
 {

26625 
JSResŞveEÁry
 *
	m¬¿y
;

26626 
	msize
;

26627 
	mcouÁ
;

26628 } 
	tJSResŞveS‹
;

26630 
	$fšd_»sŞve_’Œy
(
JSResŞveS‹
 *
s
,

26631 
JSModuËDef
 *
m
, 
JSAtom
 
Çme
)

26633 
i
;

26634 
i
 = 0; i < 
s
->
couÁ
; i++) {

26635 
JSResŞveEÁry
 *
»
 = &
s
->
¬¿y
[
i
];

26636 ià(
»
->
moduË
 =ğ
m
 &&„e->
Çme
 ==‚ame)

26637  
i
;

26640 
	}
}

26642 
	$add_»sŞve_’Œy
(
JSCÚ‹xt
 *
ùx
, 
JSResŞveS‹
 *
s
,

26643 
JSModuËDef
 *
m
, 
JSAtom
 
Çme
)

26645 
JSResŞveEÁry
 *
»
;

26647 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
s
->
¬¿y
,

26648 (
JSResŞveEÁry
),

26649 &
s
->
size
, &s->
couÁ
,

26650 
s
->
couÁ
 + 1))

26652 
»
 = &
s
->
¬¿y
[s->
couÁ
 - 1];

26653 
»
->
moduË
 = 
m
;

26654 
»
->
Çme
 = 
	`JS_DupAtom
(
ùx
,‚ame);

26656 
	}
}

26658 
	eJSResŞveResuÉEnum
 {

26659 
	mJS_RESOLVE_RES_EXCEPTION
 = -1,

26660 
	mJS_RESOLVE_RES_FOUND
 = 0,

26661 
	mJS_RESOLVE_RES_NOT_FOUND
,

26662 
	mJS_RESOLVE_RES_CIRCULAR
,

26663 
	mJS_RESOLVE_RES_AMBIGUOUS
,

26664 } 
	tJSResŞveResuÉEnum
;

26666 
JSResŞveResuÉEnum
 
	$js_»sŞve_expÜt1
(
JSCÚ‹xt
 *
ùx
,

26667 
JSModuËDef
 **
pmoduË
,

26668 
JSExpÜtEÁry
 **
pme
,

26669 
JSModuËDef
 *
m
,

26670 
JSAtom
 
expÜt_Çme
,

26671 
JSResŞveS‹
 *
s
)

26673 
JSExpÜtEÁry
 *
me
;

26675 *
pmoduË
 = 
NULL
;

26676 *
pme
 = 
NULL
;

26677 ià(
	`fšd_»sŞve_’Œy
(
s
, 
m
, 
expÜt_Çme
) >= 0)

26678  
JS_RESOLVE_RES_CIRCULAR
;

26679 ià(
	`add_»sŞve_’Œy
(
ùx
, 
s
, 
m
, 
expÜt_Çme
) < 0)

26680  
JS_RESOLVE_RES_EXCEPTION
;

26681 
me
 = 
	`fšd_expÜt_’Œy
(
ùx
, 
m
, 
expÜt_Çme
);

26682 ià(
me
) {

26683 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
) {

26685 *
pmoduË
 = 
m
;

26686 *
pme
 = 
me
;

26687  
JS_RESOLVE_RES_FOUND
;

26690 
JSModuËDef
 *
m1
;

26691 
m1
 = 
m
->
»q_moduË_’Œ›s
[
me
->
u
.
»q_moduË_idx
].
moduË
;

26692 ià(
me
->
loÿl_Çme
 =ğ
JS_ATOM__¡¬_
) {

26694 *
pmoduË
 = 
m
;

26695 *
pme
 = 
me
;

26696  
JS_RESOLVE_RES_FOUND
;

26698  
	`js_»sŞve_expÜt1
(
ùx
, 
pmoduË
, 
pme
, 
m1
,

26699 
me
->
loÿl_Çme
, 
s
);

26703 ià(
expÜt_Çme
 !ğ
JS_ATOM_deçuÉ
) {

26705 
i
;

26707 
i
 = 0; i < 
m
->
¡¬_expÜt_’Œ›s_couÁ
; i++) {

26708 
JSSrExpÜtEÁry
 *
£
 = &
m
->
¡¬_expÜt_’Œ›s
[
i
];

26709 
JSModuËDef
 *
m1
, *
»s_m
;

26710 
JSExpÜtEÁry
 *
»s_me
;

26711 
JSResŞveResuÉEnum
 
»t
;

26713 
m1
 = 
m
->
»q_moduË_’Œ›s
[
£
->
»q_moduË_idx
].
moduË
;

26714 
»t
 = 
	`js_»sŞve_expÜt1
(
ùx
, &
»s_m
, &
»s_me
, 
m1
,

26715 
expÜt_Çme
, 
s
);

26716 ià(
»t
 =ğ
JS_RESOLVE_RES_AMBIGUOUS
 ||

26717 
»t
 =ğ
JS_RESOLVE_RES_EXCEPTION
) {

26718  
»t
;

26719 } ià(
»t
 =ğ
JS_RESOLVE_RES_FOUND
) {

26720 ià(*
pme
 !ğ
NULL
) {

26721 ià(*
pmoduË
 !ğ
»s_m
 ||

26722 
»s_me
->
loÿl_Çme
 !ğ(*
pme
)->local_name) {

26723 *
pmoduË
 = 
NULL
;

26724 *
pme
 = 
NULL
;

26725  
JS_RESOLVE_RES_AMBIGUOUS
;

26728 *
pmoduË
 = 
»s_m
;

26729 *
pme
 = 
»s_me
;

26733 ià(*
pme
 !ğ
NULL
)

26734  
JS_RESOLVE_RES_FOUND
;

26736  
JS_RESOLVE_RES_NOT_FOUND
;

26738 
	}
}

26743 
JSResŞveResuÉEnum
 
	$js_»sŞve_expÜt
(
JSCÚ‹xt
 *
ùx
,

26744 
JSModuËDef
 **
pmoduË
,

26745 
JSExpÜtEÁry
 **
pme
,

26746 
JSModuËDef
 *
m
,

26747 
JSAtom
 
expÜt_Çme
)

26749 
JSResŞveS‹
 
ss
, *
s
 = &ss;

26750 
i
;

26751 
JSResŞveResuÉEnum
 
»t
;

26753 
s
->
¬¿y
 = 
NULL
;

26754 
s
->
size
 = 0;

26755 
s
->
couÁ
 = 0;

26757 
»t
 = 
	`js_»sŞve_expÜt1
(
ùx
, 
pmoduË
, 
pme
, 
m
, 
expÜt_Çme
, 
s
);

26759 
i
 = 0; i < 
s
->
couÁ
; i++)

26760 
	`JS_F»eAtom
(
ùx
, 
s
->
¬¿y
[
i
].
Çme
);

26761 
	`js_ä“
(
ùx
, 
s
->
¬¿y
);

26763  
»t
;

26764 
	}
}

26766 
	$js_»sŞve_expÜt_throw_”rÜ
(
JSCÚ‹xt
 *
ùx
,

26767 
JSResŞveResuÉEnum
 
»s
,

26768 
JSModuËDef
 *
m
, 
JSAtom
 
expÜt_Çme
)

26770 
buf1
[
ATOM_GET_STR_BUF_SIZE
];

26771 
buf2
[
ATOM_GET_STR_BUF_SIZE
];

26772 
»s
) {

26773 
JS_RESOLVE_RES_EXCEPTION
:

26776 
JS_RESOLVE_RES_NOT_FOUND
:

26777 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "export '%s' in module '%s' is‡mbiguous",

26778 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
expÜt_Çme
),

26779 
	`JS_AtomG‘SŒ
(
ùx
, 
buf2
, (buf2), 
m
->
moduË_Çme
));

26781 
JS_RESOLVE_RES_CIRCULAR
:

26782 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "Could‚ot findƒxport '%s' in module '%s'",

26783 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
expÜt_Çme
),

26784 
	`JS_AtomG‘SŒ
(
ùx
, 
buf2
, (buf2), 
m
->
moduË_Çme
));

26786 
JS_RESOLVE_RES_AMBIGUOUS
:

26787 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "circular„eference when†ooking forƒxport '%s' in module '%s'",

26788 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
expÜt_Çme
),

26789 
	`JS_AtomG‘SŒ
(
ùx
, 
buf2
, (buf2), 
m
->
moduË_Çme
));

26792 
	}
}

26796 
	mEXPORTED_NAME_AMBIGUOUS
,

26797 
	mEXPORTED_NAME_NORMAL
,

26798 
	mEXPORTED_NAME_NS
,

26799 } 
	tExpÜ‹dNameEÁryEnum
;

26801 
	sExpÜ‹dNameEÁry
 {

26802 
JSAtom
 
	mexpÜt_Çme
;

26803 
ExpÜ‹dNameEÁryEnum
 
	mexpÜt_ty³
;

26805 
JSExpÜtEÁry
 *
	mme
;

26806 
JSV¬Ref
 *
	mv¬_»f
;

26807 
JSModuËDef
 *
	mmoduË
;

26808 } 
	mu
;

26809 } 
	tExpÜ‹dNameEÁry
;

26811 
	sG‘ExpÜtNamesS‹
 {

26812 
JSModuËDef
 **
	mmoduËs
;

26813 
	mmoduËs_size
;

26814 
	mmoduËs_couÁ
;

26816 
ExpÜ‹dNameEÁry
 *
	mexpÜ‹d_Çmes
;

26817 
	mexpÜ‹d_Çmes_size
;

26818 
	mexpÜ‹d_Çmes_couÁ
;

26819 } 
	tG‘ExpÜtNamesS‹
;

26821 
	$fšd_expÜ‹d_Çme
(
G‘ExpÜtNamesS‹
 *
s
, 
JSAtom
 
Çme
)

26823 
i
;

26824 
i
 = 0; i < 
s
->
expÜ‹d_Çmes_couÁ
; i++) {

26825 ià(
s
->
expÜ‹d_Çmes
[
i
].
expÜt_Çme
 =ğ
Çme
)

26826  
i
;

26829 
	}
}

26831 
__exû±iÚ
 
	$g‘_expÜ‹d_Çmes
(
JSCÚ‹xt
 *
ùx
,

26832 
G‘ExpÜtNamesS‹
 *
s
,

26833 
JSModuËDef
 *
m
, 
BOOL
 
äom_¡¬
)

26835 
ExpÜ‹dNameEÁry
 *
’
;

26836 
i
, 
j
;

26839 
i
 = 0; i < 
s
->
moduËs_couÁ
; i++) {

26840 ià(
s
->
moduËs
[
i
] =ğ
m
)

26843 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
s
->
moduËs
, (s->modules[0]),

26844 &
s
->
moduËs_size
, &s->
moduËs_couÁ
, s->modules_count + 1))

26846 
s
->
moduËs
[s->
moduËs_couÁ
 - 1] = 
m
;

26848 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

26849 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

26850 ià(
äom_¡¬
 && 
me
->
expÜt_Çme
 =ğ
JS_ATOM_deçuÉ
)

26852 
j
 = 
	`fšd_expÜ‹d_Çme
(
s
, 
me
->
expÜt_Çme
);

26853 ià(
j
 < 0) {

26854 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
s
->
expÜ‹d_Çmes
, (s->exported_names[0]),

26855 &
s
->
expÜ‹d_Çmes_size
, &s->
expÜ‹d_Çmes_couÁ
, s->exported_names_count + 1))

26857 
’
 = &
s
->
expÜ‹d_Çmes
[s->
expÜ‹d_Çmes_couÁ
 - 1];

26858 
’
->
expÜt_Çme
 = 
me
->export_name;

26860 ià(
äom_¡¬
 || 
me
->
expÜt_ty³
 !ğ
JS_EXPORT_TYPE_LOCAL
)

26861 
’
->
u
.
me
 = 
NULL
;

26863 
’
->
u
.
me
 = me;

26865 
’
 = &
s
->
expÜ‹d_Çmes
[
j
];

26866 
’
->
u
.
me
 = 
NULL
;

26869 
i
 = 0; i < 
m
->
¡¬_expÜt_’Œ›s_couÁ
; i++) {

26870 
JSSrExpÜtEÁry
 *
£
 = &
m
->
¡¬_expÜt_’Œ›s
[
i
];

26871 
JSModuËDef
 *
m1
;

26872 
m1
 = 
m
->
»q_moduË_’Œ›s
[
£
->
»q_moduË_idx
].
moduË
;

26873 ià(
	`g‘_expÜ‹d_Çmes
(
ùx
, 
s
, 
m1
, 
TRUE
))

26877 
	}
}

26880 
	$js_moduË_ns_has
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
©om
)

26882  (
	`fšd_own_´İ”ty1
(
	`JS_VALUE_GET_OBJ
(
obj
), 
©om
è!ğ
NULL
);

26883 
	}
}

26885 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_moduË_ns_exÙic_m‘hods
 = {

26886 .
has_´İ”ty
 = 
js_moduË_ns_has
,

26889 
	$expÜ‹d_Çmes_cmp
(cÚ¡ *
p1
, cÚ¡ *
p2
, *
İaque
)

26891 
JSCÚ‹xt
 *
ùx
 = 
İaque
;

26892 cÚ¡ 
ExpÜ‹dNameEÁry
 *
me1
 = 
p1
;

26893 cÚ¡ 
ExpÜ‹dNameEÁry
 *
me2
 = 
p2
;

26894 
JSV®ue
 
¡r1
, 
¡r2
;

26895 
»t
;

26898 
¡r1
 = 
	`JS_AtomToSŒšg
(
ùx
, 
me1
->
expÜt_Çme
);

26899 
¡r2
 = 
	`JS_AtomToSŒšg
(
ùx
, 
me2
->
expÜt_Çme
);

26900 ià(
	`JS_IsExû±iÚ
(
¡r1
è|| JS_IsExû±iÚ(
¡r2
)) {

26902 
»t
 = 0;

26904 
»t
 = 
	`js_¡ršg_com·»
(
ùx
, 
	`JS_VALUE_GET_STRING
(
¡r1
),

26905 
	`JS_VALUE_GET_STRING
(
¡r2
));

26907 
	`JS_F»eV®ue
(
ùx
, 
¡r1
);

26908 
	`JS_F»eV®ue
(
ùx
, 
¡r2
);

26909  
»t
;

26910 
	}
}

26912 
JSV®ue
 
js_g‘_moduË_ns
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
);

26914 
	$js_moduË_ns_autoš™
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
, 
JSAtom
 
©om
,

26915 *
İaque
)

26917 
JSModuËDef
 *
m
 = 
İaque
;

26918 
JSV®ue
 
v®
, 
this_v®
 = 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
);

26920 
v®
 = 
	`js_g‘_moduË_ns
(
ùx
, 
m
);

26921 ià(
	`JS_IsExû±iÚ
(
v®
))

26923 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
this_v®
, 
©om
, 
v®
,

26924 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
) < 0)

26927 
	}
}

26929 
JSV®ue
 
	$js_bud_moduË_ns
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

26931 
JSV®ue
 
obj
;

26932 
JSObjeù
 *
p
;

26933 
G‘ExpÜtNamesS‹
 
s_s
, *
s
 = &s_s;

26934 
i
, 
»t
;

26935 
JSPrİ”ty
 *
´
;

26937 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_MODULE_NS
);

26938 ià(
	`JS_IsExû±iÚ
(
obj
))

26939  
obj
;

26940 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

26942 
	`mem£t
(
s
, 0, (*s));

26943 
»t
 = 
	`g‘_expÜ‹d_Çmes
(
ùx
, 
s
, 
m
, 
FALSE
);

26944 
	`js_ä“
(
ùx
, 
s
->
moduËs
);

26945 ià(
»t
)

26946 
ç
;

26949 
i
 = 0; i < 
s
->
expÜ‹d_Çmes_couÁ
; i++) {

26950 
ExpÜ‹dNameEÁry
 *
’
 = &
s
->
expÜ‹d_Çmes
[
i
];

26951 
JSResŞveResuÉEnum
 
»s
;

26952 
JSExpÜtEÁry
 *
»s_me
;

26953 
JSModuËDef
 *
»s_m
;

26955 ià(
’
->
u
.
me
) {

26956 
»s_me
 = 
’
->
u
.
me
;

26957 
»s_m
 = 
m
;

26958 
»s
 = 
JS_RESOLVE_RES_FOUND
;

26960 
»s
 = 
	`js_»sŞve_expÜt
(
ùx
, &
»s_m
, &
»s_me
, 
m
,

26961 
’
->
expÜt_Çme
);

26963 ià(
»s
 !ğ
JS_RESOLVE_RES_FOUND
) {

26964 ià(
»s
 !ğ
JS_RESOLVE_RES_AMBIGUOUS
) {

26965 
	`js_»sŞve_expÜt_throw_”rÜ
(
ùx
, 
»s
, 
m
, 
’
->
expÜt_Çme
);

26966 
ç
;

26968 
’
->
expÜt_ty³
 = 
EXPORTED_NAME_AMBIGUOUS
;

26970 ià(
»s_me
->
loÿl_Çme
 =ğ
JS_ATOM__¡¬_
) {

26971 
’
->
expÜt_ty³
 = 
EXPORTED_NAME_NS
;

26972 
’
->
u
.
moduË
 = 
»s_m
->
»q_moduË_’Œ›s
[
»s_me
->u.
»q_moduË_idx
].module;

26974 
’
->
expÜt_ty³
 = 
EXPORTED_NAME_NORMAL
;

26975 ià(
»s_me
->
u
.
loÿl
.
v¬_»f
) {

26976 
’
->
u
.
v¬_»f
 = 
»s_me
->u.
loÿl
.var_ref;

26978 
JSObjeù
 *
p1
 = 
	`JS_VALUE_GET_OBJ
(
»s_m
->
func_obj
);

26979 
p1
 = 
	`JS_VALUE_GET_OBJ
(
»s_m
->
func_obj
);

26980 
’
->
u
.
v¬_»f
 = 
p1
->u.
func
.
v¬_»fs
[
»s_me
->u.
loÿl
.
v¬_idx
];

26987 
	`rqsÜt
(
s
->
expÜ‹d_Çmes
, s->
expÜ‹d_Çmes_couÁ
,

26988 (
s
->
expÜ‹d_Çmes
[0]), 
expÜ‹d_Çmes_cmp
, 
ùx
);

26990 
i
 = 0; i < 
s
->
expÜ‹d_Çmes_couÁ
; i++) {

26991 
ExpÜ‹dNameEÁry
 *
’
 = &
s
->
expÜ‹d_Çmes
[
i
];

26992 
’
->
expÜt_ty³
) {

26993 
EXPORTED_NAME_NORMAL
:

26995 
JSV¬Ref
 *
v¬_»f
 = 
’
->
u
.var_ref;

26996 
´
 = 
	`add_´İ”ty
(
ùx
, 
p
, 
’
->
expÜt_Çme
,

26997 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
 |

26998 
JS_PROP_VARREF
);

26999 ià(!
´
)

27000 
ç
;

27001 
v¬_»f
->
h—d”
.
»f_couÁ
++;

27002 
´
->
u
.
v¬_»f
 = var_ref;

27005 
EXPORTED_NAME_NS
:

27007 ià(
	`JS_DefšeAutoIn™Prİ”ty
(
ùx
, 
obj
,

27008 
’
->
expÜt_Çme
,

27009 
JS_AUTOINIT_ID_MODULE_NS
,

27010 
’
->
u
.
moduË
, 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
) < 0)

27011 
ç
;

27018 
	`js_ä“
(
ùx
, 
s
->
expÜ‹d_Çmes
);

27020 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_toSŒšgTag
,

27021 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_ModuË
),

27024 
p
->
ex‹nsibË
 = 
FALSE
;

27025  
obj
;

27026 
ç
:

27027 
	`js_ä“
(
ùx
, 
s
->
expÜ‹d_Çmes
);

27028 
	`JS_F»eV®ue
(
ùx
, 
obj
);

27029  
JS_EXCEPTION
;

27030 
	}
}

27032 
JSV®ue
 
	$js_g‘_moduË_ns
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27034 ià(
	`JS_IsUndefšed
(
m
->
moduË_ns
)) {

27035 
JSV®ue
 
v®
;

27036 
v®
 = 
	`js_bud_moduË_ns
(
ùx
, 
m
);

27037 ià(
	`JS_IsExû±iÚ
(
v®
))

27038  
JS_EXCEPTION
;

27039 
m
->
moduË_ns
 = 
v®
;

27041  
	`JS_DupV®ue
(
ùx
, 
m
->
moduË_ns
);

27042 
	}
}

27045 
	$js_»sŞve_moduË
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27047 
i
;

27048 
JSModuËDef
 *
m1
;

27050 ià(
m
->
»sŞved
)

27052 #ifdeà
DUMP_MODULE_RESOLVE


27054 
buf1
[
ATOM_GET_STR_BUF_SIZE
];

27055 
	`´štf
("»sŞvšg moduË '%s':\n", 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
m
->
moduË_Çme
));

27058 
m
->
»sŞved
 = 
TRUE
;

27060 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

27061 
JSReqModuËEÁry
 *
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

27062 
m1
 = 
	`js_ho¡_»sŞve_impÜ‹d_moduË
(
ùx
, 
m
->
moduË_Çme
,

27063 
rme
->
moduË_Çme
);

27064 ià(!
m1
)

27066 
rme
->
moduË
 = 
m1
;

27069 ià(
	`js_»sŞve_moduË
(
ùx
, 
m1
) < 0)

27073 
	}
}

27075 
JSV¬Ref
 *
	$js_ü—‹_moduË_v¬
(
JSCÚ‹xt
 *
ùx
, 
BOOL
 
is_Ëxiÿl
)

27077 
JSV¬Ref
 *
v¬_»f
;

27078 
v¬_»f
 = 
	`js_m®loc
(
ùx
, (
JSV¬Ref
));

27079 ià(!
v¬_»f
)

27080  
NULL
;

27081 
v¬_»f
->
h—d”
.
»f_couÁ
 = 1;

27082 ià(
is_Ëxiÿl
)

27083 
v¬_»f
->
v®ue
 = 
JS_UNINITIALIZED
;

27085 
v¬_»f
->
v®ue
 = 
JS_UNDEFINED
;

27086 
v¬_»f
->
pv®ue
 = &v¬_»f->
v®ue
;

27087 
v¬_»f
->
is_d‘ached
 = 
TRUE
;

27088 
	`add_gc_objeù
(
ùx
->
¹
, &
v¬_»f
->
h—d”
, 
JS_GC_OBJ_TYPE_VAR_REF
);

27089  
v¬_»f
;

27090 
	}
}

27093 
	$js_ü—‹_moduË_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27095 
JSFunùiÚBy‹code
 *
b
;

27096 
i
;

27097 
JSV¬Ref
 **
v¬_»fs
;

27098 
JSV®ue
 
func_obj
, 
bfunc
;

27099 
JSObjeù
 *
p
;

27101 
bfunc
 = 
m
->
func_obj
;

27102 
func_obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
funùiÚ_´Ùo
,

27103 
JS_CLASS_BYTECODE_FUNCTION
);

27105 ià(
	`JS_IsExû±iÚ
(
func_obj
))

27107 
b
 = 
	`JS_VALUE_GET_PTR
(
bfunc
);

27109 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

27110 
p
->
u
.
func
.
funùiÚ_by‹code
 = 
b
;

27111 
b
->
h—d”
.
»f_couÁ
++;

27112 
p
->
u
.
func
.
home_objeù
 = 
NULL
;

27113 
p
->
u
.
func
.
v¬_»fs
 = 
NULL
;

27114 ià(
b
->
şosu»_v¬_couÁ
) {

27115 
v¬_»fs
 = 
	`js_m®locz
(
ùx
, (v¬_»fs[0]è* 
b
->
şosu»_v¬_couÁ
);

27116 ià(!
v¬_»fs
)

27117 
ç
;

27118 
p
->
u
.
func
.
v¬_»fs
 = var_refs;

27122 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

27123 
JSClosu»V¬
 *
cv
 = &
b
->
şosu»_v¬
[
i
];

27124 
JSV¬Ref
 *
v¬_»f
;

27125 ià(
cv
->
is_loÿl
) {

27126 
v¬_»f
 = 
	`js_ü—‹_moduË_v¬
(
ùx
, 
cv
->
is_Ëxiÿl
);

27127 ià(!
v¬_»f
)

27128 
ç
;

27129 #ifdeà
DUMP_MODULE_RESOLVE


27130 
	`´štf
("loÿÈ%d: %p\n", 
i
, 
v¬_»f
);

27132 
v¬_»fs
[
i
] = 
v¬_»f
;

27136 
m
->
func_obj
 = func_obj;

27137 
	`JS_F»eV®ue
(
ùx
, 
bfunc
);

27139 
ç
:

27140 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

27142 
	}
}

27146 
	$js_š¡ªtŸ‹_moduË
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27148 
i
;

27149 
JSImpÜtEÁry
 *
mi
;

27150 
JSModuËDef
 *
m1
;

27151 
JSV¬Ref
 **
v¬_»fs
, *
v¬_»f
;

27152 
JSObjeù
 *
p
;

27153 
BOOL
 
is_c_moduË
;

27155 ià(
m
->
š¡ªtŸ‹d
)

27157 
m
->
š¡ªtŸ‹d
 = 
TRUE
;

27159 
is_c_moduË
 = (
m
->
š™_func
 !ğ
NULL
);

27161 ià(
is_c_moduË
) {

27163 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

27164 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

27165 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
) {

27166 
v¬_»f
 = 
	`js_ü—‹_moduË_v¬
(
ùx
, 
FALSE
);

27167 ià(!
v¬_»f
)

27168 
ç
;

27169 
me
->
u
.
loÿl
.
v¬_»f
 = var_ref;

27173 ià(
	`js_ü—‹_moduË_funùiÚ
(
ùx
, 
m
) < 0)

27174 
ç
;

27177 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

27178 
JSReqModuËEÁry
 *
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

27179 ià(
	`js_š¡ªtŸ‹_moduË
(
ùx
, 
rme
->
moduË
) < 0)

27180 
ç
;

27183 #ifdeà
DUMP_MODULE_RESOLVE


27185 
buf1
[
ATOM_GET_STR_BUF_SIZE
];

27186 
	`´štf
("š¡ªtŸtšg moduË '%s':\n", 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
m
->
moduË_Çme
));

27190 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

27191 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

27192 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_INDIRECT
 &&

27193 
me
->
loÿl_Çme
 !ğ
JS_ATOM__¡¬_
) {

27194 
JSResŞveResuÉEnum
 
»t
;

27195 
JSExpÜtEÁry
 *
»s_me
;

27196 
JSModuËDef
 *
»s_m
, *
m1
;

27197 
m1
 = 
m
->
»q_moduË_’Œ›s
[
me
->
u
.
»q_moduË_idx
].
moduË
;

27198 
»t
 = 
	`js_»sŞve_expÜt
(
ùx
, &
»s_m
, &
»s_me
, 
m1
, 
me
->
loÿl_Çme
);

27199 ià(
»t
 !ğ
JS_RESOLVE_RES_FOUND
) {

27200 
	`js_»sŞve_expÜt_throw_”rÜ
(
ùx
, 
»t
, 
m
, 
me
->
expÜt_Çme
);

27201 
ç
;

27206 #ifdeà
DUMP_MODULE_RESOLVE


27208 
	`´štf
("exported bindings:\n");

27209 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

27210 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

27211 
	`´štf
("‚ame="); 
	`´št_©om
(
ùx
, 
me
->
expÜt_Çme
);

27212 
	`´štf
("†oÿl="); 
	`´št_©om
(
ùx
, 
me
->
loÿl_Çme
);

27213 
	`´štf
("y³=%d idx=%d\n", 
me
->
expÜt_ty³
, me->
u
.
loÿl
.
v¬_idx
);

27218 ià(!
is_c_moduË
) {

27219 
p
 = 
	`JS_VALUE_GET_OBJ
(
m
->
func_obj
);

27220 
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

27222 
i
 = 0; i < 
m
->
impÜt_’Œ›s_couÁ
; i++) {

27223 
mi
 = &
m
->
impÜt_’Œ›s
[
i
];

27224 #ifdeà
DUMP_MODULE_RESOLVE


27225 
	`´štf
("impÜˆv¬_idx=%d‚ame=", 
mi
->
v¬_idx
);

27226 
	`´št_©om
(
ùx
, 
mi
->
impÜt_Çme
);

27227 
	`´štf
(": ");

27229 
m1
 = 
m
->
»q_moduË_’Œ›s
[
mi
->
»q_moduË_idx
].
moduË
;

27230 ià(
mi
->
impÜt_Çme
 =ğ
JS_ATOM__¡¬_
) {

27231 
JSV®ue
 
v®
;

27233 
v®
 = 
	`js_g‘_moduË_ns
(
ùx
, 
m1
);

27234 ià(
	`JS_IsExû±iÚ
(
v®
))

27235 
ç
;

27236 
	`£t_v®ue
(
ùx
, &
v¬_»fs
[
mi
->
v¬_idx
]->
v®ue
, 
v®
);

27237 #ifdeà
DUMP_MODULE_RESOLVE


27238 
	`´štf
("namespace\n");

27241 
JSResŞveResuÉEnum
 
»t
;

27242 
JSExpÜtEÁry
 *
»s_me
;

27243 
JSModuËDef
 *
»s_m
;

27244 
JSObjeù
 *
p1
;

27246 
»t
 = 
	`js_»sŞve_expÜt
(
ùx
, &
»s_m
,

27247 &
»s_me
, 
m1
, 
mi
->
impÜt_Çme
);

27248 ià(
»t
 !ğ
JS_RESOLVE_RES_FOUND
) {

27249 
	`js_»sŞve_expÜt_throw_”rÜ
(
ùx
, 
»t
, 
m1
, 
mi
->
impÜt_Çme
);

27250 
ç
;

27252 ià(
»s_me
->
loÿl_Çme
 =ğ
JS_ATOM__¡¬_
) {

27253 
JSV®ue
 
v®
;

27254 
JSModuËDef
 *
m2
;

27256 
m2
 = 
»s_m
->
»q_moduË_’Œ›s
[
»s_me
->
u
.
»q_moduË_idx
].
moduË
;

27257 
v®
 = 
	`js_g‘_moduË_ns
(
ùx
, 
m2
);

27258 ià(
	`JS_IsExû±iÚ
(
v®
))

27259 
ç
;

27260 
v¬_»f
 = 
	`js_ü—‹_moduË_v¬
(
ùx
, 
TRUE
);

27261 ià(!
v¬_»f
) {

27262 
	`JS_F»eV®ue
(
ùx
, 
v®
);

27263 
ç
;

27265 
	`£t_v®ue
(
ùx
, &
v¬_»f
->
v®ue
, 
v®
);

27266 
v¬_»fs
[
mi
->
v¬_idx
] = 
v¬_»f
;

27267 #ifdeà
DUMP_MODULE_RESOLVE


27268 
	`´štf
("namespace from\n");

27271 
v¬_»f
 = 
»s_me
->
u
.
loÿl
.var_ref;

27272 ià(!
v¬_»f
) {

27273 
p1
 = 
	`JS_VALUE_GET_OBJ
(
»s_m
->
func_obj
);

27274 
v¬_»f
 = 
p1
->
u
.
func
.
v¬_»fs
[
»s_me
->u.
loÿl
.
v¬_idx
];

27276 
v¬_»f
->
h—d”
.
»f_couÁ
++;

27277 
v¬_»fs
[
mi
->
v¬_idx
] = 
v¬_»f
;

27278 #ifdeà
DUMP_MODULE_RESOLVE


27279 
	`´štf
("loÿÈexpÜˆ(v¬_»f=%p)\n", 
v¬_»f
);

27288 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

27289 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

27290 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
) {

27291 
v¬_»f
 = 
v¬_»fs
[
me
->
u
.
loÿl
.
v¬_idx
];

27292 
v¬_»f
->
h—d”
.
»f_couÁ
++;

27293 
me
->
u
.
loÿl
.
v¬_»f
 = var_ref;

27298 #ifdeà
DUMP_MODULE_RESOLVE


27299 
	`´štf
("done instantiate\n");

27302 
ç
:

27304 
	}
}

27307 
JSAtom
 
	$js_g‘_süt_Ü_moduË_Çme
(
JSCÚ‹xt
 *
ùx
)

27309 
JSSckF¿me
 *
sf
;

27310 
JSFunùiÚBy‹code
 *
b
;

27311 
JSObjeù
 *
p
;

27315 
sf
 = 
ùx
->
¹
->
cu¼’t_¡ack_äame
;

27316 
	`as£¹
(
sf
 !ğ
NULL
);

27317 
	`as£¹
(
	`JS_VALUE_GET_TAG
(
sf
->
cur_func
è=ğ
JS_TAG_OBJECT
);

27318 
p
 = 
	`JS_VALUE_GET_OBJ
(
sf
->
cur_func
);

27319 
	`as£¹
(
	`js_şass_has_by‹code
(
p
->
şass_id
));

27320 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

27321 ià(!
b
->
has_debug
)

27322  
JS_ATOM_NULL
;

27323  
b
->
debug
.
f’ame
;

27324 
	}
}

27326 
JSAtom
 
	$JS_G‘ModuËName
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27328  
	`JS_DupAtom
(
ùx
, 
m
->
moduË_Çme
);

27329 
	}
}

27331 
JSV®ue
 
	$JS_G‘ImpÜtM‘a
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27333 
JSV®ue
 
obj
;

27335 
obj
 = 
m
->
m‘a_obj
;

27336 ià(
	`JS_IsUndefšed
(
obj
)) {

27337 
obj
 = 
	`JS_NewObjeùPrÙo
(
ùx
, 
JS_NULL
);

27338 ià(
	`JS_IsExû±iÚ
(
obj
))

27339  
JS_EXCEPTION
;

27340 
m
->
m‘a_obj
 = 
obj
;

27342  
	`JS_DupV®ue
(
ùx
, 
obj
);

27343 
	}
}

27345 
JSV®ue
 
	$js_impÜt_m‘a
(
JSCÚ‹xt
 *
ùx
)

27347 
JSAtom
 
f’ame
;

27348 
JSModuËDef
 *
m
;

27350 
f’ame
 = 
	`js_g‘_süt_Ü_moduË_Çme
(
ùx
);

27351 ià(
f’ame
 =ğ
JS_ATOM_NULL
)

27352 
ç
;

27356 
m
 = 
	`js_fšd_lßded_moduË
(
ùx
, 
f’ame
);

27357 ià(!
m
) {

27358 
ç
:

27359 
	`JS_ThrowTy³E¼Ü
(
ùx
, "import.meta‚ot supported inhis context");

27360  
JS_EXCEPTION
;

27362  
	`JS_G‘ImpÜtM‘a
(
ùx
, 
m
);

27363 
	}
}

27365 
JSV®ue
 
	$js_dyÇmic_impÜt_job
(
JSCÚ‹xt
 *
ùx
,

27366 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

27368 
JSV®ueCÚ¡
 *
»sŞvšg_funcs
 = 
¬gv
;

27369 
JSV®ueCÚ¡
 
ba£Çme_v®
 = 
¬gv
[2];

27370 
JSV®ueCÚ¡
 
¥ecif›r
 = 
¬gv
[3];

27371 
JSModuËDef
 *
m
;

27372 
JSAtom
 
ba£Çme
 = 
JS_ATOM_NULL
, 
f’ame
;

27373 
JSV®ue
 
¥ecif›rSŒšg
, 
»t
, 
func_obj
, 
”r
, 
ns
;

27375 ià(!
	`JS_IsSŒšg
(
ba£Çme_v®
)) {

27376 
	`JS_ThrowTy³E¼Ü
(
ùx
, "no function filename for import()");

27377 
exû±iÚ
;

27379 
ba£Çme
 = 
	`JS_V®ueToAtom
(
ùx
, 
ba£Çme_v®
);

27380 ià(
ba£Çme
 =ğ
JS_ATOM_NULL
)

27381 
exû±iÚ
;

27383 
¥ecif›rSŒšg
 = 
	`JS_ToSŒšg
(
ùx
, 
¥ecif›r
);

27384 ià(
	`JS_IsExû±iÚ
(
¥ecif›rSŒšg
))

27385 
exû±iÚ
;

27386 
f’ame
 = 
	`JS_V®ueToAtom
(
ùx
, 
¥ecif›rSŒšg
);

27387 
	`JS_F»eV®ue
(
ùx
, 
¥ecif›rSŒšg
);

27388 ià(
f’ame
 =ğ
JS_ATOM_NULL
)

27389 
exû±iÚ
;

27391 
m
 = 
	`js_ho¡_»sŞve_impÜ‹d_moduË
(
ùx
, 
ba£Çme
, 
f’ame
);

27392 
	`JS_F»eAtom
(
ùx
, 
f’ame
);

27393 ià(!
m
) {

27394 
exû±iÚ
;

27397 ià(
	`js_»sŞve_moduË
(
ùx
, 
m
) < 0) {

27398 
	`js_ä“_moduËs
(
ùx
, 
JS_FREE_MODULE_NOT_RESOLVED
);

27399 
exû±iÚ
;

27403 
func_obj
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_MODULE
, 
m
));

27404 
»t
 = 
	`JS_Ev®FunùiÚ
(
ùx
, 
func_obj
);

27405 ià(
	`JS_IsExû±iÚ
(
»t
))

27406 
exû±iÚ
;

27407 
	`JS_F»eV®ue
(
ùx
, 
»t
);

27410 
ns
 = 
	`js_g‘_moduË_ns
(
ùx
, 
m
);

27411 ià(
	`JS_IsExû±iÚ
(
»t
))

27412 
exû±iÚ
;

27414 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[0], 
JS_UNDEFINED
,

27415 1, (
JSV®ueCÚ¡
 *)&
ns
);

27416 
	`JS_F»eV®ue
(
ùx
, 
»t
);

27417 
	`JS_F»eV®ue
(
ùx
, 
ns
);

27418 
	`JS_F»eAtom
(
ùx
, 
ba£Çme
);

27419  
JS_UNDEFINED
;

27420 
exû±iÚ
:

27422 
”r
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

27423 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[1], 
JS_UNDEFINED
,

27424 1, (
JSV®ueCÚ¡
 *)&
”r
);

27425 
	`JS_F»eV®ue
(
ùx
, 
»t
);

27426 
	`JS_F»eV®ue
(
ùx
, 
”r
);

27427 
	`JS_F»eAtom
(
ùx
, 
ba£Çme
);

27428  
JS_UNDEFINED
;

27429 
	}
}

27431 
JSV®ue
 
	$js_dyÇmic_impÜt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
¥ecif›r
)

27433 
JSAtom
 
ba£Çme
;

27434 
JSV®ue
 
´omi£
, 
»sŞvšg_funcs
[2], 
ba£Çme_v®
;

27435 
JSV®ueCÚ¡
 
¬gs
[4];

27437 
ba£Çme
 = 
	`js_g‘_süt_Ü_moduË_Çme
(
ùx
);

27438 ià(
ba£Çme
 =ğ
JS_ATOM_NULL
)

27439 
ba£Çme_v®
 = 
JS_NULL
;

27441 
ba£Çme_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
ba£Çme
);

27442 ià(
	`JS_IsExû±iÚ
(
ba£Çme_v®
))

27443  
ba£Çme_v®
;

27445 
´omi£
 = 
	`JS_NewPromi£C­ab™y
(
ùx
, 
»sŞvšg_funcs
);

27446 ià(
	`JS_IsExû±iÚ
(
´omi£
)) {

27447 
	`JS_F»eV®ue
(
ùx
, 
ba£Çme_v®
);

27448  
´omi£
;

27451 
¬gs
[0] = 
»sŞvšg_funcs
[0];

27452 
¬gs
[1] = 
»sŞvšg_funcs
[1];

27453 
¬gs
[2] = 
ba£Çme_v®
;

27454 
¬gs
[3] = 
¥ecif›r
;

27456 
	`JS_EnqueueJob
(
ùx
, 
js_dyÇmic_impÜt_job
, 4, 
¬gs
);

27458 
	`JS_F»eV®ue
(
ùx
, 
ba£Çme_v®
);

27459 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

27460 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

27461  
´omi£
;

27462 
	}
}

27466 
JSV®ue
 
	$js_ev®u©e_moduË
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
)

27468 
JSModuËDef
 *
m1
;

27469 
i
;

27470 
JSV®ue
 
»t_v®
;

27472 ià(
m
->
ev®_m¬k
)

27473  
JS_UNDEFINED
;

27475 ià(
m
->
ev®u©ed
) {

27478 ià(
m
->
ev®_has_exû±iÚ
) {

27479  
	`JS_Throw
(
ùx
, 
	`JS_DupV®ue
(ùx, 
m
->
ev®_exû±iÚ
));

27481  
JS_UNDEFINED
;

27485 
m
->
ev®_m¬k
 = 
TRUE
;

27487 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

27488 
JSReqModuËEÁry
 *
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

27489 
m1
 = 
rme
->
moduË
;

27490 ià(!
m1
->
ev®_m¬k
) {

27491 
»t_v®
 = 
	`js_ev®u©e_moduË
(
ùx
, 
m1
);

27492 ià(
	`JS_IsExû±iÚ
(
»t_v®
)) {

27493 
m
->
ev®_m¬k
 = 
FALSE
;

27494  
»t_v®
;

27496 
	`JS_F»eV®ue
(
ùx
, 
»t_v®
);

27500 ià(
m
->
š™_func
) {

27502 ià(
m
->
	`š™_func
(
ùx
, m) < 0)

27503 
»t_v®
 = 
JS_EXCEPTION
;

27505 
»t_v®
 = 
JS_UNDEFINED
;

27507 
»t_v®
 = 
	`JS_C®lF»e
(
ùx
, 
m
->
func_obj
, 
JS_UNDEFINED
, 0, 
NULL
);

27508 
m
->
func_obj
 = 
JS_UNDEFINED
;

27510 ià(
	`JS_IsExû±iÚ
(
»t_v®
)) {

27512 
m
->
ev®_has_exû±iÚ
 = 
TRUE
;

27513 
m
->
ev®_exû±iÚ
 = 
	`JS_DupV®ue
(
ùx
, ctx->
¹
->
cu¼’t_exû±iÚ
);

27515 
m
->
ev®_m¬k
 = 
FALSE
;

27516 
m
->
ev®u©ed
 = 
TRUE
;

27517  
»t_v®
;

27518 
	}
}

27520 
__exû±iÚ
 
JSAtom
 
	$js_·r£_äom_şau£
(
JSP¬£S‹
 *
s
)

27522 
JSAtom
 
moduË_Çme
;

27523 ià(!
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_äom
)) {

27524 
	`js_·r£_”rÜ
(
s
, "from clauseƒxpected");

27525  
JS_ATOM_NULL
;

27527 ià(
	`Ãxt_tok’
(
s
))

27528  
JS_ATOM_NULL
;

27529 ià(
s
->
tok’
.
v®
 !ğ
TOK_STRING
) {

27530 
	`js_·r£_”rÜ
(
s
, "stringƒxpected");

27531  
JS_ATOM_NULL
;

27533 
moduË_Çme
 = 
	`JS_V®ueToAtom
(
s
->
ùx
, s->
tok’
.
u
.
¡r
.str);

27534 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

27535  
JS_ATOM_NULL
;

27536 ià(
	`Ãxt_tok’
(
s
)) {

27537 
	`JS_F»eAtom
(
s
->
ùx
, 
moduË_Çme
);

27538  
JS_ATOM_NULL
;

27540  
moduË_Çme
;

27541 
	}
}

27543 
__exû±iÚ
 
	$js_·r£_expÜt
(
JSP¬£S‹
 *
s
)

27545 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

27546 
JSModuËDef
 *
m
 = 
s
->
cur_func
->
moduË
;

27547 
JSAtom
 
loÿl_Çme
, 
expÜt_Çme
;

27548 
fœ¡_expÜt
, 
idx
, 
i
, 
tok
;

27549 
JSAtom
 
moduË_Çme
;

27550 
JSExpÜtEÁry
 *
me
;

27552 ià(
	`Ãxt_tok’
(
s
))

27555 
tok
 = 
s
->
tok’
.
v®
;

27556 ià(
tok
 =ğ
TOK_CLASS
) {

27557  
	`js_·r£_şass
(
s
, 
FALSE
, 
JS_PARSE_EXPORT_NAMED
);

27558 } ià(
tok
 =ğ
TOK_FUNCTION
 ||

27559 (
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

27560 
	`³ek_tok’
(
s
, 
TRUE
è=ğ
TOK_FUNCTION
)) {

27561  
	`js_·r£_funùiÚ_deş2
(
s
, 
JS_PARSE_FUNC_STATEMENT
,

27562 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

27563 
s
->
tok’
.
±r
, s->tok’.
lše_num
,

27564 
JS_PARSE_EXPORT_NAMED
, 
NULL
);

27567 ià(
	`Ãxt_tok’
(
s
))

27570 
tok
) {

27572 
fœ¡_expÜt
 = 
m
->
expÜt_’Œ›s_couÁ
;

27573 
s
->
tok’
.
v®
 != '}') {

27574 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

27575 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

27578 
loÿl_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27579 
expÜt_Çme
 = 
JS_ATOM_NULL
;

27580 ià(
	`Ãxt_tok’
(
s
))

27581 
ç
;

27582 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_as
)) {

27583 ià(
	`Ãxt_tok’
(
s
))

27584 
ç
;

27585 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

27586 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

27587 
ç
;

27589 
expÜt_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27590 ià(
	`Ãxt_tok’
(
s
)) {

27591 
ç
:

27592 
	`JS_F»eAtom
(
ùx
, 
loÿl_Çme
);

27593 
ç1
:

27594 
	`JS_F»eAtom
(
ùx
, 
expÜt_Çme
);

27598 
expÜt_Çme
 = 
	`JS_DupAtom
(
ùx
, 
loÿl_Çme
);

27600 
me
 = 
	`add_expÜt_’Œy
(
s
, 
m
, 
loÿl_Çme
, 
expÜt_Çme
,

27601 
JS_EXPORT_TYPE_LOCAL
);

27602 
	`JS_F»eAtom
(
ùx
, 
loÿl_Çme
);

27603 
	`JS_F»eAtom
(
ùx
, 
expÜt_Çme
);

27604 ià(!
me
)

27606 ià(
s
->
tok’
.
v®
 != ',')

27608 ià(
	`Ãxt_tok’
(
s
))

27611 ià(
	`js_·r£_ex³ù
(
s
, '}'))

27613 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_äom
)) {

27614 
moduË_Çme
 = 
	`js_·r£_äom_şau£
(
s
);

27615 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

27617 
idx
 = 
	`add_»q_moduË_’Œy
(
ùx
, 
m
, 
moduË_Çme
);

27618 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

27619 ià(
idx
 < 0)

27621 
i
 = 
fœ¡_expÜt
; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

27622 
me
 = &
m
->
expÜt_’Œ›s
[
i
];

27623 
me
->
expÜt_ty³
 = 
JS_EXPORT_TYPE_INDIRECT
;

27624 
me
->
u
.
»q_moduË_idx
 = 
idx
;

27629 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_as
)) {

27631 ià(
	`Ãxt_tok’
(
s
))

27633 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

27634 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

27637 
expÜt_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27638 ià(
	`Ãxt_tok’
(
s
))

27639 
ç1
;

27640 
moduË_Çme
 = 
	`js_·r£_äom_şau£
(
s
);

27641 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

27642 
ç1
;

27643 
idx
 = 
	`add_»q_moduË_’Œy
(
ùx
, 
m
, 
moduË_Çme
);

27644 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

27645 ià(
idx
 < 0)

27646 
ç1
;

27647 
me
 = 
	`add_expÜt_’Œy
(
s
, 
m
, 
JS_ATOM__¡¬_
, 
expÜt_Çme
,

27648 
JS_EXPORT_TYPE_INDIRECT
);

27649 
	`JS_F»eAtom
(
ùx
, 
expÜt_Çme
);

27650 ià(!
me
)

27652 
me
->
u
.
»q_moduË_idx
 = 
idx
;

27654 
moduË_Çme
 = 
	`js_·r£_äom_şau£
(
s
);

27655 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

27657 
idx
 = 
	`add_»q_moduË_’Œy
(
ùx
, 
m
, 
moduË_Çme
);

27658 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

27659 ià(
idx
 < 0)

27661 ià(
	`add_¡¬_expÜt_’Œy
(
ùx
, 
m
, 
idx
) < 0)

27665 
TOK_DEFAULT
:

27666 ià(
s
->
tok’
.
v®
 =ğ
TOK_CLASS
) {

27667  
	`js_·r£_şass
(
s
, 
FALSE
, 
JS_PARSE_EXPORT_DEFAULT
);

27668 } ià(
s
->
tok’
.
v®
 =ğ
TOK_FUNCTION
 ||

27669 (
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

27670 
	`³ek_tok’
(
s
, 
TRUE
è=ğ
TOK_FUNCTION
)) {

27671  
	`js_·r£_funùiÚ_deş2
(
s
, 
JS_PARSE_FUNC_STATEMENT
,

27672 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

27673 
s
->
tok’
.
±r
, s->tok’.
lše_num
,

27674 
JS_PARSE_EXPORT_DEFAULT
, 
NULL
);

27676 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

27680 
	`£t_objeù_Çme
(
s
, 
JS_ATOM_deçuÉ
);

27684 
loÿl_Çme
 = 
JS_ATOM__deçuÉ_
;

27685 ià(
	`defše_v¬
(
s
, s->
cur_func
, 
loÿl_Çme
, 
JS_VAR_DEF_LET
) < 0)

27687 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

27688 
	`em™_©om
(
s
, 
loÿl_Çme
);

27689 
	`em™_u16
(
s
, 0);

27691 ià(!
	`add_expÜt_’Œy
(
s
, 
m
, 
loÿl_Çme
, 
JS_ATOM_deçuÉ
,

27692 
JS_EXPORT_TYPE_LOCAL
))

27695 
TOK_VAR
:

27696 
TOK_LET
:

27697 
TOK_CONST
:

27698  
	`js_·r£_v¬
(
s
, 
TRUE
, 
tok
, TRUE);

27700  
	`js_·r£_”rÜ
(
s
, "invalidƒxport syntax");

27702  
	`js_·r£_ex³ù_£mi
(
s
);

27703 
	}
}

27705 
add_şosu»_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

27706 
BOOL
 
is_loÿl
, BOOL 
is_¬g
,

27707 
v¬_idx
, 
JSAtom
 
v¬_Çme
,

27708 
BOOL
 
is_cÚ¡
, BOOL 
is_Ëxiÿl
,

27709 
JSV¬KšdEnum
 
v¬_kšd
);

27711 
	$add_impÜt
(
JSP¬£S‹
 *
s
, 
JSModuËDef
 *
m
,

27712 
JSAtom
 
loÿl_Çme
, JSAtom 
impÜt_Çme
)

27714 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

27715 
i
, 
v¬_idx
;

27716 
JSImpÜtEÁry
 *
mi
;

27717 
BOOL
 
is_loÿl
;

27719 ià(
loÿl_Çme
 =ğ
JS_ATOM_¬gum’ts
 ||†oÿl_Çm=ğ
JS_ATOM_ev®
)

27720  
	`js_·r£_”rÜ
(
s
, "invalid import binding");

27722 ià(
loÿl_Çme
 !ğ
JS_ATOM_deçuÉ
) {

27723 
i
 = 0; i < 
s
->
cur_func
->
şosu»_v¬_couÁ
; i++) {

27724 ià(
s
->
cur_func
->
şosu»_v¬
[
i
].
v¬_Çme
 =ğ
loÿl_Çme
)

27725  
	`js_·r£_”rÜ
(
s
, "duplicate import binding");

27729 
is_loÿl
 = (
impÜt_Çme
 =ğ
JS_ATOM__¡¬_
);

27730 
v¬_idx
 = 
	`add_şosu»_v¬
(
ùx
, 
s
->
cur_func
, 
is_loÿl
, 
FALSE
,

27731 
m
->
impÜt_’Œ›s_couÁ
,

27732 
loÿl_Çme
, 
TRUE
, TRUE, 
FALSE
);

27733 ià(
v¬_idx
 < 0)

27735 ià(
	`js_»size_¬¿y
(
ùx
, (**)&
m
->
impÜt_’Œ›s
,

27736 (
JSImpÜtEÁry
),

27737 &
m
->
impÜt_’Œ›s_size
, &m->
impÜt_’Œ›s_couÁ
,

27738 
m
->
impÜt_’Œ›s_couÁ
 + 1))

27740 
mi
 = &
m
->
impÜt_’Œ›s
[m->
impÜt_’Œ›s_couÁ
 - 1];

27741 
mi
->
impÜt_Çme
 = 
	`JS_DupAtom
(
ùx
, import_name);

27742 
mi
->
v¬_idx
 = var_idx;

27744 
	}
}

27746 
__exû±iÚ
 
	$js_·r£_impÜt
(
JSP¬£S‹
 *
s
)

27748 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

27749 
JSModuËDef
 *
m
 = 
s
->
cur_func
->
moduË
;

27750 
JSAtom
 
loÿl_Çme
, 
impÜt_Çme
, 
moduË_Çme
;

27751 
fœ¡_impÜt
, 
i
, 
idx
;

27753 ià(
	`Ãxt_tok’
(
s
))

27756 
fœ¡_impÜt
 = 
m
->
impÜt_’Œ›s_couÁ
;

27757 ià(
s
->
tok’
.
v®
 =ğ
TOK_STRING
) {

27758 
moduË_Çme
 = 
	`JS_V®ueToAtom
(
ùx
, 
s
->
tok’
.
u
.
¡r
.str);

27759 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

27761 ià(
	`Ãxt_tok’
(
s
)) {

27762 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

27766 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

27767 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

27768  
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

27771 
loÿl_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27772 
impÜt_Çme
 = 
JS_ATOM_deçuÉ
;

27773 ià(
	`Ãxt_tok’
(
s
))

27774 
ç
;

27775 ià(
	`add_impÜt
(
s
, 
m
, 
loÿl_Çme
, 
impÜt_Çme
))

27776 
ç
;

27777 
	`JS_F»eAtom
(
ùx
, 
loÿl_Çme
);

27779 ià(
s
->
tok’
.
v®
 != ',')

27780 
’d_impÜt_şau£
;

27781 ià(
	`Ãxt_tok’
(
s
))

27785 ià(
s
->
tok’
.
v®
 == '*') {

27787 ià(
	`Ãxt_tok’
(
s
))

27789 ià(!
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_as
))

27790  
	`js_·r£_”rÜ
(
s
, "expecting 'as'");

27791 ià(
	`Ãxt_tok’
(
s
))

27793 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

27794 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

27797 
loÿl_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27798 
impÜt_Çme
 = 
JS_ATOM__¡¬_
;

27799 ià(
	`Ãxt_tok’
(
s
))

27800 
ç
;

27801 ià(
	`add_impÜt
(
s
, 
m
, 
loÿl_Çme
, 
impÜt_Çme
))

27802 
ç
;

27803 
	`JS_F»eAtom
(
ùx
, 
loÿl_Çme
);

27804 } ià(
s
->
tok’
.
v®
 == '{') {

27805 ià(
	`Ãxt_tok’
(
s
))

27808 
s
->
tok’
.
v®
 != '}') {

27809 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

27810 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

27813 
impÜt_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27814 
loÿl_Çme
 = 
JS_ATOM_NULL
;

27815 ià(
	`Ãxt_tok’
(
s
))

27816 
ç
;

27817 ià(
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_as
)) {

27818 ià(
	`Ãxt_tok’
(
s
))

27819 
ç
;

27820 ià(!
	`tok’_is_id’t
(
s
->
tok’
.
v®
)) {

27821 
	`js_·r£_”rÜ
(
s
, "identifierƒxpected");

27822 
ç
;

27824 
loÿl_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

27825 ià(
	`Ãxt_tok’
(
s
)) {

27826 
ç
:

27827 
	`JS_F»eAtom
(
ùx
, 
loÿl_Çme
);

27828 
	`JS_F»eAtom
(
ùx
, 
impÜt_Çme
);

27832 
loÿl_Çme
 = 
	`JS_DupAtom
(
ùx
, 
impÜt_Çme
);

27834 ià(
	`add_impÜt
(
s
, 
m
, 
loÿl_Çme
, 
impÜt_Çme
))

27835 
ç
;

27836 
	`JS_F»eAtom
(
ùx
, 
loÿl_Çme
);

27837 
	`JS_F»eAtom
(
ùx
, 
impÜt_Çme
);

27838 ià(
s
->
tok’
.
v®
 != ',')

27840 ià(
	`Ãxt_tok’
(
s
))

27843 ià(
	`js_·r£_ex³ù
(
s
, '}'))

27846 
’d_impÜt_şau£
:

27847 
moduË_Çme
 = 
	`js_·r£_äom_şau£
(
s
);

27848 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

27851 
idx
 = 
	`add_»q_moduË_’Œy
(
ùx
, 
m
, 
moduË_Çme
);

27852 
	`JS_F»eAtom
(
ùx
, 
moduË_Çme
);

27853 ià(
idx
 < 0)

27855 
i
 = 
fœ¡_impÜt
; i < 
m
->
impÜt_’Œ›s_couÁ
; i++)

27856 
m
->
impÜt_’Œ›s
[
i
].
»q_moduË_idx
 = 
idx
;

27858  
	`js_·r£_ex³ù_£mi
(
s
);

27859 
	}
}

27861 
__exû±iÚ
 
	$js_·r£_sourû_–em’t
(
JSP¬£S‹
 *
s
)

27863 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

27864 
tok
;

27866 ià(
s
->
tok’
.
v®
 =ğ
TOK_FUNCTION
 ||

27867 (
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

27868 
	`³ek_tok’
(
s
, 
TRUE
è=ğ
TOK_FUNCTION
)) {

27869 ià(
	`js_·r£_funùiÚ_deş
(
s
, 
JS_PARSE_FUNC_STATEMENT
,

27870 
JS_FUNC_NORMAL
, 
JS_ATOM_NULL
,

27871 
s
->
tok’
.
±r
, s->tok’.
lše_num
))

27873 } ià(
s
->
tok’
.
v®
 =ğ
TOK_EXPORT
 && 
fd
->
moduË
) {

27874 ià(
	`js_·r£_expÜt
(
s
))

27876 } ià(
s
->
tok’
.
v®
 =ğ
TOK_IMPORT
 && 
fd
->
moduË
 &&

27877 ((
tok
 = 
	`³ek_tok’
(
s
, 
FALSE
)) != '(' &&ok != '.')) {

27880 ià(
	`js_·r£_impÜt
(
s
))

27883 ià(
	`js_·r£_¡©em’t_Ü_deş
(
s
, 
DECL_MASK_ALL
))

27887 
	}
}

27889 
JSFunùiÚDef
 *
	$js_Ãw_funùiÚ_def
(
JSCÚ‹xt
 *
ùx
,

27890 
JSFunùiÚDef
 *
·»Á
,

27891 
BOOL
 
is_ev®
,

27892 
BOOL
 
is_func_ex´
,

27893 cÚ¡ *
f’ame
, 
lše_num
)

27895 
JSFunùiÚDef
 *
fd
;

27897 
fd
 = 
	`js_m®locz
(
ùx
, (*fd));

27898 ià(!
fd
)

27899  
NULL
;

27901 
fd
->
ùx
 = ctx;

27902 
	`š™_li¡_h—d
(&
fd
->
chd_li¡
);

27905 
fd
->
·»Á
 =…arent;

27906 
fd
->
·»Á_ıoŞ_idx
 = -1;

27907 ià(
·»Á
) {

27908 
	`li¡_add_
(&
fd
->
lšk
, &
·»Á
->
chd_li¡
);

27909 
fd
->
js_mode
 = 
·»Á
->js_mode;

27910 
fd
->
·»Á_scİe_Ëv–
 = 
·»Á
->
scİe_Ëv–
;

27913 
fd
->
is_ev®
 = is_eval;

27914 
fd
->
is_func_ex´
 = is_func_expr;

27915 
	`js_dbuf_š™
(
ùx
, &
fd
->
by‹_code
);

27916 
fd
->
Ï¡_İcode_pos
 = -1;

27917 
fd
->
func_Çme
 = 
JS_ATOM_NULL
;

27918 
fd
->
v¬_objeù_idx
 = -1;

27919 
fd
->
¬gum’ts_v¬_idx
 = -1;

27920 
fd
->
func_v¬_idx
 = -1;

27921 
fd
->
ev®_»t_idx
 = -1;

27922 
fd
->
this_v¬_idx
 = -1;

27923 
fd
->
Ãw_rg‘_v¬_idx
 = -1;

27924 
fd
->
this_aùive_func_v¬_idx
 = -1;

27925 
fd
->
home_objeù_v¬_idx
 = -1;

27928 
fd
->
scİe_Ëv–
 = 0;

27929 
fd
->
scİe_fœ¡
 = -1;

27930 
fd
->
scİes
 = fd->
def_scİe_¬¿y
;

27931 
fd
->
scİe_size
 = 
	`couÁof
(fd->
def_scİe_¬¿y
);

27932 
fd
->
scİe_couÁ
 = 1;

27933 
fd
->
scİes
[0].
fœ¡
 = -1;

27934 
fd
->
scİes
[0].
·»Á
 = -1;

27936 
fd
->
f’ame
 = 
	`JS_NewAtom
(
ùx
, filename);

27937 
fd
->
lše_num
 =†ine_num;

27939 
	`js_dbuf_š™
(
ùx
, &
fd
->
pc2lše
);

27942 
fd
->
Ï¡_İcode_lše_num
 = 
lše_num
;

27944  
fd
;

27945 
	}
}

27947 
	$ä“_by‹code_©oms
(
JSRuÁime
 *
¹
,

27948 cÚ¡ 
ušt8_t
 *
bc_buf
, 
bc_Ën
,

27949 
BOOL
 
u£_shÜt_İcodes
)

27951 
pos
, 
Ën
, 
İ
;

27952 
JSAtom
 
©om
;

27953 cÚ¡ 
JSOpCode
 *
oi
;

27955 
pos
 = 0;

27956 
pos
 < 
bc_Ën
) {

27957 
İ
 = 
bc_buf
[
pos
];

27958 ià(
u£_shÜt_İcodes
)

27959 
oi
 = &
	`shÜt_İcode_šfo
(
İ
);

27961 
oi
 = &
İcode_šfo
[
İ
];

27963 
Ën
 = 
oi
->
size
;

27964 
oi
->
fmt
) {

27965 
OP_FMT_©om
:

27966 
OP_FMT_©om_u8
:

27967 
OP_FMT_©om_u16
:

27968 
OP_FMT_©om_Ïb–_u8
:

27969 
OP_FMT_©om_Ïb–_u16
:

27970 
©om
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

27971 
	`JS_F»eAtomRT
(
¹
, 
©om
);

27976 
pos
 +ğ
Ën
;

27978 
	}
}

27980 
	$js_ä“_funùiÚ_def
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
)

27982 
i
;

27983 
li¡_h—d
 *
–
, *
–1
;

27986 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
fd
->
chd_li¡
) {

27987 
JSFunùiÚDef
 *
fd1
;

27988 
fd1
 = 
	`li¡_’Œy
(
–
, 
JSFunùiÚDef
, 
lšk
);

27989 
	`js_ä“_funùiÚ_def
(
ùx
, 
fd1
);

27992 
	`ä“_by‹code_©oms
(
ùx
->
¹
, 
fd
->
by‹_code
.
buf
, fd->by‹_code.
size
,

27993 
fd
->
u£_shÜt_İcodes
);

27994 
	`dbuf_ä“
(&
fd
->
by‹_code
);

27995 
	`js_ä“
(
ùx
, 
fd
->
jump_¦Ùs
);

27996 
	`js_ä“
(
ùx
, 
fd
->
Ïb–_¦Ùs
);

27997 
	`js_ä“
(
ùx
, 
fd
->
lše_numb”_¦Ùs
);

27999 
i
 = 0; i < 
fd
->
ıoŞ_couÁ
; i++) {

28000 
	`JS_F»eV®ue
(
ùx
, 
fd
->
ıoŞ
[
i
]);

28002 
	`js_ä“
(
ùx
, 
fd
->
ıoŞ
);

28004 
	`JS_F»eAtom
(
ùx
, 
fd
->
func_Çme
);

28006 
i
 = 0; i < 
fd
->
v¬_couÁ
; i++) {

28007 
	`JS_F»eAtom
(
ùx
, 
fd
->
v¬s
[
i
].
v¬_Çme
);

28009 
	`js_ä“
(
ùx
, 
fd
->
v¬s
);

28010 
i
 = 0; i < 
fd
->
¬g_couÁ
; i++) {

28011 
	`JS_F»eAtom
(
ùx
, 
fd
->
¬gs
[
i
].
v¬_Çme
);

28013 
	`js_ä“
(
ùx
, 
fd
->
¬gs
);

28015 
i
 = 0; i < 
fd
->
hoi¡ed_def_couÁ
; i++) {

28016 
	`JS_F»eAtom
(
ùx
, 
fd
->
hoi¡ed_def
[
i
].
v¬_Çme
);

28018 
	`js_ä“
(
ùx
, 
fd
->
hoi¡ed_def
);

28020 
i
 = 0; i < 
fd
->
şosu»_v¬_couÁ
; i++) {

28021 
JSClosu»V¬
 *
cv
 = &
fd
->
şosu»_v¬
[
i
];

28022 
	`JS_F»eAtom
(
ùx
, 
cv
->
v¬_Çme
);

28024 
	`js_ä“
(
ùx
, 
fd
->
şosu»_v¬
);

28026 ià(
fd
->
scİes
 !ğfd->
def_scİe_¬¿y
)

28027 
	`js_ä“
(
ùx
, 
fd
->
scİes
);

28029 
	`JS_F»eAtom
(
ùx
, 
fd
->
f’ame
);

28030 
	`dbuf_ä“
(&
fd
->
pc2lše
);

28032 
	`js_ä“
(
ùx
, 
fd
->
sourû
);

28034 ià(
fd
->
·»Á
) {

28036 
	`li¡_d–
(&
fd
->
lšk
);

28038 
	`js_ä“
(
ùx
, 
fd
);

28039 
	}
}

28041 #ifdeà
DUMP_BYTECODE


28042 cÚ¡ *
	$sk_lšes
(cÚ¡ *
p
, 
n
) {

28043 
n
-- > 0 && *
p
) {

28044 *
p
 && *p++ != '\n')

28047  
p
;

28048 
	}
}

28050 
	$´št_lšes
(cÚ¡ *
sourû
, 
lše
, 
lše1
) {

28051 cÚ¡ *
s
 = 
sourû
;

28052 cÚ¡ *
p
 = 
	`sk_lšes
(
s
, 
lše
);

28053 ià(*
p
) {

28054 
lše
++ < 
lše1
) {

28055 
p
 = 
	`sk_lšes
(
s
 =…, 1);

28056 
	`´štf
(";; %.*s", ()(
p
 - 
s
), s);

28057 ià(!*
p
) {

28058 ià(
p
[-1] != '\n')

28059 
	`´štf
("\n");

28064 
	}
}

28066 
	$dump_by‹_code
(
JSCÚ‹xt
 *
ùx
, 
·ss
,

28067 cÚ¡ 
ušt8_t
 *
b
, 
Ën
,

28068 cÚ¡ 
JSV¬Def
 *
¬gs
, 
¬g_couÁ
,

28069 cÚ¡ 
JSV¬Def
 *
v¬s
, 
v¬_couÁ
,

28070 cÚ¡ 
JSClosu»V¬
 *
şosu»_v¬
, 
şosu»_v¬_couÁ
,

28071 cÚ¡ 
JSV®ue
 *
ıoŞ
, 
ušt32_t
 
ıoŞ_couÁ
,

28072 cÚ¡ *
sourû
, 
lše_num
,

28073 cÚ¡ 
Lab–SlÙ
 *
Ïb–_¦Ùs
, 
JSFunùiÚBy‹code
 *
b
)

28075 cÚ¡ 
JSOpCode
 *
oi
;

28076 
pos
, 
pos_Ãxt
, 
İ
, 
size
, 
idx
, 
addr
, 
lše
, 
lše1
, 
š_sourû
;

28077 
ušt8_t
 *
b™s
 = 
	`js_m®locz
(
ùx
, 
Ën
 * (*bits));

28078 
BOOL
 
u£_shÜt_İcodes
 = (
b
 !ğ
NULL
);

28081 
pos
 = 0;…o < 
Ën
;…o ğ
pos_Ãxt
) {

28082 
İ
 = 
b
[
pos
];

28083 ià(
u£_shÜt_İcodes
)

28084 
oi
 = &
	`shÜt_İcode_šfo
(
İ
);

28086 
oi
 = &
İcode_šfo
[
İ
];

28087 
pos_Ãxt
 = 
pos
 + 
oi
->
size
;

28088 ià(
İ
 < 
OP_COUNT
) {

28089 
oi
->
fmt
) {

28090 #ià
SHORT_OPCODES


28091 
OP_FMT_Ïb–8
:

28092 
pos
++;

28093 
addr
 = (
št8_t
)
b
[
pos
];

28094 
has_addr
;

28095 
OP_FMT_Ïb–16
:

28096 
pos
++;

28097 
addr
 = (
št16_t
)
	`g‘_u16
(
b
 + 
pos
);

28098 
has_addr
;

28100 
OP_FMT_©om_Ïb–_u8
:

28101 
OP_FMT_©om_Ïb–_u16
:

28102 
pos
 += 4;

28104 
OP_FMT_Ïb–
:

28105 
OP_FMT_Ïb–_u16
:

28106 
pos
++;

28107 
addr
 = 
	`g‘_u32
(
b
 + 
pos
);

28108 
has_addr
;

28109 
has_addr
:

28110 ià(
·ss
 == 1)

28111 
addr
 = 
Ïb–_¦Ùs
[addr].
pos
;

28112 ià(
·ss
 == 2)

28113 
addr
 = 
Ïb–_¦Ùs
[addr].
pos2
;

28114 ià(
·ss
 == 3)

28115 
addr
 +ğ
pos
;

28116 ià(
addr
 >ğ0 &&‡dd¸< 
Ën
)

28117 
b™s
[
addr
] |= 1;

28122 
š_sourû
 = 0;

28123 ià(
sourû
) {

28125 
	`´št_lšes
(
sourû
, 0, 1);

28126 
š_sourû
 = 1;

28128 
lše1
 = 
lše
 = 1;

28129 
pos
 = 0;

28130 
pos
 < 
Ën
) {

28131 
İ
 = 
b
[
pos
];

28132 ià(
sourû
) {

28133 ià(
b
) {

28134 
lše1
 = 
	`fšd_lše_num
(
ùx
, 
b
, 
pos
è- 
lše_num
 + 1;

28135 } ià(
İ
 =ğ
OP_lše_num
) {

28136 
lše1
 = 
	`g‘_u32
(
b
 + 
pos
 + 1è- 
lše_num
 + 1;

28138 ià(
lše1
 > 
lše
) {

28139 ià(!
š_sourû
)

28140 
	`´štf
("\n");

28141 
š_sourû
 = 1;

28142 
	`´št_lšes
(
sourû
, 
lše
, 
lše1
);

28143 
lše
 = 
lše1
;

28147 ià(
š_sourû
)

28148 
	`´štf
("\n");

28149 
š_sourû
 = 0;

28150 ià(
İ
 >ğ
OP_COUNT
) {

28151 
	`´štf
("šv®id opcod(0x%02x)\n", 
İ
);

28152 
pos
++;

28155 ià(
u£_shÜt_İcodes
)

28156 
oi
 = &
	`shÜt_İcode_šfo
(
İ
);

28158 
oi
 = &
İcode_šfo
[
İ
];

28159 
size
 = 
oi
->size;

28160 ià(
pos
 + 
size
 > 
Ën
) {

28161 
	`´štf
("Œunÿ‹d opcod(0x%02x)\n", 
İ
);

28164 #ià
	`defšed
(
DUMP_BYTECODE
) && (DUMP_BYTECODE & 16)

28166 
i
, 
x
, 
x0
;

28167 
x
 = 
x0
 = 
	`´štf
("%5d ", 
pos
);

28168 
i
 = 0; i < 
size
; i++) {

28169 ià(
i
 == 6) {

28170 
	`´štf
("\n%*s", 
x
 = 
x0
, "");

28172 
x
 +ğ
	`´štf
(" %02X", 
b
[
pos
 + 
i
]);

28174 
	`´štf
("%*s", 
x0
 + 20 - 
x
, "");

28177 ià(
b™s
[
pos
]) {

28178 
	`´štf
("%5d: ", 
pos
);

28180 
	`´štf
(" ");

28182 
	`´štf
("%s", 
oi
->
Çme
);

28183 
pos
++;

28184 
oi
->
fmt
) {

28185 
OP_FMT_nÚe_št
:

28186 
	`´štf
(" %d", 
İ
 - 
OP_push_0
);

28188 
OP_FMT_Åİx
:

28189 
	`´štf
(" %d", 
İ
 - 
OP_ÿÎ0
);

28191 
OP_FMT_u8
:

28192 
	`´štf
(" %u", 
	`g‘_u8
(
b
 + 
pos
));

28194 
OP_FMT_i8
:

28195 
	`´štf
(" %d", 
	`g‘_i8
(
b
 + 
pos
));

28197 
OP_FMT_u16
:

28198 
OP_FMT_Åİ
:

28199 
	`´štf
(" %u", 
	`g‘_u16
(
b
 + 
pos
));

28201 
OP_FMT_Åİ_u16
:

28202 
	`´štf
(" %u,%u", 
	`g‘_u16
(
b
 + 
pos
), get_u16(tab +…os + 2));

28204 
OP_FMT_i16
:

28205 
	`´štf
(" %d", 
	`g‘_i16
(
b
 + 
pos
));

28207 
OP_FMT_i32
:

28208 
	`´štf
(" %d", 
	`g‘_i32
(
b
 + 
pos
));

28210 
OP_FMT_u32
:

28211 
	`´štf
(" %u", 
	`g‘_u32
(
b
 + 
pos
));

28213 #ià
SHORT_OPCODES


28214 
OP_FMT_Ïb–8
:

28215 
addr
 = 
	`g‘_i8
(
b
 + 
pos
);

28216 
has_addr1
;

28217 
OP_FMT_Ïb–16
:

28218 
addr
 = 
	`g‘_i16
(
b
 + 
pos
);

28219 
has_addr1
;

28221 
OP_FMT_Ïb–
:

28222 
addr
 = 
	`g‘_u32
(
b
 + 
pos
);

28223 
has_addr1
;

28224 
has_addr1
:

28225 ià(
·ss
 == 1)

28226 
	`´štf
(" %u:%u", 
addr
, 
Ïb–_¦Ùs
[addr].
pos
);

28227 ià(
·ss
 == 2)

28228 
	`´štf
(" %u:%u", 
addr
, 
Ïb–_¦Ùs
[addr].
pos2
);

28229 ià(
·ss
 == 3)

28230 
	`´štf
(" %u", 
addr
 + 
pos
);

28232 
OP_FMT_Ïb–_u16
:

28233 
addr
 = 
	`g‘_u32
(
b
 + 
pos
);

28234 ià(
·ss
 == 1)

28235 
	`´štf
(" %u:%u", 
addr
, 
Ïb–_¦Ùs
[addr].
pos
);

28236 ià(
·ss
 == 2)

28237 
	`´štf
(" %u:%u", 
addr
, 
Ïb–_¦Ùs
[addr].
pos2
);

28238 ià(
·ss
 == 3)

28239 
	`´štf
(" %u", 
addr
 + 
pos
);

28240 
	`´štf
(",%u", 
	`g‘_u16
(
b
 + 
pos
 + 4));

28242 #ià
SHORT_OPCODES


28243 
OP_FMT_cÚ¡8
:

28244 
idx
 = 
	`g‘_u8
(
b
 + 
pos
);

28245 
has_poŞ_idx
;

28247 
OP_FMT_cÚ¡
:

28248 
idx
 = 
	`g‘_u32
(
b
 + 
pos
);

28249 
has_poŞ_idx
;

28250 
has_poŞ_idx
:

28251 
	`´štf
(" %u: ", 
idx
);

28252 ià(
idx
 < 
ıoŞ_couÁ
) {

28253 
	`JS_DumpV®ue
(
ùx
, 
ıoŞ
[
idx
]);

28256 
OP_FMT_©om
:

28257 
	`´štf
(" ");

28258 
	`´št_©om
(
ùx
, 
	`g‘_u32
(
b
 + 
pos
));

28260 
OP_FMT_©om_u8
:

28261 
	`´štf
(" ");

28262 
	`´št_©om
(
ùx
, 
	`g‘_u32
(
b
 + 
pos
));

28263 
	`´štf
(",%d", 
	`g‘_u8
(
b
 + 
pos
 + 4));

28265 
OP_FMT_©om_u16
:

28266 
	`´štf
(" ");

28267 
	`´št_©om
(
ùx
, 
	`g‘_u32
(
b
 + 
pos
));

28268 
	`´štf
(",%d", 
	`g‘_u16
(
b
 + 
pos
 + 4));

28270 
OP_FMT_©om_Ïb–_u8
:

28271 
OP_FMT_©om_Ïb–_u16
:

28272 
	`´štf
(" ");

28273 
	`´št_©om
(
ùx
, 
	`g‘_u32
(
b
 + 
pos
));

28274 
addr
 = 
	`g‘_u32
(
b
 + 
pos
 + 4);

28275 ià(
·ss
 == 1)

28276 
	`´štf
(",%u:%u", 
addr
, 
Ïb–_¦Ùs
[addr].
pos
);

28277 ià(
·ss
 == 2)

28278 
	`´štf
(",%u:%u", 
addr
, 
Ïb–_¦Ùs
[addr].
pos2
);

28279 ià(
·ss
 == 3)

28280 
	`´štf
(",%u", 
addr
 + 
pos
 + 4);

28281 ià(
oi
->
fmt
 =ğ
OP_FMT_©om_Ïb–_u8
)

28282 
	`´štf
(",%u", 
	`g‘_u8
(
b
 + 
pos
 + 8));

28284 
	`´štf
(",%u", 
	`g‘_u16
(
b
 + 
pos
 + 8));

28286 
OP_FMT_nÚe_loc
:

28287 
idx
 = (
İ
 - 
OP_g‘_loc0
) % 4;

28288 
has_loc
;

28289 
OP_FMT_loc8
:

28290 
idx
 = 
	`g‘_u8
(
b
 + 
pos
);

28291 
has_loc
;

28292 
OP_FMT_loc
:

28293 
idx
 = 
	`g‘_u16
(
b
 + 
pos
);

28294 
has_loc
:

28295 
	`´štf
(" %d: ", 
idx
);

28296 ià(
idx
 < 
v¬_couÁ
) {

28297 
	`´št_©om
(
ùx
, 
v¬s
[
idx
].
v¬_Çme
);

28300 
OP_FMT_nÚe_¬g
:

28301 
idx
 = (
İ
 - 
OP_g‘_¬g0
) % 4;

28302 
has_¬g
;

28303 
OP_FMT_¬g
:

28304 
idx
 = 
	`g‘_u16
(
b
 + 
pos
);

28305 
has_¬g
:

28306 
	`´štf
(" %d: ", 
idx
);

28307 ià(
idx
 < 
¬g_couÁ
) {

28308 
	`´št_©om
(
ùx
, 
¬gs
[
idx
].
v¬_Çme
);

28311 
OP_FMT_nÚe_v¬_»f
:

28312 
idx
 = (
İ
 - 
OP_g‘_v¬_»f0
) % 4;

28313 
has_v¬_»f
;

28314 
OP_FMT_v¬_»f
:

28315 
idx
 = 
	`g‘_u16
(
b
 + 
pos
);

28316 
has_v¬_»f
:

28317 
	`´štf
(" %d: ", 
idx
);

28318 ià(
idx
 < 
şosu»_v¬_couÁ
) {

28319 
	`´št_©om
(
ùx
, 
şosu»_v¬
[
idx
].
v¬_Çme
);

28325 
	`´štf
("\n");

28326 
pos
 +ğ
oi
->
size
 - 1;

28328 ià(
sourû
) {

28329 ià(!
š_sourû
)

28330 
	`´štf
("\n");

28331 
	`´št_lšes
(
sourû
, 
lše
, 
INT32_MAX
);

28333 
	`js_ä“
(
ùx
, 
b™s
);

28334 
	}
}

28336 
__maybe_unu£d
 
	$dump_pc2lše
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt8_t
 *
buf
, 
Ën
,

28337 
lše_num
)

28339 cÚ¡ 
ušt8_t
 *
p_’d
, *
p_Ãxt
, *
p
;

28340 
pc
, 
v
;

28341 
İ
;

28343 ià(
Ën
 <= 0)

28346 
	`´štf
("%5s %5s\n", "PC", "LINE");

28348 
p
 = 
buf
;

28349 
p_’d
 = 
buf
 + 
Ën
;

28350 
pc
 = 0;

28351 
p
 < 
p_’d
) {

28352 
İ
 = *
p
++;

28353 ià(
İ
 == 0) {

28354 
v
 = 
	`unicode_äom_utf8
(
p
, 
p_’d
 -…, &
p_Ãxt
);

28355 ià(
v
 < 0)

28356 
ç
;

28357 
pc
 +ğ
v
;

28358 
p
 = 
p_Ãxt
;

28359 
v
 = 
	`unicode_äom_utf8
(
p
, 
p_’d
 -…, &
p_Ãxt
);

28360 ià(
v
 < 0) {

28361 
ç
:

28362 
	`´štf
("šv®id…c2lš’codpos=%d\n", ()(
p
 - 
buf
));

28365 ià(!(
v
 & 1)) {

28366 
v
 = v >> 1;

28368 
v
 = -(v >> 1) - 1;

28370 
lše_num
 +ğ
v
;

28371 
p
 = 
p_Ãxt
;

28373 
İ
 -ğ
PC2LINE_OP_FIRST
;

28374 
pc
 +ğ(
İ
 / 
PC2LINE_RANGE
);

28375 
lše_num
 +ğ(
İ
 % 
PC2LINE_RANGE
è+ 
PC2LINE_BASE
;

28377 
	`´štf
("%5d %5d\n", 
pc
, 
lše_num
);

28379 
	}
}

28381 
__maybe_unu£d
 
	$js_dump_funùiÚ_by‹code
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚBy‹code
 *
b
)

28383 
i
;

28384 
©om_buf
[
ATOM_GET_STR_BUF_SIZE
];

28385 cÚ¡ *
¡r
;

28387 ià(
b
->
has_debug
 && b->
debug
.
f’ame
 !ğ
JS_ATOM_NULL
) {

28388 
¡r
 = 
	`JS_AtomG‘SŒ
(
ùx
, 
©om_buf
, ×tom_buf), 
b
->
debug
.
f’ame
);

28389 
	`´štf
("%s:%d: ", 
¡r
, 
b
->
debug
.
lše_num
);

28392 
¡r
 = 
	`JS_AtomG‘SŒ
(
ùx
, 
©om_buf
, ×tom_buf), 
b
->
func_Çme
);

28393 
	`´štf
("funùiÚ: %s%s\n", &"*"[
b
->
func_kšd
 !ğ
JS_FUNC_GENERATOR
], 
¡r
);

28394 ià(
b
->
js_mode
) {

28395 
	`´štf
(" mode:");

28396 ià(
b
->
js_mode
 & 
JS_MODE_STRICT
)

28397 
	`´štf
(" strict");

28398 #ifdeà
CONFIG_BIGNUM


28399 ià(
b
->
js_mode
 & 
JS_MODE_MATH
)

28400 
	`´štf
(" math");

28402 
	`´štf
("\n");

28404 ià(
b
->
¬g_couÁ
 && b->
v¬defs
) {

28405 
	`´štf
("‡rgs:");

28406 
i
 = 0; i < 
b
->
¬g_couÁ
; i++) {

28407 
	`´štf
(" %s", 
	`JS_AtomG‘SŒ
(
ùx
, 
©om_buf
, (atom_buf),

28408 
b
->
v¬defs
[
i
].
v¬_Çme
));

28410 
	`´štf
("\n");

28412 ià(
b
->
v¬_couÁ
 && b->
v¬defs
) {

28413 
	`´štf
("†ocals:\n");

28414 
i
 = 0; i < 
b
->
v¬_couÁ
; i++) {

28415 
JSV¬Def
 *
vd
 = &
b
->
v¬defs
[b->
¬g_couÁ
 + 
i
];

28416 
	`´štf
("%5d: % %s", 
i
,

28417 
vd
->
v¬_kšd
 =ğ
JS_VAR_CATCH
 ? "catch" :

28418 (
vd
->
v¬_kšd
 =ğ
JS_VAR_FUNCTION_DECL
 ||

28419 
vd
->
v¬_kšd
 =ğ
JS_VAR_NEW_FUNCTION_DECL
) ? "function" :

28420 
vd
->
is_cÚ¡
 ? "const" :

28421 
vd
->
is_Ëxiÿl
 ? "let" : "var",

28422 
	`JS_AtomG‘SŒ
(
ùx
, 
©om_buf
, ×tom_buf), 
vd
->
v¬_Çme
));

28423 ià(
vd
->
scİe_Ëv–
)

28424 
	`´štf
(" [Ëv–:%d‚ext:%d]", 
vd
->
scİe_Ëv–
, vd->
scİe_Ãxt
);

28425 
	`´štf
("\n");

28428 ià(
b
->
şosu»_v¬_couÁ
) {

28429 
	`´štf
(" closure vars:\n");

28430 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

28431 
JSClosu»V¬
 *
cv
 = &
b
->
şosu»_v¬
[
i
];

28432 
	`´štf
("%5d: % %s:%s%d %s\n", 
i
,

28433 
	`JS_AtomG‘SŒ
(
ùx
, 
©om_buf
, ×tom_buf), 
cv
->
v¬_Çme
),

28434 
cv
->
is_loÿl
 ? "local" : "parent",

28435 
cv
->
is_¬g
 ? "¬g" : "loc", cv->
v¬_idx
,

28436 
cv
->
is_cÚ¡
 ? "const" :

28437 
cv
->
is_Ëxiÿl
 ? "let" : "var");

28440 
	`´štf
(" sck_size: %d\n", 
b
->
¡ack_size
);

28441 
	`´štf
(" opcodes:\n");

28442 
	`dump_by‹_code
(
ùx
, 3, 
b
->
by‹_code_buf
, b->
by‹_code_Ën
,

28443 
b
->
v¬defs
, b->
¬g_couÁ
,

28444 
b
->
v¬defs
 ? b->v¬def + b->
¬g_couÁ
 : 
NULL
, b->
v¬_couÁ
,

28445 
b
->
şosu»_v¬
, b->
şosu»_v¬_couÁ
,

28446 
b
->
ıoŞ
, b->
ıoŞ_couÁ
,

28447 
b
->
has_debug
 ? b->
debug
.
sourû
 : 
NULL
,

28448 
b
->
has_debug
 ? b->
debug
.
lše_num
 : -1, 
NULL
, b);

28449 #ià
	`defšed
(
DUMP_BYTECODE
) && (DUMP_BYTECODE & 32)

28450 ià(
b
->
has_debug
)

28451 
	`dump_pc2lše
(
ùx
, 
b
->
debug
.
pc2lše_buf
, b->debug.
pc2lše_Ën
, b->debug.
lše_num
);

28453 
	`´štf
("\n");

28454 
	}
}

28457 
	$add_şosu»_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28458 
BOOL
 
is_loÿl
, BOOL 
is_¬g
,

28459 
v¬_idx
, 
JSAtom
 
v¬_Çme
,

28460 
BOOL
 
is_cÚ¡
, BOOL 
is_Ëxiÿl
,

28461 
JSV¬KšdEnum
 
v¬_kšd
)

28463 
JSClosu»V¬
 *
cv
;

28466 ià(
s
->
şosu»_v¬_couÁ
 >ğ
JS_MAX_LOCAL_VARS
) {

28467 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "too many closure variables");

28471 ià(
s
->
şosu»_v¬_couÁ
 >ğs->
şosu»_v¬_size
) {

28472 
JSClosu»V¬
 *
Ãw_b
;

28473 
Ãw_size
;

28474 
size_t
 
¦ack
;

28475 
Ãw_size
 = 
	`max_št
(
s
->
şosu»_v¬_couÁ
 + 1,

28476 
s
->
şosu»_v¬_size
 * 3 / 2);

28477 
Ãw_b
 = 
	`js_»®loc2
(
ùx
, 
s
->
şosu»_v¬
,

28478 
Ãw_size
 * (
JSClosu»V¬
), &
¦ack
);

28479 ià(!
Ãw_b
)

28481 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_b
);

28482 
s
->
şosu»_v¬
 = 
Ãw_b
;

28483 
s
->
şosu»_v¬_size
 = 
Ãw_size
;

28485 
cv
 = &
s
->
şosu»_v¬
[s->
şosu»_v¬_couÁ
++];

28486 
cv
->
is_loÿl
 = is_local;

28487 
cv
->
is_¬g
 = is_arg;

28488 
cv
->
is_cÚ¡
 = is_const;

28489 
cv
->
is_Ëxiÿl
 = is_lexical;

28490 
cv
->
v¬_kšd
 = var_kind;

28491 
cv
->
v¬_idx
 = var_idx;

28492 
cv
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, var_name);

28493  
s
->
şosu»_v¬_couÁ
 - 1;

28494 
	}
}

28496 
	$fšd_şosu»_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28497 
JSAtom
 
v¬_Çme
)

28499 
i
;

28500 
i
 = 0; i < 
s
->
şosu»_v¬_couÁ
; i++) {

28501 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[
i
];

28502 ià(
cv
->
v¬_Çme
 == var_name)

28503  
i
;

28506 
	}
}

28511 
	$g‘_şosu»_v¬2
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28512 
JSFunùiÚDef
 *
fd
, 
BOOL
 
is_loÿl
,

28513 
BOOL
 
is_¬g
, 
v¬_idx
, 
JSAtom
 
v¬_Çme
,

28514 
BOOL
 
is_cÚ¡
, BOOL 
is_Ëxiÿl
,

28515 
JSV¬KšdEnum
 
v¬_kšd
)

28517 
i
;

28519 ià(
fd
 !ğ
s
->
·»Á
) {

28520 
v¬_idx
 = 
	`g‘_şosu»_v¬2
(
ùx
, 
s
->
·»Á
, 
fd
, 
is_loÿl
,

28521 
is_¬g
, 
v¬_idx
, 
v¬_Çme
,

28522 
is_cÚ¡
, 
is_Ëxiÿl
, 
v¬_kšd
);

28523 ià(
v¬_idx
 < 0)

28525 
is_loÿl
 = 
FALSE
;

28527 
i
 = 0; i < 
s
->
şosu»_v¬_couÁ
; i++) {

28528 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[
i
];

28529 ià(
cv
->
v¬_idx
 =ğv¬_idx && cv->
is_¬g
 == is_arg &&

28530 
cv
->
is_loÿl
 == is_local)

28531  
i
;

28533  
	`add_şosu»_v¬
(
ùx
, 
s
, 
is_loÿl
, 
is_¬g
, 
v¬_idx
, 
v¬_Çme
,

28534 
is_cÚ¡
, 
is_Ëxiÿl
, 
v¬_kšd
);

28535 
	}
}

28537 
	$g‘_şosu»_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28538 
JSFunùiÚDef
 *
fd
, 
BOOL
 
is_¬g
,

28539 
v¬_idx
, 
JSAtom
 
v¬_Çme
,

28540 
BOOL
 
is_cÚ¡
, BOOL 
is_Ëxiÿl
,

28541 
JSV¬KšdEnum
 
v¬_kšd
)

28543  
	`g‘_şosu»_v¬2
(
ùx
, 
s
, 
fd
, 
TRUE
, 
is_¬g
,

28544 
v¬_idx
, 
v¬_Çme
, 
is_cÚ¡
, 
is_Ëxiÿl
,

28545 
v¬_kšd
);

28546 
	}
}

28548 
	$g‘_w™h_scİe_İcode
(
İ
)

28550 ià(
İ
 =ğ
OP_scİe_g‘_v¬_undef
)

28551  
OP_w™h_g‘_v¬
;

28553  
OP_w™h_g‘_v¬
 + (
İ
 - 
OP_scİe_g‘_v¬
);

28554 
	}
}

28556 
BOOL
 
	$ÿn_İt_put_»f_v®ue
(cÚ¡ 
ušt8_t
 *
bc_buf
, 
pos
)

28558 
İcode
 = 
bc_buf
[
pos
];

28559  (
bc_buf
[
pos
 + 1] =ğ
OP_put_»f_v®ue
 &&

28560 (
İcode
 =ğ
OP_š£¹3
 ||

28561 
İcode
 =ğ
OP_³rm4
 ||

28563 
İcode
 =ğ
OP_rÙ3l
));

28564 
	}
}

28566 
BOOL
 
	$ÿn_İt_put_glob®_»f_v®ue
(cÚ¡ 
ušt8_t
 *
bc_buf
, 
pos
)

28568 
İcode
 = 
bc_buf
[
pos
];

28569  (
bc_buf
[
pos
 + 1] =ğ
OP_put_»f_v®ue
 &&

28570 (
İcode
 =ğ
OP_š£¹3
 ||

28571 
İcode
 =ğ
OP_³rm4
 ||

28573 
İcode
 =ğ
OP_rÙ3l
));

28574 
	}
}

28576 
	$İtimize_scİe_make_»f
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28577 
DynBuf
 *
bc
, 
ušt8_t
 *
bc_buf
,

28578 
Lab–SlÙ
 *
ls
, 
pos_Ãxt
,

28579 
g‘_İ
, 
v¬_idx
)

28581 
Ïb–_pos
, 
’d_pos
, 
pos
;

28591 ià(
bc_buf
[
pos_Ãxt
] =ğ
OP_g‘_»f_v®ue
) {

28592 
	`dbuf_putc
(
bc
, 
g‘_İ
);

28593 
	`dbuf_put_u16
(
bc
, 
v¬_idx
);

28594 
pos_Ãxt
++;

28599 
Ïb–_pos
 = 
ls
->
pos
;

28600 
pos
 = 
Ïb–_pos
 - 5;

28601 
	`as£¹
(
bc_buf
[
pos
] =ğ
OP_Ïb–
);

28608 
’d_pos
 = 
Ïb–_pos
 + 2;

28609 ià(
bc_buf
[
Ïb–_pos
] =ğ
OP_š£¹3
)

28610 
bc_buf
[
pos
++] = 
OP_dup
;

28611 
bc_buf
[
pos
] = 
g‘_İ
 + 1;

28612 
	`put_u16
(
bc_buf
 + 
pos
 + 1, 
v¬_idx
);

28613 
pos
 += 3;

28615 
pos
 < 
’d_pos
)

28616 
bc_buf
[
pos
++] = 
OP_nİ
;

28617  
pos_Ãxt
;

28618 
	}
}

28620 
	$İtimize_scİe_make_glob®_»f
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28621 
DynBuf
 *
bc
, 
ušt8_t
 *
bc_buf
,

28622 
Lab–SlÙ
 *
ls
, 
pos_Ãxt
,

28623 
JSAtom
 
v¬_Çme
)

28625 
Ïb–_pos
, 
’d_pos
, 
pos
, 
İ
;

28626 
BOOL
 
is_¡riù
;

28627 
is_¡riù
 = ((
s
->
js_mode
 & 
JS_MODE_STRICT
) != 0);

28631 ià(
is_¡riù
) {

28635 
	`dbuf_putc
(
bc
, 
OP_check_v¬
);

28636 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28640 ià(
bc_buf
[
pos_Ãxt
] =ğ
OP_g‘_»f_v®ue
) {

28641 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬
);

28642 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28643 
pos_Ãxt
++;

28648 
Ïb–_pos
 = 
ls
->
pos
;

28649 
pos
 = 
Ïb–_pos
 - 5;

28650 
	`as£¹
(
bc_buf
[
pos
] =ğ
OP_Ïb–
);

28651 
’d_pos
 = 
Ïb–_pos
 + 2;

28652 
İ
 = 
bc_buf
[
Ïb–_pos
];

28653 ià(
is_¡riù
) {

28654 
İ
) {

28655 
OP_š£¹3
:

28656 
İ
 = 
OP_š£¹2
;

28658 
OP_³rm4
:

28659 
İ
 = 
OP_³rm3
;

28661 
OP_rÙ3l
:

28662 
İ
 = 
OP_sw­
;

28665 
	`abÜt
();

28667 
bc_buf
[
pos
++] = 
İ
;

28669 ià(
İ
 =ğ
OP_š£¹3
)

28670 
bc_buf
[
pos
++] = 
OP_dup
;

28672 ià(
is_¡riù
) {

28673 
bc_buf
[
pos
] = 
OP_put_v¬_¡riù
;

28676 
bc_buf
[
pos
] = 
OP_put_v¬
;

28679 
	`put_u32
(
bc_buf
 + 
pos
 + 1, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28680 
pos
 += 5;

28682 
pos
 < 
’d_pos
)

28683 
bc_buf
[
pos
++] = 
OP_nİ
;

28684  
pos_Ãxt
;

28685 
	}
}

28687 
	$add_v¬_this
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
)

28689 
idx
;

28690 
idx
 = 
	`add_v¬
(
ùx
, 
fd
, 
JS_ATOM_this
);

28691 ià(
idx
 >ğ0 && 
fd
->
is_d”ived_şass_cÚ¡ruùÜ
) {

28692 
JSV¬Def
 *
vd
 = &
fd
->
v¬s
[
idx
];

28694 
vd
->
is_Ëxiÿl
 = 1;

28697  
idx
;

28698 
	}
}

28700 
	$»sŞve_p£udo_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28701 
JSAtom
 
v¬_Çme
)

28703 
v¬_idx
;

28705 ià(!
s
->
has_this_bšdšg
)

28707 
v¬_Çme
) {

28708 
JS_ATOM_home_objeù
:

28710 
v¬_idx
 = 
s
->
home_objeù_v¬_idx
 = 
	`add_v¬
(
ùx
, s, 
v¬_Çme
);

28712 
JS_ATOM_this_aùive_func
:

28714 
v¬_idx
 = 
s
->
this_aùive_func_v¬_idx
 = 
	`add_v¬
(
ùx
, s, 
v¬_Çme
);

28716 
JS_ATOM_Ãw_rg‘
:

28718 
v¬_idx
 = 
s
->
Ãw_rg‘_v¬_idx
 = 
	`add_v¬
(
ùx
, s, 
v¬_Çme
);

28720 
JS_ATOM_this
:

28722 
v¬_idx
 = 
s
->
this_v¬_idx
 = 
	`add_v¬_this
(
ùx
, s);

28725 
v¬_idx
 = -1;

28728  
v¬_idx
;

28729 
	}
}

28732 
	$»sŞve_scİe_v¬
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

28733 
JSAtom
 
v¬_Çme
, 
scİe_Ëv–
, 
İ
,

28734 
DynBuf
 *
bc
, 
ušt8_t
 *
bc_buf
,

28735 
Lab–SlÙ
 *
ls
, 
pos_Ãxt
, 
¬g_v®id
)

28737 
idx
, 
v¬_idx
, 
is_put
;

28738 
Ïb–_dÚe
;

28739 
BOOL
 
is_func_v¬
 = 
FALSE
;

28740 
JSFunùiÚDef
 *
fd
;

28741 
JSV¬Def
 *
vd
;

28742 
BOOL
 
is_p£udo_v¬
;

28744 
Ïb–_dÚe
 = -1;

28748 
is_p£udo_v¬
 = (
v¬_Çme
 =ğ
JS_ATOM_home_objeù
 ||

28749 
v¬_Çme
 =ğ
JS_ATOM_this_aùive_func
 ||

28750 
v¬_Çme
 =ğ
JS_ATOM_Ãw_rg‘
 ||

28751 
v¬_Çme
 =ğ
JS_ATOM_this
);

28754 
v¬_idx
 = -1;

28755 
idx
 = 
s
->
scİes
[
scİe_Ëv–
].
fœ¡
; idx >= 0;) {

28756 
vd
 = &
s
->
v¬s
[
idx
];

28757 ià(
vd
->
v¬_Çme
 == var_name) {

28758 ià(
İ
 =ğ
OP_scİe_put_v¬
 || o°=ğ
OP_scİe_make_»f
) {

28759 ià(
vd
->
is_cÚ¡
) {

28760 
	`dbuf_putc
(
bc
, 
OP_throw_v¬
);

28761 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28762 
	`dbuf_putc
(
bc
, 
JS_THROW_VAR_RO
);

28763 
dÚe
;

28765 
is_func_v¬
 = 
vd
->is_func_var;

28767 
v¬_idx
 = 
idx
;

28770 ià(
vd
->
v¬_Çme
 =ğ
JS_ATOM__w™h_
 && !
is_p£udo_v¬
) {

28771 
	`dbuf_putc
(
bc
, 
OP_g‘_loc
);

28772 
	`dbuf_put_u16
(
bc
, 
idx
);

28773 
	`dbuf_putc
(
bc
, 
	`g‘_w™h_scİe_İcode
(
İ
));

28774 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28775 
Ïb–_dÚe
 = 
	`Ãw_Ïb–_fd
(
s
,†abel_done);

28776 
	`dbuf_put_u32
(
bc
, 
Ïb–_dÚe
);

28777 
	`dbuf_putc
(
bc
, 1);

28778 
	`upd©e_Ïb–
(
s
, 
Ïb–_dÚe
, 1);

28779 
s
->
jump_size
++;

28781 
idx
 = 
vd
->
scİe_Ãxt
;

28783 ià(
v¬_idx
 < 0) {

28788 
v¬_idx
 = 
	`fšd_v¬
(
ùx
, 
s
, 
v¬_Çme
);

28789 ià(
v¬_idx
 >= 0) {

28790 ià(
scİe_Ëv–
 == 0

28791 && (
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
)

28792 && (
v¬_idx
 - 
ARGUMENT_VAR_OFFSET
è>ğ
¬g_v®id
) {

28794 
	`dbuf_putc
(
bc
, 
OP_throw_v¬
);

28795 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28796 
	`dbuf_putc
(
bc
, 
JS_THROW_VAR_UNINITIALIZED
);

28798 ià(!(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
))

28799 
is_func_v¬
 = 
s
->
v¬s
[
v¬_idx
].is_func_var;

28802 ià(
v¬_idx
 < 0 && 
is_p£udo_v¬
)

28803 
v¬_idx
 = 
	`»sŞve_p£udo_v¬
(
ùx
, 
s
, 
v¬_Çme
);

28805 ià(
v¬_idx
 < 0 && 
v¬_Çme
 =ğ
JS_ATOM_¬gum’ts
 &&

28806 
s
->
has_¬gum’ts_bšdšg
) {

28808 
v¬_idx
 = 
	`add_¬gum’ts_v¬
(
ùx
, 
s
, 
v¬_Çme
);

28810 ià(
v¬_idx
 < 0 && 
s
->
is_func_ex´
 && 
v¬_Çme
 =ğs->
func_Çme
) {

28812 
v¬_idx
 = 
	`add_func_v¬
(
ùx
, 
s
, 
v¬_Çme
);

28813 
is_func_v¬
 = 
TRUE
;

28816 ià(
v¬_idx
 >= 0) {

28820 
İ
) {

28821 
OP_scİe_make_»f
:

28822 ià(
is_func_v¬
) {

28824 
	`dbuf_putc
(
bc
, 
OP_objeù
);

28825 
	`dbuf_putc
(
bc
, 
OP_g‘_loc
);

28826 
	`dbuf_put_u16
(
bc
, 
v¬_idx
);

28827 
	`dbuf_putc
(
bc
, 
OP_defše_f›ld
);

28828 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28829 
	`dbuf_putc
(
bc
, 
OP_push_©om_v®ue
);

28830 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28832 ià(
Ïb–_dÚe
 =ğ-1 && 
	`ÿn_İt_put_»f_v®ue
(
bc_buf
, 
ls
->
pos
)) {

28833 
g‘_İ
;

28834 ià(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
) {

28835 
g‘_İ
 = 
OP_g‘_¬g
;

28836 
v¬_idx
 -ğ
ARGUMENT_VAR_OFFSET
;

28838 ià(
s
->
v¬s
[
v¬_idx
].
is_Ëxiÿl
)

28839 
g‘_İ
 = 
OP_g‘_loc_check
;

28841 
g‘_İ
 = 
OP_g‘_loc
;

28843 
pos_Ãxt
 = 
	`İtimize_scİe_make_»f
(
ùx
, 
s
, 
bc
, 
bc_buf
, 
ls
,

28844 
pos_Ãxt
, 
g‘_İ
, 
v¬_idx
);

28848 ià(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
) {

28849 
	`dbuf_putc
(
bc
, 
OP_make_¬g_»f
);

28850 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28851 
	`dbuf_put_u16
(
bc
, 
v¬_idx
 - 
ARGUMENT_VAR_OFFSET
);

28853 
	`dbuf_putc
(
bc
, 
OP_make_loc_»f
);

28854 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28855 
	`dbuf_put_u16
(
bc
, 
v¬_idx
);

28859 
OP_scİe_g‘_»f
:

28860 
	`dbuf_putc
(
bc
, 
OP_undefšed
);

28862 
OP_scİe_g‘_v¬_undef
:

28863 
OP_scİe_g‘_v¬
:

28864 
OP_scİe_put_v¬
:

28865 
OP_scİe_put_v¬_š™
:

28866 
is_put
 = (
İ
 =ğ
OP_scİe_put_v¬
 || o°=ğ
OP_scİe_put_v¬_š™
);

28867 ià(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
) {

28868 
	`dbuf_putc
(
bc
, 
OP_g‘_¬g
 + 
is_put
);

28869 
	`dbuf_put_u16
(
bc
, 
v¬_idx
 - 
ARGUMENT_VAR_OFFSET
);

28872 ià(
is_put
) {

28873 ià(
s
->
v¬s
[
v¬_idx
].
is_Ëxiÿl
) {

28874 ià(
İ
 =ğ
OP_scİe_put_v¬_š™
) {

28876 ià(
v¬_Çme
 =ğ
JS_ATOM_this
)

28877 
	`dbuf_putc
(
bc
, 
OP_put_loc_check_š™
);

28879 
	`dbuf_putc
(
bc
, 
OP_put_loc
);

28881 
	`dbuf_putc
(
bc
, 
OP_put_loc_check
);

28884 
	`dbuf_putc
(
bc
, 
OP_put_loc
);

28887 ià(
s
->
v¬s
[
v¬_idx
].
is_Ëxiÿl
) {

28888 
	`dbuf_putc
(
bc
, 
OP_g‘_loc_check
);

28890 
	`dbuf_putc
(
bc
, 
OP_g‘_loc
);

28893 
	`dbuf_put_u16
(
bc
, 
v¬_idx
);

28896 
OP_scİe_d–‘e_v¬
:

28897 
	`dbuf_putc
(
bc
, 
OP_push_çl£
);

28900 
dÚe
;

28903 ià(
s
->
v¬_objeù_idx
 >ğ0 && !
is_p£udo_v¬
) {

28904 
	`dbuf_putc
(
bc
, 
OP_g‘_loc
);

28905 
	`dbuf_put_u16
(
bc
, 
s
->
v¬_objeù_idx
);

28906 
	`dbuf_putc
(
bc
, 
	`g‘_w™h_scİe_İcode
(
İ
));

28907 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28908 
Ïb–_dÚe
 = 
	`Ãw_Ïb–_fd
(
s
,†abel_done);

28909 
	`dbuf_put_u32
(
bc
, 
Ïb–_dÚe
);

28910 
	`dbuf_putc
(
bc
, 0);

28911 
	`upd©e_Ïb–
(
s
, 
Ïb–_dÚe
, 1);

28912 
s
->
jump_size
++;

28915 
fd
 = 
s
; fd->
·»Á
;) {

28916 
scİe_Ëv–
 = 
fd
->
·»Á_scİe_Ëv–
;

28917 
fd
 = fd->
·»Á
;

28918 ià(
scİe_Ëv–
 == 0) {

28924 
v¬_idx
 = 
	`fšd_¬g
(
ùx
, 
fd
, 
v¬_Çme
);

28925 
check_idx
;

28927 
idx
 = 
fd
->
scİes
[
scİe_Ëv–
].
fœ¡
; idx >= 0;) {

28928 
vd
 = &
fd
->
v¬s
[
idx
];

28929 ià(
vd
->
v¬_Çme
 == var_name) {

28930 ià(
İ
 =ğ
OP_scİe_put_v¬
 || o°=ğ
OP_scİe_make_»f
) {

28931 ià(
vd
->
is_cÚ¡
) {

28932 
	`dbuf_putc
(
bc
, 
OP_throw_v¬
);

28933 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28934 
	`dbuf_putc
(
bc
, 
JS_THROW_VAR_RO
);

28935 
dÚe
;

28937 
is_func_v¬
 = 
vd
->is_func_var;

28939 
v¬_idx
 = 
idx
;

28941 } ià(
vd
->
v¬_Çme
 =ğ
JS_ATOM__w™h_
 && !
is_p£udo_v¬
) {

28942 
vd
->
is_ÿ±u»d
 = 1;

28943 
idx
 = 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
, 
FALSE
, idx, 
vd
->
v¬_Çme
, FALSE, FALSE, 
JS_VAR_NORMAL
);

28944 ià(
idx
 >= 0) {

28945 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

28946 
	`dbuf_put_u16
(
bc
, 
idx
);

28947 
	`dbuf_putc
(
bc
, 
	`g‘_w™h_scİe_İcode
(
İ
));

28948 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28949 
Ïb–_dÚe
 = 
	`Ãw_Ïb–_fd
(
s
,†abel_done);

28950 
	`dbuf_put_u32
(
bc
, 
Ïb–_dÚe
);

28951 
	`dbuf_putc
(
bc
, 1);

28952 
	`upd©e_Ïb–
(
s
, 
Ïb–_dÚe
, 1);

28953 
s
->
jump_size
++;

28956 
idx
 = 
vd
->
scİe_Ãxt
;

28958 ià(
v¬_idx
 >= 0)

28961 
v¬_idx
 = 
	`fšd_v¬
(
ùx
, 
fd
, 
v¬_Çme
);

28962 
check_idx
:

28963 ià(
v¬_idx
 >= 0) {

28964 ià(!(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
))

28965 
is_func_v¬
 = 
fd
->
v¬s
[
v¬_idx
].is_func_var;

28968 ià(
is_p£udo_v¬
) {

28969 
v¬_idx
 = 
	`»sŞve_p£udo_v¬
(
ùx
, 
fd
, 
v¬_Çme
);

28970 ià(
v¬_idx
 >= 0)

28973 ià(
v¬_Çme
 =ğ
JS_ATOM_¬gum’ts
 && 
fd
->
has_¬gum’ts_bšdšg
) {

28974 
v¬_idx
 = 
	`add_¬gum’ts_v¬
(
ùx
, 
fd
, 
v¬_Çme
);

28977 ià(
fd
->
is_func_ex´
 && fd->
func_Çme
 =ğ
v¬_Çme
) {

28979 
v¬_idx
 = 
	`add_func_v¬
(
ùx
, 
fd
, 
v¬_Çme
);

28980 
is_func_v¬
 = 
TRUE
;

28985 ià(
fd
->
v¬_objeù_idx
 >ğ0 && !
is_p£udo_v¬
) {

28986 
fd
->
v¬s
[fd->
v¬_objeù_idx
].
is_ÿ±u»d
 = 1;

28987 
idx
 = 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
, 
FALSE
,

28988 
fd
->
v¬_objeù_idx
, 
JS_ATOM__v¬_
,

28989 
FALSE
, FALSE, 
JS_VAR_NORMAL
);

28990 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

28991 
	`dbuf_put_u16
(
bc
, 
idx
);

28992 
	`dbuf_putc
(
bc
, 
	`g‘_w™h_scİe_İcode
(
İ
));

28993 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

28994 
Ïb–_dÚe
 = 
	`Ãw_Ïb–_fd
(
s
,†abel_done);

28995 
	`dbuf_put_u32
(
bc
, 
Ïb–_dÚe
);

28996 
	`dbuf_putc
(
bc
, 0);

28997 
	`upd©e_Ïb–
(
s
, 
Ïb–_dÚe
, 1);

28998 
s
->
jump_size
++;

29001 ià(
fd
->
is_ev®
)

29007 ià(!
fd
)

29008 
fd
 = 
s
;

29009 ià(
v¬_idx
 < 0 && 
fd
->
is_ev®
) {

29010 
idx1
;

29011 
idx1
 = 0; idx1 < 
fd
->
şosu»_v¬_couÁ
; idx1++) {

29012 
JSClosu»V¬
 *
cv
 = &
fd
->
şosu»_v¬
[
idx1
];

29013 ià(
v¬_Çme
 =ğ
cv
->var_name) {

29014 ià(
fd
 !ğ
s
) {

29015 
idx
 = 
	`g‘_şosu»_v¬2
(
ùx
, 
s
, 
fd
,

29016 
FALSE
,

29017 
cv
->
is_¬g
, 
idx1
,

29018 
cv
->
v¬_Çme
, cv->
is_cÚ¡
,

29019 
cv
->
is_Ëxiÿl
, cv->
v¬_kšd
);

29021 
idx
 = 
idx1
;

29023 
has_idx
;

29024 } ià((
cv
->
v¬_Çme
 =ğ
JS_ATOM__v¬_
 ||

29025 
cv
->
v¬_Çme
 =ğ
JS_ATOM__w™h_
è&& !
is_p£udo_v¬
) {

29026 
is_w™h
 = (
cv
->
v¬_Çme
 =ğ
JS_ATOM__w™h_
);

29027 ià(
fd
 !ğ
s
) {

29028 
idx
 = 
	`g‘_şosu»_v¬2
(
ùx
, 
s
, 
fd
,

29029 
FALSE
,

29030 
cv
->
is_¬g
, 
idx1
,

29031 
cv
->
v¬_Çme
, 
FALSE
, FALSE,

29032 
JS_VAR_NORMAL
);

29034 
idx
 = 
idx1
;

29036 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

29037 
	`dbuf_put_u16
(
bc
, 
idx
);

29038 
	`dbuf_putc
(
bc
, 
	`g‘_w™h_scİe_İcode
(
İ
));

29039 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29040 
Ïb–_dÚe
 = 
	`Ãw_Ïb–_fd
(
s
,†abel_done);

29041 
	`dbuf_put_u32
(
bc
, 
Ïb–_dÚe
);

29042 
	`dbuf_putc
(
bc
, 
is_w™h
);

29043 
	`upd©e_Ïb–
(
s
, 
Ïb–_dÚe
, 1);

29044 
s
->
jump_size
++;

29049 ià(
v¬_idx
 >= 0) {

29051 ià(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
) {

29052 
fd
->
¬gs
[
v¬_idx
 - 
ARGUMENT_VAR_OFFSET
].
is_ÿ±u»d
 = 1;

29053 
idx
 = 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
,

29054 
TRUE
, 
v¬_idx
 - 
ARGUMENT_VAR_OFFSET
,

29055 
v¬_Çme
, 
FALSE
, FALSE, 
JS_VAR_NORMAL
);

29057 
fd
->
v¬s
[
v¬_idx
].
is_ÿ±u»d
 = 1;

29058 
idx
 = 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
,

29059 
FALSE
, 
v¬_idx
,

29060 
v¬_Çme
,

29061 
fd
->
v¬s
[
v¬_idx
].
is_cÚ¡
,

29062 
fd
->
v¬s
[
v¬_idx
].
is_Ëxiÿl
,

29063 
fd
->
v¬s
[
v¬_idx
].
v¬_kšd
);

29065 ià(
idx
 >= 0) {

29066 
has_idx
:

29067 ià((
İ
 =ğ
OP_scİe_put_v¬
 || o°=ğ
OP_scİe_make_»f
) &&

29068 
s
->
şosu»_v¬
[
idx
].
is_cÚ¡
) {

29069 
	`dbuf_putc
(
bc
, 
OP_throw_v¬
);

29070 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29071 
	`dbuf_putc
(
bc
, 
JS_THROW_VAR_RO
);

29072 
dÚe
;

29074 
İ
) {

29075 
OP_scİe_make_»f
:

29076 ià(
is_func_v¬
) {

29078 
	`dbuf_putc
(
bc
, 
OP_objeù
);

29079 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

29080 
	`dbuf_put_u16
(
bc
, 
idx
);

29081 
	`dbuf_putc
(
bc
, 
OP_defše_f›ld
);

29082 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29083 
	`dbuf_putc
(
bc
, 
OP_push_©om_v®ue
);

29084 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29086 ià(
Ïb–_dÚe
 == -1 &&

29087 
	`ÿn_İt_put_»f_v®ue
(
bc_buf
, 
ls
->
pos
)) {

29088 
g‘_İ
;

29089 ià(
s
->
şosu»_v¬
[
idx
].
is_Ëxiÿl
)

29090 
g‘_İ
 = 
OP_g‘_v¬_»f_check
;

29092 
g‘_İ
 = 
OP_g‘_v¬_»f
;

29093 
pos_Ãxt
 = 
	`İtimize_scİe_make_»f
(
ùx
, 
s
, 
bc
, 
bc_buf
, 
ls
,

29094 
pos_Ãxt
,

29095 
g‘_İ
, 
idx
);

29099 
	`dbuf_putc
(
bc
, 
OP_make_v¬_»f_»f
);

29100 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29101 
	`dbuf_put_u16
(
bc
, 
idx
);

29104 
OP_scİe_g‘_»f
:

29107 
	`dbuf_putc
(
bc
, 
OP_undefšed
);

29109 
OP_scİe_g‘_v¬_undef
:

29110 
OP_scİe_g‘_v¬
:

29111 
OP_scİe_put_v¬
:

29112 
OP_scİe_put_v¬_š™
:

29113 
is_put
 = (
İ
 =ğ
OP_scİe_put_v¬
 ||

29114 
İ
 =ğ
OP_scİe_put_v¬_š™
);

29115 ià(
is_put
) {

29116 ià(
s
->
şosu»_v¬
[
idx
].
is_Ëxiÿl
) {

29117 ià(
İ
 =ğ
OP_scİe_put_v¬_š™
) {

29119 ià(
v¬_Çme
 =ğ
JS_ATOM_this
)

29120 
	`dbuf_putc
(
bc
, 
OP_put_v¬_»f_check_š™
);

29122 
	`dbuf_putc
(
bc
, 
OP_put_v¬_»f
);

29124 
	`dbuf_putc
(
bc
, 
OP_put_v¬_»f_check
);

29127 
	`dbuf_putc
(
bc
, 
OP_put_v¬_»f
);

29130 ià(
s
->
şosu»_v¬
[
idx
].
is_Ëxiÿl
) {

29131 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f_check
);

29133 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

29136 
	`dbuf_put_u16
(
bc
, 
idx
);

29138 
OP_scİe_d–‘e_v¬
:

29139 
	`dbuf_putc
(
bc
, 
OP_push_çl£
);

29142 
dÚe
;

29148 
İ
) {

29149 
OP_scİe_make_»f
:

29150 ià(
Ïb–_dÚe
 =ğ-1 && 
	`ÿn_İt_put_glob®_»f_v®ue
(
bc_buf
, 
ls
->
pos
)) {

29151 
pos_Ãxt
 = 
	`İtimize_scİe_make_glob®_»f
(
ùx
, 
s
, 
bc
, 
bc_buf
, 
ls
,

29152 
pos_Ãxt
, 
v¬_Çme
);

29154 
	`dbuf_putc
(
bc
, 
OP_make_v¬_»f
);

29155 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29158 
OP_scİe_g‘_»f
:

29161 
	`dbuf_putc
(
bc
, 
OP_undefšed
);

29162 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬
);

29163 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29165 
OP_scİe_g‘_v¬_undef
:

29166 
OP_scİe_g‘_v¬
:

29167 
OP_scİe_put_v¬
:

29168 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_undef
 + (
İ
 - 
OP_scİe_g‘_v¬_undef
));

29169 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29171 
OP_scİe_put_v¬_š™
:

29172 
	`dbuf_putc
(
bc
, 
OP_put_v¬_š™
);

29173 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29175 
OP_scİe_d–‘e_v¬
:

29176 
	`dbuf_putc
(
bc
, 
OP_d–‘e_v¬
);

29177 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29180 
dÚe
:

29181 ià(
Ïb–_dÚe
 >= 0) {

29182 
	`dbuf_putc
(
bc
, 
OP_Ïb–
);

29183 
	`dbuf_put_u32
(
bc
, 
Ïb–_dÚe
);

29184 
s
->
Ïb–_¦Ùs
[
Ïb–_dÚe
].
pos2
 = 
bc
->
size
;

29186  
pos_Ãxt
;

29187 
	}
}

29190 
	$fšd_´iv©e_şass_f›ld_®l
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
,

29191 
JSAtom
 
Çme
, 
scİe_Ëv–
)

29193 
idx
;

29195 
idx
 = 
fd
->
scİes
[
scİe_Ëv–
].
fœ¡
;

29196 
idx
 >= 0) {

29197 ià(
fd
->
v¬s
[
idx
].
v¬_Çme
 =ğ
Çme
)

29198  
idx
;

29199 
idx
 = 
fd
->
v¬s
[idx].
scİe_Ãxt
;

29202 
	}
}

29204 
	$g‘_loc_Ü_»f
(
DynBuf
 *
bc
, 
BOOL
 
is_»f
, 
idx
)

29208 ià(
is_»f
)

29209 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

29211 
	`dbuf_putc
(
bc
, 
OP_g‘_loc
);

29212 
	`dbuf_put_u16
(
bc
, 
idx
);

29213 
	}
}

29215 
	$»sŞve_scİe_´iv©e_f›ld1
(
JSCÚ‹xt
 *
ùx
,

29216 
BOOL
 *
pis_»f
, *
pv¬_kšd
,

29217 
JSFunùiÚDef
 *
s
,

29218 
JSAtom
 
v¬_Çme
, 
scİe_Ëv–
)

29220 
idx
, 
v¬_kšd
;

29221 
JSFunùiÚDef
 *
fd
;

29222 
BOOL
 
is_»f
;

29224 
fd
 = 
s
;

29225 
is_»f
 = 
FALSE
;

29227 
idx
 = 
	`fšd_´iv©e_şass_f›ld_®l
(
ùx
, 
fd
, 
v¬_Çme
, 
scİe_Ëv–
);

29228 ià(
idx
 >= 0) {

29229 
v¬_kšd
 = 
fd
->
v¬s
[
idx
].var_kind;

29230 ià(
is_»f
) {

29231 
idx
 = 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
, 
FALSE
, idx, 
v¬_Çme
,

29232 
TRUE
, TRUE, 
JS_VAR_NORMAL
);

29233 ià(
idx
 < 0)

29238 
scİe_Ëv–
 = 
fd
->
·»Á_scİe_Ëv–
;

29239 ià(!
fd
->
·»Á
) {

29240 
buf
[
ATOM_GET_STR_BUF_SIZE
];

29242 ià(
fd
->
is_ev®
) {

29244 
idx
 = 0; idx < 
fd
->
şosu»_v¬_couÁ
; idx++) {

29245 
JSClosu»V¬
 *
cv
 = &
fd
->
şosu»_v¬
[
idx
];

29246 ià(
cv
->
v¬_Çme
 == var_name) {

29247 
v¬_kšd
 = 
cv
->var_kind;

29248 
is_»f
 = 
TRUE
;

29249 ià(
fd
 !ğ
s
) {

29250 
idx
 = 
	`g‘_şosu»_v¬2
(
ùx
, 
s
, 
fd
,

29251 
FALSE
,

29252 
cv
->
is_¬g
, 
idx
,

29253 
cv
->
v¬_Çme
, cv->
is_cÚ¡
,

29254 
cv
->
is_Ëxiÿl
,

29255 
cv
->
v¬_kšd
);

29256 ià(
idx
 < 0)

29259 
dÚe
;

29264 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "undefined…rivate field %s",

29265 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
v¬_Çme
));

29268 
fd
 = fd->
·»Á
;

29270 
is_»f
 = 
TRUE
;

29272 
dÚe
:

29273 *
pis_»f
 = 
is_»f
;

29274 *
pv¬_kšd
 = 
v¬_kšd
;

29275  
idx
;

29276 
	}
}

29279 
	$»sŞve_scİe_´iv©e_f›ld
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

29280 
JSAtom
 
v¬_Çme
, 
scİe_Ëv–
, 
İ
,

29281 
DynBuf
 *
bc
)

29283 
idx
, 
v¬_kšd
;

29284 
BOOL
 
is_»f
;

29286 
idx
 = 
	`»sŞve_scİe_´iv©e_f›ld1
(
ùx
, &
is_»f
, &
v¬_kšd
, 
s
,

29287 
v¬_Çme
, 
scİe_Ëv–
);

29288 ià(
idx
 < 0)

29290 
	`as£¹
(
v¬_kšd
 !ğ
JS_VAR_NORMAL
);

29291 
İ
) {

29292 
OP_scİe_g‘_´iv©e_f›ld
:

29293 
OP_scİe_g‘_´iv©e_f›ld2
:

29294 
v¬_kšd
) {

29295 
JS_VAR_PRIVATE_FIELD
:

29296 ià(
İ
 =ğ
OP_scİe_g‘_´iv©e_f›ld2
)

29297 
	`dbuf_putc
(
bc
, 
OP_dup
);

29298 
	`g‘_loc_Ü_»f
(
bc
, 
is_»f
, 
idx
);

29299 
	`dbuf_putc
(
bc
, 
OP_g‘_´iv©e_f›ld
);

29301 
JS_VAR_PRIVATE_METHOD
:

29302 
	`g‘_loc_Ü_»f
(
bc
, 
is_»f
, 
idx
);

29303 
	`dbuf_putc
(
bc
, 
OP_check_b¿nd
);

29304 ià(
İ
 !ğ
OP_scİe_g‘_´iv©e_f›ld2
)

29305 
	`dbuf_putc
(
bc
, 
OP_n
);

29307 
JS_VAR_PRIVATE_GETTER
:

29308 
JS_VAR_PRIVATE_GETTER_SETTER
:

29309 ià(
İ
 =ğ
OP_scİe_g‘_´iv©e_f›ld2
)

29310 
	`dbuf_putc
(
bc
, 
OP_dup
);

29311 
	`g‘_loc_Ü_»f
(
bc
, 
is_»f
, 
idx
);

29312 
	`dbuf_putc
(
bc
, 
OP_check_b¿nd
);

29313 
	`dbuf_putc
(
bc
, 
OP_ÿÎ_m‘hod
);

29314 
	`dbuf_put_u16
(
bc
, 0);

29316 
JS_VAR_PRIVATE_SETTER
:

29318 
	`dbuf_putc
(
bc
, 
OP_throw_v¬
);

29319 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29320 
	`dbuf_putc
(
bc
, 
JS_THROW_VAR_RO
);

29323 
	`abÜt
();

29326 
OP_scİe_put_´iv©e_f›ld
:

29327 
v¬_kšd
) {

29328 
JS_VAR_PRIVATE_FIELD
:

29329 
	`g‘_loc_Ü_»f
(
bc
, 
is_»f
, 
idx
);

29330 
	`dbuf_putc
(
bc
, 
OP_put_´iv©e_f›ld
);

29332 
JS_VAR_PRIVATE_METHOD
:

29333 
JS_VAR_PRIVATE_GETTER
:

29335 
	`dbuf_putc
(
bc
, 
OP_throw_v¬
);

29336 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
v¬_Çme
));

29337 
	`dbuf_putc
(
bc
, 
JS_THROW_VAR_RO
);

29339 
JS_VAR_PRIVATE_SETTER
:

29340 
JS_VAR_PRIVATE_GETTER_SETTER
:

29342 
JSAtom
 
£‰”_Çme
 = 
	`g‘_´iv©e_£‰”_Çme
(
ùx
, 
v¬_Çme
);

29343 ià(
£‰”_Çme
 =ğ
JS_ATOM_NULL
)

29345 
idx
 = 
	`»sŞve_scİe_´iv©e_f›ld1
(
ùx
, &
is_»f
,

29346 &
v¬_kšd
, 
s
,

29347 
£‰”_Çme
, 
scİe_Ëv–
);

29348 
	`JS_F»eAtom
(
ùx
, 
£‰”_Çme
);

29349 ià(
idx
 < 0)

29351 
	`as£¹
(
v¬_kšd
 =ğ
JS_VAR_PRIVATE_SETTER
);

29352 
	`g‘_loc_Ü_»f
(
bc
, 
is_»f
, 
idx
);

29353 
	`dbuf_putc
(
bc
, 
OP_sw­
);

29355 
	`dbuf_putc
(
bc
, 
OP_rÙ3r
);

29357 
	`dbuf_putc
(
bc
, 
OP_check_b¿nd
);

29358 
	`dbuf_putc
(
bc
, 
OP_rÙ3l
);

29360 
	`dbuf_putc
(
bc
, 
OP_ÿÎ_m‘hod
);

29361 
	`dbuf_put_u16
(
bc
, 1);

29365 
	`abÜt
();

29369 
	`abÜt
();

29372 
	}
}

29374 
	$m¬k_ev®_ÿ±u»d_v¬ŸbËs
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

29375 
scİe_Ëv–
)

29377 
idx
;

29378 
JSV¬Def
 *
vd
;

29380 
idx
 = 
s
->
scİes
[
scİe_Ëv–
].
fœ¡
; idx >= 0;) {

29381 
vd
 = &
s
->
v¬s
[
idx
];

29382 
vd
->
is_ÿ±u»d
 = 1;

29383 
idx
 = 
vd
->
scİe_Ãxt
;

29385 
	}
}

29387 
	$add_ev®_v¬ŸbËs
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
)

29389 
JSFunùiÚDef
 *
fd
;

29390 
JSV¬Def
 *
vd
;

29391 
i
, 
scİe_Ëv–
, 
scİe_idx
;

29392 
BOOL
 
has_¬gum’ts_bšdšg
, 
has_this_bšdšg
;

29396 ià(!
s
->
is_ev®
 && !(s->
js_mode
 & 
JS_MODE_STRICT
)) {

29397 
s
->
v¬_objeù_idx
 = 
	`add_v¬
(
ùx
, s, 
JS_ATOM__v¬_
);

29401 
has_this_bšdšg
 = 
s
->has_this_binding;

29402 ià(
has_this_bšdšg
) {

29403 ià(
s
->
this_v¬_idx
 < 0)

29404 
s
->
this_v¬_idx
 = 
	`add_v¬_this
(
ùx
, s);

29405 ià(
s
->
Ãw_rg‘_v¬_idx
 < 0)

29406 
s
->
Ãw_rg‘_v¬_idx
 = 
	`add_v¬
(
ùx
, s, 
JS_ATOM_Ãw_rg‘
);

29407 ià(
s
->
is_d”ived_şass_cÚ¡ruùÜ
 && s->
this_aùive_func_v¬_idx
 < 0)

29408 
s
->
this_aùive_func_v¬_idx
 = 
	`add_v¬
(
ùx
, s, 
JS_ATOM_this_aùive_func
);

29409 ià(
s
->
has_home_objeù
 && s->
home_objeù_v¬_idx
 < 0)

29410 
s
->
home_objeù_v¬_idx
 = 
	`add_v¬
(
ùx
, s, 
JS_ATOM_home_objeù
);

29412 
has_¬gum’ts_bšdšg
 = 
s
->has_arguments_binding;

29413 ià(
has_¬gum’ts_bšdšg
)

29414 
	`add_¬gum’ts_v¬
(
ùx
, 
s
, 
JS_ATOM_¬gum’ts
);

29415 ià(
s
->
is_func_ex´
 && s->
func_Çme
 !ğ
JS_ATOM_NULL
)

29416 
	`add_func_v¬
(
ùx
, 
s
, s->
func_Çme
);

29422 
	`as£¹
(
s
->
is_ev®
 || s->
şosu»_v¬_couÁ
 == 0);

29425 
fd
 = 
s
;

29427 
scİe_Ëv–
 = 
fd
->
·»Á_scİe_Ëv–
;

29428 
fd
 = fd->
·»Á
;

29429 ià(!
fd
)

29431 
scİe_idx
 = 
fd
->
scİes
[
scİe_Ëv–
].
fœ¡
;

29433 ià(!
has_this_bšdšg
 && 
fd
->has_this_binding) {

29434 ià(
fd
->
this_v¬_idx
 < 0)

29435 
fd
->
this_v¬_idx
 = 
	`add_v¬_this
(
ùx
, fd);

29436 ià(
fd
->
Ãw_rg‘_v¬_idx
 < 0)

29437 
fd
->
Ãw_rg‘_v¬_idx
 = 
	`add_v¬
(
ùx
, fd, 
JS_ATOM_Ãw_rg‘
);

29438 ià(
fd
->
is_d”ived_şass_cÚ¡ruùÜ
 && fd->
this_aùive_func_v¬_idx
 < 0)

29439 
fd
->
this_aùive_func_v¬_idx
 = 
	`add_v¬
(
ùx
, fd, 
JS_ATOM_this_aùive_func
);

29440 ià(
fd
->
has_home_objeù
 && fd->
home_objeù_v¬_idx
 < 0)

29441 
fd
->
home_objeù_v¬_idx
 = 
	`add_v¬
(
ùx
, fd, 
JS_ATOM_home_objeù
);

29442 
has_this_bšdšg
 = 
TRUE
;

29445 ià(!
has_¬gum’ts_bšdšg
 && 
fd
->has_arguments_binding) {

29446 
	`add_¬gum’ts_v¬
(
ùx
, 
fd
, 
JS_ATOM_¬gum’ts
);

29447 
has_¬gum’ts_bšdšg
 = 
TRUE
;

29450 ià(
fd
->
is_func_ex´
 && fd->
func_Çme
 !ğ
JS_ATOM_NULL
)

29451 
	`add_func_v¬
(
ùx
, 
fd
, fd->
func_Çme
);

29454 
scİe_idx
 >= 0) {

29455 
vd
 = &
fd
->
v¬s
[
scİe_idx
];

29456 
vd
->
is_ÿ±u»d
 = 1;

29457 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
, 
FALSE
, 
scİe_idx
,

29458 
vd
->
v¬_Çme
, vd->
is_cÚ¡
, vd->
is_Ëxiÿl
, vd->
v¬_kšd
);

29459 
scİe_idx
 = 
vd
->
scİe_Ãxt
;

29462 
i
 = 0; i < 
fd
->
¬g_couÁ
; i++) {

29463 
vd
 = &
fd
->
¬gs
[
i
];

29464 ià(
vd
->
v¬_Çme
 !ğ
JS_ATOM_NULL
) {

29465 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
,

29466 
TRUE
, 
i
, 
vd
->
v¬_Çme
, 
FALSE
, FALSE,

29467 
JS_VAR_NORMAL
);

29470 
i
 = 0; i < 
fd
->
v¬_couÁ
; i++) {

29471 
vd
 = &
fd
->
v¬s
[
i
];

29473 ià(
vd
->
scİe_Ëv–
 == 0 &&

29474 
vd
->
v¬_Çme
 !ğ
JS_ATOM__»t_
 &&

29475 
vd
->
v¬_Çme
 !ğ
JS_ATOM_NULL
) {

29476 
	`g‘_şosu»_v¬
(
ùx
, 
s
, 
fd
,

29477 
FALSE
, 
i
, 
vd
->
v¬_Çme
, FALSE, FALSE,

29478 
JS_VAR_NORMAL
);

29481 ià(
fd
->
is_ev®
) {

29482 
idx
;

29485 
idx
 = 0; idx < 
fd
->
şosu»_v¬_couÁ
; idx++) {

29486 
JSClosu»V¬
 *
cv
 = &
fd
->
şosu»_v¬
[
idx
];

29487 
	`g‘_şosu»_v¬2
(
ùx
, 
s
, 
fd
,

29488 
FALSE
, 
cv
->
is_¬g
,

29489 
idx
, 
cv
->
v¬_Çme
, cv->
is_cÚ¡
,

29490 
cv
->
is_Ëxiÿl
, cv->
v¬_kšd
);

29494 
	}
}

29498 
__exû±iÚ
 
	$add_şosu»_v¬ŸbËs
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
,

29499 
JSFunùiÚBy‹code
 *
b
, 
scİe_idx
)

29501 
i
, 
couÁ
;

29502 
JSV¬Def
 *
vd
;

29504 
couÁ
 = 
b
->
¬g_couÁ
 + b->
v¬_couÁ
 + b->
şosu»_v¬_couÁ
;

29505 
s
->
şosu»_v¬
 = 
NULL
;

29506 
s
->
şosu»_v¬_couÁ
 = 0;

29507 
s
->
şosu»_v¬_size
 = 
couÁ
;

29508 ià(
couÁ
 == 0)

29510 
s
->
şosu»_v¬
 = 
	`js_m®loc
(
ùx
, (s->şosu»_v¬[0]è* 
couÁ
);

29511 ià(!
s
->
şosu»_v¬
)

29514 
i
 = 
scİe_idx
; i >= 0;) {

29515 
vd
 = &
b
->
v¬defs
[b->
¬g_couÁ
 + 
i
];

29516 ià(
vd
->
scİe_Ëv–
 > 0) {

29517 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[s->
şosu»_v¬_couÁ
++];

29518 
cv
->
is_loÿl
 = 
TRUE
;

29519 
cv
->
is_¬g
 = 
FALSE
;

29520 
cv
->
is_cÚ¡
 = 
vd
->is_const;

29521 
cv
->
is_Ëxiÿl
 = 
vd
->is_lexical;

29522 
cv
->
v¬_kšd
 = 
vd
->var_kind;

29523 
cv
->
v¬_idx
 = 
i
;

29524 
cv
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
vd
->var_name);

29526 
i
 = 
vd
->
scİe_Ãxt
;

29529 
i
 = 0; i < 
b
->
¬g_couÁ
; i++) {

29530 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[s->
şosu»_v¬_couÁ
++];

29531 
vd
 = &
b
->
v¬defs
[
i
];

29532 
cv
->
is_loÿl
 = 
TRUE
;

29533 
cv
->
is_¬g
 = 
TRUE
;

29534 
cv
->
is_cÚ¡
 = 
FALSE
;

29535 
cv
->
is_Ëxiÿl
 = 
FALSE
;

29536 
cv
->
v¬_kšd
 = 
JS_VAR_NORMAL
;

29537 
cv
->
v¬_idx
 = 
i
;

29538 
cv
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
vd
->var_name);

29541 
i
 = 0; i < 
b
->
v¬_couÁ
; i++) {

29542 
vd
 = &
b
->
v¬defs
[b->
¬g_couÁ
 + 
i
];

29543 ià(
vd
->
scİe_Ëv–
 =ğ0 && vd->
v¬_Çme
 !ğ
JS_ATOM__»t_
) {

29544 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[s->
şosu»_v¬_couÁ
++];

29545 
cv
->
is_loÿl
 = 
TRUE
;

29546 
cv
->
is_¬g
 = 
FALSE
;

29547 
cv
->
is_cÚ¡
 = 
FALSE
;

29548 
cv
->
is_Ëxiÿl
 = 
FALSE
;

29549 
cv
->
v¬_kšd
 = 
JS_VAR_NORMAL
;

29550 
cv
->
v¬_idx
 = 
i
;

29551 
cv
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
vd
->var_name);

29554 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

29555 
JSClosu»V¬
 *
cv0
 = &
b
->
şosu»_v¬
[
i
];

29556 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[s->
şosu»_v¬_couÁ
++];

29557 
cv
->
is_loÿl
 = 
FALSE
;

29558 
cv
->
is_¬g
 = 
cv0
->is_arg;

29559 
cv
->
is_cÚ¡
 = 
cv0
->is_const;

29560 
cv
->
is_Ëxiÿl
 = 
cv0
->is_lexical;

29561 
cv
->
v¬_kšd
 = 
cv0
->var_kind;

29562 
cv
->
v¬_idx
 = 
i
;

29563 
cv
->
v¬_Çme
 = 
	`JS_DupAtom
(
ùx
, 
cv0
->var_name);

29566 
	}
}

29568 
	sCodeCÚ‹xt
 {

29569 cÚ¡ 
ušt8_t
 *
	mbc_buf
;

29570 
	mbc_Ën
;

29571 
	mpos
;

29572 
	mlše_num
;

29573 
	mİ
;

29574 
	midx
;

29575 
	mÏb–
;

29576 
	mv®
;

29577 
JSAtom
 
	m©om
;

29578 } 
	tCodeCÚ‹xt
;

29580 
	#M2
(
İ1
, 
İ2
è((İ1è| ((İ2è<< 8))

	)

29581 
	#M3
(
İ1
, 
İ2
, 
İ3
è((İ1è| ((İ2è<< 8è| ((İ3è<< 16))

	)

29582 
	#M4
(
İ1
, 
İ2
, 
İ3
, 
İ4
è((İ1è| ((İ2è<< 8è| ((İ3è<< 16è| ((İ4è<< 24))

	)

29584 
BOOL
 
	$code_m©ch
(
CodeCÚ‹xt
 *
s
, 
pos
, ...)

29586 cÚ¡ 
ušt8_t
 *
b
 = 
s
->
bc_buf
;

29587 
İ
, 
Ën
, 
İ1
, 
lše_num
, 
pos_Ãxt
;

29588 
va_li¡
 
­
;

29589 
BOOL
 
»t
 = 
FALSE
;

29591 
lše_num
 = -1;

29592 
	`va_¡¬t
(
­
, 
pos
);

29595 
İ1
 = 
	`va_¬g
(
­
, );

29596 ià(
İ1
 == -1) {

29597 
s
->
pos
 =…os;

29598 
s
->
lše_num
 =†ine_num;

29599 
»t
 = 
TRUE
;

29603 ià(
pos
 >ğ
s
->
bc_Ën
)

29604 
dÚe
;

29605 
İ
 = 
b
[
pos
];

29606 
Ën
 = 
İcode_šfo
[
İ
].
size
;

29607 
pos_Ãxt
 = 
pos
 + 
Ën
;

29608 ià(
pos_Ãxt
 > 
s
->
bc_Ën
)

29609 
dÚe
;

29610 ià(
İ
 =ğ
OP_lše_num
) {

29611 
lše_num
 = 
	`g‘_u32
(
b
 + 
pos
 + 1);

29612 
pos
 = 
pos_Ãxt
;

29617 ià(
İ
 !ğ
İ1
) {

29618 ià(
İ1
 =ğ(
ušt8_t
)İ1 || !
İ
)

29620 ià(
İ
 !ğ(
ušt8_t
)
İ1


29621 && 
İ
 !ğ(
ušt8_t
)(
İ1
 >> 8)

29622 && 
İ
 !ğ(
ušt8_t
)(
İ1
 >> 16)

29623 && 
İ
 !ğ(
ušt8_t
)(
İ1
 >> 24)) {

29626 
s
->
İ
 = op;

29629 
pos
++;

29630 
İcode_šfo
[
İ
].
fmt
) {

29631 
OP_FMT_loc8
:

29632 
OP_FMT_u8
:

29634 
idx
 = 
b
[
pos
];

29635 
¬g
 = 
	`va_¬g
(
­
, );

29636 ià(
¬g
 == -1) {

29637 
s
->
idx
 = idx;

29639 ià(
¬g
 !ğ
idx
)

29640 
dÚe
;

29644 
OP_FMT_u16
:

29645 
OP_FMT_Åİ
:

29646 
OP_FMT_loc
:

29647 
OP_FMT_¬g
:

29648 
OP_FMT_v¬_»f
:

29650 
idx
 = 
	`g‘_u16
(
b
 + 
pos
);

29651 
¬g
 = 
	`va_¬g
(
­
, );

29652 ià(
¬g
 == -1) {

29653 
s
->
idx
 = idx;

29655 ià(
¬g
 !ğ
idx
)

29656 
dÚe
;

29660 
OP_FMT_i32
:

29661 
OP_FMT_u32
:

29662 
OP_FMT_Ïb–
:

29663 
OP_FMT_cÚ¡
:

29665 
s
->
Ïb–
 = 
	`g‘_u32
(
b
 + 
pos
);

29668 
OP_FMT_Ïb–_u16
:

29670 
s
->
Ïb–
 = 
	`g‘_u32
(
b
 + 
pos
);

29671 
s
->
v®
 = 
	`g‘_u16
(
b
 + 
pos
 + 4);

29674 
OP_FMT_©om
:

29676 
s
->
©om
 = 
	`g‘_u32
(
b
 + 
pos
);

29679 
OP_FMT_©om_u8
:

29681 
s
->
©om
 = 
	`g‘_u32
(
b
 + 
pos
);

29682 
s
->
v®
 = 
	`g‘_u8
(
b
 + 
pos
 + 4);

29685 
OP_FMT_©om_u16
:

29687 
s
->
©om
 = 
	`g‘_u32
(
b
 + 
pos
);

29688 
s
->
v®
 = 
	`g‘_u16
(
b
 + 
pos
 + 4);

29691 
OP_FMT_©om_Ïb–_u8
:

29693 
s
->
©om
 = 
	`g‘_u32
(
b
 + 
pos
);

29694 
s
->
Ïb–
 = 
	`g‘_u32
(
b
 + 
pos
 + 4);

29695 
s
->
v®
 = 
	`g‘_u8
(
b
 + 
pos
 + 8);

29701 
pos
 = 
pos_Ãxt
;

29703 
dÚe
:

29704 
	`va_’d
(
­
);

29705  
»t
;

29706 
	}
}

29708 
	$š¡ªtŸ‹_hoi¡ed_defš™iÚs
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
, 
DynBuf
 *
bc
)

29710 
i
, 
idx
, 
v¬_idx
;

29713 
i
 = 0; i < 
s
->
hoi¡ed_def_couÁ
; i++) {

29714 
JSHoi¡edDef
 *
hf
 = &
s
->
hoi¡ed_def
[
i
];

29715 
has_şosu»
 = 0;

29716 
BOOL
 
fÜû_š™
 = 
hf
->force_init;

29717 ià(
s
->
is_glob®_v¬
 && 
hf
->
v¬_Çme
 !ğ
JS_ATOM_NULL
) {

29722 
idx
 = 0; idx < 
s
->
şosu»_v¬_couÁ
; idx++) {

29723 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[
idx
];

29724 ià(
cv
->
v¬_Çme
 =ğ
hf
->var_name) {

29725 
has_şosu»
 = 2;

29726 
fÜû_š™
 = 
FALSE
;

29729 ià(
cv
->
v¬_Çme
 =ğ
JS_ATOM__v¬_
) {

29730 
	`dbuf_putc
(
bc
, 
OP_g‘_v¬_»f
);

29731 
	`dbuf_put_u16
(
bc
, 
idx
);

29732 
has_şosu»
 = 1;

29733 
fÜû_š™
 = 
TRUE
;

29737 ià(!
has_şosu»
) {

29738 
æags
;

29740 
æags
 = 0;

29741 ià(
s
->
ev®_ty³
 !ğ
JS_EVAL_TYPE_GLOBAL
)

29742 
æags
 |ğ
JS_PROP_CONFIGURABLE
;

29743 ià(
hf
->
ıoŞ_idx
 >ğ0 && !hf->
is_Ëxiÿl
) {

29745 
	`dbuf_putc
(
bc
, 
OP_fşosu»
);

29746 
	`dbuf_put_u32
(
bc
, 
hf
->
ıoŞ_idx
);

29748 
	`dbuf_putc
(
bc
, 
OP_defše_func
);

29749 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
hf
->
v¬_Çme
));

29750 
	`dbuf_putc
(
bc
, 
æags
);

29752 
dÚe_hoi¡ed_def
;

29754 ià(
hf
->
is_Ëxiÿl
) {

29755 
æags
 |ğ
DEFINE_GLOBAL_LEX_VAR
;

29756 ià(!
hf
->
is_cÚ¡
)

29757 
æags
 |ğ
JS_PROP_WRITABLE
;

29759 
	`dbuf_putc
(
bc
, 
OP_defše_v¬
);

29760 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
hf
->
v¬_Çme
));

29761 
	`dbuf_putc
(
bc
, 
æags
);

29765 ià(
hf
->
ıoŞ_idx
 >ğ0 || 
fÜû_š™
) {

29766 ià(
hf
->
ıoŞ_idx
 >= 0) {

29767 
	`dbuf_putc
(
bc
, 
OP_fşosu»
);

29768 
	`dbuf_put_u32
(
bc
, 
hf
->
ıoŞ_idx
);

29769 ià(
hf
->
v¬_Çme
 =ğ
JS_ATOM__deçuÉ_
) {

29771 
	`dbuf_putc
(
bc
, 
OP_£t_Çme
);

29772 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
JS_ATOM_deçuÉ
));

29775 
	`dbuf_putc
(
bc
, 
OP_undefšed
);

29777 ià(
s
->
is_glob®_v¬
) {

29778 ià(
has_şosu»
 == 2) {

29779 
	`dbuf_putc
(
bc
, 
OP_put_v¬_»f
);

29780 
	`dbuf_put_u16
(
bc
, 
idx
);

29781 } ià(
has_şosu»
 == 1) {

29782 
	`dbuf_putc
(
bc
, 
OP_defše_f›ld
);

29783 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
hf
->
v¬_Çme
));

29784 
	`dbuf_putc
(
bc
, 
OP_drİ
);

29787 
	`dbuf_putc
(
bc
, 
OP_put_v¬
);

29788 
	`dbuf_put_u32
(
bc
, 
	`JS_DupAtom
(
ùx
, 
hf
->
v¬_Çme
));

29791 
v¬_idx
 = 
hf
->var_idx;

29792 ià(
v¬_idx
 & 
ARGUMENT_VAR_OFFSET
) {

29793 
	`dbuf_putc
(
bc
, 
OP_put_¬g
);

29794 
	`dbuf_put_u16
(
bc
, 
v¬_idx
 - 
ARGUMENT_VAR_OFFSET
);

29796 
	`dbuf_putc
(
bc
, 
OP_put_loc
);

29797 
	`dbuf_put_u16
(
bc
, 
v¬_idx
);

29801 
dÚe_hoi¡ed_def
:

29802 
	`JS_F»eAtom
(
ùx
, 
hf
->
v¬_Çme
);

29804 
	`js_ä“
(
ùx
, 
s
->
hoi¡ed_def
);

29805 
s
->
hoi¡ed_def
 = 
NULL
;

29806 
s
->
hoi¡ed_def_couÁ
 = 0;

29807 
s
->
hoi¡ed_def_size
 = 0;

29808 
	}
}

29810 
	$sk_d—d_code
(
JSFunùiÚDef
 *
s
, cÚ¡ 
ušt8_t
 *
bc_buf
, 
bc_Ën
,

29811 
pos
, *
lš•
)

29813 
İ
, 
Ën
, 
Ïb–
;

29815 ; 
pos
 < 
bc_Ën
;…o +ğ
Ën
) {

29816 
İ
 = 
bc_buf
[
pos
];

29817 
Ën
 = 
İcode_šfo
[
İ
].
size
;

29818 ià(
İ
 =ğ
OP_lše_num
) {

29819 *
lš•
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29821 ià(
İ
 =ğ
OP_Ïb–
) {

29822 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29823 ià(
	`upd©e_Ïb–
(
s
, 
Ïb–
, 0) > 0)

29826 ià(
s
->
Ïb–_¦Ùs
[
Ïb–
].
fœ¡_»loc
) {

29827 
	`´štf
("line %d: unreferenced†abel %d:%d has„elocations\n",

29828 *
lš•
, 
Ïb–
, 
s
->
Ïb–_¦Ùs
[Ïb–].
pos2
);

29831 
	`as£¹
(
s
->
Ïb–_¦Ùs
[
Ïb–
].
fœ¡_»loc
 =ğ
NULL
);

29834 
JSAtom
 
©om
;

29835 
İcode_šfo
[
İ
].
fmt
) {

29836 
OP_FMT_Ïb–
:

29837 
OP_FMT_Ïb–_u16
:

29838 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29839 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

29841 
OP_FMT_©om_Ïb–_u8
:

29842 
OP_FMT_©om_Ïb–_u16
:

29843 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 5);

29844 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

29846 
OP_FMT_©om
:

29847 
OP_FMT_©om_u8
:

29848 
OP_FMT_©om_u16
:

29849 
©om
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29850 
	`JS_F»eAtom
(
s
->
ùx
, 
©om
);

29857  
pos
;

29858 
	}
}

29860 
	$g‘_Ïb–_pos
(
JSFunùiÚDef
 *
s
, 
Ïb–
)

29862 
i
, 
pos
;

29863 
i
 = 0; i < 20; i++) {

29864 
pos
 = 
s
->
Ïb–_¦Ùs
[
Ïb–
].pos;

29866 
s
->
by‹_code
.
buf
[
pos
]) {

29867 
OP_lše_num
:

29868 
OP_Ïb–
:

29869 
pos
 += 5;

29871 
OP_gÙo
:

29872 
Ïb–
 = 
	`g‘_u32
(
s
->
by‹_code
.
buf
 + 
pos
 + 1);

29875  
pos
;

29880  
pos
;

29881 
	}
}

29885 
__exû±iÚ
 
	$»sŞve_v¬ŸbËs
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
)

29887 
pos
, 
pos_Ãxt
, 
bc_Ën
, 
İ
, 
Ën
, 
i
, 
idx
, 
¬g_v®id
, 
lše_num
;

29888 
ušt8_t
 *
bc_buf
;

29889 
JSAtom
 
v¬_Çme
;

29890 
DynBuf
 
bc_out
;

29891 
CodeCÚ‹xt
 
cc
;

29892 
scİe
;

29894 
cc
.
bc_buf
 = bc_buàğ
s
->
by‹_code
.
buf
;

29895 
cc
.
bc_Ën
 = bc_ËÀğ
s
->
by‹_code
.
size
;

29896 
	`js_dbuf_š™
(
ùx
, &
bc_out
);

29900 ià(
s
->
is_glob®_v¬
) {

29901 
i
 = 0; i < 
s
->
hoi¡ed_def_couÁ
; i++) {

29902 
JSHoi¡edDef
 *
hf
 = &
s
->
hoi¡ed_def
[
i
];

29903 
æags
;

29905 ià(
hf
->
v¬_Çme
 !ğ
JS_ATOM_NULL
) {

29907 
idx
 = 0; idx < 
s
->
şosu»_v¬_couÁ
; idx++) {

29908 
JSClosu»V¬
 *
cv
 = &
s
->
şosu»_v¬
[
idx
];

29909 ià(
cv
->
v¬_Çme
 =ğ
hf
->var_name) {

29910 ià(
s
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_DIRECT
 &&

29911 
cv
->
is_Ëxiÿl
) {

29917 
	`dbuf_putc
(&
bc_out
, 
OP_throw_v¬
);

29918 
	`dbuf_put_u32
(&
bc_out
, 
	`JS_DupAtom
(
ùx
, 
hf
->
v¬_Çme
));

29919 
	`dbuf_putc
(&
bc_out
, 
JS_THROW_VAR_REDECL
);

29921 
Ãxt
;

29923 ià(
cv
->
v¬_Çme
 =ğ
JS_ATOM__v¬_
)

29924 
Ãxt
;

29927 
	`dbuf_putc
(&
bc_out
, 
OP_check_defše_v¬
);

29928 
	`dbuf_put_u32
(&
bc_out
, 
	`JS_DupAtom
(
ùx
, 
hf
->
v¬_Çme
));

29929 
æags
 = 0;

29930 ià(
hf
->
is_Ëxiÿl
)

29931 
æags
 |ğ
DEFINE_GLOBAL_LEX_VAR
;

29932 ià(
hf
->
ıoŞ_idx
 >= 0)

29933 
æags
 |ğ
DEFINE_GLOBAL_FUNC_VAR
;

29934 
	`dbuf_putc
(&
bc_out
, 
æags
);

29936 
Ãxt
: ;

29940 
¬g_v®id
 = 0;

29941 
lše_num
 = 0;

29942 
pos
 = 0;…o < 
bc_Ën
;…o ğ
pos_Ãxt
) {

29943 
İ
 = 
bc_buf
[
pos
];

29944 
Ën
 = 
İcode_šfo
[
İ
].
size
;

29945 
pos_Ãxt
 = 
pos
 + 
Ën
;

29946 
İ
) {

29947 
OP_lše_num
:

29948 
lše_num
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29949 
s
->
lše_numb”_size
++;

29950 
no_chªge
;

29952 
OP_£t_¬g_v®id_u±o
:

29953 
¬g_v®id
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

29955 
OP_ev®
:

29957 
ÿÎ_¬gc
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

29958 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1 + 2);

29959 
	`m¬k_ev®_ÿ±u»d_v¬ŸbËs
(
ùx
, 
s
, 
scİe
);

29960 
	`dbuf_putc
(&
bc_out
, 
İ
);

29961 
	`dbuf_put_u16
(&
bc_out
, 
ÿÎ_¬gc
);

29962 
	`dbuf_put_u16
(&
bc_out
, 
s
->
scİes
[
scİe
].
fœ¡
 + 1);

29965 
OP_­¶y_ev®
:

29966 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

29967 
	`m¬k_ev®_ÿ±u»d_v¬ŸbËs
(
ùx
, 
s
, 
scİe
);

29968 
	`dbuf_putc
(&
bc_out
, 
İ
);

29969 
	`dbuf_put_u16
(&
bc_out
, 
s
->
scİes
[
scİe
].
fœ¡
 + 1);

29971 
OP_scİe_g‘_v¬_undef
:

29972 
OP_scİe_g‘_v¬
:

29973 
OP_scİe_put_v¬
:

29974 
OP_scİe_d–‘e_v¬
:

29975 
OP_scİe_g‘_»f
:

29976 
OP_scİe_put_v¬_š™
:

29977 
v¬_Çme
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29978 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 5);

29979 
pos_Ãxt
 = 
	`»sŞve_scİe_v¬
(
ùx
, 
s
, 
v¬_Çme
, 
scİe
, 
İ
, &
bc_out
,

29980 
NULL
, NULL, 
pos_Ãxt
, 
¬g_v®id
);

29981 
	`JS_F»eAtom
(
ùx
, 
v¬_Çme
);

29983 
OP_scİe_make_»f
:

29985 
Ïb–
;

29986 
Lab–SlÙ
 *
ls
;

29987 
v¬_Çme
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

29988 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 5);

29989 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 9);

29990 
ls
 = &
s
->
Ïb–_¦Ùs
[
Ïb–
];

29991 
ls
->
»f_couÁ
--;

29992 
pos_Ãxt
 = 
	`»sŞve_scİe_v¬
(
ùx
, 
s
, 
v¬_Çme
, 
scİe
, 
İ
, &
bc_out
,

29993 
bc_buf
, 
ls
, 
pos_Ãxt
, 
¬g_v®id
);

29994 
	`JS_F»eAtom
(
ùx
, 
v¬_Çme
);

29997 
OP_scİe_g‘_´iv©e_f›ld
:

29998 
OP_scİe_g‘_´iv©e_f›ld2
:

29999 
OP_scİe_put_´iv©e_f›ld
:

30001 
»t
;

30002 
v¬_Çme
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30003 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 5);

30004 
»t
 = 
	`»sŞve_scİe_´iv©e_f›ld
(
ùx
, 
s
, 
v¬_Çme
, 
scİe
, 
İ
, &
bc_out
);

30005 ià(
»t
 < 0)

30006 
ç
;

30007 
	`JS_F»eAtom
(
ùx
, 
v¬_Çme
);

30010 
OP_gosub
:

30011 
s
->
jump_size
++;

30012 ià(
OPTIMIZE
) {

30014 
Ïb–
;

30015 
Lab–SlÙ
 *
ls
;

30017 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30018 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

30019 
ls
 = &
s
->
Ïb–_¦Ùs
[
Ïb–
];

30020 ià(
	`code_m©ch
(&
cc
, 
ls
->
pos
, 
OP_»t
, -1)) {

30021 
ls
->
»f_couÁ
--;

30025 
no_chªge
;

30026 
OP_drİ
:

30031 
pos1
 = 
pos_Ãxt
;

30032 
lše1
 = 
lše_num
;

30033 
	`code_m©ch
(&
cc
, 
pos1
, 
OP_drİ
, -1)) {

30034 ià(
cc
.
lše_num
 >ğ0è
lše1
 = cc.line_num;

30035 
pos1
 = 
cc
.
pos
;

30037 ià(
	`code_m©ch
(&
cc
, 
pos1
, 
OP_»tuº_undef
, -1)) {

30038 
pos_Ãxt
 = 
pos1
;

30039 ià(
lše1
 !ğ-1 &&†še1 !ğ
lše_num
) {

30040 
lše_num
 = 
lše1
;

30041 
s
->
lše_numb”_size
++;

30042 
	`dbuf_putc
(&
bc_out
, 
OP_lše_num
);

30043 
	`dbuf_put_u32
(&
bc_out
, 
lše_num
);

30048 
no_chªge
;

30049 
OP_š£¹3
:

30050 ià(
OPTIMIZE
) {

30052 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_put_¬¿y_–
, 
OP_put_»f_v®ue
), 
OP_drİ
, -1)) {

30053 
	`dbuf_putc
(&
bc_out
, 
cc
.
İ
);

30054 
pos_Ãxt
 = 
cc
.
pos
;

30055 ià(
cc
.
lše_num
 != -1 && cc.line_num !=†ine_num) {

30056 
lše_num
 = 
cc
.line_num;

30057 
s
->
lše_numb”_size
++;

30058 
	`dbuf_putc
(&
bc_out
, 
OP_lše_num
);

30059 
	`dbuf_put_u32
(&
bc_out
, 
lše_num
);

30064 
no_chªge
;

30066 
OP_gÙo
:

30067 
s
->
jump_size
++;

30069 
OP__ÿÎ
:

30070 
OP__ÿÎ_m‘hod
:

30071 
OP_»tuº
:

30072 
OP_»tuº_undef
:

30073 
OP_throw
:

30074 
OP_throw_v¬
:

30075 
OP_»t
:

30076 ià(
OPTIMIZE
) {

30078 
lše
 = -1;

30079 
	`dbuf_put
(&
bc_out
, 
bc_buf
 + 
pos
, 
Ën
);

30080 
pos
 = 
	`sk_d—d_code
(
s
, 
bc_buf
, 
bc_Ën
,…o + 
Ën
, &
lše
);

30081 
pos_Ãxt
 = 
pos
;

30082 ià(
pos
 < 
bc_Ën
 && 
lše
 >ğ0 && 
lše_num
 !=†ine) {

30083 
lše_num
 = 
lše
;

30084 
s
->
lše_numb”_size
++;

30085 
	`dbuf_putc
(&
bc_out
, 
OP_lše_num
);

30086 
	`dbuf_put_u32
(&
bc_out
, 
lše_num
);

30090 
no_chªge
;

30092 
OP_Ïb–
:

30094 
Ïb–
;

30095 
Lab–SlÙ
 *
ls
;

30097 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30098 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

30099 
ls
 = &
s
->
Ïb–_¦Ùs
[
Ïb–
];

30100 
ls
->
pos2
 = 
bc_out
.
size
 + 
İcode_šfo
[
İ
].size;

30102 
no_chªge
;

30104 
OP_’‹r_scİe
:

30106 
scİe_idx
, 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

30108 ià(
scİe
 == 1) {

30109 
	`š¡ªtŸ‹_hoi¡ed_defš™iÚs
(
ùx
, 
s
, &
bc_out
);

30112 
scİe_idx
 = 
s
->
scİes
[
scİe
].
fœ¡
; scope_idx >= 0;) {

30113 
JSV¬Def
 *
vd
 = &
s
->
v¬s
[
scİe_idx
];

30114 ià(
vd
->
scİe_Ëv–
 =ğ
scİe
) {

30115 ià(
vd
->
v¬_kšd
 =ğ
JS_VAR_FUNCTION_DECL
 ||

30116 
vd
->
v¬_kšd
 =ğ
JS_VAR_NEW_FUNCTION_DECL
) {

30118 
	`dbuf_putc
(&
bc_out
, 
OP_fşosu»
);

30119 
	`dbuf_put_u32
(&
bc_out
, 
vd
->
func_poŞ_Ü_scİe_idx
);

30120 
	`dbuf_putc
(&
bc_out
, 
OP_put_loc
);

30121 
	`dbuf_put_u16
(&
bc_out
, 
scİe_idx
);

30125 
	`dbuf_putc
(&
bc_out
, 
OP_£t_loc_unš™Ÿlized
);

30126 
	`dbuf_put_u16
(&
bc_out
, 
scİe_idx
);

30128 
scİe_idx
 = 
vd
->
scİe_Ãxt
;

30136 
OP_Ëave_scİe
:

30138 
scİe_idx
, 
scİe
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

30140 
scİe_idx
 = 
s
->
scİes
[
scİe
].
fœ¡
; scope_idx >= 0;) {

30141 
JSV¬Def
 *
vd
 = &
s
->
v¬s
[
scİe_idx
];

30142 ià(
vd
->
scİe_Ëv–
 =ğ
scİe
) {

30143 ià(
vd
->
is_ÿ±u»d
) {

30144 
	`dbuf_putc
(&
bc_out
, 
OP_şo£_loc
);

30145 
	`dbuf_put_u16
(&
bc_out
, 
scİe_idx
);

30147 
scİe_idx
 = 
vd
->
scİe_Ãxt
;

30155 
OP_£t_Çme
:

30158 
JSAtom
 
Çme
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30159 ià(
Çme
 =ğ
JS_ATOM_NULL
)

30162 
no_chªge
;

30164 
OP_if_çl£
:

30165 
OP_if_Œue
:

30166 
OP_ÿtch
:

30167 
s
->
jump_size
++;

30168 
no_chªge
;

30170 
OP_dup
:

30171 ià(
OPTIMIZE
) {

30174 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_if_çl£
, 
OP_if_Œue
), 
OP_drİ
, -1)) {

30175 
Ïb0
, 
Ïb1
, 
İ1
, 
pos1
, 
lše1
, 
pos2
;

30176 
Ïb0
 = 
Ïb1
 = 
cc
.
Ïb–
;

30177 
	`as£¹
(
Ïb1
 >ğ0 &&†ab1 < 
s
->
Ïb–_couÁ
);

30178 
İ1
 = 
cc
.
İ
;

30179 
pos1
 = 
cc
.
pos
;

30180 
lše1
 = 
cc
.
lše_num
;

30181 
	`code_m©ch
(&
cc
, (
pos2
 = 
	`g‘_Ïb–_pos
(
s
, 
Ïb1
)), 
OP_dup
, 
İ1
, 
OP_drİ
, -1)) {

30182 
Ïb1
 = 
cc
.
Ïb–
;

30184 ià(
	`code_m©ch
(&
cc
, 
pos2
, 
İ1
, -1)) {

30185 
s
->
jump_size
++;

30186 
	`upd©e_Ïb–
(
s
, 
Ïb0
, -1);

30187 
	`upd©e_Ïb–
(
s
, 
cc
.
Ïb–
, +1);

30188 
	`dbuf_putc
(&
bc_out
, 
İ1
);

30189 
	`dbuf_put_u32
(&
bc_out
, 
cc
.
Ïb–
);

30190 
pos_Ãxt
 = 
pos1
;

30191 ià(
lše1
 !ğ-1 &&†še1 !ğ
lše_num
) {

30192 
lše_num
 = 
lše1
;

30193 
s
->
lše_numb”_size
++;

30194 
	`dbuf_putc
(&
bc_out
, 
OP_lše_num
);

30195 
	`dbuf_put_u32
(&
bc_out
, 
lše_num
);

30201 
no_chªge
;

30203 
OP_nİ
:

30206 
OP_£t_şass_Çme
:

30211 
no_chªge
:

30212 
	`dbuf_put
(&
bc_out
, 
bc_buf
 + 
pos
, 
Ën
);

30218 
	`dbuf_ä“
(&
s
->
by‹_code
);

30219 
s
->
by‹_code
 = 
bc_out
;

30220 ià(
	`dbuf_”rÜ
(&
s
->
by‹_code
)) {

30221 
	`JS_ThrowOutOfMemÜy
(
ùx
);

30225 
ç
:

30228 ; 
pos
 < 
bc_Ën
;…o ğ
pos_Ãxt
) {

30229 
İ
 = 
bc_buf
[
pos
];

30230 
Ën
 = 
İcode_šfo
[
İ
].
size
;

30231 
pos_Ãxt
 = 
pos
 + 
Ën
;

30232 
	`dbuf_put
(&
bc_out
, 
bc_buf
 + 
pos
, 
Ën
);

30234 
	`dbuf_ä“
(&
s
->
by‹_code
);

30235 
s
->
by‹_code
 = 
bc_out
;

30237 
	}
}

30240 
	$add_pc2lše_šfo
(
JSFunùiÚDef
 *
s
, 
ušt32_t
 
pc
, 
lše_num
)

30242 ià(
s
->
lše_numb”_¦Ùs
 !ğ
NULL


30243 && 
s
->
lše_numb”_couÁ
 < s->
lše_numb”_size


30244 && 
pc
 >ğ
s
->
lše_numb”_Ï¡_pc


30245 && 
lše_num
 !ğ
s
->
lše_numb”_Ï¡
) {

30246 
s
->
lše_numb”_¦Ùs
[s->
lše_numb”_couÁ
].
pc
 =…c;

30247 
s
->
lše_numb”_¦Ùs
[s->
lše_numb”_couÁ
].
lše_num
 =†ine_num;

30248 
s
->
lše_numb”_couÁ
++;

30249 
s
->
lše_numb”_Ï¡_pc
 = 
pc
;

30250 
s
->
lše_numb”_Ï¡
 = 
lše_num
;

30252 
	}
}

30254 
	$compu‹_pc2lše_šfo
(
JSFunùiÚDef
 *
s
)

30256 ià(!(
s
->
js_mode
 & 
JS_MODE_STRIP
è&& s->
lše_numb”_¦Ùs
) {

30257 
Ï¡_lše_num
 = 
s
->
lše_num
;

30258 
ušt32_t
 
Ï¡_pc
 = 0;

30259 
i
;

30261 
	`js_dbuf_š™
(
s
->
ùx
, &s->
pc2lše
);

30262 
i
 = 0; i < 
s
->
lše_numb”_couÁ
; i++) {

30263 
ušt32_t
 
pc
 = 
s
->
lše_numb”_¦Ùs
[
i
].pc;

30264 
lše_num
 = 
s
->
lše_numb”_¦Ùs
[
i
].line_num;

30265 
diff_pc
, 
diff_lše
;

30267 ià(
lše_num
 < 0)

30270 
diff_pc
 = 
pc
 - 
Ï¡_pc
;

30271 
diff_lše
 = 
lše_num
 - 
Ï¡_lše_num
;

30272 ià(
diff_lše
 =ğ0 || 
diff_pc
 < 0)

30275 ià(
diff_lše
 >ğ
PC2LINE_BASE
 &&

30276 
diff_lše
 < 
PC2LINE_BASE
 + 
PC2LINE_RANGE
 &&

30277 
diff_pc
 <ğ
PC2LINE_DIFF_PC_MAX
) {

30278 
	`dbuf_putc
(&
s
->
pc2lše
, (
diff_lše
 - 
PC2LINE_BASE
) +

30279 
diff_pc
 * 
PC2LINE_RANGE
 + 
PC2LINE_OP_FIRST
);

30282 
	`dbuf_putc
(&
s
->
pc2lše
, 0);

30283 
	`dbuf_put_Ëb128
(&
s
->
pc2lše
, 
diff_pc
);

30284 
	`dbuf_put_¦eb128
(&
s
->
pc2lše
, 
diff_lše
);

30286 
Ï¡_pc
 = 
pc
;

30287 
Ï¡_lše_num
 = 
lše_num
;

30290 
	}
}

30292 
R–ocEÁry
 *
	$add_»loc
(
JSCÚ‹xt
 *
ùx
, 
Lab–SlÙ
 *
ls
, 
ušt32_t
 
addr
, 
size
)

30294 
R–ocEÁry
 *
»
;

30295 
»
 = 
	`js_m®loc
(
ùx
, (*re));

30296 ià(!
»
)

30297  
NULL
;

30298 
»
->
addr
 =‡ddr;

30299 
»
->
size
 = size;

30300 
»
->
Ãxt
 = 
ls
->
fœ¡_»loc
;

30301 
ls
->
fœ¡_»loc
 = 
»
;

30302  
»
;

30303 
	}
}

30305 
BOOL
 
	$code_has_Ïb–
(
CodeCÚ‹xt
 *
s
, 
pos
, 
Ïb–
)

30307 
pos
 < 
s
->
bc_Ën
) {

30308 
İ
 = 
s
->
bc_buf
[
pos
];

30309 ià(
İ
 =ğ
OP_lše_num
) {

30310 
pos
 += 5;

30313 ià(
İ
 =ğ
OP_Ïb–
) {

30314 
Ïb
 = 
	`g‘_u32
(
s
->
bc_buf
 + 
pos
 + 1);

30315 ià(
Ïb
 =ğ
Ïb–
)

30316  
TRUE
;

30317 
pos
 += 5;

30320 ià(
İ
 =ğ
OP_gÙo
) {

30321 
Ïb
 = 
	`g‘_u32
(
s
->
bc_buf
 + 
pos
 + 1);

30322 ià(
Ïb
 =ğ
Ïb–
)

30323  
TRUE
;

30327  
FALSE
;

30328 
	}
}

30333 
	$fšd_jump_rg‘
(
JSFunùiÚDef
 *
s
, 
Ïb–
, *
pİ
, *
¶še
)

30335 
i
, 
pos
, 
İ
;

30337 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

30338 
i
 = 0; i < 10; i++) {

30339 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

30340 
pos
 = 
s
->
Ïb–_¦Ùs
[
Ïb–
].
pos2
;

30342 
İ
 = 
s
->
by‹_code
.
buf
[
pos
]) {

30343 
OP_lše_num
:

30344 ià(
¶še
)

30345 *
¶še
 = 
	`g‘_u32
(
s
->
by‹_code
.
buf
 + 
pos
 + 1);

30347 
OP_Ïb–
:

30348 
pos
 +ğ
İcode_šfo
[
İ
].
size
;

30350 
OP_gÙo
:

30351 
Ïb–
 = 
	`g‘_u32
(
s
->
by‹_code
.
buf
 + 
pos
 + 1);

30353 
OP_drİ
:

30355 
s
->
by‹_code
.
buf
[++
pos
] =ğ
OP_drİ
)

30357 ià(
s
->
by‹_code
.
buf
[
pos
] =ğ
OP_»tuº_undef
)

30358 
İ
 = 
OP_»tuº_undef
;

30361 
dÚe
;

30367 
dÚe
:

30368 *
pİ
 = 
İ
;

30369 
	`upd©e_Ïb–
(
s
, 
Ïb–
, +1);

30370  
Ïb–
;

30371 
	}
}

30373 
	$push_shÜt_št
(
DynBuf
 *
bc_out
, 
v®
)

30375 #ià
SHORT_OPCODES


30376 ià(
v®
 >= -1 && val <= 7) {

30377 
	`dbuf_putc
(
bc_out
, 
OP_push_0
 + 
v®
);

30380 ià(
v®
 =ğ(
št8_t
)val) {

30381 
	`dbuf_putc
(
bc_out
, 
OP_push_i8
);

30382 
	`dbuf_putc
(
bc_out
, 
v®
);

30385 ià(
v®
 =ğ(
št16_t
)val) {

30386 
	`dbuf_putc
(
bc_out
, 
OP_push_i16
);

30387 
	`dbuf_put_u16
(
bc_out
, 
v®
);

30391 
	`dbuf_putc
(
bc_out
, 
OP_push_i32
);

30392 
	`dbuf_put_u32
(
bc_out
, 
v®
);

30393 
	}
}

30395 
	$put_shÜt_code
(
DynBuf
 *
bc_out
, 
İ
, 
idx
)

30397 #ià
SHORT_OPCODES


30398 ià(
idx
 < 4) {

30399 
İ
) {

30400 
OP_g‘_loc
:

30401 
	`dbuf_putc
(
bc_out
, 
OP_g‘_loc0
 + 
idx
);

30403 
OP_put_loc
:

30404 
	`dbuf_putc
(
bc_out
, 
OP_put_loc0
 + 
idx
);

30406 
OP_£t_loc
:

30407 
	`dbuf_putc
(
bc_out
, 
OP_£t_loc0
 + 
idx
);

30409 
OP_g‘_¬g
:

30410 
	`dbuf_putc
(
bc_out
, 
OP_g‘_¬g0
 + 
idx
);

30412 
OP_put_¬g
:

30413 
	`dbuf_putc
(
bc_out
, 
OP_put_¬g0
 + 
idx
);

30415 
OP_£t_¬g
:

30416 
	`dbuf_putc
(
bc_out
, 
OP_£t_¬g0
 + 
idx
);

30418 
OP_g‘_v¬_»f
:

30419 
	`dbuf_putc
(
bc_out
, 
OP_g‘_v¬_»f0
 + 
idx
);

30421 
OP_put_v¬_»f
:

30422 
	`dbuf_putc
(
bc_out
, 
OP_put_v¬_»f0
 + 
idx
);

30424 
OP_£t_v¬_»f
:

30425 
	`dbuf_putc
(
bc_out
, 
OP_£t_v¬_»f0
 + 
idx
);

30427 
OP_ÿÎ
:

30428 
	`dbuf_putc
(
bc_out
, 
OP_ÿÎ0
 + 
idx
);

30432 ià(
idx
 < 256) {

30433 
İ
) {

30434 
OP_g‘_loc
:

30435 
	`dbuf_putc
(
bc_out
, 
OP_g‘_loc8
);

30436 
	`dbuf_putc
(
bc_out
, 
idx
);

30438 
OP_put_loc
:

30439 
	`dbuf_putc
(
bc_out
, 
OP_put_loc8
);

30440 
	`dbuf_putc
(
bc_out
, 
idx
);

30442 
OP_£t_loc
:

30443 
	`dbuf_putc
(
bc_out
, 
OP_£t_loc8
);

30444 
	`dbuf_putc
(
bc_out
, 
idx
);

30449 
	`dbuf_putc
(
bc_out
, 
İ
);

30450 
	`dbuf_put_u16
(
bc_out
, 
idx
);

30451 
	}
}

30454 
__exû±iÚ
 
	$»sŞve_Ïb–s
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
s
)

30456 
pos
, 
pos_Ãxt
, 
bc_Ën
, 
İ
, 
İ1
, 
Ën
, 
i
, 
lše_num
;

30457 cÚ¡ 
ušt8_t
 *
bc_buf
;

30458 
DynBuf
 
bc_out
;

30459 
Lab–SlÙ
 *
Ïb–_¦Ùs
, *
ls
;

30460 
R–ocEÁry
 *
»
, *
»_Ãxt
;

30461 
CodeCÚ‹xt
 
cc
;

30462 
Ïb–
;

30463 #ià
SHORT_OPCODES


30464 
JumpSlÙ
 *
jp
;

30467 
Ïb–_¦Ùs
 = 
s
->label_slots;

30469 
lše_num
 = 
s
->line_num;

30471 
cc
.
bc_buf
 = bc_buàğ
s
->
by‹_code
.
buf
;

30472 
cc
.
bc_Ën
 = bc_ËÀğ
s
->
by‹_code
.
size
;

30473 
	`js_dbuf_š™
(
ùx
, &
bc_out
);

30475 #ià
SHORT_OPCODES


30476 ià(
s
->
jump_size
) {

30477 
s
->
jump_¦Ùs
 = 
	`js_m®locz
(s->
ùx
, (*s->jump_¦Ùsè* s->
jump_size
);

30478 ià(
s
->
jump_¦Ùs
 =ğ
NULL
)

30483 ià(
s
->
lše_numb”_size
 && !(s->
js_mode
 & 
JS_MODE_STRIP
)) {

30484 
s
->
lše_numb”_¦Ùs
 = 
	`js_m®locz
(s->
ùx
, (*s->lše_numb”_¦Ùsè* s->
lše_numb”_size
);

30485 ià(
s
->
lše_numb”_¦Ùs
 =ğ
NULL
)

30487 
s
->
lše_numb”_Ï¡
 = s->
lše_num
;

30488 
s
->
lše_numb”_Ï¡_pc
 = 0;

30492 ià(
s
->
home_objeù_v¬_idx
 >= 0) {

30493 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30494 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_HOME_OBJECT
);

30495 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
home_objeù_v¬_idx
);

30498 ià(
s
->
this_aùive_func_v¬_idx
 >= 0) {

30499 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30500 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_THIS_FUNC
);

30501 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
this_aùive_func_v¬_idx
);

30504 ià(
s
->
Ãw_rg‘_v¬_idx
 >= 0) {

30505 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30506 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_NEW_TARGET
);

30507 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
Ãw_rg‘_v¬_idx
);

30511 ià(
s
->
this_v¬_idx
 >= 0) {

30512 ià(
s
->
is_d”ived_şass_cÚ¡ruùÜ
) {

30513 
	`dbuf_putc
(&
bc_out
, 
OP_£t_loc_unš™Ÿlized
);

30514 
	`dbuf_put_u16
(&
bc_out
, 
s
->
this_v¬_idx
);

30516 
	`dbuf_putc
(&
bc_out
, 
OP_push_this
);

30517 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
this_v¬_idx
);

30521 ià(
s
->
¬gum’ts_v¬_idx
 >= 0) {

30522 ià((
s
->
js_mode
 & 
JS_MODE_STRICT
è|| !s->
has_sim¶e_·¿m‘”_li¡
) {

30523 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30524 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_ARGUMENTS
);

30526 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30527 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_MAPPED_ARGUMENTS
);

30529 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
¬gum’ts_v¬_idx
);

30532 ià(
s
->
func_v¬_idx
 >= 0) {

30533 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30534 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_THIS_FUNC
);

30535 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
func_v¬_idx
);

30538 ià(
s
->
v¬_objeù_idx
 >= 0) {

30539 
	`dbuf_putc
(&
bc_out
, 
OP_¥ecŸl_objeù
);

30540 
	`dbuf_putc
(&
bc_out
, 
OP_SPECIAL_OBJECT_VAR_OBJECT
);

30541 
	`put_shÜt_code
(&
bc_out
, 
OP_put_loc
, 
s
->
v¬_objeù_idx
);

30544 
pos
 = 0;…o < 
bc_Ën
;…o ğ
pos_Ãxt
) {

30545 
v®
;

30546 
İ
 = 
bc_buf
[
pos
];

30547 
Ën
 = 
İcode_šfo
[
İ
].
size
;

30548 
pos_Ãxt
 = 
pos
 + 
Ën
;

30549 
İ
) {

30550 
OP_lše_num
:

30554 
lše_num
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30557 
OP_Ïb–
:

30559 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30560 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

30561 
ls
 = &
Ïb–_¦Ùs
[
Ïb–
];

30562 
	`as£¹
(
ls
->
addr
 == -1);

30563 
ls
->
addr
 = 
bc_out
.
size
;

30565 
»
 = 
ls
->
fœ¡_»loc
;„!ğ
NULL
;„ğ
»_Ãxt
) {

30566 
diff
 = 
ls
->
addr
 - 
»
->addr;

30567 
»_Ãxt
 = 
»
->
Ãxt
;

30568 
»
->
size
) {

30570 
	`put_u32
(
bc_out
.
buf
 + 
»
->
addr
, 
diff
);

30573 
	`as£¹
(
diff
 =ğ(
št16_t
)diff);

30574 
	`put_u16
(
bc_out
.
buf
 + 
»
->
addr
, 
diff
);

30577 
	`as£¹
(
diff
 =ğ(
št8_t
)diff);

30578 
	`put_u8
(
bc_out
.
buf
 + 
»
->
addr
, 
diff
);

30581 
	`js_ä“
(
ùx
, 
»
);

30583 
ls
->
fœ¡_»loc
 = 
NULL
;

30587 
OP_ÿÎ
:

30588 
OP_ÿÎ_m‘hod
:

30591 
¬gc
;

30592 
¬gc
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

30593 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_»tuº
, -1)) {

30594 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30595 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30596 
	`put_shÜt_code
(&
bc_out
, 
İ
 + 1, 
¬gc
);

30597 
pos_Ãxt
 = 
	`sk_d—d_code
(
s
, 
bc_buf
, 
bc_Ën
, 
cc
.
pos
, &
lše_num
);

30600 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30601 
	`put_shÜt_code
(&
bc_out
, 
İ
, 
¬gc
);

30604 
no_chªge
;

30606 
OP_»tuº
:

30607 
OP_»tuº_undef
:

30608 
OP_»tuº_async
:

30609 
OP_throw
:

30610 
OP_throw_v¬
:

30611 
pos_Ãxt
 = 
	`sk_d—d_code
(
s
, 
bc_buf
, 
bc_Ën
,…os_Ãxt, &
lše_num
);

30612 
no_chªge
;

30614 
OP_gÙo
:

30615 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30616 
has_gÙo
:

30617 ià(
OPTIMIZE
) {

30618 
lše1
 = -1;

30620 
Ïb–
 = 
	`fšd_jump_rg‘
(
s
,†ab–, &
İ1
, &
lše1
);

30621 ià(
	`code_has_Ïb–
(&
cc
, 
pos_Ãxt
, 
Ïb–
)) {

30623 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

30626 ià(
İ1
 =ğ
OP_»tuº
 || op1 =ğ
OP_»tuº_undef
 || op1 =ğ
OP_throw
) {

30630 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

30631 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30632 
	`dbuf_putc
(&
bc_out
, 
İ1
);

30633 
pos_Ãxt
 = 
	`sk_d—d_code
(
s
, 
bc_buf
, 
bc_Ën
,…os_Ãxt, &
lše_num
);

30643 
has_Ïb–
;

30645 
OP_gosub
:

30646 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30647 ià(0 && 
OPTIMIZE
) {

30648 
Ïb–
 = 
	`fšd_jump_rg‘
(
s
,†ab–, &
İ1
, 
NULL
);

30649 ià(
İ1
 =ğ
OP_»t
) {

30650 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

30655 
has_Ïb–
;

30657 
OP_ÿtch
:

30658 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30659 
has_Ïb–
;

30661 
OP_if_Œue
:

30662 
OP_if_çl£
:

30663 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30664 ià(
OPTIMIZE
) {

30665 
Ïb–
 = 
	`fšd_jump_rg‘
(
s
,†ab–, &
İ1
, 
NULL
);

30667 ià(
	`code_has_Ïb–
(&
cc
, 
pos_Ãxt
, 
Ïb–
)) {

30668 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

30669 
	`dbuf_putc
(&
bc_out
, 
OP_drİ
);

30673 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_gÙo
, -1)) {

30674 
pos1
 = 
cc
.
pos
;

30675 
lše1
 = 
cc
.
lše_num
;

30676 ià(
	`code_has_Ïb–
(&
cc
, 
pos1
, 
Ïb–
)) {

30677 ià(
lše1
 >ğ0è
lše_num
 =†ine1;

30678 
pos_Ãxt
 = 
pos1
;

30679 
	`upd©e_Ïb–
(
s
, 
Ïb–
, -1);

30680 
Ïb–
 = 
cc
.label;

30681 
İ
 ^ğ
OP_if_Œue
 ^ 
OP_if_çl£
;

30685 
has_Ïb–
:

30686 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30687 ià(
İ
 =ğ
OP_gÙo
) {

30688 
pos_Ãxt
 = 
	`sk_d—d_code
(
s
, 
bc_buf
, 
bc_Ën
,…os_Ãxt, &
lše_num
);

30690 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

30691 
ls
 = &
Ïb–_¦Ùs
[
Ïb–
];

30692 #ià
SHORT_OPCODES


30693 
jp
 = &
s
->
jump_¦Ùs
[s->
jump_couÁ
++];

30694 
jp
->
İ
 = op;

30695 
jp
->
size
 = 4;

30696 
jp
->
pos
 = 
bc_out
.
size
 + 1;

30697 
jp
->
Ïb–
 =†abel;

30699 ià(
ls
->
addr
 == -1) {

30700 
diff
 = 
ls
->
pos2
 - 
pos
 - 1;

30701 ià(
diff
 < 128 && (
İ
 =ğ
OP_if_çl£
 || o°=ğ
OP_if_Œue
 || o°=ğ
OP_gÙo
)) {

30702 
jp
->
size
 = 1;

30703 
jp
->
İ
 = 
OP_if_çl£8
 + (İ - 
OP_if_çl£
);

30704 
	`dbuf_putc
(&
bc_out
, 
OP_if_çl£8
 + (
İ
 - 
OP_if_çl£
));

30705 
	`dbuf_putc
(&
bc_out
, 0);

30706 ià(!
	`add_»loc
(
ùx
, 
ls
, 
bc_out
.
size
 - 1, 1))

30707 
ç
;

30710 ià(
diff
 < 32768 && 
İ
 =ğ
OP_gÙo
) {

30711 
jp
->
size
 = 2;

30712 
jp
->
İ
 = 
OP_gÙo16
;

30713 
	`dbuf_putc
(&
bc_out
, 
OP_gÙo16
);

30714 
	`dbuf_put_u16
(&
bc_out
, 0);

30715 ià(!
	`add_»loc
(
ùx
, 
ls
, 
bc_out
.
size
 - 2, 2))

30716 
ç
;

30720 
diff
 = 
ls
->
addr
 - 
bc_out
.
size
 - 1;

30721 ià(
diff
 =ğ(
št8_t
)difà&& (
İ
 =ğ
OP_if_çl£
 || o°=ğ
OP_if_Œue
 || o°=ğ
OP_gÙo
)) {

30722 
jp
->
size
 = 1;

30723 
jp
->
İ
 = 
OP_if_çl£8
 + (İ - 
OP_if_çl£
);

30724 
	`dbuf_putc
(&
bc_out
, 
OP_if_çl£8
 + (
İ
 - 
OP_if_çl£
));

30725 
	`dbuf_putc
(&
bc_out
, 
diff
);

30728 ià(
diff
 =ğ(
št16_t
)difà&& 
İ
 =ğ
OP_gÙo
) {

30729 
jp
->
size
 = 2;

30730 
jp
->
İ
 = 
OP_gÙo16
;

30731 
	`dbuf_putc
(&
bc_out
, 
OP_gÙo16
);

30732 
	`dbuf_put_u16
(&
bc_out
, 
diff
);

30737 
	`dbuf_putc
(&
bc_out
, 
İ
);

30738 
	`dbuf_put_u32
(&
bc_out
, 
ls
->
addr
 - bc_out.
size
);

30739 ià(
ls
->
addr
 == -1) {

30741 ià(!
	`add_»loc
(
ùx
, 
ls
, 
bc_out
.
size
 - 4, 4))

30742 
ç
;

30745 
OP_w™h_g‘_v¬
:

30746 
OP_w™h_put_v¬
:

30747 
OP_w™h_d–‘e_v¬
:

30748 
OP_w™h_make_»f
:

30749 
OP_w™h_g‘_»f
:

30750 
OP_w™h_g‘_»f_undef
:

30752 
JSAtom
 
©om
;

30753 
is_w™h
;

30755 
©om
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30756 
Ïb–
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 5);

30757 
is_w™h
 = 
bc_buf
[
pos
 + 9];

30758 ià(
OPTIMIZE
) {

30759 
Ïb–
 = 
	`fšd_jump_rg‘
(
s
,†ab–, &
İ1
, 
NULL
);

30761 
	`as£¹
(
Ïb–
 >ğ0 &&†ab– < 
s
->
Ïb–_couÁ
);

30762 
ls
 = &
Ïb–_¦Ùs
[
Ïb–
];

30763 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30764 #ià
SHORT_OPCODES


30765 
jp
 = &
s
->
jump_¦Ùs
[s->
jump_couÁ
++];

30766 
jp
->
İ
 = op;

30767 
jp
->
size
 = 4;

30768 
jp
->
pos
 = 
bc_out
.
size
 + 5;

30769 
jp
->
Ïb–
 =†abel;

30771 
	`dbuf_putc
(&
bc_out
, 
İ
);

30772 
	`dbuf_put_u32
(&
bc_out
, 
©om
);

30773 
	`dbuf_put_u32
(&
bc_out
, 
ls
->
addr
 - bc_out.
size
);

30774 ià(
ls
->
addr
 == -1) {

30776 ià(!
	`add_»loc
(
ùx
, 
ls
, 
bc_out
.
size
 - 4, 4))

30777 
ç
;

30779 
	`dbuf_putc
(&
bc_out
, 
is_w™h
);

30783 
OP_drİ
:

30784 ià(
OPTIMIZE
) {

30786 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_»tuº_undef
, -1)) {

30787 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30791 
no_chªge
;

30793 
OP_nuÎ
:

30794 #ià
SHORT_OPCODES


30795 ià(
OPTIMIZE
) {

30797 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_¡riù_eq
, -1)) {

30798 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30799 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30800 
	`dbuf_putc
(&
bc_out
, 
OP_is_nuÎ
);

30801 
pos_Ãxt
 = 
cc
.
pos
;

30805 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_¡riù_Ãq
, 
	`M2
(
OP_if_çl£
, 
OP_if_Œue
), -1)) {

30806 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30807 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30808 
	`dbuf_putc
(&
bc_out
, 
OP_is_nuÎ
);

30809 
pos_Ãxt
 = 
cc
.
pos
;

30810 
Ïb–
 = 
cc
.label;

30811 
İ
 = 
cc
.İ ^ 
OP_if_çl£
 ^ 
OP_if_Œue
;

30812 
has_Ïb–
;

30817 
OP_push_çl£
:

30818 
OP_push_Œue
:

30819 ià(
OPTIMIZE
) {

30820 
v®
 = (
İ
 =ğ
OP_push_Œue
);

30821 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_if_çl£
, 
OP_if_Œue
), -1)) {

30822 
has_cÚ¡ªt_‹¡
:

30823 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30824 ià(
v®
 =ğ
cc
.
İ
 - 
OP_if_çl£
) {

30828 
pos_Ãxt
 = 
cc
.
pos
;

30829 
İ
 = 
OP_gÙo
;

30830 
Ïb–
 = 
cc
.label;

30831 
has_gÙo
;

30836 
pos_Ãxt
 = 
cc
.
pos
;

30837 
	`upd©e_Ïb–
(
s
, 
cc
.
Ïb–
, -1);

30842 
no_chªge
;

30844 
OP_push_i32
:

30845 ià(
OPTIMIZE
) {

30847 
v®
 = 
	`g‘_i32
(
bc_buf
 + 
pos
 + 1);

30848 ià((
v®
 !ğ
INT32_MIN
 && val != 0)

30849 && 
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_Ãg
, -1)) {

30850 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30851 ià(
	`code_m©ch
(&
cc
, cc.
pos
, 
OP_drİ
, -1)) {

30852 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30854 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30855 
	`push_shÜt_št
(&
bc_out
, -
v®
);

30857 
pos_Ãxt
 = 
cc
.
pos
;

30861 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_drİ
, -1)) {

30862 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30863 
pos_Ãxt
 = 
cc
.
pos
;

30867 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_if_çl£
, 
OP_if_Œue
), -1)) {

30868 
v®
 = (val != 0);

30869 
has_cÚ¡ªt_‹¡
;

30871 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30872 
	`push_shÜt_št
(&
bc_out
, 
v®
);

30875 
no_chªge
;

30877 #ià
SHORT_OPCODES


30878 
OP_push_cÚ¡
:

30879 
OP_fşosu»
:

30880 ià(
OPTIMIZE
) {

30881 
idx
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30882 ià(
idx
 < 256) {

30883 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30884 
	`dbuf_putc
(&
bc_out
, 
OP_push_cÚ¡8
 + 
İ
 - 
OP_push_cÚ¡
);

30885 
	`dbuf_putc
(&
bc_out
, 
idx
);

30889 
no_chªge
;

30891 
OP_g‘_f›ld
:

30892 ià(
OPTIMIZE
) {

30893 
JSAtom
 
©om
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30894 ià(
©om
 =ğ
JS_ATOM_Ëngth
) {

30895 
	`JS_F»eAtom
(
ùx
, 
©om
);

30896 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30897 
	`dbuf_putc
(&
bc_out
, 
OP_g‘_Ëngth
);

30901 
no_chªge
;

30903 
OP_push_©om_v®ue
:

30904 ià(
OPTIMIZE
) {

30905 
JSAtom
 
©om
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

30907 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_drİ
, -1)) {

30908 
	`JS_F»eAtom
(
ùx
, 
©om
);

30909 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30910 
pos_Ãxt
 = 
cc
.
pos
;

30913 #ià
SHORT_OPCODES


30914 ià(
©om
 =ğ
JS_ATOM_em±y_¡ršg
) {

30915 
	`JS_F»eAtom
(
ùx
, 
©om
);

30916 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30917 
	`dbuf_putc
(&
bc_out
, 
OP_push_em±y_¡ršg
);

30922 
no_chªge
;

30924 
OP_to_´İkey
:

30925 
OP_to_´İkey2
:

30926 ià(
OPTIMIZE
) {

30928 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M3
(
OP_g‘_loc
, 
OP_g‘_¬g
, 
OP_g‘_v¬_»f
), -1, 
OP_put_¬¿y_–
, -1)

30929 || 
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M3
(
OP_push_i32
, 
OP_push_cÚ¡
, 
OP_push_©om_v®ue
), 
OP_put_¬¿y_–
, -1)

30930 || 
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M4
(
OP_undefšed
, 
OP_nuÎ
, 
OP_push_Œue
, 
OP_push_çl£
), 
OP_put_¬¿y_–
, -1)) {

30934 
no_chªge
;

30936 
OP_undefšed
:

30937 ià(
OPTIMIZE
) {

30939 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_drİ
, -1)) {

30940 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30941 
pos_Ãxt
 = 
cc
.
pos
;

30945 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_»tuº
, -1)) {

30946 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30947 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30948 
	`dbuf_putc
(&
bc_out
, 
OP_»tuº_undef
);

30949 
pos_Ãxt
 = 
cc
.
pos
;

30953 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_if_çl£
, 
OP_if_Œue
), -1)) {

30954 
v®
 = 0;

30955 
has_cÚ¡ªt_‹¡
;

30957 #ià
SHORT_OPCODES


30959 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_¡riù_eq
, -1)) {

30960 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30961 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30962 
	`dbuf_putc
(&
bc_out
, 
OP_is_undefšed
);

30963 
pos_Ãxt
 = 
cc
.
pos
;

30967 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_¡riù_Ãq
, 
	`M2
(
OP_if_çl£
, 
OP_if_Œue
), -1)) {

30968 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30969 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30970 
	`dbuf_putc
(&
bc_out
, 
OP_is_undefšed
);

30971 
pos_Ãxt
 = 
cc
.
pos
;

30972 
Ïb–
 = 
cc
.label;

30973 
İ
 = 
cc
.İ ^ 
OP_if_çl£
 ^ 
OP_if_Œue
;

30974 
has_Ïb–
;

30978 
no_chªge
;

30980 
OP_š£¹2
:

30981 ià(
OPTIMIZE
) {

30986 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_put_f›ld
, 
OP_put_v¬_¡riù
), 
OP_drİ
, -1)) {

30987 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

30988 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

30989 
	`dbuf_putc
(&
bc_out
, 
cc
.
İ
);

30990 
	`dbuf_put_u32
(&
bc_out
, 
cc
.
©om
);

30991 
pos_Ãxt
 = 
cc
.
pos
;

30995 
no_chªge
;

30997 
OP_dup
:

30998 ià(
OPTIMIZE
) {

31000 
İ1
, 
lše2
 = -1;

31002 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M3
(
OP_put_loc
, 
OP_put_¬g
, 
OP_put_v¬_»f
), -1, -1)) {

31003 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31004 
İ1
 = 
cc
.
İ
 + 1;

31005 
pos_Ãxt
 = 
cc
.
pos
;

31006 ià(
	`code_m©ch
(&
cc
, cc.
pos
, 
OP_drİ
, -1)) {

31007 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31008 
İ1
 -= 1;

31009 
pos_Ãxt
 = 
cc
.
pos
;

31010 ià(
	`code_m©ch
(&
cc
, cc.
pos
, 
İ1
 - 1, cc.
idx
, -1)) {

31011 
lše2
 = 
cc
.
lše_num
;

31012 
İ1
 += 1;

31013 
pos_Ãxt
 = 
cc
.
pos
;

31016 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31017 
	`put_shÜt_code
(&
bc_out
, 
İ1
, 
cc
.
idx
);

31018 ià(
lše2
 >ğ0è
lše_num
 =†ine2;

31022 
no_chªge
;

31024 
OP_g‘_loc
:

31025 ià(
OPTIMIZE
) {

31032 
idx
;

31033 
idx
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

31034 ià(
idx
 >= 256)

31035 
no_chªge
;

31036 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_po¡_dec
, 
OP_po¡_šc
), 
OP_put_loc
, 
idx
, 
OP_drİ
, -1) ||

31037 
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M2
(
OP_dec
, 
OP_šc
), 
OP_dup
, 
OP_put_loc
, 
idx
, 
OP_drİ
, -1)) {

31038 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31039 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31040 
	`dbuf_putc
(&
bc_out
, (
cc
.
İ
 =ğ
OP_šc
 || cc.İ =ğ
OP_po¡_šc
è? 
OP_šc_loc
 : 
OP_dec_loc
);

31041 
	`dbuf_putc
(&
bc_out
, 
idx
);

31042 
pos_Ãxt
 = 
cc
.
pos
;

31048 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_push_©om_v®ue
, 
OP_add
, 
OP_dup
, 
OP_put_loc
, 
idx
, 
OP_drİ
, -1)) {

31049 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31050 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31051 #ià
SHORT_OPCODES


31052 ià(
cc
.
©om
 =ğ
JS_ATOM_em±y_¡ršg
) {

31053 
	`JS_F»eAtom
(
ùx
, 
cc
.
©om
);

31054 
	`dbuf_putc
(&
bc_out
, 
OP_push_em±y_¡ršg
);

31058 
	`dbuf_putc
(&
bc_out
, 
OP_push_©om_v®ue
);

31059 
	`dbuf_put_u32
(&
bc_out
, 
cc
.
©om
);

31061 
	`dbuf_putc
(&
bc_out
, 
OP_add_loc
);

31062 
	`dbuf_putc
(&
bc_out
, 
idx
);

31063 
pos_Ãxt
 = 
cc
.
pos
;

31069 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_push_i32
, 
OP_add
, 
OP_dup
, 
OP_put_loc
, 
idx
, 
OP_drİ
, -1)) {

31070 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31071 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31072 
	`push_shÜt_št
(&
bc_out
, 
cc
.
Ïb–
);

31073 
	`dbuf_putc
(&
bc_out
, 
OP_add_loc
);

31074 
	`dbuf_putc
(&
bc_out
, 
idx
);

31075 
pos_Ãxt
 = 
cc
.
pos
;

31083 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M3
(
OP_g‘_loc
, 
OP_g‘_¬g
, 
OP_g‘_v¬_»f
), -1, 
OP_add
, 
OP_dup
, 
OP_put_loc
, 
idx
, 
OP_drİ
, -1)) {

31084 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31085 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31086 
	`put_shÜt_code
(&
bc_out
, 
cc
.
İ
, cc.
idx
);

31087 
	`dbuf_putc
(&
bc_out
, 
OP_add_loc
);

31088 
	`dbuf_putc
(&
bc_out
, 
idx
);

31089 
pos_Ãxt
 = 
cc
.
pos
;

31092 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31093 
	`put_shÜt_code
(&
bc_out
, 
İ
, 
idx
);

31096 
no_chªge
;

31097 #ià
SHORT_OPCODES


31098 
OP_g‘_¬g
:

31099 
OP_g‘_v¬_»f
:

31100 ià(
OPTIMIZE
) {

31101 
idx
;

31102 
idx
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

31103 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31104 
	`put_shÜt_code
(&
bc_out
, 
İ
, 
idx
);

31107 
no_chªge
;

31109 
OP_put_loc
:

31110 
OP_put_¬g
:

31111 
OP_put_v¬_»f
:

31112 ià(
OPTIMIZE
) {

31114 
idx
;

31115 
idx
 = 
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

31116 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
İ
 - 1, 
idx
, -1)) {

31117 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31118 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31119 
	`put_shÜt_code
(&
bc_out
, 
İ
 + 1, 
idx
);

31120 
pos_Ãxt
 = 
cc
.
pos
;

31123 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31124 
	`put_shÜt_code
(&
bc_out
, 
İ
, 
idx
);

31127 
no_chªge
;

31129 
OP_po¡_šc
:

31130 
OP_po¡_dec
:

31131 ià(
OPTIMIZE
) {

31138 
İ1
, 
idx
;

31139 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
	`M3
(
OP_put_loc
, 
OP_put_¬g
, 
OP_put_v¬_»f
), -1, 
OP_drİ
, -1)) {

31140 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31141 
İ1
 = 
cc
.
İ
;

31142 
idx
 = 
cc
.idx;

31143 
pos_Ãxt
 = 
cc
.
pos
;

31144 ià(
	`code_m©ch
(&
cc
, cc.
pos
, 
İ1
 - 1, 
idx
, -1)) {

31145 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31146 
İ1
 += 1;

31147 
pos_Ãxt
 = 
cc
.
pos
;

31149 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31150 
	`dbuf_putc
(&
bc_out
, 
OP_dec
 + (
İ
 - 
OP_po¡_dec
));

31151 
	`put_shÜt_code
(&
bc_out
, 
İ1
, 
idx
);

31154 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_³rm3
, 
	`M2
(
OP_put_f›ld
, 
OP_put_v¬_¡riù
), 
OP_drİ
, -1)) {

31155 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31156 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31157 
	`dbuf_putc
(&
bc_out
, 
OP_dec
 + (
İ
 - 
OP_po¡_dec
));

31158 
	`dbuf_putc
(&
bc_out
, 
cc
.
İ
);

31159 
	`dbuf_put_u32
(&
bc_out
, 
cc
.
©om
);

31160 
pos_Ãxt
 = 
cc
.
pos
;

31163 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_³rm4
, 
OP_put_¬¿y_–
, 
OP_drİ
, -1)) {

31164 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31165 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31166 
	`dbuf_putc
(&
bc_out
, 
OP_dec
 + (
İ
 - 
OP_po¡_dec
));

31167 
	`dbuf_putc
(&
bc_out
, 
OP_put_¬¿y_–
);

31168 
pos_Ãxt
 = 
cc
.
pos
;

31172 
no_chªge
;

31174 
OP_ty³of
:

31175 ià(
OPTIMIZE
) {

31177 ià(
	`code_m©ch
(&
cc
, 
pos_Ãxt
, 
OP_push_©om_v®ue
, 
	`M4
(
OP_¡riù_eq
, 
OP_¡riù_Ãq
, 
OP_eq
, 
OP_Ãq
), -1)) {

31178 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31179 
İ1
 = (
cc
.
İ
 =ğ
OP_¡riù_eq
 || cc.İ =ğ
OP_eq
è? OP_¡riù_eq : 
OP_¡riù_Ãq
;

31180 #ià
SHORT_OPCODES


31181 
İ2
 = -1;

31182 
cc
.
©om
) {

31183 
JS_ATOM_undefšed
:

31184 
İ2
 = 
OP_is_undefšed
;

31186 
JS_ATOM_funùiÚ
:

31187 
İ2
 = 
OP_is_funùiÚ
;

31190 ià(
İ2
 >= 0) {

31192 ià(
İ1
 =ğ
OP_¡riù_eq
) {

31193 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31194 
	`dbuf_putc
(&
bc_out
, 
İ2
);

31195 
	`JS_F»eAtom
(
ùx
, 
cc
.
©om
);

31196 
pos_Ãxt
 = 
cc
.
pos
;

31199 ià(
İ1
 =ğ
OP_¡riù_Ãq
 && 
	`code_m©ch
(&
cc
, cc.
pos
, 
OP_if_çl£
, -1)) {

31201 ià(
cc
.
lše_num
 >= 0)†ine_num = cc.line_num;

31202 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31203 
	`dbuf_putc
(&
bc_out
, 
İ2
);

31204 
	`JS_F»eAtom
(
ùx
, 
cc
.
©om
);

31205 
pos_Ãxt
 = 
cc
.
pos
;

31206 
Ïb–
 = 
cc
.label;

31207 
İ
 = 
OP_if_Œue
;

31208 
has_Ïb–
;

31212 ià(
cc
.
©om
 =ğ
JS_ATOM_undefšed
) {

31214 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31215 
	`dbuf_putc
(&
bc_out
, 
OP_undefšed
);

31216 
	`dbuf_putc
(&
bc_out
, 
İ1
);

31217 
	`JS_F»eAtom
(
ùx
, 
cc
.
©om
);

31218 
pos_Ãxt
 = 
cc
.
pos
;

31223 
no_chªge
;

31226 
no_chªge
:

31227 
	`add_pc2lše_šfo
(
s
, 
bc_out
.
size
, 
lše_num
);

31228 
	`dbuf_put
(&
bc_out
, 
bc_buf
 + 
pos
, 
Ën
);

31234 
i
 = 0; i < 
s
->
Ïb–_couÁ
; i++) {

31235 
	`as£¹
(
Ïb–_¦Ùs
[
i
].
fœ¡_»loc
 =ğ
NULL
);

31237 #ià
SHORT_OPCODES


31238 ià(
OPTIMIZE
) {

31240 
·tch_off£ts
 = 0;

31241 
i
 = 0, 
jp
 = 
s
->
jump_¦Ùs
; i < s->
jump_couÁ
; i++, jp++) {

31242 
Lab–SlÙ
 *
ls
;

31243 
JumpSlÙ
 *
jp1
;

31244 
j
, 
pos
, 
diff
, 
d–
;

31246 
d–
 = 3;

31247 
İ
 = 
jp
->op) {

31248 
OP_gÙo16
:

31249 
d–
 = 1;

31251 
OP_if_çl£
:

31252 
OP_if_Œue
:

31253 
OP_gÙo
:

31254 
pos
 = 
jp
->pos;

31255 
diff
 = 
s
->
Ïb–_¦Ùs
[
jp
->
Ïb–
].
addr
 - 
pos
;

31256 ià(
diff
 >ğ-128 && difà<ğ127 + 
d–
) {

31258 
jp
->
size
 = 1;

31259 ià(
İ
 =ğ
OP_gÙo16
) {

31260 
bc_out
.
buf
[
pos
 - 1] = 
jp
->
İ
 = 
OP_gÙo8
;

31262 
bc_out
.
buf
[
pos
 - 1] = 
jp
->
İ
 = 
OP_if_çl£8
 + (İ - 
OP_if_çl£
);

31264 
shršk
;

31266 ià(
diff
 =ğ(
št16_t
)difà&& 
İ
 =ğ
OP_gÙo
) {

31268 
jp
->
size
 = 2;

31269 
d–
 = 2;

31270 
bc_out
.
buf
[
pos
 - 1] = 
jp
->
İ
 = 
OP_gÙo16
;

31271 
shršk
:

31273 
	`memmove
(
bc_out
.
buf
 + 
pos
 + 
jp
->
size
, bc_out.buà+…o + jp->siz+ 
d–
,

31274 
bc_out
.
size
 - 
pos
 - 
jp
->siz- 
d–
);

31275 
bc_out
.
size
 -ğ
d–
;

31276 
·tch_off£ts
++;

31277 
j
 = 0, 
ls
 = 
s
->
Ïb–_¦Ùs
; j < s->
Ïb–_couÁ
; j++,†s++) {

31278 ià(
ls
->
addr
 > 
pos
)

31279 
ls
->
addr
 -ğ
d–
;

31281 
j
 = 
i
 + 1, 
jp1
 = 
jp
 + 1; j < 
s
->
jump_couÁ
; j++, jp1++) {

31282 ià(
jp1
->
pos
 >…os)

31283 
jp1
->
pos
 -ğ
d–
;

31285 
j
 = 0; j < 
s
->
lše_numb”_couÁ
; j++) {

31286 ià(
s
->
lše_numb”_¦Ùs
[
j
].
pc
 > 
pos
)

31287 
s
->
lše_numb”_¦Ùs
[
j
].
pc
 -ğ
d–
;

31294 ià(
·tch_off£ts
) {

31295 
JumpSlÙ
 *
jp1
;

31296 
j
;

31297 
j
 = 0, 
jp1
 = 
s
->
jump_¦Ùs
; j < s->
jump_couÁ
; j++, jp1++) {

31298 
diff1
 = 
s
->
Ïb–_¦Ùs
[
jp1
->
Ïb–
].
addr
 - jp1->
pos
;

31299 
jp1
->
size
) {

31301 
	`put_u8
(
bc_out
.
buf
 + 
jp1
->
pos
, 
diff1
);

31304 
	`put_u16
(
bc_out
.
buf
 + 
jp1
->
pos
, 
diff1
);

31307 
	`put_u32
(
bc_out
.
buf
 + 
jp1
->
pos
, 
diff1
);

31313 
	`js_ä“
(
ùx
, 
s
->
jump_¦Ùs
);

31314 
s
->
jump_¦Ùs
 = 
NULL
;

31316 
	`js_ä“
(
ùx
, 
s
->
Ïb–_¦Ùs
);

31317 
s
->
Ïb–_¦Ùs
 = 
NULL
;

31319 
	`compu‹_pc2lše_šfo
(
s
);

31320 
	`js_ä“
(
ùx
, 
s
->
lše_numb”_¦Ùs
);

31321 
s
->
lše_numb”_¦Ùs
 = 
NULL
;

31323 
	`dbuf_ä“
(&
s
->
by‹_code
);

31324 
s
->
by‹_code
 = 
bc_out
;

31325 
s
->
u£_shÜt_İcodes
 = 
TRUE
;

31326 ià(
	`dbuf_”rÜ
(&
s
->
by‹_code
)) {

31327 
	`JS_ThrowOutOfMemÜy
(
ùx
);

31331 
ç
:

31333 
	`dbuf_ä“
(&
bc_out
);

31335 
	}
}

31339 
	sSckSizeS‹
 {

31340 
	m¡ack_Ën_max
;

31341 
ušt16_t
 *
	m¡ack_Ëv–_b
;

31342 } 
	tSckSizeS‹
;

31344 
__exû±iÚ
 
	$compu‹_¡ack_size_»c
(
JSCÚ‹xt
 *
ùx
,

31345 
JSFunùiÚDef
 *
fd
,

31346 
SckSizeS‹
 *
s
,

31347 
pos
, 
İ
, 
¡ack_Ën
)

31349 
bc_Ën
, 
diff
, 
n_pİ
, 
pos_Ãxt
;

31350 cÚ¡ 
JSOpCode
 *
oi
;

31351 cÚ¡ 
ušt8_t
 *
bc_buf
;

31353 ià(
¡ack_Ën
 > 
s
->
¡ack_Ën_max
) {

31354 
s
->
¡ack_Ën_max
 = 
¡ack_Ën
;

31355 ià(
s
->
¡ack_Ën_max
 > 
JS_STACK_SIZE_MAX
)

31356 
¡ack_ov”æow
;

31358 
bc_buf
 = 
fd
->
by‹_code
.
buf
;

31359 
bc_Ën
 = 
fd
->
by‹_code
.
size
;

31361 ià(()
pos
 >ğ
bc_Ën
)

31362 
buf_ov”æow
;

31364 
	`´štf
("%5d: %d\n", 
pos
, 
¡ack_Ën
);

31366 ià(
s
->
¡ack_Ëv–_b
[
pos
] != 0xffff) {

31368 ià(
s
->
¡ack_Ëv–_b
[
pos
] !ğ
¡ack_Ën
) {

31369 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "unconsistent stack size: %d %d (pc=%d)",

31370 
s
->
¡ack_Ëv–_b
[
pos
], 
¡ack_Ën
,…os);

31376 
s
->
¡ack_Ëv–_b
[
pos
] = 
¡ack_Ën
;

31379 
İ
 = 
bc_buf
[
pos
];

31380 ià(
İ
 =ğ0 || o°>ğ
OP_COUNT
) {

31381 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "šv®id opcod(İ=%d,…c=%d)", 
İ
, 
pos
);

31384 
oi
 = &
	`shÜt_İcode_šfo
(
İ
);

31385 
pos_Ãxt
 = 
pos
 + 
oi
->
size
;

31386 ià(
pos_Ãxt
 > 
bc_Ën
) {

31387 
buf_ov”æow
:

31388 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "by‹codbufã¸ov”æow (İ=%d,…c=%d)", 
İ
, 
pos
);

31391 
n_pİ
 = 
oi
->n_pop;

31393 ià(
oi
->
fmt
 =ğ
OP_FMT_Åİ
 || oi->fmˆ=ğ
OP_FMT_Åİ_u16
) {

31394 
n_pİ
 +ğ
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

31396 #ià
SHORT_OPCODES


31397 ià(
oi
->
fmt
 =ğ
OP_FMT_Åİx
) {

31398 
n_pİ
 +ğ
İ
 - 
OP_ÿÎ0
;

31403 ià(
¡ack_Ën
 < 
n_pİ
) {

31404 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "¡ack und”æow (İ=%d,…c=%d)", 
İ
, 
pos
);

31407 
¡ack_Ën
 +ğ
oi
->
n_push
 - 
n_pİ
;

31408 ià(
¡ack_Ën
 > 
s
->
¡ack_Ën_max
) {

31409 
s
->
¡ack_Ën_max
 = 
¡ack_Ën
;

31410 ià(
s
->
¡ack_Ën_max
 > 
JS_STACK_SIZE_MAX
)

31411 
¡ack_ov”æow
;

31413 
İ
) {

31414 
OP__ÿÎ
:

31415 
OP__ÿÎ_m‘hod
:

31416 
OP_»tuº
:

31417 
OP_»tuº_undef
:

31418 
OP_»tuº_async
:

31419 
OP_throw
:

31420 
OP_throw_v¬
:

31421 
OP_»t
:

31422 
dÚe
;

31423 
OP_gÙo
:

31424 
diff
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

31425 
pos_Ãxt
 = 
pos
 + 1 + 
diff
;

31427 #ià
SHORT_OPCODES


31428 
OP_gÙo16
:

31429 
diff
 = (
št16_t
)
	`g‘_u16
(
bc_buf
 + 
pos
 + 1);

31430 
pos_Ãxt
 = 
pos
 + 1 + 
diff
;

31432 
OP_gÙo8
:

31433 
diff
 = (
št8_t
)
bc_buf
[
pos
 + 1];

31434 
pos_Ãxt
 = 
pos
 + 1 + 
diff
;

31436 
OP_if_Œue8
:

31437 
OP_if_çl£8
:

31438 
diff
 = (
št8_t
)
bc_buf
[
pos
 + 1];

31439 ià(
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 
pos
 + 1 + 
diff
, 
İ
, 
¡ack_Ën
))

31443 
OP_if_Œue
:

31444 
OP_if_çl£
:

31445 
OP_ÿtch
:

31446 
diff
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

31447 ià(
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 
pos
 + 1 + 
diff
, 
İ
, 
¡ack_Ën
))

31450 
OP_gosub
:

31451 
diff
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

31452 ià(
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 
pos
 + 1 + 
diff
, 
İ
, 
¡ack_Ën
 + 1))

31455 
OP_w™h_g‘_v¬
:

31456 
OP_w™h_d–‘e_v¬
:

31457 
diff
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 5);

31458 ià(
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 
pos
 + 5 + 
diff
, 
İ
, 
¡ack_Ën
 + 1))

31461 
OP_w™h_make_»f
:

31462 
OP_w™h_g‘_»f
:

31463 
OP_w™h_g‘_»f_undef
:

31464 
diff
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 5);

31465 ià(
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 
pos
 + 5 + 
diff
, 
İ
, 
¡ack_Ën
 + 2))

31468 
OP_w™h_put_v¬
:

31469 
diff
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 5);

31470 ià(
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 
pos
 + 5 + 
diff
, 
İ
, 
¡ack_Ën
 - 1))

31477 
pos
 = 
pos_Ãxt
;

31479 
dÚe
:

31482 
¡ack_ov”æow
:

31483 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "¡ack ov”æow (İ=%d,…c=%d)", 
İ
, 
pos
);

31485 
	}
}

31487 
__exû±iÚ
 
	$compu‹_¡ack_size
(
JSCÚ‹xt
 *
ùx
,

31488 
JSFunùiÚDef
 *
fd
,

31489 *
p¡ack_size
)

31491 
SckSizeS‹
 
s_s
, *
s
 = &s_s;

31492 
bc_Ën
, 
i
, 
»t
;

31494 
bc_Ën
 = 
fd
->
by‹_code
.
size
;

31496 
s
->
¡ack_Ëv–_b
 = 
	`js_m®loc
(
ùx
, (s->¡ack_Ëv–_b[0]è* 
bc_Ën
);

31497 ià(!
s
->
¡ack_Ëv–_b
)

31499 
i
 = 0; i < 
bc_Ën
; i++)

31500 
s
->
¡ack_Ëv–_b
[
i
] = 0xffff;

31501 
s
->
¡ack_Ën_max
 = 0;

31502 
»t
 = 
	`compu‹_¡ack_size_»c
(
ùx
, 
fd
, 
s
, 0, 
OP_šv®id
, 0);

31503 
	`js_ä“
(
ùx
, 
s
->
¡ack_Ëv–_b
);

31504 *
p¡ack_size
 = 
s
->
¡ack_Ën_max
;

31505  
»t
;

31506 
	}
}

31508 
	$add_moduË_v¬ŸbËs
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
)

31510 
i
, 
idx
;

31511 
JSModuËDef
 *
m
 = 
fd
->
moduË
;

31512 
JSExpÜtEÁry
 *
me
;

31513 
JSHoi¡edDef
 *
hf
;

31519 
i
 = 0; i < 
fd
->
hoi¡ed_def_couÁ
; i++) {

31520 
hf
 = &
fd
->
hoi¡ed_def
[
i
];

31521 ià(
	`add_şosu»_v¬
(
ùx
, 
fd
, 
TRUE
, 
FALSE
, 
i
, 
hf
->
v¬_Çme
, hf->
is_cÚ¡
,

31522 
hf
->
is_Ëxiÿl
, 
FALSE
) < 0)

31527 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

31528 
me
 = &
m
->
expÜt_’Œ›s
[
i
];

31529 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
) {

31530 
idx
 = 
	`fšd_şosu»_v¬
(
ùx
, 
fd
, 
me
->
loÿl_Çme
);

31531 ià(
idx
 < 0) {

31532 
buf1
[
ATOM_GET_STR_BUF_SIZE
];

31533 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "exported variable '%s' does‚otƒxist",

31534 
	`JS_AtomG‘SŒ
(
ùx
, 
buf1
, (buf1), 
me
->
loÿl_Çme
));

31537 
me
->
u
.
loÿl
.
v¬_idx
 = 
idx
;

31541 
	}
}

31546 
JSV®ue
 
	$js_ü—‹_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSFunùiÚDef
 *
fd
)

31548 
JSV®ue
 
func_obj
;

31549 
JSFunùiÚBy‹code
 *
b
;

31550 
li¡_h—d
 *
–
, *
–1
;

31551 
¡ack_size
, 
scİe
, 
idx
;

31552 
funùiÚ_size
, 
by‹_code_off£t
, 
ıoŞ_off£t
;

31553 
şosu»_v¬_off£t
, 
v¬defs_off£t
;

31556 
scİe
 = 0; scİ< 
fd
->
scİe_couÁ
; scope++) {

31557 
fd
->
scİes
[
scİe
].
fœ¡
 = -1;

31559 
idx
 = 0; idx < 
fd
->
v¬_couÁ
; idx++) {

31560 
JSV¬Def
 *
vd
 = &
fd
->
v¬s
[
idx
];

31561 
vd
->
scİe_Ãxt
 = 
fd
->
scİes
[vd->
scİe_Ëv–
].
fœ¡
;

31562 
fd
->
scİes
[
vd
->
scİe_Ëv–
].
fœ¡
 = 
idx
;

31564 
scİe
 = 2; scİ< 
fd
->
scİe_couÁ
; scope++) {

31565 
JSV¬Scİe
 *
sd
 = &
fd
->
scİes
[
scİe
];

31566 ià(
sd
->
fœ¡
 == -1)

31567 
sd
->
fœ¡
 = 
fd
->
scİes
[sd->
·»Á
].first;

31569 
idx
 = 0; idx < 
fd
->
v¬_couÁ
; idx++) {

31570 
JSV¬Def
 *
vd
 = &
fd
->
v¬s
[
idx
];

31571 ià(
vd
->
scİe_Ãxt
 =ğ-1 && vd->
scİe_Ëv–
 > 1) {

31572 
scİe
 = 
fd
->
scİes
[
vd
->
scİe_Ëv–
].
·»Á
;

31573 
vd
->
scİe_Ãxt
 = 
fd
->
scİes
[
scİe
].
fœ¡
;

31581 ià(
fd
->
has_ev®_ÿÎ
)

31582 
	`add_ev®_v¬ŸbËs
(
ùx
, 
fd
);

31585 ià(
fd
->
moduË
) {

31586 ià(
	`add_moduË_v¬ŸbËs
(
ùx
, 
fd
))

31587 
ç
;

31591 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
fd
->
chd_li¡
) {

31592 
JSFunùiÚDef
 *
fd1
;

31593 
ıoŞ_idx
;

31595 
fd1
 = 
	`li¡_’Œy
(
–
, 
JSFunùiÚDef
, 
lšk
);

31596 
ıoŞ_idx
 = 
fd1
->
·»Á_ıoŞ_idx
;

31597 
func_obj
 = 
	`js_ü—‹_funùiÚ
(
ùx
, 
fd1
);

31598 ià(
	`JS_IsExû±iÚ
(
func_obj
))

31599 
ç
;

31601 
	`as£¹
(
ıoŞ_idx
 >= 0);

31602 
fd
->
ıoŞ
[
ıoŞ_idx
] = 
func_obj
;

31605 #ià
	`defšed
(
DUMP_BYTECODE
) && (DUMP_BYTECODE & 4)

31606 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
)) {

31607 
	`´štf
("pass 1\n");

31608 
	`dump_by‹_code
(
ùx
, 1, 
fd
->
by‹_code
.
buf
, fd->by‹_code.
size
,

31609 
fd
->
¬gs
, fd->
¬g_couÁ
, fd->
v¬s
, fd->
v¬_couÁ
,

31610 
fd
->
şosu»_v¬
, fd->
şosu»_v¬_couÁ
,

31611 
fd
->
ıoŞ
, fd->
ıoŞ_couÁ
, fd->
sourû
, fd->
lše_num
,

31612 
fd
->
Ïb–_¦Ùs
, 
NULL
);

31613 
	`´štf
("\n");

31617 ià(
	`»sŞve_v¬ŸbËs
(
ùx
, 
fd
))

31618 
ç
;

31620 #ià
	`defšed
(
DUMP_BYTECODE
) && (DUMP_BYTECODE & 2)

31621 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
)) {

31622 
	`´štf
("pass 2\n");

31623 
	`dump_by‹_code
(
ùx
, 2, 
fd
->
by‹_code
.
buf
, fd->by‹_code.
size
,

31624 
fd
->
¬gs
, fd->
¬g_couÁ
, fd->
v¬s
, fd->
v¬_couÁ
,

31625 
fd
->
şosu»_v¬
, fd->
şosu»_v¬_couÁ
,

31626 
fd
->
ıoŞ
, fd->
ıoŞ_couÁ
, fd->
sourû
, fd->
lše_num
,

31627 
fd
->
Ïb–_¦Ùs
, 
NULL
);

31628 
	`´štf
("\n");

31632 ià(
	`»sŞve_Ïb–s
(
ùx
, 
fd
))

31633 
ç
;

31635 ià(
	`compu‹_¡ack_size
(
ùx
, 
fd
, &
¡ack_size
) < 0)

31636 
ç
;

31638 ià(
fd
->
js_mode
 & 
JS_MODE_STRIP
) {

31639 
funùiÚ_size
 = 
	`off£tof
(
JSFunùiÚBy‹code
, 
debug
);

31641 
funùiÚ_size
 = (*
b
);

31643 
ıoŞ_off£t
 = 
funùiÚ_size
;

31644 
funùiÚ_size
 +ğ
fd
->
ıoŞ_couÁ
 * (*fd->
ıoŞ
);

31645 
v¬defs_off£t
 = 
funùiÚ_size
;

31646 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
è|| fd->
has_ev®_ÿÎ
) {

31647 
funùiÚ_size
 +ğ(
fd
->
¬g_couÁ
 + fd->
v¬_couÁ
è* (*
b
->
v¬defs
);

31649 
şosu»_v¬_off£t
 = 
funùiÚ_size
;

31650 
funùiÚ_size
 +ğ
fd
->
şosu»_v¬_couÁ
 * (*fd->
şosu»_v¬
);

31651 
by‹_code_off£t
 = 
funùiÚ_size
;

31652 
funùiÚ_size
 +ğ
fd
->
by‹_code
.
size
;

31654 
b
 = 
	`js_m®locz
(
ùx
, 
funùiÚ_size
);

31655 ià(!
b
)

31656 
ç
;

31657 
b
->
h—d”
.
»f_couÁ
 = 1;

31659 
b
->
by‹_code_buf
 = (*)((
ušt8_t
*)b + 
by‹_code_off£t
);

31660 
b
->
by‹_code_Ën
 = 
fd
->
by‹_code
.
size
;

31661 
	`memıy
(
b
->
by‹_code_buf
, 
fd
->
by‹_code
.
buf
, fd->by‹_code.
size
);

31662 
	`js_ä“
(
ùx
, 
fd
->
by‹_code
.
buf
);

31663 
fd
->
by‹_code
.
buf
 = 
NULL
;

31665 
b
->
func_Çme
 = 
fd
->func_name;

31666 ià(
fd
->
¬g_couÁ
 + fd->
v¬_couÁ
 > 0) {

31667 ià((
fd
->
js_mode
 & 
JS_MODE_STRIP
è&& !fd->
has_ev®_ÿÎ
) {

31669 
i
;

31670 
i
 = 0; i < 
fd
->
v¬_couÁ
; i++) {

31671 
	`JS_F»eAtom
(
ùx
, 
fd
->
v¬s
[
i
].
v¬_Çme
);

31673 
i
 = 0; i < 
fd
->
¬g_couÁ
; i++) {

31674 
	`JS_F»eAtom
(
ùx
, 
fd
->
¬gs
[
i
].
v¬_Çme
);

31676 
i
 = 0; i < 
fd
->
şosu»_v¬_couÁ
; i++) {

31677 
	`JS_F»eAtom
(
ùx
, 
fd
->
şosu»_v¬
[
i
].
v¬_Çme
);

31678 
fd
->
şosu»_v¬
[
i
].
v¬_Çme
 = 
JS_ATOM_NULL
;

31681 
b
->
v¬defs
 = (*)((
ušt8_t
*)b + 
v¬defs_off£t
);

31682 
	`memıy
(
b
->
v¬defs
, 
fd
->
¬gs
, fd->
¬g_couÁ
 * (fd->args[0]));

31683 
	`memıy
(
b
->
v¬defs
 + 
fd
->
¬g_couÁ
, fd->
v¬s
, fd->
v¬_couÁ
 * (fd->vars[0]));

31685 
b
->
v¬_couÁ
 = 
fd
->var_count;

31686 
b
->
¬g_couÁ
 = 
fd
->arg_count;

31687 
b
->
defšed_¬g_couÁ
 = 
fd
->defined_arg_count;

31688 
	`js_ä“
(
ùx
, 
fd
->
¬gs
);

31689 
	`js_ä“
(
ùx
, 
fd
->
v¬s
);

31691 
b
->
ıoŞ_couÁ
 = 
fd
->cpool_count;

31692 ià(
b
->
ıoŞ_couÁ
) {

31693 
b
->
ıoŞ
 = (*)((
ušt8_t
*)b + 
ıoŞ_off£t
);

31694 
	`memıy
(
b
->
ıoŞ
, 
fd
->ıoŞ, b->
ıoŞ_couÁ
 * (*b->cpool));

31696 
	`js_ä“
(
ùx
, 
fd
->
ıoŞ
);

31697 
fd
->
ıoŞ
 = 
NULL
;

31699 
b
->
¡ack_size
 = stack_size;

31701 ià(
fd
->
js_mode
 & 
JS_MODE_STRIP
) {

31702 
	`JS_F»eAtom
(
ùx
, 
fd
->
f’ame
);

31703 
	`dbuf_ä“
(&
fd
->
pc2lše
);

31708 
b
->
has_debug
 = 1;

31709 
b
->
debug
.
f’ame
 = 
fd
->filename;

31710 
b
->
debug
.
lše_num
 = 
fd
->line_num;

31715 
b
->
debug
.
pc2lše_buf
 = 
	`js_»®loc
(
ùx
, 
fd
->
pc2lše
.
buf
, fd->pc2lše.
size
);

31716 ià(!
b
->
debug
.
pc2lše_buf
)

31717 
b
->
debug
.
pc2lše_buf
 = 
fd
->
pc2lše
.
buf
;

31718 
b
->
debug
.
pc2lše_Ën
 = 
fd
->
pc2lše
.
size
;

31719 
b
->
debug
.
sourû
 = 
fd
->source;

31720 
b
->
debug
.
sourû_Ën
 = 
fd
->source_len;

31722 ià(
fd
->
scİes
 !ğfd->
def_scİe_¬¿y
)

31723 
	`js_ä“
(
ùx
, 
fd
->
scİes
);

31725 
b
->
şosu»_v¬_couÁ
 = 
fd
->closure_var_count;

31726 ià(
b
->
şosu»_v¬_couÁ
) {

31727 
b
->
şosu»_v¬
 = (*)((
ušt8_t
*)b + 
şosu»_v¬_off£t
);

31728 
	`memıy
(
b
->
şosu»_v¬
, 
fd
->şosu»_v¬, b->
şosu»_v¬_couÁ
 * (*b->closure_var));

31730 
	`js_ä“
(
ùx
, 
fd
->
şosu»_v¬
);

31731 
fd
->
şosu»_v¬
 = 
NULL
;

31733 
b
->
has_´ÙÙy³
 = 
fd
->has_prototype;

31734 
b
->
has_sim¶e_·¿m‘”_li¡
 = 
fd
->has_simple_parameter_list;

31735 
b
->
js_mode
 = 
fd
->js_mode;

31736 
b
->
is_d”ived_şass_cÚ¡ruùÜ
 = 
fd
->is_derived_class_constructor;

31737 
b
->
func_kšd
 = 
fd
->func_kind;

31738 
b
->
Ãed_home_objeù
 = (
fd
->
home_objeù_v¬_idx
 >= 0 ||

31739 
fd
->
Ãed_home_objeù
);

31740 
b
->
Ãw_rg‘_®lowed
 = 
fd
->new_target_allowed;

31741 
b
->
su³r_ÿÎ_®lowed
 = 
fd
->super_call_allowed;

31742 
b
->
su³r_®lowed
 = 
fd
->super_allowed;

31743 
b
->
¬gum’ts_®lowed
 = 
fd
->arguments_allowed;

31744 
b
->
backŒaû_b¬r›r
 = 
fd
->backtrace_barrier;

31745 
b
->
»®m
 = 
	`JS_DupCÚ‹xt
(
ùx
);

31747 
	`add_gc_objeù
(
ùx
->
¹
, &
b
->
h—d”
, 
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
);

31749 #ià
	`defšed
(
DUMP_BYTECODE
) && (DUMP_BYTECODE & 1)

31750 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
)) {

31751 
	`js_dump_funùiÚ_by‹code
(
ùx
, 
b
);

31755 ià(
fd
->
·»Á
) {

31757 
	`li¡_d–
(&
fd
->
lšk
);

31760 
	`js_ä“
(
ùx
, 
fd
);

31761  
	`JS_MKPTR
(
JS_TAG_FUNCTION_BYTECODE
, 
b
);

31762 
ç
:

31763 
	`js_ä“_funùiÚ_def
(
ùx
, 
fd
);

31764  
JS_EXCEPTION
;

31765 
	}
}

31767 
	$ä“_funùiÚ_by‹code
(
JSRuÁime
 *
¹
, 
JSFunùiÚBy‹code
 *
b
)

31769 
i
;

31773 
buf
[
ATOM_GET_STR_BUF_SIZE
];

31774 
	`´štf
("freeing %s\n",

31775 
	`JS_AtomG‘SŒRT
(
¹
, 
buf
, (buf), 
b
->
func_Çme
));

31778 
	`ä“_by‹code_©oms
(
¹
, 
b
->
by‹_code_buf
, b->
by‹_code_Ën
, 
TRUE
);

31780 ià(
b
->
v¬defs
) {

31781 
i
 = 0; i < 
b
->
¬g_couÁ
 + b->
v¬_couÁ
; i++) {

31782 
	`JS_F»eAtomRT
(
¹
, 
b
->
v¬defs
[
i
].
v¬_Çme
);

31785 
i
 = 0; i < 
b
->
ıoŞ_couÁ
; i++)

31786 
	`JS_F»eV®ueRT
(
¹
, 
b
->
ıoŞ
[
i
]);

31788 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

31789 
JSClosu»V¬
 *
cv
 = &
b
->
şosu»_v¬
[
i
];

31790 
	`JS_F»eAtomRT
(
¹
, 
cv
->
v¬_Çme
);

31792 ià(
b
->
»®m
)

31793 
	`JS_F»eCÚ‹xt
(
b
->
»®m
);

31795 
	`JS_F»eAtomRT
(
¹
, 
b
->
func_Çme
);

31796 ià(
b
->
has_debug
) {

31797 
	`JS_F»eAtomRT
(
¹
, 
b
->
debug
.
f’ame
);

31798 
	`js_ä“_¹
(
¹
, 
b
->
debug
.
pc2lše_buf
);

31799 
	`js_ä“_¹
(
¹
, 
b
->
debug
.
sourû
);

31802 
	`»move_gc_objeù
(&
b
->
h—d”
);

31803 ià(
¹
->
gc_pha£
 =ğ
JS_GC_PHASE_REMOVE_CYCLES
 && 
b
->
h—d”
.
»f_couÁ
 != 0) {

31804 
	`li¡_add_
(&
b
->
h—d”
.
lšk
, &
¹
->
gc_z”o_»f_couÁ_li¡
);

31806 
	`js_ä“_¹
(
¹
, 
b
);

31808 
	}
}

31810 
__exû±iÚ
 
	$js_·r£_dœeùives
(
JSP¬£S‹
 *
s
)

31812 
¡r
[20];

31813 
JSP¬£Pos
 
pos
;

31814 
BOOL
 
has_£mi
;

31816 ià(
s
->
tok’
.
v®
 !ğ
TOK_STRING
)

31819 
	`js_·r£_g‘_pos
(
s
, &
pos
);

31821 
s
->
tok’
.
v®
 =ğ
TOK_STRING
) {

31823 
	`¢´štf
(
¡r
,  str, "%.*s",

31824 ()(
s
->
buf_±r
 - s->
tok’
.
±r
 - 2), s->token.ptr + 1);

31826 ià(
	`Ãxt_tok’
(
s
))

31829 
has_£mi
 = 
FALSE
;

31830 
s
->
tok’
.
v®
) {

31832 ià(
	`Ãxt_tok’
(
s
))

31834 
has_£mi
 = 
TRUE
;

31837 
TOK_EOF
:

31838 
has_£mi
 = 
TRUE
;

31840 
TOK_NUMBER
:

31841 
TOK_STRING
:

31842 
TOK_TEMPLATE
:

31843 
TOK_IDENT
:

31844 
TOK_REGEXP
:

31845 
TOK_DEC
:

31846 
TOK_INC
:

31847 
TOK_NULL
:

31848 
TOK_FALSE
:

31849 
TOK_TRUE
:

31850 
TOK_IF
:

31851 
TOK_RETURN
:

31852 
TOK_VAR
:

31853 
TOK_THIS
:

31854 
TOK_DELETE
:

31855 
TOK_TYPEOF
:

31856 
TOK_NEW
:

31857 
TOK_DO
:

31858 
TOK_WHILE
:

31859 
TOK_FOR
:

31860 
TOK_SWITCH
:

31861 
TOK_THROW
:

31862 
TOK_TRY
:

31863 
TOK_FUNCTION
:

31864 
TOK_DEBUGGER
:

31865 
TOK_WITH
:

31866 
TOK_CLASS
:

31867 
TOK_CONST
:

31868 
TOK_ENUM
:

31869 
TOK_EXPORT
:

31870 
TOK_IMPORT
:

31871 
TOK_SUPER
:

31872 
TOK_INTERFACE
:

31873 
TOK_LET
:

31874 
TOK_PACKAGE
:

31875 
TOK_PRIVATE
:

31876 
TOK_PROTECTED
:

31877 
TOK_PUBLIC
:

31878 
TOK_STATIC
:

31880 ià(
s
->
gÙ_lf
)

31881 
has_£mi
 = 
TRUE
;

31886 ià(!
has_£mi
)

31888 ià(!
	`¡rcmp
(
¡r
, "use strict")) {

31889 
s
->
cur_func
->
has_u£_¡riù
 = 
TRUE
;

31890 
s
->
cur_func
->
js_mode
 |ğ
JS_MODE_STRICT
;

31892 #ià!
	`defšed
(
DUMP_BYTECODE
) || !(DUMP_BYTECODE & 8)

31893 ià(!
	`¡rcmp
(
¡r
, "use strip")) {

31894 
s
->
cur_func
->
js_mode
 |ğ
JS_MODE_STRIP
;

31897 #ifdeà
CONFIG_BIGNUM


31898 ià(
s
->
ùx
->
bignum_ext
 && !
	`¡rcmp
(
¡r
, "use math")) {

31899 
s
->
cur_func
->
js_mode
 |ğ
JS_MODE_MATH
;

31903  
	`js_·r£_£ek_tok’
(
s
, &
pos
);

31904 
	}
}

31906 
	$js_·r£_funùiÚ_check_Çmes
(
JSP¬£S‹
 *
s
, 
JSFunùiÚDef
 *
fd
,

31907 
JSAtom
 
func_Çme
)

31909 
JSAtom
 
Çme
;

31910 
i
, 
idx
;

31912 ià(
fd
->
js_mode
 & 
JS_MODE_STRICT
) {

31913 ià(!
fd
->
has_sim¶e_·¿m‘”_li¡
 && fd->
has_u£_¡riù
) {

31914  
	`js_·r£_”rÜ
(
s
, "\"use strict\"‚ot‡llowed in function with default or destructuring…arameter");

31916 ià(
func_Çme
 =ğ
JS_ATOM_ev®
 || func_Çm=ğ
JS_ATOM_¬gum’ts
) {

31917  
	`js_·r£_”rÜ
(
s
, "invalid function‚ame in strict code");

31919 
idx
 = 0; idx < 
fd
->
¬g_couÁ
; idx++) {

31920 
Çme
 = 
fd
->
¬gs
[
idx
].
v¬_Çme
;

31922 ià(
Çme
 =ğ
JS_ATOM_ev®
 ||‚am=ğ
JS_ATOM_¬gum’ts
) {

31923  
	`js_·r£_”rÜ
(
s
, "invalid‡rgument‚ame in strict code");

31928 ià((
fd
->
js_mode
 & 
JS_MODE_STRICT
)

31929 || !
fd
->
has_sim¶e_·¿m‘”_li¡


31930 || (
fd
->
func_ty³
 =ğ
JS_PARSE_FUNC_METHOD
 && fd->
func_kšd
 =ğ
JS_FUNC_ASYNC
)

31931 || 
fd
->
func_ty³
 =ğ
JS_PARSE_FUNC_ARROW


31932 || 
fd
->
func_ty³
 =ğ
JS_PARSE_FUNC_METHOD
) {

31933 
idx
 = 0; idx < 
fd
->
¬g_couÁ
; idx++) {

31934 
Çme
 = 
fd
->
¬gs
[
idx
].
v¬_Çme
;

31935 ià(
Çme
 !ğ
JS_ATOM_NULL
) {

31936 
i
 = 0; i < 
idx
; i++) {

31937 ià(
fd
->
¬gs
[
i
].
v¬_Çme
 =ğ
Çme
)

31938 
du¶iÿ‹
;

31942 
i
 = 0; i < 
fd
->
v¬_couÁ
; i++) {

31943 ià(
fd
->
v¬s
[
i
].
v¬_Çme
 =ğ
Çme
)

31944 
du¶iÿ‹
;

31951 
du¶iÿ‹
:

31952  
	`js_·r£_”rÜ
(
s
, "duplicate‡rgument‚ames‚ot‡llowed inhis context");

31953 
	}
}

31956 
JSFunùiÚDef
 *
	$js_·r£_funùiÚ_şass_f›lds_š™
(
JSP¬£S‹
 *
s
)

31958 
JSFunùiÚDef
 *
fd
;

31960 
fd
 = 
	`js_Ãw_funùiÚ_def
(
s
->
ùx
, s->
cur_func
, 
FALSE
, FALSE,

31961 
s
->
f’ame
, 0);

31962 ià(!
fd
)

31963  
NULL
;

31964 
fd
->
func_Çme
 = 
JS_ATOM_NULL
;

31965 
fd
->
has_´ÙÙy³
 = 
FALSE
;

31966 
fd
->
has_home_objeù
 = 
TRUE
;

31968 
fd
->
has_¬gum’ts_bšdšg
 = 
FALSE
;

31969 
fd
->
has_this_bšdšg
 = 
TRUE
;

31970 
fd
->
is_d”ived_şass_cÚ¡ruùÜ
 = 
FALSE
;

31971 
fd
->
Ãw_rg‘_®lowed
 = 
TRUE
;

31972 
fd
->
su³r_ÿÎ_®lowed
 = 
FALSE
;

31973 
fd
->
su³r_®lowed
 = fd->
has_home_objeù
;

31974 
fd
->
¬gum’ts_®lowed
 = 
FALSE
;

31976 
fd
->
func_kšd
 = 
JS_FUNC_NORMAL
;

31977 
fd
->
func_ty³
 = 
JS_PARSE_FUNC_METHOD
;

31978  
fd
;

31979 
	}
}

31983 
__exû±iÚ
 
	$js_·r£_funùiÚ_deş2
(
JSP¬£S‹
 *
s
,

31984 
JSP¬£FunùiÚEnum
 
func_ty³
,

31985 
JSFunùiÚKšdEnum
 
func_kšd
,

31986 
JSAtom
 
func_Çme
,

31987 cÚ¡ 
ušt8_t
 *
±r
,

31988 
funùiÚ_lše_num
,

31989 
JSP¬£ExpÜtEnum
 
expÜt_æag
,

31990 
JSFunùiÚDef
 **
pfd
)

31992 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

31993 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

31994 
BOOL
 
is_ex´
;

31995 
func_idx
, 
Ëxiÿl_func_idx
 = -1;

31996 
BOOL
 
has_İt_¬g
;

31997 
BOOL
 
ü—‹_func_v¬
 = 
FALSE
;

31999 
is_ex´
 = (
func_ty³
 !ğ
JS_PARSE_FUNC_STATEMENT
 &&

32000 
func_ty³
 !ğ
JS_PARSE_FUNC_VAR
);

32002 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_STATEMENT
 ||

32003 
func_ty³
 =ğ
JS_PARSE_FUNC_VAR
 ||

32004 
func_ty³
 =ğ
JS_PARSE_FUNC_EXPR
) {

32005 ià(
func_kšd
 =ğ
JS_FUNC_NORMAL
 &&

32006 
	`tok’_is_p£udo_keywÜd
(
s
, 
JS_ATOM_async
) &&

32007 
	`³ek_tok’
(
s
, 
TRUE
) != '\n') {

32008 ià(
	`Ãxt_tok’
(
s
))

32010 
func_kšd
 = 
JS_FUNC_ASYNC
;

32012 ià(
	`Ãxt_tok’
(
s
))

32014 ià(
s
->
tok’
.
v®
 == '*') {

32015 ià(
	`Ãxt_tok’
(
s
))

32017 
func_kšd
 |ğ
JS_FUNC_GENERATOR
;

32020 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

32021 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
 ||

32022 (
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_y›ld
 &&

32023 
func_ty³
 =ğ
JS_PARSE_FUNC_EXPR
 &&

32024 (
func_kšd
 & 
JS_FUNC_GENERATOR
)) ||

32025 (
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_awa™
 &&

32026 
func_ty³
 =ğ
JS_PARSE_FUNC_EXPR
 &&

32027 (
func_kšd
 & 
JS_FUNC_ASYNC
))) {

32028  
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

32031 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 ||

32032 (((
s
->
tok’
.
v®
 =ğ
TOK_YIELD
 && !(
fd
->
js_mode
 & 
JS_MODE_STRICT
)) ||

32033 (
s
->
tok’
.
v®
 =ğ
TOK_AWAIT
 && !s->
is_moduË
)) &&

32034 
func_ty³
 =ğ
JS_PARSE_FUNC_EXPR
)) {

32035 
func_Çme
 = 
	`JS_DupAtom
(
ùx
, 
s
->
tok’
.
u
.
id’t
.
©om
);

32036 ià(
	`Ãxt_tok’
(
s
)) {

32037 
	`JS_F»eAtom
(
ùx
, 
func_Çme
);

32041 ià(
func_ty³
 !ğ
JS_PARSE_FUNC_EXPR
 &&

32042 
expÜt_æag
 !ğ
JS_PARSE_EXPORT_DEFAULT
) {

32043  
	`js_·r£_”rÜ
(
s
, "function‚ameƒxpected");

32046 } ià(
func_ty³
 !ğ
JS_PARSE_FUNC_ARROW
) {

32047 
func_Çme
 = 
	`JS_DupAtom
(
ùx
, func_name);

32050 ià(
fd
->
is_ev®
 && fd->
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
 &&

32051 (
func_ty³
 =ğ
JS_PARSE_FUNC_STATEMENT
 || func_ty³ =ğ
JS_PARSE_FUNC_VAR
)) {

32052 
JSHoi¡edDef
 *
hf
;

32053 
hf
 = 
	`fšd_hoi¡ed_def
(
fd
, 
func_Çme
);

32055 ià(
hf
 && hf->
scİe_Ëv–
 =ğ
fd
->scope_level) {

32056 
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of global identifier in module code");

32057 
	`JS_F»eAtom
(
ùx
, 
func_Çme
);

32062 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_VAR
) {

32064 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRICT
)

32065 && 
	`fšd_Ëxiÿl_deş
(
ùx
, 
fd
, 
func_Çme
, fd->
scİe_fœ¡
, 
FALSE
) < 0

32066 && !((
func_idx
 = 
	`fšd_v¬
(
ùx
, 
fd
, 
func_Çme
)è>ğ0 && (func_idx & 
ARGUMENT_VAR_OFFSET
))

32067 && !(
func_Çme
 =ğ
JS_ATOM_¬gum’ts
 && 
fd
->
has_¬gum’ts_bšdšg
)) {

32068 
ü—‹_func_v¬
 = 
TRUE
;

32070 ià(
fd
->
is_ev®
 &&

32071 (
fd
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_GLOBAL
 ||

32072 
fd
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
) &&

32073 
fd
->
scİe_Ëv–
 == 1) {

32076 
JSHoi¡edDef
 *
hf
;

32077 
hf
 = 
	`fšd_hoi¡ed_def
(
fd
, 
func_Çme
);

32079 ià(
hf
 && hf->
scİe_Ëv–
 =ğ
fd
->scope_level) {

32080 
	`js_·r£_”rÜ
(
s
, "invalid„edefinition of global identifier");

32081 
	`JS_F»eAtom
(
ùx
, 
func_Çme
);

32088 
Ëxiÿl_func_idx
 = 
	`defše_v¬
(
s
, 
fd
, 
func_Çme
,

32089 
func_kšd
 !ğ
JS_FUNC_NORMAL
 ?

32090 
JS_VAR_DEF_NEW_FUNCTION_DECL
 :

32091 
JS_VAR_DEF_FUNCTION_DECL
);

32092 ià(
Ëxiÿl_func_idx
 < 0) {

32093 
	`JS_F»eAtom
(
ùx
, 
func_Çme
);

32099 
fd
 = 
	`js_Ãw_funùiÚ_def
(
ùx
, fd, 
FALSE
, 
is_ex´
,

32100 
s
->
f’ame
, 
funùiÚ_lše_num
);

32101 ià(!
fd
) {

32102 
	`JS_F»eAtom
(
ùx
, 
func_Çme
);

32105 ià(
pfd
)

32106 *
pfd
 = 
fd
;

32107 
s
->
cur_func
 = 
fd
;

32108 
fd
->
func_Çme
 = func_name;

32110 
fd
->
has_´ÙÙy³
 = (
func_ty³
 =ğ
JS_PARSE_FUNC_STATEMENT
 ||

32111 
func_ty³
 =ğ
JS_PARSE_FUNC_VAR
 ||

32112 
func_ty³
 =ğ
JS_PARSE_FUNC_EXPR
) &&

32113 
func_kšd
 =ğ
JS_FUNC_NORMAL
;

32114 
fd
->
has_home_objeù
 = (
func_ty³
 =ğ
JS_PARSE_FUNC_METHOD
 ||

32115 
func_ty³
 =ğ
JS_PARSE_FUNC_GETTER
 ||

32116 
func_ty³
 =ğ
JS_PARSE_FUNC_SETTER
 ||

32117 
func_ty³
 =ğ
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
 ||

32118 
func_ty³
 =ğ
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
);

32119 
fd
->
has_¬gum’ts_bšdšg
 = (
func_ty³
 !ğ
JS_PARSE_FUNC_ARROW
);

32120 
fd
->
has_this_bšdšg
 = fd->
has_¬gum’ts_bšdšg
;

32121 
fd
->
is_d”ived_şass_cÚ¡ruùÜ
 = (
func_ty³
 =ğ
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
);

32122 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_ARROW
) {

32123 
fd
->
Ãw_rg‘_®lowed
 = fd->
·»Á
->new_target_allowed;

32124 
fd
->
su³r_ÿÎ_®lowed
 = fd->
·»Á
->super_call_allowed;

32125 
fd
->
su³r_®lowed
 = fd->
·»Á
->super_allowed;

32126 
fd
->
¬gum’ts_®lowed
 = fd->
·»Á
->arguments_allowed;

32128 
fd
->
Ãw_rg‘_®lowed
 = 
TRUE
;

32129 
fd
->
su³r_ÿÎ_®lowed
 = fd->
is_d”ived_şass_cÚ¡ruùÜ
;

32130 
fd
->
su³r_®lowed
 = fd->
has_home_objeù
;

32131 
fd
->
¬gum’ts_®lowed
 = 
TRUE
;

32137 
fd
->
func_kšd
 = func_kind;

32138 
fd
->
func_ty³
 = func_type;

32140 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
 ||

32141 
func_ty³
 =ğ
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
) {

32143 
	`em™_İ
(
s
, 
OP_check_ùÜ
);

32146 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
) {

32147 
	`em™_şass_f›ld_š™
(
s
);

32151 
fd
->
has_sim¶e_·¿m‘”_li¡
 = 
TRUE
;

32152 
has_İt_¬g
 = 
FALSE
;

32153 ià(
func_ty³
 =ğ
JS_PARSE_FUNC_ARROW
 && 
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

32154 
JSAtom
 
Çme
;

32155 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

32156 
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

32157 
ç
;

32159 
Çme
 = 
s
->
tok’
.
u
.
id’t
.
©om
;

32160 ià(
	`add_¬g
(
ùx
, 
fd
, 
Çme
) < 0)

32161 
ç
;

32162 
fd
->
defšed_¬g_couÁ
 = 1;

32164 ià(
	`js_·r£_ex³ù
(
s
, '('))

32165 
ç
;

32167 
s
->
tok’
.
v®
 != ')') {

32168 
JSAtom
 
Çme
;

32169 
BOOL
 
»¡
 = 
FALSE
;

32170 
idx
;

32172 ià(
s
->
tok’
.
v®
 =ğ
TOK_ELLIPSIS
) {

32173 
fd
->
has_sim¶e_·¿m‘”_li¡
 = 
FALSE
;

32174 
»¡
 = 
TRUE
;

32175 ià(
	`Ãxt_tok’
(
s
))

32176 
ç
;

32178 ià(
s
->
tok’
.
v®
 == '[' || s->token.val == '{') {

32179 
fd
->
has_sim¶e_·¿m‘”_li¡
 = 
FALSE
;

32180 ià(
»¡
) {

32181 
	`em™_İ
(
s
, 
OP_»¡
);

32182 
	`em™_u16
(
s
, 
fd
->
¬g_couÁ
);

32185 
idx
 = 
	`add_¬g
(
ùx
, 
fd
, 
JS_ATOM_NULL
);

32186 
	`em™_İ
(
s
, 
OP_g‘_¬g
);

32187 
	`em™_u16
(
s
, 
idx
);

32189 ià(
	`js_·r£_de¡ruùuršg_–em’t
(
s
, 
TOK_VAR
, 1, 
TRUE
, -1, TRUE))

32190 
ç
;

32191 } ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
) {

32192 ià(
s
->
tok’
.
u
.
id’t
.
is_»£rved
) {

32193 
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

32194 
ç
;

32196 
Çme
 = 
s
->
tok’
.
u
.
id’t
.
©om
;

32197 ià(
Çme
 =ğ
JS_ATOM_y›ld
 && 
fd
->
func_kšd
 =ğ
JS_FUNC_GENERATOR
) {

32198 
	`js_·r£_”rÜ_»£rved_id’tif›r
(
s
);

32199 
ç
;

32201 
idx
 = 
	`add_¬g
(
ùx
, 
fd
, 
Çme
);

32202 ià(
idx
 < 0)

32203 
ç
;

32204 ià(
	`Ãxt_tok’
(
s
))

32205 
ç
;

32206 ià(
»¡
) {

32207 
	`em™_İ
(
s
, 
OP_»¡
);

32208 
	`em™_u16
(
s
, 
idx
);

32209 
	`em™_İ
(
s
, 
OP_put_¬g
);

32210 
	`em™_u16
(
s
, 
idx
);

32211 
fd
->
has_sim¶e_·¿m‘”_li¡
 = 
FALSE
;

32212 
has_İt_¬g
 = 
TRUE
;

32213 } ià(
s
->
tok’
.
v®
 == '=') {

32214 
fd
->
has_sim¶e_·¿m‘”_li¡
 = 
FALSE
;

32215 
has_İt_¬g
 = 
TRUE
;

32217 ià(
	`Ãxt_tok’
(
s
))

32218 
ç
;

32221 ià(
s
->
tok’
.
v®
 =ğ
TOK_VOID
) {

32222 
JSP¬£Pos
 
pos
;

32223 
	`js_·r£_g‘_pos
(
s
, &
pos
);

32224 ià(
	`Ãxt_tok’
(
s
))

32225 
ç
;

32226 ià(
s
->
tok’
.
v®
 =ğ
TOK_NUMBER
) {

32227 ià(
	`Ãxt_tok’
(
s
))

32228 
ç
;

32229 ià(
s
->
tok’
.
v®
 == ',') {

32230 ià(
	`Ãxt_tok’
(
s
))

32231 
ç
;

32234 ià(
s
->
tok’
.
v®
 == ')') {

32238 ià(
	`js_·r£_£ek_tok’
(
s
, &
pos
))

32239 
ç
;

32245 ià(
s
->
tok’
.
v®
 =ğ
TOK_IDENT
 &&

32246 
s
->
tok’
.
u
.
id’t
.
©om
 =ğ
JS_ATOM_undefšed
 &&

32247 
fd
->
·»Á
 =ğ
NULL
 &&

32248 ((
tok
 = 
	`³ek_tok’
(
s
, 
FALSE
)) == ',' ||ok == ')')) {

32249 ià(
	`Ãxt_tok’
(
s
))

32250 
ç
;

32254 
Ïb–
 = 
	`Ãw_Ïb–
(
s
);

32255 ià(
idx
 > 0) {

32256 
	`em™_İ
(
s
, 
OP_£t_¬g_v®id_u±o
);

32257 
	`em™_u16
(
s
, 
idx
);

32259 
	`em™_İ
(
s
, 
OP_g‘_¬g
);

32260 
	`em™_u16
(
s
, 
idx
);

32261 
	`em™_İ
(
s
, 
OP_undefšed
);

32262 
	`em™_İ
(
s
, 
OP_¡riù_eq
);

32263 
	`em™_gÙo
(
s
, 
OP_if_çl£
, 
Ïb–
);

32264 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

32265 
ç
;

32266 
	`£t_objeù_Çme
(
s
, 
Çme
);

32267 
	`em™_İ
(
s
, 
OP_put_¬g
);

32268 
	`em™_u16
(
s
, 
idx
);

32269 
	`em™_Ïb–
(
s
, 
Ïb–
);

32271 } ià(!
has_İt_¬g
) {

32272 
fd
->
defšed_¬g_couÁ
++;

32275 
	`js_·r£_”rÜ
(
s
, "missing formal…arameter");

32276 
ç
;

32278 ià(
»¡
 && 
s
->
tok’
.
v®
 != ')') {

32279 
	`js_·r£_ex³ù
(
s
, ')');

32280 
ç
;

32282 ià(
s
->
tok’
.
v®
 == ')')

32284 ià(
	`js_·r£_ex³ù
(
s
, ','))

32285 
ç
;

32287 ià((
func_ty³
 =ğ
JS_PARSE_FUNC_GETTER
 && 
fd
->
¬g_couÁ
 != 0) ||

32288 (
func_ty³
 =ğ
JS_PARSE_FUNC_SETTER
 && 
fd
->
¬g_couÁ
 != 1)) {

32289 
	`js_·r£_”rÜ
(
s
, "invalid‚umber of‡rguments for getter or setter");

32290 
ç
;

32294 ià(
	`Ãxt_tok’
(
s
))

32295 
ç
;

32298 ià(
func_kšd
 =ğ
JS_FUNC_GENERATOR
 ||

32299 
func_kšd
 =ğ
JS_FUNC_ASYNC_GENERATOR
)

32300 
	`em™_İ
(
s
, 
OP_š™Ÿl_y›ld
);

32304 
fd
->
š_funùiÚ_body
 = 
TRUE
;

32305 
	`push_scİe
(
s
);

32307 ià(
s
->
tok’
.
v®
 =ğ
TOK_ARROW
) {

32308 ià(
	`Ãxt_tok’
(
s
))

32309 
ç
;

32311 ià(
s
->
tok’
.
v®
 != '{') {

32312 ià(
	`js_·r£_funùiÚ_check_Çmes
(
s
, 
fd
, 
func_Çme
))

32313 
ç
;

32315 ià(
	`js_·r£_assign_ex´
(
s
, 
TRUE
))

32316 
ç
;

32318 ià(
func_kšd
 !ğ
JS_FUNC_NORMAL
)

32319 
	`em™_İ
(
s
, 
OP_»tuº_async
);

32321 
	`em™_İ
(
s
, 
OP_»tuº
);

32323 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
)) {

32327 
fd
->
sourû_Ën
 = 
s
->
Ï¡_±r
 - 
±r
;

32328 
fd
->
sourû
 = 
	`js_¡ºdup
(
ùx
, (cÚ¡ *)
±r
, fd->
sourû_Ën
);

32329 ià(!
fd
->
sourû
)

32330 
ç
;

32332 
dÚe
;

32336 ià(
	`js_·r£_ex³ù
(
s
, '{'))

32337 
ç
;

32339 ià(
	`js_·r£_dœeùives
(
s
))

32340 
ç
;

32343 ià(
	`js_·r£_funùiÚ_check_Çmes
(
s
, 
fd
, 
func_Çme
))

32344 
ç
;

32346 
s
->
tok’
.
v®
 != '}') {

32347 ià(
	`js_·r£_sourû_–em’t
(
s
))

32348 
ç
;

32350 ià(!(
fd
->
js_mode
 & 
JS_MODE_STRIP
)) {

32352 
fd
->
sourû_Ën
 = 
s
->
buf_±r
 - 
±r
;

32353 
fd
->
sourû
 = 
	`js_¡ºdup
(
ùx
, (cÚ¡ *)
±r
, fd->
sourû_Ën
);

32354 ià(!
fd
->
sourû
)

32355 
ç
;

32358 ià(
	`Ãxt_tok’
(
s
)) {

32360 
ç
;

32364 ià(
	`js_is_live_code
(
s
)) {

32365 
	`em™_»tuº
(
s
, 
FALSE
);

32367 
dÚe
:

32368 
s
->
cur_func
 = 
fd
->
·»Á
;

32372 
idx
;

32373 
JSAtom
 
func_Çme
 = 
fd
->func_name;

32376 
idx
 = 
	`ıoŞ_add
(
s
, 
JS_NULL
);

32377 
fd
->
·»Á_ıoŞ_idx
 = 
idx
;

32379 ià(
is_ex´
) {

32381 ià(
func_ty³
 !ğ
JS_PARSE_FUNC_CLASS_CONSTRUCTOR
 &&

32382 
func_ty³
 !ğ
JS_PARSE_FUNC_DERIVED_CLASS_CONSTRUCTOR
) {

32385 
	`em™_İ
(
s
, 
OP_fşosu»
);

32386 
	`em™_u32
(
s
, 
idx
);

32387 ià(
func_Çme
 =ğ
JS_ATOM_NULL
) {

32388 
	`em™_İ
(
s
, 
OP_£t_Çme
);

32389 
	`em™_u32
(
s
, 
JS_ATOM_NULL
);

32392 } ià(
func_ty³
 =ğ
JS_PARSE_FUNC_VAR
) {

32393 
	`em™_İ
(
s
, 
OP_fşosu»
);

32394 
	`em™_u32
(
s
, 
idx
);

32395 ià(
ü—‹_func_v¬
) {

32396 ià(
s
->
cur_func
->
is_glob®_v¬
) {

32397 
JSHoi¡edDef
 *
hf
;

32400 
hf
 = 
	`add_hoi¡ed_def
(
ùx
, 
s
->
cur_func
, -1, 
func_Çme
, -1, 
FALSE
);

32401 ià(!
hf
)

32402 
ç
;

32406 
hf
->
scİe_Ëv–
 = 0;

32407 
hf
->
fÜû_š™
 = ((
s
->
cur_func
->
js_mode
 & 
JS_MODE_STRICT
) != 0);

32409 
	`em™_İ
(
s
, 
OP_dup
);

32410 
	`em™_İ
(
s
, 
OP_scİe_put_v¬
);

32411 
	`em™_©om
(
s
, 
func_Çme
);

32412 
	`em™_u16
(
s
, 0);

32415 
func_idx
 = 
	`fšd_v¬
(
ùx
, 
s
->
cur_func
, 
func_Çme
);

32416 ià(
func_idx
 < 0) {

32417 
func_idx
 = 
	`add_v¬
(
ùx
, 
s
->
cur_func
, 
func_Çme
);

32418 ià(
func_idx
 < 0)

32419 
ç
;

32422 
	`em™_İ
(
s
, 
OP_dup
);

32423 
	`em™_İ
(
s
, 
OP_scİe_put_v¬
);

32424 
	`em™_©om
(
s
, 
func_Çme
);

32425 
	`em™_u16
(
s
, 0);

32428 ià(
Ëxiÿl_func_idx
 >= 0) {

32430 
s
->
cur_func
->
v¬s
[
Ëxiÿl_func_idx
].
func_poŞ_Ü_scİe_idx
 = 
idx
;

32431 
	`em™_İ
(
s
, 
OP_drİ
);

32435 
	`em™_İ
(
s
, 
OP_scİe_put_v¬_š™
);

32436 
	`em™_©om
(
s
, 
func_Çme
);

32437 
	`em™_u16
(
s
, s->
cur_func
->
scİe_Ëv–
);

32440 ià(!
s
->
cur_func
->
is_glob®_v¬
) {

32441 
v¬_idx
 = 
	`defše_v¬
(
s
, s->
cur_func
, 
func_Çme
, 
JS_VAR_DEF_VAR
);

32443 ià(
v¬_idx
 < 0)

32444 
ç
;

32446 ià(!
	`add_hoi¡ed_def
(
ùx
, 
s
->
cur_func
, 
idx
, 
JS_ATOM_NULL
, 
v¬_idx
, 
FALSE
))

32447 
ç
;

32449 
JSAtom
 
func_v¬_Çme
;

32450 ià(
func_Çme
 =ğ
JS_ATOM_NULL
)

32451 
func_v¬_Çme
 = 
JS_ATOM__deçuÉ_
;

32453 
func_v¬_Çme
 = 
func_Çme
;

32455 ià(!
	`add_hoi¡ed_def
(
ùx
, 
s
->
cur_func
, 
idx
, 
func_v¬_Çme
, -1, 
FALSE
))

32456 
ç
;

32457 ià(
expÜt_æag
 !ğ
JS_PARSE_EXPORT_NONE
) {

32458 ià(!
	`add_expÜt_’Œy
(
s
, s->
cur_func
->
moduË
, 
func_v¬_Çme
,

32459 
expÜt_æag
 =ğ
JS_PARSE_EXPORT_NAMED
 ? 
func_v¬_Çme
 : 
JS_ATOM_deçuÉ
, 
JS_EXPORT_TYPE_LOCAL
))

32460 
ç
;

32466 
ç
:

32467 
s
->
cur_func
 = 
fd
->
·»Á
;

32468 
	`js_ä“_funùiÚ_def
(
ùx
, 
fd
);

32469 ià(
pfd
)

32470 *
pfd
 = 
NULL
;

32472 
	}
}

32474 
__exû±iÚ
 
	$js_·r£_funùiÚ_deş
(
JSP¬£S‹
 *
s
,

32475 
JSP¬£FunùiÚEnum
 
func_ty³
,

32476 
JSFunùiÚKšdEnum
 
func_kšd
,

32477 
JSAtom
 
func_Çme
,

32478 cÚ¡ 
ušt8_t
 *
±r
,

32479 
funùiÚ_lše_num
)

32481  
	`js_·r£_funùiÚ_deş2
(
s
, 
func_ty³
, 
func_kšd
, 
func_Çme
, 
±r
,

32482 
funùiÚ_lše_num
, 
JS_PARSE_EXPORT_NONE
,

32483 
NULL
);

32484 
	}
}

32486 
__exû±iÚ
 
	$js_·r£_´og¿m
(
JSP¬£S‹
 *
s
)

32488 
JSFunùiÚDef
 *
fd
 = 
s
->
cur_func
;

32489 
idx
;

32491 ià(
	`Ãxt_tok’
(
s
))

32494 ià(
	`js_·r£_dœeùives
(
s
))

32497 
fd
->
is_glob®_v¬
 = (fd->
ev®_ty³
 =ğ
JS_EVAL_TYPE_GLOBAL
) ||

32498 (
fd
->
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
) ||

32499 !(
fd
->
js_mode
 & 
JS_MODE_STRICT
);

32501 ià(!
s
->
is_moduË
) {

32503 
fd
->
ev®_»t_idx
 = 
idx
 = 
	`add_v¬
(
s
->
ùx
, fd, 
JS_ATOM__»t_
);

32504 ià(
idx
 < 0)

32508 
s
->
tok’
.
v®
 !ğ
TOK_EOF
) {

32509 ià(
	`js_·r£_sourû_–em’t
(
s
))

32513 ià(!
s
->
is_moduË
) {

32515 
	`em™_İ
(
s
, 
OP_g‘_loc
);

32516 
	`em™_u16
(
s
, 
fd
->
ev®_»t_idx
);

32518 
	`em™_İ
(
s
, 
OP_»tuº
);

32520 
	`em™_İ
(
s
, 
OP_»tuº_undef
);

32524 
	}
}

32526 
	$js_·r£_š™
(
JSCÚ‹xt
 *
ùx
, 
JSP¬£S‹
 *
s
,

32527 cÚ¡ *
šput
, 
size_t
 
šput_Ën
,

32528 cÚ¡ *
f’ame
)

32530 
	`mem£t
(
s
, 0, (*s));

32531 
s
->
ùx
 = ctx;

32532 
s
->
f’ame
 = filename;

32533 
s
->
lše_num
 = 1;

32534 
s
->
buf_±r
 = (cÚ¡ 
ušt8_t
 *)
šput
;

32535 
s
->
buf_’d
 = s->
buf_±r
 + 
šput_Ën
;

32536 
s
->
tok’
.
v®
 = ' ';

32537 
s
->
tok’
.
lše_num
 = 1;

32538 
	}
}

32540 
JSV®ue
 
	$JS_Ev®FunùiÚIÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
fun_obj
,

32541 
JSV®ueCÚ¡
 
this_obj
,

32542 
JSV¬Ref
 **
v¬_»fs
, 
JSSckF¿me
 *
sf
)

32544 
JSV®ue
 
»t_v®
;

32545 
ušt32_t
 
g
;

32547 
g
 = 
	`JS_VALUE_GET_TAG
(
fun_obj
);

32548 ià(
g
 =ğ
JS_TAG_FUNCTION_BYTECODE
) {

32549 
fun_obj
 = 
	`js_şosu»
(
ùx
, fun_obj, 
v¬_»fs
, 
sf
);

32550 
»t_v®
 = 
	`JS_C®lF»e
(
ùx
, 
fun_obj
, 
this_obj
, 0, 
NULL
);

32551 } ià(
g
 =ğ
JS_TAG_MODULE
) {

32552 
JSModuËDef
 *
m
;

32553 
m
 = 
	`JS_VALUE_GET_PTR
(
fun_obj
);

32555 
	`JS_F»eV®ue
(
ùx
, 
fun_obj
);

32556 ià(
	`js_š¡ªtŸ‹_moduË
(
ùx
, 
m
) < 0)

32557 
ç
;

32558 
»t_v®
 = 
	`js_ev®u©e_moduË
(
ùx
, 
m
);

32559 ià(
	`JS_IsExû±iÚ
(
»t_v®
)) {

32560 
ç
:

32561 
	`js_ä“_moduËs
(
ùx
, 
JS_FREE_MODULE_NOT_EVALUATED
);

32562  
JS_EXCEPTION
;

32565 
	`JS_F»eV®ue
(
ùx
, 
fun_obj
);

32566 
»t_v®
 = 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bytecode functionƒxpected");

32568  
»t_v®
;

32569 
	}
}

32571 
JSV®ue
 
	$JS_Ev®FunùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
fun_obj
)

32573  
	`JS_Ev®FunùiÚIÁ”Çl
(
ùx
, 
fun_obj
, ctx->
glob®_obj
, 
NULL
, NULL);

32574 
	}
}

32576 
	$sk_shebªg
(
JSP¬£S‹
 *
s
)

32578 cÚ¡ 
ušt8_t
 *
p
 = 
s
->
buf_±r
;

32579 
c
;

32581 ià(
p
[0] == '#' &&…[1] == '!') {

32582 
p
 += 2;

32583 
p
 < 
s
->
buf_’d
) {

32584 ià(*
p
 == '\n' || *p == '\r') {

32586 } ià(*
p
 >= 0x80) {

32587 
c
 = 
	`unicode_äom_utf8
(
p
, 
UTF8_CHAR_LEN_MAX
, &p);

32588 ià(
c
 =ğ
CP_LS
 || c =ğ
CP_PS
) {

32590 } ià(
c
 == -1) {

32591 
p
++;

32594 
p
++;

32597 
s
->
buf_±r
 = 
p
;

32599 
	}
}

32602 
JSV®ue
 
	$__JS_Ev®IÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

32603 cÚ¡ *
šput
, 
size_t
 
šput_Ën
,

32604 cÚ¡ *
f’ame
, 
æags
, 
scİe_idx
)

32606 
JSP¬£S‹
 
s1
, *
s
 = &s1;

32607 
”r
, 
js_mode
, 
ev®_ty³
;

32608 
JSV®ue
 
fun_obj
, 
»t_v®
;

32609 
JSSckF¿me
 *
sf
;

32610 
JSV¬Ref
 **
v¬_»fs
;

32611 
JSFunùiÚBy‹code
 *
b
;

32612 
JSFunùiÚDef
 *
fd
;

32613 
JSModuËDef
 *
m
;

32615 
	`js_·r£_š™
(
ùx
, 
s
, 
šput
, 
šput_Ën
, 
f’ame
);

32616 
	`sk_shebªg
(
s
);

32618 
ev®_ty³
 = 
æags
 & 
JS_EVAL_TYPE_MASK
;

32619 
m
 = 
NULL
;

32620 ià(
ev®_ty³
 =ğ
JS_EVAL_TYPE_DIRECT
) {

32621 
JSObjeù
 *
p
;

32622 
sf
 = 
ùx
->
¹
->
cu¼’t_¡ack_äame
;

32623 
	`as£¹
(
sf
 !ğ
NULL
);

32624 
	`as£¹
(
	`JS_VALUE_GET_TAG
(
sf
->
cur_func
è=ğ
JS_TAG_OBJECT
);

32625 
p
 = 
	`JS_VALUE_GET_OBJ
(
sf
->
cur_func
);

32626 
	`as£¹
(
	`js_şass_has_by‹code
(
p
->
şass_id
));

32627 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

32628 
v¬_»fs
 = 
p
->
u
.
func
.var_refs;

32629 
js_mode
 = 
b
->js_mode;

32631 
sf
 = 
NULL
;

32632 
b
 = 
NULL
;

32633 
v¬_»fs
 = 
NULL
;

32634 
js_mode
 = 0;

32635 ià(
æags
 & 
JS_EVAL_FLAG_STRICT
)

32636 
js_mode
 |ğ
JS_MODE_STRICT
;

32637 ià(
æags
 & 
JS_EVAL_FLAG_STRIP
)

32638 
js_mode
 |ğ
JS_MODE_STRIP
;

32639 ià(
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
) {

32640 
JSAtom
 
moduË_Çme
 = 
	`JS_NewAtom
(
ùx
, 
f’ame
);

32641 ià(
moduË_Çme
 =ğ
JS_ATOM_NULL
)

32642  
JS_EXCEPTION
;

32643 
m
 = 
	`js_Ãw_moduË_def
(
ùx
, 
moduË_Çme
);

32644 ià(!
m
)

32645  
JS_EXCEPTION
;

32646 
js_mode
 |ğ
JS_MODE_STRICT
;

32649 
fd
 = 
	`js_Ãw_funùiÚ_def
(
ùx
, 
NULL
, 
TRUE
, 
FALSE
, 
f’ame
, 1);

32650 ià(!
fd
)

32651 
ç1
;

32652 
s
->
cur_func
 = 
fd
;

32653 
fd
->
ev®_ty³
 =ƒval_type;

32654 
fd
->
has_this_bšdšg
 = (
ev®_ty³
 !ğ
JS_EVAL_TYPE_DIRECT
);

32655 
fd
->
backŒaû_b¬r›r
 = ((
æags
 & 
JS_EVAL_FLAG_BACKTRACE_BARRIER
) != 0);

32656 ià(
ev®_ty³
 =ğ
JS_EVAL_TYPE_DIRECT
) {

32657 
fd
->
Ãw_rg‘_®lowed
 = 
b
->new_target_allowed;

32658 
fd
->
su³r_ÿÎ_®lowed
 = 
b
->super_call_allowed;

32659 
fd
->
su³r_®lowed
 = 
b
->super_allowed;

32660 
fd
->
¬gum’ts_®lowed
 = 
b
->arguments_allowed;

32662 
fd
->
Ãw_rg‘_®lowed
 = 
FALSE
;

32663 
fd
->
su³r_ÿÎ_®lowed
 = 
FALSE
;

32664 
fd
->
su³r_®lowed
 = 
FALSE
;

32665 
fd
->
¬gum’ts_®lowed
 = 
TRUE
;

32667 
fd
->
js_mode
 = js_mode;

32668 
fd
->
func_Çme
 = 
	`JS_DupAtom
(
ùx
, 
JS_ATOM__ev®_
);

32669 ià(
b
) {

32670 ià(
	`add_şosu»_v¬ŸbËs
(
ùx
, 
fd
, 
b
, 
scİe_idx
))

32671 
ç
;

32673 
fd
->
moduË
 = 
m
;

32674 
s
->
is_moduË
 = (
m
 !ğ
NULL
);

32675 
s
->
®low_html_comm’ts
 = !s->
is_moduË
;

32677 
	`push_scİe
(
s
);

32679 
”r
 = 
	`js_·r£_´og¿m
(
s
);

32680 ià(
”r
) {

32681 
ç
:

32682 
	`ä“_tok’
(
s
, &s->
tok’
);

32683 
	`js_ä“_funùiÚ_def
(
ùx
, 
fd
);

32684 
ç1
;

32688 
fun_obj
 = 
	`js_ü—‹_funùiÚ
(
ùx
, 
fd
);

32689 ià(
	`JS_IsExû±iÚ
(
fun_obj
))

32690 
ç1
;

32692 ià(
m
) {

32693 
m
->
func_obj
 = 
fun_obj
;

32694 ià(
	`js_»sŞve_moduË
(
ùx
, 
m
) < 0)

32695 
ç1
;

32696 
fun_obj
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_MODULE
, 
m
));

32698 ià(
æags
 & 
JS_EVAL_FLAG_COMPILE_ONLY
) {

32699 
»t_v®
 = 
fun_obj
;

32701 
»t_v®
 = 
	`JS_Ev®FunùiÚIÁ”Çl
(
ùx
, 
fun_obj
, 
this_obj
, 
v¬_»fs
, 
sf
);

32703  
»t_v®
;

32704 
ç1
:

32706 ià(
m
)

32707 
	`js_ä“_moduË_def
(
ùx
, 
m
);

32708  
JS_EXCEPTION
;

32709 
	}
}

32712 
JSV®ue
 
	$JS_Ev®IÁ”Çl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

32713 cÚ¡ *
šput
, 
size_t
 
šput_Ën
,

32714 cÚ¡ *
f’ame
, 
æags
, 
scİe_idx
)

32716 ià(
	`uÆik–y
(!
ùx
->
ev®_š‹º®
)) {

32717  
	`JS_ThrowTy³E¼Ü
(
ùx
, "eval is‚ot supported");

32719  
ùx
->
	`ev®_š‹º®
(ùx, 
this_obj
, 
šput
, 
šput_Ën
, 
f’ame
,

32720 
æags
, 
scİe_idx
);

32721 
	}
}

32723 
JSV®ue
 
	$JS_Ev®Objeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_obj
,

32724 
JSV®ueCÚ¡
 
v®
, 
æags
, 
scİe_idx
)

32726 
JSV®ue
 
»t
;

32727 cÚ¡ *
¡r
;

32728 
size_t
 
Ën
;

32730 ià(!
	`JS_IsSŒšg
(
v®
))

32731  
	`JS_DupV®ue
(
ùx
, 
v®
);

32732 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
v®
);

32733 ià(!
¡r
)

32734  
JS_EXCEPTION
;

32735 
»t
 = 
	`JS_Ev®IÁ”Çl
(
ùx
, 
this_obj
, 
¡r
, 
Ën
, "<šput>", 
æags
, 
scİe_idx
);

32736 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

32737  
»t
;

32739 
	}
}

32741 
JSV®ue
 
	$JS_Ev®
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
šput
, 
size_t
 
šput_Ën
,

32742 cÚ¡ *
f’ame
, 
ev®_æags
)

32744 
ev®_ty³
 = 
ev®_æags
 & 
JS_EVAL_TYPE_MASK
;

32745 
JSV®ue
 
»t
;

32747 
	`as£¹
(
ev®_ty³
 =ğ
JS_EVAL_TYPE_GLOBAL
 ||

32748 
ev®_ty³
 =ğ
JS_EVAL_TYPE_MODULE
);

32749 
»t
 = 
	`JS_Ev®IÁ”Çl
(
ùx
, ctx->
glob®_obj
, 
šput
, 
šput_Ën
, 
f’ame
,

32750 
ev®_æags
, -1);

32751  
»t
;

32752 
	}
}

32754 
	$JS_ResŞveModuË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

32756 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_MODULE
) {

32757 
JSModuËDef
 *
m
 = 
	`JS_VALUE_GET_PTR
(
obj
);

32758 ià(
	`js_»sŞve_moduË
(
ùx
, 
m
) < 0) {

32759 
	`js_ä“_moduËs
(
ùx
, 
JS_FREE_MODULE_NOT_RESOLVED
);

32764 
	}
}

32769 
	eBCTagEnum
 {

32770 
	mBC_TAG_NULL
 = 1,

32771 
	mBC_TAG_UNDEFINED
,

32772 
	mBC_TAG_BOOL_FALSE
,

32773 
	mBC_TAG_BOOL_TRUE
,

32774 
	mBC_TAG_INT32
,

32775 
	mBC_TAG_FLOAT64
,

32776 
	mBC_TAG_STRING
,

32777 
	mBC_TAG_OBJECT
,

32778 
	mBC_TAG_ARRAY
,

32779 
	mBC_TAG_BIG_INT
,

32780 
	mBC_TAG_BIG_FLOAT
,

32781 
	mBC_TAG_BIG_DECIMAL
,

32782 
	mBC_TAG_TEMPLATE_OBJECT
,

32783 
	mBC_TAG_FUNCTION_BYTECODE
,

32784 
	mBC_TAG_MODULE
,

32785 } 
	tBCTagEnum
;

32787 #ifdeà
CONFIG_BIGNUM


32788 
	#BC_BASE_VERSION
 2

	)

32790 
	#BC_BASE_VERSION
 1

	)

32792 
	#BC_BE_VERSION
 0x40

	)

32793 #ifdeà
WORDS_BIGENDIAN


32794 
	#BC_VERSION
 (
BC_BASE_VERSION
 | 
BC_BE_VERSION
)

	)

32796 
	#BC_VERSION
 
BC_BASE_VERSION


	)

32799 
	sBCWr™”S‹
 {

32800 
JSCÚ‹xt
 *
	mùx
;

32801 
DynBuf
 
	mdbuf
;

32802 
BOOL
 
	mby‹_sw­
;

32803 
BOOL
 
	m®low_by‹code
;

32804 
ušt32_t
 
	mfœ¡_©om
;

32805 
ušt32_t
 *
	m©om_to_idx
;

32806 
	m©om_to_idx_size
;

32807 
JSAtom
 *
	midx_to_©om
;

32808 
	midx_to_©om_couÁ
;

32809 
	midx_to_©om_size
;

32810 } 
	tBCWr™”S‹
;

32812 #ifdeà
DUMP_READ_OBJECT


32813 cÚ¡ * cÚ¡ 
	gbc_g_¡r
[] = {

32833 
	$bc_put_u8
(
BCWr™”S‹
 *
s
, 
ušt8_t
 
v
)

32835 
	`dbuf_putc
(&
s
->
dbuf
, 
v
);

32836 
	}
}

32838 
	$bc_put_u16
(
BCWr™”S‹
 *
s
, 
ušt16_t
 
v
)

32840 ià(
s
->
by‹_sw­
)

32841 
v
 = 
	`bsw­16
(v);

32842 
	`dbuf_put_u16
(&
s
->
dbuf
, 
v
);

32843 
	}
}

32845 
__maybe_unu£d
 
	$bc_put_u32
(
BCWr™”S‹
 *
s
, 
ušt32_t
 
v
)

32847 ià(
s
->
by‹_sw­
)

32848 
v
 = 
	`bsw­32
(v);

32849 
	`dbuf_put_u32
(&
s
->
dbuf
, 
v
);

32850 
	}
}

32852 
	$bc_put_u64
(
BCWr™”S‹
 *
s
, 
ušt64_t
 
v
)

32854 ià(
s
->
by‹_sw­
)

32855 
v
 = 
	`bsw­64
(v);

32856 
	`dbuf_put
(&
s
->
dbuf
, (
ušt8_t
 *)&
v
, (v));

32857 
	}
}

32859 
	$bc_put_Ëb128
(
BCWr™”S‹
 *
s
, 
ušt32_t
 
v
)

32861 
	`dbuf_put_Ëb128
(&
s
->
dbuf
, 
v
);

32862 
	}
}

32864 
	$bc_put_¦eb128
(
BCWr™”S‹
 *
s
, 
št32_t
 
v
)

32866 
	`dbuf_put_¦eb128
(&
s
->
dbuf
, 
v
);

32867 
	}
}

32869 
	$bc_£t_æags
(
ušt32_t
 *
pæags
, *
pidx
, ušt32_ˆ
v®
, 
n
)

32871 *
pæags
 = *pæag | (
v®
 << *
pidx
);

32872 *
pidx
 +ğ
n
;

32873 
	}
}

32875 
	$bc_©om_to_idx
(
BCWr™”S‹
 *
s
, 
ušt32_t
 *
´es
, 
JSAtom
 
©om
)

32877 
ušt32_t
 
v
;

32879 ià(
©om
 < 
s
->
fœ¡_©om
 || 
	`__JS_AtomIsTaggedIÁ
(atom)) {

32880 *
´es
 = 
©om
;

32883 
©om
 -ğ
s
->
fœ¡_©om
;

32884 ià(
©om
 < 
s
->
©om_to_idx_size
 && s->
©om_to_idx
[atom] != 0) {

32885 *
´es
 = 
s
->
©om_to_idx
[
©om
];

32888 ià(
©om
 >ğ
s
->
©om_to_idx_size
) {

32889 
size_t
 
Ãw_size
, 
i
, 
¦ack
;

32890 
ušt32_t
 *
Ãw_b
;

32892 
Ãw_size
 = 
s
->
©om_to_idx_size
 * 3 / 2;

32893 ià((
©om
 + 1è> 
Ãw_size
)

32894 
Ãw_size
 = 
©om
 + 1;

32895 
Ãw_b
 = 
	`js_»®loc2
(
s
->
ùx
, s->
©om_to_idx
,

32896 
Ãw_size
 * (
s
->
©om_to_idx
[0]), &
¦ack
);

32897 ià(!
Ãw_b
)

32898 
ç
;

32899 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_b
);

32900 
i
 = 
s
->
©om_to_idx_size
; i < 
Ãw_size
; i++)

32901 
Ãw_b
[
i
] = 0;

32902 
s
->
©om_to_idx
 = 
Ãw_b
;

32903 
s
->
©om_to_idx_size
 = 
Ãw_size
;

32905 ià((
s
->
idx_to_©om_couÁ
 + 1è> s->
idx_to_©om_size
) {

32906 
size_t
 
Ãw_size
, 
¦ack
;

32907 
JSAtom
 *
Ãw_b
;

32908 
Ãw_size
 = 
s
->
idx_to_©om_size
 * 3 / 2;

32909 ià((
s
->
idx_to_©om_couÁ
 + 1è> 
Ãw_size
)

32910 
Ãw_size
 = 
s
->
idx_to_©om_couÁ
 + 1;

32911 
Ãw_b
 = 
	`js_»®loc2
(
s
->
ùx
, s->
idx_to_©om
,

32912 
Ãw_size
 * (
s
->
idx_to_©om
[0]), &
¦ack
);

32913 ià(!
Ãw_b
)

32914 
ç
;

32915 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_b
);

32916 
s
->
idx_to_©om
 = 
Ãw_b
;

32917 
s
->
idx_to_©om_size
 = 
Ãw_size
;

32920 
v
 = 
s
->
idx_to_©om_couÁ
++;

32921 
s
->
idx_to_©om
[
v
] = 
©om
 + s->
fœ¡_©om
;

32922 
v
 +ğ
s
->
fœ¡_©om
;

32923 
s
->
©om_to_idx
[
©om
] = 
v
;

32924 *
´es
 = 
v
;

32926 
ç
:

32927 *
´es
 = 0;

32929 
	}
}

32931 
	$bc_put_©om
(
BCWr™”S‹
 *
s
, 
JSAtom
 
©om
)

32933 
ušt32_t
 
v
;

32935 ià(
	`__JS_AtomIsTaggedIÁ
(
©om
)) {

32936 
v
 = (
	`__JS_AtomToUIÁ32
(
©om
) << 1) | 1;

32938 ià(
	`bc_©om_to_idx
(
s
, &
v
, 
©om
))

32940 
v
 <<= 1;

32942 
	`bc_put_Ëb128
(
s
, 
v
);

32944 
	}
}

32946 
	$bc_by‹_sw­
(
ušt8_t
 *
bc_buf
, 
bc_Ën
)

32948 
pos
, 
Ën
, 
İ
, 
fmt
;

32950 
pos
 = 0;

32951 
pos
 < 
bc_Ën
) {

32952 
İ
 = 
bc_buf
[
pos
];

32953 
Ën
 = 
	`shÜt_İcode_šfo
(
İ
).
size
;

32954 
fmt
 = 
	`shÜt_İcode_šfo
(
İ
).fmt;

32955 
fmt
) {

32956 
OP_FMT_u16
:

32957 
OP_FMT_i16
:

32958 
OP_FMT_Ïb–16
:

32959 
OP_FMT_Åİ
:

32960 
OP_FMT_loc
:

32961 
OP_FMT_¬g
:

32962 
OP_FMT_v¬_»f
:

32963 
	`put_u16
(
bc_buf
 + 
pos
 + 1,

32964 
	`bsw­16
(
	`g‘_u16
(
bc_buf
 + 
pos
 + 1)));

32966 
OP_FMT_i32
:

32967 
OP_FMT_u32
:

32968 
OP_FMT_cÚ¡
:

32969 
OP_FMT_Ïb–
:

32970 
OP_FMT_©om
:

32971 
OP_FMT_©om_u8
:

32972 
	`put_u32
(
bc_buf
 + 
pos
 + 1,

32973 
	`bsw­32
(
	`g‘_u32
(
bc_buf
 + 
pos
 + 1)));

32975 
OP_FMT_©om_u16
:

32976 
OP_FMT_Ïb–_u16
:

32977 
	`put_u32
(
bc_buf
 + 
pos
 + 1,

32978 
	`bsw­32
(
	`g‘_u32
(
bc_buf
 + 
pos
 + 1)));

32979 
	`put_u16
(
bc_buf
 + 
pos
 + 1 + 4,

32980 
	`bsw­16
(
	`g‘_u16
(
bc_buf
 + 
pos
 + 1 + 4)));

32982 
OP_FMT_©om_Ïb–_u8
:

32983 
OP_FMT_©om_Ïb–_u16
:

32984 
	`put_u32
(
bc_buf
 + 
pos
 + 1,

32985 
	`bsw­32
(
	`g‘_u32
(
bc_buf
 + 
pos
 + 1)));

32986 
	`put_u32
(
bc_buf
 + 
pos
 + 1 + 4,

32987 
	`bsw­32
(
	`g‘_u32
(
bc_buf
 + 
pos
 + 1 + 4)));

32988 ià(
fmt
 =ğ
OP_FMT_©om_Ïb–_u16
) {

32989 
	`put_u16
(
bc_buf
 + 
pos
 + 1 + 4 + 4,

32990 
	`bsw­16
(
	`g‘_u16
(
bc_buf
 + 
pos
 + 1 + 4 + 4)));

32993 
OP_FMT_Åİ_u16
:

32994 
	`put_u16
(
bc_buf
 + 
pos
 + 1,

32995 
	`bsw­16
(
	`g‘_u16
(
bc_buf
 + 
pos
 + 1)));

32996 
	`put_u16
(
bc_buf
 + 
pos
 + 1 + 2,

32997 
	`bsw­16
(
	`g‘_u16
(
bc_buf
 + 
pos
 + 1 + 2)));

33002 
pos
 +ğ
Ën
;

33004 
	}
}

33006 
	$JS_Wr™eFunùiÚBy‹code
(
BCWr™”S‹
 *
s
,

33007 cÚ¡ 
ušt8_t
 *
bc_buf1
, 
bc_Ën
)

33009 
pos
, 
Ën
, 
İ
;

33010 
JSAtom
 
©om
;

33011 
ušt8_t
 *
bc_buf
;

33012 
ušt32_t
 
v®
;

33014 
bc_buf
 = 
	`js_m®loc
(
s
->
ùx
, 
bc_Ën
);

33015 ià(!
bc_buf
)

33017 
	`memıy
(
bc_buf
, 
bc_buf1
, 
bc_Ën
);

33019 
pos
 = 0;

33020 
pos
 < 
bc_Ën
) {

33021 
İ
 = 
bc_buf
[
pos
];

33022 
Ën
 = 
	`shÜt_İcode_šfo
(
İ
).
size
;

33023 
	`shÜt_İcode_šfo
(
İ
).
fmt
) {

33024 
OP_FMT_©om
:

33025 
OP_FMT_©om_u8
:

33026 
OP_FMT_©om_u16
:

33027 
OP_FMT_©om_Ïb–_u8
:

33028 
OP_FMT_©om_Ïb–_u16
:

33029 
©om
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

33030 ià(
	`bc_©om_to_idx
(
s
, &
v®
, 
©om
))

33031 
ç
;

33032 
	`put_u32
(
bc_buf
 + 
pos
 + 1, 
v®
);

33037 
pos
 +ğ
Ën
;

33040 ià(
s
->
by‹_sw­
)

33041 
	`bc_by‹_sw­
(
bc_buf
, 
bc_Ën
);

33043 
	`dbuf_put
(&
s
->
dbuf
, 
bc_buf
, 
bc_Ën
);

33045 
	`js_ä“
(
s
->
ùx
, 
bc_buf
);

33047 
ç
:

33048 
	`js_ä“
(
s
->
ùx
, 
bc_buf
);

33050 
	}
}

33052 
	$JS_Wr™eSŒšg
(
BCWr™”S‹
 *
s
, 
JSSŒšg
 *
p
)

33054 
i
;

33055 
	`bc_put_Ëb128
(
s
, ((
ušt32_t
)
p
->
Ën
 << 1è|…->
is_wide_ch¬
);

33056 ià(
p
->
is_wide_ch¬
) {

33057 
i
 = 0; i < 
p
->
Ën
; i++)

33058 
	`bc_put_u16
(
s
, 
p
->
u
.
¡r16
[
i
]);

33060 
	`dbuf_put
(&
s
->
dbuf
, 
p
->
u
.
¡r8
,…->
Ën
);

33062 
	}
}

33064 #ifdeà
CONFIG_BIGNUM


33065 
	$JS_Wr™eBigNum
(
BCWr™”S‹
 *
s
, 
JSV®ueCÚ¡
 
obj
)

33067 
ušt32_t
 
g
, 
g1
;

33068 
št64_t
 
e
;

33069 
JSBigFlßt
 *
bf
 = 
	`JS_VALUE_GET_PTR
(
obj
);

33070 
bf_t
 *
a
 = &
bf
->
num
;

33071 
size_t
 
Ën
, 
i
, 
n1
, 
j
;

33072 
limb_t
 
v
;

33074 
g
 = 
	`JS_VALUE_GET_TAG
(
obj
);

33075 
g
) {

33076 
JS_TAG_BIG_INT
:

33077 
g1
 = 
BC_TAG_BIG_INT
;

33079 
JS_TAG_BIG_FLOAT
:

33080 
g1
 = 
BC_TAG_BIG_FLOAT
;

33082 
JS_TAG_BIG_DECIMAL
:

33083 
g1
 = 
BC_TAG_BIG_DECIMAL
;

33086 
	`abÜt
();

33088 
	`bc_put_u8
(
s
, 
g1
);

33091 ià(
a
->
ex²
 =ğ
BF_EXP_ZERO
)

33092 
e
 = 0;

33093 ià(
a
->
ex²
 =ğ
BF_EXP_INF
)

33094 
e
 = 1;

33095 ià(
a
->
ex²
 =ğ
BF_EXP_NAN
)

33096 
e
 = 2;

33097 ià(
a
->
ex²
 >= 0)

33098 
e
 = 
a
->
ex²
 + 3;

33100 
e
 = 
a
->
ex²
;

33101 
e
 = (<< 1è| 
a
->
sign
;

33102 ià(
e
 < 
INT32_MIN
 ||ƒ > 
INT32_MAX
) {

33103 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "bignumƒxponent isoo†arge");

33106 
	`bc_put_¦eb128
(
s
, 
e
);

33109 ià(
a
->
Ën
 != 0) {

33110 ià(
g
 !ğ
JS_TAG_BIG_DECIMAL
) {

33111 
i
 = 0;

33112 
i
 < 
a
->
Ën
 &&‡->
b
[i] == 0)

33113 
i
++;

33114 
	`as£¹
(
i
 < 
a
->
Ën
);

33115 
v
 = 
a
->
b
[
i
];

33116 
n1
 = (
limb_t
);

33117 (
v
 & 0xff) == 0) {

33118 
n1
--;

33119 
v
 >>= 8;

33121 
i
++;

33122 
Ën
 = (
a
->ËÀ- 
i
è* (
limb_t
è+ 
n1
;

33123 ià(
Ën
 > 
INT32_MAX
) {

33124 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "bignum isoo†arge");

33127 
	`bc_put_Ëb128
(
s
, 
Ën
);

33129 
j
 = 0; j < 
n1
; j++) {

33130 
	`dbuf_putc
(&
s
->
dbuf
, 
v
 >> (
j
 * 8));

33132 ; 
i
 < 
a
->
Ën
; i++) {

33133 
limb_t
 
v
 = 
a
->
b
[
i
];

33134 #ià
LIMB_BITS
 == 32

33135 #ifdeà
WORDS_BIGENDIAN


33136 
v
 = 
	`bsw­32
(v);

33138 
	`dbuf_put_u32
(&
s
->
dbuf
, 
v
);

33140 #ifdeà
WORDS_BIGENDIAN


33141 
v
 = 
	`bsw­64
(v);

33143 
	`dbuf_put_u64
(&
s
->
dbuf
, 
v
);

33147 
bpos
, 
d
;

33148 
ušt8_t
 
v8
;

33149 
size_t
 
i0
;

33152 
i
 = 0;

33153 
i
 < 
a
->
Ën
 &&‡->
b
[i] == 0)

33154 
i
++;

33155 
	`as£¹
(
i
 < 
a
->
Ën
);

33156 
Ën
 = 
a
->ËÀ* 
LIMB_DIGITS
;

33157 
v
 = 
a
->
b
[
i
];

33158 
j
 = 0;

33159 (
v
 % 10) == 0) {

33160 
j
++;

33161 
v
 /= 10;

33163 
Ën
 -ğ
j
;

33164 
	`as£¹
(
Ën
 > 0);

33165 ià(
Ën
 > 
INT32_MAX
) {

33166 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "bignum isoo†arge");

33169 
	`bc_put_Ëb128
(
s
, 
Ën
);

33171 
bpos
 = 0;

33172 
v8
 = 0;

33173 
i0
 = 
i
;

33174 ; 
i
 < 
a
->
Ën
; i++) {

33175 ià(
i
 !ğ
i0
) {

33176 
v
 = 
a
->
b
[
i
];

33177 
j
 = 0;

33179 ; 
j
 < 
LIMB_DIGITS
; j++) {

33180 
d
 = 
v
 % 10;

33181 
v
 /= 10;

33182 ià(
bpos
 == 0) {

33183 
v8
 = 
d
;

33184 
bpos
 = 1;

33186 
	`dbuf_putc
(&
s
->
dbuf
, 
v8
 | (
d
 << 4));

33187 
bpos
 = 0;

33192 ià(
bpos
) {

33193 
	`dbuf_putc
(&
s
->
dbuf
, 
v8
);

33198 
	}
}

33201 
	$JS_Wr™eObjeùRec
(
BCWr™”S‹
 *
s
, 
JSV®ueCÚ¡
 
obj
)

33203 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
obj
);

33205 
g
) {

33206 
JS_TAG_NULL
:

33207 
	`bc_put_u8
(
s
, 
BC_TAG_NULL
);

33209 
JS_TAG_UNDEFINED
:

33210 
	`bc_put_u8
(
s
, 
BC_TAG_UNDEFINED
);

33212 
JS_TAG_BOOL
:

33213 
	`bc_put_u8
(
s
, 
BC_TAG_BOOL_FALSE
 + 
	`JS_VALUE_GET_INT
(
obj
));

33215 
JS_TAG_INT
:

33216 
	`bc_put_u8
(
s
, 
BC_TAG_INT32
);

33217 
	`bc_put_¦eb128
(
s
, 
	`JS_VALUE_GET_INT
(
obj
));

33219 
JS_TAG_FLOAT64
:

33221 
JSFlßt64UniÚ
 
u
;

33222 
	`bc_put_u8
(
s
, 
BC_TAG_FLOAT64
);

33223 
u
.
d
 = 
	`JS_VALUE_GET_FLOAT64
(
obj
);

33224 
	`bc_put_u64
(
s
, 
u
.
u64
);

33227 
JS_TAG_STRING
:

33229 
JSSŒšg
 *
p
 = 
	`JS_VALUE_GET_STRING
(
obj
);

33230 
	`bc_put_u8
(
s
, 
BC_TAG_STRING
);

33231 
	`JS_Wr™eSŒšg
(
s
, 
p
);

33234 
JS_TAG_FUNCTION_BYTECODE
:

33236 
JSFunùiÚBy‹code
 *
b
 = 
	`JS_VALUE_GET_PTR
(
obj
);

33237 
ušt32_t
 
æags
;

33238 
idx
, 
i
;

33240 ià(!
s
->
®low_by‹code
)

33241 
šv®id_g
;

33242 
	`bc_put_u8
(
s
, 
BC_TAG_FUNCTION_BYTECODE
);

33243 
æags
 = 
idx
 = 0;

33244 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
has_´ÙÙy³
, 1);

33245 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
has_sim¶e_·¿m‘”_li¡
, 1);

33246 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
is_d”ived_şass_cÚ¡ruùÜ
, 1);

33247 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
Ãed_home_objeù
, 1);

33248 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
func_kšd
, 2);

33249 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
Ãw_rg‘_®lowed
, 1);

33250 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
su³r_ÿÎ_®lowed
, 1);

33251 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
su³r_®lowed
, 1);

33252 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
¬gum’ts_®lowed
, 1);

33253 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
has_debug
, 1);

33254 
	`bc_£t_æags
(&
æags
, &
idx
, 
b
->
backŒaû_b¬r›r
, 1);

33255 
	`as£¹
(
idx
 <= 16);

33256 
	`bc_put_u16
(
s
, 
æags
);

33257 
	`bc_put_u8
(
s
, 
b
->
js_mode
);

33258 
	`bc_put_©om
(
s
, 
b
->
func_Çme
);

33260 
	`bc_put_Ëb128
(
s
, 
b
->
¬g_couÁ
);

33261 
	`bc_put_Ëb128
(
s
, 
b
->
v¬_couÁ
);

33262 
	`bc_put_Ëb128
(
s
, 
b
->
defšed_¬g_couÁ
);

33263 
	`bc_put_Ëb128
(
s
, 
b
->
¡ack_size
);

33264 
	`bc_put_Ëb128
(
s
, 
b
->
şosu»_v¬_couÁ
);

33265 
	`bc_put_Ëb128
(
s
, 
b
->
ıoŞ_couÁ
);

33266 
	`bc_put_Ëb128
(
s
, 
b
->
by‹_code_Ën
);

33267 ià(
b
->
v¬defs
) {

33268 
	`bc_put_Ëb128
(
s
, 
b
->
¬g_couÁ
 + b->
v¬_couÁ
);

33269 
i
 = 0; i < 
b
->
¬g_couÁ
 + b->
v¬_couÁ
; i++) {

33270 
JSV¬Def
 *
vd
 = &
b
->
v¬defs
[
i
];

33271 
	`bc_put_©om
(
s
, 
vd
->
v¬_Çme
);

33272 
	`bc_put_Ëb128
(
s
, 
vd
->
scİe_Ëv–
);

33273 
	`bc_put_Ëb128
(
s
, 
vd
->
scİe_Ãxt
 + 1);

33274 
æags
 = 
idx
 = 0;

33275 
	`bc_£t_æags
(&
æags
, &
idx
, 
vd
->
v¬_kšd
, 4);

33276 
	`bc_£t_æags
(&
æags
, &
idx
, 
vd
->
is_func_v¬
, 1);

33277 
	`bc_£t_æags
(&
æags
, &
idx
, 
vd
->
is_cÚ¡
, 1);

33278 
	`bc_£t_æags
(&
æags
, &
idx
, 
vd
->
is_Ëxiÿl
, 1);

33279 
	`bc_£t_æags
(&
æags
, &
idx
, 
vd
->
is_ÿ±u»d
, 1);

33280 
	`as£¹
(
idx
 <= 8);

33281 
	`bc_put_u8
(
s
, 
æags
);

33284 
	`bc_put_Ëb128
(
s
, 0);

33287 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

33288 
JSClosu»V¬
 *
cv
 = &
b
->
şosu»_v¬
[
i
];

33289 
	`bc_put_©om
(
s
, 
cv
->
v¬_Çme
);

33290 
	`bc_put_Ëb128
(
s
, 
cv
->
v¬_idx
);

33291 
æags
 = 
idx
 = 0;

33292 
	`bc_£t_æags
(&
æags
, &
idx
, 
cv
->
is_loÿl
, 1);

33293 
	`bc_£t_æags
(&
æags
, &
idx
, 
cv
->
is_¬g
, 1);

33294 
	`bc_£t_æags
(&
æags
, &
idx
, 
cv
->
is_cÚ¡
, 1);

33295 
	`bc_£t_æags
(&
æags
, &
idx
, 
cv
->
is_Ëxiÿl
, 1);

33296 
	`bc_£t_æags
(&
æags
, &
idx
, 
cv
->
v¬_kšd
, 4);

33297 
	`as£¹
(
idx
 <= 8);

33298 
	`bc_put_u8
(
s
, 
æags
);

33301 ià(
	`JS_Wr™eFunùiÚBy‹code
(
s
, 
b
->
by‹_code_buf
, b->
by‹_code_Ën
))

33302 
ç
;

33304 ià(
b
->
has_debug
) {

33305 
	`bc_put_©om
(
s
, 
b
->
debug
.
f’ame
);

33306 
	`bc_put_Ëb128
(
s
, 
b
->
debug
.
lše_num
);

33307 
	`bc_put_Ëb128
(
s
, 
b
->
debug
.
pc2lše_Ën
);

33308 
	`dbuf_put
(&
s
->
dbuf
, 
b
->
debug
.
pc2lše_buf
, b->debug.
pc2lše_Ën
);

33311 
i
 = 0; i < 
b
->
ıoŞ_couÁ
; i++) {

33312 ià(
	`JS_Wr™eObjeùRec
(
s
, 
b
->
ıoŞ
[
i
]))

33313 
ç
;

33317 
JS_TAG_MODULE
:

33319 
JSModuËDef
 *
m
 = 
	`JS_VALUE_GET_PTR
(
obj
);

33320 
i
;

33322 ià(!
s
->
®low_by‹code
)

33323 
šv®id_g
;

33324 
	`bc_put_u8
(
s
, 
BC_TAG_MODULE
);

33325 
	`bc_put_©om
(
s
, 
m
->
moduË_Çme
);

33327 
	`bc_put_Ëb128
(
s
, 
m
->
»q_moduË_’Œ›s_couÁ
);

33328 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

33329 
JSReqModuËEÁry
 *
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

33330 
	`bc_put_©om
(
s
, 
rme
->
moduË_Çme
);

33333 
	`bc_put_Ëb128
(
s
, 
m
->
expÜt_’Œ›s_couÁ
);

33334 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

33335 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

33336 
	`bc_put_u8
(
s
, 
me
->
expÜt_ty³
);

33337 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
) {

33338 
	`bc_put_Ëb128
(
s
, 
me
->
u
.
loÿl
.
v¬_idx
);

33340 
	`bc_put_Ëb128
(
s
, 
me
->
u
.
»q_moduË_idx
);

33341 
	`bc_put_©om
(
s
, 
me
->
loÿl_Çme
);

33343 
	`bc_put_©om
(
s
, 
me
->
expÜt_Çme
);

33346 
	`bc_put_Ëb128
(
s
, 
m
->
¡¬_expÜt_’Œ›s_couÁ
);

33347 
i
 = 0; i < 
m
->
¡¬_expÜt_’Œ›s_couÁ
; i++) {

33348 
JSSrExpÜtEÁry
 *
£
 = &
m
->
¡¬_expÜt_’Œ›s
[
i
];

33349 
	`bc_put_Ëb128
(
s
, 
£
->
»q_moduË_idx
);

33352 
	`bc_put_Ëb128
(
s
, 
m
->
impÜt_’Œ›s_couÁ
);

33353 
i
 = 0; i < 
m
->
impÜt_’Œ›s_couÁ
; i++) {

33354 
JSImpÜtEÁry
 *
mi
 = &
m
->
impÜt_’Œ›s
[
i
];

33355 
	`bc_put_Ëb128
(
s
, 
mi
->
v¬_idx
);

33356 
	`bc_put_©om
(
s
, 
mi
->
impÜt_Çme
);

33357 
	`bc_put_Ëb128
(
s
, 
mi
->
»q_moduË_idx
);

33360 ià(
	`JS_Wr™eObjeùRec
(
s
, 
m
->
func_obj
))

33361 
ç
;

33364 
JS_TAG_OBJECT
:

33366 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

33367 
ušt32_t
 
i
, 
´İ_couÁ
, 
Ën
;

33368 
JSSh­e
 *
sh
;

33369 
JSSh­ePrİ”ty
 *
´
;

33370 
JSV®ue
 
v®
;

33371 
»t
, 
·ss
;

33372 
BOOL
 
is_‹m¶©e
;

33373 
JSAtom
 
©om
;

33375 ià(
p
->
şass_id
 !ğ
JS_CLASS_ARRAY
 &&

33376 
p
->
şass_id
 !ğ
JS_CLASS_OBJECT
) {

33377 
	`JS_ThrowTy³E¼Ü
(
s
->
ùx
, "unsupported object class");

33378 
ç
;

33380 ià(
p
->
tmp_m¬k
) {

33381 
	`JS_ThrowTy³E¼Ü
(
s
->
ùx
, "circular„eference");

33382 
ç
;

33384 
p
->
tmp_m¬k
 = 1;

33385 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
) {

33386 ià(
s
->
®low_by‹code
 && !
p
->
ex‹nsibË
) {

33389 
	`bc_put_u8
(
s
, 
BC_TAG_TEMPLATE_OBJECT
);

33390 
is_‹m¶©e
 = 
TRUE
;

33392 
	`bc_put_u8
(
s
, 
BC_TAG_ARRAY
);

33393 
is_‹m¶©e
 = 
FALSE
;

33395 ià(
	`js_g‘_Ëngth32
(
s
->
ùx
, &
Ën
, 
obj
))

33396 
ç1
;

33397 
	`bc_put_Ëb128
(
s
, 
Ën
);

33398 
i
 = 0; i < 
Ën
; i++) {

33399 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
s
->
ùx
, 
obj
, 
i
);

33400 ià(
	`JS_IsExû±iÚ
(
v®
))

33401 
ç1
;

33402 
»t
 = 
	`JS_Wr™eObjeùRec
(
s
, 
v®
);

33403 
	`JS_F»eV®ue
(
s
->
ùx
, 
v®
);

33404 ià(
»t
)

33405 
ç1
;

33407 ià(
is_‹m¶©e
) {

33408 
v®
 = 
	`JS_G‘Prİ”ty
(
s
->
ùx
, 
obj
, 
JS_ATOM_¿w
);

33409 ià(
	`JS_IsExû±iÚ
(
v®
))

33410 
ç1
;

33411 
»t
 = 
	`JS_Wr™eObjeùRec
(
s
, 
v®
);

33412 
	`JS_F»eV®ue
(
s
->
ùx
, 
v®
);

33413 ià(
»t
)

33414 
ç1
;

33417 
	`bc_put_u8
(
s
, 
BC_TAG_OBJECT
);

33418 
´İ_couÁ
 = 0;

33419 
sh
 = 
p
->
sh­e
;

33420 
·ss
 = 0;…ass < 2;…ass++) {

33421 ià(
·ss
 == 1)

33422 
	`bc_put_Ëb128
(
s
, 
´İ_couÁ
);

33423 
i
 = 0, 
´
 = 
	`g‘_sh­e_´İ
(
sh
); i < sh->
´İ_couÁ
; i++,…r++) {

33424 
©om
 = 
´
->atom;

33425 ià(
©om
 !ğ
JS_ATOM_NULL
 &&

33426 
	`JS_AtomIsSŒšg
(
s
->
ùx
, 
©om
) &&

33427 (
´
->
æags
 & 
JS_PROP_ENUMERABLE
)) {

33428 ià(
´
->
æags
 & 
JS_PROP_TMASK
) {

33429 
	`JS_ThrowTy³E¼Ü
(
s
->
ùx
, "only value…roperties‡re supported");

33430 
ç
;

33432 ià(
·ss
 == 0) {

33433 
´İ_couÁ
++;

33435 
	`bc_put_©om
(
s
, 
©om
);

33436 ià(
	`JS_Wr™eObjeùRec
(
s
, 
p
->
´İ
[
i
].
u
.
v®ue
)) {

33437 
ç1
:

33438 
p
->
tmp_m¬k
 = 0;

33439 
ç
;

33446 
p
->
tmp_m¬k
 = 0;

33449 #ifdeà
CONFIG_BIGNUM


33450 
JS_TAG_BIG_INT
:

33451 
JS_TAG_BIG_FLOAT
:

33452 
JS_TAG_BIG_DECIMAL
:

33453 ià(
	`JS_Wr™eBigNum
(
s
, 
obj
))

33454 
ç
;

33458 
šv®id_g
:

33459 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "unsuµÜ‹dag (%d)", 
g
);

33460 
ç
;

33464 
ç
:

33466 
	}
}

33469 
	$JS_Wr™eObjeùAtoms
(
BCWr™”S‹
 *
s
)

33471 
JSRuÁime
 *
¹
 = 
s
->
ùx
->rt;

33472 
DynBuf
 
dbuf1
;

33473 
i
, 
©oms_size
;

33474 
ušt8_t
 
v”siÚ
;

33476 
dbuf1
 = 
s
->
dbuf
;

33477 
	`js_dbuf_š™
(
s
->
ùx
, &s->
dbuf
);

33479 
v”siÚ
 = 
BC_VERSION
;

33480 ià(
s
->
by‹_sw­
)

33481 
v”siÚ
 ^ğ
BC_BE_VERSION
;

33482 
	`bc_put_u8
(
s
, 
v”siÚ
);

33484 
	`bc_put_Ëb128
(
s
, s->
idx_to_©om_couÁ
);

33485 
i
 = 0; i < 
s
->
idx_to_©om_couÁ
; i++) {

33486 
JSAtomSŒuù
 *
p
 = 
¹
->
©om_¬¿y
[
s
->
idx_to_©om
[
i
]];

33487 
	`JS_Wr™eSŒšg
(
s
, 
p
);

33494 
©oms_size
 = 
s
->
dbuf
.
size
;

33495 ià(
	`dbuf_»®loc
(&
dbuf1
, dbuf1.
size
 + 
©oms_size
))

33496 
ç
;

33497 
	`memmove
(
dbuf1
.
buf
 + 
©oms_size
, dbuf1.buf, dbuf1.
size
);

33498 
	`memıy
(
dbuf1
.
buf
, 
s
->
dbuf
.buf, 
©oms_size
);

33499 
dbuf1
.
size
 +ğ
©oms_size
;

33500 
	`dbuf_ä“
(&
s
->
dbuf
);

33501 
s
->
dbuf
 = 
dbuf1
;

33503 
ç
:

33504 
	`dbuf_ä“
(&
dbuf1
);

33506 
	}
}

33508 
ušt8_t
 *
	$JS_Wr™eObjeù
(
JSCÚ‹xt
 *
ùx
, 
size_t
 *
psize
, 
JSV®ueCÚ¡
 
obj
,

33509 
æags
)

33511 
BCWr™”S‹
 
ss
, *
s
 = &ss;

33513 
	`mem£t
(
s
, 0, (*s));

33514 
s
->
ùx
 = ctx;

33516 
s
->
by‹_sw­
 = ((
æags
 & 
JS_WRITE_OBJ_BSWAP
) != 0);

33517 
s
->
®low_by‹code
 = ((
æags
 & 
JS_WRITE_OBJ_BYTECODE
) != 0);

33519 ià(
s
->
®low_by‹code
)

33520 
s
->
fœ¡_©om
 = 
JS_ATOM_END
;

33522 
s
->
fœ¡_©om
 = 1;

33523 
	`js_dbuf_š™
(
ùx
, &
s
->
dbuf
);

33525 ià(
	`JS_Wr™eObjeùRec
(
s
, 
obj
))

33526 
ç
;

33527 ià(
	`JS_Wr™eObjeùAtoms
(
s
))

33528 
ç
;

33529 
	`js_ä“
(
ùx
, 
s
->
©om_to_idx
);

33530 
	`js_ä“
(
ùx
, 
s
->
idx_to_©om
);

33531 *
psize
 = 
s
->
dbuf
.
size
;

33532  
s
->
dbuf
.
buf
;

33533 
ç
:

33534 
	`js_ä“
(
ùx
, 
s
->
©om_to_idx
);

33535 
	`js_ä“
(
ùx
, 
s
->
idx_to_©om
);

33536 
	`dbuf_ä“
(&
s
->
dbuf
);

33537 *
psize
 = 0;

33538  
NULL
;

33539 
	}
}

33541 
	sBCR—d”S‹
 {

33542 
JSCÚ‹xt
 *
	mùx
;

33543 cÚ¡ 
ušt8_t
 *
	mbuf_¡¬t
, *
	m±r
, *
	mbuf_’d
;

33544 
ušt32_t
 
	mfœ¡_©om
;

33545 
ušt32_t
 
	midx_to_©om_couÁ
;

33546 
JSAtom
 *
	midx_to_©om
;

33547 
	m”rÜ_¡©e
;

33548 
BOOL
 
	m®low_by‹code
;

33549 
BOOL
 
	mis_rom_d©a
;

33550 #ifdeà
DUMP_READ_OBJECT


33551 cÚ¡ 
ušt8_t
 *
	m±r_Ï¡
;

33552 
	mËv–
;

33554 } 
	tBCR—d”S‹
;

33556 #ifdeà
DUMP_READ_OBJECT


33557 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$bc_»ad_Œaû
(
BCR—d”S‹
 *
s
, cÚ¡ *
fmt
, ...) {

33558 
va_li¡
 
­
;

33559 
i
, 
n
, 
n0
;

33561 ià(!
s
->
±r_Ï¡
)

33562 
s
->
±r_Ï¡
 = s->
buf_¡¬t
;

33564 
n
 = 
n0
 = 0;

33565 ià(
s
->
±r
 > s->
±r_Ï¡
 || s->±¸=ğs->
buf_¡¬t
) {

33566 
n0
 = 
	`´štf
("%04x: ", ()(
s
->
±r_Ï¡
 - s->
buf_¡¬t
));

33567 
n
 +ğ
n0
;

33569 
i
 = 0; 
s
->
±r_Ï¡
 < s->
±r
; i++) {

33570 ià((
i
 & 7) == 0 && i > 0) {

33571 
	`´štf
("\n%*s", 
n0
, "");

33572 
n
 = 
n0
;

33574 
n
 +ğ
	`´štf
(" %02x", *
s
->
±r_Ï¡
++);

33576 ià(*
fmt
 == '}')

33577 
s
->
Ëv–
--;

33578 ià(
n
 < 32 + 
s
->
Ëv–
 * 2) {

33579 
	`´štf
("%*s", 32 + 
s
->
Ëv–
 * 2 - 
n
, "");

33581 
	`va_¡¬t
(
­
, 
fmt
);

33582 
	`vårštf
(
¡dout
, 
fmt
, 
­
);

33583 
	`va_’d
(
­
);

33584 ià(
	`¡rchr
(
fmt
, '{'))

33585 
s
->
Ëv–
++;

33586 
	}
}

33588 
	#bc_»ad_Œaû
(...)

	)

33591 
	$bc_»ad_”rÜ_’d
(
BCR—d”S‹
 *
s
)

33593 ià(!
s
->
”rÜ_¡©e
) {

33594 
	`JS_ThrowSyÁaxE¼Ü
(
s
->
ùx
, "read‡fterheƒnd ofhe buffer");

33596  
s
->
”rÜ_¡©e
 = -1;

33597 
	}
}

33599 
	$bc_g‘_u8
(
BCR—d”S‹
 *
s
, 
ušt8_t
 *
pv®
)

33601 ià(
	`uÆik–y
(
s
->
buf_’d
 - s->
±r
 < 1)) {

33602 *
pv®
 = 0;

33603  
	`bc_»ad_”rÜ_’d
(
s
);

33605 *
pv®
 = *
s
->
±r
++;

33607 
	}
}

33609 
	$bc_g‘_u16
(
BCR—d”S‹
 *
s
, 
ušt16_t
 *
pv®
)

33611 ià(
	`uÆik–y
(
s
->
buf_’d
 - s->
±r
 < 2)) {

33612 *
pv®
 = 0;

33613  
	`bc_»ad_”rÜ_’d
(
s
);

33615 *
pv®
 = 
	`g‘_u16
(
s
->
±r
);

33616 
s
->
±r
 += 2;

33618 
	}
}

33620 
__maybe_unu£d
 
	$bc_g‘_u32
(
BCR—d”S‹
 *
s
, 
ušt32_t
 *
pv®
)

33622 ià(
	`uÆik–y
(
s
->
buf_’d
 - s->
±r
 < 4)) {

33623 *
pv®
 = 0;

33624  
	`bc_»ad_”rÜ_’d
(
s
);

33626 *
pv®
 = 
	`g‘_u32
(
s
->
±r
);

33627 
s
->
±r
 += 4;

33629 
	}
}

33631 
	$bc_g‘_u64
(
BCR—d”S‹
 *
s
, 
ušt64_t
 *
pv®
)

33633 ià(
	`uÆik–y
(
s
->
buf_’d
 - s->
±r
 < 8)) {

33634 *
pv®
 = 0;

33635  
	`bc_»ad_”rÜ_’d
(
s
);

33637 *
pv®
 = 
	`g‘_u64
(
s
->
±r
);

33638 
s
->
±r
 += 8;

33640 
	}
}

33642 
	$bc_g‘_Ëb128
(
BCR—d”S‹
 *
s
, 
ušt32_t
 *
pv®
)

33644 
»t
;

33645 
»t
 = 
	`g‘_Ëb128
(
pv®
, 
s
->
±r
, s->
buf_’d
);

33646 ià(
	`uÆik–y
(
»t
 < 0))

33647  
	`bc_»ad_”rÜ_’d
(
s
);

33648 
s
->
±r
 +ğ
»t
;

33650 
	}
}

33652 
	$bc_g‘_¦eb128
(
BCR—d”S‹
 *
s
, 
št32_t
 *
pv®
)

33654 
»t
;

33655 
»t
 = 
	`g‘_¦eb128
(
pv®
, 
s
->
±r
, s->
buf_’d
);

33656 ià(
	`uÆik–y
(
»t
 < 0))

33657  
	`bc_»ad_”rÜ_’d
(
s
);

33658 
s
->
±r
 +ğ
»t
;

33660 
	}
}

33663 
	$bc_g‘_Ëb128_št
(
BCR—d”S‹
 *
s
, *
pv®
)

33665  
	`bc_g‘_Ëb128
(
s
, (
ušt32_t
 *)
pv®
);

33666 
	}
}

33668 
	$bc_g‘_Ëb128_u16
(
BCR—d”S‹
 *
s
, 
ušt16_t
 *
pv®
)

33670 
ušt32_t
 
v®
;

33671 ià(
	`bc_g‘_Ëb128
(
s
, &
v®
)) {

33672 *
pv®
 = 0;

33675 *
pv®
 = 
v®
;

33677 
	}
}

33679 
	$bc_g‘_buf
(
BCR—d”S‹
 *
s
, 
ušt8_t
 *
buf
, 
ušt32_t
 
buf_Ën
)

33681 ià(
buf_Ën
 != 0) {

33682 ià(
	`uÆik–y
(!
buf
 || 
s
->
buf_’d
 - s->
±r
 < 
buf_Ën
))

33683  
	`bc_»ad_”rÜ_’d
(
s
);

33684 
	`memıy
(
buf
, 
s
->
±r
, 
buf_Ën
);

33685 
s
->
±r
 +ğ
buf_Ën
;

33688 
	}
}

33690 
	$bc_idx_to_©om
(
BCR—d”S‹
 *
s
, 
JSAtom
 *
·tom
, 
ušt32_t
 
idx
)

33692 
JSAtom
 
©om
;

33694 ià(
	`__JS_AtomIsTaggedIÁ
(
idx
)) {

33695 
©om
 = 
idx
;

33696 } ià(
idx
 < 
s
->
fœ¡_©om
) {

33697 
©om
 = 
	`JS_DupAtom
(
s
->
ùx
, 
idx
);

33699 
idx
 -ğ
s
->
fœ¡_©om
;

33700 ià(
idx
 >ğ
s
->
idx_to_©om_couÁ
) {

33701 
	`JS_ThrowSyÁaxE¼Ü
(
s
->
ùx
, "invalid‡tom index (pos=%u)",

33702 ()(
s
->
±r
 - s->
buf_¡¬t
));

33703 *
·tom
 = 
JS_ATOM_NULL
;

33704  
s
->
”rÜ_¡©e
 = -1;

33706 
©om
 = 
	`JS_DupAtom
(
s
->
ùx
, s->
idx_to_©om
[
idx
]);

33708 *
·tom
 = 
©om
;

33710 
	}
}

33712 
	$bc_g‘_©om
(
BCR—d”S‹
 *
s
, 
JSAtom
 *
·tom
)

33714 
ušt32_t
 
v
;

33715 ià(
	`bc_g‘_Ëb128
(
s
, &
v
))

33717 ià(
v
 & 1) {

33718 *
·tom
 = 
	`__JS_AtomFromUIÁ32
(
v
 >> 1);

33721  
	`bc_idx_to_©om
(
s
, 
·tom
, 
v
 >> 1);

33723 
	}
}

33725 
JSSŒšg
 *
	$JS_R—dSŒšg
(
BCR—d”S‹
 *
s
)

33727 
ušt32_t
 
Ën
;

33728 
size_t
 
size
;

33729 
BOOL
 
is_wide_ch¬
;

33730 
JSSŒšg
 *
p
;

33732 ià(
	`bc_g‘_Ëb128
(
s
, &
Ën
))

33733  
NULL
;

33734 
is_wide_ch¬
 = 
Ën
 & 1;

33735 
Ën
 >>= 1;

33736 
p
 = 
	`js_®loc_¡ršg
(
s
->
ùx
, 
Ën
, 
is_wide_ch¬
);

33737 ià(!
p
) {

33738 
s
->
”rÜ_¡©e
 = -1;

33739  
NULL
;

33741 
size
 = (
size_t
)
Ën
 << 
is_wide_ch¬
;

33742 ià((
s
->
buf_’d
 - s->
±r
è< 
size
) {

33743 
	`bc_»ad_”rÜ_’d
(
s
);

33744 
	`js_ä“_¡ršg
(
s
->
ùx
->
¹
, 
p
);

33745  
NULL
;

33747 
	`memıy
(
p
->
u
.
¡r8
, 
s
->
±r
, 
size
);

33748 
s
->
±r
 +ğ
size
;

33749 ià(!
is_wide_ch¬
) {

33750 
p
->
u
.
¡r8
[
size
] = '\0';

33752 #ifdeà
DUMP_READ_OBJECT


33753 
	`bc_»ad_Œaû
(
s
, "¡ršg: "); 
	`JS_DumpSŒšg
(s->
ùx
->
¹
, 
p
); 
	`´štf
("\n");

33755  
p
;

33756 
	}
}

33758 
ušt32_t
 
	$bc_g‘_æags
(
ušt32_t
 
æags
, *
pidx
, 
n
)

33760 
ušt32_t
 
v®
;

33762 
v®
 = (
æags
 >> *
pidx
è& ((1U << 
n
) - 1);

33763 *
pidx
 +ğ
n
;

33764  
v®
;

33765 
	}
}

33767 
	$JS_R—dFunùiÚBy‹code
(
BCR—d”S‹
 *
s
, 
JSFunùiÚBy‹code
 *
b
,

33768 
by‹_code_off£t
, 
ušt32_t
 
bc_Ën
)

33770 
ušt8_t
 *
bc_buf
;

33771 
pos
, 
Ën
, 
İ
;

33772 
JSAtom
 
©om
;

33773 
ušt32_t
 
idx
;

33775 ià(
s
->
is_rom_d©a
) {

33777 ià(
	`uÆik–y
(
s
->
buf_’d
 - s->
±r
 < 
bc_Ën
))

33778  
	`bc_»ad_”rÜ_’d
(
s
);

33779 
bc_buf
 = (
ušt8_t
 *)
s
->
±r
;

33780 
s
->
±r
 +ğ
bc_Ën
;

33782 
bc_buf
 = (*)((
ušt8_t
*)
b
 + 
by‹_code_off£t
);

33783 ià(
	`bc_g‘_buf
(
s
, 
bc_buf
, 
bc_Ën
))

33786 
b
->
by‹_code_buf
 = 
bc_buf
;

33788 
pos
 = 0;

33789 
pos
 < 
bc_Ën
) {

33790 
İ
 = 
bc_buf
[
pos
];

33791 
Ën
 = 
	`shÜt_İcode_šfo
(
İ
).
size
;

33792 
	`shÜt_İcode_šfo
(
İ
).
fmt
) {

33793 
OP_FMT_©om
:

33794 
OP_FMT_©om_u8
:

33795 
OP_FMT_©om_u16
:

33796 
OP_FMT_©om_Ïb–_u8
:

33797 
OP_FMT_©om_Ïb–_u16
:

33798 
idx
 = 
	`g‘_u32
(
bc_buf
 + 
pos
 + 1);

33799 ià(
s
->
is_rom_d©a
) {

33801 
	`JS_DupAtom
(
s
->
ùx
, (
JSAtom
)
idx
);

33803 ià(
	`bc_idx_to_©om
(
s
, &
©om
, 
idx
)) {

33805 
b
->
by‹_code_Ën
 = 
pos
;

33808 
	`put_u32
(
bc_buf
 + 
pos
 + 1, 
©om
);

33809 #ifdeà
DUMP_READ_OBJECT


33810 
	`bc_»ad_Œaû
(
s
, "© %d, fixu°©om: ", 
pos
 + 1); 
	`´št_©om
(s->
ùx
, 
©om
); 
	`´štf
("\n");

33817 
pos
 +ğ
Ën
;

33820 
	}
}

33822 #ifdeà
CONFIG_BIGNUM


33823 
JSV®ue
 
	$JS_R—dBigNum
(
BCR—d”S‹
 *
s
, 
g
)

33825 
JSV®ue
 
obj
 = 
JS_UNDEFINED
;

33826 
ušt8_t
 
v8
;

33827 
št32_t
 
e
;

33828 
ušt32_t
 
Ën
;

33829 
limb_t
 
l
, 
i
, 
n
, 
j
;

33830 
JSBigFlßt
 *
p
;

33831 
limb_t
 
v
;

33832 
bf_t
 *
a
;

33833 
bpos
, 
d
;

33835 
	`bc_»ad_Œaû
(
s
, "% {\n", 
bc_g_¡r
[
g
]);

33837 
p
 = 
	`js_Ãw_bf
(
s
->
ùx
);

33838 ià(!
p
)

33839 
ç
;

33840 
g
) {

33841 
BC_TAG_BIG_INT
:

33842 
obj
 = 
	`JS_MKPTR
(
JS_TAG_BIG_INT
, 
p
);

33844 
BC_TAG_BIG_FLOAT
:

33845 
obj
 = 
	`JS_MKPTR
(
JS_TAG_BIG_FLOAT
, 
p
);

33847 
BC_TAG_BIG_DECIMAL
:

33848 
obj
 = 
	`JS_MKPTR
(
JS_TAG_BIG_DECIMAL
, 
p
);

33851 
	`abÜt
();

33855 ià(
	`bc_g‘_¦eb128
(
s
, &
e
))

33856 
ç
;

33858 
a
 = &
p
->
num
;

33859 
a
->
sign
 = 
e
 & 1;

33860 
e
 >>= 1;

33861 ià(
e
 == 0)

33862 
a
->
ex²
 = 
BF_EXP_ZERO
;

33863 ià(
e
 == 1)

33864 
a
->
ex²
 = 
BF_EXP_INF
;

33865 ià(
e
 == 2)

33866 
a
->
ex²
 = 
BF_EXP_NAN
;

33867 ià(
e
 >= 3)

33868 
a
->
ex²
 = 
e
 - 3;

33870 
a
->
ex²
 = 
e
;

33873 ià(
a
->
ex²
 !ğ
BF_EXP_ZERO
 &&

33874 
a
->
ex²
 !ğ
BF_EXP_INF
 &&

33875 
a
->
ex²
 !ğ
BF_EXP_NAN
) {

33876 ià(
	`bc_g‘_Ëb128
(
s
, &
Ën
))

33877 
ç
;

33878 
	`bc_»ad_Œaû
(
s
, "Ën=%" 
PRId64
 "\n", (
št64_t
)
Ën
);

33879 ià(
Ën
 == 0) {

33880 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "invalid bignum†ength");

33881 
ç
;

33883 ià(
g
 !ğ
BC_TAG_BIG_DECIMAL
)

33884 
l
 = (
Ën
 + (
limb_t
) - 1) / (limb_t);

33886 
l
 = (
Ën
 + 
LIMB_DIGITS
 - 1) / LIMB_DIGITS;

33887 ià(
	`bf_»size
(
a
, 
l
)) {

33888 
	`JS_ThrowOutOfMemÜy
(
s
->
ùx
);

33889 
ç
;

33891 ià(
g
 !ğ
BC_TAG_BIG_DECIMAL
) {

33892 
n
 = 
Ën
 & ((
limb_t
) - 1);

33893 ià(
n
 != 0) {

33894 
v
 = 0;

33895 
i
 = 0; i < 
n
; i++) {

33896 ià(
	`bc_g‘_u8
(
s
, &
v8
))

33897 
ç
;

33898 
v
 |ğ(
limb_t
)
v8
 << ((Öimb_tè- 
n
 + 
i
) * 8);

33900 
a
->
b
[0] = 
v
;

33901 
i
 = 1;

33903 
i
 = 0;

33905 ; 
i
 < 
l
; i++) {

33906 #ià
LIMB_BITS
 == 32

33907 ià(
	`bc_g‘_u32
(
s
, &
v
))

33908 
ç
;

33909 #ifdeà
WORDS_BIGENDIAN


33910 
v
 = 
	`bsw­32
(v);

33913 ià(
	`bc_g‘_u64
(
s
, &
v
))

33914 
ç
;

33915 #ifdeà
WORDS_BIGENDIAN


33916 
v
 = 
	`bsw­64
(v);

33919 
a
->
b
[
i
] = 
v
;

33922 
bpos
 = 0;

33923 
i
 = 0; i < 
l
; i++) {

33924 ià(
i
 =ğ0 && (
n
 = 
Ën
 % 
LIMB_DIGITS
) != 0) {

33925 
j
 = 
LIMB_DIGITS
 - 
n
;

33927 
j
 = 0;

33929 
v
 = 0;

33930 ; 
j
 < 
LIMB_DIGITS
; j++) {

33931 ià(
bpos
 == 0) {

33932 ià(
	`bc_g‘_u8
(
s
, &
v8
))

33933 
ç
;

33934 
d
 = 
v8
 & 0xf;

33935 
bpos
 = 1;

33937 
d
 = 
v8
 >> 4;

33938 
bpos
 = 0;

33940 ià(
d
 >= 10) {

33941 
	`JS_ThrowIÁ”ÇlE¼Ü
(
s
->
ùx
, "invalid digit");

33942 
ç
;

33944 
v
 +ğ
mp_pow_dec
[
j
] * 
d
;

33946 
a
->
b
[
i
] = 
v
;

33950 
	`bc_»ad_Œaû
(
s
, "}\n");

33951  
obj
;

33952 
ç
:

33953 
	`JS_F»eV®ue
(
s
->
ùx
, 
obj
);

33954  
JS_EXCEPTION
;

33955 
	}
}

33958 
JSV®ue
 
	$JS_R—dObjeùRec
(
BCR—d”S‹
 *
s
)

33960 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

33961 
ušt8_t
 
g
;

33962 
JSV®ue
 
obj
 = 
JS_UNDEFINED
;

33963 
JSModuËDef
 *
m
 = 
NULL
;

33965 ià(
	`bc_g‘_u8
(
s
, &
g
))

33966  
JS_EXCEPTION
;

33968 
g
) {

33969 
BC_TAG_NULL
:

33970 
	`bc_»ad_Œaû
(
s
, "null\n");

33971 
obj
 = 
JS_NULL
;

33973 
BC_TAG_UNDEFINED
:

33974 
	`bc_»ad_Œaû
(
s
, "undefined\n");

33975 
obj
 = 
JS_UNDEFINED
;

33977 
BC_TAG_BOOL_FALSE
:

33978 
BC_TAG_BOOL_TRUE
:

33979 
	`bc_»ad_Œaû
(
s
, "%s\n", 
bc_g_¡r
[
g
]);

33980 
obj
 = 
	`JS_NewBoŞ
(
ùx
, 
g
 - 
BC_TAG_BOOL_FALSE
);

33982 
BC_TAG_INT32
:

33984 
št32_t
 
v®
;

33985 ià(
	`bc_g‘_¦eb128
(
s
, &
v®
))

33986  
JS_EXCEPTION
;

33987 
	`bc_»ad_Œaû
(
s
, "št32 %d\n", 
v®
);

33988 
obj
 = 
	`JS_NewIÁ32
(
ùx
, 
v®
);

33991 
BC_TAG_FLOAT64
:

33993 
JSFlßt64UniÚ
 
u
;

33994 ià(
	`bc_g‘_u64
(
s
, &
u
.
u64
))

33995  
JS_EXCEPTION
;

33996 
	`bc_»ad_Œaû
(
s
, "æßt64 %g\n", 
u
.
d
);

33997 
obj
 = 
	`__JS_NewFlßt64
(
ùx
, 
u
.
d
);

34000 
BC_TAG_STRING
:

34002 
JSSŒšg
 *
p
;

34003 
p
 = 
	`JS_R—dSŒšg
(
s
);

34004 ià(!
p
)

34005  
JS_EXCEPTION
;

34006 
obj
 = 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
);

34009 
BC_TAG_FUNCTION_BYTECODE
:

34011 
JSFunùiÚBy‹code
 
bc
, *
b
;

34012 
ušt16_t
 
v16
;

34013 
ušt8_t
 
v8
;

34014 
idx
, 
i
, 
loÿl_couÁ
;

34015 
funùiÚ_size
, 
ıoŞ_off£t
, 
by‹_code_off£t
;

34016 
şosu»_v¬_off£t
, 
v¬defs_off£t
;

34018 ià(!
s
->
®low_by‹code
)

34019 
šv®id_g
;

34020 
	`bc_»ad_Œaû
(
s
, "% {\n", 
bc_g_¡r
[
g
]);

34022 
	`mem£t
(&
bc
, 0, (bc));

34023 
bc
.
h—d”
.
»f_couÁ
 = 1;

34026 ià(
	`bc_g‘_u16
(
s
, &
v16
))

34027 
ç
;

34028 
idx
 = 0;

34029 
bc
.
has_´ÙÙy³
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34030 
bc
.
has_sim¶e_·¿m‘”_li¡
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34031 
bc
.
is_d”ived_şass_cÚ¡ruùÜ
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34032 
bc
.
Ãed_home_objeù
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34033 
bc
.
func_kšd
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 2);

34034 
bc
.
Ãw_rg‘_®lowed
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34035 
bc
.
su³r_ÿÎ_®lowed
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34036 
bc
.
su³r_®lowed
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34037 
bc
.
¬gum’ts_®lowed
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34038 
bc
.
has_debug
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34039 
bc
.
backŒaû_b¬r›r
 = 
	`bc_g‘_æags
(
v16
, &
idx
, 1);

34040 
bc
.
»ad_Úly_by‹code
 = 
s
->
is_rom_d©a
;

34041 ià(
	`bc_g‘_u8
(
s
, &
v8
))

34042 
ç
;

34043 
bc
.
js_mode
 = 
v8
;

34044 ià(
	`bc_g‘_©om
(
s
, &
bc
.
func_Çme
))

34045 
ç
;

34046 ià(
	`bc_g‘_Ëb128_u16
(
s
, &
bc
.
¬g_couÁ
))

34047 
ç
;

34048 ià(
	`bc_g‘_Ëb128_u16
(
s
, &
bc
.
v¬_couÁ
))

34049 
ç
;

34050 ià(
	`bc_g‘_Ëb128_u16
(
s
, &
bc
.
defšed_¬g_couÁ
))

34051 
ç
;

34052 ià(
	`bc_g‘_Ëb128_u16
(
s
, &
bc
.
¡ack_size
))

34053 
ç
;

34054 ià(
	`bc_g‘_Ëb128_št
(
s
, &
bc
.
şosu»_v¬_couÁ
))

34055 
ç
;

34056 ià(
	`bc_g‘_Ëb128_št
(
s
, &
bc
.
ıoŞ_couÁ
))

34057 
ç
;

34058 ià(
	`bc_g‘_Ëb128_št
(
s
, &
bc
.
by‹_code_Ën
))

34059 
ç
;

34060 ià(
	`bc_g‘_Ëb128_št
(
s
, &
loÿl_couÁ
))

34061 
ç
;

34063 ià(
bc
.
has_debug
) {

34064 
funùiÚ_size
 = (*
b
);

34066 
funùiÚ_size
 = 
	`off£tof
(
JSFunùiÚBy‹code
, 
debug
);

34068 
ıoŞ_off£t
 = 
funùiÚ_size
;

34069 
funùiÚ_size
 +ğ
bc
.
ıoŞ_couÁ
 * (*bc.
ıoŞ
);

34070 
v¬defs_off£t
 = 
funùiÚ_size
;

34071 
funùiÚ_size
 +ğ
loÿl_couÁ
 * (*
bc
.
v¬defs
);

34072 
şosu»_v¬_off£t
 = 
funùiÚ_size
;

34073 
funùiÚ_size
 +ğ
bc
.
şosu»_v¬_couÁ
 * (*bc.
şosu»_v¬
);

34074 
by‹_code_off£t
 = 
funùiÚ_size
;

34075 ià(!
bc
.
»ad_Úly_by‹code
) {

34076 
funùiÚ_size
 +ğ
bc
.
by‹_code_Ën
;

34079 
b
 = 
	`js_m®locz
(
ùx
, 
funùiÚ_size
);

34080 ià(!
b
)

34081  
JS_EXCEPTION
;

34083 
	`memıy
(
b
, &
bc
, 
	`off£tof
(
JSFunùiÚBy‹code
, 
debug
));

34084 
b
->
h—d”
.
»f_couÁ
 = 1;

34085 
	`add_gc_objeù
(
ùx
->
¹
, &
b
->
h—d”
, 
JS_GC_OBJ_TYPE_FUNCTION_BYTECODE
);

34087 
obj
 = 
	`JS_MKPTR
(
JS_TAG_FUNCTION_BYTECODE
, 
b
);

34089 #ifdeà
DUMP_READ_OBJECT


34090 
	`bc_»ad_Œaû
(
s
, "Çme: "); 
	`´št_©om
(s->
ùx
, 
b
->
func_Çme
); 
	`´štf
("\n");

34092 
	`bc_»ad_Œaû
(
s
, "args=%d vars=%d defargs=%d closures=%d cpool=%d\n",

34093 
b
->
¬g_couÁ
, b->
v¬_couÁ
, b->
defšed_¬g_couÁ
,

34094 
b
->
şosu»_v¬_couÁ
, b->
ıoŞ_couÁ
);

34095 
	`bc_»ad_Œaû
(
s
, "stack=%d bclen=%d†ocals=%d\n",

34096 
b
->
¡ack_size
, b->
by‹_code_Ën
, 
loÿl_couÁ
);

34098 ià(
loÿl_couÁ
 != 0) {

34099 
	`bc_»ad_Œaû
(
s
, "vars {\n");

34100 
b
->
v¬defs
 = (*)((
ušt8_t
*)b + 
v¬defs_off£t
);

34101 
i
 = 0; i < 
loÿl_couÁ
; i++) {

34102 
JSV¬Def
 *
vd
 = &
b
->
v¬defs
[
i
];

34103 ià(
	`bc_g‘_©om
(
s
, &
vd
->
v¬_Çme
))

34104 
ç
;

34105 ià(
	`bc_g‘_Ëb128_št
(
s
, &
vd
->
scİe_Ëv–
))

34106 
ç
;

34107 ià(
	`bc_g‘_Ëb128_št
(
s
, &
vd
->
scİe_Ãxt
))

34108 
ç
;

34109 
vd
->
scİe_Ãxt
--;

34110 ià(
	`bc_g‘_u8
(
s
, &
v8
))

34111 
ç
;

34112 
idx
 = 0;

34113 
vd
->
v¬_kšd
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 4);

34114 
vd
->
is_func_v¬
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34115 
vd
->
is_cÚ¡
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34116 
vd
->
is_Ëxiÿl
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34117 
vd
->
is_ÿ±u»d
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34118 #ifdeà
DUMP_READ_OBJECT


34119 
	`bc_»ad_Œaû
(
s
, "Çme: "); 
	`´št_©om
(s->
ùx
, 
vd
->
v¬_Çme
); 
	`´štf
("\n");

34122 
	`bc_»ad_Œaû
(
s
, "}\n");

34124 ià(
b
->
şosu»_v¬_couÁ
 != 0) {

34125 
	`bc_»ad_Œaû
(
s
, "closure vars {\n");

34126 
b
->
şosu»_v¬
 = (*)((
ušt8_t
*)b + 
şosu»_v¬_off£t
);

34127 
i
 = 0; i < 
b
->
şosu»_v¬_couÁ
; i++) {

34128 
JSClosu»V¬
 *
cv
 = &
b
->
şosu»_v¬
[
i
];

34129 
v¬_idx
;

34130 ià(
	`bc_g‘_©om
(
s
, &
cv
->
v¬_Çme
))

34131 
ç
;

34132 ià(
	`bc_g‘_Ëb128_št
(
s
, &
v¬_idx
))

34133 
ç
;

34134 
cv
->
v¬_idx
 = var_idx;

34135 ià(
	`bc_g‘_u8
(
s
, &
v8
))

34136 
ç
;

34137 
idx
 = 0;

34138 
cv
->
is_loÿl
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34139 
cv
->
is_¬g
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34140 
cv
->
is_cÚ¡
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34141 
cv
->
is_Ëxiÿl
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 1);

34142 
cv
->
v¬_kšd
 = 
	`bc_g‘_æags
(
v8
, &
idx
, 4);

34143 #ifdeà
DUMP_READ_OBJECT


34144 
	`bc_»ad_Œaû
(
s
, "Çme: "); 
	`´št_©om
(s->
ùx
, 
cv
->
v¬_Çme
); 
	`´štf
("\n");

34147 
	`bc_»ad_Œaû
(
s
, "}\n");

34150 
	`bc_»ad_Œaû
(
s
, "bytecode {\n");

34151 ià(
	`JS_R—dFunùiÚBy‹code
(
s
, 
b
, 
by‹_code_off£t
, b->
by‹_code_Ën
))

34152 
ç
;

34153 
	`bc_»ad_Œaû
(
s
, "}\n");

34155 ià(
b
->
has_debug
) {

34157 
	`bc_»ad_Œaû
(
s
, "debug {\n");

34158 ià(
	`bc_g‘_©om
(
s
, &
b
->
debug
.
f’ame
))

34159 
ç
;

34160 ià(
	`bc_g‘_Ëb128_št
(
s
, &
b
->
debug
.
lše_num
))

34161 
ç
;

34162 ià(
	`bc_g‘_Ëb128_št
(
s
, &
b
->
debug
.
pc2lše_Ën
))

34163 
ç
;

34164 ià(
b
->
debug
.
pc2lše_Ën
) {

34165 
b
->
debug
.
pc2lše_buf
 = 
	`js_m®locz
(
ùx
, b->debug.
pc2lše_Ën
);

34166 ià(!
b
->
debug
.
pc2lše_buf
)

34167 
ç
;

34168 ià(
	`bc_g‘_buf
(
s
, 
b
->
debug
.
pc2lše_buf
, b->debug.
pc2lše_Ën
))

34169 
ç
;

34171 #ifdeà
DUMP_READ_OBJECT


34172 
	`bc_»ad_Œaû
(
s
, "f’ame: "); 
	`´št_©om
(s->
ùx
, 
b
->
debug
.
f’ame
); 
	`´štf
("\n");

34174 
	`bc_»ad_Œaû
(
s
, "}\n");

34176 ià(
b
->
ıoŞ_couÁ
 != 0) {

34177 
	`bc_»ad_Œaû
(
s
, "cpool {\n");

34178 
b
->
ıoŞ
 = (*)((
ušt8_t
*)b + 
ıoŞ_off£t
);

34179 
i
 = 0; i < 
b
->
ıoŞ_couÁ
; i++) {

34180 
JSV®ue
 
v®
;

34181 
v®
 = 
	`JS_R—dObjeùRec
(
s
);

34182 ià(
	`JS_IsExû±iÚ
(
v®
))

34183 
ç
;

34184 
b
->
ıoŞ
[
i
] = 
v®
;

34186 
	`bc_»ad_Œaû
(
s
, "}\n");

34188 
	`bc_»ad_Œaû
(
s
, "}\n");

34189 
b
->
»®m
 = 
	`JS_DupCÚ‹xt
(
ùx
);

34192 
BC_TAG_MODULE
:

34194 
JSAtom
 
moduË_Çme
;

34195 
i
;

34196 
ušt8_t
 
v8
;

34198 ià(!
s
->
®low_by‹code
)

34199 
šv®id_g
;

34200 
	`bc_»ad_Œaû
(
s
, "% {\n", 
bc_g_¡r
[
g
]);

34201 ià(
	`bc_g‘_©om
(
s
, &
moduË_Çme
))

34202 
ç
;

34203 #ifdeà
DUMP_READ_OBJECT


34204 
	`bc_»ad_Œaû
(
s
, "Çme: "); 
	`´št_©om
(s->
ùx
, 
moduË_Çme
); 
	`´štf
("\n");

34206 
m
 = 
	`js_Ãw_moduË_def
(
ùx
, 
moduË_Çme
);

34207 ià(!
m
)

34208 
ç
;

34209 
obj
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_MODULE
, 
m
));

34210 ià(
	`bc_g‘_Ëb128_št
(
s
, &
m
->
»q_moduË_’Œ›s_couÁ
))

34211 
ç
;

34212 ià(
m
->
»q_moduË_’Œ›s_couÁ
 != 0) {

34213 
m
->
»q_moduË_’Œ›s_size
 = m->
»q_moduË_’Œ›s_couÁ
;

34214 
m
->
»q_moduË_’Œ›s
 = 
	`js_m®locz
(
ùx
, (m->»q_moduË_’Œ›s[0]è* m->
»q_moduË_’Œ›s_size
);

34215 ià(!
m
->
»q_moduË_’Œ›s
)

34216 
ç
;

34217 
i
 = 0; i < 
m
->
»q_moduË_’Œ›s_couÁ
; i++) {

34218 
JSReqModuËEÁry
 *
rme
 = &
m
->
»q_moduË_’Œ›s
[
i
];

34219 ià(
	`bc_g‘_©om
(
s
, &
rme
->
moduË_Çme
))

34220 
ç
;

34224 ià(
	`bc_g‘_Ëb128_št
(
s
, &
m
->
expÜt_’Œ›s_couÁ
))

34225 
ç
;

34226 ià(
m
->
expÜt_’Œ›s_couÁ
 != 0) {

34227 
m
->
expÜt_’Œ›s_size
 = m->
expÜt_’Œ›s_couÁ
;

34228 
m
->
expÜt_’Œ›s
 = 
	`js_m®locz
(
ùx
, (m->expÜt_’Œ›s[0]è* m->
expÜt_’Œ›s_size
);

34229 ià(!
m
->
expÜt_’Œ›s
)

34230 
ç
;

34231 
i
 = 0; i < 
m
->
expÜt_’Œ›s_couÁ
; i++) {

34232 
JSExpÜtEÁry
 *
me
 = &
m
->
expÜt_’Œ›s
[
i
];

34233 ià(
	`bc_g‘_u8
(
s
, &
v8
))

34234 
ç
;

34235 
me
->
expÜt_ty³
 = 
v8
;

34236 ià(
me
->
expÜt_ty³
 =ğ
JS_EXPORT_TYPE_LOCAL
) {

34237 ià(
	`bc_g‘_Ëb128_št
(
s
, &
me
->
u
.
loÿl
.
v¬_idx
))

34238 
ç
;

34240 ià(
	`bc_g‘_Ëb128_št
(
s
, &
me
->
u
.
»q_moduË_idx
))

34241 
ç
;

34242 ià(
	`bc_g‘_©om
(
s
, &
me
->
loÿl_Çme
))

34243 
ç
;

34245 ià(
	`bc_g‘_©om
(
s
, &
me
->
expÜt_Çme
))

34246 
ç
;

34250 ià(
	`bc_g‘_Ëb128_št
(
s
, &
m
->
¡¬_expÜt_’Œ›s_couÁ
))

34251 
ç
;

34252 ià(
m
->
¡¬_expÜt_’Œ›s_couÁ
 != 0) {

34253 
m
->
¡¬_expÜt_’Œ›s_size
 = m->
¡¬_expÜt_’Œ›s_couÁ
;

34254 
m
->
¡¬_expÜt_’Œ›s
 = 
	`js_m®locz
(
ùx
, (m->¡¬_expÜt_’Œ›s[0]è* m->
¡¬_expÜt_’Œ›s_size
);

34255 ià(!
m
->
¡¬_expÜt_’Œ›s
)

34256 
ç
;

34257 
i
 = 0; i < 
m
->
¡¬_expÜt_’Œ›s_couÁ
; i++) {

34258 
JSSrExpÜtEÁry
 *
£
 = &
m
->
¡¬_expÜt_’Œ›s
[
i
];

34259 ià(
	`bc_g‘_Ëb128_št
(
s
, &
£
->
»q_moduË_idx
))

34260 
ç
;

34264 ià(
	`bc_g‘_Ëb128_št
(
s
, &
m
->
impÜt_’Œ›s_couÁ
))

34265 
ç
;

34266 ià(
m
->
impÜt_’Œ›s_couÁ
 != 0) {

34267 
m
->
impÜt_’Œ›s_size
 = m->
impÜt_’Œ›s_couÁ
;

34268 
m
->
impÜt_’Œ›s
 = 
	`js_m®locz
(
ùx
, (m->impÜt_’Œ›s[0]è* m->
impÜt_’Œ›s_size
);

34269 ià(!
m
->
impÜt_’Œ›s
)

34270 
ç
;

34271 
i
 = 0; i < 
m
->
impÜt_’Œ›s_couÁ
; i++) {

34272 
JSImpÜtEÁry
 *
mi
 = &
m
->
impÜt_’Œ›s
[
i
];

34273 ià(
	`bc_g‘_Ëb128_št
(
s
, &
mi
->
v¬_idx
))

34274 
ç
;

34275 ià(
	`bc_g‘_©om
(
s
, &
mi
->
impÜt_Çme
))

34276 
ç
;

34277 ià(
	`bc_g‘_Ëb128_št
(
s
, &
mi
->
»q_moduË_idx
))

34278 
ç
;

34282 
m
->
func_obj
 = 
	`JS_R—dObjeùRec
(
s
);

34283 ià(
	`JS_IsExû±iÚ
(
m
->
func_obj
))

34284 
ç
;

34285 
	`bc_»ad_Œaû
(
s
, "}\n");

34288 
BC_TAG_OBJECT
:

34290 
ušt32_t
 
´İ_couÁ
, 
i
;

34291 
JSAtom
 
©om
;

34292 
JSV®ue
 
v®
;

34293 
»t
;

34295 
	`bc_»ad_Œaû
(
s
, "% {\n", 
bc_g_¡r
[
g
]);

34297 
obj
 = 
	`JS_NewObjeù
(
ùx
);

34298 ià(
	`bc_g‘_Ëb128
(
s
, &
´İ_couÁ
))

34299 
ç
;

34300 
i
 = 0; i < 
´İ_couÁ
; i++) {

34301 ià(
	`bc_g‘_©om
(
s
, &
©om
))

34302 
ç
;

34303 #ifdeà
DUMP_READ_OBJECT


34304 
	`bc_»ad_Œaû
(
s
, "´İÇme: "); 
	`´št_©om
(s->
ùx
, 
©om
); 
	`´štf
("\n");

34306 
v®
 = 
	`JS_R—dObjeùRec
(
s
);

34307 ià(
	`JS_IsExû±iÚ
(
v®
)) {

34308 
	`JS_F»eAtom
(
ùx
, 
©om
);

34309 
ç
;

34311 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
©om
, 
v®
, 
JS_PROP_C_W_E
);

34312 
	`JS_F»eAtom
(
ùx
, 
©om
);

34313 ià(
»t
 < 0)

34314 
ç
;

34316 
	`bc_»ad_Œaû
(
s
, "}\n");

34319 
BC_TAG_ARRAY
:

34320 
BC_TAG_TEMPLATE_OBJECT
:

34322 
ušt32_t
 
Ën
, 
i
;

34323 
JSV®ue
 
v®
;

34324 
»t
, 
´İ_æags
;

34325 
BOOL
 
is_‹m¶©e
;

34327 
	`bc_»ad_Œaû
(
s
, "% {\n", 
bc_g_¡r
[
g
]);

34329 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

34330 
is_‹m¶©e
 = (
g
 =ğ
BC_TAG_TEMPLATE_OBJECT
);

34331 ià(
	`bc_g‘_Ëb128
(
s
, &
Ën
))

34332 
ç
;

34333 
i
 = 0; i < 
Ën
; i++) {

34334 
v®
 = 
	`JS_R—dObjeùRec
(
s
);

34335 ià(
	`JS_IsExû±iÚ
(
v®
))

34336 
ç
;

34337 ià(
is_‹m¶©e
)

34338 
´İ_æags
 = 
JS_PROP_ENUMERABLE
;

34340 
´İ_æags
 = 
JS_PROP_C_W_E
;

34341 
»t
 = 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 
i
, 
v®
,

34342 
´İ_æags
);

34343 ià(
»t
 < 0)

34344 
ç
;

34346 ià(
is_‹m¶©e
) {

34347 
v®
 = 
	`JS_R—dObjeùRec
(
s
);

34348 ià(
	`JS_IsExû±iÚ
(
v®
))

34349 
ç
;

34350 ià(!
	`JS_IsUndefšed
(
v®
)) {

34351 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_¿w
, 
v®
, 0);

34352 ià(
»t
 < 0)

34353 
ç
;

34355 
	`JS_P»v’tEx‹nsiÚs
(
ùx
, 
obj
);

34357 
	`bc_»ad_Œaû
(
s
, "}\n");

34360 #ifdeà
CONFIG_BIGNUM


34361 
BC_TAG_BIG_INT
:

34362 
BC_TAG_BIG_FLOAT
:

34363 
BC_TAG_BIG_DECIMAL
:

34364 
obj
 = 
	`JS_R—dBigNum
(
s
, 
g
);

34365 ià(
	`JS_IsExû±iÚ
(
obj
))

34366 
ç
;

34370 
šv®id_g
:

34371  
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "invalidag (tag=%d…os=%u)",

34372 
g
, ()(
s
->
±r
 - s->
buf_¡¬t
));

34374  
obj
;

34375 
ç
:

34376 ià(
m
) {

34377 
	`js_ä“_moduË_def
(
ùx
, 
m
);

34379 
	`JS_F»eV®ue
(
ùx
, 
obj
);

34381  
JS_EXCEPTION
;

34382 
	}
}

34384 
	$JS_R—dObjeùAtoms
(
BCR—d”S‹
 *
s
)

34386 
ušt8_t
 
v8
;

34387 
JSSŒšg
 *
p
;

34388 
i
;

34389 
JSAtom
 
©om
;

34391 ià(
	`bc_g‘_u8
(
s
, &
v8
))

34394 ià(
v8
 !ğ
BC_VERSION
) {

34395 
	`JS_ThrowSyÁaxE¼Ü
(
s
->
ùx
, "invalid version (%dƒxpected=%d)",

34396 
v8
, 
BC_VERSION
);

34399 ià(
	`bc_g‘_Ëb128
(
s
, &s->
idx_to_©om_couÁ
))

34402 
	`bc_»ad_Œaû
(
s
, "%d‡tom indexe {\n", s->
idx_to_©om_couÁ
);

34404 ià(
s
->
idx_to_©om_couÁ
 != 0) {

34405 
s
->
idx_to_©om
 = 
	`js_m®locz
(s->
ùx
, s->
idx_to_©om_couÁ
 *

34406 (
s
->
idx_to_©om
[0]));

34407 ià(!
s
->
idx_to_©om
)

34408  
s
->
”rÜ_¡©e
 = -1;

34410 
i
 = 0; i < 
s
->
idx_to_©om_couÁ
; i++) {

34411 
p
 = 
	`JS_R—dSŒšg
(
s
);

34412 ià(!
p
)

34414 
©om
 = 
	`JS_NewAtomSŒ
(
s
->
ùx
, 
p
);

34415 ià(
©om
 =ğ
JS_ATOM_NULL
)

34416  
s
->
”rÜ_¡©e
 = -1;

34417 
s
->
idx_to_©om
[
i
] = 
©om
;

34418 ià(
s
->
is_rom_d©a
 && (
©om
 !ğ(
i
 + s->
fœ¡_©om
)))

34419 
s
->
is_rom_d©a
 = 
FALSE
;

34421 
	`bc_»ad_Œaû
(
s
, "}\n");

34423 
	}
}

34425 
	$bc_»ad”_ä“
(
BCR—d”S‹
 *
s
)

34427 
i
;

34428 ià(
s
->
idx_to_©om
) {

34429 
i
 = 0; i < 
s
->
idx_to_©om_couÁ
; i++) {

34430 
	`JS_F»eAtom
(
s
->
ùx
, s->
idx_to_©om
[
i
]);

34432 
	`js_ä“
(
s
->
ùx
, s->
idx_to_©om
);

34434 
	}
}

34436 
JSV®ue
 
	$JS_R—dObjeù
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt8_t
 *
buf
, 
size_t
 
buf_Ën
,

34437 
æags
)

34439 
BCR—d”S‹
 
ss
, *
s
 = &ss;

34440 
JSV®ue
 
obj
;

34442 
ùx
->
bš¬y_objeù_couÁ
 += 1;

34443 
ùx
->
bš¬y_objeù_size
 +ğ
buf_Ën
;

34445 
	`mem£t
(
s
, 0, (*s));

34446 
s
->
ùx
 = ctx;

34447 
s
->
buf_¡¬t
 = 
buf
;

34448 
s
->
buf_’d
 = 
buf
 + 
buf_Ën
;

34449 
s
->
±r
 = 
buf
;

34450 
s
->
®low_by‹code
 = ((
æags
 & 
JS_READ_OBJ_BYTECODE
) != 0);

34451 
s
->
is_rom_d©a
 = ((
æags
 & 
JS_READ_OBJ_ROM_DATA
) != 0);

34452 ià(
s
->
®low_by‹code
)

34453 
s
->
fœ¡_©om
 = 
JS_ATOM_END
;

34455 
s
->
fœ¡_©om
 = 1;

34456 ià(
	`JS_R—dObjeùAtoms
(
s
)) {

34457 
obj
 = 
JS_EXCEPTION
;

34459 
obj
 = 
	`JS_R—dObjeùRec
(
s
);

34461 
	`bc_»ad”_ä“
(
s
);

34462  
obj
;

34463 
	}
}

34468 
JSV®ue
 
js_¡ršg_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34469 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

34470 
JSV®ue
 
js_boŞ—n_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34471 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

34472 
JSV®ue
 
js_numb”_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34473 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

34475 
	$check_funùiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

34477 ià(
	`lik–y
(
	`JS_IsFunùiÚ
(
ùx
, 
obj
)))

34479 
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ function");

34481 
	}
}

34483 
	$check_exû±iÚ_ä“
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
obj
)

34485 
	`JS_F»eV®ue
(
ùx
, 
obj
);

34486  
	`JS_IsExû±iÚ
(
obj
);

34487 
	}
}

34489 
JSAtom
 
	$fšd_©om
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
Çme
)

34491 
JSAtom
 
©om
;

34492 
Ën
;

34494 ià(*
Çme
 == '[') {

34495 
Çme
++;

34496 
Ën
 = 
	`¡¾’
(
Çme
) - 1;

34499 
©om
 = 
JS_ATOM_SymbŞ_toPrim™ive
;‡tom < 
JS_ATOM_END
;‡tom++) {

34500 
JSAtomSŒuù
 *
p
 = 
ùx
->
¹
->
©om_¬¿y
[
©om
];

34501 
JSSŒšg
 *
¡r
 = 
p
;

34502 ià(
¡r
->
Ën
 =ğËÀ&& !
	`memcmp
(¡r->
u
.
¡r8
, 
Çme
,†en))

34503  
	`JS_DupAtom
(
ùx
, 
©om
);

34505 
	`abÜt
();

34507 
©om
 = 
	`JS_NewAtom
(
ùx
, 
Çme
);

34509  
©om
;

34510 
	}
}

34512 
	$JS_In¡ªtŸ‹FunùiÚLi¡I‹m
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
,

34513 
JSAtom
 
©om
, *
İaque
)

34515 cÚ¡ 
JSCFunùiÚLi¡EÁry
 *
e
 = 
İaque
;

34516 
JSV®ueCÚ¡
 
obj
 = 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
p
);

34517 
JSV®ue
 
v®
;

34518 
´İ_æags
 = 
e
->prop_flags;

34520 
e
->
def_ty³
) {

34521 
JS_DEF_ALIAS
:

34523 
JSAtom
 
©om1
 = 
	`fšd_©om
(
ùx
, 
e
->
u
.
®Ÿs
.
Çme
);

34524 
e
->
u
.
®Ÿs
.
ba£
) {

34526 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
©om1
);

34529 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, ctx->
glob®_obj
, 
©om1
);

34532 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY
], 
©om1
);

34535 
	`abÜt
();

34537 
	`JS_F»eAtom
(
ùx
, 
©om1
);

34538 
£tv®
;

34540 
JS_DEF_CFUNC
:

34541 
v®
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
e
->
u
.
func
.
cfunc
.
g’”ic
,

34542 
e
->
Çme
,ƒ->
u
.
func
.
Ëngth
,ƒ->u.func.
ırÙo
,ƒ->
magic
);

34543 
£tv®
:

34544 ià(
©om
 =ğ
JS_ATOM_SymbŞ_toPrim™ive
) {

34546 
´İ_æags
 = 
JS_PROP_CONFIGURABLE
;

34547 } ià(
©om
 =ğ
JS_ATOM_SymbŞ_hasIn¡ªû
) {

34549 
´İ_æags
 = 0;

34552 
JS_DEF_CGETSET
:

34553 
JS_DEF_CGETSET_MAGIC
:

34555 
JSV®ue
 
g‘‹r
, 
£‰”
;

34556 
buf
[64];

34558 
g‘‹r
 = 
JS_UNDEFINED
;

34559 ià(
e
->
u
.
g‘£t
.
g‘
.
g’”ic
) {

34560 
	`¢´štf
(
buf
, (buf), "g‘ %s", 
e
->
Çme
);

34561 
g‘‹r
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
e
->
u
.
g‘£t
.
g‘
.
g’”ic
,

34562 
buf
, 0, 
e
->
def_ty³
 =ğ
JS_DEF_CGETSET_MAGIC
 ? 
JS_CFUNC_g‘‹r_magic
 : 
JS_CFUNC_g‘‹r
,

34563 
e
->
magic
);

34565 
£‰”
 = 
JS_UNDEFINED
;

34566 ià(
e
->
u
.
g‘£t
.
£t
.
g’”ic
) {

34567 
	`¢´štf
(
buf
, (buf), "£ˆ%s", 
e
->
Çme
);

34568 
£‰”
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
e
->
u
.
g‘£t
.
£t
.
g’”ic
,

34569 
buf
, 1, 
e
->
def_ty³
 =ğ
JS_DEF_CGETSET_MAGIC
 ? 
JS_CFUNC_£‰”_magic
 : 
JS_CFUNC_£‰”
,

34570 
e
->
magic
);

34572 
	`JS_DefšePrİ”tyG‘S‘
(
ùx
, 
obj
, 
©om
, 
g‘‹r
, 
£‰”
, 
´İ_æags
);

34576 
JS_DEF_PROP_STRING
:

34577 
v®
 = 
	`JS_NewAtomSŒšg
(
ùx
, 
e
->
u
.
¡r
);

34579 
JS_DEF_PROP_INT32
:

34580 
v®
 = 
	`JS_NewIÁ32
(
ùx
, 
e
->
u
.
i32
);

34582 
JS_DEF_PROP_INT64
:

34583 
v®
 = 
	`JS_NewIÁ64
(
ùx
, 
e
->
u
.
i64
);

34585 
JS_DEF_PROP_DOUBLE
:

34586 
v®
 = 
	`__JS_NewFlßt64
(
ùx
, 
e
->
u
.
f64
);

34588 
JS_DEF_PROP_UNDEFINED
:

34589 
v®
 = 
JS_UNDEFINED
;

34591 
JS_DEF_OBJECT
:

34592 
v®
 = 
	`JS_NewObjeù
(
ùx
);

34593 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
v®
, 
e
->
u
.
´İ_li¡
.
b
,ƒ->u.´İ_li¡.
Ën
);

34596 
	`abÜt
();

34598 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
©om
, 
v®
, 
´İ_æags
);

34600 
	}
}

34602 
	$JS_S‘Prİ”tyFunùiÚLi¡
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

34603 cÚ¡ 
JSCFunùiÚLi¡EÁry
 *
b
, 
Ën
)

34605 
i
, 
´İ_æags
;

34607 
i
 = 0; i < 
Ën
; i++) {

34608 cÚ¡ 
JSCFunùiÚLi¡EÁry
 *
e
 = &
b
[
i
];

34609 
JSAtom
 
©om
 = 
	`fšd_©om
(
ùx
, 
e
->
Çme
);

34611 
e
->
def_ty³
) {

34612 
JS_DEF_CFUNC
:

34613 
JS_DEF_CGETSET
:

34614 
JS_DEF_CGETSET_MAGIC
:

34615 
JS_DEF_PROP_STRING
:

34616 
JS_DEF_ALIAS
:

34617 
JS_DEF_OBJECT
:

34618 
´İ_æags
 = 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 | (
e
->´İ_æag & 
JS_PROP_ENUMERABLE
);

34619 
	`JS_DefšeAutoIn™Prİ”ty
(
ùx
, 
obj
, 
©om
,

34620 
JS_AUTOINIT_ID_PROP
,

34621 (*)
e
, 
´İ_æags
);

34623 
JS_DEF_PROP_INT32
:

34624 
JS_DEF_PROP_INT64
:

34625 
JS_DEF_PROP_DOUBLE
:

34626 
JS_DEF_PROP_UNDEFINED
:

34628 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

34629 
	`JS_In¡ªtŸ‹FunùiÚLi¡I‹m
(
ùx
, 
p
, 
©om
, (*)
e
);

34633 
	`abÜt
();

34635 
	`JS_F»eAtom
(
ùx
, 
©om
);

34637 
	}
}

34639 
	$JS_AddModuËExpÜtLi¡
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
,

34640 cÚ¡ 
JSCFunùiÚLi¡EÁry
 *
b
, 
Ën
)

34642 
i
;

34643 
i
 = 0; i < 
Ën
; i++) {

34644 ià(
	`JS_AddModuËExpÜt
(
ùx
, 
m
, 
b
[
i
].
Çme
))

34648 
	}
}

34650 
	$JS_S‘ModuËExpÜtLi¡
(
JSCÚ‹xt
 *
ùx
, 
JSModuËDef
 *
m
,

34651 cÚ¡ 
JSCFunùiÚLi¡EÁry
 *
b
, 
Ën
)

34653 
i
;

34654 
JSV®ue
 
v®
;

34656 
i
 = 0; i < 
Ën
; i++) {

34657 cÚ¡ 
JSCFunùiÚLi¡EÁry
 *
e
 = &
b
[
i
];

34658 
e
->
def_ty³
) {

34659 
JS_DEF_CFUNC
:

34660 
v®
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
e
->
u
.
func
.
cfunc
.
g’”ic
,

34661 
e
->
Çme
,ƒ->
u
.
func
.
Ëngth
,ƒ->u.func.
ırÙo
,ƒ->
magic
);

34663 
JS_DEF_PROP_STRING
:

34664 
v®
 = 
	`JS_NewSŒšg
(
ùx
, 
e
->
u
.
¡r
);

34666 
JS_DEF_PROP_INT32
:

34667 
v®
 = 
	`JS_NewIÁ32
(
ùx
, 
e
->
u
.
i32
);

34669 
JS_DEF_PROP_INT64
:

34670 
v®
 = 
	`JS_NewIÁ64
(
ùx
, 
e
->
u
.
i64
);

34672 
JS_DEF_PROP_DOUBLE
:

34673 
v®
 = 
	`__JS_NewFlßt64
(
ùx
, 
e
->
u
.
f64
);

34675 
JS_DEF_OBJECT
:

34676 
v®
 = 
	`JS_NewObjeù
(
ùx
);

34677 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
v®
, 
e
->
u
.
´İ_li¡
.
b
,ƒ->u.´İ_li¡.
Ën
);

34680 
	`abÜt
();

34682 ià(
	`JS_S‘ModuËExpÜt
(
ùx
, 
m
, 
e
->
Çme
, 
v®
))

34686 
	}
}

34689 
	$JS_S‘CÚ¡ruùÜ2
(
JSCÚ‹xt
 *
ùx
,

34690 
JSV®ueCÚ¡
 
func_obj
,

34691 
JSV®ueCÚ¡
 
´Ùo
,

34692 
´Ùo_æags
, 
ùÜ_æags
)

34694 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_´ÙÙy³
,

34695 
	`JS_DupV®ue
(
ùx
, 
´Ùo
), 
´Ùo_æags
);

34696 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
´Ùo
, 
JS_ATOM_cÚ¡ruùÜ
,

34697 
	`JS_DupV®ue
(
ùx
, 
func_obj
),

34698 
ùÜ_æags
);

34699 
	`£t_cyşe_æag
(
ùx
, 
func_obj
);

34700 
	`£t_cyşe_æag
(
ùx
, 
´Ùo
);

34701 
	}
}

34703 
	$JS_S‘CÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

34704 
JSV®ueCÚ¡
 
´Ùo
)

34706 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, 
func_obj
, 
´Ùo
,

34707 0, 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

34708 
	}
}

34710 
	$JS_NewGlob®CCÚ¡ruùÜ2
(
JSCÚ‹xt
 *
ùx
,

34711 
JSV®ue
 
func_obj
,

34712 cÚ¡ *
Çme
,

34713 
JSV®ueCÚ¡
 
´Ùo
)

34715 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, ctx->
glob®_obj
, 
Çme
,

34716 
	`JS_DupV®ue
(
ùx
, 
func_obj
),

34717 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

34718 
	`JS_S‘CÚ¡ruùÜ
(
ùx
, 
func_obj
, 
´Ùo
);

34719 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

34720 
	}
}

34722 
JSV®ueCÚ¡
 
	$JS_NewGlob®CCÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
Çme
,

34723 
JSCFunùiÚ
 *
func
, 
Ëngth
,

34724 
JSV®ueCÚ¡
 
´Ùo
)

34726 
JSV®ue
 
func_obj
;

34727 
func_obj
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
func
, 
Çme
, 
Ëngth
, 
JS_CFUNC_cÚ¡ruùÜ_Ü_func
, 0);

34728 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
func_obj
, 
Çme
, 
´Ùo
);

34729  
func_obj
;

34730 
	}
}

34732 
JSV®ueCÚ¡
 
	$JS_NewGlob®CCÚ¡ruùÜOÆy
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
Çme
,

34733 
JSCFunùiÚ
 *
func
, 
Ëngth
,

34734 
JSV®ueCÚ¡
 
´Ùo
)

34736 
JSV®ue
 
func_obj
;

34737 
func_obj
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
func
, 
Çme
, 
Ëngth
, 
JS_CFUNC_cÚ¡ruùÜ
, 0);

34738 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
func_obj
, 
Çme
, 
´Ùo
);

34739  
func_obj
;

34740 
	}
}

34742 
JSV®ue
 
	$js_glob®_ev®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34743 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

34745  
	`JS_Ev®Objeù
(
ùx
, ctx->
glob®_obj
, 
¬gv
[0], 
JS_EVAL_TYPE_INDIRECT
, -1);

34746 
	}
}

34748 
JSV®ue
 
	$js_glob®_isNaN
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34749 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

34751 
d
;

34754 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[0])))

34755  
JS_EXCEPTION
;

34756  
	`JS_NewBoŞ
(
ùx
, 
	`i¢ª
(
d
));

34757 
	}
}

34759 
JSV®ue
 
	$js_glob®_isFš™e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34760 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

34762 
BOOL
 
»s
;

34763 
d
;

34764 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[0])))

34765  
JS_EXCEPTION
;

34766 
»s
 = 
	`isfš™e
(
d
);

34767  
	`JS_NewBoŞ
(
ùx
, 
»s
);

34768 
	}
}

34772 
JSV®ue
 
	$JS_ToObjeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

34774 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

34775 
JSV®ue
 
obj
;

34777 
g
) {

34779 
JS_TAG_NULL
:

34780 
JS_TAG_UNDEFINED
:

34781  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto object");

34782 
JS_TAG_OBJECT
:

34783 
JS_TAG_EXCEPTION
:

34784  
	`JS_DupV®ue
(
ùx
, 
v®
);

34785 #ifdeà
CONFIG_BIGNUM


34786 
JS_TAG_BIG_INT
:

34787 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_BIG_INT
);

34788 
£t_v®ue
;

34789 
JS_TAG_BIG_FLOAT
:

34790 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_BIG_FLOAT
);

34791 
£t_v®ue
;

34792 
JS_TAG_BIG_DECIMAL
:

34793 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_BIG_DECIMAL
);

34794 
£t_v®ue
;

34796 
JS_TAG_INT
:

34797 
JS_TAG_FLOAT64
:

34798 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_NUMBER
);

34799 
£t_v®ue
;

34800 
JS_TAG_STRING
:

34803 
JSSŒšg
 *
p1
 = 
	`JS_VALUE_GET_STRING
(
v®
);

34804 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_STRING
);

34805 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ32
(ùx, 
p1
->
Ën
), 0);

34807 
£t_v®ue
;

34808 
JS_TAG_BOOL
:

34809 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_BOOLEAN
);

34810 
£t_v®ue
;

34811 
JS_TAG_SYMBOL
:

34812 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_SYMBOL
);

34813 
£t_v®ue
:

34814 ià(!
	`JS_IsExû±iÚ
(
obj
))

34815 
	`JS_S‘ObjeùD©a
(
ùx
, 
obj
, 
	`JS_DupV®ue
(ùx, 
v®
));

34816  
obj
;

34818 
	}
}

34820 
JSV®ue
 
	$JS_ToObjeùF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

34822 
JSV®ue
 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
v®
);

34823 
	`JS_F»eV®ue
(
ùx
, 
v®
);

34824  
obj
;

34825 
	}
}

34827 
	$js_obj_to_desc
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
d
,

34828 
JSV®ueCÚ¡
 
desc
)

34830 
JSV®ue
 
v®
, 
g‘‹r
, 
£‰”
;

34831 
æags
;

34833 ià(!
	`JS_IsObjeù
(
desc
)) {

34834 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

34837 
æags
 = 0;

34838 
v®
 = 
JS_UNDEFINED
;

34839 
g‘‹r
 = 
JS_UNDEFINED
;

34840 
£‰”
 = 
JS_UNDEFINED
;

34841 ià(
	`JS_HasPrİ”ty
(
ùx
, 
desc
, 
JS_ATOM_cÚfigu¿bË
)) {

34842 
JSV®ue
 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
desc
, 
JS_ATOM_cÚfigu¿bË
);

34843 ià(
	`JS_IsExû±iÚ
(
´İ
))

34844 
ç
;

34845 
æags
 |ğ
JS_PROP_HAS_CONFIGURABLE
;

34846 ià(
	`JS_ToBoŞF»e
(
ùx
, 
´İ
))

34847 
æags
 |ğ
JS_PROP_CONFIGURABLE
;

34849 ià(
	`JS_HasPrİ”ty
(
ùx
, 
desc
, 
JS_ATOM_wr™abË
)) {

34850 
JSV®ue
 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
desc
, 
JS_ATOM_wr™abË
);

34851 ià(
	`JS_IsExû±iÚ
(
´İ
))

34852 
ç
;

34853 
æags
 |ğ
JS_PROP_HAS_WRITABLE
;

34854 ià(
	`JS_ToBoŞF»e
(
ùx
, 
´İ
))

34855 
æags
 |ğ
JS_PROP_WRITABLE
;

34857 ià(
	`JS_HasPrİ”ty
(
ùx
, 
desc
, 
JS_ATOM_’um”abË
)) {

34858 
JSV®ue
 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
desc
, 
JS_ATOM_’um”abË
);

34859 ià(
	`JS_IsExû±iÚ
(
´İ
))

34860 
ç
;

34861 
æags
 |ğ
JS_PROP_HAS_ENUMERABLE
;

34862 ià(
	`JS_ToBoŞF»e
(
ùx
, 
´İ
))

34863 
æags
 |ğ
JS_PROP_ENUMERABLE
;

34865 ià(
	`JS_HasPrİ”ty
(
ùx
, 
desc
, 
JS_ATOM_v®ue
)) {

34866 
æags
 |ğ
JS_PROP_HAS_VALUE
;

34867 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
desc
, 
JS_ATOM_v®ue
);

34868 ià(
	`JS_IsExû±iÚ
(
v®
))

34869 
ç
;

34871 ià(
	`JS_HasPrİ”ty
(
ùx
, 
desc
, 
JS_ATOM_g‘
)) {

34872 
æags
 |ğ
JS_PROP_HAS_GET
;

34873 
g‘‹r
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
desc
, 
JS_ATOM_g‘
);

34874 ià(
	`JS_IsExû±iÚ
(
g‘‹r
) ||

34875 !(
	`JS_IsUndefšed
(
g‘‹r
è|| 
	`JS_IsFunùiÚ
(
ùx
, getter))) {

34876 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid getter");

34877 
ç
;

34880 ià(
	`JS_HasPrİ”ty
(
ùx
, 
desc
, 
JS_ATOM_£t
)) {

34881 
æags
 |ğ
JS_PROP_HAS_SET
;

34882 
£‰”
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
desc
, 
JS_ATOM_£t
);

34883 ià(
	`JS_IsExû±iÚ
(
£‰”
) ||

34884 !(
	`JS_IsUndefšed
(
£‰”
è|| 
	`JS_IsFunùiÚ
(
ùx
, setter))) {

34885 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid setter");

34886 
ç
;

34889 ià((
æags
 & (
JS_PROP_HAS_SET
 | 
JS_PROP_HAS_GET
)) &&

34890 (
æags
 & (
JS_PROP_HAS_VALUE
 | 
JS_PROP_HAS_WRITABLE
))) {

34891 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot have setter/getter‡nd value or writable");

34892 
ç
;

34894 
d
->
æags
 = flags;

34895 
d
->
v®ue
 = 
v®
;

34896 
d
->
g‘‹r
 = getter;

34897 
d
->
£‰”
 = setter;

34899 
ç
:

34900 
	`JS_F»eV®ue
(
ùx
, 
v®
);

34901 
	`JS_F»eV®ue
(
ùx
, 
g‘‹r
);

34902 
	`JS_F»eV®ue
(
ùx
, 
£‰”
);

34904 
	}
}

34906 
__exû±iÚ
 
	$JS_DefšePrİ”tyDesc
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

34907 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
desc
,

34908 
æags
)

34910 
JSPrİ”tyDesütÜ
 
d
;

34911 
»t
;

34913 ià(
	`js_obj_to_desc
(
ùx
, &
d
, 
desc
) < 0)

34916 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
obj
, 
´İ
,

34917 
d
.
v®ue
, d.
g‘‹r
, d.
£‰”
, d.
æags
 | flags);

34918 
	`js_ä“_desc
(
ùx
, &
d
);

34919  
»t
;

34920 
	}
}

34922 
__exû±iÚ
 
	$JS_ObjeùDefšePrİ”t›s
(
JSCÚ‹xt
 *
ùx
,

34923 
JSV®ueCÚ¡
 
obj
,

34924 
JSV®ueCÚ¡
 
´İ”t›s
)

34926 
JSV®ue
 
´İs
, 
desc
;

34927 
JSObjeù
 *
p
;

34928 
JSPrİ”tyEnum
 *
©oms
;

34929 
ušt32_t
 
Ën
, 
i
;

34930 
»t
 = -1;

34932 ià(!
	`JS_IsObjeù
(
obj
)) {

34933 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

34936 
desc
 = 
JS_UNDEFINED
;

34937 
´İs
 = 
	`JS_ToObjeù
(
ùx
, 
´İ”t›s
);

34938 ià(
	`JS_IsExû±iÚ
(
´İs
))

34940 
p
 = 
	`JS_VALUE_GET_OBJ
(
´İs
);

34941 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
©oms
, &
Ën
, 
p
, 
JS_GPN_ENUM_ONLY
 | 
JS_GPN_STRING_MASK
) < 0)

34942 
exû±iÚ
;

34943 
i
 = 0; i < 
Ën
; i++) {

34944 
	`JS_F»eV®ue
(
ùx
, 
desc
);

34945 
desc
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
´İs
, 
©oms
[
i
].
©om
);

34946 ià(
	`JS_IsExû±iÚ
(
desc
))

34947 
exû±iÚ
;

34948 ià(
	`JS_DefšePrİ”tyDesc
(
ùx
, 
obj
, 
©oms
[
i
].
©om
, 
desc
, 
JS_PROP_THROW
) < 0)

34949 
exû±iÚ
;

34951 
»t
 = 0;

34953 
exû±iÚ
:

34954 
	`js_ä“_´İ_’um
(
ùx
, 
©oms
, 
Ën
);

34955 
	`JS_F»eV®ue
(
ùx
, 
´İs
);

34956 
	`JS_F»eV®ue
(
ùx
, 
desc
);

34957  
»t
;

34958 
	}
}

34960 
JSV®ue
 
	$js_objeù_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

34961 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

34963 
JSV®ue
 
»t
;

34964 ià(!
	`JS_IsUndefšed
(
Ãw_rg‘
) &&

34965 
	`JS_VALUE_GET_OBJ
(
Ãw_rg‘
) !=

34966 
	`JS_VALUE_GET_OBJ
(
	`JS_G‘AùiveFunùiÚ
(
ùx
))) {

34967 
»t
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_OBJECT
);

34969 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
¬gv
[0]);

34970 
g
) {

34971 
JS_TAG_NULL
:

34972 
JS_TAG_UNDEFINED
:

34973 
»t
 = 
	`JS_NewObjeù
(
ùx
);

34976 
»t
 = 
	`JS_ToObjeù
(
ùx
, 
¬gv
[0]);

34980  
»t
;

34981 
	}
}

34983 
JSV®ue
 
	$js_objeù_ü—‹
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

34984 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

34986 
JSV®ueCÚ¡
 
´Ùo
, 
´İs
;

34987 
JSV®ue
 
obj
;

34989 
´Ùo
 = 
¬gv
[0];

34990 ià(!
	`JS_IsObjeù
(
´Ùo
è&& !
	`JS_IsNuÎ
(proto))

34991  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡…rototype");

34992 
obj
 = 
	`JS_NewObjeùPrÙo
(
ùx
, 
´Ùo
);

34993 ià(
	`JS_IsExû±iÚ
(
obj
))

34994  
JS_EXCEPTION
;

34995 
´İs
 = 
¬gv
[1];

34996 ià(!
	`JS_IsUndefšed
(
´İs
)) {

34997 ià(
	`JS_ObjeùDefšePrİ”t›s
(
ùx
, 
obj
, 
´İs
)) {

34998 
	`JS_F»eV®ue
(
ùx
, 
obj
);

34999  
JS_EXCEPTION
;

35002  
obj
;

35003 
	}
}

35005 
JSV®ue
 
	$js_objeù_g‘PrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35006 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

35008 
JSV®ueCÚ¡
 
v®
;

35010 
v®
 = 
¬gv
[0];

35011 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_OBJECT
) {

35014 ià(
magic
 || 
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_NULL
 ||

35015 
	`JS_VALUE_GET_TAG
(
v®
è=ğ
JS_TAG_UNDEFINED
)

35016  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35018  
	`JS_DupV®ue
(
ùx
, 
	`JS_G‘PrÙÙy³
(ùx, 
v®
));

35019 
	}
}

35021 
JSV®ue
 
	$js_objeù_£tPrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35022 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35024 
JSV®ueCÚ¡
 
obj
;

35025 
obj
 = 
¬gv
[0];

35026 ià(
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
obj
, 
¬gv
[1], 
TRUE
) < 0)

35027  
JS_EXCEPTION
;

35028  
	`JS_DupV®ue
(
ùx
, 
obj
);

35029 
	}
}

35032 
JSV®ue
 
	$js_objeù_defšePrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35033 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

35035 
JSV®ueCÚ¡
 
obj
, 
´İ
, 
desc
;

35036 
»t
, 
æags
;

35037 
JSAtom
 
©om
;

35039 
obj
 = 
¬gv
[0];

35040 
´İ
 = 
¬gv
[1];

35041 
desc
 = 
¬gv
[2];

35043 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

35044  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35045 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

35046 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

35047  
JS_EXCEPTION
;

35048 
æags
 = 0;

35049 ià(!
magic
)

35050 
æags
 |ğ
JS_PROP_THROW
;

35051 
»t
 = 
	`JS_DefšePrİ”tyDesc
(
ùx
, 
obj
, 
©om
, 
desc
, 
æags
);

35052 
	`JS_F»eAtom
(
ùx
, 
©om
);

35053 ià(
»t
 < 0) {

35054  
JS_EXCEPTION
;

35055 } ià(
magic
) {

35056  
	`JS_NewBoŞ
(
ùx
, 
»t
);

35058  
	`JS_DupV®ue
(
ùx
, 
obj
);

35060 
	}
}

35062 
JSV®ue
 
	$js_objeù_defšePrİ”t›s
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35063 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35066 
JSV®ueCÚ¡
 
obj
 = 
¬gv
[0];

35068 ià(
	`JS_ObjeùDefšePrİ”t›s
(
ùx
, 
obj
, 
¬gv
[1]))

35069  
JS_EXCEPTION
;

35071  
	`JS_DupV®ue
(
ùx
, 
obj
);

35072 
	}
}

35075 
JSV®ue
 
	$js_objeù___defšeG‘‹r__
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35076 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

35078 
JSV®ue
 
obj
;

35079 
JSV®ueCÚ¡
 
´İ
, 
v®ue
, 
g‘
, 
£t
;

35080 
»t
, 
æags
;

35081 
JSAtom
 
©om
;

35083 
´İ
 = 
¬gv
[0];

35084 
v®ue
 = 
¬gv
[1];

35086 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35087 ià(
	`JS_IsExû±iÚ
(
obj
))

35088  
JS_EXCEPTION
;

35090 ià(
	`check_funùiÚ
(
ùx
, 
v®ue
)) {

35091 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35092  
JS_EXCEPTION
;

35094 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

35095 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
)) {

35096 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35097  
JS_EXCEPTION
;

35099 
æags
 = 
JS_PROP_THROW
 |

35100 
JS_PROP_HAS_ENUMERABLE
 | 
JS_PROP_ENUMERABLE
 |

35101 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_CONFIGURABLE
;

35102 ià(
magic
) {

35103 
g‘
 = 
JS_UNDEFINED
;

35104 
£t
 = 
v®ue
;

35105 
æags
 |ğ
JS_PROP_HAS_SET
;

35107 
g‘
 = 
v®ue
;

35108 
£t
 = 
JS_UNDEFINED
;

35109 
æags
 |ğ
JS_PROP_HAS_GET
;

35111 
»t
 = 
	`JS_DefšePrİ”ty
(
ùx
, 
obj
, 
©om
, 
JS_UNDEFINED
, 
g‘
, 
£t
, 
æags
);

35112 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35113 
	`JS_F»eAtom
(
ùx
, 
©om
);

35114 ià(
»t
 < 0) {

35115  
JS_EXCEPTION
;

35117  
JS_UNDEFINED
;

35119 
	}
}

35121 
JSV®ue
 
	$js_objeù_g‘OwnPrİ”tyDesütÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35122 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

35124 
JSV®ueCÚ¡
 
´İ
;

35125 
JSAtom
 
©om
;

35126 
JSV®ue
 
»t
, 
obj
;

35127 
JSPrİ”tyDesütÜ
 
desc
;

35128 
»s
, 
æags
;

35130 ià(
magic
) {

35132 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[0]è!ğ
JS_TAG_OBJECT
)

35133  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35134 
obj
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

35136 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
¬gv
[0]);

35137 ià(
	`JS_IsExû±iÚ
(
obj
))

35138  
obj
;

35140 
´İ
 = 
¬gv
[1];

35141 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

35142 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

35143 
exû±iÚ
;

35144 
»t
 = 
JS_UNDEFINED
;

35145 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

35146 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
obj
), 
©om
);

35147 ià(
»s
 < 0)

35148 
exû±iÚ
;

35149 ià(
»s
) {

35150 
»t
 = 
	`JS_NewObjeù
(
ùx
);

35151 ià(
	`JS_IsExû±iÚ
(
»t
))

35152 
exû±iÚ1
;

35153 
æags
 = 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
;

35154 ià(
desc
.
æags
 & 
JS_PROP_GETSET
) {

35155 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_g‘
, 
	`JS_DupV®ue
(ùx, 
desc
.
g‘‹r
), 
æags
) < 0

35156 || 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_£t
, 
	`JS_DupV®ue
(ùx, 
desc
.
£‰”
), 
æags
) < 0)

35157 
exû±iÚ1
;

35159 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_v®ue
, 
	`JS_DupV®ue
(ùx, 
desc
.
v®ue
), 
æags
) < 0

35160 || 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_wr™abË
,

35161 
	`JS_NewBoŞ
(
ùx
, (
desc
.
æags
 & 
JS_PROP_WRITABLE
) != 0), flags) < 0)

35162 
exû±iÚ1
;

35164 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_’um”abË
,

35165 
	`JS_NewBoŞ
(
ùx
, (
desc
.
æags
 & 
JS_PROP_ENUMERABLE
) != 0), flags) < 0

35166 || 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_cÚfigu¿bË
,

35167 
	`JS_NewBoŞ
(
ùx
, (
desc
.
æags
 & 
JS_PROP_CONFIGURABLE
) != 0), flags) < 0)

35168 
exû±iÚ1
;

35169 
	`js_ä“_desc
(
ùx
, &
desc
);

35172 
	`JS_F»eAtom
(
ùx
, 
©om
);

35173 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35174  
»t
;

35176 
exû±iÚ1
:

35177 
	`js_ä“_desc
(
ùx
, &
desc
);

35178 
	`JS_F»eV®ue
(
ùx
, 
»t
);

35179 
exû±iÚ
:

35180 
	`JS_F»eAtom
(
ùx
, 
©om
);

35181 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35182  
JS_EXCEPTION
;

35183 
	}
}

35185 
JSV®ue
 
	$js_objeù_g‘OwnPrİ”tyDesütÜs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35186 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35189 
JSV®ue
 
obj
, 
r
;

35190 
JSObjeù
 *
p
;

35191 
JSPrİ”tyEnum
 *
´İs
;

35192 
ušt32_t
 
Ën
, 
i
;

35194 
r
 = 
JS_UNDEFINED
;

35195 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
¬gv
[0]);

35196 ià(
	`JS_IsExû±iÚ
(
obj
))

35197  
JS_EXCEPTION
;

35199 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

35200 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
´İs
, &
Ën
, 
p
,

35201 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
))

35202 
exû±iÚ
;

35203 
r
 = 
	`JS_NewObjeù
(
ùx
);

35204 ià(
	`JS_IsExû±iÚ
(
r
))

35205 
exû±iÚ
;

35206 
i
 = 0; i < 
Ën
; i++) {

35207 
JSV®ue
 
©omV®ue
, 
desc
;

35208 
JSV®ueCÚ¡
 
¬gs
[2];

35210 
©omV®ue
 = 
	`JS_AtomToV®ue
(
ùx
, 
´İs
[
i
].
©om
);

35211 ià(
	`JS_IsExû±iÚ
(
©omV®ue
))

35212 
exû±iÚ
;

35213 
¬gs
[0] = 
obj
;

35214 
¬gs
[1] = 
©omV®ue
;

35215 
desc
 = 
	`js_objeù_g‘OwnPrİ”tyDesütÜ
(
ùx
, 
JS_UNDEFINED
, 2, 
¬gs
, 0);

35216 
	`JS_F»eV®ue
(
ùx
, 
©omV®ue
);

35217 ià(
	`JS_IsExû±iÚ
(
desc
))

35218 
exû±iÚ
;

35219 ià(!
	`JS_IsUndefšed
(
desc
)) {

35220 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
r
, 
´İs
[
i
].
©om
, 
desc
,

35221 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

35222 
exû±iÚ
;

35225 
	`js_ä“_´İ_’um
(
ùx
, 
´İs
, 
Ën
);

35226 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35227  
r
;

35229 
exû±iÚ
:

35230 
	`js_ä“_´İ_’um
(
ùx
, 
´İs
, 
Ën
);

35231 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35232 
	`JS_F»eV®ue
(
ùx
, 
r
);

35233  
JS_EXCEPTION
;

35234 
	}
}

35236 
JSV®ue
 
	$JS_G‘OwnPrİ”tyNames2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj1
,

35237 
æags
, 
kšd
)

35239 
JSV®ue
 
obj
, 
r
, 
v®
, 
key
, 
v®ue
;

35240 
JSObjeù
 *
p
;

35241 
JSPrİ”tyEnum
 *
©oms
;

35242 
ušt32_t
 
Ën
, 
i
, 
j
;

35244 
r
 = 
JS_UNDEFINED
;

35245 
v®
 = 
JS_UNDEFINED
;

35246 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
obj1
);

35247 ià(
	`JS_IsExû±iÚ
(
obj
))

35248  
JS_EXCEPTION
;

35249 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

35250 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
©oms
, &
Ën
, 
p
, 
æags
 & ~
JS_GPN_ENUM_ONLY
))

35251 
exû±iÚ
;

35252 
r
 = 
	`JS_NewA¼ay
(
ùx
);

35253 ià(
	`JS_IsExû±iÚ
(
r
))

35254 
exû±iÚ
;

35255 
j
 = 
i
 = 0; i < 
Ën
; i++) {

35256 
JSAtom
 
©om
 = 
©oms
[
i
].atom;

35257 ià(
æags
 & 
JS_GPN_ENUM_ONLY
) {

35258 
JSPrİ”tyDesütÜ
 
desc
;

35259 
»s
;

35262 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
©om
);

35263 ià(
»s
 < 0)

35264 
exû±iÚ
;

35265 ià(!
»s
)

35267 
	`js_ä“_desc
(
ùx
, &
desc
);

35268 ià(!(
desc
.
æags
 & 
JS_PROP_ENUMERABLE
))

35271 
kšd
) {

35273 
JS_ITERATOR_KIND_KEY
:

35274 
v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

35275 ià(
	`JS_IsExû±iÚ
(
v®
))

35276 
exû±iÚ
;

35278 
JS_ITERATOR_KIND_VALUE
:

35279 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
©om
);

35280 ià(
	`JS_IsExû±iÚ
(
v®
))

35281 
exû±iÚ
;

35283 
JS_ITERATOR_KIND_KEY_AND_VALUE
:

35284 
v®
 = 
	`JS_NewA¼ay
(
ùx
);

35285 ià(
	`JS_IsExû±iÚ
(
v®
))

35286 
exû±iÚ
;

35287 
key
 = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

35288 ià(
	`JS_IsExû±iÚ
(
key
))

35289 
exû±iÚ1
;

35290 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
v®
, 0, 
key
, 
JS_PROP_THROW
) < 0)

35291 
exû±iÚ1
;

35292 
v®ue
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
©om
);

35293 ià(
	`JS_IsExû±iÚ
(
v®ue
))

35294 
exû±iÚ1
;

35295 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
v®
, 1, 
v®ue
, 
JS_PROP_THROW
) < 0)

35296 
exû±iÚ1
;

35299 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
r
, 
j
++, 
v®
, 0) < 0)

35300 
exû±iÚ
;

35302 
dÚe
;

35304 
exû±iÚ1
:

35305 
	`JS_F»eV®ue
(
ùx
, 
v®
);

35306 
exû±iÚ
:

35307 
	`JS_F»eV®ue
(
ùx
, 
r
);

35308 
r
 = 
JS_EXCEPTION
;

35309 
dÚe
:

35310 
	`js_ä“_´İ_’um
(
ùx
, 
©oms
, 
Ën
);

35311 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35312  
r
;

35313 
	}
}

35315 
JSV®ue
 
	$js_objeù_g‘OwnPrİ”tyNames
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35316 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35318  
	`JS_G‘OwnPrİ”tyNames2
(
ùx
, 
¬gv
[0],

35319 
JS_GPN_STRING_MASK
, 
JS_ITERATOR_KIND_KEY
);

35320 
	}
}

35322 
JSV®ue
 
	$js_objeù_g‘OwnPrİ”tySymbŞs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35323 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35325  
	`JS_G‘OwnPrİ”tyNames2
(
ùx
, 
¬gv
[0],

35326 
JS_GPN_SYMBOL_MASK
, 
JS_ITERATOR_KIND_KEY
);

35327 
	}
}

35329 
JSV®ue
 
	$js_objeù_keys
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35330 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
kšd
)

35332  
	`JS_G‘OwnPrİ”tyNames2
(
ùx
, 
¬gv
[0],

35333 
JS_GPN_ENUM_ONLY
 | 
JS_GPN_STRING_MASK
, 
kšd
);

35334 
	}
}

35336 
JSV®ue
 
	$js_objeù_isEx‹nsibË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35337 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
»æeù
)

35339 
JSV®ueCÚ¡
 
obj
;

35340 
»t
;

35342 
obj
 = 
¬gv
[0];

35343 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
) {

35344 ià(
»æeù
)

35345  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35347  
JS_FALSE
;

35349 
»t
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
obj
);

35350 ià(
»t
 < 0)

35351  
JS_EXCEPTION
;

35353  
	`JS_NewBoŞ
(
ùx
, 
»t
);

35354 
	}
}

35356 
JSV®ue
 
	$js_objeù_´ev’tEx‹nsiÚs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35357 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
»æeù
)

35359 
JSV®ueCÚ¡
 
obj
;

35360 
»t
;

35362 
obj
 = 
¬gv
[0];

35363 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
) {

35364 ià(
»æeù
)

35365  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35367  
	`JS_DupV®ue
(
ùx
, 
obj
);

35369 
»t
 = 
	`JS_P»v’tEx‹nsiÚs
(
ùx
, 
obj
);

35370 ià(
»t
 < 0)

35371  
JS_EXCEPTION
;

35372 ià(
»æeù
) {

35373  
	`JS_NewBoŞ
(
ùx
, 
»t
);

35375 ià(!
»t
)

35376  
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy…reventExtensions handler„eturned false");

35377  
	`JS_DupV®ue
(
ùx
, 
obj
);

35379 
	}
}

35381 
JSV®ue
 
	$js_objeù_hasOwnPrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35382 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35384 
JSV®ue
 
obj
;

35385 
JSAtom
 
©om
;

35386 
JSObjeù
 *
p
;

35387 
BOOL
 
»t
;

35389 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¬gv
[0]);

35390 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

35391  
JS_EXCEPTION
;

35392 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35393 ià(
	`JS_IsExû±iÚ
(
obj
)) {

35394 
	`JS_F»eAtom
(
ùx
, 
©om
);

35395  
obj
;

35397 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

35398 
»t
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, 
NULL
, 
p
, 
©om
);

35399 
	`JS_F»eAtom
(
ùx
, 
©om
);

35400 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35401 ià(
»t
 < 0)

35402  
JS_EXCEPTION
;

35404  
	`JS_NewBoŞ
(
ùx
, 
»t
);

35405 
	}
}

35407 
JSV®ue
 
	$js_objeù_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35408 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35410  
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35411 
	}
}

35413 
JSV®ue
 
	$js_objeù_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35414 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35416 
JSV®ue
 
obj
, 
g
;

35417 
is_¬¿y
;

35418 
JSAtom
 
©om
;

35419 
JSObjeù
 *
p
;

35421 ià(
	`JS_IsNuÎ
(
this_v®
)) {

35422 
g
 = 
	`JS_NewSŒšg
(
ùx
, "Null");

35423 } ià(
	`JS_IsUndefšed
(
this_v®
)) {

35424 
g
 = 
	`JS_NewSŒšg
(
ùx
, "Undefined");

35426 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35427 ià(
	`JS_IsExû±iÚ
(
obj
))

35428  
obj
;

35429 
is_¬¿y
 = 
	`JS_IsA¼ay
(
ùx
, 
obj
);

35430 ià(
is_¬¿y
 < 0) {

35431 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35432  
JS_EXCEPTION
;

35434 ià(
is_¬¿y
) {

35435 
©om
 = 
JS_ATOM_A¼ay
;

35436 } ià(
	`JS_IsFunùiÚ
(
ùx
, 
obj
)) {

35437 
©om
 = 
JS_ATOM_FunùiÚ
;

35439 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

35440 
p
->
şass_id
) {

35441 
JS_CLASS_STRING
:

35442 
JS_CLASS_ARGUMENTS
:

35443 
JS_CLASS_MAPPED_ARGUMENTS
:

35444 
JS_CLASS_ERROR
:

35445 
JS_CLASS_BOOLEAN
:

35446 
JS_CLASS_NUMBER
:

35447 
JS_CLASS_DATE
:

35448 
JS_CLASS_REGEXP
:

35449 
©om
 = 
ùx
->
¹
->
şass_¬¿y
[
p
->
şass_id
].
şass_Çme
;

35452 
©om
 = 
JS_ATOM_Objeù
;

35456 
g
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_toSŒšgTag
);

35457 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35458 ià(
	`JS_IsExû±iÚ
(
g
))

35459  
JS_EXCEPTION
;

35460 ià(!
	`JS_IsSŒšg
(
g
)) {

35461 
	`JS_F»eV®ue
(
ùx
, 
g
);

35462 
g
 = 
	`JS_AtomToSŒšg
(
ùx
, 
©om
);

35465  
	`JS_CÚÿtSŒšg3
(
ùx
, "[objeù ", 
g
, "]");

35466 
	}
}

35468 
JSV®ue
 
	$js_objeù_toLoÿËSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35469 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35471  
	`JS_Invoke
(
ùx
, 
this_v®
, 
JS_ATOM_toSŒšg
, 0, 
NULL
);

35472 
	}
}

35474 
JSV®ue
 
	$js_objeù_assign
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35475 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35478 
JSV®ue
 
obj
, 
s
;

35479 
i
;

35481 
s
 = 
JS_UNDEFINED
;

35482 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
¬gv
[0]);

35483 ià(
	`JS_IsExû±iÚ
(
obj
))

35484 
exû±iÚ
;

35485 
i
 = 1; i < 
¬gc
; i++) {

35486 ià(!
	`JS_IsNuÎ
(
¬gv
[
i
]è&& !
	`JS_IsUndefšed
(argv[i])) {

35487 
s
 = 
	`JS_ToObjeù
(
ùx
, 
¬gv
[
i
]);

35488 ià(
	`JS_IsExû±iÚ
(
s
))

35489 
exû±iÚ
;

35490 ià(
	`JS_CİyD©aPrİ”t›s
(
ùx
, 
obj
, 
s
, 
JS_UNDEFINED
, 
TRUE
))

35491 
exû±iÚ
;

35492 
	`JS_F»eV®ue
(
ùx
, 
s
);

35495  
obj
;

35496 
exû±iÚ
:

35497 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35498 
	`JS_F»eV®ue
(
ùx
, 
s
);

35499  
JS_EXCEPTION
;

35500 
	}
}

35502 
JSV®ue
 
	$js_objeù_£®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35503 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
ä“ze_æag
)

35505 
JSV®ueCÚ¡
 
obj
 = 
¬gv
[0];

35506 
JSObjeù
 *
p
;

35507 
JSPrİ”tyEnum
 *
´İs
;

35508 
ušt32_t
 
Ën
, 
i
;

35509 
æags
, 
desc_æags
, 
»s
;

35511 ià(!
	`JS_IsObjeù
(
obj
))

35512  
	`JS_DupV®ue
(
ùx
, 
obj
);

35514 
»s
 = 
	`JS_P»v’tEx‹nsiÚs
(
ùx
, 
obj
);

35515 ià(
»s
 < 0)

35516  
JS_EXCEPTION
;

35517 ià(!
»s
) {

35518  
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy…reventExtensions handler„eturned false");

35521 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

35522 
æags
 = 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
;

35523 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
´İs
, &
Ën
, 
p
, 
æags
))

35524  
JS_EXCEPTION
;

35526 
i
 = 0; i < 
Ën
; i++) {

35527 
JSPrİ”tyDesütÜ
 
desc
;

35528 
JSAtom
 
´İ
 = 
´İs
[
i
].
©om
;

35530 
desc_æags
 = 
JS_PROP_THROW
 | 
JS_PROP_HAS_CONFIGURABLE
;

35531 ià(
ä“ze_æag
) {

35532 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
´İ
);

35533 ià(
»s
 < 0)

35534 
exû±iÚ
;

35535 ià(
»s
) {

35536 ià(
desc
.
æags
 & 
JS_PROP_WRITABLE
)

35537 
desc_æags
 |ğ
JS_PROP_HAS_WRITABLE
;

35538 
	`js_ä“_desc
(
ùx
, &
desc
);

35541 ià(
	`JS_DefšePrİ”ty
(
ùx
, 
obj
, 
´İ
, 
JS_UNDEFINED
,

35542 
JS_UNDEFINED
, JS_UNDEFINED, 
desc_æags
) < 0)

35543 
exû±iÚ
;

35545 
	`js_ä“_´İ_’um
(
ùx
, 
´İs
, 
Ën
);

35546  
	`JS_DupV®ue
(
ùx
, 
obj
);

35548 
exû±iÚ
:

35549 
	`js_ä“_´İ_’um
(
ùx
, 
´İs
, 
Ën
);

35550  
JS_EXCEPTION
;

35551 
	}
}

35553 
JSV®ue
 
	$js_objeù_isS—Ëd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35554 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
is_äoz’
)

35556 
JSV®ueCÚ¡
 
obj
 = 
¬gv
[0];

35557 
JSObjeù
 *
p
;

35558 
JSPrİ”tyEnum
 *
´İs
;

35559 
ušt32_t
 
Ën
, 
i
;

35560 
æags
, 
»s
;

35562 ià(!
	`JS_IsObjeù
(
obj
))

35563  
JS_TRUE
;

35565 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

35566 
æags
 = 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
;

35567 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
´İs
, &
Ën
, 
p
, 
æags
))

35568  
JS_EXCEPTION
;

35570 
i
 = 0; i < 
Ën
; i++) {

35571 
JSPrİ”tyDesütÜ
 
desc
;

35572 
JSAtom
 
´İ
 = 
´İs
[
i
].
©om
;

35574 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
´İ
);

35575 ià(
»s
 < 0)

35576 
exû±iÚ
;

35577 ià(
»s
) {

35578 
	`js_ä“_desc
(
ùx
, &
desc
);

35579 ià((
desc
.
æags
 & 
JS_PROP_CONFIGURABLE
)

35580 || (
is_äoz’
 && (
desc
.
æags
 & 
JS_PROP_WRITABLE
))) {

35581 
»s
 = 
FALSE
;

35582 
dÚe
;

35586 
»s
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
obj
);

35587 ià(
»s
 < 0)

35588  
JS_EXCEPTION
;

35589 
»s
 ^= 1;

35590 
dÚe
:

35591 
	`js_ä“_´İ_’um
(
ùx
, 
´İs
, 
Ën
);

35592  
	`JS_NewBoŞ
(
ùx
, 
»s
);

35594 
exû±iÚ
:

35595 
	`js_ä“_´İ_’um
(
ùx
, 
´İs
, 
Ën
);

35596  
JS_EXCEPTION
;

35597 
	}
}

35599 
JSV®ue
 
	$js_objeù_äomEÁr›s
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35600 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35602 
JSV®ue
 
obj
, 
™”
, 
Ãxt_m‘hod
 = 
JS_UNDEFINED
;

35603 
JSV®ueCÚ¡
 
™”abË
;

35604 
BOOL
 
dÚe
;

35608 
™”abË
 = 
¬gv
[0];

35610 
obj
 = 
	`JS_NewObjeù
(
ùx
);

35611 ià(
	`JS_IsExû±iÚ
(
obj
))

35612  
obj
;

35614 
™”
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
™”abË
, 
FALSE
);

35615 ià(
	`JS_IsExû±iÚ
(
™”
))

35616 
ç
;

35617 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”
, 
JS_ATOM_Ãxt
);

35618 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

35619 
ç
;

35622 
JSV®ue
 
key
, 
v®ue
, 
™em
;

35623 
™em
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
™”
, 
Ãxt_m‘hod
, 0, 
NULL
, &
dÚe
);

35624 ià(
	`JS_IsExû±iÚ
(
™em
))

35625 
ç
;

35626 ià(
dÚe
) {

35627 
	`JS_F»eV®ue
(
ùx
, 
™em
);

35631 
key
 = 
JS_UNDEFINED
;

35632 
v®ue
 = 
JS_UNDEFINED
;

35633 ià(!
	`JS_IsObjeù
(
™em
)) {

35634 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35635 
ç1
;

35637 
key
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
™em
, 0);

35638 ià(
	`JS_IsExû±iÚ
(
key
))

35639 
ç1
;

35640 
v®ue
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
™em
, 1);

35641 ià(
	`JS_IsExû±iÚ
(
v®ue
)) {

35642 
	`JS_F»eV®ue
(
ùx
, 
key
);

35643 
ç1
;

35645 ià(
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
obj
, 
key
, 
v®ue
,

35646 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0) {

35647 
ç1
:

35648 
	`JS_F»eV®ue
(
ùx
, 
™em
);

35649 
ç
;

35651 
	`JS_F»eV®ue
(
ùx
, 
™em
);

35653 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

35654 
	`JS_F»eV®ue
(
ùx
, 
™”
);

35655  
obj
;

35656 
ç
:

35657 ià(
	`JS_IsObjeù
(
™”
)) {

35659 
	`JS_I‹¿tÜClo£
(
ùx
, 
™”
, 
TRUE
);

35661 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

35662 
	`JS_F»eV®ue
(
ùx
, 
™”
);

35663 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35664  
JS_EXCEPTION
;

35665 
	}
}

35669 
JSV®ue
 
	$js_objeù___£tOwnPrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35670 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35672 
»t
;

35673 
»t
 = 
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
¬gv
[0], 
	`JS_DupV®ue
(ctx,‡rgv[1]),

35674 
	`JS_DupV®ue
(
ùx
, 
¬gv
[2]),

35675 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
);

35676 ià(
»t
 < 0)

35677  
JS_EXCEPTION
;

35679  
	`JS_NewBoŞ
(
ùx
, 
»t
);

35680 
	}
}

35682 
JSV®ue
 
	$js_objeù___toObjeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35683 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35685  
	`JS_ToObjeù
(
ùx
, 
¬gv
[0]);

35686 
	}
}

35688 
JSV®ue
 
	$js_objeù___toPrim™ive
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35689 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35691 
hšt
 = 
HINT_NONE
;

35693 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[1]è=ğ
JS_TAG_INT
)

35694 
hšt
 = 
	`JS_VALUE_GET_INT
(
¬gv
[1]);

35696  
	`JS_ToPrim™ive
(
ùx
, 
¬gv
[0], 
hšt
);

35697 
	}
}

35701 
JSV®ue
 
	$js_objeù___g‘CÏss
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35702 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35704 
JSAtom
 
©om
;

35705 
JSObjeù
 *
p
;

35706 
ušt32_t
 
g
;

35707 
şass_id
;

35709 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
¬gv
[0]);

35710 ià(
g
 =ğ
JS_TAG_OBJECT
) {

35711 
p
 = 
	`JS_VALUE_GET_OBJ
(
¬gv
[0]);

35712 
şass_id
 = 
p
->class_id;

35713 ià(
şass_id
 =ğ
JS_CLASS_PROXY
 && 
	`JS_IsFunùiÚ
(
ùx
, 
¬gv
[0]))

35714 
şass_id
 = 
JS_CLASS_BYTECODE_FUNCTION
;

35715 
©om
 = 
ùx
->
¹
->
şass_¬¿y
[
şass_id
].
şass_Çme
;

35717 
©om
 = 
JS_ATOM_em±y_¡ršg
;

35719  
	`JS_AtomToSŒšg
(
ùx
, 
©om
);

35720 
	}
}

35722 
JSV®ue
 
	$js_objeù_is
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35723 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35725  
	`JS_NewBoŞ
(
ùx
, 
	`js_§me_v®ue
(ùx, 
¬gv
[0],‡rgv[1]));

35726 
	}
}

35729 
JSV®ue
 
	$js_objeù___g‘ObjeùD©a
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35730 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35732  
	`JS_G‘ObjeùD©a
(
ùx
, 
¬gv
[0]);

35733 
	}
}

35735 
JSV®ue
 
	$js_objeù___£tObjeùD©a
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35736 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35738 ià(
	`JS_S‘ObjeùD©a
(
ùx
, 
¬gv
[0], 
	`JS_DupV®ue
(ctx,‡rgv[1])))

35739  
JS_EXCEPTION
;

35740  
	`JS_DupV®ue
(
ùx
, 
¬gv
[1]);

35741 
	}
}

35743 
JSV®ue
 
	$js_objeù___toPrİ”tyKey
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35744 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35746  
	`JS_ToPrİ”tyKey
(
ùx
, 
¬gv
[0]);

35747 
	}
}

35749 
JSV®ue
 
	$js_objeù___isObjeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35750 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35752  
	`JS_NewBoŞ
(
ùx
, 
	`JS_IsObjeù
(
¬gv
[0]));

35753 
	}
}

35755 
JSV®ue
 
	$js_objeù___isSameV®ueZ”o
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35756 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35758  
	`JS_NewBoŞ
(
ùx
, 
	`js_§me_v®ue_z”o
(ùx, 
¬gv
[0],‡rgv[1]));

35759 
	}
}

35761 
JSV®ue
 
	$js_objeù___isCÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35762 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35764  
	`JS_NewBoŞ
(
ùx
, 
	`JS_IsCÚ¡ruùÜ
(ùx, 
¬gv
[0]));

35765 
	}
}

35768 
JSV®ue
 
	$JS_S³c›sCÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

35769 
JSV®ueCÚ¡
 
deçuÉCÚ¡ruùÜ
)

35771 
JSV®ue
 
ùÜ
, 
¥ec›s
;

35773 ià(!
	`JS_IsObjeù
(
obj
))

35774  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35775 
ùÜ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_cÚ¡ruùÜ
);

35776 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

35777  
ùÜ
;

35778 ià(
	`JS_IsUndefšed
(
ùÜ
))

35779  
	`JS_DupV®ue
(
ùx
, 
deçuÉCÚ¡ruùÜ
);

35780 ià(!
	`JS_IsObjeù
(
ùÜ
)) {

35781 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

35782  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35784 
¥ec›s
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
ùÜ
, 
JS_ATOM_SymbŞ_¥ec›s
);

35785 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

35786 ià(
	`JS_IsExû±iÚ
(
¥ec›s
))

35787  
¥ec›s
;

35788 ià(
	`JS_IsUndefšed
(
¥ec›s
è|| 
	`JS_IsNuÎ
(species))

35789  
	`JS_DupV®ue
(
ùx
, 
deçuÉCÚ¡ruùÜ
);

35790 ià(!
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
¥ec›s
)) {

35791 
	`JS_F»eV®ue
(
ùx
, 
¥ec›s
);

35792  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ constructor");

35794  
¥ec›s
;

35795 
	}
}

35798 
JSV®ue
 
	$js_objeù___¥ec›sCÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35799 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35801  
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
¬gv
[0],‡rgv[1]);

35802 
	}
}

35805 
JSV®ue
 
	$js_objeù_g‘___´Ùo__
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

35807 
JSV®ue
 
v®
, 
»t
;

35809 
v®
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35810 ià(
	`JS_IsExû±iÚ
(
v®
))

35811  
v®
;

35812 
»t
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_G‘PrÙÙy³
(ùx, 
v®
));

35813 
	`JS_F»eV®ue
(
ùx
, 
v®
);

35814  
»t
;

35815 
	}
}

35817 
JSV®ue
 
	$js_objeù_£t___´Ùo__
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35818 
JSV®ueCÚ¡
 
´Ùo
)

35820 ià(
	`JS_IsUndefšed
(
this_v®
è|| 
	`JS_IsNuÎ
(this_val))

35821  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

35822 ià(!
	`JS_IsObjeù
(
´Ùo
è&& !
	`JS_IsNuÎ
(proto))

35823  
JS_UNDEFINED
;

35824 ià(
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
this_v®
, 
´Ùo
, 
TRUE
) < 0)

35825  
JS_EXCEPTION
;

35827  
JS_UNDEFINED
;

35828 
	}
}

35830 
JSV®ue
 
	$js_objeù_isPrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35831 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35833 
JSV®ue
 
obj
;

35834 
JSV®ueCÚ¡
 
v
;

35835 
max_d•th
 = 1000, 
»s
 = -1;

35837 
v
 = 
¬gv
[0];

35838 ià(!
	`JS_IsObjeù
(
v
))

35839  
JS_FALSE
;

35840 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35841 ià(
	`JS_IsExû±iÚ
(
obj
))

35842  
JS_EXCEPTION
;

35843 --
max_d•th
 > 0) {

35844 
v
 = 
	`JS_G‘PrÙÙy³
(
ùx
, v);

35845 ià(
	`JS_IsExû±iÚ
(
v
))

35846 
exû±iÚ
;

35847 ià(
	`JS_IsNuÎ
(
v
)) {

35848 
»s
 = 
FALSE
;

35851 ià(
	`js_¡riù_eq2
(
ùx
, 
	`JS_DupV®ue
(ùx, 
obj
), JS_DupV®ue(ùx, 
v
),

35852 
JS_EQ_STRICT
)) {

35853 
»s
 = 
TRUE
;

35857 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35858 ià(
»s
 < 0)

35859  
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "prototype chain cycle");

35861  
	`JS_NewBoŞ
(
ùx
, 
»s
);

35863 
exû±iÚ
:

35864 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35865  
JS_EXCEPTION
;

35866 
	}
}

35868 
JSV®ue
 
	$js_objeù_´İ”tyIsEnum”abË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35869 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35871 
JSV®ue
 
obj
, 
»s
 = 
JS_EXCEPTION
;

35872 
JSAtom
 
´İ
 = 
JS_ATOM_NULL
;

35873 
JSPrİ”tyDesütÜ
 
desc
;

35874 
has_´İ
;

35876 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35877 ià(
	`JS_IsExû±iÚ
(
obj
))

35878 
exû±iÚ
;

35879 
´İ
 = 
	`JS_V®ueToAtom
(
ùx
, 
¬gv
[0]);

35880 ià(
	`uÆik–y
(
´İ
 =ğ
JS_ATOM_NULL
))

35881 
exû±iÚ
;

35883 
has_´İ
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
obj
), 
´İ
);

35884 ià(
has_´İ
 < 0)

35885 
exû±iÚ
;

35886 ià(
has_´İ
) {

35887 
»s
 = 
	`JS_NewBoŞ
(
ùx
, (
desc
.
æags
 & 
JS_PROP_ENUMERABLE
) != 0);

35888 
	`js_ä“_desc
(
ùx
, &
desc
);

35890 
»s
 = 
JS_FALSE
;

35893 
exû±iÚ
:

35894 
	`JS_F»eAtom
(
ùx
, 
´İ
);

35895 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35896  
»s
;

35897 
	}
}

35899 
JSV®ue
 
	$js_objeù___lookupG‘‹r__
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35900 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
£‰”
)

35902 
JSV®ue
 
obj
, 
»s
 = 
JS_EXCEPTION
;

35903 
JSV®ueCÚ¡
 
v
;

35904 
JSAtom
 
´İ
 = 
JS_ATOM_NULL
;

35905 
JSPrİ”tyDesütÜ
 
desc
;

35906 
has_´İ
;

35908 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

35909 ià(
	`JS_IsExû±iÚ
(
obj
))

35910 
exû±iÚ
;

35911 
´İ
 = 
	`JS_V®ueToAtom
(
ùx
, 
¬gv
[0]);

35912 ià(
	`uÆik–y
(
´İ
 =ğ
JS_ATOM_NULL
))

35913 
exû±iÚ
;

35915 
v
 = 
obj
;;) {

35916 
has_´İ
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
v
), 
´İ
);

35917 ià(
has_´İ
 < 0)

35918 
exû±iÚ
;

35919 ià(
has_´İ
) {

35920 ià(
desc
.
æags
 & 
JS_PROP_GETSET
)

35921 
»s
 = 
	`JS_DupV®ue
(
ùx
, 
£‰”
 ? 
desc
.£‰” : desc.
g‘‹r
);

35923 
»s
 = 
JS_UNDEFINED
;

35924 
	`js_ä“_desc
(
ùx
, &
desc
);

35927 
v
 = 
	`JS_G‘PrÙÙy³
(
ùx
, v);

35928 ià(
	`JS_IsExû±iÚ
(
v
))

35929 
exû±iÚ
;

35930 ià(
	`JS_IsNuÎ
(
v
)) {

35931 
»s
 = 
JS_UNDEFINED
;

35936 
exû±iÚ
:

35937 
	`JS_F»eAtom
(
ùx
, 
´İ
);

35938 
	`JS_F»eV®ue
(
ùx
, 
obj
);

35939  
»s
;

35940 
	}
}

35942 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_objeù_funcs
[] = {

35943 
JS_CFUNC_DEF
("ü—‹", 2, 
js_objeù_ü—‹
 ),

35944 
JS_CFUNC_MAGIC_DEF
("g‘PrÙÙy³Of", 1, 
js_objeù_g‘PrÙÙy³Of
, 0 ),

35945 
JS_CFUNC_DEF
("£tPrÙÙy³Of", 2, 
js_objeù_£tPrÙÙy³Of
 ),

35946 
JS_CFUNC_MAGIC_DEF
("defšePrİ”ty", 3, 
js_objeù_defšePrİ”ty
, 0 ),

35947 
JS_CFUNC_DEF
("defšePrİ”t›s", 2, 
js_objeù_defšePrİ”t›s
 ),

35948 
JS_CFUNC_DEF
("g‘OwnPrİ”tyNames", 1, 
js_objeù_g‘OwnPrİ”tyNames
 ),

35949 
JS_CFUNC_DEF
("g‘OwnPrİ”tySymbŞs", 1, 
js_objeù_g‘OwnPrİ”tySymbŞs
 ),

35950 
JS_CFUNC_MAGIC_DEF
("keys", 1, 
js_objeù_keys
, 
JS_ITERATOR_KIND_KEY
 ),

35951 
JS_CFUNC_MAGIC_DEF
("v®ues", 1, 
js_objeù_keys
, 
JS_ITERATOR_KIND_VALUE
 ),

35952 
JS_CFUNC_MAGIC_DEF
("’Œ›s", 1, 
js_objeù_keys
, 
JS_ITERATOR_KIND_KEY_AND_VALUE
 ),

35953 
JS_CFUNC_MAGIC_DEF
("isEx‹nsibË", 1, 
js_objeù_isEx‹nsibË
, 0 ),

35954 
JS_CFUNC_MAGIC_DEF
("´ev’tEx‹nsiÚs", 1, 
js_objeù_´ev’tEx‹nsiÚs
, 0 ),

35955 
JS_CFUNC_MAGIC_DEF
("g‘OwnPrİ”tyDesütÜ", 2, 
js_objeù_g‘OwnPrİ”tyDesütÜ
, 0 ),

35956 
JS_CFUNC_DEF
("g‘OwnPrİ”tyDesütÜs", 1, 
js_objeù_g‘OwnPrİ”tyDesütÜs
 ),

35957 
JS_CFUNC_DEF
("is", 2, 
js_objeù_is
 ),

35958 
JS_CFUNC_DEF
("assign", 2, 
js_objeù_assign
 ),

35959 
JS_CFUNC_MAGIC_DEF
("£®", 1, 
js_objeù_£®
, 0 ),

35960 
JS_CFUNC_MAGIC_DEF
("ä“ze", 1, 
js_objeù_£®
, 1 ),

35961 
JS_CFUNC_MAGIC_DEF
("isS—Ëd", 1, 
js_objeù_isS—Ëd
, 0 ),

35962 
JS_CFUNC_MAGIC_DEF
("isFroz’", 1, 
js_objeù_isS—Ëd
, 1 ),

35963 
JS_CFUNC_DEF
("__g‘CÏss", 1, 
js_objeù___g‘CÏss
 ),

35974 
JS_CFUNC_DEF
("äomEÁr›s", 1, 
js_objeù_äomEÁr›s
 ),

35977 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_objeù_´Ùo_funcs
[] = {

35978 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_objeù_toSŒšg
 ),

35979 
JS_CFUNC_DEF
("toLoÿËSŒšg", 0, 
js_objeù_toLoÿËSŒšg
 ),

35980 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_objeù_v®ueOf
 ),

35981 
JS_CFUNC_DEF
("hasOwnPrİ”ty", 1, 
js_objeù_hasOwnPrİ”ty
 ),

35982 
JS_CFUNC_DEF
("isPrÙÙy³Of", 1, 
js_objeù_isPrÙÙy³Of
 ),

35983 
JS_CFUNC_DEF
("´İ”tyIsEnum”abË", 1, 
js_objeù_´İ”tyIsEnum”abË
 ),

35984 
JS_CGETSET_DEF
("__´Ùo__", 
js_objeù_g‘___´Ùo__
, 
js_objeù_£t___´Ùo__
 ),

35985 
JS_CFUNC_MAGIC_DEF
("__defšeG‘‹r__", 2, 
js_objeù___defšeG‘‹r__
, 0 ),

35986 
JS_CFUNC_MAGIC_DEF
("__defšeS‘‹r__", 2, 
js_objeù___defšeG‘‹r__
, 1 ),

35987 
JS_CFUNC_MAGIC_DEF
("__lookupG‘‹r__", 1, 
js_objeù___lookupG‘‹r__
, 0 ),

35988 
JS_CFUNC_MAGIC_DEF
("__lookupS‘‹r__", 1, 
js_objeù___lookupG‘‹r__
, 1 ),

35993 
JSV®ue
 
	$js_funùiÚ_´Ùo
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

35994 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

35996  
JS_UNDEFINED
;

35997 
	}
}

36001 
	$·tch_funùiÚ_cÚ¡ruùÜ_sourû
(
JSCÚ‹xt
 *
ùx
,

36002 
JSV®ueCÚ¡
 
func_obj
,

36003 
size_t
 
pos
)

36005 
JSObjeù
 *
p
;

36006 
JSFunùiÚBy‹code
 *
b
;

36007 *
r
, *
r_’d
, *
Ãw_sourû
;

36008 
c
;

36009 
size_t
 
idx
, 
Ën
;

36011 ià(
	`JS_VALUE_GET_TAG
(
func_obj
è!ğ
JS_TAG_OBJECT
)

36013 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

36014 ià(!
	`js_şass_has_by‹code
(
p
->
şass_id
))

36016 
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

36017 ià(!
b
->
has_debug
)

36019 
r
 = 
b
->
debug
.
sourû
;

36020 
r_’d
 = 
b
->
debug
.
sourû
 + b->debug.
sourû_Ën
;

36021 
idx
 = 0;

36022 
r
 < 
r_’d
) {

36023 ià(
idx
 =ğ
pos
) {

36025 
Ãw_sourû
 = 
	`js_»®loc
(
ùx
, 
b
->
debug
.
sourû
,

36026 
b
->
debug
.
sourû_Ën
 + 2);

36027 ià(!
Ãw_sourû
)

36029 
Ën
 = 
r
 - 
b
->
debug
.
sourû
;

36030 
	`memmove
(
Ãw_sourû
 + 
Ën
 + 1,‚ew_source +†en,

36031 
b
->
debug
.
sourû_Ën
 + 1 - 
Ën
);

36032 
Ãw_sourû
[
Ën
] = '\n';

36033 
b
->
debug
.
sourû
 = 
Ãw_sourû
;

36034 
b
->
debug
.
sourû_Ën
++;

36037 
c
 = 
	`unicode_äom_utf8
((cÚ¡ 
ušt8_t
 *)
r
, 
UTF8_CHAR_LEN_MAX
,

36038 (cÚ¡ 
ušt8_t
 **)&
r
);

36039 ià(
c
 < 0)

36041 
idx
++;

36044 
	}
}

36047 
JSV®ue
 
	$js_funùiÚ_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

36048 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

36050 
JSFunùiÚKšdEnum
 
func_kšd
 = 
magic
;

36051 
i
, 
n
, 
»t
, 
func_¡¬t_pos
;

36052 
JSV®ue
 
s
, 
´Ùo
, 
obj
 = 
JS_UNDEFINED
;

36053 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

36055 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

36056 
	`¡ršg_bufãr_putc8
(
b
, '(');

36058 ià(
func_kšd
 =ğ
JS_FUNC_ASYNC
 || func_kšd =ğ
JS_FUNC_ASYNC_GENERATOR
) {

36059 
	`¡ršg_bufãr_puts8
(
b
, "async ");

36061 
	`¡ršg_bufãr_puts8
(
b
, "function");

36063 ià(
func_kšd
 =ğ
JS_FUNC_GENERATOR
 || func_kšd =ğ
JS_FUNC_ASYNC_GENERATOR
) {

36064 
	`¡ršg_bufãr_putc8
(
b
, '*');

36066 
	`¡ršg_bufãr_puts8
(
b
, "‡nonymous(");

36068 
n
 = 
¬gc
 - 1;

36069 
i
 = 0; i < 
n
; i++) {

36070 ià(
i
 != 0) {

36071 
	`¡ršg_bufãr_putc8
(
b
, ',');

36073 ià(
	`¡ršg_bufãr_cÚÿt_v®ue
(
b
, 
¬gv
[
i
]))

36074 
ç
;

36076 
	`¡ršg_bufãr_puts8
(
b
, "\n) {");

36082 
func_¡¬t_pos
 = 
b
->
Ën
 - 1;

36083 ià(
n
 >= 0) {

36084 ià(
	`¡ršg_bufãr_cÚÿt_v®ue
(
b
, 
¬gv
[
n
]))

36085 
ç
;

36087 
	`¡ršg_bufãr_puts8
(
b
, "\n})");

36088 
s
 = 
	`¡ršg_bufãr_’d
(
b
);

36089 ià(
	`JS_IsExû±iÚ
(
s
))

36090 
ç1
;

36092 
obj
 = 
	`JS_Ev®Objeù
(
ùx
, ctx->
glob®_obj
, 
s
, 
JS_EVAL_TYPE_INDIRECT
, -1);

36093 
	`JS_F»eV®ue
(
ùx
, 
s
);

36094 ià(
	`JS_IsExû±iÚ
(
obj
))

36095 
ç1
;

36096 ià(
	`·tch_funùiÚ_cÚ¡ruùÜ_sourû
(
ùx
, 
obj
, 
func_¡¬t_pos
) < 0)

36097 
ç1
;

36098 ià(!
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

36100 
´Ùo
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
Ãw_rg‘
, 
JS_ATOM_´ÙÙy³
);

36101 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

36102 
ç1
;

36103 ià(!
	`JS_IsObjeù
(
´Ùo
)) {

36104 
JSCÚ‹xt
 *
»®m
;

36105 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

36106 
»®m
 = 
	`JS_G‘FunùiÚR—lm
(
ùx
, 
Ãw_rg‘
);

36107 ià(!
»®m
)

36108 
ç1
;

36109 
´Ùo
 = 
	`JS_DupV®ue
(
ùx
, 
»®m
->
şass_´Ùo
[
func_kšd_to_şass_id
[
func_kšd
]]);

36111 
»t
 = 
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
obj
, 
´Ùo
, 
TRUE
);

36112 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

36113 ià(
»t
 < 0)

36114 
ç1
;

36116  
obj
;

36118 
ç
:

36119 
	`¡ršg_bufãr_ä“
(
b
);

36120 
ç1
:

36121 
	`JS_F»eV®ue
(
ùx
, 
obj
);

36122  
JS_EXCEPTION
;

36123 
	}
}

36125 
__exû±iÚ
 
	$js_g‘_Ëngth32
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
´es
,

36126 
JSV®ueCÚ¡
 
obj
)

36128 
JSV®ue
 
Ën_v®
;

36129 
Ën_v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
);

36130 ià(
	`JS_IsExû±iÚ
(
Ën_v®
)) {

36131 *
´es
 = 0;

36134  
	`JS_ToUšt32F»e
(
ùx
, 
´es
, 
Ën_v®
);

36135 
	}
}

36137 
__exû±iÚ
 
	$js_g‘_Ëngth64
(
JSCÚ‹xt
 *
ùx
, 
št64_t
 *
´es
,

36138 
JSV®ueCÚ¡
 
obj
)

36140 
JSV®ue
 
Ën_v®
;

36141 
Ën_v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
);

36142 ià(
	`JS_IsExû±iÚ
(
Ën_v®
)) {

36143 *
´es
 = 0;

36146  
	`JS_ToL’gthF»e
(
ùx
, 
´es
, 
Ën_v®
);

36147 
	}
}

36149 
	$ä“_¬g_li¡
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
b
, 
ušt32_t
 
Ën
)

36151 
ušt32_t
 
i
;

36152 
i
 = 0; i < 
Ën
; i++) {

36153 
	`JS_F»eV®ue
(
ùx
, 
b
[
i
]);

36155 
	`js_ä“
(
ùx
, 
b
);

36156 
	}
}

36159 
JSV®ue
 *
	$bud_¬g_li¡
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
¶’
,

36160 
JSV®ueCÚ¡
 
¬¿y_¬g
)

36162 
ušt32_t
 
Ën
, 
i
;

36163 
JSV®ue
 *
b
, 
»t
;

36164 
JSObjeù
 *
p
;

36166 ià(
	`JS_VALUE_GET_TAG
(
¬¿y_¬g
è!ğ
JS_TAG_OBJECT
) {

36167 
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ object");

36168  
NULL
;

36170 ià(
	`js_g‘_Ëngth32
(
ùx
, &
Ën
, 
¬¿y_¬g
))

36171  
NULL
;

36173 
b
 = 
	`js_m®locz
(
ùx
, Ñab[0]è* 
	`max_ušt32
(1, 
Ën
));

36174 ià(!
b
)

36175  
NULL
;

36176 
p
 = 
	`JS_VALUE_GET_OBJ
(
¬¿y_¬g
);

36177 ià((
p
->
şass_id
 =ğ
JS_CLASS_ARRAY
 ||…->şass_id =ğ
JS_CLASS_ARGUMENTS
) &&

36178 
p
->
ç¡_¬¿y
 &&

36179 
Ën
 =ğ
p
->
u
.
¬¿y
.
couÁ
) {

36180 
i
 = 0; i < 
Ën
; i++) {

36181 
b
[
i
] = 
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
¬¿y
.u.
v®ues
[i]);

36184 
i
 = 0; i < 
Ën
; i++) {

36185 
»t
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
¬¿y_¬g
, 
i
);

36186 ià(
	`JS_IsExû±iÚ
(
»t
)) {

36187 
	`ä“_¬g_li¡
(
ùx
, 
b
, 
i
);

36188  
NULL
;

36190 
b
[
i
] = 
»t
;

36193 *
¶’
 = 
Ën
;

36194  
b
;

36195 
	}
}

36197 
JSV®ue
 
	$js_funùiÚ_­¶y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36198 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

36200 
JSV®ueCÚ¡
 
this_¬g
, 
¬¿y_¬g
;

36201 
ušt32_t
 
Ën
;

36202 
JSV®ue
 *
b
, 
»t
;

36204 ià(
	`check_funùiÚ
(
ùx
, 
this_v®
))

36205  
JS_EXCEPTION
;

36206 
this_¬g
 = 
¬gv
[0];

36207 
¬¿y_¬g
 = 
¬gv
[1];

36208 ià(
	`JS_VALUE_GET_TAG
(
¬¿y_¬g
è=ğ
JS_TAG_UNDEFINED
 ||

36209 
	`JS_VALUE_GET_TAG
(
¬¿y_¬g
è=ğ
JS_TAG_NULL
) {

36210  
	`JS_C®l
(
ùx
, 
this_v®
, 
this_¬g
, 0, 
NULL
);

36212 
b
 = 
	`bud_¬g_li¡
(
ùx
, &
Ën
, 
¬¿y_¬g
);

36213 ià(!
b
)

36214  
JS_EXCEPTION
;

36215 ià(
magic
) {

36216 
»t
 = 
	`JS_C®lCÚ¡ruùÜ2
(
ùx
, 
this_v®
, 
this_¬g
, 
Ën
, (
JSV®ueCÚ¡
 *)
b
);

36218 
»t
 = 
	`JS_C®l
(
ùx
, 
this_v®
, 
this_¬g
, 
Ën
, (
JSV®ueCÚ¡
 *)
b
);

36220 
	`ä“_¬g_li¡
(
ùx
, 
b
, 
Ën
);

36221  
»t
;

36222 
	}
}

36224 
JSV®ue
 
	$js_funùiÚ_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36225 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36227 ià(
¬gc
 <= 0) {

36228  
	`JS_C®l
(
ùx
, 
this_v®
, 
JS_UNDEFINED
, 0, 
NULL
);

36230  
	`JS_C®l
(
ùx
, 
this_v®
, 
¬gv
[0], 
¬gc
 - 1,‡rgv + 1);

36232 
	}
}

36234 
JSV®ue
 
	$js_funùiÚ_bšd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36235 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36237 
JSBoundFunùiÚ
 *
bf
;

36238 
JSV®ue
 
func_obj
, 
Çme1
;

36239 
JSObjeù
 *
p
;

36240 
¬g_couÁ
, 
i
;

36241 
ušt32_t
 
Ën1
;

36243 ià(
	`check_funùiÚ
(
ùx
, 
this_v®
))

36244  
JS_EXCEPTION
;

36246 
func_obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
funùiÚ_´Ùo
,

36247 
JS_CLASS_BOUND_FUNCTION
);

36248 ià(
	`JS_IsExû±iÚ
(
func_obj
))

36249  
JS_EXCEPTION
;

36250 
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

36251 
p
->
is_cÚ¡ruùÜ
 = 
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
this_v®
);

36252 
¬g_couÁ
 = 
	`max_št
(0, 
¬gc
 - 1);

36253 
bf
 = 
	`js_m®loc
(
ùx
, (*bfè+ 
¬g_couÁ
 * (
JSV®ue
));

36254 ià(!
bf
)

36255 
exû±iÚ
;

36256 
bf
->
func_obj
 = 
	`JS_DupV®ue
(
ùx
, 
this_v®
);

36257 
bf
->
this_v®
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

36258 
bf
->
¬gc
 = 
¬g_couÁ
;

36259 
i
 = 0; i < 
¬g_couÁ
; i++) {

36260 
bf
->
¬gv
[
i
] = 
	`JS_DupV®ue
(
ùx
,‡rgv[i + 1]);

36262 
p
->
u
.
bound_funùiÚ
 = 
bf
;

36264 
Çme1
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Çme
);

36265 ià(
	`JS_IsExû±iÚ
(
Çme1
))

36266 
exû±iÚ
;

36267 ià(!
	`JS_IsSŒšg
(
Çme1
)) {

36268 
	`JS_F»eV®ue
(
ùx
, 
Çme1
);

36269 
Çme1
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

36271 
Çme1
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "bound ",‚ame1, "");

36272 ià(
	`JS_IsExû±iÚ
(
Çme1
))

36273 
exû±iÚ
;

36274 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_Çme
, 
Çme1
,

36275 
JS_PROP_CONFIGURABLE
);

36276 ià(
	`js_g‘_Ëngth32
(
ùx
, &
Ën1
, 
this_v®
))

36277 
exû±iÚ
;

36278 ià(
Ën1
 <ğ(
ušt32_t
)
¬g_couÁ
)

36279 
Ën1
 = 0;

36281 
Ën1
 -ğ
¬g_couÁ
;

36282 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
func_obj
, 
JS_ATOM_Ëngth
,

36283 
	`JS_NewUšt32
(
ùx
, 
Ën1
),

36284 
JS_PROP_CONFIGURABLE
);

36285  
func_obj
;

36286 
exû±iÚ
:

36287 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

36288  
JS_EXCEPTION
;

36289 
	}
}

36291 
JSV®ue
 
	$js_funùiÚ_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36292 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36294 
JSObjeù
 *
p
;

36295 
JSFunùiÚKšdEnum
 
func_kšd
 = 
JS_FUNC_NORMAL
;

36297 ià(
	`check_funùiÚ
(
ùx
, 
this_v®
))

36298  
JS_EXCEPTION
;

36300 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

36301 ià(
	`js_şass_has_by‹code
(
p
->
şass_id
)) {

36302 
JSFunùiÚBy‹code
 *
b
 = 
p
->
u
.
func
.
funùiÚ_by‹code
;

36303 ià(
b
->
has_debug
 && b->
debug
.
sourû
) {

36304  
	`JS_NewSŒšgL’
(
ùx
, 
b
->
debug
.
sourû
, b->debug.
sourû_Ën
);

36306 
func_kšd
 = 
b
->func_kind;

36309 
JSV®ue
 
Çme
;

36310 cÚ¡ *
´ef
, *
suff
;

36312 ià(
p
->
is_şass
) {

36313 
´ef
 = "class ";

36314 
suff
 = " {\n [native code]\n}";

36316 
func_kšd
) {

36318 
JS_FUNC_NORMAL
:

36319 
´ef
 = "function ";

36321 
JS_FUNC_GENERATOR
:

36322 
´ef
 = "function *";

36324 
JS_FUNC_ASYNC
:

36325 
´ef
 = "async function ";

36327 
JS_FUNC_ASYNC_GENERATOR
:

36328 
´ef
 = "async function *";

36331 
suff
 = "() {\n [native code]\n}";

36333 
Çme
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Çme
);

36334 ià(
	`JS_IsUndefšed
(
Çme
))

36335 
Çme
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

36336  
	`JS_CÚÿtSŒšg3
(
ùx
, 
´ef
, 
Çme
, 
suff
);

36338 
	}
}

36340 
JSV®ue
 
	$js_funùiÚ_hasIn¡ªû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36341 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36343 
»t
;

36344 
»t
 = 
	`JS_Ordš¬yIsIn¡ªûOf
(
ùx
, 
¬gv
[0], 
this_v®
);

36345 ià(
»t
 < 0)

36346  
JS_EXCEPTION
;

36348  
	`JS_NewBoŞ
(
ùx
, 
»t
);

36349 
	}
}

36351 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_funùiÚ_´Ùo_funcs
[] = {

36352 
JS_CFUNC_DEF
("ÿÎ", 1, 
js_funùiÚ_ÿÎ
 ),

36353 
JS_CFUNC_MAGIC_DEF
("­¶y", 2, 
js_funùiÚ_­¶y
, 0 ),

36354 
JS_CFUNC_DEF
("bšd", 1, 
js_funùiÚ_bšd
 ),

36355 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_funùiÚ_toSŒšg
 ),

36356 
JS_CFUNC_DEF
("[SymbŞ.hasIn¡ªû]", 1, 
js_funùiÚ_hasIn¡ªû
 ),

36357 
JS_CGETSET_DEF
("feName", 
js_funùiÚ_´Ùo_feName
, 
NULL
 ),

36358 
JS_CGETSET_DEF
("lšeNumb”", 
js_funùiÚ_´Ùo_lšeNumb”
, 
NULL
 ),

36363 
JSV®ue
 
	$™”©Ü_to_¬¿y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
™ems
)

36365 
JSV®ue
 
™”
, 
Ãxt_m‘hod
 = 
JS_UNDEFINED
;

36366 
JSV®ue
 
v
, 
r
 = 
JS_UNDEFINED
;

36367 
sšt64_t
 
k
;

36368 
BOOL
 
dÚe
;

36370 
™”
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
™ems
, 
FALSE
);

36371 ià(
	`JS_IsExû±iÚ
(
™”
))

36372 
exû±iÚ
;

36373 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”
, 
JS_ATOM_Ãxt
);

36374 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

36375 
exû±iÚ
;

36376 
r
 = 
	`JS_NewA¼ay
(
ùx
);

36377 ià(
	`JS_IsExû±iÚ
(
r
))

36378 
exû±iÚ
;

36379 
k
 = 0;; k++) {

36380 
v
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
™”
, 
Ãxt_m‘hod
, 0, 
NULL
, &
dÚe
);

36381 ià(
	`JS_IsExû±iÚ
(
v
))

36382 
exû±iÚ_şo£
;

36383 ià(
dÚe
)

36385 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
r
, 
k
, 
v
,

36386 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

36387 
exû±iÚ_şo£
;

36389 
dÚe
:

36390 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

36391 
	`JS_F»eV®ue
(
ùx
, 
™”
);

36392  
r
;

36393 
exû±iÚ_şo£
:

36394 
	`JS_I‹¿tÜClo£
(
ùx
, 
™”
, 
TRUE
);

36395 
exû±iÚ
:

36396 
	`JS_F»eV®ue
(
ùx
, 
r
);

36397 
r
 = 
JS_EXCEPTION
;

36398 
dÚe
;

36399 
	}
}

36401 
JSV®ue
 
	$js_”rÜ_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

36402 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

36404 
JSV®ue
 
obj
, 
msg
, 
´Ùo
;

36405 
JSV®ueCÚ¡
 
mes§ge
;

36407 ià(
	`JS_IsUndefšed
(
Ãw_rg‘
))

36408 
Ãw_rg‘
 = 
	`JS_G‘AùiveFunùiÚ
(
ùx
);

36409 
´Ùo
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
Ãw_rg‘
, 
JS_ATOM_´ÙÙy³
);

36410 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

36411  
´Ùo
;

36412 ià(!
	`JS_IsObjeù
(
´Ùo
)) {

36413 
JSCÚ‹xt
 *
»®m
;

36414 
JSV®ueCÚ¡
 
´Ùo1
;

36416 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

36417 
»®m
 = 
	`JS_G‘FunùiÚR—lm
(
ùx
, 
Ãw_rg‘
);

36418 ià(!
»®m
)

36419  
JS_EXCEPTION
;

36420 ià(
magic
 < 0) {

36421 
´Ùo1
 = 
»®m
->
şass_´Ùo
[
JS_CLASS_ERROR
];

36423 
´Ùo1
 = 
»®m
->
Çtive_”rÜ_´Ùo
[
magic
];

36425 
´Ùo
 = 
	`JS_DupV®ue
(
ùx
, 
´Ùo1
);

36427 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
´Ùo
, 
JS_CLASS_ERROR
);

36428 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

36429 ià(
	`JS_IsExû±iÚ
(
obj
))

36430  
obj
;

36431 ià(
magic
 =ğ
JS_AGGREGATE_ERROR
) {

36432 
JSObjeù
 *
p
;

36433 
JSV®ue
 
”rÜ_li¡
 = 
	`™”©Ü_to_¬¿y
(
ùx
, 
¬gv
[0]);

36434 ià(
	`JS_IsExû±iÚ
(
”rÜ_li¡
))

36435 
exû±iÚ
;

36436 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

36437 
p
->
u
.
objeù_d©a
 = 
”rÜ_li¡
;

36438 
mes§ge
 = 
¬gv
[1];

36440 
mes§ge
 = 
¬gv
[0];

36443 ià(!
	`JS_IsUndefšed
(
mes§ge
)) {

36444 
msg
 = 
	`JS_ToSŒšg
(
ùx
, 
mes§ge
);

36445 ià(
	`uÆik–y
(
	`JS_IsExû±iÚ
(
msg
))) {

36446 
exû±iÚ
:

36447 
	`JS_F»eV®ue
(
ùx
, 
obj
);

36448  
JS_EXCEPTION
;

36450 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_mes§ge
, 
msg
,

36451 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

36454 
	`bud_backŒaû
(
ùx
, 
obj
, 
NULL
, 0, 
JS_BACKTRACE_FLAG_SKIP_FIRST_LEVEL
);

36455  
obj
;

36456 
	}
}

36458 
JSV®ue
 
	$js_”rÜ_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36459 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36461 
JSV®ue
 
Çme
, 
msg
;

36463 ià(!
	`JS_IsObjeù
(
this_v®
))

36464  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

36465 
Çme
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Çme
);

36466 ià(
	`JS_IsUndefšed
(
Çme
))

36467 
Çme
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_E¼Ü
);

36469 
Çme
 = 
	`JS_ToSŒšgF»e
(
ùx
,‚ame);

36470 ià(
	`JS_IsExû±iÚ
(
Çme
))

36471  
JS_EXCEPTION
;

36473 
msg
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_mes§ge
);

36474 ià(
	`JS_IsUndefšed
(
msg
))

36475 
msg
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

36477 
msg
 = 
	`JS_ToSŒšgF»e
(
ùx
, msg);

36478 ià(
	`JS_IsExû±iÚ
(
msg
)) {

36479 
	`JS_F»eV®ue
(
ùx
, 
Çme
);

36480  
JS_EXCEPTION
;

36482 ià(!
	`JS_IsEm±ySŒšg
(
Çme
è&& !JS_IsEm±ySŒšg(
msg
))

36483 
Çme
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "",‚ame, ": ");

36484  
	`JS_CÚÿtSŒšg
(
ùx
, 
Çme
, 
msg
);

36485 
	}
}

36487 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_”rÜ_´Ùo_funcs
[] = {

36488 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_”rÜ_toSŒšg
 ),

36489 
JS_PROP_STRING_DEF
("Çme", "E¼Ü", 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 ),

36490 
JS_PROP_STRING_DEF
("mes§ge", "", 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 ),

36496 
JSV®ue
 
	$js_agg»g©e_”rÜ_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

36497 
JSV®ueCÚ¡
 
”rÜs
)

36499 
JSV®ue
 
obj
;

36500 
JSObjeù
 *
p
;

36502 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
,

36503 
ùx
->
Çtive_”rÜ_´Ùo
[
JS_AGGREGATE_ERROR
],

36504 
JS_CLASS_ERROR
);

36505 ià(
	`JS_IsExû±iÚ
(
obj
))

36506  
obj
;

36507 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

36508 
p
->
u
.
objeù_d©a
 = 
	`JS_DupV®ue
(
ùx
, 
”rÜs
);

36509  
obj
;

36510 
	}
}

36512 
JSV®ue
 
	$js_agg»g©e_”rÜ_”rÜs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

36514 
JSObjeù
 *
p
;

36515 
JSV®ue
 
r
, *
¬r
;

36516 
ušt32_t
 
Ën
, 
i
;

36518 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è!ğ
JS_TAG_OBJECT
)

36519 
šv®id_ty³
;

36520 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

36521 ià(
p
->
şass_id
 !ğ
JS_CLASS_ERROR
)

36522 
šv®id_ty³
;

36523 ià(!
	`js_g‘_ç¡_¬¿y
(
ùx
, 
p
->
u
.
objeù_d©a
, &
¬r
, &
Ën
)) {

36524 
šv®id_ty³
:

36525  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡n AggregateError");

36527 
r
 = 
	`JS_NewA¼ay
(
ùx
);

36528 ià(
	`JS_IsExû±iÚ
(
r
))

36529 
exû±iÚ
;

36530 
i
 = 0; i < 
Ën
; i++) {

36531 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
r
, 
i
, 
	`JS_DupV®ue
(ùx, 
¬r
[i]),

36532 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

36533 
exû±iÚ
;

36535  
r
;

36536 
exû±iÚ
:

36537 
	`JS_F»eV®ue
(
ùx
, 
r
);

36538  
JS_EXCEPTION
;

36539 
	}
}

36541 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_agg»g©e_”rÜ_´Ùo_funcs
[] = {

36542 
JS_CGETSET_DEF
("”rÜs", 
js_agg»g©e_”rÜ_”rÜs
, 
NULL
),

36547 
	$JS_CİySubA¼ay
(
JSCÚ‹xt
 *
ùx
,

36548 
JSV®ueCÚ¡
 
obj
, 
št64_t
 
to_pos
,

36549 
sšt64_t
 
äom_pos
, 
št64_t
 
couÁ
, 
dœ
)

36551 
sšt64_t
 
i
, 
äom
, 
to
;

36552 
JSV®ue
 
v®
;

36553 
äomP»£Á
;

36556 
i
 = 0; i < 
couÁ
; i++) {

36557 ià(
dœ
 < 0) {

36558 
äom
 = 
äom_pos
 + 
couÁ
 - 
i
 - 1;

36559 
to
 = 
to_pos
 + 
couÁ
 - 
i
 - 1;

36561 
äom
 = 
äom_pos
 + 
i
;

36562 
to
 = 
to_pos
 + 
i
;

36564 
äomP»£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
äom
, &
v®
);

36565 ià(
äomP»£Á
 < 0)

36566 
exû±iÚ
;

36568 ià(
äomP»£Á
) {

36569 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
to
, 
v®
) < 0)

36570 
exû±iÚ
;

36572 ià(
	`JS_D–‘ePrİ”tyIÁ64
(
ùx
, 
obj
, 
to
, 
JS_PROP_THROW
) < 0)

36573 
exû±iÚ
;

36578 
exû±iÚ
:

36580 
	}
}

36582 
JSV®ue
 
	$js_¬¿y_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

36583 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36585 
JSV®ue
 
obj
;

36586 
i
;

36588 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_ARRAY
);

36589 ià(
	`JS_IsExû±iÚ
(
obj
))

36590  
obj
;

36591 ià(
¬gc
 =ğ1 && 
	`JS_IsNumb”
(
¬gv
[0])) {

36592 
ušt32_t
 
Ën
;

36593 ià(
	`JS_ToA¼ayL’gthF»e
(
ùx
, &
Ën
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0])))

36594 
ç
;

36595 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewUšt32
(ùx, 
Ën
)) < 0)

36596 
ç
;

36598 
i
 = 0; i < 
¬gc
; i++) {

36599 ià(
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
obj
, 
i
, 
	`JS_DupV®ue
(ùx, 
¬gv
[i])) < 0)

36600 
ç
;

36603  
obj
;

36604 
ç
:

36605 
	`JS_F»eV®ue
(
ùx
, 
obj
);

36606  
JS_EXCEPTION
;

36607 
	}
}

36609 
JSV®ue
 
	$js_¬¿y_äom
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36610 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36613 
JSV®ueCÚ¡
 
™ems
 = 
¬gv
[0], 
m­â
, 
this_¬g
;

36614 
JSV®ueCÚ¡
 
¬gs
[2];

36615 
JSV®ue
 
¡ack
[2];

36616 
JSV®ue
 
™”
, 
r
, 
v
, 
v2
, 
¬¿yLike
;

36617 
sšt64_t
 
k
, 
Ën
;

36618 
dÚe
, 
m­pšg
;

36620 
m­pšg
 = 
FALSE
;

36621 
m­â
 = 
JS_UNDEFINED
;

36622 
this_¬g
 = 
JS_UNDEFINED
;

36623 
r
 = 
JS_UNDEFINED
;

36624 
¬¿yLike
 = 
JS_UNDEFINED
;

36625 
¡ack
[0] = 
JS_UNDEFINED
;

36626 
¡ack
[1] = 
JS_UNDEFINED
;

36628 ià(
¬gc
 > 1) {

36629 
m­â
 = 
¬gv
[1];

36630 ià(!
	`JS_IsUndefšed
(
m­â
)) {

36631 ià(
	`check_funùiÚ
(
ùx
, 
m­â
))

36632 
exû±iÚ
;

36633 
m­pšg
 = 1;

36634 ià(
¬gc
 > 2)

36635 
this_¬g
 = 
¬gv
[2];

36638 
™”
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™ems
, 
JS_ATOM_SymbŞ_™”©Ü
);

36639 ià(
	`JS_IsExû±iÚ
(
™”
))

36640 
exû±iÚ
;

36641 ià(!
	`JS_IsUndefšed
(
™”
)) {

36642 
	`JS_F»eV®ue
(
ùx
, 
™”
);

36643 ià(
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
this_v®
))

36644 
r
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
this_v®
, 0, 
NULL
);

36646 
r
 = 
	`JS_NewA¼ay
(
ùx
);

36647 ià(
	`JS_IsExû±iÚ
(
r
))

36648 
exû±iÚ
;

36649 
¡ack
[0] = 
	`JS_DupV®ue
(
ùx
, 
™ems
);

36650 ià(
	`js_fÜ_of_¡¬t
(
ùx
, &
¡ack
[1], 
FALSE
))

36651 
exû±iÚ
;

36652 
k
 = 0;; k++) {

36653 
v
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
¡ack
[0], sck[1], 0, 
NULL
, &
dÚe
);

36654 ià(
	`JS_IsExû±iÚ
(
v
))

36655 
exû±iÚ_şo£
;

36656 ià(
dÚe
)

36658 ià(
m­pšg
) {

36659 
¬gs
[0] = 
v
;

36660 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
k
);

36661 
v2
 = 
	`JS_C®l
(
ùx
, 
m­â
, 
this_¬g
, 2, 
¬gs
);

36662 
	`JS_F»eV®ue
(
ùx
, 
v
);

36663 
v
 = 
v2
;

36664 ià(
	`JS_IsExû±iÚ
(
v
))

36665 
exû±iÚ_şo£
;

36667 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
r
, 
k
, 
v
,

36668 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

36669 
exû±iÚ_şo£
;

36672 
¬¿yLike
 = 
	`JS_ToObjeù
(
ùx
, 
™ems
);

36673 ià(
	`JS_IsExû±iÚ
(
¬¿yLike
))

36674 
exû±iÚ
;

36675 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
¬¿yLike
) < 0)

36676 
exû±iÚ
;

36677 
v
 = 
	`JS_NewIÁ64
(
ùx
, 
Ën
);

36678 
¬gs
[0] = 
v
;

36679 ià(
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
this_v®
)) {

36680 
r
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
this_v®
, 1, 
¬gs
);

36682 
r
 = 
	`js_¬¿y_cÚ¡ruùÜ
(
ùx
, 
JS_UNDEFINED
, 1, 
¬gs
);

36684 
	`JS_F»eV®ue
(
ùx
, 
v
);

36685 ià(
	`JS_IsExû±iÚ
(
r
))

36686 
exû±iÚ
;

36687 
k
 = 0; k < 
Ën
; k++) {

36688 
v
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
¬¿yLike
, 
k
);

36689 ià(
	`JS_IsExû±iÚ
(
v
))

36690 
exû±iÚ
;

36691 ià(
m­pšg
) {

36692 
¬gs
[0] = 
v
;

36693 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
k
);

36694 
v2
 = 
	`JS_C®l
(
ùx
, 
m­â
, 
this_¬g
, 2, 
¬gs
);

36695 
	`JS_F»eV®ue
(
ùx
, 
v
);

36696 
v
 = 
v2
;

36697 ià(
	`JS_IsExû±iÚ
(
v
))

36698 
exû±iÚ
;

36700 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
r
, 
k
, 
v
,

36701 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

36702 
exû±iÚ
;

36705 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
r
, 
JS_ATOM_Ëngth
, 
	`JS_NewUšt32
(ùx, 
k
)) < 0)

36706 
exû±iÚ
;

36707 
dÚe
;

36709 
exû±iÚ_şo£
:

36710 ià(!
	`JS_IsUndefšed
(
¡ack
[0]))

36711 
	`JS_I‹¿tÜClo£
(
ùx
, 
¡ack
[0], 
TRUE
);

36712 
exû±iÚ
:

36713 
	`JS_F»eV®ue
(
ùx
, 
r
);

36714 
r
 = 
JS_EXCEPTION
;

36715 
dÚe
:

36716 
	`JS_F»eV®ue
(
ùx
, 
¬¿yLike
);

36717 
	`JS_F»eV®ue
(
ùx
, 
¡ack
[0]);

36718 
	`JS_F»eV®ue
(
ùx
, 
¡ack
[1]);

36719  
r
;

36720 
	}
}

36722 
JSV®ue
 
	$js_¬¿y_of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36723 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36725 
JSV®ue
 
obj
, 
¬gs
[1];

36726 
i
;

36728 ià(
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
this_v®
)) {

36729 
¬gs
[0] = 
	`JS_NewIÁ32
(
ùx
, 
¬gc
);

36730 
obj
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
this_v®
, 1, (
JSV®ueCÚ¡
 *)
¬gs
);

36732 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

36734 ià(
	`JS_IsExû±iÚ
(
obj
))

36735  
JS_EXCEPTION
;

36736 
i
 = 0; i < 
¬gc
; i++) {

36737 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
obj
, 
i
, 
	`JS_DupV®ue
(ùx, 
¬gv
[i]),

36738 
JS_PROP_THROW
) < 0) {

36739 
ç
;

36742 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewUšt32
(ùx, 
¬gc
)) < 0) {

36743 
ç
:

36744 
	`JS_F»eV®ue
(
ùx
, 
obj
);

36745  
JS_EXCEPTION
;

36747  
obj
;

36748 
	}
}

36750 
JSV®ue
 
	$js_¬¿y_isA¼ay
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36751 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36753 
»t
;

36754 
»t
 = 
	`JS_IsA¼ay
(
ùx
, 
¬gv
[0]);

36755 ià(
»t
 < 0)

36756  
JS_EXCEPTION
;

36758  
	`JS_NewBoŞ
(
ùx
, 
»t
);

36759 
	}
}

36761 
JSV®ue
 
	$js_g‘_this
(
JSCÚ‹xt
 *
ùx
,

36762 
JSV®ueCÚ¡
 
this_v®
)

36764  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

36765 
	}
}

36767 
JSV®ue
 
	$JS_A¼ayS³c›sC»©e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

36768 
JSV®ueCÚ¡
 
Ën_v®
)

36770 
JSV®ue
 
ùÜ
, 
»t
, 
¥ec›s
;

36771 
»s
;

36772 
JSCÚ‹xt
 *
»®m
;

36774 
»s
 = 
	`JS_IsA¼ay
(
ùx
, 
obj
);

36775 ià(
»s
 < 0)

36776  
JS_EXCEPTION
;

36777 ià(!
»s
)

36778  
	`js_¬¿y_cÚ¡ruùÜ
(
ùx
, 
JS_UNDEFINED
, 1, &
Ën_v®
);

36779 
ùÜ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_cÚ¡ruùÜ
);

36780 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

36781  
ùÜ
;

36782 ià(
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
ùÜ
)) {

36784 
»®m
 = 
	`JS_G‘FunùiÚR—lm
(
ùx
, 
ùÜ
);

36785 ià(!
»®m
) {

36786 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

36787  
JS_EXCEPTION
;

36789 ià(
»®m
 !ğ
ùx
 &&

36790 
	`js_§me_v®ue
(
ùx
, 
ùÜ
, 
»®m
->
¬¿y_ùÜ
)) {

36791 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

36792 
ùÜ
 = 
JS_UNDEFINED
;

36795 ià(
	`JS_IsObjeù
(
ùÜ
)) {

36796 
¥ec›s
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
ùÜ
, 
JS_ATOM_SymbŞ_¥ec›s
);

36797 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

36798 ià(
	`JS_IsExû±iÚ
(
¥ec›s
))

36799  
¥ec›s
;

36800 
ùÜ
 = 
¥ec›s
;

36801 ià(
	`JS_IsNuÎ
(
ùÜ
))

36802 
ùÜ
 = 
JS_UNDEFINED
;

36804 ià(
	`JS_IsUndefšed
(
ùÜ
)) {

36805  
	`js_¬¿y_cÚ¡ruùÜ
(
ùx
, 
JS_UNDEFINED
, 1, &
Ën_v®
);

36807 
»t
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
ùÜ
, 1, &
Ën_v®
);

36808 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

36809  
»t
;

36811 
	}
}

36813 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¬¿y_funcs
[] = {

36814 
JS_CFUNC_DEF
("isA¼ay", 1, 
js_¬¿y_isA¼ay
 ),

36815 
JS_CFUNC_DEF
("äom", 1, 
js_¬¿y_äom
 ),

36816 
JS_CFUNC_DEF
("of", 0, 
js_¬¿y_of
 ),

36817 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
 ),

36820 
	$JS_isCÚÿtS´—dabË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

36822 
JSV®ue
 
v®
;

36824 ià(!
	`JS_IsObjeù
(
obj
))

36825  
FALSE
;

36826 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_isCÚÿtS´—dabË
);

36827 ià(
	`JS_IsExû±iÚ
(
v®
))

36829 ià(!
	`JS_IsUndefšed
(
v®
))

36830  
	`JS_ToBoŞF»e
(
ùx
, 
v®
);

36831  
	`JS_IsA¼ay
(
ùx
, 
obj
);

36832 
	}
}

36834 
JSV®ue
 
	$js_¬¿y_cÚÿt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36835 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

36837 
JSV®ue
 
obj
, 
¬r
, 
v®
;

36838 
JSV®ueCÚ¡
 
e
;

36839 
sšt64_t
 
Ën
, 
k
, 
n
;

36840 
i
, 
»s
;

36842 
¬r
 = 
JS_UNDEFINED
;

36843 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

36844 ià(
	`JS_IsExû±iÚ
(
obj
))

36845 
exû±iÚ
;

36847 
¬r
 = 
	`JS_A¼ayS³c›sC»©e
(
ùx
, 
obj
, 
	`JS_NewIÁ32
(ctx, 0));

36848 ià(
	`JS_IsExû±iÚ
(
¬r
))

36849 
exû±iÚ
;

36850 
n
 = 0;

36851 
i
 = -1; i < 
¬gc
; i++) {

36852 ià(
i
 < 0)

36853 
e
 = 
obj
;

36855 
e
 = 
¬gv
[
i
];

36857 
»s
 = 
	`JS_isCÚÿtS´—dabË
(
ùx
, 
e
);

36858 ià(
»s
 < 0)

36859 
exû±iÚ
;

36860 ià(
»s
) {

36861 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
e
))

36862 
exû±iÚ
;

36863 ià(
n
 + 
Ën
 > 
MAX_SAFE_INTEGER
) {

36864 
	`JS_ThrowTy³E¼Ü
(
ùx
, "Array†oo†ong");

36865 
exû±iÚ
;

36867 
k
 = 0; k < 
Ën
; k++, 
n
++) {

36868 
»s
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
e
, 
k
, &
v®
);

36869 ià(
»s
 < 0)

36870 
exû±iÚ
;

36871 ià(
»s
) {

36872 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
¬r
, 
n
, 
v®
,

36873 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

36874 
exû±iÚ
;

36878 ià(
n
 >ğ
MAX_SAFE_INTEGER
) {

36879 
	`JS_ThrowTy³E¼Ü
(
ùx
, "Array†oo†ong");

36880 
exû±iÚ
;

36882 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
¬r
, 
n
, 
	`JS_DupV®ue
(ùx, 
e
),

36883 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

36884 
exû±iÚ
;

36885 
n
++;

36888 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
¬r
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ64
(ùx, 
n
)) < 0)

36889 
exû±iÚ
;

36891 
	`JS_F»eV®ue
(
ùx
, 
obj
);

36892  
¬r
;

36894 
exû±iÚ
:

36895 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

36896 
	`JS_F»eV®ue
(
ùx
, 
obj
);

36897  
JS_EXCEPTION
;

36898 
	}
}

36900 
	#¥ecŸl_ev”y
 0

	)

36901 
	#¥ecŸl_some
 1

	)

36902 
	#¥ecŸl_fÜEach
 2

	)

36903 
	#¥ecŸl_m­
 3

	)

36904 
	#¥ecŸl_f‹r
 4

	)

36905 
	#¥ecŸl_TA
 8

	)

36907 
js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
);

36909 
JSV®ue
 
js_ty³d_¬¿y___¥ec›sC»©e
(
JSCÚ‹xt
 *
ùx
,

36910 
JSV®ueCÚ¡
 
this_v®
,

36911 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

36913 
JSV®ue
 
	$js_¬¿y_ev”y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

36914 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
¥ecŸl
)

36916 
JSV®ue
 
obj
, 
v®
, 
šdex_v®
, 
»s
, 
»t
;

36917 
JSV®ueCÚ¡
 
¬gs
[3];

36918 
JSV®ueCÚ¡
 
func
, 
this_¬g
;

36919 
sšt64_t
 
Ën
, 
k
, 
n
;

36920 
´e£Á
;

36922 
»t
 = 
JS_UNDEFINED
;

36923 
v®
 = 
JS_UNDEFINED
;

36924 ià(
¥ecŸl
 & 
¥ecŸl_TA
) {

36925 
obj
 = 
	`JS_DupV®ue
(
ùx
, 
this_v®
);

36926 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
obj
);

36927 ià(
Ën
 < 0)

36928 
exû±iÚ
;

36930 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

36931 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

36932 
exû±iÚ
;

36934 
func
 = 
¬gv
[0];

36935 
this_¬g
 = 
JS_UNDEFINED
;

36936 ià(
¬gc
 > 1)

36937 
this_¬g
 = 
¬gv
[1];

36939 ià(
	`check_funùiÚ
(
ùx
, 
func
))

36940 
exû±iÚ
;

36942 
¥ecŸl
) {

36943 
¥ecŸl_ev”y
:

36944 
¥ecŸl_ev”y
 | 
¥ecŸl_TA
:

36945 
»t
 = 
JS_TRUE
;

36947 
¥ecŸl_some
:

36948 
¥ecŸl_some
 | 
¥ecŸl_TA
:

36949 
»t
 = 
JS_FALSE
;

36951 
¥ecŸl_m­
:

36953 
»t
 = 
	`JS_A¼ayS³c›sC»©e
(
ùx
, 
obj
, 
	`JS_NewIÁ64
(ùx, 
Ën
));

36954 ià(
	`JS_IsExû±iÚ
(
»t
))

36955 
exû±iÚ
;

36957 
¥ecŸl_f‹r
:

36958 
»t
 = 
	`JS_A¼ayS³c›sC»©e
(
ùx
, 
obj
, 
	`JS_NewIÁ32
(ctx, 0));

36959 ià(
	`JS_IsExû±iÚ
(
»t
))

36960 
exû±iÚ
;

36962 
¥ecŸl_m­
 | 
¥ecŸl_TA
:

36963 
¬gs
[0] = 
obj
;

36964 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
Ën
);

36965 
»t
 = 
	`js_ty³d_¬¿y___¥ec›sC»©e
(
ùx
, 
JS_UNDEFINED
, 2, 
¬gs
);

36966 ià(
	`JS_IsExû±iÚ
(
»t
))

36967 
exû±iÚ
;

36969 
¥ecŸl_f‹r
 | 
¥ecŸl_TA
:

36970 
»t
 = 
	`JS_NewA¼ay
(
ùx
);

36971 ià(
	`JS_IsExû±iÚ
(
»t
))

36972 
exû±iÚ
;

36975 
n
 = 0;

36977 
k
 = 0; k < 
Ën
; k++) {

36978 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
k
, &
v®
);

36979 ià(
´e£Á
 < 0)

36980 
exû±iÚ
;

36981 ià(
´e£Á
) {

36982 
šdex_v®
 = 
	`JS_NewIÁ64
(
ùx
, 
k
);

36983 ià(
	`JS_IsExû±iÚ
(
šdex_v®
))

36984 
exû±iÚ
;

36985 
¬gs
[0] = 
v®
;

36986 
¬gs
[1] = 
šdex_v®
;

36987 
¬gs
[2] = 
obj
;

36988 
»s
 = 
	`JS_C®l
(
ùx
, 
func
, 
this_¬g
, 3, 
¬gs
);

36989 
	`JS_F»eV®ue
(
ùx
, 
šdex_v®
);

36990 ià(
	`JS_IsExû±iÚ
(
»s
))

36991 
exû±iÚ
;

36992 
¥ecŸl
) {

36993 
¥ecŸl_ev”y
:

36994 
¥ecŸl_ev”y
 | 
¥ecŸl_TA
:

36995 ià(!
	`JS_ToBoŞF»e
(
ùx
, 
»s
)) {

36996 
»t
 = 
JS_FALSE
;

36997 
dÚe
;

37000 
¥ecŸl_some
:

37001 
¥ecŸl_some
 | 
¥ecŸl_TA
:

37002 ià(
	`JS_ToBoŞF»e
(
ùx
, 
»s
)) {

37003 
»t
 = 
JS_TRUE
;

37004 
dÚe
;

37007 
¥ecŸl_m­
:

37008 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
»t
, 
k
, 
»s
,

37009 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

37010 
exû±iÚ
;

37012 
¥ecŸl_m­
 | 
¥ecŸl_TA
:

37013 ià(
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
»t
, 
	`JS_NewIÁ32
(ùx, 
k
), 
»s
, 
JS_PROP_THROW
) < 0)

37014 
exû±iÚ
;

37016 
¥ecŸl_f‹r
:

37017 
¥ecŸl_f‹r
 | 
¥ecŸl_TA
:

37018 ià(
	`JS_ToBoŞF»e
(
ùx
, 
»s
)) {

37019 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
»t
, 
n
++, 
	`JS_DupV®ue
(ùx, 
v®
),

37020 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

37021 
exû±iÚ
;

37025 
	`JS_F»eV®ue
(
ùx
, 
»s
);

37028 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37029 
v®
 = 
JS_UNDEFINED
;

37032 
dÚe
:

37033 ià(
¥ecŸl
 =ğ(
¥ecŸl_f‹r
 | 
¥ecŸl_TA
)) {

37034 
JSV®ue
 
¬r
;

37035 
¬gs
[0] = 
obj
;

37036 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
n
);

37037 
¬r
 = 
	`js_ty³d_¬¿y___¥ec›sC»©e
(
ùx
, 
JS_UNDEFINED
, 2, 
¬gs
);

37038 ià(
	`JS_IsExû±iÚ
(
¬r
))

37039 
exû±iÚ
;

37040 
¬gs
[0] = 
»t
;

37041 
»s
 = 
	`JS_Invoke
(
ùx
, 
¬r
, 
JS_ATOM_£t
, 1, 
¬gs
);

37042 ià(
	`check_exû±iÚ_ä“
(
ùx
, 
»s
))

37043 
exû±iÚ
;

37044 
	`JS_F»eV®ue
(
ùx
, 
»t
);

37045 
»t
 = 
¬r
;

37047 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37048 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37049  
»t
;

37051 
exû±iÚ
:

37052 
	`JS_F»eV®ue
(
ùx
, 
»t
);

37053 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37054 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37055  
JS_EXCEPTION
;

37056 
	}
}

37058 
	#¥ecŸl_»duû
 0

	)

37059 
	#¥ecŸl_»duûRight
 1

	)

37061 
JSV®ue
 
	$js_¬¿y_»duû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37062 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
¥ecŸl
)

37064 
JSV®ue
 
obj
, 
v®
, 
šdex_v®
, 
acc
, 
acc1
;

37065 
JSV®ueCÚ¡
 
¬gs
[4];

37066 
JSV®ueCÚ¡
 
func
;

37067 
sšt64_t
 
Ën
, 
k
, 
k1
;

37068 
´e£Á
;

37070 
acc
 = 
JS_UNDEFINED
;

37071 
v®
 = 
JS_UNDEFINED
;

37072 ià(
¥ecŸl
 & 
¥ecŸl_TA
) {

37073 
obj
 = 
	`JS_DupV®ue
(
ùx
, 
this_v®
);

37074 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
obj
);

37075 ià(
Ën
 < 0)

37076 
exû±iÚ
;

37078 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37079 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37080 
exû±iÚ
;

37082 
func
 = 
¬gv
[0];

37084 ià(
	`check_funùiÚ
(
ùx
, 
func
))

37085 
exû±iÚ
;

37087 
k
 = 0;

37088 ià(
¬gc
 > 1) {

37089 
acc
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[1]);

37092 ià(
k
 >ğ
Ën
) {

37093 
	`JS_ThrowTy³E¼Ü
(
ùx
, "empty‡rray");

37094 
exû±iÚ
;

37096 
k1
 = (
¥ecŸl
 & 
¥ecŸl_»duûRight
è? 
Ën
 - 
k
 - 1 : k;

37097 
k
++;

37098 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
k1
, &
acc
);

37099 ià(
´e£Á
 < 0)

37100 
exû±iÚ
;

37101 ià(
´e£Á
)

37105 ; 
k
 < 
Ën
; k++) {

37106 
k1
 = (
¥ecŸl
 & 
¥ecŸl_»duûRight
è? 
Ën
 - 
k
 - 1 : k;

37107 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
k1
, &
v®
);

37108 ià(
´e£Á
 < 0)

37109 
exû±iÚ
;

37110 ià(
´e£Á
) {

37111 
šdex_v®
 = 
	`JS_NewIÁ64
(
ùx
, 
k1
);

37112 ià(
	`JS_IsExû±iÚ
(
šdex_v®
))

37113 
exû±iÚ
;

37114 
¬gs
[0] = 
acc
;

37115 
¬gs
[1] = 
v®
;

37116 
¬gs
[2] = 
šdex_v®
;

37117 
¬gs
[3] = 
obj
;

37118 
acc1
 = 
	`JS_C®l
(
ùx
, 
func
, 
JS_UNDEFINED
, 4, 
¬gs
);

37119 
	`JS_F»eV®ue
(
ùx
, 
šdex_v®
);

37120 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37121 
v®
 = 
JS_UNDEFINED
;

37122 ià(
	`JS_IsExû±iÚ
(
acc1
))

37123 
exû±iÚ
;

37124 
	`JS_F»eV®ue
(
ùx
, 
acc
);

37125 
acc
 = 
acc1
;

37128 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37129  
acc
;

37131 
exû±iÚ
:

37132 
	`JS_F»eV®ue
(
ùx
, 
acc
);

37133 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37134 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37135  
JS_EXCEPTION
;

37136 
	}
}

37138 
JSV®ue
 
	$js_¬¿y_fl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37139 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37141 
JSV®ue
 
obj
;

37142 
sšt64_t
 
Ën
, 
¡¬t
, 
’d
;

37144 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37145 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37146 
exû±iÚ
;

37148 
¡¬t
 = 0;

37149 ià(
¬gc
 > 1 && !
	`JS_IsUndefšed
(
¬gv
[1])) {

37150 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
¡¬t
, 
¬gv
[1], 0, 
Ën
,†en))

37151 
exû±iÚ
;

37154 
’d
 = 
Ën
;

37155 ià(
¬gc
 > 2 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

37156 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
’d
, 
¬gv
[2], 0, 
Ën
,†en))

37157 
exû±iÚ
;

37161 
¡¬t
 < 
’d
) {

37162 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
¡¬t
,

37163 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0])) < 0)

37164 
exû±iÚ
;

37165 
¡¬t
++;

37167  
obj
;

37169 
exû±iÚ
:

37170 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37171  
JS_EXCEPTION
;

37172 
	}
}

37174 
JSV®ue
 
	$js_¬¿y_šşudes
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37175 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37177 
JSV®ue
 
obj
, 
v®
;

37178 
sšt64_t
 
Ën
, 
n
, 
»s
;

37179 
JSV®ue
 *
¬½
;

37180 
ušt32_t
 
couÁ
;

37182 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37183 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37184 
exû±iÚ
;

37186 
»s
 = 
FALSE
;

37187 ià(
Ën
 > 0) {

37188 
n
 = 0;

37189 ià(
¬gc
 > 1) {

37190 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
n
, 
¬gv
[1], 0, 
Ën
,†en))

37191 
exû±iÚ
;

37193 ià(
	`js_g‘_ç¡_¬¿y
(
ùx
, 
obj
, &
¬½
, &
couÁ
)) {

37194 ; 
n
 < 
couÁ
;‚++) {

37195 ià(
	`js_¡riù_eq2
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]),

37196 
	`JS_DupV®ue
(
ùx
, 
¬½
[
n
]),

37197 
JS_EQ_SAME_VALUE_ZERO
)) {

37198 
»s
 = 
TRUE
;

37199 
dÚe
;

37203 ; 
n
 < 
Ën
;‚++) {

37204 
v®
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
n
);

37205 ià(
	`JS_IsExû±iÚ
(
v®
))

37206 
exû±iÚ
;

37207 ià(
	`js_¡riù_eq2
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]), 
v®
,

37208 
JS_EQ_SAME_VALUE_ZERO
)) {

37209 
»s
 = 
TRUE
;

37214 
dÚe
:

37215 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37216  
	`JS_NewBoŞ
(
ùx
, 
»s
);

37218 
exû±iÚ
:

37219 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37220  
JS_EXCEPTION
;

37221 
	}
}

37223 
JSV®ue
 
	$js_¬¿y_šdexOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37224 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37226 
JSV®ue
 
obj
, 
v®
;

37227 
sšt64_t
 
Ën
, 
n
, 
»s
;

37228 
JSV®ue
 *
¬½
;

37229 
ušt32_t
 
couÁ
;

37231 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37232 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37233 
exû±iÚ
;

37235 
»s
 = -1;

37236 ià(
Ën
 > 0) {

37237 
n
 = 0;

37238 ià(
¬gc
 > 1) {

37239 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
n
, 
¬gv
[1], 0, 
Ën
,†en))

37240 
exû±iÚ
;

37242 ià(
	`js_g‘_ç¡_¬¿y
(
ùx
, 
obj
, &
¬½
, &
couÁ
)) {

37243 ; 
n
 < 
couÁ
;‚++) {

37244 ià(
	`js_¡riù_eq2
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]),

37245 
	`JS_DupV®ue
(
ùx
, 
¬½
[
n
]), 
JS_EQ_STRICT
)) {

37246 
»s
 = 
n
;

37247 
dÚe
;

37251 ; 
n
 < 
Ën
;‚++) {

37252 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
n
, &
v®
);

37253 ià(
´e£Á
 < 0)

37254 
exû±iÚ
;

37255 ià(
´e£Á
) {

37256 ià(
	`js_¡riù_eq2
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]), 
v®
, 
JS_EQ_STRICT
)) {

37257 
»s
 = 
n
;

37263 
dÚe
:

37264 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37265  
	`JS_NewIÁ64
(
ùx
, 
»s
);

37267 
exû±iÚ
:

37268 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37269  
JS_EXCEPTION
;

37270 
	}
}

37272 
JSV®ue
 
	$js_¬¿y_Ï¡IndexOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37273 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37275 
JSV®ue
 
obj
, 
v®
;

37276 
sšt64_t
 
Ën
, 
n
, 
»s
;

37277 
´e£Á
;

37279 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37280 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37281 
exû±iÚ
;

37283 
»s
 = -1;

37284 ià(
Ën
 > 0) {

37285 
n
 = 
Ën
 - 1;

37286 ià(
¬gc
 > 1) {

37287 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
n
, 
¬gv
[1], -1, 
Ën
 - 1,†en))

37288 
exû±iÚ
;

37291 ; 
n
 >= 0;‚--) {

37292 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
n
, &
v®
);

37293 ià(
´e£Á
 < 0)

37294 
exû±iÚ
;

37295 ià(
´e£Á
) {

37296 ià(
	`js_¡riù_eq2
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]), 
v®
, 
JS_EQ_STRICT
)) {

37297 
»s
 = 
n
;

37303 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37304  
	`JS_NewIÁ64
(
ùx
, 
»s
);

37306 
exû±iÚ
:

37307 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37308  
JS_EXCEPTION
;

37309 
	}
}

37311 
JSV®ue
 
	$js_¬¿y_fšd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37312 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
fšdIndex
)

37314 
JSV®ueCÚ¡
 
func
, 
this_¬g
;

37315 
JSV®ueCÚ¡
 
¬gs
[3];

37316 
JSV®ue
 
obj
, 
v®
, 
šdex_v®
, 
»s
;

37317 
sšt64_t
 
Ën
, 
k
;

37319 
šdex_v®
 = 
JS_UNDEFINED
;

37320 
v®
 = 
JS_UNDEFINED
;

37321 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37322 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37323 
exû±iÚ
;

37325 
func
 = 
¬gv
[0];

37326 ià(
	`check_funùiÚ
(
ùx
, 
func
))

37327 
exû±iÚ
;

37329 
this_¬g
 = 
JS_UNDEFINED
;

37330 ià(
¬gc
 > 1)

37331 
this_¬g
 = 
¬gv
[1];

37333 
k
 = 0; k < 
Ën
; k++) {

37334 
šdex_v®
 = 
	`JS_NewIÁ64
(
ùx
, 
k
);

37335 ià(
	`JS_IsExû±iÚ
(
šdex_v®
))

37336 
exû±iÚ
;

37337 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
obj
, 
šdex_v®
);

37338 ià(
	`JS_IsExû±iÚ
(
v®
))

37339 
exû±iÚ
;

37340 
¬gs
[0] = 
v®
;

37341 
¬gs
[1] = 
šdex_v®
;

37342 
¬gs
[2] = 
this_v®
;

37343 
»s
 = 
	`JS_C®l
(
ùx
, 
func
, 
this_¬g
, 3, 
¬gs
);

37344 ià(
	`JS_IsExû±iÚ
(
»s
))

37345 
exû±iÚ
;

37346 ià(
	`JS_ToBoŞF»e
(
ùx
, 
»s
)) {

37347 ià(
fšdIndex
) {

37348 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37349 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37350  
šdex_v®
;

37352 
	`JS_F»eV®ue
(
ùx
, 
šdex_v®
);

37353 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37354  
v®
;

37357 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37358 
	`JS_F»eV®ue
(
ùx
, 
šdex_v®
);

37360 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37361 ià(
fšdIndex
)

37362  
	`JS_NewIÁ32
(
ùx
, -1);

37364  
JS_UNDEFINED
;

37366 
exû±iÚ
:

37367 
	`JS_F»eV®ue
(
ùx
, 
šdex_v®
);

37368 
	`JS_F»eV®ue
(
ùx
, 
v®
);

37369 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37370  
JS_EXCEPTION
;

37371 
	}
}

37373 
JSV®ue
 
	$js_¬¿y_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37374 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37376 
JSV®ue
 
obj
, 
m‘hod
, 
»t
;

37378 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37379 ià(
	`JS_IsExû±iÚ
(
obj
))

37380  
JS_EXCEPTION
;

37381 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_još
);

37382 ià(
	`JS_IsExû±iÚ
(
m‘hod
)) {

37383 
»t
 = 
JS_EXCEPTION
;

37385 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
m‘hod
)) {

37387 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

37388 
»t
 = 
	`js_objeù_toSŒšg
(
ùx
, 
obj
, 0, 
NULL
);

37390 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
obj
, 0, 
NULL
);

37392 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37393  
»t
;

37394 
	}
}

37396 
JSV®ue
 
	$js_¬¿y_još
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37397 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
toLoÿËSŒšg
)

37399 
JSV®ue
 
obj
, 
£p
 = 
JS_UNDEFINED
, 
–
;

37400 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

37401 
JSSŒšg
 *
p
 = 
NULL
;

37402 
sšt64_t
 
i
, 
n
;

37403 
c
;

37405 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37406 ià(
	`js_g‘_Ëngth64
(
ùx
, &
n
, 
obj
))

37407 
exû±iÚ
;

37409 
c
 = ',';

37410 ià(!
toLoÿËSŒšg
 && 
¬gc
 > 0 && !
	`JS_IsUndefšed
(
¬gv
[0])) {

37411 
£p
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

37412 ià(
	`JS_IsExû±iÚ
(
£p
))

37413 
exû±iÚ
;

37414 
p
 = 
	`JS_VALUE_GET_STRING
(
£p
);

37415 ià(
p
->
Ën
 =ğ1 && !p->
is_wide_ch¬
)

37416 
c
 = 
p
->
u
.
¡r8
[0];

37418 
c
 = -1;

37420 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

37422 
i
 = 0; i < 
n
; i++) {

37423 ià(
i
 > 0) {

37424 ià(
c
 >= 0) {

37425 
	`¡ršg_bufãr_putc8
(
b
, 
c
);

37427 
	`¡ršg_bufãr_cÚÿt
(
b
, 
p
, 0,…->
Ën
);

37430 
–
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
obj
, 
i
);

37431 ià(
	`JS_IsExû±iÚ
(
–
))

37432 
ç
;

37433 ià(!
	`JS_IsNuÎ
(
–
è&& !
	`JS_IsUndefšed
(el)) {

37434 ià(
toLoÿËSŒšg
) {

37435 
–
 = 
	`JS_ToLoÿËSŒšgF»e
(
ùx
,ƒl);

37437 ià(
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
–
))

37438 
ç
;

37441 
	`JS_F»eV®ue
(
ùx
, 
£p
);

37442 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37443  
	`¡ršg_bufãr_’d
(
b
);

37445 
ç
:

37446 
	`¡ršg_bufãr_ä“
(
b
);

37447 
	`JS_F»eV®ue
(
ùx
, 
£p
);

37448 
exû±iÚ
:

37449 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37450  
JS_EXCEPTION
;

37451 
	}
}

37453 
JSV®ue
 
	$js_¬¿y_pİ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37454 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
shiá
)

37456 
JSV®ue
 
obj
, 
»s
 = 
JS_UNDEFINED
;

37457 
sšt64_t
 
Ën
, 
ÃwL’
;

37458 
JSV®ue
 *
¬½
;

37459 
ušt32_t
 
couÁ32
;

37461 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37462 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37463 
exû±iÚ
;

37464 
ÃwL’
 = 0;

37465 ià(
Ën
 > 0) {

37466 
ÃwL’
 = 
Ën
 - 1;

37468 ià(
	`js_g‘_ç¡_¬¿y
(
ùx
, 
obj
, &
¬½
, &
couÁ32
è&& couÁ32 =ğ
Ën
) {

37469 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

37470 ià(
shiá
) {

37471 
»s
 = 
¬½
[0];

37472 
	`memmove
(
¬½
,‡¼°+ 1, (
couÁ32
 - 1) * (*arrp));

37473 
p
->
u
.
¬¿y
.
couÁ
--;

37475 
»s
 = 
¬½
[
couÁ32
 - 1];

37476 
p
->
u
.
¬¿y
.
couÁ
--;

37479 ià(
shiá
) {

37480 
»s
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
obj
, 0);

37481 ià(
	`JS_IsExû±iÚ
(
»s
))

37482 
exû±iÚ
;

37483 ià(
	`JS_CİySubA¼ay
(
ùx
, 
obj
, 0, 1, 
Ën
 - 1, +1))

37484 
exû±iÚ
;

37486 
»s
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
ÃwL’
);

37487 ià(
	`JS_IsExû±iÚ
(
»s
))

37488 
exû±iÚ
;

37490 ià(
	`JS_D–‘ePrİ”tyIÁ64
(
ùx
, 
obj
, 
ÃwL’
, 
JS_PROP_THROW
) < 0)

37491 
exû±iÚ
;

37494 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ64
(ùx, 
ÃwL’
)) < 0)

37495 
exû±iÚ
;

37497 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37498  
»s
;

37500 
exû±iÚ
:

37501 
	`JS_F»eV®ue
(
ùx
, 
»s
);

37502 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37503  
JS_EXCEPTION
;

37504 
	}
}

37506 
JSV®ue
 
	$js_¬¿y_push
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37507 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
unshiá
)

37509 
JSV®ue
 
obj
;

37510 
i
;

37511 
sšt64_t
 
Ën
, 
äom
, 
ÃwL’
;

37513 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37514 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37515 
exû±iÚ
;

37516 
ÃwL’
 = 
Ën
 + 
¬gc
;

37517 ià(
ÃwL’
 > 
MAX_SAFE_INTEGER
) {

37518 
	`JS_ThrowTy³E¼Ü
(
ùx
, "Array†oo†ong");

37519 
exû±iÚ
;

37521 
äom
 = 
Ën
;

37522 ià(
unshiá
 && 
¬gc
 > 0) {

37523 ià(
	`JS_CİySubA¼ay
(
ùx
, 
obj
, 
¬gc
, 0, 
Ën
, -1))

37524 
exû±iÚ
;

37525 
äom
 = 0;

37527 
i
 = 0; i < 
¬gc
; i++) {

37528 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
äom
 + 
i
,

37529 
	`JS_DupV®ue
(
ùx
, 
¬gv
[
i
])) < 0)

37530 
exû±iÚ
;

37532 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ64
(ùx, 
ÃwL’
)) < 0)

37533 
exû±iÚ
;

37535 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37536  
	`JS_NewIÁ64
(
ùx
, 
ÃwL’
);

37538 
exû±iÚ
:

37539 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37540  
JS_EXCEPTION
;

37541 
	}
}

37543 
JSV®ue
 
	$js_¬¿y_»v”£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37544 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37546 
JSV®ue
 
obj
, 
lv®
, 
hv®
;

37547 
JSV®ue
 *
¬½
;

37548 
sšt64_t
 
Ën
, 
l
, 
h
;

37549 
l_´e£Á
, 
h_´e£Á
;

37550 
ušt32_t
 
couÁ32
;

37552 
lv®
 = 
JS_UNDEFINED
;

37553 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37554 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37555 
exû±iÚ
;

37558 ià(
	`js_g‘_ç¡_¬¿y
(
ùx
, 
obj
, &
¬½
, &
couÁ32
è&& couÁ32 =ğ
Ën
) {

37559 
ušt32_t
 
Î
, 
hh
;

37561 ià(
couÁ32
 > 1) {

37562 
Î
 = 0, 
hh
 = 
couÁ32
 - 1;†l < hh;†l++, hh--) {

37563 
lv®
 = 
¬½
[
Î
];

37564 
¬½
[
Î
] =‡¼p[
hh
];

37565 
¬½
[
hh
] = 
lv®
;

37568  
obj
;

37571 
l
 = 0, 
h
 = 
Ën
 - 1;† < h;†++, h--) {

37572 
l_´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
l
, &
lv®
);

37573 ià(
l_´e£Á
 < 0)

37574 
exû±iÚ
;

37575 
h_´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
h
, &
hv®
);

37576 ià(
h_´e£Á
 < 0)

37577 
exû±iÚ
;

37578 ià(
h_´e£Á
) {

37579 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
l
, 
hv®
) < 0)

37580 
exû±iÚ
;

37582 ià(
l_´e£Á
) {

37583 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
h
, 
lv®
) < 0) {

37584 
lv®
 = 
JS_UNDEFINED
;

37585 
exû±iÚ
;

37587 
lv®
 = 
JS_UNDEFINED
;

37589 ià(
	`JS_D–‘ePrİ”tyIÁ64
(
ùx
, 
obj
, 
h
, 
JS_PROP_THROW
) < 0)

37590 
exû±iÚ
;

37593 ià(
l_´e£Á
) {

37594 ià(
	`JS_D–‘ePrİ”tyIÁ64
(
ùx
, 
obj
, 
l
, 
JS_PROP_THROW
) < 0)

37595 
exû±iÚ
;

37596 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
h
, 
lv®
) < 0) {

37597 
lv®
 = 
JS_UNDEFINED
;

37598 
exû±iÚ
;

37600 
lv®
 = 
JS_UNDEFINED
;

37604  
obj
;

37606 
exû±iÚ
:

37607 
	`JS_F»eV®ue
(
ùx
, 
lv®
);

37608 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37609  
JS_EXCEPTION
;

37610 
	}
}

37612 
JSV®ue
 
	$js_¬¿y_¦iû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37613 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
¥liû
)

37615 
JSV®ue
 
obj
, 
¬r
, 
v®
, 
Ën_v®
;

37616 
sšt64_t
 
Ën
, 
¡¬t
, 
k
, 
fš®
, 
n
, 
couÁ
, 
d–_couÁ
, 
Ãw_Ën
;

37617 
kP»£Á
;

37618 
JSV®ue
 *
¬½
;

37619 
ušt32_t
 
couÁ32
, 
i
, 
™em_couÁ
;

37621 
¬r
 = 
JS_UNDEFINED
;

37622 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37623 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37624 
exû±iÚ
;

37626 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
¡¬t
, 
¬gv
[0], 0, 
Ën
,†en))

37627 
exû±iÚ
;

37629 ià(
¥liû
) {

37630 ià(
¬gc
 == 0) {

37631 
™em_couÁ
 = 0;

37632 
d–_couÁ
 = 0;

37634 ià(
¬gc
 == 1) {

37635 
™em_couÁ
 = 0;

37636 
d–_couÁ
 = 
Ën
 - 
¡¬t
;

37638 
™em_couÁ
 = 
¬gc
 - 2;

37639 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
d–_couÁ
, 
¬gv
[1], 0, 
Ën
 - 
¡¬t
, 0))

37640 
exû±iÚ
;

37642 ià(
Ën
 + 
™em_couÁ
 - 
d–_couÁ
 > 
MAX_SAFE_INTEGER
) {

37643 
	`JS_ThrowTy³E¼Ü
(
ùx
, "Array†oo†ong");

37644 
exû±iÚ
;

37646 
couÁ
 = 
d–_couÁ
;

37648 
™em_couÁ
 = 0;

37649 
fš®
 = 
Ën
;

37650 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

37651 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
fš®
, 
¬gv
[1], 0, 
Ën
,†en))

37652 
exû±iÚ
;

37654 
couÁ
 = 
	`max_št64
(
fš®
 - 
¡¬t
, 0);

37656 
Ën_v®
 = 
	`JS_NewIÁ64
(
ùx
, 
couÁ
);

37657 
¬r
 = 
	`JS_A¼ayS³c›sC»©e
(
ùx
, 
obj
, 
Ën_v®
);

37658 
	`JS_F»eV®ue
(
ùx
, 
Ën_v®
);

37659 ià(
	`JS_IsExû±iÚ
(
¬r
))

37660 
exû±iÚ
;

37662 
k
 = 
¡¬t
;

37663 
fš®
 = 
¡¬t
 + 
couÁ
;

37664 
n
 = 0;

37669 ià(
	`js_g‘_ç¡_¬¿y
(
ùx
, 
obj
, &
¬½
, &
couÁ32
) &&

37670 
	`js_is_ç¡_¬¿y
(
ùx
, 
¬r
)) {

37672 ; 
k
 < 
fš®
 && k < 
couÁ32
; k++, 
n
++) {

37673 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
¬r
, 
n
, 
	`JS_DupV®ue
(ùx, 
¬½
[
k
]), 
JS_PROP_THROW
) < 0)

37674 
exû±iÚ
;

37678 ; 
k
 < 
fš®
; k++, 
n
++) {

37679 
kP»£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
k
, &
v®
);

37680 ià(
kP»£Á
 < 0)

37681 
exû±iÚ
;

37682 ià(
kP»£Á
) {

37683 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
¬r
, 
n
, 
v®
, 
JS_PROP_THROW
) < 0)

37684 
exû±iÚ
;

37687 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
¬r
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ64
(ùx, 
n
)) < 0)

37688 
exû±iÚ
;

37690 ià(
¥liû
) {

37691 
Ãw_Ën
 = 
Ën
 + 
™em_couÁ
 - 
d–_couÁ
;

37692 ià(
™em_couÁ
 !ğ
d–_couÁ
) {

37693 ià(
	`JS_CİySubA¼ay
(
ùx
, 
obj
, 
¡¬t
 + 
™em_couÁ
,

37694 
¡¬t
 + 
d–_couÁ
, 
Ën
 - (start + del_count),

37695 
™em_couÁ
 <ğ
d–_couÁ
 ? +1 : -1) < 0)

37696 
exû±iÚ
;

37698 
k
 = 
Ën
; k-- > 
Ãw_Ën
; ) {

37699 ià(
	`JS_D–‘ePrİ”tyIÁ64
(
ùx
, 
obj
, 
k
, 
JS_PROP_THROW
) < 0)

37700 
exû±iÚ
;

37703 
i
 = 0; i < 
™em_couÁ
; i++) {

37704 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
¡¬t
 + 
i
, 
	`JS_DupV®ue
(ùx, 
¬gv
[i + 2])) < 0)

37705 
exû±iÚ
;

37707 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ64
(ùx, 
Ãw_Ën
)) < 0)

37708 
exû±iÚ
;

37710 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37711  
¬r
;

37713 
exû±iÚ
:

37714 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37715 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

37716  
JS_EXCEPTION
;

37717 
	}
}

37719 
JSV®ue
 
	$js_¬¿y_cİyW™hš
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37720 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37722 
JSV®ue
 
obj
;

37723 
sšt64_t
 
Ën
, 
äom
, 
to
, 
fš®
, 
couÁ
;

37725 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37726 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37727 
exû±iÚ
;

37729 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
to
, 
¬gv
[0], 0, 
Ën
,†en))

37730 
exû±iÚ
;

37732 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
äom
, 
¬gv
[1], 0, 
Ën
,†en))

37733 
exû±iÚ
;

37735 
fš®
 = 
Ën
;

37736 ià(
¬gc
 > 2 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

37737 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
fš®
, 
¬gv
[2], 0, 
Ën
,†en))

37738 
exû±iÚ
;

37741 
couÁ
 = 
	`mš_št64
(
fš®
 - 
äom
, 
Ën
 - 
to
);

37743 ià(
	`JS_CİySubA¼ay
(
ùx
, 
obj
, 
to
, 
äom
, 
couÁ
,

37744 (
äom
 < 
to
 &&Ø< from + 
couÁ
) ? -1 : +1))

37745 
exû±iÚ
;

37747  
obj
;

37749 
exû±iÚ
:

37750 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37751  
JS_EXCEPTION
;

37752 
	}
}

37754 
sšt64_t
 
	$JS_FÏ‰’IÁoA¼ay
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
rg‘
,

37755 
JSV®ueCÚ¡
 
sourû
, 
št64_t
 
sourûL’
,

37756 
sšt64_t
 
rg‘Index
, 
d•th
,

37757 
JSV®ueCÚ¡
 
m­³rFunùiÚ
,

37758 
JSV®ueCÚ¡
 
thisArg
)

37760 
JSV®ue
 
–em’t
;

37761 
sšt64_t
 
sourûIndex
, 
–em’tL’
;

37762 
´e£Á
, 
is_¬¿y
;

37764 
sourûIndex
 = 0; sourûIndex < 
sourûL’
; sourceIndex++) {

37765 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
sourû
, 
sourûIndex
, &
–em’t
);

37766 ià(
´e£Á
 < 0)

37768 ià(!
´e£Á
)

37770 ià(!
	`JS_IsUndefšed
(
m­³rFunùiÚ
)) {

37771 
JSV®ueCÚ¡
 
¬gs
[3] = { 
–em’t
, 
	`JS_NewIÁ64
(
ùx
, 
sourûIndex
), 
sourû
 };

37772 
–em’t
 = 
	`JS_C®l
(
ùx
, 
m­³rFunùiÚ
, 
thisArg
, 3, 
¬gs
);

37773 
	`JS_F»eV®ue
(
ùx
, (
JSV®ue
)
¬gs
[0]);

37774 
	`JS_F»eV®ue
(
ùx
, (
JSV®ue
)
¬gs
[1]);

37775 ià(
	`JS_IsExû±iÚ
(
–em’t
))

37778 ià(
d•th
 > 0) {

37779 
is_¬¿y
 = 
	`JS_IsA¼ay
(
ùx
, 
–em’t
);

37780 ià(
is_¬¿y
 < 0)

37781 
ç
;

37782 ià(
is_¬¿y
) {

37783 ià(
	`js_g‘_Ëngth64
(
ùx
, &
–em’tL’
, 
–em’t
) < 0)

37784 
ç
;

37785 
rg‘Index
 = 
	`JS_FÏ‰’IÁoA¼ay
(
ùx
, 
rg‘
, 
–em’t
,

37786 
–em’tL’
, 
rg‘Index
,

37787 
d•th
 - 1,

37788 
JS_UNDEFINED
, JS_UNDEFINED);

37789 ià(
rg‘Index
 < 0)

37790 
ç
;

37791 
	`JS_F»eV®ue
(
ùx
, 
–em’t
);

37795 ià(
rg‘Index
 >ğ
MAX_SAFE_INTEGER
) {

37796 
	`JS_ThrowTy³E¼Ü
(
ùx
, "Arrayoo†ong");

37797 
ç
;

37799 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
rg‘
, 
rg‘Index
, 
–em’t
,

37800 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

37802 
rg‘Index
++;

37804  
rg‘Index
;

37806 
ç
:

37807 
	`JS_F»eV®ue
(
ùx
, 
–em’t
);

37809 
	}
}

37811 
JSV®ue
 
	$js_¬¿y_æ©‹n
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37812 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
m­
)

37814 
JSV®ue
 
obj
, 
¬r
;

37815 
JSV®ueCÚ¡
 
m­³rFunùiÚ
, 
thisArg
;

37816 
sšt64_t
 
sourûL’
;

37817 
d•thNum
;

37819 
¬r
 = 
JS_UNDEFINED
;

37820 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37821 ià(
	`js_g‘_Ëngth64
(
ùx
, &
sourûL’
, 
obj
))

37822 
exû±iÚ
;

37824 
d•thNum
 = 1;

37825 
m­³rFunùiÚ
 = 
JS_UNDEFINED
;

37826 
thisArg
 = 
JS_UNDEFINED
;

37827 ià(
m­
) {

37828 
m­³rFunùiÚ
 = 
¬gv
[0];

37829 ià(
¬gc
 > 1) {

37830 
thisArg
 = 
¬gv
[1];

37832 ià(
	`check_funùiÚ
(
ùx
, 
m­³rFunùiÚ
))

37833 
exû±iÚ
;

37835 ià(
¬gc
 > 0 && !
	`JS_IsUndefšed
(
¬gv
[0])) {

37836 ià(
	`JS_ToIÁ32S©
(
ùx
, &
d•thNum
, 
¬gv
[0]) < 0)

37837 
exû±iÚ
;

37840 
¬r
 = 
	`JS_A¼ayS³c›sC»©e
(
ùx
, 
obj
, 
	`JS_NewIÁ32
(ctx, 0));

37841 ià(
	`JS_IsExû±iÚ
(
¬r
))

37842 
exû±iÚ
;

37843 ià(
	`JS_FÏ‰’IÁoA¼ay
(
ùx
, 
¬r
, 
obj
, 
sourûL’
, 0, 
d•thNum
,

37844 
m­³rFunùiÚ
, 
thisArg
) < 0)

37845 
exû±iÚ
;

37846 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37847  
¬r
;

37849 
exû±iÚ
:

37850 
	`JS_F»eV®ue
(
ùx
, 
obj
);

37851 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

37852  
JS_EXCEPTION
;

37853 
	}
}

37857 
	sV®ueSlÙ
 {

37858 
JSV®ue
 
	mv®
;

37859 
JSSŒšg
 *
	m¡r
;

37860 
sšt64_t
 
	mpos
;

37861 } 
	tV®ueSlÙ
;

37863 
	s¬¿y_sÜt_cÚ‹xt
 {

37864 
JSCÚ‹xt
 *
	mùx
;

37865 
	mexû±iÚ
;

37866 
	mhas_m‘hod
;

37867 
JSV®ueCÚ¡
 
	mm‘hod
;

37870 
	$js_¬¿y_cmp_g’”ic
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

37871 
¬¿y_sÜt_cÚ‹xt
 *
psc
 = 
İaque
;

37872 
JSCÚ‹xt
 *
ùx
 = 
psc
->ctx;

37873 
JSV®ueCÚ¡
 
¬gv
[2];

37874 
JSV®ue
 
»s
;

37875 
V®ueSlÙ
 *
­
 = (V®ueSlÙ *)(*)
a
;

37876 
V®ueSlÙ
 *
bp
 = (V®ueSlÙ *)(*)
b
;

37877 
cmp
;

37879 ià(
psc
->
exû±iÚ
)

37882 ià(
psc
->
has_m‘hod
) {

37886 ià(!
	`memcmp
(&
­
->
v®
, &
bp
->val, (ap->val)))

37887 
cmp_§me
;

37888 
¬gv
[0] = 
­
->
v®
;

37889 
¬gv
[1] = 
bp
->
v®
;

37890 
»s
 = 
	`JS_C®l
(
ùx
, 
psc
->
m‘hod
, 
JS_UNDEFINED
, 2, 
¬gv
);

37891 ià(
	`JS_IsExû±iÚ
(
»s
))

37892 
exû±iÚ
;

37893 ià(
	`JS_VALUE_GET_TAG
(
»s
è=ğ
JS_TAG_INT
) {

37894 
v®
 = 
	`JS_VALUE_GET_INT
(
»s
);

37895 
cmp
 = (
v®
 > 0) - (val < 0);

37897 
v®
;

37898 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
v®
, 
»s
) < 0)

37899 
exû±iÚ
;

37900 
cmp
 = (
v®
 > 0) - (val < 0);

37906 ià(!
­
->
¡r
) {

37907 
JSV®ue
 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
­
->
v®
);

37908 ià(
	`JS_IsExû±iÚ
(
¡r
))

37909 
exû±iÚ
;

37910 
­
->
¡r
 = 
	`JS_VALUE_GET_STRING
(str);

37912 ià(!
bp
->
¡r
) {

37913 
JSV®ue
 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
bp
->
v®
);

37914 ià(
	`JS_IsExû±iÚ
(
¡r
))

37915 
exû±iÚ
;

37916 
bp
->
¡r
 = 
	`JS_VALUE_GET_STRING
(str);

37918 
cmp
 = 
	`js_¡ršg_com·»
(
ùx
, 
­
->
¡r
, 
bp
->str);

37920 ià(
cmp
 != 0)

37921  
cmp
;

37922 
cmp_§me
:

37924  (
­
->
pos
 > 
bp
->pos) - (ap->pos < bp->pos);

37926 
exû±iÚ
:

37927 
psc
->
exû±iÚ
 = 1;

37929 
	}
}

37931 
JSV®ue
 
	$js_¬¿y_sÜt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

37932 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

37934 
¬¿y_sÜt_cÚ‹xt
 
asc
 = { 
ùx
, 0, 0, 
¬gv
[0] };

37935 
JSV®ue
 
obj
 = 
JS_UNDEFINED
;

37936 
V®ueSlÙ
 *
¬¿y
 = 
NULL
;

37937 
size_t
 
¬¿y_size
 = 0, 
pos
 = 0, 
n
 = 0;

37938 
sšt64_t
 
i
, 
Ën
, 
undefšed_couÁ
 = 0;

37939 
´e£Á
;

37941 ià(!
	`JS_IsUndefšed
(
asc
.
m‘hod
)) {

37942 ià(
	`check_funùiÚ
(
ùx
, 
asc
.
m‘hod
))

37943 
exû±iÚ
;

37944 
asc
.
has_m‘hod
 = 1;

37946 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

37947 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

37948 
exû±iÚ
;

37951 
i
 = 0; i < 
Ën
; i++) {

37952 ià(
pos
 >ğ
¬¿y_size
) {

37953 
size_t
 
Ãw_size
, 
¦ack
;

37954 
V®ueSlÙ
 *
Ãw_¬¿y
;

37955 
Ãw_size
 = (
¬¿y_size
 + (array_size >> 1) + 31) & ~15;

37956 
Ãw_¬¿y
 = 
	`js_»®loc2
(
ùx
, 
¬¿y
, 
Ãw_size
 * (*¬¿y), &
¦ack
);

37957 ià(
Ãw_¬¿y
 =ğ
NULL
)

37958 
exû±iÚ
;

37959 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_¬¿y
);

37960 
¬¿y
 = 
Ãw_¬¿y
;

37961 
¬¿y_size
 = 
Ãw_size
;

37963 
´e£Á
 = 
	`JS_TryG‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
i
, &
¬¿y
[
pos
].
v®
);

37964 ià(
´e£Á
 < 0)

37965 
exû±iÚ
;

37966 ià(
´e£Á
 == 0)

37968 ià(
	`JS_IsUndefšed
(
¬¿y
[
pos
].
v®
)) {

37969 
undefšed_couÁ
++;

37972 
¬¿y
[
pos
].
¡r
 = 
NULL
;

37973 
¬¿y
[
pos
].po ğ
i
;

37974 
pos
++;

37976 
	`rqsÜt
(
¬¿y
, 
pos
, (*¬¿y), 
js_¬¿y_cmp_g’”ic
, &
asc
);

37977 ià(
asc
.
exû±iÚ
)

37978 
exû±iÚ
;

37981 
n
 < 
pos
) {

37982 ià(
¬¿y
[
n
].
¡r
)

37983 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
¬¿y
[
n
].
¡r
));

37984 ià(
¬¿y
[
n
].
pos
 ==‚) {

37985 
	`JS_F»eV®ue
(
ùx
, 
¬¿y
[
n
].
v®
);

37987 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
n
, 
¬¿y
[n].
v®
) < 0) {

37988 
n
++;

37989 
exû±iÚ
;

37992 
n
++;

37994 
	`js_ä“
(
ùx
, 
¬¿y
);

37995 
i
 = 
n
; 
undefšed_couÁ
-- > 0; i++) {

37996 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
obj
, 
i
, 
JS_UNDEFINED
) < 0)

37997 
ç
;

37999 ; 
i
 < 
Ën
; i++) {

38000 ià(
	`JS_D–‘ePrİ”tyIÁ64
(
ùx
, 
obj
, 
i
, 
JS_PROP_THROW
) < 0)

38001 
ç
;

38003  
obj
;

38005 
exû±iÚ
:

38006 ; 
n
 < 
pos
;‚++) {

38007 
	`JS_F»eV®ue
(
ùx
, 
¬¿y
[
n
].
v®
);

38008 ià(
¬¿y
[
n
].
¡r
)

38009 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
¬¿y
[
n
].
¡r
));

38011 
	`js_ä“
(
ùx
, 
¬¿y
);

38012 
ç
:

38013 
	`JS_F»eV®ue
(
ùx
, 
obj
);

38014  
JS_EXCEPTION
;

38015 
	}
}

38017 
	sJSA¼ayI‹¿tÜD©a
 {

38018 
JSV®ue
 
	mobj
;

38019 
JSI‹¿tÜKšdEnum
 
	mkšd
;

38020 
ušt32_t
 
	midx
;

38021 } 
	tJSA¼ayI‹¿tÜD©a
;

38023 
	$js_¬¿y_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

38025 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

38026 
JSA¼ayI‹¿tÜD©a
 *
™
 = 
p
->
u
.
¬¿y_™”©Ü_d©a
;

38027 ià(
™
) {

38028 
	`JS_F»eV®ueRT
(
¹
, 
™
->
obj
);

38029 
	`js_ä“_¹
(
¹
, 
™
);

38031 
	}
}

38033 
	$js_¬¿y_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

38034 
JS_M¬kFunc
 *
m¬k_func
)

38036 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

38037 
JSA¼ayI‹¿tÜD©a
 *
™
 = 
p
->
u
.
¬¿y_™”©Ü_d©a
;

38038 ià(
™
) {

38039 
	`JS_M¬kV®ue
(
¹
, 
™
->
obj
, 
m¬k_func
);

38041 
	}
}

38043 
JSV®ue
 
	$js_ü—‹_¬¿y
(
JSCÚ‹xt
 *
ùx
, 
Ën
, 
JSV®ueCÚ¡
 *
b
)

38045 
JSV®ue
 
obj
;

38046 
i
;

38048 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

38049 ià(
	`JS_IsExû±iÚ
(
obj
))

38050  
JS_EXCEPTION
;

38051 
i
 = 0; i < 
Ën
; i++) {

38052 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
obj
, 
i
, 
	`JS_DupV®ue
(ùx, 
b
[i]), 0) < 0) {

38053 
	`JS_F»eV®ue
(
ùx
, 
obj
);

38054  
JS_EXCEPTION
;

38057  
obj
;

38058 
	}
}

38060 
JSV®ue
 
	$js_ü—‹_¬¿y_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38061 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

38063 
JSV®ue
 
’um_obj
, 
¬r
;

38064 
JSA¼ayI‹¿tÜD©a
 *
™
;

38065 
JSI‹¿tÜKšdEnum
 
kšd
;

38066 
şass_id
;

38068 
kšd
 = 
magic
 & 3;

38069 ià(
magic
 & 4) {

38071 
¬r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

38072 
şass_id
 = 
JS_CLASS_STRING_ITERATOR
;

38074 
¬r
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

38075 
şass_id
 = 
JS_CLASS_ARRAY_ITERATOR
;

38077 ià(
	`JS_IsExû±iÚ
(
¬r
))

38078 
ç
;

38079 
’um_obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
şass_id
);

38080 ià(
	`JS_IsExû±iÚ
(
’um_obj
))

38081 
ç
;

38082 
™
 = 
	`js_m®loc
(
ùx
, (*it));

38083 ià(!
™
)

38084 
ç1
;

38085 
™
->
obj
 = 
¬r
;

38086 
™
->
kšd
 = kind;

38087 
™
->
idx
 = 0;

38088 
	`JS_S‘O·que
(
’um_obj
, 
™
);

38089  
’um_obj
;

38090 
ç1
:

38091 
	`JS_F»eV®ue
(
ùx
, 
’um_obj
);

38092 
ç
:

38093 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

38094  
JS_EXCEPTION
;

38095 
	}
}

38097 
JSV®ue
 
	$js_¬¿y_™”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38098 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

38099 
BOOL
 *
pdÚe
, 
magic
)

38101 
JSA¼ayI‹¿tÜD©a
 *
™
;

38102 
ušt32_t
 
Ën
, 
idx
;

38103 
JSV®ue
 
v®
, 
obj
;

38104 
JSObjeù
 *
p
;

38106 
™
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_ARRAY_ITERATOR
);

38107 ià(!
™
)

38108 
ç1
;

38109 ià(
	`JS_IsUndefšed
(
™
->
obj
))

38110 
dÚe
;

38111 
p
 = 
	`JS_VALUE_GET_OBJ
(
™
->
obj
);

38112 ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

38113 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

38114 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

38115 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

38116 
ç1
;

38118 
Ën
 = 
p
->
u
.
¬¿y
.
couÁ
;

38120 ià(
	`js_g‘_Ëngth32
(
ùx
, &
Ën
, 
™
->
obj
)) {

38121 
ç1
:

38122 *
pdÚe
 = 
FALSE
;

38123  
JS_EXCEPTION
;

38126 
idx
 = 
™
->idx;

38127 ià(
idx
 >ğ
Ën
) {

38128 
	`JS_F»eV®ue
(
ùx
, 
™
->
obj
);

38129 
™
->
obj
 = 
JS_UNDEFINED
;

38130 
dÚe
:

38131 *
pdÚe
 = 
TRUE
;

38132  
JS_UNDEFINED
;

38134 
™
->
idx
 = idx + 1;

38135 *
pdÚe
 = 
FALSE
;

38136 ià(
™
->
kšd
 =ğ
JS_ITERATOR_KIND_KEY
) {

38137  
	`JS_NewUšt32
(
ùx
, 
idx
);

38139 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
™
->
obj
, 
idx
);

38140 ià(
	`JS_IsExû±iÚ
(
v®
))

38141  
JS_EXCEPTION
;

38142 ià(
™
->
kšd
 =ğ
JS_ITERATOR_KIND_VALUE
) {

38143  
v®
;

38145 
JSV®ueCÚ¡
 
¬gs
[2];

38146 
JSV®ue
 
num
;

38147 
num
 = 
	`JS_NewUšt32
(
ùx
, 
idx
);

38148 
¬gs
[0] = 
num
;

38149 
¬gs
[1] = 
v®
;

38150 
obj
 = 
	`js_ü—‹_¬¿y
(
ùx
, 2, 
¬gs
);

38151 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38152 
	`JS_F»eV®ue
(
ùx
, 
num
);

38153  
obj
;

38156 
	}
}

38158 
JSV®ue
 
	$js_™”©Ü_´Ùo_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38159 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38161  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

38162 
	}
}

38164 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_™”©Ü_´Ùo_funcs
[] = {

38165 
JS_CFUNC_DEF
("[SymbŞ.™”©Ü]", 0, 
js_™”©Ü_´Ùo_™”©Ü
 ),

38168 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¬¿y_´Ùo_funcs
[] = {

38169 
JS_CFUNC_DEF
("cÚÿt", 1, 
js_¬¿y_cÚÿt
 ),

38170 
JS_CFUNC_MAGIC_DEF
("ev”y", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_ev”y
 ),

38171 
JS_CFUNC_MAGIC_DEF
("some", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_some
 ),

38172 
JS_CFUNC_MAGIC_DEF
("fÜEach", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_fÜEach
 ),

38173 
JS_CFUNC_MAGIC_DEF
("m­", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_m­
 ),

38174 
JS_CFUNC_MAGIC_DEF
("f‹r", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_f‹r
 ),

38175 
JS_CFUNC_MAGIC_DEF
("»duû", 1, 
js_¬¿y_»duû
, 
¥ecŸl_»duû
 ),

38176 
JS_CFUNC_MAGIC_DEF
("»duûRight", 1, 
js_¬¿y_»duû
, 
¥ecŸl_»duûRight
 ),

38177 
JS_CFUNC_DEF
("fl", 1, 
js_¬¿y_fl
 ),

38178 
JS_CFUNC_MAGIC_DEF
("fšd", 1, 
js_¬¿y_fšd
, 0 ),

38179 
JS_CFUNC_MAGIC_DEF
("fšdIndex", 1, 
js_¬¿y_fšd
, 1 ),

38180 
JS_CFUNC_DEF
("šdexOf", 1, 
js_¬¿y_šdexOf
 ),

38181 
JS_CFUNC_DEF
("Ï¡IndexOf", 1, 
js_¬¿y_Ï¡IndexOf
 ),

38182 
JS_CFUNC_DEF
("šşudes", 1, 
js_¬¿y_šşudes
 ),

38183 
JS_CFUNC_MAGIC_DEF
("još", 1, 
js_¬¿y_još
, 0 ),

38184 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_¬¿y_toSŒšg
 ),

38185 
JS_CFUNC_MAGIC_DEF
("toLoÿËSŒšg", 0, 
js_¬¿y_još
, 1 ),

38186 
JS_CFUNC_MAGIC_DEF
("pİ", 0, 
js_¬¿y_pİ
, 0 ),

38187 
JS_CFUNC_MAGIC_DEF
("push", 1, 
js_¬¿y_push
, 0 ),

38188 
JS_CFUNC_MAGIC_DEF
("shiá", 0, 
js_¬¿y_pİ
, 1 ),

38189 
JS_CFUNC_MAGIC_DEF
("unshiá", 1, 
js_¬¿y_push
, 1 ),

38190 
JS_CFUNC_DEF
("»v”£", 0, 
js_¬¿y_»v”£
 ),

38191 
JS_CFUNC_DEF
("sÜt", 1, 
js_¬¿y_sÜt
 ),

38192 
JS_CFUNC_MAGIC_DEF
("¦iû", 2, 
js_¬¿y_¦iû
, 0 ),

38193 
JS_CFUNC_MAGIC_DEF
("¥liû", 2, 
js_¬¿y_¦iû
, 1 ),

38194 
JS_CFUNC_DEF
("cİyW™hš", 2, 
js_¬¿y_cİyW™hš
 ),

38195 
JS_CFUNC_MAGIC_DEF
("æ©M­", 1, 
js_¬¿y_æ©‹n
, 1 ),

38196 
JS_CFUNC_MAGIC_DEF
("æ©", 0, 
js_¬¿y_æ©‹n
, 0 ),

38197 
JS_CFUNC_MAGIC_DEF
("v®ues", 0, 
js_ü—‹_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_VALUE
 ),

38198 
JS_ALIAS_DEF
("[Symbol.iterator]", "values" ),

38199 
JS_CFUNC_MAGIC_DEF
("keys", 0, 
js_ü—‹_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_KEY
 ),

38200 
JS_CFUNC_MAGIC_DEF
("’Œ›s", 0, 
js_ü—‹_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_KEY_AND_VALUE
 ),

38203 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¬¿y_™”©Ü_´Ùo_funcs
[] = {

38204 
JS_ITERATOR_NEXT_DEF
("Ãxt", 0, 
js_¬¿y_™”©Ü_Ãxt
, 0 ),

38205 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "A¼ay I‹¿tÜ", 
JS_PROP_CONFIGURABLE
 ),

38210 
JSV®ue
 
	$js_numb”_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

38211 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38213 
JSV®ue
 
v®
, 
obj
;

38214 ià(
¬gc
 == 0) {

38215 
v®
 = 
	`JS_NewIÁ32
(
ùx
, 0);

38217 
v®
 = 
	`JS_ToNum”ic
(
ùx
, 
¬gv
[0]);

38218 ià(
	`JS_IsExû±iÚ
(
v®
))

38219  
v®
;

38220 
	`JS_VALUE_GET_TAG
(
v®
)) {

38221 #ifdeà
CONFIG_BIGNUM


38222 
JS_TAG_BIG_INT
:

38223 
JS_TAG_BIG_FLOAT
:

38225 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

38226 
d
;

38227 
	`bf_g‘_æßt64
(&
p
->
num
, &
d
, 
BF_RNDN
);

38228 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38229 
v®
 = 
	`__JS_NewFlßt64
(
ùx
, 
d
);

38232 
JS_TAG_BIG_DECIMAL
:

38233 
v®
 = 
	`JS_ToSŒšgF»e
(
ùx
, val);

38234 ià(
	`JS_IsExû±iÚ
(
v®
))

38235  
v®
;

38236 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

38237 ià(
	`JS_IsExû±iÚ
(
v®
))

38238  
v®
;

38245 ià(!
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

38246 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_NUMBER
);

38247 ià(!
	`JS_IsExû±iÚ
(
obj
))

38248 
	`JS_S‘ObjeùD©a
(
ùx
, 
obj
, 
v®
);

38249  
obj
;

38251  
v®
;

38253 
	}
}

38256 
JSV®ue
 
	$js_numb”___toIÁeg”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38257 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38259  
	`JS_ToIÁeg”F»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]));

38260 
	}
}

38262 
JSV®ue
 
	$js_numb”___toL’gth
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38263 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38265 
št64_t
 
v
;

38266 ià(
	`JS_ToL’gthF»e
(
ùx
, &
v
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0])))

38267  
JS_EXCEPTION
;

38268  
	`JS_NewIÁ64
(
ùx
, 
v
);

38269 
	}
}

38272 
JSV®ue
 
	$js_numb”_isNaN
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38273 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38275 ià(!
	`JS_IsNumb”
(
¬gv
[0]))

38276  
JS_FALSE
;

38277  
	`js_glob®_isNaN
(
ùx
, 
this_v®
, 
¬gc
, 
¬gv
);

38278 
	}
}

38280 
JSV®ue
 
	$js_numb”_isFš™e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38281 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38283 ià(!
	`JS_IsNumb”
(
¬gv
[0]))

38284  
JS_FALSE
;

38285  
	`js_glob®_isFš™e
(
ùx
, 
this_v®
, 
¬gc
, 
¬gv
);

38286 
	}
}

38288 
JSV®ue
 
	$js_numb”_isIÁeg”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38289 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38291 
»t
;

38292 
»t
 = 
	`JS_Numb”IsIÁeg”
(
ùx
, 
¬gv
[0]);

38293 ià(
»t
 < 0)

38294  
JS_EXCEPTION
;

38296  
	`JS_NewBoŞ
(
ùx
, 
»t
);

38297 
	}
}

38299 
JSV®ue
 
	$js_numb”_isSaãIÁeg”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38300 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38302 
d
;

38303 ià(!
	`JS_IsNumb”
(
¬gv
[0]))

38304  
JS_FALSE
;

38305 ià(
	`uÆik–y
(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[0])))

38306  
JS_EXCEPTION
;

38307  
	`JS_NewBoŞ
(
ùx
, 
	`is_§ã_š‹g”
(
d
));

38308 
	}
}

38310 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_numb”_funcs
[] = {

38312 
JS_ALIAS_BASE_DEF
("parseInt", "parseInt", 0 ),

38313 
JS_ALIAS_BASE_DEF
("parseFloat", "parseFloat", 0 ),

38314 
JS_CFUNC_DEF
("isNaN", 1, 
js_numb”_isNaN
 ),

38315 
JS_CFUNC_DEF
("isFš™e", 1, 
js_numb”_isFš™e
 ),

38316 
JS_CFUNC_DEF
("isIÁeg”", 1, 
js_numb”_isIÁeg”
 ),

38317 
JS_CFUNC_DEF
("isSaãIÁeg”", 1, 
js_numb”_isSaãIÁeg”
 ),

38318 
JS_PROP_DOUBLE_DEF
("MAX_VALUE", 1.7976931348623157e+308, 0 ),

38319 
JS_PROP_DOUBLE_DEF
("MIN_VALUE", 5e-324, 0 ),

38320 
JS_PROP_DOUBLE_DEF
("NaN", 
NAN
, 0 ),

38321 
JS_PROP_DOUBLE_DEF
("NEGATIVE_INFINITY", -
INFINITY
, 0 ),

38322 
JS_PROP_DOUBLE_DEF
("POSITIVE_INFINITY", 
INFINITY
, 0 ),

38323 
JS_PROP_DOUBLE_DEF
("EPSILON", 2.220446049250313e-16, 0 ),

38324 
JS_PROP_DOUBLE_DEF
("MAX_SAFE_INTEGER", 9007199254740991.0, 0 ),

38325 
JS_PROP_DOUBLE_DEF
("MIN_SAFE_INTEGER", -9007199254740991.0, 0 ),

38330 
JSV®ue
 
	$js_thisNumb”V®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

38332 ià(
	`JS_IsNumb”
(
this_v®
))

38333  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

38335 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

38336 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

38337 ià(
p
->
şass_id
 =ğ
JS_CLASS_NUMBER
) {

38338 ià(
	`JS_IsNumb”
(
p
->
u
.
objeù_d©a
))

38339  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

38342  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡‚umber");

38343 
	}
}

38345 
JSV®ue
 
	$js_numb”_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38346 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38348  
	`js_thisNumb”V®ue
(
ùx
, 
this_v®
);

38349 
	}
}

38351 
	$js_g‘_¿dix
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

38353 
¿dix
;

38354 ià(
	`JS_ToIÁ32S©
(
ùx
, &
¿dix
, 
v®
))

38356 ià(
¿dix
 < 2 ||„adix > 36) {

38357 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "radix must be between 2‡nd 36");

38360  
¿dix
;

38361 
	}
}

38363 
JSV®ue
 
	$js_numb”_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38364 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

38366 
JSV®ue
 
v®
;

38367 
ba£
;

38368 
d
;

38370 
v®
 = 
	`js_thisNumb”V®ue
(
ùx
, 
this_v®
);

38371 ià(
	`JS_IsExû±iÚ
(
v®
))

38372  
v®
;

38373 ià(
magic
 || 
	`JS_IsUndefšed
(
¬gv
[0])) {

38374 
ba£
 = 10;

38376 
ba£
 = 
	`js_g‘_¿dix
(
ùx
, 
¬gv
[0]);

38377 ià(
ba£
 < 0)

38378 
ç
;

38380 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
v®
))

38381  
JS_EXCEPTION
;

38382  
	`js_dtß
(
ùx
, 
d
, 
ba£
, 0, 
JS_DTOA_VAR_FORMAT
);

38383 
ç
:

38384 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38385  
JS_EXCEPTION
;

38386 
	}
}

38388 
JSV®ue
 
	$js_numb”_toFixed
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38389 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38391 
JSV®ue
 
v®
;

38392 
f
;

38393 
d
;

38395 
v®
 = 
	`js_thisNumb”V®ue
(
ùx
, 
this_v®
);

38396 ià(
	`JS_IsExû±iÚ
(
v®
))

38397  
v®
;

38398 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
v®
))

38399  
JS_EXCEPTION
;

38400 ià(
	`JS_ToIÁ32S©
(
ùx
, &
f
, 
¬gv
[0]))

38401  
JS_EXCEPTION
;

38402 ià(
f
 < 0 || f > 100)

38403  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

38404 ià(
	`çbs
(
d
) >= 1e21) {

38405  
	`JS_ToSŒšgF»e
(
ùx
, 
	`__JS_NewFlßt64
(ùx, 
d
));

38407  
	`js_dtß
(
ùx
, 
d
, 10, 
f
, 
JS_DTOA_FRAC_FORMAT
);

38409 
	}
}

38411 
JSV®ue
 
	$js_numb”_toExpÚ’tŸl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38412 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38414 
JSV®ue
 
v®
;

38415 
f
, 
æags
;

38416 
d
;

38418 
v®
 = 
	`js_thisNumb”V®ue
(
ùx
, 
this_v®
);

38419 ià(
	`JS_IsExû±iÚ
(
v®
))

38420  
v®
;

38421 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
v®
))

38422  
JS_EXCEPTION
;

38423 ià(
	`JS_ToIÁ32S©
(
ùx
, &
f
, 
¬gv
[0]))

38424  
JS_EXCEPTION
;

38425 ià(!
	`isfš™e
(
d
)) {

38426  
	`JS_ToSŒšgF»e
(
ùx
, 
	`__JS_NewFlßt64
(ùx, 
d
));

38428 ià(
	`JS_IsUndefšed
(
¬gv
[0])) {

38429 
æags
 = 0;

38430 
f
 = 0;

38432 ià(
f
 < 0 || f > 100)

38433  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

38434 
f
++;

38435 
æags
 = 
JS_DTOA_FIXED_FORMAT
;

38437  
	`js_dtß
(
ùx
, 
d
, 10, 
f
, 
æags
 | 
JS_DTOA_FORCE_EXP
);

38438 
	}
}

38440 
JSV®ue
 
	$js_numb”_toP»cisiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38441 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38443 
JSV®ue
 
v®
;

38444 
p
;

38445 
d
;

38447 
v®
 = 
	`js_thisNumb”V®ue
(
ùx
, 
this_v®
);

38448 ià(
	`JS_IsExû±iÚ
(
v®
))

38449  
v®
;

38450 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
d
, 
v®
))

38451  
JS_EXCEPTION
;

38452 ià(
	`JS_IsUndefšed
(
¬gv
[0]))

38453 
to_¡ršg
;

38454 ià(
	`JS_ToIÁ32S©
(
ùx
, &
p
, 
¬gv
[0]))

38455  
JS_EXCEPTION
;

38456 ià(!
	`isfš™e
(
d
)) {

38457 
to_¡ršg
:

38458  
	`JS_ToSŒšgF»e
(
ùx
, 
	`__JS_NewFlßt64
(ùx, 
d
));

38460 ià(
p
 < 1 ||… > 100)

38461  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

38462  
	`js_dtß
(
ùx
, 
d
, 10, 
p
, 
JS_DTOA_FIXED_FORMAT
);

38463 
	}
}

38465 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_numb”_´Ùo_funcs
[] = {

38466 
JS_CFUNC_DEF
("toExpÚ’tŸl", 1, 
js_numb”_toExpÚ’tŸl
 ),

38467 
JS_CFUNC_DEF
("toFixed", 1, 
js_numb”_toFixed
 ),

38468 
JS_CFUNC_DEF
("toP»cisiÚ", 1, 
js_numb”_toP»cisiÚ
 ),

38469 
JS_CFUNC_MAGIC_DEF
("toSŒšg", 1, 
js_numb”_toSŒšg
, 0 ),

38470 
JS_CFUNC_MAGIC_DEF
("toLoÿËSŒšg", 0, 
js_numb”_toSŒšg
, 1 ),

38471 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_numb”_v®ueOf
 ),

38474 
JSV®ue
 
	$js_·r£IÁ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38475 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38477 cÚ¡ *
¡r
, *
p
;

38478 
¿dix
, 
æags
;

38479 
JSV®ue
 
»t
;

38481 
¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

38482 ià(!
¡r
)

38483  
JS_EXCEPTION
;

38484 ià(
	`JS_ToIÁ32
(
ùx
, &
¿dix
, 
¬gv
[1])) {

38485 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

38486  
JS_EXCEPTION
;

38488 ià(
¿dix
 != 0 && (radix < 2 ||„adix > 36)) {

38489 
»t
 = 
JS_NAN
;

38491 
p
 = 
¡r
;

38492 
p
 +ğ
	`sk_¥aûs
(p);

38493 
æags
 = 
ATOD_INT_ONLY
 | 
ATOD_ACCEPT_PREFIX_AFTER_SIGN
;

38494 
»t
 = 
	`js_©of
(
ùx
, 
p
, 
NULL
, 
¿dix
, 
æags
);

38496 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

38497  
»t
;

38498 
	}
}

38500 
JSV®ue
 
	$js_·r£Flßt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38501 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38503 cÚ¡ *
¡r
, *
p
;

38504 
JSV®ue
 
»t
;

38506 
¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

38507 ià(!
¡r
)

38508  
JS_EXCEPTION
;

38509 
p
 = 
¡r
;

38510 
p
 +ğ
	`sk_¥aûs
(p);

38511 
»t
 = 
	`js_©of
(
ùx
, 
p
, 
NULL
, 10, 0);

38512 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

38513  
»t
;

38514 
	}
}

38517 
JSV®ue
 
	$js_boŞ—n_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

38518 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38520 
JSV®ue
 
v®
, 
obj
;

38521 
v®
 = 
	`JS_NewBoŞ
(
ùx
, 
	`JS_ToBoŞ
(ùx, 
¬gv
[0]));

38522 ià(!
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

38523 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_BOOLEAN
);

38524 ià(!
	`JS_IsExû±iÚ
(
obj
))

38525 
	`JS_S‘ObjeùD©a
(
ùx
, 
obj
, 
v®
);

38526  
obj
;

38528  
v®
;

38530 
	}
}

38532 
JSV®ue
 
	$js_thisBoŞ—nV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

38534 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_BOOL
)

38535  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

38537 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

38538 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

38539 ià(
p
->
şass_id
 =ğ
JS_CLASS_BOOLEAN
) {

38540 ià(
	`JS_VALUE_GET_TAG
(
p
->
u
.
objeù_d©a
è=ğ
JS_TAG_BOOL
)

38541  
p
->
u
.
objeù_d©a
;

38544  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ boolean");

38545 
	}
}

38547 
JSV®ue
 
	$js_boŞ—n_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38548 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38550 
JSV®ue
 
v®
 = 
	`js_thisBoŞ—nV®ue
(
ùx
, 
this_v®
);

38551 ià(
	`JS_IsExû±iÚ
(
v®
))

38552  
v®
;

38553  
	`JS_AtomToSŒšg
(
ùx
, 
	`JS_VALUE_GET_BOOL
(
v®
) ?

38554 
JS_ATOM_Œue
 : 
JS_ATOM_çl£
);

38555 
	}
}

38557 
JSV®ue
 
	$js_boŞ—n_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38558 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38560  
	`js_thisBoŞ—nV®ue
(
ùx
, 
this_v®
);

38561 
	}
}

38563 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_boŞ—n_´Ùo_funcs
[] = {

38564 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_boŞ—n_toSŒšg
 ),

38565 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_boŞ—n_v®ueOf
 ),

38570 
	$js_¡ršg_g‘_own_´İ”ty
(
JSCÚ‹xt
 *
ùx
,

38571 
JSPrİ”tyDesütÜ
 *
desc
,

38572 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
´İ
)

38574 
JSObjeù
 *
p
;

38575 
JSSŒšg
 *
p1
;

38576 
ušt32_t
 
idx
, 
ch
;

38579 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

38580 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

38581 ià(
	`JS_VALUE_GET_TAG
(
p
->
u
.
objeù_d©a
è=ğ
JS_TAG_STRING
) {

38582 
p1
 = 
	`JS_VALUE_GET_STRING
(
p
->
u
.
objeù_d©a
);

38583 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

38584 ià(
idx
 < 
p1
->
Ën
) {

38585 ià(
desc
) {

38586 ià(
p1
->
is_wide_ch¬
)

38587 
ch
 = 
p1
->
u
.
¡r16
[
idx
];

38589 
ch
 = 
p1
->
u
.
¡r8
[
idx
];

38590 
desc
->
æags
 = 
JS_PROP_ENUMERABLE
;

38591 
desc
->
v®ue
 = 
	`js_Ãw_¡ršg_ch¬
(
ùx
, 
ch
);

38592 
desc
->
g‘‹r
 = 
JS_UNDEFINED
;

38593 
desc
->
£‰”
 = 
JS_UNDEFINED
;

38595  
TRUE
;

38599  
FALSE
;

38600 
	}
}

38602 
ušt32_t
 
	$js_¡ršg_obj_g‘_Ëngth
(
JSCÚ‹xt
 *
ùx
,

38603 
JSV®ueCÚ¡
 
obj
)

38605 
JSObjeù
 *
p
;

38606 
JSSŒšg
 *
p1
;

38607 
ušt32_t
 
Ën
 = 0;

38610 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

38611 ià(
	`JS_VALUE_GET_TAG
(
p
->
u
.
objeù_d©a
è=ğ
JS_TAG_STRING
) {

38612 
p1
 = 
	`JS_VALUE_GET_STRING
(
p
->
u
.
objeù_d©a
);

38613 
Ën
 = 
p1
->len;

38615  
Ën
;

38616 
	}
}

38618 
	$js_¡ršg_g‘_own_´İ”ty_Çmes
(
JSCÚ‹xt
 *
ùx
,

38619 
JSPrİ”tyEnum
 **
±ab
,

38620 
ušt32_t
 *
¶’
,

38621 
JSV®ueCÚ¡
 
obj
)

38623 
JSPrİ”tyEnum
 *
b
;

38624 
ušt32_t
 
Ën
, 
i
;

38626 
Ën
 = 
	`js_¡ršg_obj_g‘_Ëngth
(
ùx
, 
obj
);

38627 
b
 = 
NULL
;

38628 ià(
Ën
 > 0) {

38630 
b
 = 
	`js_m®loc
(
ùx
, (
JSPrİ”tyEnum
è* 
Ën
);

38631 ià(!
b
)

38633 
i
 = 0; i < 
Ën
; i++) {

38634 
b
[
i
].
©om
 = 
	`__JS_AtomFromUIÁ32
(i);

38637 *
±ab
 = 
b
;

38638 *
¶’
 = 
Ën
;

38640 
	}
}

38642 
	$js_¡ršg_defše_own_´İ”ty
(
JSCÚ‹xt
 *
ùx
,

38643 
JSV®ueCÚ¡
 
this_obj
,

38644 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
v®
,

38645 
JSV®ueCÚ¡
 
g‘‹r
,

38646 
JSV®ueCÚ¡
 
£‰”
, 
æags
)

38648 
ušt32_t
 
idx
;

38649 
JSObjeù
 *
p
;

38650 
JSSŒšg
 *
p1
, *
p2
;

38652 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

38653 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

38654 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_obj
);

38655 ià(
	`JS_VALUE_GET_TAG
(
p
->
u
.
objeù_d©a
è!ğ
JS_TAG_STRING
)

38656 
def
;

38657 
p1
 = 
	`JS_VALUE_GET_STRING
(
p
->
u
.
objeù_d©a
);

38658 ià(
idx
 >ğ
p1
->
Ën
)

38659 
def
;

38660 ià(!
	`check_defše_´İ_æags
(
JS_PROP_ENUMERABLE
, 
æags
))

38661 
ç
;

38663 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

38664 ià(
	`JS_VALUE_GET_TAG
(
v®
è!ğ
JS_TAG_STRING
)

38665 
ç
;

38666 
p2
 = 
	`JS_VALUE_GET_STRING
(
v®
);

38667 ià(
p2
->
Ën
 != 1)

38668 
ç
;

38669 ià(
	`¡ršg_g‘
(
p1
, 
idx
è!ğ¡ršg_g‘(
p2
, 0)) {

38670 
ç
:

38671  
	`JS_ThrowTy³E¼ÜOrF®£
(
ùx
, 
æags
, "property is‚ot configurable");

38674  
TRUE
;

38676 
def
:

38677  
	`JS_DefšePrİ”ty
(
ùx
, 
this_obj
, 
´İ
, 
v®
, 
g‘‹r
, 
£‰”
,

38678 
æags
 | 
JS_PROP_NO_EXOTIC
);

38680 
	}
}

38682 
	$js_¡ršg_d–‘e_´İ”ty
(
JSCÚ‹xt
 *
ùx
,

38683 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
´İ
)

38685 
ušt32_t
 
idx
;

38687 ià(
	`__JS_AtomIsTaggedIÁ
(
´İ
)) {

38688 
idx
 = 
	`__JS_AtomToUIÁ32
(
´İ
);

38689 ià(
idx
 < 
	`js_¡ršg_obj_g‘_Ëngth
(
ùx
, 
obj
)) {

38690  
FALSE
;

38693  
TRUE
;

38694 
	}
}

38696 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_¡ršg_exÙic_m‘hods
 = {

38697 .
g‘_own_´İ”ty
 = 
js_¡ršg_g‘_own_´İ”ty
,

38698 .
	gg‘_own_´İ”ty_Çmes
 = 
js_¡ršg_g‘_own_´İ”ty_Çmes
,

38699 .
	gdefše_own_´İ”ty
 = 
js_¡ršg_defše_own_´İ”ty
,

38700 .
	gd–‘e_´İ”ty
 = 
js_¡ršg_d–‘e_´İ”ty
,

38703 
JSV®ue
 
	$js_¡ršg_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

38704 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38706 
JSV®ue
 
v®
, 
obj
;

38707 ià(
¬gc
 == 0) {

38708 
v®
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

38710 ià(
	`JS_IsUndefšed
(
Ãw_rg‘
è&& 
	`JS_IsSymbŞ
(
¬gv
[0])) {

38711 
JSAtomSŒuù
 *
p
 = 
	`JS_VALUE_GET_PTR
(
¬gv
[0]);

38712 
v®
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "SymbŞ(", 
	`JS_AtomToSŒšg
(ùx, 
	`js_g‘_©om_šdex
(ùx->
¹
, 
p
)), ")");

38714 
v®
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

38716 ià(
	`JS_IsExû±iÚ
(
v®
))

38717  
v®
;

38719 ià(!
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

38720 
JSSŒšg
 *
p1
 = 
	`JS_VALUE_GET_STRING
(
v®
);

38722 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_STRING
);

38723 ià(!
	`JS_IsExû±iÚ
(
obj
)) {

38724 
	`JS_S‘ObjeùD©a
(
ùx
, 
obj
, 
v®
);

38725 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_Ëngth
, 
	`JS_NewIÁ32
(ùx, 
p1
->
Ën
), 0);

38727  
obj
;

38729  
v®
;

38731 
	}
}

38733 
JSV®ue
 
	$js_thisSŒšgV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

38735 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_STRING
)

38736  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

38738 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

38739 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

38740 ià(
p
->
şass_id
 =ğ
JS_CLASS_STRING
) {

38741 ià(
	`JS_VALUE_GET_TAG
(
p
->
u
.
objeù_d©a
è=ğ
JS_TAG_STRING
)

38742  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

38745  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ string");

38746 
	}
}

38748 
JSV®ue
 
	$js_¡ršg_äomCh¬Code
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38749 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38751 
i
;

38752 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

38754 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
¬gc
);

38756 
i
 = 0; i < 
¬gc
; i++) {

38757 
št32_t
 
c
;

38758 ià(
	`JS_ToIÁ32
(
ùx
, &
c
, 
¬gv
[
i
]è|| 
	`¡ršg_bufãr_putc16
(
b
, c & 0xffff)) {

38759 
	`¡ršg_bufãr_ä“
(
b
);

38760  
JS_EXCEPTION
;

38763  
	`¡ršg_bufãr_’d
(
b
);

38764 
	}
}

38766 
JSV®ue
 
	$js_¡ršg_äomCodePošt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38767 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38769 
d
;

38770 
i
, 
c
;

38771 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

38775 ià(
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
¬gc
))

38776 
ç
;

38777 
i
 = 0; i < 
¬gc
; i++) {

38778 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[
i
]è=ğ
JS_TAG_INT
) {

38779 
c
 = 
	`JS_VALUE_GET_INT
(
¬gv
[
i
]);

38780 ià(
c
 < 0 || c > 0x10ffff)

38781 
¿nge_”rÜ
;

38783 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[
i
]))

38784 
ç
;

38785 ià(
d
 < 0 || d > 0x10fffà|| (
c
 = ()d) != d)

38786 
¿nge_”rÜ
;

38788 ià(
	`¡ršg_bufãr_putc
(
b
, 
c
))

38789 
ç
;

38791  
	`¡ršg_bufãr_’d
(
b
);

38793 
¿nge_”rÜ
:

38794 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid code…oint");

38795 
ç
:

38796 
	`¡ršg_bufãr_ä“
(
b
);

38797  
JS_EXCEPTION
;

38798 
	}
}

38800 
JSV®ue
 
	$js_¡ršg_¿w
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38801 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38804 
JSV®ue
 
cooked
, 
v®
, 
¿w
;

38805 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

38806 
sšt64_t
 
i
, 
n
;

38808 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

38809 
¿w
 = 
JS_UNDEFINED
;

38810 
cooked
 = 
	`JS_ToObjeù
(
ùx
, 
¬gv
[0]);

38811 ià(
	`JS_IsExû±iÚ
(
cooked
))

38812 
exû±iÚ
;

38813 
¿w
 = 
	`JS_ToObjeùF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
cooked
, 
JS_ATOM_¿w
));

38814 ià(
	`JS_IsExû±iÚ
(
¿w
))

38815 
exû±iÚ
;

38816 ià(
	`js_g‘_Ëngth64
(
ùx
, &
n
, 
¿w
) < 0)

38817 
exû±iÚ
;

38819 
i
 = 0; i < 
n
; i++) {

38820 
v®
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”tyIÁ64
(ùx, 
¿w
, 
i
));

38821 ià(
	`JS_IsExû±iÚ
(
v®
))

38822 
exû±iÚ
;

38823 
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
v®
);

38824 ià(
i
 < 
n
 - 1 && i + 1 < 
¬gc
) {

38825 ià(
	`¡ršg_bufãr_cÚÿt_v®ue
(
b
, 
¬gv
[
i
 + 1]))

38826 
exû±iÚ
;

38829 
	`JS_F»eV®ue
(
ùx
, 
cooked
);

38830 
	`JS_F»eV®ue
(
ùx
, 
¿w
);

38831  
	`¡ršg_bufãr_’d
(
b
);

38833 
exû±iÚ
:

38834 
	`JS_F»eV®ue
(
ùx
, 
cooked
);

38835 
	`JS_F»eV®ue
(
ùx
, 
¿w
);

38836 
	`¡ršg_bufãr_ä“
(
b
);

38837  
JS_EXCEPTION
;

38838 
	}
}

38841 
JSV®ue
 
	$js_¡ršg_codePoštRªge
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38842 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38844 
ušt32_t
 
¡¬t
, 
’d
, 
i
, 
n
;

38845 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

38847 ià(
	`JS_ToUšt32
(
ùx
, &
¡¬t
, 
¬gv
[0]) ||

38848 
	`JS_ToUšt32
(
ùx
, &
’d
, 
¬gv
[1]))

38849  
JS_EXCEPTION
;

38850 
’d
 = 
	`mš_ušt32
(end, 0x10ffff + 1);

38852 ià(
¡¬t
 > 
’d
) {

38853 
¡¬t
 = 
’d
;

38855 
n
 = 
’d
 - 
¡¬t
;

38856 ià(
’d
 > 0x10000) {

38857 
n
 +ğ
’d
 - 
	`max_ušt32
(
¡¬t
, 0x10000);

38859 ià(
	`¡ršg_bufãr_š™2
(
ùx
, 
b
, 
n
, 
’d
 >= 0x100))

38860  
JS_EXCEPTION
;

38861 
i
 = 
¡¬t
; i < 
’d
; i++) {

38862 
	`¡ršg_bufãr_putc
(
b
, 
i
);

38864  
	`¡ršg_bufãr_’d
(
b
);

38865 
	}
}

38868 
JSV®ue
 
	$js_¡ršg___isS·û
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38869 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38871 
c
;

38872 ià(
	`JS_ToIÁ32
(
ùx
, &
c
, 
¬gv
[0]))

38873  
JS_EXCEPTION
;

38874  
	`JS_NewBoŞ
(
ùx
, 
	`Ìe_is_¥aû
(
c
));

38875 
	}
}

38878 
JSV®ue
 
	$js_¡ršg_ch¬CodeAt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38879 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38881 
JSV®ue
 
v®
, 
»t
;

38882 
JSSŒšg
 *
p
;

38883 
idx
, 
c
;

38885 
v®
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

38886 ià(
	`JS_IsExû±iÚ
(
v®
))

38887  
v®
;

38888 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

38889 ià(
	`JS_ToIÁ32S©
(
ùx
, &
idx
, 
¬gv
[0])) {

38890 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38891  
JS_EXCEPTION
;

38893 ià(
idx
 < 0 || idx >ğ
p
->
Ën
) {

38894 
»t
 = 
JS_NAN
;

38896 ià(
p
->
is_wide_ch¬
)

38897 
c
 = 
p
->
u
.
¡r16
[
idx
];

38899 
c
 = 
p
->
u
.
¡r8
[
idx
];

38900 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 
c
);

38902 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38903  
»t
;

38904 
	}
}

38906 
JSV®ue
 
	$js_¡ršg_ch¬At
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38907 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38909 
JSV®ue
 
v®
, 
»t
;

38910 
JSSŒšg
 *
p
;

38911 
idx
, 
c
;

38913 
v®
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

38914 ià(
	`JS_IsExû±iÚ
(
v®
))

38915  
v®
;

38916 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

38917 ià(
	`JS_ToIÁ32S©
(
ùx
, &
idx
, 
¬gv
[0])) {

38918 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38919  
JS_EXCEPTION
;

38921 ià(
idx
 < 0 || idx >ğ
p
->
Ën
) {

38922 
»t
 = 
	`js_Ãw_¡ršg8
(
ùx
, 
NULL
, 0);

38924 ià(
p
->
is_wide_ch¬
)

38925 
c
 = 
p
->
u
.
¡r16
[
idx
];

38927 
c
 = 
p
->
u
.
¡r8
[
idx
];

38928 
»t
 = 
	`js_Ãw_¡ršg_ch¬
(
ùx
, 
c
);

38930 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38931  
»t
;

38932 
	}
}

38934 
JSV®ue
 
	$js_¡ršg_codePoštAt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38935 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38937 
JSV®ue
 
v®
, 
»t
;

38938 
JSSŒšg
 *
p
;

38939 
idx
, 
c
;

38941 
v®
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

38942 ià(
	`JS_IsExû±iÚ
(
v®
))

38943  
v®
;

38944 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

38945 ià(
	`JS_ToIÁ32S©
(
ùx
, &
idx
, 
¬gv
[0])) {

38946 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38947  
JS_EXCEPTION
;

38949 ià(
idx
 < 0 || idx >ğ
p
->
Ën
) {

38950 
»t
 = 
JS_UNDEFINED
;

38952 
c
 = 
	`¡ršg_g‘c
(
p
, &
idx
);

38953 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 
c
);

38955 
	`JS_F»eV®ue
(
ùx
, 
v®
);

38956  
»t
;

38957 
	}
}

38959 
JSV®ue
 
	$js_¡ršg_cÚÿt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

38960 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

38962 
JSV®ue
 
r
;

38963 
i
;

38968 
r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

38969 
i
 = 0; i < 
¬gc
; i++) {

38970 ià(
	`JS_IsExû±iÚ
(
r
))

38972 
r
 = 
	`JS_CÚÿtSŒšg
(
ùx
,„, 
	`JS_DupV®ue
(ùx, 
¬gv
[
i
]));

38974  
r
;

38975 
	}
}

38977 
	$¡ršg_cmp
(
JSSŒšg
 *
p1
, JSSŒšg *
p2
, 
x1
, 
x2
, 
Ën
)

38979 
i
, 
c1
, 
c2
;

38980 
i
 = 0; i < 
Ën
; i++) {

38981 ià((
c1
 = 
	`¡ršg_g‘
(
p1
, 
x1
 + 
i
)è!ğ(
c2
 = sŒšg_g‘(
p2
, 
x2
 + i)))

38982  
c1
 - 
c2
;

38985 
	}
}

38987 
	$¡ršg_šdexof_ch¬
(
JSSŒšg
 *
p
, 
c
, 
äom
)

38990 
i
, 
Ën
 = 
p
->len;

38991 ià(
p
->
is_wide_ch¬
) {

38992 
i
 = 
äom
; i < 
Ën
; i++) {

38993 ià(
p
->
u
.
¡r16
[
i
] =ğ
c
)

38994  
i
;

38997 ià((
c
 & ~0xff) == 0) {

38998 
i
 = 
äom
; i < 
Ën
; i++) {

38999 ià(
p
->
u
.
¡r8
[
i
] =ğ(
ušt8_t
)
c
)

39000  
i
;

39005 
	}
}

39007 
	$¡ršg_šdexof
(
JSSŒšg
 *
p1
, JSSŒšg *
p2
, 
äom
)

39010 
c
, 
i
, 
j
, 
Ën1
 = 
p1
->
Ën
, 
Ën2
 = 
p2
->len;

39011 ià(
Ën2
 == 0)

39012  
äom
;

39013 
i
 = 
äom
, 
c
 = 
	`¡ršg_g‘
(
p2
, 0); i + 
Ën2
 <ğ
Ën1
; i = 
j
 + 1) {

39014 
j
 = 
	`¡ršg_šdexof_ch¬
(
p1
, 
c
, 
i
);

39015 ià(
j
 < 0 || j + 
Ën2
 > 
Ën1
)

39017 ià(!
	`¡ršg_cmp
(
p1
, 
p2
, 
j
 + 1, 1, 
Ën2
 - 1))

39018  
j
;

39021 
	}
}

39023 
sšt64_t
 
	$¡ršg_advªû_šdex
(
JSSŒšg
 *
p
, 
št64_t
 
šdex
, 
BOOL
 
unicode
)

39025 ià(!
unicode
 || 
šdex
 >ğ
p
->
Ën
 || !p->
is_wide_ch¬
) {

39026 
šdex
++;

39028 
šdex32
 = ()
šdex
;

39029 
	`¡ršg_g‘c
(
p
, &
šdex32
);

39030 
šdex
 = 
šdex32
;

39032  
šdex
;

39033 
	}
}

39035 
JSV®ue
 
	$js_¡ršg_šdexOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39036 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
Ï¡IndexOf
)

39038 
JSV®ue
 
¡r
, 
v
;

39039 
i
, 
Ën
, 
v_Ën
, 
pos
, 
¡¬t
, 
¡İ
, 
»t
, 
šc
;

39040 
JSSŒšg
 *
p
;

39041 
JSSŒšg
 *
p1
;

39043 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39044 ià(
	`JS_IsExû±iÚ
(
¡r
))

39045  
¡r
;

39046 
v
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

39047 ià(
	`JS_IsExû±iÚ
(
v
))

39048 
ç
;

39049 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39050 
p1
 = 
	`JS_VALUE_GET_STRING
(
v
);

39051 
Ën
 = 
p
->len;

39052 
v_Ën
 = 
p1
->
Ën
;

39053 ià(
Ï¡IndexOf
) {

39054 
pos
 = 
Ën
 - 
v_Ën
;

39055 ià(
¬gc
 > 1) {

39056 
d
;

39057 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[1]))

39058 
ç
;

39059 ià(!
	`i¢ª
(
d
)) {

39060 ià(
d
 <= 0)

39061 
pos
 = 0;

39062 ià(
d
 < 
pos
)

39063 
pos
 = 
d
;

39066 
¡¬t
 = 
pos
;

39067 
¡İ
 = 0;

39068 
šc
 = -1;

39070 
pos
 = 0;

39071 ià(
¬gc
 > 1) {

39072 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
pos
, 
¬gv
[1], 0, 
Ën
, 0))

39073 
ç
;

39075 
¡¬t
 = 
pos
;

39076 
¡İ
 = 
Ën
 - 
v_Ën
;

39077 
šc
 = 1;

39079 
»t
 = -1;

39080 ià(
Ën
 >ğ
v_Ën
 && 
šc
 * (
¡İ
 - 
¡¬t
) >= 0) {

39081 
i
 = 
¡¬t
;; i +ğ
šc
) {

39082 ià(!
	`¡ršg_cmp
(
p
, 
p1
, 
i
, 0, 
v_Ën
)) {

39083 
»t
 = 
i
;

39086 ià(
i
 =ğ
¡İ
)

39090 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39091 
	`JS_F»eV®ue
(
ùx
, 
v
);

39092  
	`JS_NewIÁ32
(
ùx
, 
»t
);

39094 
ç
:

39095 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39096 
	`JS_F»eV®ue
(
ùx
, 
v
);

39097  
JS_EXCEPTION
;

39098 
	}
}

39101 
js_is_»gexp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
);

39103 
JSV®ue
 
	$js_¡ršg_šşudes
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39104 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

39106 
JSV®ue
 
¡r
, 
v
 = 
JS_UNDEFINED
;

39107 
i
, 
Ën
, 
v_Ën
, 
pos
, 
¡¬t
, 
¡İ
, 
»t
;

39108 
JSSŒšg
 *
p
;

39109 
JSSŒšg
 *
p1
;

39111 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39112 ià(
	`JS_IsExû±iÚ
(
¡r
))

39113  
¡r
;

39114 
»t
 = 
	`js_is_»gexp
(
ùx
, 
¬gv
[0]);

39115 ià(
»t
) {

39116 ià(
»t
 > 0)

39117 
	`JS_ThrowTy³E¼Ü
(
ùx
, "regex‚ot supported");

39118 
ç
;

39120 
v
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

39121 ià(
	`JS_IsExû±iÚ
(
v
))

39122 
ç
;

39123 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39124 
p1
 = 
	`JS_VALUE_GET_STRING
(
v
);

39125 
Ën
 = 
p
->len;

39126 
v_Ën
 = 
p1
->
Ën
;

39127 
pos
 = (
magic
 & 2è? 
Ën
 : 0;

39128 ià(
¬gc
 > 1 && !
	`JS_IsUndefšed
(
¬gv
[1])) {

39129 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
pos
, 
¬gv
[1], 0, 
Ën
, 0))

39130 
ç
;

39132 
Ën
 -ğ
v_Ën
;

39133 
¡¬t
 = 
pos
;

39134 
¡İ
 = 
Ën
;

39135 ià(
magic
 & 1) {

39136 
¡İ
 = 
pos
;

39138 ià(
magic
 & 2) {

39139 
pos
 -ğ
v_Ën
;

39140 
¡¬t
 = 
¡İ
 = 
pos
;

39142 
»t
 = 0;

39143 ià(
¡¬t
 >ğ0 && s¹ <ğ
¡İ
) {

39144 
i
 = 
¡¬t
;; i++) {

39145 ià(!
	`¡ršg_cmp
(
p
, 
p1
, 
i
, 0, 
v_Ën
)) {

39146 
»t
 = 1;

39149 ià(
i
 =ğ
¡İ
)

39153 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39154 
	`JS_F»eV®ue
(
ùx
, 
v
);

39155  
	`JS_NewBoŞ
(
ùx
, 
»t
);

39157 
ç
:

39158 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39159 
	`JS_F»eV®ue
(
ùx
, 
v
);

39160  
JS_EXCEPTION
;

39161 
	}
}

39163 
	$check_»gexp_g_æag
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
»gexp
)

39165 
»t
;

39166 
JSV®ue
 
æags
;

39168 
»t
 = 
	`js_is_»gexp
(
ùx
, 
»gexp
);

39169 ià(
»t
 < 0)

39171 ià(
»t
) {

39172 
æags
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»gexp
, 
JS_ATOM_æags
);

39173 ià(
	`JS_IsExû±iÚ
(
æags
))

39175 ià(
	`JS_IsUndefšed
(
æags
è|| 
	`JS_IsNuÎ
(flags)) {

39176 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto object");

39179 
æags
 = 
	`JS_ToSŒšgF»e
(
ùx
, flags);

39180 ià(
	`JS_IsExû±iÚ
(
æags
))

39182 
»t
 = 
	`¡ršg_šdexof_ch¬
(
	`JS_VALUE_GET_STRING
(
æags
), 'g', 0);

39183 
	`JS_F»eV®ue
(
ùx
, 
æags
);

39184 ià(
»t
 < 0) {

39185 
	`JS_ThrowTy³E¼Ü
(
ùx
, "regexp must havehe 'g' flag");

39190 
	}
}

39192 
JSV®ue
 
	$js_¡ršg_m©ch
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39193 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
©om
)

39197 
JSV®ueCÚ¡
 
O
 = 
this_v®
, 
»gexp
 = 
¬gv
[0], 
¬gs
[2];

39198 
JSV®ue
 
m©ch”
, 
S
, 
rx
, 
»suÉ
, 
¡r
;

39199 
¬gs_Ën
;

39201 ià(
	`JS_IsUndefšed
(
O
è|| 
	`JS_IsNuÎ
(O))

39202  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto object");

39204 ià(!
	`JS_IsUndefšed
(
»gexp
è&& !
	`JS_IsNuÎ
(regexp)) {

39205 
m©ch”
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»gexp
, 
©om
);

39206 ià(
	`JS_IsExû±iÚ
(
m©ch”
))

39207  
JS_EXCEPTION
;

39208 ià(
©om
 =ğ
JS_ATOM_SymbŞ_m©chAÎ
) {

39209 ià(
	`check_»gexp_g_æag
(
ùx
, 
»gexp
) < 0) {

39210 
	`JS_F»eV®ue
(
ùx
, 
m©ch”
);

39211  
JS_EXCEPTION
;

39214 ià(!
	`JS_IsUndefšed
(
m©ch”
è&& !
	`JS_IsNuÎ
(matcher)) {

39215  
	`JS_C®lF»e
(
ùx
, 
m©ch”
, 
»gexp
, 1, &
O
);

39218 
S
 = 
	`JS_ToSŒšg
(
ùx
, 
O
);

39219 ià(
	`JS_IsExû±iÚ
(
S
))

39220  
JS_EXCEPTION
;

39221 
¬gs_Ën
 = 1;

39222 
¬gs
[0] = 
»gexp
;

39223 
¡r
 = 
JS_UNDEFINED
;

39224 ià(
©om
 =ğ
JS_ATOM_SymbŞ_m©chAÎ
) {

39225 
¡r
 = 
	`JS_NewSŒšg
(
ùx
, "g");

39226 ià(
	`JS_IsExû±iÚ
(
¡r
))

39227 
ç
;

39228 
¬gs
[
¬gs_Ën
++] = (
JSV®ueCÚ¡
)
¡r
;

39230 
rx
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, ctx->
»gexp_ùÜ
, 
¬gs_Ën
, 
¬gs
);

39231 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39232 ià(
	`JS_IsExû±iÚ
(
rx
)) {

39233 
ç
:

39234 
	`JS_F»eV®ue
(
ùx
, 
S
);

39235  
JS_EXCEPTION
;

39237 
»suÉ
 = 
	`JS_InvokeF»e
(
ùx
, 
rx
, 
©om
, 1, (
JSV®ueCÚ¡
 *)&
S
);

39238 
	`JS_F»eV®ue
(
ùx
, 
S
);

39239  
»suÉ
;

39240 
	}
}

39242 
JSV®ue
 
	$js_¡ršg___G‘Sub¡™utiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39243 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39246 
JSV®ueCÚ¡
 
m©ched
, 
¡r
, 
ÿ±u»s
, 
ÇmedC­tu»s
, 
»p
;

39247 
JSV®ue
 
ÿ±u»
, 
Çme
, 
s
;

39248 
ušt32_t
 
pos™iÚ
, 
Ën
, 
m©ched_Ën
, 
ÿ±u»s_Ën
;

39249 
i
, 
j
, 
j0
, 
k
, 
k1
;

39250 
c
, 
c1
;

39251 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

39252 
JSSŒšg
 *
¥
, *
½
;

39254 
m©ched
 = 
¬gv
[0];

39255 
¡r
 = 
¬gv
[1];

39256 
ÿ±u»s
 = 
¬gv
[3];

39257 
ÇmedC­tu»s
 = 
¬gv
[4];

39258 
»p
 = 
¬gv
[5];

39260 ià(!
	`JS_IsSŒšg
(
»p
è|| !JS_IsSŒšg(
¡r
))

39261  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ string");

39263 
¥
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39264 
½
 = 
	`JS_VALUE_GET_STRING
(
»p
);

39266 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

39268 
ÿ±u»s_Ën
 = 0;

39269 ià(!
	`JS_IsUndefšed
(
ÿ±u»s
)) {

39270 ià(
	`js_g‘_Ëngth32
(
ùx
, &
ÿ±u»s_Ën
, 
ÿ±u»s
))

39271 
exû±iÚ
;

39273 ià(
	`js_g‘_Ëngth32
(
ùx
, &
m©ched_Ën
, 
m©ched
))

39274 
exû±iÚ
;

39275 ià(
	`JS_ToUšt32
(
ùx
, &
pos™iÚ
, 
¬gv
[2]) < 0)

39276 
exû±iÚ
;

39278 
Ën
 = 
½
->len;

39279 
i
 = 0;

39281 
j
 = 
	`¡ršg_šdexof_ch¬
(
½
, '$', 
i
);

39282 ià(
j
 < 0 || j + 1 >ğ
Ën
)

39284 
	`¡ršg_bufãr_cÚÿt
(
b
, 
½
, 
i
, 
j
);

39285 
j0
 = 
j
++;

39286 
c
 = 
	`¡ršg_g‘
(
½
, 
j
++);

39287 ià(
c
 == '$') {

39288 
	`¡ršg_bufãr_putc8
(
b
, '$');

39289 } ià(
c
 == '&') {

39290 ià(
	`¡ršg_bufãr_cÚÿt_v®ue
(
b
, 
m©ched
))

39291 
exû±iÚ
;

39292 } ià(
c
 == '`') {

39293 
	`¡ršg_bufãr_cÚÿt
(
b
, 
¥
, 0, 
pos™iÚ
);

39294 } ià(
c
 == '\'') {

39295 
	`¡ršg_bufãr_cÚÿt
(
b
, 
¥
, 
pos™iÚ
 + 
m©ched_Ën
, sp->
Ën
);

39296 } ià(
c
 >= '0' && c <= '9') {

39297 
k
 = 
c
 - '0';

39298 
c1
 = 
	`¡ršg_g‘
(
½
, 
j
);

39299 ià(
c1
 >= '0' && c1 <= '9') {

39303 
k1
 = 
k
 * 10 + 
c1
 - '0';

39304 ià(
k1
 >ğ1 && k1 < 
ÿ±u»s_Ën
) {

39305 
k
 = 
k1
;

39306 
j
++;

39309 ià(
k
 >ğ1 && k < 
ÿ±u»s_Ën
) {

39310 
s
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
ÿ±u»s
, 
k
);

39311 ià(
	`JS_IsExû±iÚ
(
s
))

39312 
exû±iÚ
;

39313 ià(!
	`JS_IsUndefšed
(
s
)) {

39314 ià(
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
s
))

39315 
exû±iÚ
;

39318 
nÜ•
;

39320 } ià(
c
 =ğ'<' && !
	`JS_IsUndefšed
(
ÇmedC­tu»s
)) {

39321 
k
 = 
	`¡ršg_šdexof_ch¬
(
½
, '>', 
j
);

39322 ià(
k
 < 0)

39323 
nÜ•
;

39324 
Çme
 = 
	`js_sub_¡ršg
(
ùx
, 
½
, 
j
, 
k
);

39325 ià(
	`JS_IsExû±iÚ
(
Çme
))

39326 
exû±iÚ
;

39327 
ÿ±u»
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
ÇmedC­tu»s
, 
Çme
);

39328 ià(
	`JS_IsExû±iÚ
(
ÿ±u»
))

39329 
exû±iÚ
;

39330 ià(!
	`JS_IsUndefšed
(
ÿ±u»
)) {

39331 ià(
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
ÿ±u»
))

39332 
exû±iÚ
;

39334 
j
 = 
k
 + 1;

39336 
nÜ•
:

39337 
	`¡ršg_bufãr_cÚÿt
(
b
, 
½
, 
j0
, 
j
);

39339 
i
 = 
j
;

39341 
	`¡ršg_bufãr_cÚÿt
(
b
, 
½
, 
i
,„p->
Ën
);

39342  
	`¡ršg_bufãr_’d
(
b
);

39343 
exû±iÚ
:

39344 
	`¡ršg_bufãr_ä“
(
b
);

39345  
JS_EXCEPTION
;

39346 
	}
}

39348 
JSV®ue
 
	$js_¡ršg_»¶aû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39349 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

39350 
is_»¶aûAÎ
)

39353 
JSV®ueCÚ¡
 
O
 = 
this_v®
, 
£¬chV®ue
 = 
¬gv
[0], 
»¶aûV®ue
 =‡rgv[1];

39354 
JSV®ueCÚ¡
 
¬gs
[6];

39355 
JSV®ue
 
¡r
, 
£¬ch_¡r
, 
»¶aûV®ue_¡r
, 
»¶_¡r
;

39356 
JSSŒšg
 *
¥
, *
£¬chp
;

39357 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

39358 
pos
, 
funùiÚ®R•Ïû
, 
’dOfLa¡M©ch
;

39359 
BOOL
 
is_fœ¡
;

39361 ià(
	`JS_IsUndefšed
(
O
è|| 
	`JS_IsNuÎ
(O))

39362  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto object");

39364 
£¬ch_¡r
 = 
JS_UNDEFINED
;

39365 
»¶aûV®ue_¡r
 = 
JS_UNDEFINED
;

39366 
»¶_¡r
 = 
JS_UNDEFINED
;

39368 ià(!
	`JS_IsUndefšed
(
£¬chV®ue
è&& !
	`JS_IsNuÎ
(searchValue)) {

39369 
JSV®ue
 
»¶aûr
;

39370 ià(
is_»¶aûAÎ
) {

39371 ià(
	`check_»gexp_g_æag
(
ùx
, 
£¬chV®ue
) < 0)

39372  
JS_EXCEPTION
;

39374 
»¶aûr
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
£¬chV®ue
, 
JS_ATOM_SymbŞ_»¶aû
);

39375 ià(
	`JS_IsExû±iÚ
(
»¶aûr
))

39376  
JS_EXCEPTION
;

39377 ià(!
	`JS_IsUndefšed
(
»¶aûr
è&& !
	`JS_IsNuÎ
(replacer)) {

39378 
¬gs
[0] = 
O
;

39379 
¬gs
[1] = 
»¶aûV®ue
;

39380  
	`JS_C®lF»e
(
ùx
, 
»¶aûr
, 
£¬chV®ue
, 2, 
¬gs
);

39383 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

39385 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
O
);

39386 ià(
	`JS_IsExû±iÚ
(
¡r
))

39387 
exû±iÚ
;

39388 
£¬ch_¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
£¬chV®ue
);

39389 ià(
	`JS_IsExû±iÚ
(
£¬ch_¡r
))

39390 
exû±iÚ
;

39391 
funùiÚ®R•Ïû
 = 
	`JS_IsFunùiÚ
(
ùx
, 
»¶aûV®ue
);

39392 ià(!
funùiÚ®R•Ïû
) {

39393 
»¶aûV®ue_¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
»¶aûV®ue
);

39394 ià(
	`JS_IsExû±iÚ
(
»¶aûV®ue_¡r
))

39395 
exû±iÚ
;

39398 
¥
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39399 
£¬chp
 = 
	`JS_VALUE_GET_STRING
(
£¬ch_¡r
);

39400 
’dOfLa¡M©ch
 = 0;

39401 
is_fœ¡
 = 
TRUE
;

39403 ià(
	`uÆik–y
(
£¬chp
->
Ën
 == 0)) {

39404 ià(
is_fœ¡
)

39405 
pos
 = 0;

39406 ià(
’dOfLa¡M©ch
 >ğ
¥
->
Ën
)

39407 
pos
 = -1;

39409 
pos
 = 
’dOfLa¡M©ch
 + 1;

39411 
pos
 = 
	`¡ršg_šdexof
(
¥
, 
£¬chp
, 
’dOfLa¡M©ch
);

39413 ià(
pos
 < 0) {

39414 ià(
is_fœ¡
) {

39415 
	`¡ršg_bufãr_ä“
(
b
);

39416 
	`JS_F»eV®ue
(
ùx
, 
£¬ch_¡r
);

39417 
	`JS_F»eV®ue
(
ùx
, 
»¶aûV®ue_¡r
);

39418  
¡r
;

39423 ià(
funùiÚ®R•Ïû
) {

39424 
¬gs
[0] = 
£¬ch_¡r
;

39425 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
pos
);

39426 
¬gs
[2] = 
¡r
;

39427 
»¶_¡r
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_C®l
(ùx, 
»¶aûV®ue
, 
JS_UNDEFINED
, 3, 
¬gs
));

39429 
¬gs
[0] = 
£¬ch_¡r
;

39430 
¬gs
[1] = 
¡r
;

39431 
¬gs
[2] = 
	`JS_NewIÁ32
(
ùx
, 
pos
);

39432 
¬gs
[3] = 
JS_UNDEFINED
;

39433 
¬gs
[4] = 
JS_UNDEFINED
;

39434 
¬gs
[5] = 
»¶aûV®ue_¡r
;

39435 
»¶_¡r
 = 
	`js_¡ršg___G‘Sub¡™utiÚ
(
ùx
, 
JS_UNDEFINED
, 6, 
¬gs
);

39437 ià(
	`JS_IsExû±iÚ
(
»¶_¡r
))

39438 
exû±iÚ
;

39440 
	`¡ršg_bufãr_cÚÿt
(
b
, 
¥
, 
’dOfLa¡M©ch
, 
pos
);

39441 
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
»¶_¡r
);

39442 
’dOfLa¡M©ch
 = 
pos
 + 
£¬chp
->
Ën
;

39443 
is_fœ¡
 = 
FALSE
;

39444 ià(!
is_»¶aûAÎ
)

39447 
	`¡ršg_bufãr_cÚÿt
(
b
, 
¥
, 
’dOfLa¡M©ch
, sp->
Ën
);

39448 
	`JS_F»eV®ue
(
ùx
, 
£¬ch_¡r
);

39449 
	`JS_F»eV®ue
(
ùx
, 
»¶aûV®ue_¡r
);

39450 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39451  
	`¡ršg_bufãr_’d
(
b
);

39453 
exû±iÚ
:

39454 
	`¡ršg_bufãr_ä“
(
b
);

39455 
	`JS_F»eV®ue
(
ùx
, 
£¬ch_¡r
);

39456 
	`JS_F»eV®ue
(
ùx
, 
»¶aûV®ue_¡r
);

39457 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39458  
JS_EXCEPTION
;

39459 
	}
}

39461 
JSV®ue
 
	$js_¡ršg_¥l™
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39462 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39465 
JSV®ueCÚ¡
 
O
 = 
this_v®
, 
£·¿tÜ
 = 
¬gv
[0], 
lim™
 =‡rgv[1];

39466 
JSV®ueCÚ¡
 
¬gs
[2];

39467 
JSV®ue
 
S
, 
A
, 
R
, 
T
;

39468 
ušt32_t
 
lim
, 
ËngthA
;

39469 
sšt64_t
 
p
, 
q
, 
s
, 
r
, 
e
;

39470 
JSSŒšg
 *
¥
, *
½
;

39472 ià(
	`JS_IsUndefšed
(
O
è|| 
	`JS_IsNuÎ
(O))

39473  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto object");

39475 
S
 = 
JS_UNDEFINED
;

39476 
A
 = 
JS_UNDEFINED
;

39477 
R
 = 
JS_UNDEFINED
;

39479 ià(!
	`JS_IsUndefšed
(
£·¿tÜ
è&& !
	`JS_IsNuÎ
(separator)) {

39480 
JSV®ue
 
¥l™‹r
;

39481 
¥l™‹r
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
£·¿tÜ
, 
JS_ATOM_SymbŞ_¥l™
);

39482 ià(
	`JS_IsExû±iÚ
(
¥l™‹r
))

39483  
JS_EXCEPTION
;

39484 ià(!
	`JS_IsUndefšed
(
¥l™‹r
è&& !
	`JS_IsNuÎ
(splitter)) {

39485 
¬gs
[0] = 
O
;

39486 
¬gs
[1] = 
lim™
;

39487  
	`JS_C®lF»e
(
ùx
, 
¥l™‹r
, 
£·¿tÜ
, 2, 
¬gs
);

39490 
S
 = 
	`JS_ToSŒšg
(
ùx
, 
O
);

39491 ià(
	`JS_IsExû±iÚ
(
S
))

39492 
exû±iÚ
;

39493 
A
 = 
	`JS_NewA¼ay
(
ùx
);

39494 ià(
	`JS_IsExû±iÚ
(
A
))

39495 
exû±iÚ
;

39496 
ËngthA
 = 0;

39497 ià(
	`JS_IsUndefšed
(
lim™
)) {

39498 
lim
 = 0xffffffff;

39500 ià(
	`JS_ToUšt32
(
ùx
, &
lim
, 
lim™
) < 0)

39501 
exû±iÚ
;

39503 
¥
 = 
	`JS_VALUE_GET_STRING
(
S
);

39504 
s
 = 
¥
->
Ën
;

39505 
R
 = 
	`JS_ToSŒšg
(
ùx
, 
£·¿tÜ
);

39506 ià(
	`JS_IsExû±iÚ
(
R
))

39507 
exû±iÚ
;

39508 
½
 = 
	`JS_VALUE_GET_STRING
(
R
);

39509 
r
 = 
½
->
Ën
;

39510 
p
 = 0;

39511 ià(
lim
 == 0)

39512 
dÚe
;

39513 ià(
	`JS_IsUndefšed
(
£·¿tÜ
))

39514 
add_
;

39515 ià(
s
 == 0) {

39516 ià(
r
 != 0)

39517 
add_
;

39518 
dÚe
;

39520 
q
 = 
p
;

39521 
q
 = 
p
; (q +ğ!
r
è<ğ
s
 -„ - !r; q =… = 
e
 +„) {

39522 
e
 = 
	`¡ršg_šdexof
(
¥
, 
½
, 
q
);

39523 ià(
e
 < 0)

39525 
T
 = 
	`js_sub_¡ršg
(
ùx
, 
¥
, 
p
, 
e
);

39526 ià(
	`JS_IsExû±iÚ
(
T
))

39527 
exû±iÚ
;

39528 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
A
, 
ËngthA
++, 
T
, 0) < 0)

39529 
exû±iÚ
;

39530 ià(
ËngthA
 =ğ
lim
)

39531 
dÚe
;

39533 
add_
:

39534 
T
 = 
	`js_sub_¡ršg
(
ùx
, 
¥
, 
p
, 
s
);

39535 ià(
	`JS_IsExû±iÚ
(
T
))

39536 
exû±iÚ
;

39537 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
A
, 
ËngthA
++, 
T
,0 ) < 0)

39538 
exû±iÚ
;

39539 
dÚe
:

39540 
	`JS_F»eV®ue
(
ùx
, 
S
);

39541 
	`JS_F»eV®ue
(
ùx
, 
R
);

39542  
A
;

39544 
exû±iÚ
:

39545 
	`JS_F»eV®ue
(
ùx
, 
A
);

39546 
	`JS_F»eV®ue
(
ùx
, 
S
);

39547 
	`JS_F»eV®ue
(
ùx
, 
R
);

39548  
JS_EXCEPTION
;

39549 
	}
}

39551 
JSV®ue
 
	$js_¡ršg_sub¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39552 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39554 
JSV®ue
 
¡r
, 
»t
;

39555 
a
, 
b
, 
¡¬t
, 
’d
;

39556 
JSSŒšg
 *
p
;

39558 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39559 ià(
	`JS_IsExû±iÚ
(
¡r
))

39560  
¡r
;

39561 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39562 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
a
, 
¬gv
[0], 0, 
p
->
Ën
, 0)) {

39563 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39564  
JS_EXCEPTION
;

39566 
b
 = 
p
->
Ën
;

39567 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

39568 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
b
, 
¬gv
[1], 0, 
p
->
Ën
, 0)) {

39569 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39570  
JS_EXCEPTION
;

39573 ià(
a
 < 
b
) {

39574 
¡¬t
 = 
a
;

39575 
’d
 = 
b
;

39577 
¡¬t
 = 
b
;

39578 
’d
 = 
a
;

39580 
»t
 = 
	`js_sub_¡ršg
(
ùx
, 
p
, 
¡¬t
, 
’d
);

39581 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39582  
»t
;

39583 
	}
}

39585 
JSV®ue
 
	$js_¡ršg_sub¡r
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39586 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39588 
JSV®ue
 
¡r
, 
»t
;

39589 
a
, 
Ën
, 
n
;

39590 
JSSŒšg
 *
p
;

39592 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39593 ià(
	`JS_IsExû±iÚ
(
¡r
))

39594  
¡r
;

39595 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39596 
Ën
 = 
p
->len;

39597 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
a
, 
¬gv
[0], 0, 
Ën
,†en)) {

39598 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39599  
JS_EXCEPTION
;

39601 
n
 = 
Ën
 - 
a
;

39602 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

39603 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
n
, 
¬gv
[1], 0, 
Ën
 - 
a
, 0)) {

39604 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39605  
JS_EXCEPTION
;

39608 
»t
 = 
	`js_sub_¡ršg
(
ùx
, 
p
, 
a
,‡ + 
n
);

39609 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39610  
»t
;

39611 
	}
}

39613 
JSV®ue
 
	$js_¡ršg_¦iû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39614 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39616 
JSV®ue
 
¡r
, 
»t
;

39617 
Ën
, 
¡¬t
, 
’d
;

39618 
JSSŒšg
 *
p
;

39620 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39621 ià(
	`JS_IsExû±iÚ
(
¡r
))

39622  
¡r
;

39623 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39624 
Ën
 = 
p
->len;

39625 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
¡¬t
, 
¬gv
[0], 0, 
Ën
,†en)) {

39626 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39627  
JS_EXCEPTION
;

39629 
’d
 = 
Ën
;

39630 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

39631 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
’d
, 
¬gv
[1], 0, 
Ën
,†en)) {

39632 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39633  
JS_EXCEPTION
;

39636 
»t
 = 
	`js_sub_¡ršg
(
ùx
, 
p
, 
¡¬t
, 
	`max_št
(
’d
, start));

39637 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39638  
»t
;

39639 
	}
}

39641 
JSV®ue
 
	$js_¡ršg_·d
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39642 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
·dEnd
)

39644 
JSV®ue
 
¡r
, 
v
 = 
JS_UNDEFINED
;

39645 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

39646 
JSSŒšg
 *
p
, *
p1
 = 
NULL
;

39647 
n
, 
Ën
, 
c
 = ' ';

39649 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39650 ià(
	`JS_IsExû±iÚ
(
¡r
))

39651 
ç1
;

39652 ià(
	`JS_ToIÁ32S©
(
ùx
, &
n
, 
¬gv
[0]))

39653 
ç2
;

39654 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39655 
Ën
 = 
p
->len;

39656 ià(
Ën
 >ğ
n
)

39657  
¡r
;

39658 ià(
n
 > 
JS_STRING_LEN_MAX
) {

39659 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "stringoo†ong");

39660 
ç2
;

39662 ià(
¬gc
 > 1 && !
	`JS_IsUndefšed
(
¬gv
[1])) {

39663 
v
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[1]);

39664 ià(
	`JS_IsExû±iÚ
(
v
))

39665 
ç2
;

39666 
p1
 = 
	`JS_VALUE_GET_STRING
(
v
);

39667 ià(
p1
->
Ën
 == 0) {

39668 
	`JS_F»eV®ue
(
ùx
, 
v
);

39669  
¡r
;

39671 ià(
p1
->
Ën
 == 1) {

39672 
c
 = 
	`¡ršg_g‘
(
p1
, 0);

39673 
p1
 = 
NULL
;

39676 ià(
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
n
))

39677 
ç3
;

39678 
n
 -ğ
Ën
;

39679 ià(
·dEnd
) {

39680 ià(
	`¡ršg_bufãr_cÚÿt
(
b
, 
p
, 0, 
Ën
))

39681 
ç
;

39683 ià(
p1
) {

39684 
n
 > 0) {

39685 
chunk
 = 
	`mš_št
(
n
, 
p1
->
Ën
);

39686 ià(
	`¡ršg_bufãr_cÚÿt
(
b
, 
p1
, 0, 
chunk
))

39687 
ç
;

39688 
n
 -ğ
chunk
;

39691 ià(
	`¡ršg_bufãr_fl
(
b
, 
c
, 
n
))

39692 
ç
;

39694 ià(!
·dEnd
) {

39695 ià(
	`¡ršg_bufãr_cÚÿt
(
b
, 
p
, 0, 
Ën
))

39696 
ç
;

39698 
	`JS_F»eV®ue
(
ùx
, 
v
);

39699 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39700  
	`¡ršg_bufãr_’d
(
b
);

39702 
ç
:

39703 
	`¡ršg_bufãr_ä“
(
b
);

39704 
ç3
:

39705 
	`JS_F»eV®ue
(
ùx
, 
v
);

39706 
ç2
:

39707 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39708 
ç1
:

39709  
JS_EXCEPTION
;

39710 
	}
}

39712 
JSV®ue
 
	$js_¡ršg_»³©
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39713 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39715 
JSV®ue
 
¡r
;

39716 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

39717 
JSSŒšg
 *
p
;

39718 
sšt64_t
 
v®
;

39719 
n
, 
Ën
;

39721 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39722 ià(
	`JS_IsExû±iÚ
(
¡r
))

39723 
ç
;

39724 ià(
	`JS_ToIÁ64S©
(
ùx
, &
v®
, 
¬gv
[0]))

39725 
ç
;

39726 ià(
v®
 < 0 || val > 2147483647) {

39727 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid„epeat count");

39728 
ç
;

39730 
n
 = 
v®
;

39731 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39732 
Ën
 = 
p
->len;

39733 ià(
Ën
 =ğ0 || 
n
 == 1)

39734  
¡r
;

39735 ià(
v®
 * 
Ën
 > 
JS_STRING_LEN_MAX
) {

39736 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "stringoo†ong");

39737 
ç
;

39739 ià(
	`¡ršg_bufãr_š™2
(
ùx
, 
b
, 
n
 * 
Ën
, 
p
->
is_wide_ch¬
))

39740 
ç
;

39741 ià(
Ën
 == 1) {

39742 
	`¡ršg_bufãr_fl
(
b
, 
	`¡ršg_g‘
(
p
, 0), 
n
);

39744 
n
-- > 0) {

39745 
	`¡ršg_bufãr_cÚÿt
(
b
, 
p
, 0, 
Ën
);

39748 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39749  
	`¡ršg_bufãr_’d
(
b
);

39751 
ç
:

39752 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39753  
JS_EXCEPTION
;

39754 
	}
}

39756 
JSV®ue
 
	$js_¡ršg_Œim
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39757 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

39759 
JSV®ue
 
¡r
, 
»t
;

39760 
a
, 
b
, 
Ën
;

39761 
JSSŒšg
 *
p
;

39763 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39764 ià(
	`JS_IsExû±iÚ
(
¡r
))

39765  
¡r
;

39766 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

39767 
a
 = 0;

39768 
b
 = 
Ën
 = 
p
->len;

39769 ià(
magic
 & 1) {

39770 
a
 < 
Ën
 && 
	`Ìe_is_¥aû
(
	`¡ršg_g‘
(
p
,‡)))

39771 
a
++;

39773 ià(
magic
 & 2) {

39774 
b
 > 
a
 && 
	`Ìe_is_¥aû
(
	`¡ršg_g‘
(
p
, b - 1)))

39775 
b
--;

39777 
»t
 = 
	`js_sub_¡ršg
(
ùx
, 
p
, 
a
, 
b
);

39778 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

39779  
»t
;

39780 
	}
}

39782 
JSV®ue
 
	$js_¡ršg___quÙe
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39783 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39785  
	`JS_ToQuÙedSŒšg
(
ùx
, 
this_v®
);

39786 
	}
}

39789 
	$¡ršg_´evc
(
JSSŒšg
 *
p
, *
pidx
)

39791 
idx
, 
c
, 
c1
;

39793 
idx
 = *
pidx
;

39794 ià(
idx
 <= 0)

39796 
idx
--;

39797 ià(
p
->
is_wide_ch¬
) {

39798 
c
 = 
p
->
u
.
¡r16
[
idx
];

39799 ià(
c
 >ğ0xdc00 && c < 0xe000 && 
idx
 > 0) {

39800 
c1
 = 
p
->
u
.
¡r16
[
idx
 - 1];

39801 ià(
c1
 >= 0xd800 && c1 <= 0xdc00) {

39802 
c
 = (((
c1
 & 0x3ff) << 10) | (c & 0x3ff)) + 0x10000;

39803 
idx
--;

39807 
c
 = 
p
->
u
.
¡r8
[
idx
];

39809 *
pidx
 = 
idx
;

39810  
c
;

39811 
	}
}

39813 
BOOL
 
	$‹¡_fš®_sigma
(
JSSŒšg
 *
p
, 
sigma_pos
)

39815 
k
, 
c1
;

39819 
k
 = 
sigma_pos
;

39821 
c1
 = 
	`¡ršg_´evc
(
p
, &
k
);

39822 ià(!
	`Ìe_is_ÿ£_ignÜabË
(
c1
))

39825 ià(!
	`Ìe_is_ÿ£d
(
c1
))

39826  
FALSE
;

39830 
k
 = 
sigma_pos
 + 1;

39832 ià(
k
 >ğ
p
->
Ën
)

39833  
TRUE
;

39834 
c1
 = 
	`¡ršg_g‘c
(
p
, &
k
);

39835 ià(!
	`Ìe_is_ÿ£_ignÜabË
(
c1
))

39838  !
	`Ìe_is_ÿ£d
(
c1
);

39839 
	}
}

39841 
JSV®ue
 
	$js_¡ršg_loÿËCom·»
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39842 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39844 
JSV®ue
 
a
, 
b
;

39845 
cmp
;

39847 
a
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39848 ià(
	`JS_IsExû±iÚ
(
a
))

39849  
JS_EXCEPTION
;

39850 
b
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

39851 ià(
	`JS_IsExû±iÚ
(
b
)) {

39852 
	`JS_F»eV®ue
(
ùx
, 
a
);

39853  
JS_EXCEPTION
;

39855 
cmp
 = 
	`js_¡ršg_com·»
(
ùx
, 
	`JS_VALUE_GET_STRING
(
a
), JS_VALUE_GET_STRING(
b
));

39856 
	`JS_F»eV®ue
(
ùx
, 
a
);

39857 
	`JS_F»eV®ue
(
ùx
, 
b
);

39858  
	`JS_NewIÁ32
(
ùx
, 
cmp
);

39859 
	}
}

39861 
JSV®ue
 
	$js_¡ršg_toLow”Ca£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39862 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
to_low”
)

39864 
JSV®ue
 
v®
;

39865 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

39866 
JSSŒšg
 *
p
;

39867 
i
, 
c
, 
j
, 
l
;

39868 
ušt32_t
 
»s
[
LRE_CC_RES_LEN_MAX
];

39870 
v®
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39871 ià(
	`JS_IsExû±iÚ
(
v®
))

39872  
v®
;

39873 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

39874 ià(
p
->
Ën
 == 0)

39875  
v®
;

39876 ià(
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
p
->
Ën
))

39877 
ç
;

39878 
i
 = 0; i < 
p
->
Ën
;) {

39879 
c
 = 
	`¡ršg_g‘c
(
p
, &
i
);

39880 ià(
c
 =ğ0x3a3 && 
to_low”
 && 
	`‹¡_fš®_sigma
(
p
, 
i
 - 1)) {

39881 
»s
[0] = 0x3c2;

39882 
l
 = 1;

39884 
l
 = 
	`Ìe_ÿ£_cÚv
(
»s
, 
c
, 
to_low”
);

39886 
j
 = 0; j < 
l
; j++) {

39887 ià(
	`¡ršg_bufãr_putc
(
b
, 
»s
[
j
]))

39888 
ç
;

39891 
	`JS_F»eV®ue
(
ùx
, 
v®
);

39892  
	`¡ršg_bufãr_’d
(
b
);

39893 
ç
:

39894 
	`JS_F»eV®ue
(
ùx
, 
v®
);

39895 
	`¡ršg_bufãr_ä“
(
b
);

39896  
JS_EXCEPTION
;

39897 
	}
}

39899 #ifdeà
CONFIG_ALL_UNICODE


39902 
	$JS_ToUTF32SŒšg
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 **
pbuf
, 
JSV®ueCÚ¡
 
v®1
)

39904 
JSV®ue
 
v®
;

39905 
JSSŒšg
 *
p
;

39906 
ušt32_t
 *
buf
;

39907 
i
, 
j
, 
Ën
;

39909 
v®
 = 
	`JS_ToSŒšg
(
ùx
, 
v®1
);

39910 ià(
	`JS_IsExû±iÚ
(
v®
))

39912 
p
 = 
	`JS_VALUE_GET_STRING
(
v®
);

39913 
Ën
 = 
p
->len;

39915 
buf
 = 
	`js_m®loc
(
ùx
, (buf[0]è* 
	`max_št
(
Ën
, 1));

39916 ià(!
buf
) {

39917 
	`JS_F»eV®ue
(
ùx
, 
v®
);

39918 
ç
;

39920 
i
 = 
j
 = 0; i < 
Ën
;)

39921 
buf
[
j
++] = 
	`¡ršg_g‘c
(
p
, &
i
);

39922 
	`JS_F»eV®ue
(
ùx
, 
v®
);

39923 *
pbuf
 = 
buf
;

39924  
j
;

39925 
ç
:

39926 *
pbuf
 = 
NULL
;

39928 
	}
}

39930 
JSV®ue
 
	$JS_NewUTF32SŒšg
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt32_t
 *
buf
, 
Ën
)

39932 
i
;

39933 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

39934 ià(
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
Ën
))

39935  
JS_EXCEPTION
;

39936 
i
 = 0; i < 
Ën
; i++) {

39937 ià(
	`¡ršg_bufãr_putc
(
b
, 
buf
[
i
]))

39938 
ç
;

39940  
	`¡ršg_bufãr_’d
(
b
);

39941 
ç
:

39942 
	`¡ršg_bufãr_ä“
(
b
);

39943  
JS_EXCEPTION
;

39944 
	}
}

39946 
JSV®ue
 
	$js_¡ršg_nÜm®ize
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

39947 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

39949 cÚ¡ *
fÜm
, *
p
;

39950 
size_t
 
fÜm_Ën
;

39951 
is_com·t
, 
buf_Ën
, 
out_Ën
;

39952 
UnicodeNÜm®iz©iÚEnum
 
n_ty³
;

39953 
JSV®ue
 
v®
;

39954 
ušt32_t
 *
buf
, *
out_buf
;

39956 
v®
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

39957 ià(
	`JS_IsExû±iÚ
(
v®
))

39958  
v®
;

39959 
buf_Ën
 = 
	`JS_ToUTF32SŒšg
(
ùx
, &
buf
, 
v®
);

39960 
	`JS_F»eV®ue
(
ùx
, 
v®
);

39961 ià(
buf_Ën
 < 0)

39962  
JS_EXCEPTION
;

39964 ià(
¬gc
 =ğ0 || 
	`JS_IsUndefšed
(
¬gv
[0])) {

39965 
n_ty³
 = 
UNICODE_NFC
;

39967 
fÜm
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
fÜm_Ën
, 
¬gv
[0]);

39968 ià(!
fÜm
)

39969 
ç1
;

39970 
p
 = 
fÜm
;

39971 ià(
p
[0] != 'N' ||…[1] != 'F')

39972 
bad_fÜm
;

39973 
p
 += 2;

39974 
is_com·t
 = 
FALSE
;

39975 ià(*
p
 == 'K') {

39976 
is_com·t
 = 
TRUE
;

39977 
p
++;

39979 ià(*
p
 == 'C' || *p == 'D') {

39980 
n_ty³
 = 
UNICODE_NFC
 + 
is_com·t
 * 2 + (*
p
 - 'C');

39981 ià((
p
 + 1 - 
fÜm
è!ğ
fÜm_Ën
)

39982 
bad_fÜm
;

39984 
bad_fÜm
:

39985 
	`JS_F»eCSŒšg
(
ùx
, 
fÜm
);

39986 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "bad‚ormalization form");

39987 
ç1
:

39988 
	`js_ä“
(
ùx
, 
buf
);

39989  
JS_EXCEPTION
;

39991 
	`JS_F»eCSŒšg
(
ùx
, 
fÜm
);

39994 
out_Ën
 = 
	`unicode_nÜm®ize
(&
out_buf
, 
buf
, 
buf_Ën
, 
n_ty³
,

39995 
ùx
->
¹
, (
DynBufR—ÎocFunc
 *)
js_»®loc_¹
);

39996 
	`js_ä“
(
ùx
, 
buf
);

39997 ià(
out_Ën
 < 0)

39998  
JS_EXCEPTION
;

39999 
v®
 = 
	`JS_NewUTF32SŒšg
(
ùx
, 
out_buf
, 
out_Ën
);

40000 
	`js_ä“
(
ùx
, 
out_buf
);

40001  
v®
;

40002 
	}
}

40006 
JSV®ue
 
	$js_¡ršg_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40007 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40009  
	`js_thisSŒšgV®ue
(
ùx
, 
this_v®
);

40010 
	}
}

40013 
JSV®ue
 
	$js_¡ršg___toSŒšgCheckObjeù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40014 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40016  
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
¬gv
[0]);

40017 
	}
}

40019 
JSV®ue
 
	$js_¡ršg___toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40020 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40022  
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

40023 
	}
}

40025 
JSV®ue
 
	$js_¡ršg___advªûSŒšgIndex
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡


40026 
this_v®
,

40027 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40029 
JSV®ue
 
¡r
;

40030 
idx
;

40031 
BOOL
 
is_unicode
;

40032 
JSSŒšg
 *
p
;

40034 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

40035 ià(
	`JS_IsExû±iÚ
(
¡r
))

40036  
¡r
;

40037 ià(
	`JS_ToIÁ32S©
(
ùx
, &
idx
, 
¬gv
[1])) {

40038 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

40039  
JS_EXCEPTION
;

40041 
is_unicode
 = 
	`JS_ToBoŞ
(
ùx
, 
¬gv
[2]);

40042 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

40043 ià(!
is_unicode
 || ()
idx
 >ğ
p
->
Ën
 || !p->
is_wide_ch¬
) {

40044 
idx
++;

40046 
	`¡ršg_g‘c
(
p
, &
idx
);

40048 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

40049  
	`JS_NewIÁ32
(
ùx
, 
idx
);

40050 
	}
}

40055 
JSV®ue
 
	$js_¡ršg_™”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40056 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

40057 
BOOL
 *
pdÚe
, 
magic
)

40059 
JSA¼ayI‹¿tÜD©a
 *
™
;

40060 
ušt32_t
 
idx
, 
c
, 
¡¬t
;

40061 
JSSŒšg
 *
p
;

40063 
™
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_STRING_ITERATOR
);

40064 ià(!
™
) {

40065 *
pdÚe
 = 
FALSE
;

40066  
JS_EXCEPTION
;

40068 ià(
	`JS_IsUndefšed
(
™
->
obj
))

40069 
dÚe
;

40070 
p
 = 
	`JS_VALUE_GET_STRING
(
™
->
obj
);

40071 
idx
 = 
™
->idx;

40072 ià(
idx
 >ğ
p
->
Ën
) {

40073 
	`JS_F»eV®ue
(
ùx
, 
™
->
obj
);

40074 
™
->
obj
 = 
JS_UNDEFINED
;

40075 
dÚe
:

40076 *
pdÚe
 = 
TRUE
;

40077  
JS_UNDEFINED
;

40080 
¡¬t
 = 
idx
;

40081 
c
 = 
	`¡ršg_g‘c
(
p
, (*)&
idx
);

40082 
™
->
idx
 = idx;

40083 *
pdÚe
 = 
FALSE
;

40084 ià(
c
 <= 0xffff) {

40085  
	`js_Ãw_¡ršg_ch¬
(
ùx
, 
c
);

40087  
	`js_Ãw_¡ršg16
(
ùx
, 
p
->
u
.
¡r16
 + 
¡¬t
, 2);

40089 
	}
}

40093 
	mmagic_¡ršg_ªchÜ
,

40094 
	mmagic_¡ršg_big
,

40095 
	mmagic_¡ršg_blšk
,

40096 
	mmagic_¡ršg_bŞd
,

40097 
	mmagic_¡ršg_fixed
,

40098 
	mmagic_¡ršg_fÚtcŞÜ
,

40099 
	mmagic_¡ršg_fÚtsize
,

40100 
	mmagic_¡ršg_™®ics
,

40101 
	mmagic_¡ršg_lšk
,

40102 
	mmagic_¡ršg_sm®l
,

40103 
	mmagic_¡ršg_¡rike
,

40104 
	mmagic_¡ršg_sub
,

40105 
	mmagic_¡ršg_sup
,

40108 
JSV®ue
 
	$js_¡ršg_C»©eHTML
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40109 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

40111 
JSV®ue
 
¡r
;

40112 cÚ¡ 
JSSŒšg
 *
p
;

40113 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

40114 ¡ruù { cÚ¡ *
g
, *
©Œ
; } cÚ¡ 
defs
[] = {

40115 { "a", "Çme" }, { "big", 
NULL
 }, { "blink", NULL }, { "b", NULL },

40116 { "‰", 
NULL
 }, { "font", "color" }, { "font", "size" }, { "i", NULL },

40117 { "a", "h»f" }, { "sm®l", 
NULL
 }, { "strike", NULL },

40118 { "sub", 
NULL
 }, { "sup", NULL },

40121 
¡r
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
this_v®
);

40122 ià(
	`JS_IsExû±iÚ
(
¡r
))

40123  
JS_EXCEPTION
;

40124 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 7);

40125 
	`¡ršg_bufãr_putc8
(
b
, '<');

40126 
	`¡ršg_bufãr_puts8
(
b
, 
defs
[
magic
].
g
);

40127 ià(
defs
[
magic
].
©Œ
) {

40129 
JSV®ue
 
v®ue
;

40130 
i
;

40132 
	`¡ršg_bufãr_putc8
(
b
, ' ');

40133 
	`¡ršg_bufãr_puts8
(
b
, 
defs
[
magic
].
©Œ
);

40134 
	`¡ršg_bufãr_puts8
(
b
, "=\"");

40135 
v®ue
 = 
	`JS_ToSŒšgCheckObjeù
(
ùx
, 
¬gv
[0]);

40136 ià(
	`JS_IsExû±iÚ
(
v®ue
)) {

40137 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

40138 
	`¡ršg_bufãr_ä“
(
b
);

40139  
JS_EXCEPTION
;

40141 
p
 = 
	`JS_VALUE_GET_STRING
(
v®ue
);

40142 
i
 = 0; i < 
p
->
Ën
; i++) {

40143 
c
 = 
	`¡ršg_g‘
(
p
, 
i
);

40144 ià(
c
 == '"') {

40145 
	`¡ršg_bufãr_puts8
(
b
, "&quot;");

40147 
	`¡ršg_bufãr_putc16
(
b
, 
c
);

40150 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

40151 
	`¡ršg_bufãr_putc8
(
b
, '\"');

40154 
	`¡ršg_bufãr_putc8
(
b
, '>');

40155 
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
¡r
);

40156 
	`¡ršg_bufãr_puts8
(
b
, "</");

40157 
	`¡ršg_bufãr_puts8
(
b
, 
defs
[
magic
].
g
);

40158 
	`¡ršg_bufãr_putc8
(
b
, '>');

40159  
	`¡ršg_bufãr_’d
(
b
);

40160 
	}
}

40162 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡ršg_funcs
[] = {

40163 
JS_CFUNC_DEF
("äomCh¬Code", 1, 
js_¡ršg_äomCh¬Code
 ),

40164 
JS_CFUNC_DEF
("äomCodePošt", 1, 
js_¡ršg_äomCodePošt
 ),

40165 
JS_CFUNC_DEF
("¿w", 1, 
js_¡ršg_¿w
 ),

40173 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡ršg_´Ùo_funcs
[] = {

40174 
JS_PROP_INT32_DEF
("Ëngth", 0, 
JS_PROP_CONFIGURABLE
 ),

40175 
JS_CFUNC_DEF
("ch¬CodeAt", 1, 
js_¡ršg_ch¬CodeAt
 ),

40176 
JS_CFUNC_DEF
("ch¬At", 1, 
js_¡ršg_ch¬At
 ),

40177 
JS_CFUNC_DEF
("cÚÿt", 1, 
js_¡ršg_cÚÿt
 ),

40178 
JS_CFUNC_DEF
("codePoštAt", 1, 
js_¡ršg_codePoštAt
 ),

40179 
JS_CFUNC_MAGIC_DEF
("šdexOf", 1, 
js_¡ršg_šdexOf
, 0 ),

40180 
JS_CFUNC_MAGIC_DEF
("Ï¡IndexOf", 1, 
js_¡ršg_šdexOf
, 1 ),

40181 
JS_CFUNC_MAGIC_DEF
("šşudes", 1, 
js_¡ršg_šşudes
, 0 ),

40182 
JS_CFUNC_MAGIC_DEF
("’dsW™h", 1, 
js_¡ršg_šşudes
, 2 ),

40183 
JS_CFUNC_MAGIC_DEF
("¡¬tsW™h", 1, 
js_¡ršg_šşudes
, 1 ),

40184 
JS_CFUNC_MAGIC_DEF
("m©ch", 1, 
js_¡ršg_m©ch
, 
JS_ATOM_SymbŞ_m©ch
 ),

40185 
JS_CFUNC_MAGIC_DEF
("m©chAÎ", 1, 
js_¡ršg_m©ch
, 
JS_ATOM_SymbŞ_m©chAÎ
 ),

40186 
JS_CFUNC_MAGIC_DEF
("£¬ch", 1, 
js_¡ršg_m©ch
, 
JS_ATOM_SymbŞ_£¬ch
 ),

40187 
JS_CFUNC_DEF
("¥l™", 2, 
js_¡ršg_¥l™
 ),

40188 
JS_CFUNC_DEF
("sub¡ršg", 2, 
js_¡ršg_sub¡ršg
 ),

40189 
JS_CFUNC_DEF
("sub¡r", 2, 
js_¡ršg_sub¡r
 ),

40190 
JS_CFUNC_DEF
("¦iû", 2, 
js_¡ršg_¦iû
 ),

40191 
JS_CFUNC_DEF
("»³©", 1, 
js_¡ršg_»³©
 ),

40192 
JS_CFUNC_MAGIC_DEF
("»¶aû", 2, 
js_¡ršg_»¶aû
, 0 ),

40193 
JS_CFUNC_MAGIC_DEF
("»¶aûAÎ", 2, 
js_¡ršg_»¶aû
, 1 ),

40194 
JS_CFUNC_MAGIC_DEF
("·dEnd", 1, 
js_¡ršg_·d
, 1 ),

40195 
JS_CFUNC_MAGIC_DEF
("·dS¹", 1, 
js_¡ršg_·d
, 0 ),

40196 
JS_CFUNC_MAGIC_DEF
("Œim", 0, 
js_¡ršg_Œim
, 3 ),

40197 
JS_CFUNC_MAGIC_DEF
("ŒimEnd", 0, 
js_¡ršg_Œim
, 2 ),

40198 
JS_ALIAS_DEF
("trimRight", "trimEnd" ),

40199 
JS_CFUNC_MAGIC_DEF
("ŒimS¹", 0, 
js_¡ršg_Œim
, 1 ),

40200 
JS_ALIAS_DEF
("trimLeft", "trimStart" ),

40201 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_¡ršg_toSŒšg
 ),

40202 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_¡ršg_toSŒšg
 ),

40203 
JS_CFUNC_DEF
("__quÙe", 1, 
js_¡ršg___quÙe
 ),

40204 
JS_CFUNC_DEF
("loÿËCom·»", 1, 
js_¡ršg_loÿËCom·»
 ),

40205 
JS_CFUNC_MAGIC_DEF
("toLow”Ca£", 0, 
js_¡ršg_toLow”Ca£
, 1 ),

40206 
JS_CFUNC_MAGIC_DEF
("toUµ”Ca£", 0, 
js_¡ršg_toLow”Ca£
, 0 ),

40207 
JS_CFUNC_MAGIC_DEF
("toLoÿËLow”Ca£", 0, 
js_¡ršg_toLow”Ca£
, 1 ),

40208 
JS_CFUNC_MAGIC_DEF
("toLoÿËUµ”Ca£", 0, 
js_¡ršg_toLow”Ca£
, 0 ),

40209 
JS_CFUNC_MAGIC_DEF
("[SymbŞ.™”©Ü]", 0, 
js_ü—‹_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_VALUE
 | 4 ),

40211 
JS_CFUNC_MAGIC_DEF
("ªchÜ", 1, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_ªchÜ
 ),

40212 
JS_CFUNC_MAGIC_DEF
("big", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_big
 ),

40213 
JS_CFUNC_MAGIC_DEF
("blšk", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_blšk
 ),

40214 
JS_CFUNC_MAGIC_DEF
("bŞd", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_bŞd
 ),

40215 
JS_CFUNC_MAGIC_DEF
("fixed", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_fixed
 ),

40216 
JS_CFUNC_MAGIC_DEF
("fÚtcŞÜ", 1, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_fÚtcŞÜ
 ),

40217 
JS_CFUNC_MAGIC_DEF
("fÚtsize", 1, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_fÚtsize
 ),

40218 
JS_CFUNC_MAGIC_DEF
("™®ics", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_™®ics
 ),

40219 
JS_CFUNC_MAGIC_DEF
("lšk", 1, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_lšk
 ),

40220 
JS_CFUNC_MAGIC_DEF
("sm®l", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_sm®l
 ),

40221 
JS_CFUNC_MAGIC_DEF
("¡rike", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_¡rike
 ),

40222 
JS_CFUNC_MAGIC_DEF
("sub", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_sub
 ),

40223 
JS_CFUNC_MAGIC_DEF
("sup", 0, 
js_¡ršg_C»©eHTML
, 
magic_¡ršg_sup
 ),

40226 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡ršg_™”©Ü_´Ùo_funcs
[] = {

40227 
JS_ITERATOR_NEXT_DEF
("Ãxt", 0, 
js_¡ršg_™”©Ü_Ãxt
, 0 ),

40228 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "SŒšg I‹¿tÜ", 
JS_PROP_CONFIGURABLE
 ),

40231 #ifdeà
CONFIG_ALL_UNICODE


40232 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¡ršg_´Ùo_nÜm®ize
[] = {

40233 
JS_CFUNC_DEF
("nÜm®ize", 0, 
js_¡ršg_nÜm®ize
 ),

40237 
	$JS_AddIÁršsicSŒšgNÜm®ize
(
JSCÚ‹xt
 *
ùx
)

40239 #ifdeà
CONFIG_ALL_UNICODE


40240 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_STRING
], 
js_¡ršg_´Ùo_nÜm®ize
,

40241 
	`couÁof
(
js_¡ršg_´Ùo_nÜm®ize
));

40243 
	}
}

40248 
	$js_fmš
(
a
, 
b
)

40250 ià(
a
 =ğ0 && 
b
 == 0) {

40251 
JSFlßt64UniÚ
 
a1
, 
b1
;

40252 
a1
.
d
 = 
a
;

40253 
b1
.
d
 = 
b
;

40254 
a1
.
u64
 |ğ
b1
.u64;

40255  
a1
.
d
;

40257  
	`fmš
(
a
, 
b
);

40259 
	}
}

40262 
	$js_fmax
(
a
, 
b
)

40264 ià(
a
 =ğ0 && 
b
 == 0) {

40265 
JSFlßt64UniÚ
 
a1
, 
b1
;

40266 
a1
.
d
 = 
a
;

40267 
b1
.
d
 = 
b
;

40268 
a1
.
u64
 &ğ
b1
.u64;

40269  
a1
.
d
;

40271  
	`fmax
(
a
, 
b
);

40273 
	}
}

40275 
JSV®ue
 
	$js_m©h_mš_max
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40276 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

40278 
BOOL
 
is_max
 = 
magic
;

40279 
r
, 
a
;

40280 
i
;

40281 
ušt32_t
 
g
;

40283 ià(
	`uÆik–y
(
¬gc
 == 0)) {

40284  
	`__JS_NewFlßt64
(
ùx
, 
is_max
 ? -1.0 / 0.0 : 1.0 / 0.0);

40287 
g
 = 
	`JS_VALUE_GET_TAG
(
¬gv
[0]);

40288 ià(
g
 =ğ
JS_TAG_INT
) {

40289 
a1
, 
r1
 = 
	`JS_VALUE_GET_INT
(
¬gv
[0]);

40290 
i
 = 1; i < 
¬gc
; i++) {

40291 
g
 = 
	`JS_VALUE_GET_TAG
(
¬gv
[
i
]);

40292 ià(
g
 !ğ
JS_TAG_INT
) {

40293 
r
 = 
r1
;

40294 
g’”ic_ÿ£
;

40296 
a1
 = 
	`JS_VALUE_GET_INT
(
¬gv
[
i
]);

40297 ià(
is_max
)

40298 
r1
 = 
	`max_št
Ô1, 
a1
);

40300 
r1
 = 
	`mš_št
Ô1, 
a1
);

40303  
	`JS_NewIÁ32
(
ùx
, 
r1
);

40305 ià(
	`JS_ToFlßt64
(
ùx
, &
r
, 
¬gv
[0]))

40306  
JS_EXCEPTION
;

40307 
i
 = 1;

40308 
g’”ic_ÿ£
:

40309 
i
 < 
¬gc
) {

40310 ià(
	`JS_ToFlßt64
(
ùx
, &
a
, 
¬gv
[
i
]))

40311  
JS_EXCEPTION
;

40312 ià(!
	`i¢ª
(
r
)) {

40313 ià(
	`i¢ª
(
a
)) {

40314 
r
 = 
a
;

40316 ià(
is_max
)

40317 
r
 = 
	`js_fmax
Ô, 
a
);

40319 
r
 = 
	`js_fmš
Ô, 
a
);

40322 
i
++;

40324  
	`JS_NewFlßt64
(
ùx
, 
r
);

40326 
	}
}

40328 
	$js_m©h_sign
(
a
)

40330 ià(
	`i¢ª
(
a
) ||‡ == 0.0)

40331  
a
;

40332 ià(
a
 < 0)

40336 
	}
}

40338 
	$js_m©h_round
(
a
)

40340 
JSFlßt64UniÚ
 
u
;

40341 
ušt64_t
 
äac_mask
, 
Úe
;

40342 
e
, 
s
;

40344 
u
.
d
 = 
a
;

40345 
e
 = (
u
.
u64
 >> 52) & 0x7ff;

40346 ià(
e
 < 1023) {

40348 ià(
e
 =ğ(1023 - 1è&& 
u
.
u64
 != 0xbfe0000000000000) {

40350 
u
.
u64
 = (u.u64 & ((
ušt64_t
)1 << 63)) | ((uint64_t)1023 << 52);

40353 
u
.
u64
 &ğ(
ušt64_t
)1 << 63;

40355 } ià(
e
 < (1023 + 52)) {

40356 
s
 = 
u
.
u64
 >> 63;

40357 
Úe
 = (
ušt64_t
)1 << (52 - (
e
 - 1023));

40358 
äac_mask
 = 
Úe
 - 1;

40359 
u
.
u64
 +ğ(
Úe
 >> 1è- 
s
;

40360 
u
.
u64
 &ğ~
äac_mask
;

40363  
u
.
d
;

40364 
	}
}

40366 
JSV®ue
 
	$js_m©h_hypÙ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40367 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40369 
r
, 
a
, 
b
;

40370 
i
;

40372 ià(
¬gc
 == 2) {

40374 ià(
	`JS_ToFlßt64
(
ùx
, &
a
, 
¬gv
[0]))

40375  
JS_EXCEPTION
;

40376 ià(
	`JS_ToFlßt64
(
ùx
, &
b
, 
¬gv
[1]))

40377  
JS_EXCEPTION
;

40378 
r
 = 
	`hypÙ
(
a
, 
b
);

40379 } ià(
¬gc
 == 0) {

40380 
r
 = 0;

40382 *
b
, 
a_max
;

40383 
b
 = 
	`js_m®loc
(
ùx
, Ñab[0]è* 
¬gc
);

40384 ià(!
b
)

40385  
JS_EXCEPTION
;

40387 
a_max
 = 0;

40388 
i
 = 0; i < 
¬gc
; i++) {

40389 ià(
	`JS_ToFlßt64
(
ùx
, &
a
, 
¬gv
[
i
])) {

40390 
	`js_ä“
(
ùx
, 
b
);

40391  
JS_EXCEPTION
;

40393 
a
 = 
	`çbs
(a);

40394 
b
[
i
] = 
a
;

40395 ià(
a
 > 
a_max
)

40396 
a_max
 = 
a
;

40398 ià(
a_max
 =ğ0 || !
	`isfš™e
(a_max)) {

40399 
r
 = 
a_max
;

40401 
r
 = 0;

40402 
i
 = 0; i < 
¬gc
; i++) {

40403 
a
 = 
b
[
i
] / 
a_max
;

40404 
r
 +ğ
a
 *‡;

40406 
r
 = 
a_max
 * 
	`sq¹
(r);

40408 
	`js_ä“
(
ùx
, 
b
);

40410  
	`JS_NewFlßt64
(
ùx
, 
r
);

40411 
	}
}

40413 
	$js_m©h_äound
(
a
)

40415  ()
a
;

40416 
	}
}

40418 
JSV®ue
 
	$js_m©h_imul
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40419 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40421 
a
, 
b
;

40423 ià(
	`JS_ToIÁ32
(
ùx
, &
a
, 
¬gv
[0]))

40424  
JS_EXCEPTION
;

40425 ià(
	`JS_ToIÁ32
(
ùx
, &
b
, 
¬gv
[1]))

40426  
JS_EXCEPTION
;

40428  
	`JS_NewIÁ32
(
ùx
, 
a
 * 
b
);

40429 
	}
}

40431 
JSV®ue
 
	$js_m©h_şz32
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40432 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40434 
ušt32_t
 
a
, 
r
;

40436 ià(
	`JS_ToUšt32
(
ùx
, &
a
, 
¬gv
[0]))

40437  
JS_EXCEPTION
;

40438 ià(
a
 == 0)

40439 
r
 = 32;

40441 
r
 = 
	`şz32
(
a
);

40442  
	`JS_NewIÁ32
(
ùx
, 
r
);

40443 
	}
}

40446 
ušt64_t
 
	$xÜshiá64¡¬
(
ušt64_t
 *
p¡©e
)

40448 
ušt64_t
 
x
;

40449 
x
 = *
p¡©e
;

40450 
x
 ^= x >> 12;

40451 
x
 ^= x << 25;

40452 
x
 ^= x >> 27;

40453 *
p¡©e
 = 
x
;

40454  
x
 * 0x2545F4914F6CDD1D;

40455 
	}
}

40457 
	$js_¿ndom_š™
(
JSCÚ‹xt
 *
ùx
)

40459 
timev®
 
tv
;

40460 
	`g‘timeofday
(&
tv
, 
NULL
);

40461 
ùx
->
¿ndom_¡©e
 = ((
sšt64_t
)
tv
.
tv_£c
 * 1000000è+v.
tv_u£c
;

40463 ià(
ùx
->
¿ndom_¡©e
 == 0)

40464 
ùx
->
¿ndom_¡©e
 = 1;

40465 
	}
}

40467 
JSV®ue
 
	$js_m©h_¿ndom
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40468 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40470 
JSFlßt64UniÚ
 
u
;

40471 
ušt64_t
 
v
;

40473 
v
 = 
	`xÜshiá64¡¬
(&
ùx
->
¿ndom_¡©e
);

40475 
u
.
u64
 = ((
ušt64_t
)0x3fà<< 52è| (
v
 >> 12);

40476  
	`__JS_NewFlßt64
(
ùx
, 
u
.
d
 - 1.0);

40477 
	}
}

40479 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_m©h_funcs
[] = {

40480 
JS_CFUNC_MAGIC_DEF
("mš", 2, 
js_m©h_mš_max
, 0 ),

40481 
JS_CFUNC_MAGIC_DEF
("max", 2, 
js_m©h_mš_max
, 1 ),

40482 
JS_CFUNC_SPECIAL_DEF
("abs", 1, 
f_f
, 
çbs
 ),

40483 
JS_CFUNC_SPECIAL_DEF
("æoÜ", 1, 
f_f
, 
æoÜ
 ),

40484 
JS_CFUNC_SPECIAL_DEF
("û", 1, 
f_f
, 
û
 ),

40485 
JS_CFUNC_SPECIAL_DEF
("round", 1, 
f_f
, 
js_m©h_round
 ),

40486 
JS_CFUNC_SPECIAL_DEF
("sq¹", 1, 
f_f
, 
sq¹
 ),

40488 
JS_CFUNC_SPECIAL_DEF
("acos", 1, 
f_f
, 
acos
 ),

40489 
JS_CFUNC_SPECIAL_DEF
("asš", 1, 
f_f
, 
asš
 ),

40490 
JS_CFUNC_SPECIAL_DEF
("©ª", 1, 
f_f
, 
©ª
 ),

40491 
JS_CFUNC_SPECIAL_DEF
("©ª2", 2, 
f_f_f
, 
©ª2
 ),

40492 
JS_CFUNC_SPECIAL_DEF
("cos", 1, 
f_f
, 
cos
 ),

40493 
JS_CFUNC_SPECIAL_DEF
("exp", 1, 
f_f
, 
exp
 ),

40494 
JS_CFUNC_SPECIAL_DEF
("log", 1, 
f_f
, 
log
 ),

40495 
JS_CFUNC_SPECIAL_DEF
("pow", 2, 
f_f_f
, 
js_pow
 ),

40496 
JS_CFUNC_SPECIAL_DEF
("sš", 1, 
f_f
, 
sš
 ),

40497 
JS_CFUNC_SPECIAL_DEF
("n", 1, 
f_f
, 
n
 ),

40499 
JS_CFUNC_SPECIAL_DEF
("Œunc", 1, 
f_f
, 
Œunc
 ),

40500 
JS_CFUNC_SPECIAL_DEF
("sign", 1, 
f_f
, 
js_m©h_sign
 ),

40501 
JS_CFUNC_SPECIAL_DEF
("cosh", 1, 
f_f
, 
cosh
 ),

40502 
JS_CFUNC_SPECIAL_DEF
("sšh", 1, 
f_f
, 
sšh
 ),

40503 
JS_CFUNC_SPECIAL_DEF
("nh", 1, 
f_f
, 
nh
 ),

40504 
JS_CFUNC_SPECIAL_DEF
("acosh", 1, 
f_f
, 
acosh
 ),

40505 
JS_CFUNC_SPECIAL_DEF
("asšh", 1, 
f_f
, 
asšh
 ),

40506 
JS_CFUNC_SPECIAL_DEF
("©ªh", 1, 
f_f
, 
©ªh
 ),

40507 
JS_CFUNC_SPECIAL_DEF
("expm1", 1, 
f_f
, 
expm1
 ),

40508 
JS_CFUNC_SPECIAL_DEF
("log1p", 1, 
f_f
, 
log1p
 ),

40509 
JS_CFUNC_SPECIAL_DEF
("log2", 1, 
f_f
, 
log2
 ),

40510 
JS_CFUNC_SPECIAL_DEF
("log10", 1, 
f_f
, 
log10
 ),

40511 
JS_CFUNC_SPECIAL_DEF
("cb¹", 1, 
f_f
, 
cb¹
 ),

40512 
JS_CFUNC_DEF
("hypÙ", 2, 
js_m©h_hypÙ
 ),

40513 
JS_CFUNC_DEF
("¿ndom", 0, 
js_m©h_¿ndom
 ),

40514 
JS_CFUNC_SPECIAL_DEF
("äound", 1, 
f_f
, 
js_m©h_äound
 ),

40515 
JS_CFUNC_DEF
("imul", 2, 
js_m©h_imul
 ),

40516 
JS_CFUNC_DEF
("şz32", 1, 
js_m©h_şz32
 ),

40517 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "M©h", 
JS_PROP_CONFIGURABLE
 ),

40518 
JS_PROP_DOUBLE_DEF
("E", 2.718281828459045, 0 ),

40519 
JS_PROP_DOUBLE_DEF
("LN10", 2.302585092994046, 0 ),

40520 
JS_PROP_DOUBLE_DEF
("LN2", 0.6931471805599453, 0 ),

40521 
JS_PROP_DOUBLE_DEF
("LOG2E", 1.4426950408889634, 0 ),

40522 
JS_PROP_DOUBLE_DEF
("LOG10E", 0.4342944819032518, 0 ),

40523 
JS_PROP_DOUBLE_DEF
("PI", 3.141592653589793, 0 ),

40524 
JS_PROP_DOUBLE_DEF
("SQRT1_2", 0.7071067811865476, 0 ),

40525 
JS_PROP_DOUBLE_DEF
("SQRT2", 1.4142135623730951, 0 ),

40528 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_m©h_obj
[] = {

40529 
JS_OBJECT_DEF
("M©h", 
js_m©h_funcs
, 
couÁof
(js_m©h_funcs), 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 ),

40536 
JSV®ue
 
	$js___d©e_now
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40537 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40539 
št64_t
 
d
;

40540 
timev®
 
tv
;

40541 
	`g‘timeofday
(&
tv
, 
NULL
);

40542 
d
 = (
št64_t
)
tv
.
tv_£c
 * 1000 + (tv.
tv_u£c
 / 1000);

40543  
	`JS_NewIÁ64
(
ùx
, 
d
);

40544 
	}
}

40548 
JSV®ue
 
	$js___d©e_şock
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40549 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40551 
sšt64_t
 
d
;

40552 
timev®
 
tv
;

40553 
	`g‘timeofday
(&
tv
, 
NULL
);

40554 
d
 = (
sšt64_t
)
tv
.
tv_£c
 * 1000000 +v.
tv_u£c
;

40555  
	`JS_NewIÁ64
(
ùx
, 
d
);

40556 
	}
}

40560 
	$g‘TimezÚeOff£t
(
št64_t
 
time
) {

40561 #ià
	`defšed
(
_WIN32
)

40565 
time_t
 
ti
;

40566 
tm
m;

40568 
time
 /= 1000;

40569 ià((
time_t
) == 4) {

40575 ià((
time_t
)-1 < 0) {

40576 ià(
time
 < 
INT32_MIN
) {

40577 
time
 = 
INT32_MIN
;

40578 } ià(
time
 > 
INT32_MAX
) {

40579 
time
 = 
INT32_MAX
;

40582 ià(
time
 < 0) {

40583 
time
 = 0;

40584 } ià(
time
 > 
UINT32_MAX
) {

40585 
time
 = 
UINT32_MAX
;

40589 
ti
 = 
time
;

40590 
	`loÿÉime_r
(&
ti
, &
tm
);

40591  -
tm
.
tm_gmtoff
 / 60;

40593 
	}
}

40596 
JSV®ue
 
	$js___d©e_g‘TimezÚeOff£t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40597 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40599 
dd
;

40601 ià(
	`JS_ToFlßt64
(
ùx
, &
dd
, 
¬gv
[0]))

40602  
JS_EXCEPTION
;

40603 ià(
	`i¢ª
(
dd
))

40604  
	`__JS_NewFlßt64
(
ùx
, 
dd
);

40606  
	`JS_NewIÁ32
(
ùx
, 
	`g‘TimezÚeOff£t
((
št64_t
)
dd
));

40607 
	}
}

40609 
JSV®ue
 
	$js_g‘_´ÙÙy³_äom_ùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
ùÜ
,

40610 
JSV®ueCÚ¡
 
def_´Ùo
)

40612 
JSV®ue
 
´Ùo
;

40613 
´Ùo
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
ùÜ
, 
JS_ATOM_´ÙÙy³
);

40614 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

40615  
´Ùo
;

40616 ià(!
	`JS_IsObjeù
(
´Ùo
)) {

40617 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

40618 
´Ùo
 = 
	`JS_DupV®ue
(
ùx
, 
def_´Ùo
);

40620  
´Ùo
;

40621 
	}
}

40624 
JSV®ue
 
	$js___d©e_ü—‹
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40625 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40627 
JSV®ue
 
obj
, 
´Ùo
;

40628 
´Ùo
 = 
	`js_g‘_´ÙÙy³_äom_ùÜ
(
ùx
, 
¬gv
[0],‡rgv[1]);

40629 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

40630  
´Ùo
;

40631 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
´Ùo
, 
JS_CLASS_DATE
);

40632 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

40633 ià(!
	`JS_IsExû±iÚ
(
obj
))

40634 
	`JS_S‘ObjeùD©a
(
ùx
, 
obj
, 
	`JS_DupV®ue
(ùx, 
¬gv
[2]));

40635  
obj
;

40636 
	}
}

40641 
	$js_»gexp_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

40643 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

40644 
JSRegExp
 *
»
 = &
p
->
u
.
»gexp
;

40645 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->
by‹code
));

40646 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->
·‰”n
));

40647 
	}
}

40650 
JSV®ue
 
	$js_compe_»gexp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
·‰”n
,

40651 
JSV®ueCÚ¡
 
æags
)

40653 cÚ¡ *
¡r
;

40654 
»_æags
, 
mask
;

40655 
ušt8_t
 *
»_by‹code_buf
;

40656 
size_t
 
i
, 
Ën
;

40657 
»_by‹code_Ën
;

40658 
JSV®ue
 
»t
;

40659 
”rÜ_msg
[64];

40661 
»_æags
 = 0;

40662 ià(!
	`JS_IsUndefšed
(
æags
)) {

40663 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
æags
);

40664 ià(!
¡r
)

40665  
JS_EXCEPTION
;

40667 
i
 = 0; i < 
Ën
; i++) {

40668 
¡r
[
i
]) {

40670 
mask
 = 
LRE_FLAG_GLOBAL
;

40673 
mask
 = 
LRE_FLAG_IGNORECASE
;

40676 
mask
 = 
LRE_FLAG_MULTILINE
;

40679 
mask
 = 
LRE_FLAG_DOTALL
;

40682 
mask
 = 
LRE_FLAG_UTF16
;

40685 
mask
 = 
LRE_FLAG_STICKY
;

40688 
bad_æags
;

40690 ià((
»_æags
 & 
mask
) != 0) {

40691 
bad_æags
:

40692 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

40693  
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "invalid„egularƒxpression flags");

40695 
»_æags
 |ğ
mask
;

40697 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

40700 
¡r
 = 
	`JS_ToCSŒšgL’2
(
ùx
, &
Ën
, 
·‰”n
, !(
»_æags
 & 
LRE_FLAG_UTF16
));

40701 ià(!
¡r
)

40702  
JS_EXCEPTION
;

40703 
»_by‹code_buf
 = 
	`Ìe_compe
(&
»_by‹code_Ën
, 
”rÜ_msg
,

40704 (
”rÜ_msg
), 
¡r
, 
Ën
, 
»_æags
, 
ùx
);

40705 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

40706 ià(!
»_by‹code_buf
) {

40707 
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "%s", 
”rÜ_msg
);

40708  
JS_EXCEPTION
;

40711 
»t
 = 
	`js_Ãw_¡ršg8
(
ùx
, 
»_by‹code_buf
, 
»_by‹code_Ën
);

40712 
	`js_ä“
(
ùx
, 
»_by‹code_buf
);

40713  
»t
;

40714 
	}
}

40718 
JSV®ue
 
	$js_»gexp_cÚ¡ruùÜ_š‹º®
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
ùÜ
,

40719 
JSV®ue
 
·‰”n
, JSV®u
bc
)

40721 
JSV®ue
 
obj
;

40722 
JSObjeù
 *
p
;

40723 
JSRegExp
 *
»
;

40726 ià(
	`JS_VALUE_GET_TAG
(
bc
è!ğ
JS_TAG_STRING
 ||

40727 
	`JS_VALUE_GET_TAG
(
·‰”n
è!ğ
JS_TAG_STRING
) {

40728 
	`JS_ThrowTy³E¼Ü
(
ùx
, "stringƒxpected");

40729 
ç
:

40730 
	`JS_F»eV®ue
(
ùx
, 
bc
);

40731 
	`JS_F»eV®ue
(
ùx
, 
·‰”n
);

40732  
JS_EXCEPTION
;

40735 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
ùÜ
, 
JS_CLASS_REGEXP
);

40736 ià(
	`JS_IsExû±iÚ
(
obj
))

40737 
ç
;

40738 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

40739 
»
 = &
p
->
u
.
»gexp
;

40740 
»
->
·‰”n
 = 
	`JS_VALUE_GET_STRING
(pattern);

40741 
»
->
by‹code
 = 
	`JS_VALUE_GET_STRING
(
bc
);

40742 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ32
(ctx, 0),

40743 
JS_PROP_WRITABLE
);

40744  
obj
;

40745 
	}
}

40747 
JSRegExp
 *
	$js_g‘_»gexp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
BOOL
 
throw_”rÜ
)

40749 ià(
	`JS_VALUE_GET_TAG
(
obj
è=ğ
JS_TAG_OBJECT
) {

40750 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

40751 ià(
p
->
şass_id
 =ğ
JS_CLASS_REGEXP
)

40752  &
p
->
u
.
»gexp
;

40754 ià(
throw_”rÜ
) {

40755 
	`JS_ThrowTy³E¼ÜInv®idCÏss
(
ùx
, 
JS_CLASS_REGEXP
);

40757  
NULL
;

40758 
	}
}

40761 
	$js_is_»gexp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

40763 
JSV®ue
 
m
;

40765 ià(!
	`JS_IsObjeù
(
obj
))

40766  
FALSE
;

40767 
m
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_m©ch
);

40768 ià(
	`JS_IsExû±iÚ
(
m
))

40770 ià(!
	`JS_IsUndefšed
(
m
))

40771  
	`JS_ToBoŞF»e
(
ùx
, 
m
);

40772  
	`js_g‘_»gexp
(
ùx
, 
obj
, 
FALSE
è!ğ
NULL
;

40773 
	}
}

40775 
JSV®ue
 
	$js_»gexp_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

40776 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40778 
JSV®ue
 
·‰”n
, 
æags
, 
bc
, 
v®
;

40779 
JSV®ueCÚ¡
 
·t
, 
æags1
;

40780 
JSRegExp
 *
»
;

40781 
·t_is_»gexp
;

40783 
·t
 = 
¬gv
[0];

40784 
æags1
 = 
¬gv
[1];

40785 
·t_is_»gexp
 = 
	`js_is_»gexp
(
ùx
, 
·t
);

40786 ià(
·t_is_»gexp
 < 0)

40787  
JS_EXCEPTION
;

40788 ià(
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

40790 
Ãw_rg‘
 = 
	`JS_G‘AùiveFunùiÚ
(
ùx
);

40791 ià(
·t_is_»gexp
 && 
	`JS_IsUndefšed
(
æags1
)) {

40792 
JSV®ue
 
ùÜ
;

40793 
BOOL
 
»s
;

40794 
ùÜ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
·t
, 
JS_ATOM_cÚ¡ruùÜ
);

40795 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

40796  
ùÜ
;

40797 
»s
 = 
	`js_§me_v®ue
(
ùx
, 
ùÜ
, 
Ãw_rg‘
);

40798 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

40799 ià(
»s
)

40800  
	`JS_DupV®ue
(
ùx
, 
·t
);

40803 
»
 = 
	`js_g‘_»gexp
(
ùx
, 
·t
, 
FALSE
);

40804 ià(
»
) {

40805 
·‰”n
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->pattern));

40806 ià(
	`JS_IsUndefšed
(
æags1
)) {

40807 
bc
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->
by‹code
));

40808 
no_comp©iÚ
;

40810 
æags
 = 
	`JS_ToSŒšg
(
ùx
, 
æags1
);

40811 ià(
	`JS_IsExû±iÚ
(
æags
))

40812 
ç
;

40815 
æags
 = 
JS_UNDEFINED
;

40816 ià(
·t_is_»gexp
) {

40817 
·‰”n
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
·t
, 
JS_ATOM_sourû
);

40818 ià(
	`JS_IsExû±iÚ
(
·‰”n
))

40819 
ç
;

40820 ià(
	`JS_IsUndefšed
(
æags1
)) {

40821 
æags
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
·t
, 
JS_ATOM_æags
);

40822 ià(
	`JS_IsExû±iÚ
(
æags
))

40823 
ç
;

40825 
æags
 = 
	`JS_DupV®ue
(
ùx
, 
æags1
);

40828 
·‰”n
 = 
	`JS_DupV®ue
(
ùx
, 
·t
);

40829 
æags
 = 
	`JS_DupV®ue
(
ùx
, 
æags1
);

40831 ià(
	`JS_IsUndefšed
(
·‰”n
)) {

40832 
·‰”n
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

40834 
v®
 = 
·‰”n
;

40835 
·‰”n
 = 
	`JS_ToSŒšg
(
ùx
, 
v®
);

40836 
	`JS_F»eV®ue
(
ùx
, 
v®
);

40837 ià(
	`JS_IsExû±iÚ
(
·‰”n
))

40838 
ç
;

40841 
bc
 = 
	`js_compe_»gexp
(
ùx
, 
·‰”n
, 
æags
);

40842 ià(
	`JS_IsExû±iÚ
(
bc
))

40843 
ç
;

40844 
	`JS_F»eV®ue
(
ùx
, 
æags
);

40845 
no_comp©iÚ
:

40846  
	`js_»gexp_cÚ¡ruùÜ_š‹º®
(
ùx
, 
Ãw_rg‘
, 
·‰”n
, 
bc
);

40847 
ç
:

40848 
	`JS_F»eV®ue
(
ùx
, 
·‰”n
);

40849 
	`JS_F»eV®ue
(
ùx
, 
æags
);

40850  
JS_EXCEPTION
;

40851 
	}
}

40853 
JSV®ue
 
	$js_»gexp_compe
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

40854 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

40856 
JSRegExp
 *
»1
, *
»
;

40857 
JSV®ueCÚ¡
 
·‰”n1
, 
æags1
;

40858 
JSV®ue
 
bc
, 
·‰”n
;

40860 
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
TRUE
);

40861 ià(!
»
)

40862  
JS_EXCEPTION
;

40863 
·‰”n1
 = 
¬gv
[0];

40864 
æags1
 = 
¬gv
[1];

40865 
»1
 = 
	`js_g‘_»gexp
(
ùx
, 
·‰”n1
, 
FALSE
);

40866 ià(
»1
) {

40867 ià(!
	`JS_IsUndefšed
(
æags1
))

40868  
	`JS_ThrowTy³E¼Ü
(
ùx
, "flags must be undefined");

40869 
·‰”n
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»1
->pattern));

40870 
bc
 = 
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»1
->
by‹code
));

40872 
bc
 = 
JS_UNDEFINED
;

40873 ià(
	`JS_IsUndefšed
(
·‰”n1
))

40874 
·‰”n
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

40876 
·‰”n
 = 
	`JS_ToSŒšg
(
ùx
, 
·‰”n1
);

40877 ià(
	`JS_IsExû±iÚ
(
·‰”n
))

40878 
ç
;

40879 
bc
 = 
	`js_compe_»gexp
(
ùx
, 
·‰”n
, 
æags1
);

40880 ià(
	`JS_IsExû±iÚ
(
bc
))

40881 
ç
;

40883 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->
·‰”n
));

40884 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->
by‹code
));

40885 
»
->
·‰”n
 = 
	`JS_VALUE_GET_STRING
(pattern);

40886 
»
->
by‹code
 = 
	`JS_VALUE_GET_STRING
(
bc
);

40887 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
,

40888 
	`JS_NewIÁ32
(
ùx
, 0)) < 0)

40889  
JS_EXCEPTION
;

40890  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

40891 
ç
:

40892 
	`JS_F»eV®ue
(
ùx
, 
·‰”n
);

40893 
	`JS_F»eV®ue
(
ùx
, 
bc
);

40894  
JS_EXCEPTION
;

40895 
	}
}

40898 
JSV®ue
 
	$js_»gexp_g‘___sourû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

40900 
JSRegExp
 *
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
TRUE
);

40901 ià(!
»
)

40902  
JS_EXCEPTION
;

40903  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
»
->
·‰”n
));

40904 
	}
}

40906 
JSV®ue
 
	$js_»gexp_g‘___æags
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

40908 
JSRegExp
 *
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
TRUE
);

40909 
æags
;

40911 ià(!
»
)

40912  
JS_EXCEPTION
;

40913 
æags
 = 
	`Ìe_g‘_æags
(
»
->
by‹code
->
u
.
¡r8
);

40914  
	`JS_NewIÁ32
(
ùx
, 
æags
);

40915 
	}
}

40918 
JSV®ue
 
	$js_»gexp_g‘_sourû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

40920 
JSRegExp
 *
»
;

40921 
JSSŒšg
 *
p
;

40922 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

40923 
i
, 
n
, 
c
, 
c2
, 
b¿
;

40925 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è!ğ
JS_TAG_OBJECT
)

40926  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

40928 ià(
	`js_§me_v®ue
(
ùx
, 
this_v®
, ctx->
şass_´Ùo
[
JS_CLASS_REGEXP
]))

40929 
em±y_»gex
;

40931 
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
TRUE
);

40932 ià(!
»
)

40933  
JS_EXCEPTION
;

40935 
p
 = 
»
->
·‰”n
;

40937 ià(
p
->
Ën
 == 0) {

40938 
em±y_»gex
:

40939  
	`JS_NewSŒšg
(
ùx
, "(?:)");

40941 
	`¡ršg_bufãr_š™2
(
ùx
, 
b
, 
p
->
Ën
,…->
is_wide_ch¬
);

40944 
b¿
 = 0;

40945 
i
 = 0, 
n
 = 
p
->
Ën
; i <‚;) {

40946 
c2
 = -1;

40947 
c
 = 
	`¡ršg_g‘
(
p
, 
i
++)) {

40949 ià(
i
 < 
n
)

40950 
c2
 = 
	`¡ršg_g‘
(
p
, 
i
++);

40953 
b¿
 = 0;

40956 ià(!
b¿
) {

40957 ià(
i
 < 
n
 && 
	`¡ršg_g‘
(
p
, i) == ']')

40958 
c2
 = 
	`¡ršg_g‘
(
p
, 
i
++);

40959 
b¿
 = 1;

40963 
c
 = '\\';

40964 
c2
 = 'n';

40967 
c
 = '\\';

40968 
c2
 = 'r';

40971 ià(!
b¿
) {

40972 
c
 = '\\';

40973 
c2
 = '/';

40977 
	`¡ršg_bufãr_putc16
(
b
, 
c
);

40978 ià(
c2
 >= 0)

40979 
	`¡ršg_bufãr_putc16
(
b
, 
c2
);

40981  
	`¡ršg_bufãr_’d
(
b
);

40982 
	}
}

40984 
JSV®ue
 
	$js_»gexp_g‘_æag
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, 
mask
)

40986 
JSRegExp
 *
»
;

40987 
æags
;

40989 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è!ğ
JS_TAG_OBJECT
)

40990  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

40992 
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
FALSE
);

40993 ià(!
»
) {

40994 ià(
	`js_§me_v®ue
(
ùx
, 
this_v®
, ctx->
şass_´Ùo
[
JS_CLASS_REGEXP
]))

40995  
JS_UNDEFINED
;

40997  
	`JS_ThrowTy³E¼ÜInv®idCÏss
(
ùx
, 
JS_CLASS_REGEXP
);

41000 
æags
 = 
	`Ìe_g‘_æags
(
»
->
by‹code
->
u
.
¡r8
);

41001  
	`JS_NewBoŞ
(
ùx
, (
æags
 & 
mask
) != 0);

41002 
	}
}

41004 
JSV®ue
 
	$js_»gexp_g‘_æags
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

41006 
¡r
[8], *
p
 = str;

41007 
»s
;

41009 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è!ğ
JS_TAG_OBJECT
)

41010  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41012 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
this_v®
, 
JS_ATOM_glob®
));

41013 ià(
»s
 < 0)

41014 
exû±iÚ
;

41015 ià(
»s
)

41016 *
p
++ = 'g';

41017 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”tySŒ
(ùx, 
this_v®
, "ignoreCase"));

41018 ià(
»s
 < 0)

41019 
exû±iÚ
;

41020 ià(
»s
)

41021 *
p
++ = 'i';

41022 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”tySŒ
(ùx, 
this_v®
, "multiline"));

41023 ià(
»s
 < 0)

41024 
exû±iÚ
;

41025 ià(
»s
)

41026 *
p
++ = 'm';

41027 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”tySŒ
(ùx, 
this_v®
, "dotAll"));

41028 ià(
»s
 < 0)

41029 
exû±iÚ
;

41030 ià(
»s
)

41031 *
p
++ = 's';

41032 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
this_v®
, 
JS_ATOM_unicode
));

41033 ià(
»s
 < 0)

41034 
exû±iÚ
;

41035 ià(
»s
)

41036 *
p
++ = 'u';

41037 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”tySŒ
(ùx, 
this_v®
, "sticky"));

41038 ià(
»s
 < 0)

41039 
exû±iÚ
;

41040 ià(
»s
)

41041 *
p
++ = 'y';

41042  
	`JS_NewSŒšgL’
(
ùx
, 
¡r
, 
p
 - str);

41044 
exû±iÚ
:

41045  
JS_EXCEPTION
;

41046 
	}
}

41048 
JSV®ue
 
	$js_»gexp_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41049 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41051 
JSV®ue
 
·‰”n
, 
æags
;

41052 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

41054 ià(!
	`JS_IsObjeù
(
this_v®
))

41055  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41057 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

41058 
	`¡ršg_bufãr_putc8
(
b
, '/');

41059 
·‰”n
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_sourû
);

41060 ià(
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
·‰”n
))

41061 
ç
;

41062 
	`¡ršg_bufãr_putc8
(
b
, '/');

41063 
æags
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_æags
);

41064 ià(
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
æags
))

41065 
ç
;

41066  
	`¡ršg_bufãr_’d
(
b
);

41068 
ç
:

41069 
	`¡ršg_bufãr_ä“
(
b
);

41070  
JS_EXCEPTION
;

41071 
	}
}

41073 
BOOL
 
	$Ìe_check_¡ack_ov”æow
(*
İaque
, 
size_t
 
®loÿ_size
)

41075 
JSCÚ‹xt
 *
ùx
 = 
İaque
;

41076  
	`js_check_¡ack_ov”æow
(
ùx
->
¹
, 
®loÿ_size
);

41077 
	}
}

41079 *
	$Ìe_»®loc
(*
İaque
, *
±r
, 
size_t
 
size
)

41081 
JSCÚ‹xt
 *
ùx
 = 
İaque
;

41083  
	`js_»®loc_¹
(
ùx
->
¹
, 
±r
, 
size
);

41084 
	}
}

41086 
JSV®ue
 
	$js_»gexp_exec
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41087 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41089 
JSRegExp
 *
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
TRUE
);

41090 
JSSŒšg
 *
¡r
;

41091 
JSV®ue
 
¡r_v®
, 
obj
, 
v®
, 
groups
 = 
JS_UNDEFINED
;

41092 
ušt8_t
 *
»_by‹code
;

41093 
»t
;

41094 
ušt8_t
 **
ÿ±u»
, *
¡r_buf
;

41095 
ÿ±u»_couÁ
, 
shiá
, 
i
, 
»_æags
;

41096 
sšt64_t
 
Ï¡_šdex
;

41097 cÚ¡ *
group_Çme_±r
;

41099 ià(!
»
)

41100  
JS_EXCEPTION
;

41101 
¡r_v®
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

41102 ià(
	`JS_IsExû±iÚ
(
¡r_v®
))

41103  
¡r_v®
;

41104 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
);

41105 ià(
	`JS_IsExû±iÚ
(
v®
) ||

41106 
	`JS_ToL’gthF»e
(
ùx
, &
Ï¡_šdex
, 
v®
)) {

41107 
	`JS_F»eV®ue
(
ùx
, 
¡r_v®
);

41108  
JS_EXCEPTION
;

41110 
»_by‹code
 = 
»
->
by‹code
->
u
.
¡r8
;

41111 
»_æags
 = 
	`Ìe_g‘_æags
(
»_by‹code
);

41112 ià((
»_æags
 & (
LRE_FLAG_GLOBAL
 | 
LRE_FLAG_STICKY
)) == 0) {

41113 
Ï¡_šdex
 = 0;

41115 
¡r
 = 
	`JS_VALUE_GET_STRING
(
¡r_v®
);

41116 
ÿ±u»_couÁ
 = 
	`Ìe_g‘_ÿ±u»_couÁ
(
»_by‹code
);

41117 
ÿ±u»
 = 
NULL
;

41118 ià(
ÿ±u»_couÁ
 > 0) {

41119 
ÿ±u»
 = 
	`js_m®loc
(
ùx
, (ÿ±u»[0]è* 
ÿ±u»_couÁ
 * 2);

41120 ià(!
ÿ±u»
) {

41121 
	`JS_F»eV®ue
(
ùx
, 
¡r_v®
);

41122  
JS_EXCEPTION
;

41125 
shiá
 = 
¡r
->
is_wide_ch¬
;

41126 
¡r_buf
 = 
¡r
->
u
.
¡r8
;

41127 ià(
Ï¡_šdex
 > 
¡r
->
Ën
) {

41128 
»t
 = 2;

41130 
»t
 = 
	`Ìe_exec
(
ÿ±u»
, 
»_by‹code
,

41131 
¡r_buf
, 
Ï¡_šdex
, 
¡r
->
Ën
,

41132 
shiá
, 
ùx
);

41134 
obj
 = 
JS_NULL
;

41135 ià(
»t
 != 1) {

41136 ià(
»t
 >= 0) {

41137 ià(
»t
 =ğ2 || (
»_æags
 & (
LRE_FLAG_GLOBAL
 | 
LRE_FLAG_STICKY
))) {

41138 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
,

41139 
	`JS_NewIÁ32
(
ùx
, 0)) < 0)

41140 
ç
;

41143 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "out of memory in„egexpƒxecution");

41144 
ç
;

41146 
	`JS_F»eV®ue
(
ùx
, 
¡r_v®
);

41148 
´İ_æags
;

41149 ià(
»_æags
 & (
LRE_FLAG_GLOBAL
 | 
LRE_FLAG_STICKY
)) {

41150 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
,

41151 
	`JS_NewIÁ32
(
ùx
, (
ÿ±u»
[1] - 
¡r_buf
è>> 
shiá
)) < 0)

41152 
ç
;

41154 
obj
 = 
	`JS_NewA¼ay
(
ùx
);

41155 ià(
	`JS_IsExû±iÚ
(
obj
))

41156 
ç
;

41157 
´İ_æags
 = 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
;

41158 
group_Çme_±r
 = 
NULL
;

41159 ià(
»_æags
 & 
LRE_FLAG_NAMED_GROUPS
) {

41160 
ušt32_t
 
»_by‹code_Ën
;

41161 
groups
 = 
	`JS_NewObjeùPrÙo
(
ùx
, 
JS_NULL
);

41162 ià(
	`JS_IsExû±iÚ
(
groups
))

41163 
ç
;

41164 
»_by‹code_Ën
 = 
	`g‘_u32
(
»_by‹code
 + 3);

41165 
group_Çme_±r
 = (*)(
»_by‹code
 + 7 + 
»_by‹code_Ën
);

41168 
i
 = 0; i < 
ÿ±u»_couÁ
; i++) {

41169 
¡¬t
, 
’d
;

41170 
JSV®ue
 
v®
;

41171 ià(
ÿ±u»
[2 * 
i
] =ğ
NULL
 ||

41172 
ÿ±u»
[2 * 
i
 + 1] =ğ
NULL
) {

41173 
v®
 = 
JS_UNDEFINED
;

41175 
¡¬t
 = (
ÿ±u»
[2 * 
i
] - 
¡r_buf
è>> 
shiá
;

41176 
’d
 = (
ÿ±u»
[2 * 
i
 + 1] - 
¡r_buf
è>> 
shiá
;

41177 
v®
 = 
	`js_sub_¡ršg
(
ùx
, 
¡r
, 
¡¬t
, 
’d
);

41178 ià(
	`JS_IsExû±iÚ
(
v®
))

41179 
ç
;

41181 ià(
group_Çme_±r
 && 
i
 > 0) {

41182 ià(*
group_Çme_±r
) {

41183 ià(
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
groups
, 
group_Çme_±r
,

41184 
	`JS_DupV®ue
(
ùx
, 
v®
),

41185 
´İ_æags
) < 0) {

41186 
	`JS_F»eV®ue
(
ùx
, 
v®
);

41187 
ç
;

41190 
group_Çme_±r
 +ğ
	`¡¾’
(group_name_ptr) + 1;

41192 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
obj
, 
i
, 
v®
, 
´İ_æags
) < 0)

41193 
ç
;

41195 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_groups
,

41196 
groups
, 
´İ_æags
) < 0)

41197 
ç
;

41198 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_šdex
,

41199 
	`JS_NewIÁ32
(
ùx
, (
ÿ±u»
[0] - 
¡r_buf
è>> 
shiá
), 
´İ_æags
) < 0)

41200 
ç
;

41201 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_šput
, 
¡r_v®
, 
´İ_æags
) < 0)

41202 
ç1
;

41204 
	`js_ä“
(
ùx
, 
ÿ±u»
);

41205  
obj
;

41206 
ç
:

41207 
	`JS_F»eV®ue
(
ùx
, 
groups
);

41208 
	`JS_F»eV®ue
(
ùx
, 
¡r_v®
);

41209 
ç1
:

41210 
	`JS_F»eV®ue
(
ùx
, 
obj
);

41211 
	`js_ä“
(
ùx
, 
ÿ±u»
);

41212  
JS_EXCEPTION
;

41213 
	}
}

41216 
JSV®ue
 
	$JS_RegExpD–‘e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, JSV®ueCÚ¡ 
¬g
)

41218 
JSRegExp
 *
»
 = 
	`js_g‘_»gexp
(
ùx
, 
this_v®
, 
TRUE
);

41219 
JSSŒšg
 *
¡r
;

41220 
JSV®ue
 
¡r_v®
, 
v®
;

41221 
ušt8_t
 *
»_by‹code
;

41222 
»t
;

41223 
ušt8_t
 **
ÿ±u»
, *
¡r_buf
;

41224 
ÿ±u»_couÁ
, 
shiá
, 
»_æags
;

41225 
Ãxt_¤c_pos
, 
¡¬t
, 
’d
;

41226 
sšt64_t
 
Ï¡_šdex
;

41227 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

41229 ià(!
»
)

41230  
JS_EXCEPTION
;

41232 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

41234 
ÿ±u»
 = 
NULL
;

41235 
¡r_v®
 = 
	`JS_ToSŒšg
(
ùx
, 
¬g
);

41236 ià(
	`JS_IsExû±iÚ
(
¡r_v®
))

41237 
ç
;

41238 
¡r
 = 
	`JS_VALUE_GET_STRING
(
¡r_v®
);

41239 
»_by‹code
 = 
»
->
by‹code
->
u
.
¡r8
;

41240 
»_æags
 = 
	`Ìe_g‘_æags
(
»_by‹code
);

41241 ià((
»_æags
 & (
LRE_FLAG_GLOBAL
 | 
LRE_FLAG_STICKY
)) == 0) {

41242 
Ï¡_šdex
 = 0;

41244 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
);

41245 ià(
	`JS_IsExû±iÚ
(
v®
è|| 
	`JS_ToL’gthF»e
(
ùx
, &
Ï¡_šdex
, val))

41246 
ç
;

41248 
ÿ±u»_couÁ
 = 
	`Ìe_g‘_ÿ±u»_couÁ
(
»_by‹code
);

41249 ià(
ÿ±u»_couÁ
 > 0) {

41250 
ÿ±u»
 = 
	`js_m®loc
(
ùx
, (ÿ±u»[0]è* 
ÿ±u»_couÁ
 * 2);

41251 ià(!
ÿ±u»
)

41252 
ç
;

41254 
shiá
 = 
¡r
->
is_wide_ch¬
;

41255 
¡r_buf
 = 
¡r
->
u
.
¡r8
;

41256 
Ãxt_¤c_pos
 = 0;

41258 ià(
Ï¡_šdex
 > 
¡r
->
Ën
)

41261 
»t
 = 
	`Ìe_exec
(
ÿ±u»
, 
»_by‹code
,

41262 
¡r_buf
, 
Ï¡_šdex
, 
¡r
->
Ën
, 
shiá
, 
ùx
);

41263 ià(
»t
 != 1) {

41264 ià(
»t
 >= 0) {

41265 ià(
»t
 =ğ2 || (
»_æags
 & (
LRE_FLAG_GLOBAL
 | 
LRE_FLAG_STICKY
))) {

41266 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
,

41267 
	`JS_NewIÁ32
(
ùx
, 0)) < 0)

41268 
ç
;

41271 
	`JS_ThrowIÁ”ÇlE¼Ü
(
ùx
, "out of memory in„egexpƒxecution");

41272 
ç
;

41276 
¡¬t
 = (
ÿ±u»
[0] - 
¡r_buf
è>> 
shiá
;

41277 
’d
 = (
ÿ±u»
[1] - 
¡r_buf
è>> 
shiá
;

41278 
Ï¡_šdex
 = 
’d
;

41279 ià(
Ãxt_¤c_pos
 < 
¡¬t
) {

41280 ià(
	`¡ršg_bufãr_cÚÿt
(
b
, 
¡r
, 
Ãxt_¤c_pos
, 
¡¬t
))

41281 
ç
;

41283 
Ãxt_¤c_pos
 = 
’d
;

41284 ià(!(
»_æags
 & 
LRE_FLAG_GLOBAL
)) {

41285 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_Ï¡Index
,

41286 
	`JS_NewIÁ32
(
ùx
, 
’d
)) < 0)

41287 
ç
;

41290 ià(
’d
 =ğ
¡¬t
) {

41291 ià(!(
»_æags
 & 
LRE_FLAG_UTF16
è|| ()
’d
 >ğ
¡r
->
Ën
 || !¡r->
is_wide_ch¬
) {

41292 
’d
++;

41294 
	`¡ršg_g‘c
(
¡r
, &
’d
);

41297 
Ï¡_šdex
 = 
’d
;

41299 ià(
	`¡ršg_bufãr_cÚÿt
(
b
, 
¡r
, 
Ãxt_¤c_pos
, sŒ->
Ën
))

41300 
ç
;

41301 
	`JS_F»eV®ue
(
ùx
, 
¡r_v®
);

41302 
	`js_ä“
(
ùx
, 
ÿ±u»
);

41303  
	`¡ršg_bufãr_’d
(
b
);

41304 
ç
:

41305 
	`JS_F»eV®ue
(
ùx
, 
¡r_v®
);

41306 
	`js_ä“
(
ùx
, 
ÿ±u»
);

41307 
	`¡ršg_bufãr_ä“
(
b
);

41308  
JS_EXCEPTION
;

41309 
	}
}

41311 
JSV®ue
 
	$JS_RegExpExec
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
r
, JSV®ueCÚ¡ 
s
)

41313 
JSV®ue
 
m‘hod
, 
»t
;

41315 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
r
, 
JS_ATOM_exec
);

41316 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

41317  
m‘hod
;

41318 ià(
	`JS_IsFunùiÚ
(
ùx
, 
m‘hod
)) {

41319 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
r
, 1, &
s
);

41320 ià(
	`JS_IsExû±iÚ
(
»t
))

41321  
»t
;

41322 ià(!
	`JS_IsObjeù
(
»t
è&& !
	`JS_IsNuÎ
(ret)) {

41323 
	`JS_F»eV®ue
(
ùx
, 
»t
);

41324  
	`JS_ThrowTy³E¼Ü
(
ùx
, "RegExpƒxec method must„eturn‡n object or‚ull");

41326  
»t
;

41328 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

41329  
	`js_»gexp_exec
(
ùx
, 
r
, 1, &
s
);

41330 
	}
}

41333 
JSV®ue
 
	$js_»gexp___RegExpExec
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41334 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41336  
	`JS_RegExpExec
(
ùx
, 
¬gv
[0],‡rgv[1]);

41337 
	}
}

41338 
JSV®ue
 
	$js_»gexp___RegExpD–‘e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41339 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41341  
	`JS_RegExpD–‘e
(
ùx
, 
¬gv
[0],‡rgv[1]);

41342 
	}
}

41345 
JSV®ue
 
	$js_»gexp_‹¡
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41346 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41348 
JSV®ue
 
v®
;

41349 
BOOL
 
»t
;

41351 
v®
 = 
	`JS_RegExpExec
(
ùx
, 
this_v®
, 
¬gv
[0]);

41352 ià(
	`JS_IsExû±iÚ
(
v®
))

41353  
JS_EXCEPTION
;

41354 
»t
 = !
	`JS_IsNuÎ
(
v®
);

41355 
	`JS_F»eV®ue
(
ùx
, 
v®
);

41356  
	`JS_NewBoŞ
(
ùx
, 
»t
);

41357 
	}
}

41359 
JSV®ue
 
	$js_»gexp_SymbŞ_m©ch
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41360 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41363 
JSV®ueCÚ¡
 
rx
 = 
this_v®
;

41364 
JSV®ue
 
A
, 
S
, 
»suÉ
, 
m©chSŒ
;

41365 
glob®
, 
n
, 
fuÎUnicode
, 
isEm±y
;

41366 
JSSŒšg
 *
p
;

41368 ià(!
	`JS_IsObjeù
(
rx
))

41369  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41371 
A
 = 
JS_UNDEFINED
;

41372 
»suÉ
 = 
JS_UNDEFINED
;

41373 
m©chSŒ
 = 
JS_UNDEFINED
;

41374 
S
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

41375 ià(
	`JS_IsExû±iÚ
(
S
))

41376 
exû±iÚ
;

41378 
glob®
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
rx
, 
JS_ATOM_glob®
));

41379 ià(
glob®
 < 0)

41380 
exû±iÚ
;

41382 ià(!
glob®
) {

41383 
A
 = 
	`JS_RegExpExec
(
ùx
, 
rx
, 
S
);

41385 
fuÎUnicode
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
rx
, 
JS_ATOM_unicode
));

41386 ià(
fuÎUnicode
 < 0)

41387 
exû±iÚ
;

41389 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ32
(ctx, 0)) < 0)

41390 
exû±iÚ
;

41391 
A
 = 
	`JS_NewA¼ay
(
ùx
);

41392 ià(
	`JS_IsExû±iÚ
(
A
))

41393 
exû±iÚ
;

41394 
n
 = 0;

41396 
	`JS_F»eV®ue
(
ùx
, 
»suÉ
);

41397 
»suÉ
 = 
	`JS_RegExpExec
(
ùx
, 
rx
, 
S
);

41398 ià(
	`JS_IsExû±iÚ
(
»suÉ
))

41399 
exû±iÚ
;

41400 ià(
	`JS_IsNuÎ
(
»suÉ
))

41402 
m©chSŒ
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”tyIÁ64
(ùx, 
»suÉ
, 0));

41403 ià(
	`JS_IsExû±iÚ
(
m©chSŒ
))

41404 
exû±iÚ
;

41405 
isEm±y
 = 
	`JS_IsEm±ySŒšg
(
m©chSŒ
);

41406 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
A
, 
n
++, 
m©chSŒ
) < 0)

41407 
exû±iÚ
;

41408 ià(
isEm±y
) {

41409 
sšt64_t
 
thisIndex
, 
ÃxtIndex
;

41410 ià(
	`JS_ToL’gthF»e
(
ùx
, &
thisIndex
,

41411 
	`JS_G‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
)) < 0)

41412 
exû±iÚ
;

41413 
p
 = 
	`JS_VALUE_GET_STRING
(
S
);

41414 
ÃxtIndex
 = 
	`¡ršg_advªû_šdex
(
p
, 
thisIndex
, 
fuÎUnicode
);

41415 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ64
(ùx, 
ÃxtIndex
)) < 0)

41416 
exû±iÚ
;

41419 ià(
n
 == 0) {

41420 
	`JS_F»eV®ue
(
ùx
, 
A
);

41421 
A
 = 
JS_NULL
;

41424 
	`JS_F»eV®ue
(
ùx
, 
»suÉ
);

41425 
	`JS_F»eV®ue
(
ùx
, 
S
);

41426  
A
;

41428 
exû±iÚ
:

41429 
	`JS_F»eV®ue
(
ùx
, 
A
);

41430 
	`JS_F»eV®ue
(
ùx
, 
»suÉ
);

41431 
	`JS_F»eV®ue
(
ùx
, 
S
);

41432  
JS_EXCEPTION
;

41433 
	}
}

41435 
	sJSRegExpSŒšgI‹¿tÜD©a
 {

41436 
JSV®ue
 
	m™”©šg_»gexp
;

41437 
JSV®ue
 
	m™”©ed_¡ršg
;

41438 
BOOL
 
	mglob®
;

41439 
BOOL
 
	municode
;

41440 
BOOL
 
	mdÚe
;

41441 } 
	tJSRegExpSŒšgI‹¿tÜD©a
;

41443 
	$js_»gexp_¡ršg_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

41445 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

41446 
JSRegExpSŒšgI‹¿tÜD©a
 *
™
 = 
p
->
u
.
»gexp_¡ršg_™”©Ü_d©a
;

41447 ià(
™
) {

41448 
	`JS_F»eV®ueRT
(
¹
, 
™
->
™”©šg_»gexp
);

41449 
	`JS_F»eV®ueRT
(
¹
, 
™
->
™”©ed_¡ršg
);

41450 
	`js_ä“_¹
(
¹
, 
™
);

41452 
	}
}

41454 
	$js_»gexp_¡ršg_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

41455 
JS_M¬kFunc
 *
m¬k_func
)

41457 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

41458 
JSRegExpSŒšgI‹¿tÜD©a
 *
™
 = 
p
->
u
.
»gexp_¡ršg_™”©Ü_d©a
;

41459 ià(
™
) {

41460 
	`JS_M¬kV®ue
(
¹
, 
™
->
™”©šg_»gexp
, 
m¬k_func
);

41461 
	`JS_M¬kV®ue
(
¹
, 
™
->
™”©ed_¡ršg
, 
m¬k_func
);

41463 
	}
}

41465 
JSV®ue
 
	$js_»gexp_¡ršg_™”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
,

41466 
JSV®ueCÚ¡
 
this_v®
,

41467 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

41468 
BOOL
 *
pdÚe
, 
magic
)

41470 
JSRegExpSŒšgI‹¿tÜD©a
 *
™
;

41471 
JSV®ueCÚ¡
 
R
, 
S
;

41472 
JSV®ue
 
m©chSŒ
 = 
JS_UNDEFINED
, 
m©ch
 = JS_UNDEFINED;

41473 
JSSŒšg
 *
¥
;

41475 
™
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_REGEXP_STRING_ITERATOR
);

41476 ià(!
™
)

41477 
exû±iÚ
;

41478 ià(
™
->
dÚe
) {

41479 *
pdÚe
 = 
TRUE
;

41480  
JS_UNDEFINED
;

41482 
R
 = 
™
->
™”©šg_»gexp
;

41483 
S
 = 
™
->
™”©ed_¡ršg
;

41484 
m©ch
 = 
	`JS_RegExpExec
(
ùx
, 
R
, 
S
);

41485 ià(
	`JS_IsExû±iÚ
(
m©ch
))

41486 
exû±iÚ
;

41487 ià(
	`JS_IsNuÎ
(
m©ch
)) {

41488 
™
->
dÚe
 = 
TRUE
;

41489 *
pdÚe
 = 
TRUE
;

41490  
JS_UNDEFINED
;

41491 } ià(
™
->
glob®
) {

41492 
m©chSŒ
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”tyIÁ64
(ùx, 
m©ch
, 0));

41493 ià(
	`JS_IsExû±iÚ
(
m©chSŒ
))

41494 
exû±iÚ
;

41495 ià(
	`JS_IsEm±ySŒšg
(
m©chSŒ
)) {

41496 
sšt64_t
 
thisIndex
, 
ÃxtIndex
;

41497 ià(
	`JS_ToL’gthF»e
(
ùx
, &
thisIndex
,

41498 
	`JS_G‘Prİ”ty
(
ùx
, 
R
, 
JS_ATOM_Ï¡Index
)) < 0)

41499 
exû±iÚ
;

41500 
¥
 = 
	`JS_VALUE_GET_STRING
(
S
);

41501 
ÃxtIndex
 = 
	`¡ršg_advªû_šdex
(
¥
, 
thisIndex
, 
™
->
unicode
);

41502 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
R
, 
JS_ATOM_Ï¡Index
,

41503 
	`JS_NewIÁ64
(
ùx
, 
ÃxtIndex
)) < 0)

41504 
exû±iÚ
;

41506 
	`JS_F»eV®ue
(
ùx
, 
m©chSŒ
);

41508 
™
->
dÚe
 = 
TRUE
;

41510 *
pdÚe
 = 
FALSE
;

41511  
m©ch
;

41512 
exû±iÚ
:

41513 
	`JS_F»eV®ue
(
ùx
, 
m©ch
);

41514 
	`JS_F»eV®ue
(
ùx
, 
m©chSŒ
);

41515 *
pdÚe
 = 
FALSE
;

41516  
JS_EXCEPTION
;

41517 
	}
}

41519 
JSV®ue
 
	$js_»gexp_SymbŞ_m©chAÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41520 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41523 
JSV®ueCÚ¡
 
R
 = 
this_v®
;

41524 
JSV®ue
 
S
, 
C
, 
æags
, 
m©ch”
, 
™”
;

41525 
JSV®ueCÚ¡
 
¬gs
[2];

41526 
JSSŒšg
 *
¡½
;

41527 
sšt64_t
 
Ï¡Index
;

41528 
JSRegExpSŒšgI‹¿tÜD©a
 *
™
;

41530 ià(!
	`JS_IsObjeù
(
R
))

41531  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41533 
C
 = 
JS_UNDEFINED
;

41534 
æags
 = 
JS_UNDEFINED
;

41535 
m©ch”
 = 
JS_UNDEFINED
;

41536 
™”
 = 
JS_UNDEFINED
;

41538 
S
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

41539 ià(
	`JS_IsExû±iÚ
(
S
))

41540 
exû±iÚ
;

41541 
C
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
R
, ctx->
»gexp_ùÜ
);

41542 ià(
	`JS_IsExû±iÚ
(
C
))

41543 
exû±iÚ
;

41544 
æags
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
R
, 
JS_ATOM_æags
));

41545 ià(
	`JS_IsExû±iÚ
(
æags
))

41546 
exû±iÚ
;

41547 
¬gs
[0] = 
R
;

41548 
¬gs
[1] = 
æags
;

41549 
m©ch”
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
C
, 2, 
¬gs
);

41550 ià(
	`JS_IsExû±iÚ
(
m©ch”
))

41551 
exû±iÚ
;

41552 ià(
	`JS_ToL’gthF»e
(
ùx
, &
Ï¡Index
,

41553 
	`JS_G‘Prİ”ty
(
ùx
, 
R
, 
JS_ATOM_Ï¡Index
)))

41554 
exû±iÚ
;

41555 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
m©ch”
, 
JS_ATOM_Ï¡Index
,

41556 
	`JS_NewIÁ64
(
ùx
, 
Ï¡Index
)) < 0)

41557 
exû±iÚ
;

41559 
™”
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_REGEXP_STRING_ITERATOR
);

41560 ià(
	`JS_IsExû±iÚ
(
™”
))

41561 
exû±iÚ
;

41562 
™
 = 
	`js_m®loc
(
ùx
, (*it));

41563 ià(!
™
)

41564 
exû±iÚ
;

41565 
™
->
™”©šg_»gexp
 = 
m©ch”
;

41566 
™
->
™”©ed_¡ršg
 = 
S
;

41567 
¡½
 = 
	`JS_VALUE_GET_STRING
(
æags
);

41568 
™
->
glob®
 = 
	`¡ršg_šdexof_ch¬
(
¡½
, 'g', 0) >= 0;

41569 
™
->
unicode
 = 
	`¡ršg_šdexof_ch¬
(
¡½
, 'u', 0) >= 0;

41570 
™
->
dÚe
 = 
FALSE
;

41571 
	`JS_S‘O·que
(
™”
, 
™
);

41573 
	`JS_F»eV®ue
(
ùx
, 
C
);

41574 
	`JS_F»eV®ue
(
ùx
, 
æags
);

41575  
™”
;

41576 
exû±iÚ
:

41577 
	`JS_F»eV®ue
(
ùx
, 
S
);

41578 
	`JS_F»eV®ue
(
ùx
, 
C
);

41579 
	`JS_F»eV®ue
(
ùx
, 
æags
);

41580 
	`JS_F»eV®ue
(
ùx
, 
m©ch”
);

41581 
	`JS_F»eV®ue
(
ùx
, 
™”
);

41582  
JS_EXCEPTION
;

41583 
	}
}

41585 
	sV®ueBufãr
 {

41586 
JSCÚ‹xt
 *
	mùx
;

41587 
JSV®ue
 *
	m¬r
;

41588 
JSV®ue
 
	mdef
[4];

41589 
	mËn
;

41590 
	msize
;

41591 
	m”rÜ_¡©us
;

41592 } 
	tV®ueBufãr
;

41594 
	$v®ue_bufãr_š™
(
JSCÚ‹xt
 *
ùx
, 
V®ueBufãr
 *
b
)

41596 
b
->
ùx
 = ctx;

41597 
b
->
Ën
 = 0;

41598 
b
->
size
 = 4;

41599 
b
->
”rÜ_¡©us
 = 0;

41600 
b
->
¬r
 = b->
def
;

41602 
	}
}

41604 
	$v®ue_bufãr_ä“
(
V®ueBufãr
 *
b
)

41606 
b
->
Ën
 > 0)

41607 
	`JS_F»eV®ue
(
b
->
ùx
, b->
¬r
[--b->
Ën
]);

41608 ià(
b
->
¬r
 !ğb->
def
)

41609 
	`js_ä“
(
b
->
ùx
, b->
¬r
);

41610 
b
->
¬r
 = b->
def
;

41611 
b
->
size
 = 4;

41612 
	}
}

41614 
	$v®ue_bufãr_­³nd
(
V®ueBufãr
 *
b
, 
JSV®ue
 
v®
)

41616 ià(
b
->
”rÜ_¡©us
)

41619 ià(
b
->
Ën
 >ğb->
size
) {

41620 
Ãw_size
 = (
b
->
Ën
 + (b->len >> 1) + 31) & ~16;

41621 
size_t
 
¦ack
;

41622 
JSV®ue
 *
Ãw_¬r
;

41624 ià(
b
->
¬r
 =ğb->
def
) {

41625 
Ãw_¬r
 = 
	`js_»®loc2
(
b
->
ùx
, 
NULL
, (*b->
¬r
è* 
Ãw_size
, &
¦ack
);

41626 ià(
Ãw_¬r
)

41627 
	`memıy
(
Ãw_¬r
, 
b
->
def
,  b->def);

41629 
Ãw_¬r
 = 
	`js_»®loc2
(
b
->
ùx
, b->
¬r
, (*b->¬rè* 
Ãw_size
, &
¦ack
);

41631 ià(!
Ãw_¬r
) {

41632 
	`v®ue_bufãr_ä“
(
b
);

41633 
	`JS_F»eV®ue
(
b
->
ùx
, 
v®
);

41634 
b
->
”rÜ_¡©us
 = -1;

41637 
Ãw_size
 +ğ
¦ack
 / (*
Ãw_¬r
);

41638 
b
->
¬r
 = 
Ãw_¬r
;

41639 
b
->
size
 = 
Ãw_size
;

41641 
b
->
¬r
[b->
Ën
++] = 
v®
;

41643 
	}
}

41645 
	$js_is_¡ªd¬d_»gexp
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
rx
)

41647 
JSV®ue
 
v®
;

41648 
»s
;

41650 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_cÚ¡ruùÜ
);

41651 ià(
	`JS_IsExû±iÚ
(
v®
))

41654 
»s
 = 
	`js_§me_v®ue
(
ùx
, 
v®
, ctx->
»gexp_ùÜ
);

41655 
	`JS_F»eV®ue
(
ùx
, 
v®
);

41656 ià(
»s
) {

41657 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_exec
);

41658 ià(
	`JS_IsExû±iÚ
(
v®
))

41661 
»s
 = 
	`JS_IsCFunùiÚ
(
ùx
, 
v®
, 
js_»gexp_exec
, 0);

41662 
	`JS_F»eV®ue
(
ùx
, 
v®
);

41664  
»s
;

41665 
	}
}

41667 
JSV®ue
 
	$js_»gexp_SymbŞ_»¶aû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41668 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41671 
JSV®ueCÚ¡
 
rx
 = 
this_v®
, 
»p
 = 
¬gv
[1];

41672 
JSV®ueCÚ¡
 
¬gs
[6];

41673 
JSV®ue
 
¡r
, 
»p_v®
, 
m©ched
, 
b
, 
»p_¡r
, 
ÇmedC­tu»s
, 
»s
;

41674 
JSSŒšg
 *
¥
, *
½
;

41675 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

41676 
V®ueBufãr
 
v_b
, *
»suÉs
 = &v_b;

41677 
ÃxtSourûPos™iÚ
, 
n
, 
j
, 
funùiÚ®R•Ïû
, 
is_glob®
, 
fuÎUnicode
;

41678 
ušt32_t
 
nC­tu»s
;

41679 
sšt64_t
 
pos™iÚ
;

41681 ià(!
	`JS_IsObjeù
(
rx
))

41682  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41684 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

41685 
	`v®ue_bufãr_š™
(
ùx
, 
»suÉs
);

41687 
»p_v®
 = 
JS_UNDEFINED
;

41688 
m©ched
 = 
JS_UNDEFINED
;

41689 
b
 = 
JS_UNDEFINED
;

41690 
»p_¡r
 = 
JS_UNDEFINED
;

41691 
ÇmedC­tu»s
 = 
JS_UNDEFINED
;

41693 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

41694 ià(
	`JS_IsExû±iÚ
(
¡r
))

41695 
exû±iÚ
;

41697 
¥
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

41698 
½
 = 
NULL
;

41699 
funùiÚ®R•Ïû
 = 
	`JS_IsFunùiÚ
(
ùx
, 
»p
);

41700 ià(!
funùiÚ®R•Ïû
) {

41701 
»p_v®
 = 
	`JS_ToSŒšg
(
ùx
, 
»p
);

41702 ià(
	`JS_IsExû±iÚ
(
»p_v®
))

41703 
exû±iÚ
;

41704 
½
 = 
	`JS_VALUE_GET_STRING
(
»p_v®
);

41706 
fuÎUnicode
 = 0;

41707 
is_glob®
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
rx
, 
JS_ATOM_glob®
));

41708 ià(
is_glob®
 < 0)

41709 
exû±iÚ
;

41710 ià(
is_glob®
) {

41711 
fuÎUnicode
 = 
	`JS_ToBoŞF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
rx
, 
JS_ATOM_unicode
));

41712 ià(
fuÎUnicode
 < 0)

41713 
exû±iÚ
;

41714 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ32
(ctx, 0)) < 0)

41715 
exû±iÚ
;

41718 ià(
½
 &&„p->
Ën
 =ğ0 && 
is_glob®
 && 
	`js_is_¡ªd¬d_»gexp
(
ùx
, 
rx
)) {

41720 
»s
 = 
	`JS_RegExpD–‘e
(
ùx
, 
rx
, 
¡r
);

41721 
dÚe
;

41724 
JSV®ue
 
»suÉ
;

41725 
»suÉ
 = 
	`JS_RegExpExec
(
ùx
, 
rx
, 
¡r
);

41726 ià(
	`JS_IsExû±iÚ
(
»suÉ
))

41727 
exû±iÚ
;

41728 ià(
	`JS_IsNuÎ
(
»suÉ
))

41730 ià(
	`v®ue_bufãr_­³nd
(
»suÉs
, 
»suÉ
) < 0)

41731 
exû±iÚ
;

41732 ià(!
is_glob®
)

41734 
	`JS_F»eV®ue
(
ùx
, 
m©ched
);

41735 
m©ched
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”tyIÁ64
(ùx, 
»suÉ
, 0));

41736 ià(
	`JS_IsExû±iÚ
(
m©ched
))

41737 
exû±iÚ
;

41738 ià(
	`JS_IsEm±ySŒšg
(
m©ched
)) {

41740 
sšt64_t
 
thisIndex
, 
ÃxtIndex
;

41741 ià(
	`JS_ToL’gthF»e
(
ùx
, &
thisIndex
, 
	`JS_G‘Prİ”ty
(ùx, 
rx
, 
JS_ATOM_Ï¡Index
)) < 0)

41742 
exû±iÚ
;

41743 
ÃxtIndex
 = 
	`¡ršg_advªû_šdex
(
¥
, 
thisIndex
, 
fuÎUnicode
);

41744 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ64
(ùx, 
ÃxtIndex
)) < 0)

41745 
exû±iÚ
;

41748 
ÃxtSourûPos™iÚ
 = 0;

41749 
j
 = 0; j < 
»suÉs
->
Ën
; j++) {

41750 
JSV®ueCÚ¡
 
»suÉ
;

41751 
»suÉ
 = 
»suÉs
->
¬r
[
j
];

41752 ià(
	`js_g‘_Ëngth32
(
ùx
, &
nC­tu»s
, 
»suÉ
) < 0)

41753 
exû±iÚ
;

41754 
	`JS_F»eV®ue
(
ùx
, 
m©ched
);

41755 
m©ched
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”tyIÁ64
(ùx, 
»suÉ
, 0));

41756 ià(
	`JS_IsExû±iÚ
(
m©ched
))

41757 
exû±iÚ
;

41758 ià(
	`JS_ToL’gthF»e
(
ùx
, &
pos™iÚ
, 
	`JS_G‘Prİ”ty
(ùx, 
»suÉ
, 
JS_ATOM_šdex
)))

41759 
exû±iÚ
;

41760 ià(
pos™iÚ
 > 
¥
->
Ën
)

41761 
pos™iÚ
 = 
¥
->
Ën
;

41762 ià(
pos™iÚ
 < 0)

41763 
pos™iÚ
 = 0;

41766 
	`JS_F»eV®ue
(
ùx
, 
b
);

41767 
b
 = 
	`JS_NewA¼ay
(
ùx
);

41768 ià(
	`JS_IsExû±iÚ
(
b
))

41769 
exû±iÚ
;

41770 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
b
, 0, 
	`JS_DupV®ue
(ùx, 
m©ched
)) < 0)

41771 
exû±iÚ
;

41772 
n
 = 1;‚ < 
nC­tu»s
;‚++) {

41773 
JSV®ue
 
ÿpN
;

41774 
ÿpN
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
»suÉ
, 
n
);

41775 ià(
	`JS_IsExû±iÚ
(
ÿpN
))

41776 
exû±iÚ
;

41777 ià(!
	`JS_IsUndefšed
(
ÿpN
)) {

41778 
ÿpN
 = 
	`JS_ToSŒšgF»e
(
ùx
, capN);

41779 ià(
	`JS_IsExû±iÚ
(
ÿpN
))

41780 
exû±iÚ
;

41782 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
b
, 
n
, 
ÿpN
) < 0)

41783 
exû±iÚ
;

41785 
	`JS_F»eV®ue
(
ùx
, 
ÇmedC­tu»s
);

41786 
ÇmedC­tu»s
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»suÉ
, 
JS_ATOM_groups
);

41787 ià(
	`JS_IsExû±iÚ
(
ÇmedC­tu»s
))

41788 
exû±iÚ
;

41789 ià(
funùiÚ®R•Ïû
) {

41790 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
b
, 
n
++, 
	`JS_NewIÁ32
(ùx, 
pos™iÚ
)) < 0)

41791 
exû±iÚ
;

41792 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
b
, 
n
++, 
	`JS_DupV®ue
(ùx, 
¡r
)) < 0)

41793 
exû±iÚ
;

41794 ià(!
	`JS_IsUndefšed
(
ÇmedC­tu»s
)) {

41795 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
b
, 
n
++, 
	`JS_DupV®ue
(ùx, 
ÇmedC­tu»s
)) < 0)

41796 
exû±iÚ
;

41798 
¬gs
[0] = 
JS_UNDEFINED
;

41799 
¬gs
[1] = 
b
;

41800 
	`JS_F»eV®ue
(
ùx
, 
»p_¡r
);

41801 
»p_¡r
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`js_funùiÚ_­¶y
(ùx, 
»p
, 2, 
¬gs
, 0));

41803 
JSV®ue
 
ÇmedC­tu»s1
;

41804 ià(!
	`JS_IsUndefšed
(
ÇmedC­tu»s
)) {

41805 
ÇmedC­tu»s1
 = 
	`JS_ToObjeù
(
ùx
, 
ÇmedC­tu»s
);

41806 ià(
	`JS_IsExû±iÚ
(
ÇmedC­tu»s1
))

41807 
exû±iÚ
;

41809 
ÇmedC­tu»s1
 = 
JS_UNDEFINED
;

41811 
¬gs
[0] = 
m©ched
;

41812 
¬gs
[1] = 
¡r
;

41813 
¬gs
[2] = 
	`JS_NewIÁ32
(
ùx
, 
pos™iÚ
);

41814 
¬gs
[3] = 
b
;

41815 
¬gs
[4] = 
ÇmedC­tu»s1
;

41816 
¬gs
[5] = 
»p_v®
;

41817 
	`JS_F»eV®ue
(
ùx
, 
»p_¡r
);

41818 
»p_¡r
 = 
	`js_¡ršg___G‘Sub¡™utiÚ
(
ùx
, 
JS_UNDEFINED
, 6, 
¬gs
);

41819 
	`JS_F»eV®ue
(
ùx
, 
ÇmedC­tu»s1
);

41821 ià(
	`JS_IsExû±iÚ
(
»p_¡r
))

41822 
exû±iÚ
;

41823 ià(
pos™iÚ
 >ğ
ÃxtSourûPos™iÚ
) {

41824 
	`¡ršg_bufãr_cÚÿt
(
b
, 
¥
, 
ÃxtSourûPos™iÚ
, 
pos™iÚ
);

41825 
	`¡ršg_bufãr_cÚÿt_v®ue
(
b
, 
»p_¡r
);

41826 
ÃxtSourûPos™iÚ
 = 
pos™iÚ
 + 
	`JS_VALUE_GET_STRING
(
m©ched
)->
Ën
;

41829 
	`¡ršg_bufãr_cÚÿt
(
b
, 
¥
, 
ÃxtSourûPos™iÚ
, sp->
Ën
);

41830 
»s
 = 
	`¡ršg_bufãr_’d
(
b
);

41831 
dÚe1
;

41833 
exû±iÚ
:

41834 
»s
 = 
JS_EXCEPTION
;

41835 
dÚe
:

41836 
	`¡ršg_bufãr_ä“
(
b
);

41837 
dÚe1
:

41838 
	`v®ue_bufãr_ä“
(
»suÉs
);

41839 
	`JS_F»eV®ue
(
ùx
, 
»p_v®
);

41840 
	`JS_F»eV®ue
(
ùx
, 
m©ched
);

41841 
	`JS_F»eV®ue
(
ùx
, 
b
);

41842 
	`JS_F»eV®ue
(
ùx
, 
»p_¡r
);

41843 
	`JS_F»eV®ue
(
ùx
, 
ÇmedC­tu»s
);

41844 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

41845  
»s
;

41846 
	}
}

41848 
JSV®ue
 
	$js_»gexp_SymbŞ_£¬ch
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41849 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41851 
JSV®ueCÚ¡
 
rx
 = 
this_v®
;

41852 
JSV®ue
 
¡r
, 
´eviousLa¡Index
, 
cu¼’tLa¡Index
, 
»suÉ
, 
šdex
;

41854 ià(!
	`JS_IsObjeù
(
rx
))

41855  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41857 
»suÉ
 = 
JS_UNDEFINED
;

41858 
cu¼’tLa¡Index
 = 
JS_UNDEFINED
;

41859 
´eviousLa¡Index
 = 
JS_UNDEFINED
;

41860 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

41861 ià(
	`JS_IsExû±iÚ
(
¡r
))

41862 
exû±iÚ
;

41864 
´eviousLa¡Index
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
);

41865 ià(
	`JS_IsExû±iÚ
(
´eviousLa¡Index
))

41866 
exû±iÚ
;

41868 ià(!
	`js_§me_v®ue
(
ùx
, 
´eviousLa¡Index
, 
	`JS_NewIÁ32
(ctx, 0))) {

41869 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ32
(ctx, 0)) < 0) {

41870 
exû±iÚ
;

41873 
»suÉ
 = 
	`JS_RegExpExec
(
ùx
, 
rx
, 
¡r
);

41874 ià(
	`JS_IsExû±iÚ
(
»suÉ
))

41875 
exû±iÚ
;

41876 
cu¼’tLa¡Index
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
);

41877 ià(
	`JS_IsExû±iÚ
(
cu¼’tLa¡Index
))

41878 
exû±iÚ
;

41879 ià(
	`js_§me_v®ue
(
ùx
, 
cu¼’tLa¡Index
, 
´eviousLa¡Index
)) {

41880 
	`JS_F»eV®ue
(
ùx
, 
´eviousLa¡Index
);

41882 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
rx
, 
JS_ATOM_Ï¡Index
, 
´eviousLa¡Index
) < 0)

41883 
exû±iÚ
;

41885 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

41886 
	`JS_F»eV®ue
(
ùx
, 
cu¼’tLa¡Index
);

41888 ià(
	`JS_IsNuÎ
(
»suÉ
)) {

41889  
	`JS_NewIÁ32
(
ùx
, -1);

41891 
šdex
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»suÉ
, 
JS_ATOM_šdex
);

41892 
	`JS_F»eV®ue
(
ùx
, 
»suÉ
);

41893  
šdex
;

41896 
exû±iÚ
:

41897 
	`JS_F»eV®ue
(
ùx
, 
»suÉ
);

41898 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

41899 
	`JS_F»eV®ue
(
ùx
, 
cu¼’tLa¡Index
);

41900 
	`JS_F»eV®ue
(
ùx
, 
´eviousLa¡Index
);

41901  
JS_EXCEPTION
;

41902 
	}
}

41904 
JSV®ue
 
	$js_»gexp_SymbŞ_¥l™
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

41905 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

41908 
JSV®ueCÚ¡
 
rx
 = 
this_v®
;

41909 
JSV®ueCÚ¡
 
¬gs
[2];

41910 
JSV®ue
 
¡r
, 
ùÜ
, 
¥l™‹r
, 
A
, 
æags
, 
z
, 
sub
;

41911 
JSSŒšg
 *
¡½
;

41912 
ušt32_t
 
lim
, 
size
, 
p
, 
q
;

41913 
unicodeM©chšg
;

41914 
sšt64_t
 
ËngthA
, 
e
, 
numb”OfC­tu»s
, 
i
;

41916 ià(!
	`JS_IsObjeù
(
rx
))

41917  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

41919 
ùÜ
 = 
JS_UNDEFINED
;

41920 
¥l™‹r
 = 
JS_UNDEFINED
;

41921 
A
 = 
JS_UNDEFINED
;

41922 
æags
 = 
JS_UNDEFINED
;

41923 
z
 = 
JS_UNDEFINED
;

41924 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

41925 ià(
	`JS_IsExû±iÚ
(
¡r
))

41926 
exû±iÚ
;

41927 
ùÜ
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
rx
, ctx->
»gexp_ùÜ
);

41928 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

41929 
exû±iÚ
;

41930 
æags
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”ty
(ùx, 
rx
, 
JS_ATOM_æags
));

41931 ià(
	`JS_IsExû±iÚ
(
æags
))

41932 
exû±iÚ
;

41933 
¡½
 = 
	`JS_VALUE_GET_STRING
(
æags
);

41934 
unicodeM©chšg
 = 
	`¡ršg_šdexof_ch¬
(
¡½
, 'u', 0) >= 0;

41935 ià(
	`¡ršg_šdexof_ch¬
(
¡½
, 'y', 0) < 0) {

41936 
æags
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "", flags, "y");

41937 ià(
	`JS_IsExû±iÚ
(
æags
))

41938 
exû±iÚ
;

41940 
¬gs
[0] = 
rx
;

41941 
¬gs
[1] = 
æags
;

41942 
¥l™‹r
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
ùÜ
, 2, 
¬gs
);

41943 ià(
	`JS_IsExû±iÚ
(
¥l™‹r
))

41944 
exû±iÚ
;

41945 
A
 = 
	`JS_NewA¼ay
(
ùx
);

41946 ià(
	`JS_IsExû±iÚ
(
A
))

41947 
exû±iÚ
;

41948 
ËngthA
 = 0;

41949 ià(
	`JS_IsUndefšed
(
¬gv
[1])) {

41950 
lim
 = 0xffffffff;

41952 ià(
	`JS_ToUšt32
(
ùx
, &
lim
, 
¬gv
[1]) < 0)

41953 
exû±iÚ
;

41954 ià(
lim
 == 0)

41955 
dÚe
;

41957 
¡½
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

41958 
p
 = 
q
 = 0;

41959 
size
 = 
¡½
->
Ën
;

41960 ià(
size
 == 0) {

41961 
z
 = 
	`JS_RegExpExec
(
ùx
, 
¥l™‹r
, 
¡r
);

41962 ià(
	`JS_IsExû±iÚ
(
z
))

41963 
exû±iÚ
;

41964 ià(
	`JS_IsNuÎ
(
z
))

41965 
add_
;

41966 
dÚe
;

41968 
q
 < 
size
) {

41969 ià(
	`JS_S‘Prİ”ty
(
ùx
, 
¥l™‹r
, 
JS_ATOM_Ï¡Index
, 
	`JS_NewIÁ32
(ùx, 
q
)) < 0)

41970 
exû±iÚ
;

41971 
	`JS_F»eV®ue
(
ùx
, 
z
);

41972 
z
 = 
	`JS_RegExpExec
(
ùx
, 
¥l™‹r
, 
¡r
);

41973 ià(
	`JS_IsExû±iÚ
(
z
))

41974 
exû±iÚ
;

41975 ià(
	`JS_IsNuÎ
(
z
)) {

41976 
q
 = 
	`¡ršg_advªû_šdex
(
¡½
, q, 
unicodeM©chšg
);

41978 ià(
	`JS_ToL’gthF»e
(
ùx
, &
e
, 
	`JS_G‘Prİ”ty
(ùx, 
¥l™‹r
, 
JS_ATOM_Ï¡Index
)))

41979 
exû±iÚ
;

41980 ià(
e
 > 
size
)

41981 
e
 = 
size
;

41982 ià(
e
 =ğ
p
) {

41983 
q
 = 
	`¡ršg_advªû_šdex
(
¡½
, q, 
unicodeM©chšg
);

41985 
sub
 = 
	`js_sub_¡ršg
(
ùx
, 
¡½
, 
p
, 
q
);

41986 ià(
	`JS_IsExû±iÚ
(
sub
))

41987 
exû±iÚ
;

41988 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
A
, 
ËngthA
++, 
sub
) < 0)

41989 
exû±iÚ
;

41990 ià(
ËngthA
 =ğ
lim
)

41991 
dÚe
;

41992 
p
 = 
e
;

41993 ià(
	`js_g‘_Ëngth64
(
ùx
, &
numb”OfC­tu»s
, 
z
))

41994 
exû±iÚ
;

41995 
i
 = 1; i < 
numb”OfC­tu»s
; i++) {

41996 
sub
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_G‘Prİ”tyIÁ64
(ùx, 
z
, 
i
));

41997 ià(
	`JS_IsExû±iÚ
(
sub
))

41998 
exû±iÚ
;

41999 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
A
, 
ËngthA
++, 
sub
) < 0)

42000 
exû±iÚ
;

42001 ià(
ËngthA
 =ğ
lim
)

42002 
dÚe
;

42004 
q
 = 
p
;

42008 
add_
:

42009 ià(
p
 > 
size
)

42010 
p
 = 
size
;

42011 
sub
 = 
	`js_sub_¡ršg
(
ùx
, 
¡½
, 
p
, 
size
);

42012 ià(
	`JS_IsExû±iÚ
(
sub
))

42013 
exû±iÚ
;

42014 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
A
, 
ËngthA
++, 
sub
) < 0)

42015 
exû±iÚ
;

42016 
dÚe
;

42017 
exû±iÚ
:

42018 
	`JS_F»eV®ue
(
ùx
, 
A
);

42019 
A
 = 
JS_EXCEPTION
;

42020 
dÚe
:

42021 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

42022 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

42023 
	`JS_F»eV®ue
(
ùx
, 
¥l™‹r
);

42024 
	`JS_F»eV®ue
(
ùx
, 
æags
);

42025 
	`JS_F»eV®ue
(
ùx
, 
z
);

42026  
A
;

42027 
	}
}

42029 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_»gexp_funcs
[] = {

42030 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
 ),

42035 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_»gexp_´Ùo_funcs
[] = {

42036 
JS_CGETSET_DEF
("æags", 
js_»gexp_g‘_æags
, 
NULL
 ),

42037 
JS_CGETSET_DEF
("sourû", 
js_»gexp_g‘_sourû
, 
NULL
 ),

42038 
JS_CGETSET_MAGIC_DEF
("glob®", 
js_»gexp_g‘_æag
, 
NULL
, 1 ),

42039 
JS_CGETSET_MAGIC_DEF
("ignÜeCa£", 
js_»gexp_g‘_æag
, 
NULL
, 2 ),

42040 
JS_CGETSET_MAGIC_DEF
("muÉše", 
js_»gexp_g‘_æag
, 
NULL
, 4 ),

42041 
JS_CGETSET_MAGIC_DEF
("dÙAÎ", 
js_»gexp_g‘_æag
, 
NULL
, 8 ),

42042 
JS_CGETSET_MAGIC_DEF
("unicode", 
js_»gexp_g‘_æag
, 
NULL
, 16 ),

42043 
JS_CGETSET_MAGIC_DEF
("¡icky", 
js_»gexp_g‘_æag
, 
NULL
, 32 ),

42044 
JS_CFUNC_DEF
("exec", 1, 
js_»gexp_exec
 ),

42045 
JS_CFUNC_DEF
("compe", 2, 
js_»gexp_compe
 ),

42046 
JS_CFUNC_DEF
("‹¡", 1, 
js_»gexp_‹¡
 ),

42047 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_»gexp_toSŒšg
 ),

42048 
JS_CFUNC_DEF
("[SymbŞ.»¶aû]", 2, 
js_»gexp_SymbŞ_»¶aû
 ),

42049 
JS_CFUNC_DEF
("[SymbŞ.m©ch]", 1, 
js_»gexp_SymbŞ_m©ch
 ),

42050 
JS_CFUNC_DEF
("[SymbŞ.m©chAÎ]", 1, 
js_»gexp_SymbŞ_m©chAÎ
 ),

42051 
JS_CFUNC_DEF
("[SymbŞ.£¬ch]", 1, 
js_»gexp_SymbŞ_£¬ch
 ),

42052 
JS_CFUNC_DEF
("[SymbŞ.¥l™]", 2, 
js_»gexp_SymbŞ_¥l™
 ),

42057 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_»gexp_¡ršg_™”©Ü_´Ùo_funcs
[] = {

42058 
JS_ITERATOR_NEXT_DEF
("Ãxt", 0, 
js_»gexp_¡ršg_™”©Ü_Ãxt
, 0 ),

42059 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "RegEx°SŒšg I‹¿tÜ", 
JS_PROP_CONFIGURABLE
 ),

42062 
	$JS_AddIÁršsicRegExpComp”
(
JSCÚ‹xt
 *
ùx
)

42064 
ùx
->
compe_»gexp
 = 
js_compe_»gexp
;

42065 
	}
}

42067 
	$JS_AddIÁršsicRegExp
(
JSCÚ‹xt
 *
ùx
)

42069 
JSV®ueCÚ¡
 
obj
;

42071 
	`JS_AddIÁršsicRegExpComp”
(
ùx
);

42073 
ùx
->
şass_´Ùo
[
JS_CLASS_REGEXP
] = 
	`JS_NewObjeù
(ctx);

42074 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_REGEXP
], 
js_»gexp_´Ùo_funcs
,

42075 
	`couÁof
(
js_»gexp_´Ùo_funcs
));

42076 
obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "RegExp", 
js_»gexp_cÚ¡ruùÜ
, 2,

42077 
ùx
->
şass_´Ùo
[
JS_CLASS_REGEXP
]);

42078 
ùx
->
»gexp_ùÜ
 = 
	`JS_DupV®ue
(ùx, 
obj
);

42079 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
, 
js_»gexp_funcs
, 
	`couÁof
(js_regexp_funcs));

42081 
ùx
->
şass_´Ùo
[
JS_CLASS_REGEXP_STRING_ITERATOR
] =

42082 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
™”©Ü_´Ùo
);

42083 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_REGEXP_STRING_ITERATOR
],

42084 
js_»gexp_¡ršg_™”©Ü_´Ùo_funcs
,

42085 
	`couÁof
(
js_»gexp_¡ršg_™”©Ü_´Ùo_funcs
));

42086 
	}
}

42093 
JSV®ue
 
	$jsÚ_·r£_v®ue
(
JSP¬£S‹
 *
s
)

42095 
JSCÚ‹xt
 *
ùx
 = 
s
->ctx;

42096 
JSV®ue
 
v®
 = 
JS_NULL
;

42097 
BOOL
 
is_Ãg
;

42098 
»t
;

42100 
s
->
tok’
.
v®
) {

42103 
JSV®ue
 
´İ_v®
, 
´İ_¡r
;

42105 ià(
	`Ãxt_tok’
(
s
))

42106 
ç
;

42107 
v®
 = 
	`JS_NewObjeù
(
ùx
);

42108 ià(
	`JS_IsExû±iÚ
(
v®
))

42109 
ç
;

42110 ià(
s
->
tok’
.
v®
 != '}') {

42112 ià(
s
->
tok’
.
v®
 !ğ
TOK_STRING
) {

42113 
	`js_·r£_”rÜ
(
s
, "expecting…roperty‚ame");

42114 
ç
;

42116 
´İ_¡r
 = 
	`JS_DupV®ue
(
ùx
, 
s
->
tok’
.
u
.
¡r
.str);

42117 ià(
	`Ãxt_tok’
(
s
)) {

42118 
	`JS_F»eV®ue
(
ùx
, 
´İ_¡r
);

42119 
ç
;

42121 ià(
	`js_·r£_ex³ù
(
s
, ':')) {

42122 
	`JS_F»eV®ue
(
ùx
, 
´İ_¡r
);

42123 
ç
;

42125 
´İ_v®
 = 
	`jsÚ_·r£_v®ue
(
s
);

42126 ià(
	`JS_IsExû±iÚ
(
´İ_v®
)) {

42127 
	`JS_F»eV®ue
(
ùx
, 
´İ_¡r
);

42128 
ç
;

42130 
»t
 = 
	`JS_DefšePrİ”tyV®ueV®ue
(
ùx
, 
v®
, 
´İ_¡r
,

42131 
´İ_v®
, 
JS_PROP_C_W_E
);

42132 ià(
»t
 < 0)

42133 
ç
;

42135 ià(
s
->
tok’
.
v®
 != ',')

42137 ià(
	`Ãxt_tok’
(
s
))

42138 
ç
;

42141 ià(
	`js_·r£_ex³ù
(
s
, '}'))

42142 
ç
;

42147 
JSV®ue
 
–
;

42148 
ušt32_t
 
idx
;

42150 ià(
	`Ãxt_tok’
(
s
))

42151 
ç
;

42152 
v®
 = 
	`JS_NewA¼ay
(
ùx
);

42153 ià(
	`JS_IsExû±iÚ
(
v®
))

42154 
ç
;

42155 ià(
s
->
tok’
.
v®
 != ']') {

42156 
idx
 = 0;

42158 
–
 = 
	`jsÚ_·r£_v®ue
(
s
);

42159 ià(
	`JS_IsExû±iÚ
(
–
))

42160 
ç
;

42161 
»t
 = 
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
v®
, 
idx
, 
–
, 
JS_PROP_C_W_E
);

42162 ià(
»t
 < 0)

42163 
ç
;

42164 ià(
s
->
tok’
.
v®
 != ',')

42166 ià(
	`Ãxt_tok’
(
s
))

42167 
ç
;

42168 
idx
++;

42171 ià(
	`js_·r£_ex³ù
(
s
, ']'))

42172 
ç
;

42175 
TOK_STRING
:

42176 
v®
 = 
	`JS_DupV®ue
(
ùx
, 
s
->
tok’
.
u
.
¡r
.str);

42177 ià(
	`Ãxt_tok’
(
s
))

42178 
ç
;

42180 
TOK_NUMBER
:

42181 
is_Ãg
 = 0;

42182 
numb”
;

42184 ià(
	`Ãxt_tok’
(
s
))

42185 
ç
;

42186 ià(
s
->
tok’
.
v®
 !ğ
TOK_NUMBER
) {

42187 
	`js_·r£_”rÜ
(
s
, "numberƒxpected");

42188 
ç
;

42190 
is_Ãg
 = 1;

42191 
numb”
:

42192 
v®
 = 
s
->
tok’
.
u
.
num
.val;

42193 ià(
is_Ãg
) {

42194 
d
;

42195 
	`JS_ToFlßt64
(
ùx
, &
d
, 
v®
);

42196 
v®
 = 
	`JS_NewFlßt64
(
ùx
, -
d
);

42198 ià(
	`Ãxt_tok’
(
s
))

42199 
ç
;

42201 
TOK_FALSE
:

42202 
TOK_TRUE
:

42203 
v®
 = 
	`JS_NewBoŞ
(
ùx
, 
s
->
tok’
.v® - 
TOK_FALSE
);

42204 ià(
	`Ãxt_tok’
(
s
))

42205 
ç
;

42207 
TOK_NULL
:

42208 ià(
	`Ãxt_tok’
(
s
))

42209 
ç
;

42212 ià(
s
->
tok’
.
v®
 =ğ
TOK_EOF
) {

42213 
	`js_·r£_”rÜ
(
s
, "unexpectedƒnd of input");

42215 
	`js_·r£_”rÜ
(
s
, "unexpectedoken: '%.*s'",

42216 ()(
s
->
buf_±r
 - s->
tok’
.
±r
), s->token.ptr);

42218 
ç
;

42220  
v®
;

42221 
ç
:

42222 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42223  
JS_EXCEPTION
;

42224 
	}
}

42226 
JSV®ue
 
	$JS_P¬£JSON
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
buf
, 
size_t
 
buf_Ën
,

42227 cÚ¡ *
f’ame
)

42229 
JSP¬£S‹
 
s1
, *
s
 = &s1;

42230 
JSV®ue
 
v®
;

42232 
	`js_·r£_š™
(
ùx
, 
s
, 
buf
, 
buf_Ën
, 
f’ame
);

42234 ià(
	`Ãxt_tok’
(
s
))

42235 
ç
;

42236 
v®
 = 
	`jsÚ_·r£_v®ue
(
s
);

42237 ià(
	`JS_IsExû±iÚ
(
v®
))

42238 
ç
;

42239 ià(
s
->
tok’
.
v®
 !ğ
TOK_EOF
) {

42240 ià(
	`js_·r£_”rÜ
(
s
, "unexpected data‡theƒnd"))

42241 
ç
;

42243  
v®
;

42244 
ç
:

42245 
	`ä“_tok’
(
s
, &s->
tok’
);

42246  
JS_EXCEPTION
;

42247 
	}
}

42249 
JSV®ue
 
	$š‹º®ize_jsÚ_´İ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
hŞd”
,

42250 
JSAtom
 
Çme
, 
JSV®ueCÚ¡
 
»viv”
)

42252 
JSV®ue
 
v®
, 
Ãw_–
, 
Çme_v®
, 
»s
;

42253 
JSV®ueCÚ¡
 
¬gs
[2];

42254 
»t
, 
is_¬¿y
;

42255 
ušt32_t
 
i
, 
Ën
 = 0;

42256 
JSAtom
 
´İ
;

42257 
JSPrİ”tyEnum
 *
©oms
 = 
NULL
;

42259 ià(
	`js_check_¡ack_ov”æow
(
ùx
->
¹
, 0)) {

42260  
	`JS_ThrowSckOv”æow
(
ùx
);

42263 
v®
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
hŞd”
, 
Çme
);

42264 ià(
	`JS_IsExû±iÚ
(
v®
))

42265  
v®
;

42266 ià(
	`JS_IsObjeù
(
v®
)) {

42267 
is_¬¿y
 = 
	`JS_IsA¼ay
(
ùx
, 
v®
);

42268 ià(
is_¬¿y
 < 0)

42269 
ç
;

42270 ià(
is_¬¿y
) {

42271 ià(
	`js_g‘_Ëngth32
(
ùx
, &
Ën
, 
v®
))

42272 
ç
;

42274 
»t
 = 
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
©oms
, &
Ën
, 
	`JS_VALUE_GET_OBJ
(
v®
), 
JS_GPN_ENUM_ONLY
 | 
JS_GPN_STRING_MASK
);

42275 ià(
»t
 < 0)

42276 
ç
;

42278 
i
 = 0; i < 
Ën
; i++) {

42279 ià(
is_¬¿y
) {

42280 
´İ
 = 
	`JS_NewAtomUIÁ32
(
ùx
, 
i
);

42281 ià(
´İ
 =ğ
JS_ATOM_NULL
)

42282 
ç
;

42284 
´İ
 = 
	`JS_DupAtom
(
ùx
, 
©oms
[
i
].
©om
);

42286 
Ãw_–
 = 
	`š‹º®ize_jsÚ_´İ”ty
(
ùx
, 
v®
, 
´İ
, 
»viv”
);

42287 ià(
	`JS_IsExû±iÚ
(
Ãw_–
)) {

42288 
	`JS_F»eAtom
(
ùx
, 
´İ
);

42289 
ç
;

42291 ià(
	`JS_IsUndefšed
(
Ãw_–
)) {

42292 
»t
 = 
	`JS_D–‘ePrİ”ty
(
ùx
, 
v®
, 
´İ
, 0);

42294 
»t
 = 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
v®
, 
´İ
, 
Ãw_–
, 
JS_PROP_C_W_E
);

42296 
	`JS_F»eAtom
(
ùx
, 
´İ
);

42297 ià(
»t
 < 0)

42298 
ç
;

42301 
	`js_ä“_´İ_’um
(
ùx
, 
©oms
, 
Ën
);

42302 
©oms
 = 
NULL
;

42303 
Çme_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
Çme
);

42304 ià(
	`JS_IsExû±iÚ
(
Çme_v®
))

42305 
ç
;

42306 
¬gs
[0] = 
Çme_v®
;

42307 
¬gs
[1] = 
v®
;

42308 
»s
 = 
	`JS_C®l
(
ùx
, 
»viv”
, 
hŞd”
, 2, 
¬gs
);

42309 
	`JS_F»eV®ue
(
ùx
, 
Çme_v®
);

42310 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42311  
»s
;

42312 
ç
:

42313 
	`js_ä“_´İ_’um
(
ùx
, 
©oms
, 
Ën
);

42314 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42315  
JS_EXCEPTION
;

42316 
	}
}

42318 
JSV®ue
 
	$js_jsÚ_·r£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42319 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42321 
JSV®ue
 
obj
, 
roÙ
;

42322 
JSV®ueCÚ¡
 
»viv”
;

42323 cÚ¡ *
¡r
;

42324 
size_t
 
Ën
;

42326 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
¬gv
[0]);

42327 ià(!
¡r
)

42328  
JS_EXCEPTION
;

42329 
obj
 = 
	`JS_P¬£JSON
(
ùx
, 
¡r
, 
Ën
, "<input>");

42330 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

42331 ià(
	`JS_IsExû±iÚ
(
obj
))

42332  
obj
;

42333 ià(
¬gc
 > 1 && 
	`JS_IsFunùiÚ
(
ùx
, 
¬gv
[1])) {

42334 
»viv”
 = 
¬gv
[1];

42335 
roÙ
 = 
	`JS_NewObjeù
(
ùx
);

42336 ià(
	`JS_IsExû±iÚ
(
roÙ
)) {

42337 
	`JS_F»eV®ue
(
ùx
, 
obj
);

42338  
JS_EXCEPTION
;

42340 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
roÙ
, 
JS_ATOM_em±y_¡ršg
, 
obj
,

42341 
JS_PROP_C_W_E
) < 0) {

42342 
	`JS_F»eV®ue
(
ùx
, 
roÙ
);

42343  
JS_EXCEPTION
;

42345 
obj
 = 
	`š‹º®ize_jsÚ_´İ”ty
(
ùx
, 
roÙ
, 
JS_ATOM_em±y_¡ršg
,

42346 
»viv”
);

42347 
	`JS_F»eV®ue
(
ùx
, 
roÙ
);

42349  
obj
;

42350 
	}
}

42352 
	sJSONSŒšgifyCÚ‹xt
 {

42353 
JSV®ueCÚ¡
 
	m»¶aûr_func
;

42354 
JSV®ue
 
	m¡ack
;

42355 
JSV®ue
 
	m´İ”ty_li¡
;

42356 
JSV®ue
 
	mg­
;

42357 
JSV®ue
 
	mem±y
;

42358 
SŒšgBufãr
 *
	mb
;

42359 } 
	tJSONSŒšgifyCÚ‹xt
;

42361 
JSV®ue
 
	$JS_ToQuÙedSŒšgF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
) {

42362 
JSV®ue
 
r
 = 
	`JS_ToQuÙedSŒšg
(
ùx
, 
v®
);

42363 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42364  
r
;

42365 
	}
}

42367 
JSV®ue
 
	$js_jsÚ_check
(
JSCÚ‹xt
 *
ùx
, 
JSONSŒšgifyCÚ‹xt
 *
jsc
,

42368 
JSV®ueCÚ¡
 
hŞd”
, 
JSV®ue
 
v®
, JSV®ueCÚ¡ 
key
)

42370 
JSV®ue
 
v
;

42371 
JSV®ueCÚ¡
 
¬gs
[2];

42373 ià(
	`JS_IsObjeù
(
v®
)

42374 #ifdeà
CONFIG_BIGNUM


42375 || 
	`JS_IsBigIÁ
(
ùx
, 
v®
)

42378 
JSV®ue
 
f
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
v®
, 
JS_ATOM_toJSON
);

42379 ià(
	`JS_IsExû±iÚ
(
f
))

42380 
exû±iÚ
;

42381 ià(
	`JS_IsFunùiÚ
(
ùx
, 
f
)) {

42382 
v
 = 
	`JS_C®lF»e
(
ùx
, 
f
, 
v®
, 1, &
key
);

42383 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42384 
v®
 = 
v
;

42385 ià(
	`JS_IsExû±iÚ
(
v®
))

42386 
exû±iÚ
;

42388 
	`JS_F»eV®ue
(
ùx
, 
f
);

42392 ià(!
	`JS_IsUndefšed
(
jsc
->
»¶aûr_func
)) {

42393 
¬gs
[0] = 
key
;

42394 
¬gs
[1] = 
v®
;

42395 
v
 = 
	`JS_C®l
(
ùx
, 
jsc
->
»¶aûr_func
, 
hŞd”
, 2, 
¬gs
);

42396 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42397 
v®
 = 
v
;

42398 ià(
	`JS_IsExû±iÚ
(
v®
))

42399 
exû±iÚ
;

42402 
	`JS_VALUE_GET_NORM_TAG
(
v®
)) {

42403 
JS_TAG_OBJECT
:

42404 ià(
	`JS_IsFunùiÚ
(
ùx
, 
v®
))

42406 
JS_TAG_STRING
:

42407 
JS_TAG_INT
:

42408 
JS_TAG_FLOAT64
:

42409 #ifdeà
CONFIG_BIGNUM


42410 
JS_TAG_BIG_FLOAT
:

42412 
JS_TAG_BOOL
:

42413 
JS_TAG_NULL
:

42414 #ifdeà
CONFIG_BIGNUM


42415 
JS_TAG_BIG_INT
:

42417 
JS_TAG_EXCEPTION
:

42418  
v®
;

42422 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42423  
JS_UNDEFINED
;

42425 
exû±iÚ
:

42426 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42427  
JS_EXCEPTION
;

42428 
	}
}

42430 
	$js_jsÚ_to_¡r
(
JSCÚ‹xt
 *
ùx
, 
JSONSŒšgifyCÚ‹xt
 *
jsc
,

42431 
JSV®ueCÚ¡
 
hŞd”
, 
JSV®ue
 
v®
,

42432 
JSV®ueCÚ¡
 
šd’t
)

42434 
JSV®ue
 
šd’t1
, 
£p
, 
£p1
, 
b
, 
v
, 
´İ
;

42435 
JSObjeù
 *
p
;

42436 
sšt64_t
 
i
, 
Ën
;

42437 
ş
, 
»t
;

42438 
BOOL
 
has_cÚ‹Á
;

42440 
šd’t1
 = 
JS_UNDEFINED
;

42441 
£p
 = 
JS_UNDEFINED
;

42442 
£p1
 = 
JS_UNDEFINED
;

42443 
b
 = 
JS_UNDEFINED
;

42444 
´İ
 = 
JS_UNDEFINED
;

42446 
	`JS_VALUE_GET_NORM_TAG
(
v®
)) {

42447 
JS_TAG_OBJECT
:

42448 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

42449 
ş
 = 
p
->
şass_id
;

42450 ià(
ş
 =ğ
JS_CLASS_STRING
) {

42451 
v®
 = 
	`JS_ToSŒšgF»e
(
ùx
, val);

42452 ià(
	`JS_IsExû±iÚ
(
v®
))

42453 
exû±iÚ
;

42454 
v®
 = 
	`JS_ToQuÙedSŒšgF»e
(
ùx
, val);

42455 ià(
	`JS_IsExû±iÚ
(
v®
))

42456 
exû±iÚ
;

42457  
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
jsc
->
b
, 
v®
);

42458 } ià(
ş
 =ğ
JS_CLASS_NUMBER
) {

42459 
v®
 = 
	`JS_ToNumb”F»e
(
ùx
, val);

42460 ià(
	`JS_IsExû±iÚ
(
v®
))

42461 
exû±iÚ
;

42462  
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
jsc
->
b
, 
v®
);

42463 } ià(
ş
 =ğ
JS_CLASS_BOOLEAN
) {

42464 
»t
 = 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
p
->
u
.
objeù_d©a
);

42465 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42466  
»t
;

42468 #ifdeà
CONFIG_BIGNUM


42469 ià(
ş
 =ğ
JS_CLASS_BIG_FLOAT
) {

42470  
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
jsc
->
b
, 
v®
);

42471 } ià(
ş
 =ğ
JS_CLASS_BIG_INT
) {

42472 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigint‡re forbidden in JSON.stringify");

42473 
exû±iÚ
;

42476 
v
 = 
	`js_¬¿y_šşudes
(
ùx
, 
jsc
->
¡ack
, 1, (
JSV®ueCÚ¡
 *)&
v®
);

42477 ià(
	`JS_IsExû±iÚ
(
v
))

42478 
exû±iÚ
;

42479 ià(
	`JS_ToBoŞF»e
(
ùx
, 
v
)) {

42480 
	`JS_ThrowTy³E¼Ü
(
ùx
, "circular„eference");

42481 
exû±iÚ
;

42483 
šd’t1
 = 
	`JS_CÚÿtSŒšg
(
ùx
, 
	`JS_DupV®ue
(ùx, 
šd’t
), JS_DupV®ue(ùx, 
jsc
->
g­
));

42484 ià(
	`JS_IsExû±iÚ
(
šd’t1
))

42485 
exû±iÚ
;

42486 ià(!
	`JS_IsEm±ySŒšg
(
jsc
->
g­
)) {

42487 
£p
 = 
	`JS_CÚÿtSŒšg3
(
ùx
, "\n", 
	`JS_DupV®ue
(ùx, 
šd’t1
), "");

42488 ià(
	`JS_IsExû±iÚ
(
£p
))

42489 
exû±iÚ
;

42490 
£p1
 = 
	`JS_NewSŒšg
(
ùx
, " ");

42491 ià(
	`JS_IsExû±iÚ
(
£p1
))

42492 
exû±iÚ
;

42494 
£p
 = 
	`JS_DupV®ue
(
ùx
, 
jsc
->
em±y
);

42495 
£p1
 = 
	`JS_DupV®ue
(
ùx
, 
jsc
->
em±y
);

42497 
v
 = 
	`js_¬¿y_push
(
ùx
, 
jsc
->
¡ack
, 1, (
JSV®ueCÚ¡
 *)&
v®
, 0);

42498 ià(
	`check_exû±iÚ_ä“
(
ùx
, 
v
))

42499 
exû±iÚ
;

42500 
»t
 = 
	`JS_IsA¼ay
(
ùx
, 
v®
);

42501 ià(
»t
 < 0)

42502 
exû±iÚ
;

42503 ià(
»t
) {

42504 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
v®
))

42505 
exû±iÚ
;

42506 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, '[');

42507 
i
 = 0; i < 
Ën
; i++) {

42508 ià(
i
 > 0)

42509 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, ',');

42510 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
£p
);

42511 
v
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
v®
, 
i
);

42512 ià(
	`JS_IsExû±iÚ
(
v
))

42513 
exû±iÚ
;

42515 
´İ
 = 
	`JS_ToSŒšgF»e
(
ùx
, 
	`JS_NewIÁ64
(ùx, 
i
));

42516 ià(
	`JS_IsExû±iÚ
(
´İ
))

42517 
exû±iÚ
;

42518 
v
 = 
	`js_jsÚ_check
(
ùx
, 
jsc
, 
v®
, v, 
´İ
);

42519 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

42520 
´İ
 = 
JS_UNDEFINED
;

42521 ià(
	`JS_IsExû±iÚ
(
v
))

42522 
exû±iÚ
;

42523 ià(
	`JS_IsUndefšed
(
v
))

42524 
v
 = 
JS_NULL
;

42525 ià(
	`js_jsÚ_to_¡r
(
ùx
, 
jsc
, 
v®
, 
v
, 
šd’t1
))

42526 
exû±iÚ
;

42528 ià(
Ën
 > 0 && !
	`JS_IsEm±ySŒšg
(
jsc
->
g­
)) {

42529 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, '\n');

42530 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
šd’t
);

42532 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, ']');

42534 ià(!
	`JS_IsUndefšed
(
jsc
->
´İ”ty_li¡
))

42535 
b
 = 
	`JS_DupV®ue
(
ùx
, 
jsc
->
´İ”ty_li¡
);

42537 
b
 = 
	`js_objeù_keys
(
ùx
, 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
v®
, 
JS_ITERATOR_KIND_KEY
);

42538 ià(
	`JS_IsExû±iÚ
(
b
))

42539 
exû±iÚ
;

42540 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
b
))

42541 
exû±iÚ
;

42542 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, '{');

42543 
has_cÚ‹Á
 = 
FALSE
;

42544 
i
 = 0; i < 
Ën
; i++) {

42545 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

42546 
´İ
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
b
, 
i
);

42547 ià(
	`JS_IsExû±iÚ
(
´İ
))

42548 
exû±iÚ
;

42549 
v
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
v®
, 
	`JS_DupV®ue
(ùx, 
´İ
));

42550 ià(
	`JS_IsExû±iÚ
(
v
))

42551 
exû±iÚ
;

42552 
v
 = 
	`js_jsÚ_check
(
ùx
, 
jsc
, 
v®
, v, 
´İ
);

42553 ià(
	`JS_IsExû±iÚ
(
v
))

42554 
exû±iÚ
;

42555 ià(!
	`JS_IsUndefšed
(
v
)) {

42556 ià(
has_cÚ‹Á
)

42557 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, ',');

42558 
´İ
 = 
	`JS_ToQuÙedSŒšgF»e
(
ùx
,…rop);

42559 ià(
	`JS_IsExû±iÚ
(
´İ
)) {

42560 
	`JS_F»eV®ue
(
ùx
, 
v
);

42561 
exû±iÚ
;

42563 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
£p
);

42564 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
´İ
);

42565 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, ':');

42566 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
£p1
);

42567 ià(
	`js_jsÚ_to_¡r
(
ùx
, 
jsc
, 
v®
, 
v
, 
šd’t1
))

42568 
exû±iÚ
;

42569 
has_cÚ‹Á
 = 
TRUE
;

42572 ià(
has_cÚ‹Á
 && 
	`JS_VALUE_GET_STRING
(
jsc
->
g­
)->
Ën
 != 0) {

42573 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, '\n');

42574 
	`¡ršg_bufãr_cÚÿt_v®ue
(
jsc
->
b
, 
šd’t
);

42576 
	`¡ršg_bufãr_putc8
(
jsc
->
b
, '}');

42578 ià(
	`check_exû±iÚ_ä“
(
ùx
, 
	`js_¬¿y_pİ
(ùx, 
jsc
->
¡ack
, 0, 
NULL
, 0)))

42579 
exû±iÚ
;

42580 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42581 
	`JS_F»eV®ue
(
ùx
, 
b
);

42582 
	`JS_F»eV®ue
(
ùx
, 
£p
);

42583 
	`JS_F»eV®ue
(
ùx
, 
£p1
);

42584 
	`JS_F»eV®ue
(
ùx
, 
šd’t1
);

42585 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

42587 
JS_TAG_STRING
:

42588 
v®
 = 
	`JS_ToQuÙedSŒšgF»e
(
ùx
, val);

42589 ià(
	`JS_IsExû±iÚ
(
v®
))

42590 
exû±iÚ
;

42591 
cÚÿt_v®ue
;

42592 
JS_TAG_FLOAT64
:

42593 ià(!
	`isfš™e
(
	`JS_VALUE_GET_FLOAT64
(
v®
))) {

42594 
v®
 = 
JS_NULL
;

42596 
cÚÿt_v®ue
;

42597 
JS_TAG_INT
:

42598 #ifdeà
CONFIG_BIGNUM


42599 
JS_TAG_BIG_FLOAT
:

42601 
JS_TAG_BOOL
:

42602 
JS_TAG_NULL
:

42603 
cÚÿt_v®ue
:

42604  
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
jsc
->
b
, 
v®
);

42605 #ifdeà
CONFIG_BIGNUM


42606 
JS_TAG_BIG_INT
:

42607 
	`JS_ThrowTy³E¼Ü
(
ùx
, "bigint‡re forbidden in JSON.stringify");

42608 
exû±iÚ
;

42611 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42615 
exû±iÚ
:

42616 
	`JS_F»eV®ue
(
ùx
, 
v®
);

42617 
	`JS_F»eV®ue
(
ùx
, 
b
);

42618 
	`JS_F»eV®ue
(
ùx
, 
£p
);

42619 
	`JS_F»eV®ue
(
ùx
, 
£p1
);

42620 
	`JS_F»eV®ue
(
ùx
, 
šd’t1
);

42621 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

42623 
	}
}

42625 
JSV®ue
 
	$JS_JSONSŒšgify
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

42626 
JSV®ueCÚ¡
 
»¶aûr
, JSV®ueCÚ¡ 
¥aû0
)

42628 
SŒšgBufãr
 
b_s
;

42629 
JSONSŒšgifyCÚ‹xt
 
jsc_s
, *
jsc
 = &jsc_s;

42630 
JSV®ue
 
v®
, 
v
, 
¥aû
, 
»t
, 
w¿µ”
;

42631 
»s
;

42632 
sšt64_t
 
i
, 
j
, 
n
;

42634 
jsc
->
»¶aûr_func
 = 
JS_UNDEFINED
;

42635 
jsc
->
¡ack
 = 
JS_UNDEFINED
;

42636 
jsc
->
´İ”ty_li¡
 = 
JS_UNDEFINED
;

42637 
jsc
->
g­
 = 
JS_UNDEFINED
;

42638 
jsc
->
b
 = &
b_s
;

42639 
jsc
->
em±y
 = 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
);

42640 
»t
 = 
JS_UNDEFINED
;

42641 
w¿µ”
 = 
JS_UNDEFINED
;

42643 
	`¡ršg_bufãr_š™
(
ùx
, 
jsc
->
b
, 0);

42644 
jsc
->
¡ack
 = 
	`JS_NewA¼ay
(
ùx
);

42645 ià(
	`JS_IsExû±iÚ
(
jsc
->
¡ack
))

42646 
exû±iÚ
;

42647 ià(
	`JS_IsFunùiÚ
(
ùx
, 
»¶aûr
)) {

42648 
jsc
->
»¶aûr_func
 = 
»¶aûr
;

42650 
»s
 = 
	`JS_IsA¼ay
(
ùx
, 
»¶aûr
);

42651 ià(
»s
 < 0)

42652 
exû±iÚ
;

42653 ià(
»s
) {

42655 
jsc
->
´İ”ty_li¡
 = 
	`JS_NewA¼ay
(
ùx
);

42656 ià(
	`JS_IsExû±iÚ
(
jsc
->
´İ”ty_li¡
))

42657 
exû±iÚ
;

42658 ià(
	`js_g‘_Ëngth64
(
ùx
, &
n
, 
»¶aûr
))

42659 
exû±iÚ
;

42660 
i
 = 
j
 = 0; i < 
n
; i++) {

42661 
JSV®ue
 
´e£Á
;

42662 
v
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
»¶aûr
, 
i
);

42663 ià(
	`JS_IsExû±iÚ
(
v
))

42664 
exû±iÚ
;

42665 ià(
	`JS_IsObjeù
(
v
)) {

42666 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v
);

42667 ià(
p
->
şass_id
 =ğ
JS_CLASS_STRING
 ||

42668 
p
->
şass_id
 =ğ
JS_CLASS_NUMBER
) {

42669 
v
 = 
	`JS_ToSŒšgF»e
(
ùx
, v);

42670 ià(
	`JS_IsExû±iÚ
(
v
))

42671 
exû±iÚ
;

42673 
	`JS_F»eV®ue
(
ùx
, 
v
);

42676 } ià(
	`JS_IsNumb”
(
v
)) {

42677 
v
 = 
	`JS_ToSŒšgF»e
(
ùx
, v);

42678 ià(
	`JS_IsExû±iÚ
(
v
))

42679 
exû±iÚ
;

42680 } ià(!
	`JS_IsSŒšg
(
v
)) {

42681 
	`JS_F»eV®ue
(
ùx
, 
v
);

42684 
´e£Á
 = 
	`js_¬¿y_šşudes
(
ùx
, 
jsc
->
´İ”ty_li¡
,

42685 1, (
JSV®ueCÚ¡
 *)&
v
);

42686 ià(
	`JS_IsExû±iÚ
(
´e£Á
)) {

42687 
	`JS_F»eV®ue
(
ùx
, 
v
);

42688 
exû±iÚ
;

42690 ià(!
	`JS_ToBoŞF»e
(
ùx
, 
´e£Á
)) {

42691 
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
jsc
->
´İ”ty_li¡
, 
j
++, 
v
);

42693 
	`JS_F»eV®ue
(
ùx
, 
v
);

42698 
¥aû
 = 
	`JS_DupV®ue
(
ùx
, 
¥aû0
);

42699 ià(
	`JS_IsObjeù
(
¥aû
)) {

42700 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
¥aû
);

42701 ià(
p
->
şass_id
 =ğ
JS_CLASS_NUMBER
) {

42702 
¥aû
 = 
	`JS_ToNumb”F»e
(
ùx
, space);

42703 } ià(
p
->
şass_id
 =ğ
JS_CLASS_STRING
) {

42704 
¥aû
 = 
	`JS_ToSŒšgF»e
(
ùx
, space);

42706 ià(
	`JS_IsExû±iÚ
(
¥aû
)) {

42707 
	`JS_F»eV®ue
(
ùx
, 
¥aû
);

42708 
exû±iÚ
;

42711 ià(
	`JS_IsNumb”
(
¥aû
)) {

42712 
n
;

42713 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
n
, 
¥aû
, 0, 10, 0))

42714 
exû±iÚ
;

42715 
jsc
->
g­
 = 
	`JS_NewSŒšgL’
(
ùx
, " ", 
n
);

42716 } ià(
	`JS_IsSŒšg
(
¥aû
)) {

42717 
JSSŒšg
 *
p
 = 
	`JS_VALUE_GET_STRING
(
¥aû
);

42718 
jsc
->
g­
 = 
	`js_sub_¡ršg
(
ùx
, 
p
, 0, 
	`mš_št
Õ->
Ën
, 10));

42720 
jsc
->
g­
 = 
	`JS_DupV®ue
(
ùx
, jsc->
em±y
);

42722 
	`JS_F»eV®ue
(
ùx
, 
¥aû
);

42723 ià(
	`JS_IsExû±iÚ
(
jsc
->
g­
))

42724 
exû±iÚ
;

42725 
w¿µ”
 = 
	`JS_NewObjeù
(
ùx
);

42726 ià(
	`JS_IsExû±iÚ
(
w¿µ”
))

42727 
exû±iÚ
;

42728 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
w¿µ”
, 
JS_ATOM_em±y_¡ršg
,

42729 
	`JS_DupV®ue
(
ùx
, 
obj
), 
JS_PROP_C_W_E
) < 0)

42730 
exû±iÚ
;

42731 
v®
 = 
	`JS_DupV®ue
(
ùx
, 
obj
);

42733 
v®
 = 
	`js_jsÚ_check
(
ùx
, 
jsc
, 
w¿µ”
, v®, jsc->
em±y
);

42734 ià(
	`JS_IsExû±iÚ
(
v®
))

42735 
exû±iÚ
;

42736 ià(
	`JS_IsUndefšed
(
v®
)) {

42737 
»t
 = 
JS_UNDEFINED
;

42738 
dÚe1
;

42740 ià(
	`js_jsÚ_to_¡r
(
ùx
, 
jsc
, 
w¿µ”
, 
v®
, jsc->
em±y
))

42741 
exû±iÚ
;

42743 
»t
 = 
	`¡ršg_bufãr_’d
(
jsc
->
b
);

42744 
dÚe
;

42746 
exû±iÚ
:

42747 
»t
 = 
JS_EXCEPTION
;

42748 
dÚe1
:

42749 
	`¡ršg_bufãr_ä“
(
jsc
->
b
);

42750 
dÚe
:

42751 
	`JS_F»eV®ue
(
ùx
, 
w¿µ”
);

42752 
	`JS_F»eV®ue
(
ùx
, 
jsc
->
em±y
);

42753 
	`JS_F»eV®ue
(
ùx
, 
jsc
->
g­
);

42754 
	`JS_F»eV®ue
(
ùx
, 
jsc
->
´İ”ty_li¡
);

42755 
	`JS_F»eV®ue
(
ùx
, 
jsc
->
¡ack
);

42756  
»t
;

42757 
	}
}

42759 
JSV®ue
 
	$js_jsÚ_¡ršgify
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42760 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42763  
	`JS_JSONSŒšgify
(
ùx
, 
¬gv
[0],‡rgv[1],‡rgv[2]);

42764 
	}
}

42766 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_jsÚ_funcs
[] = {

42767 
JS_CFUNC_DEF
("·r£", 2, 
js_jsÚ_·r£
 ),

42768 
JS_CFUNC_DEF
("¡ršgify", 3, 
js_jsÚ_¡ršgify
 ),

42769 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "JSON", 
JS_PROP_CONFIGURABLE
 ),

42772 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_jsÚ_obj
[] = {

42773 
JS_OBJECT_DEF
("JSON", 
js_jsÚ_funcs
, 
couÁof
(js_jsÚ_funcs), 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 ),

42776 
	$JS_AddIÁršsicJSON
(
JSCÚ‹xt
 *
ùx
)

42779 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
glob®_obj
, 
js_jsÚ_obj
, 
	`couÁof
(js_json_obj));

42780 
	}
}

42784 
JSV®ue
 
	$js_»æeù_­¶y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42785 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42787  
	`js_funùiÚ_­¶y
(
ùx
, 
¬gv
[0], 
	`max_št
(0, 
¬gc
 - 1),‡rgv + 1, 0);

42788 
	}
}

42790 
JSV®ue
 
	$js_»æeù_cÚ¡ruù
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42791 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42793 
JSV®ueCÚ¡
 
func
, 
¬¿y_¬g
, 
Ãw_rg‘
;

42794 
JSV®ue
 *
b
, 
»t
;

42795 
ušt32_t
 
Ën
;

42797 
func
 = 
¬gv
[0];

42798 
¬¿y_¬g
 = 
¬gv
[1];

42799 ià(
¬gc
 > 2) {

42800 
Ãw_rg‘
 = 
¬gv
[2];

42801 ià(!
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
Ãw_rg‘
))

42802  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ constructor");

42804 
Ãw_rg‘
 = 
func
;

42806 
b
 = 
	`bud_¬g_li¡
(
ùx
, &
Ën
, 
¬¿y_¬g
);

42807 ià(!
b
)

42808  
JS_EXCEPTION
;

42809 
»t
 = 
	`JS_C®lCÚ¡ruùÜ2
(
ùx
, 
func
, 
Ãw_rg‘
, 
Ën
, (
JSV®ueCÚ¡
 *)
b
);

42810 
	`ä“_¬g_li¡
(
ùx
, 
b
, 
Ën
);

42811  
»t
;

42812 
	}
}

42814 
JSV®ue
 
	$js_»æeù_d–‘ePrİ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42815 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42817 
JSV®ueCÚ¡
 
obj
;

42818 
JSAtom
 
©om
;

42819 
»t
;

42821 
obj
 = 
¬gv
[0];

42822 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

42823  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

42824 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
¬gv
[1]);

42825 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

42826  
JS_EXCEPTION
;

42827 
»t
 = 
	`JS_D–‘ePrİ”ty
(
ùx
, 
obj
, 
©om
, 0);

42828 
	`JS_F»eAtom
(
ùx
, 
©om
);

42829 ià(
»t
 < 0)

42830  
JS_EXCEPTION
;

42832  
	`JS_NewBoŞ
(
ùx
, 
»t
);

42833 
	}
}

42835 
JSV®ue
 
	$js_»æeù_g‘
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42836 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42838 
JSV®ueCÚ¡
 
obj
, 
´İ
, 
»ûiv”
;

42839 
JSAtom
 
©om
;

42840 
JSV®ue
 
»t
;

42842 
obj
 = 
¬gv
[0];

42843 
´İ
 = 
¬gv
[1];

42844 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

42845  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

42846 ià(
¬gc
 > 2)

42847 
»ûiv”
 = 
¬gv
[2];

42849 
»ûiv”
 = 
obj
;

42850 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

42851 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

42852  
JS_EXCEPTION
;

42853 
»t
 = 
	`JS_G‘Prİ”tyIÁ”Çl
(
ùx
, 
obj
, 
©om
, 
»ûiv”
, 
FALSE
);

42854 
	`JS_F»eAtom
(
ùx
, 
©om
);

42855  
»t
;

42856 
	}
}

42858 
JSV®ue
 
	$js_»æeù_has
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42859 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42861 
JSV®ueCÚ¡
 
obj
, 
´İ
;

42862 
JSAtom
 
©om
;

42863 
»t
;

42865 
obj
 = 
¬gv
[0];

42866 
´İ
 = 
¬gv
[1];

42867 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

42868  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

42869 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

42870 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

42871  
JS_EXCEPTION
;

42872 
»t
 = 
	`JS_HasPrİ”ty
(
ùx
, 
obj
, 
©om
);

42873 
	`JS_F»eAtom
(
ùx
, 
©om
);

42874 ià(
»t
 < 0)

42875  
JS_EXCEPTION
;

42877  
	`JS_NewBoŞ
(
ùx
, 
»t
);

42878 
	}
}

42880 
JSV®ue
 
	$js_»æeù_£t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42881 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42883 
JSV®ueCÚ¡
 
obj
, 
´İ
, 
v®
, 
»ûiv”
;

42884 
»t
;

42885 
JSAtom
 
©om
;

42887 
obj
 = 
¬gv
[0];

42888 
´İ
 = 
¬gv
[1];

42889 
v®
 = 
¬gv
[2];

42890 ià(
¬gc
 > 3)

42891 
»ûiv”
 = 
¬gv
[3];

42893 
»ûiv”
 = 
obj
;

42894 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

42895  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

42896 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
´İ
);

42897 ià(
	`uÆik–y
(
©om
 =ğ
JS_ATOM_NULL
))

42898  
JS_EXCEPTION
;

42899 
»t
 = 
	`JS_S‘Prİ”tyG’”ic
(
ùx
, 
	`JS_VALUE_GET_OBJ
(
obj
), 
©om
,

42900 
	`JS_DupV®ue
(
ùx
, 
v®
), 
»ûiv”
, 0);

42901 
	`JS_F»eAtom
(
ùx
, 
©om
);

42902 ià(
»t
 < 0)

42903  
JS_EXCEPTION
;

42905  
	`JS_NewBoŞ
(
ùx
, 
»t
);

42906 
	}
}

42908 
JSV®ue
 
	$js_»æeù_£tPrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42909 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42911 
»t
;

42912 
»t
 = 
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
¬gv
[0],‡rgv[1], 
FALSE
);

42913 ià(
»t
 < 0)

42914  
JS_EXCEPTION
;

42916  
	`JS_NewBoŞ
(
ùx
, 
»t
);

42917 
	}
}

42919 
JSV®ue
 
	$js_»æeù_ownKeys
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

42920 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

42922 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[0]è!ğ
JS_TAG_OBJECT
)

42923  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

42924  
	`JS_G‘OwnPrİ”tyNames2
(
ùx
, 
¬gv
[0],

42925 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
,

42926 
JS_ITERATOR_KIND_KEY
);

42927 
	}
}

42929 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_»æeù_funcs
[] = {

42930 
JS_CFUNC_DEF
("­¶y", 3, 
js_»æeù_­¶y
 ),

42931 
JS_CFUNC_DEF
("cÚ¡ruù", 2, 
js_»æeù_cÚ¡ruù
 ),

42932 
JS_CFUNC_MAGIC_DEF
("defšePrİ”ty", 3, 
js_objeù_defšePrİ”ty
, 1 ),

42933 
JS_CFUNC_DEF
("d–‘ePrİ”ty", 2, 
js_»æeù_d–‘ePrİ”ty
 ),

42934 
JS_CFUNC_DEF
("g‘", 2, 
js_»æeù_g‘
 ),

42935 
JS_CFUNC_MAGIC_DEF
("g‘OwnPrİ”tyDesütÜ", 2, 
js_objeù_g‘OwnPrİ”tyDesütÜ
, 1 ),

42936 
JS_CFUNC_MAGIC_DEF
("g‘PrÙÙy³Of", 1, 
js_objeù_g‘PrÙÙy³Of
, 1 ),

42937 
JS_CFUNC_DEF
("has", 2, 
js_»æeù_has
 ),

42938 
JS_CFUNC_MAGIC_DEF
("isEx‹nsibË", 1, 
js_objeù_isEx‹nsibË
, 1 ),

42939 
JS_CFUNC_DEF
("ownKeys", 1, 
js_»æeù_ownKeys
 ),

42940 
JS_CFUNC_MAGIC_DEF
("´ev’tEx‹nsiÚs", 1, 
js_objeù_´ev’tEx‹nsiÚs
, 1 ),

42941 
JS_CFUNC_DEF
("£t", 3, 
js_»æeù_£t
 ),

42942 
JS_CFUNC_DEF
("£tPrÙÙy³Of", 2, 
js_»æeù_£tPrÙÙy³Of
 ),

42945 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_»æeù_obj
[] = {

42946 
JS_OBJECT_DEF
("Reæeù", 
js_»æeù_funcs
, 
couÁof
(js_»æeù_funcs), 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 ),

42951 
	$js_´oxy_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

42953 
JSProxyD©a
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_PROXY
);

42954 ià(
s
) {

42955 
	`JS_F»eV®ueRT
(
¹
, 
s
->
rg‘
);

42956 
	`JS_F»eV®ueRT
(
¹
, 
s
->
hªdËr
);

42957 
	`JS_F»eV®ueRT
(
¹
, 
s
->
´Ùo
);

42958 
	`js_ä“_¹
(
¹
, 
s
);

42960 
	}
}

42962 
	$js_´oxy_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

42963 
JS_M¬kFunc
 *
m¬k_func
)

42965 
JSProxyD©a
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_PROXY
);

42966 ià(
s
) {

42967 
	`JS_M¬kV®ue
(
¹
, 
s
->
rg‘
, 
m¬k_func
);

42968 
	`JS_M¬kV®ue
(
¹
, 
s
->
hªdËr
, 
m¬k_func
);

42969 
	`JS_M¬kV®ue
(
¹
, 
s
->
´Ùo
, 
m¬k_func
);

42971 
	}
}

42973 
JSV®ue
 
	$JS_ThrowTy³E¼ÜRevokedProxy
(
JSCÚ‹xt
 *
ùx
)

42975  
	`JS_ThrowTy³E¼Ü
(
ùx
, "revoked…roxy");

42976 
	}
}

42978 
JSProxyD©a
 *
	$g‘_´oxy_m‘hod
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
pm‘hod
,

42979 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
Çme
)

42981 
JSProxyD©a
 *
s
 = 
	`JS_G‘O·que
(
obj
, 
JS_CLASS_PROXY
);

42982 
JSV®ue
 
m‘hod
;

42985 ià(
	`js_check_¡ack_ov”æow
(
ùx
->
¹
, 0)) {

42986 
	`JS_ThrowSckOv”æow
(
ùx
);

42987  
NULL
;

42991 ià(
s
->
is_»voked
) {

42992 
	`JS_ThrowTy³E¼ÜRevokedProxy
(
ùx
);

42993  
NULL
;

42995 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
s
->
hªdËr
, 
Çme
);

42996 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

42997  
NULL
;

42998 ià(
	`JS_IsNuÎ
(
m‘hod
))

42999 
m‘hod
 = 
JS_UNDEFINED
;

43000 *
pm‘hod
 = 
m‘hod
;

43001  
s
;

43002 
	}
}

43004 
JSV®ueCÚ¡
 
	$js_´oxy_g‘PrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

43006 
JSProxyD©a
 *
s
;

43007 
JSV®ue
 
m‘hod
, 
»t
;

43008 
JSV®ueCÚ¡
 
´Ùo1
;

43009 
»s
;

43012 ià(
	`js_pŞl_š‹¼u±s
(
ùx
))

43013  
JS_EXCEPTION
;

43015 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_g‘PrÙÙy³Of
);

43016 ià(!
s
)

43017  
JS_EXCEPTION
;

43018 ià(
	`JS_IsUndefšed
(
m‘hod
))

43019  
	`JS_G‘PrÙÙy³
(
ùx
, 
s
->
rg‘
);

43020 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 1, (
JSV®ueCÚ¡
 *)&s->
rg‘
);

43021 ià(
	`JS_IsExû±iÚ
(
»t
))

43022  
»t
;

43023 ià(
	`JS_VALUE_GET_TAG
(
»t
è!ğ
JS_TAG_NULL
 &&

43024 
	`JS_VALUE_GET_TAG
(
»t
è!ğ
JS_TAG_OBJECT
) {

43025 
ç
;

43027 
»s
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43028 ià(
»s
 < 0) {

43029 
	`JS_F»eV®ue
(
ùx
, 
»t
);

43030  
JS_EXCEPTION
;

43032 ià(!
»s
) {

43034 
´Ùo1
 = 
	`JS_G‘PrÙÙy³
(
ùx
, 
s
->
rg‘
);

43035 ià(
	`JS_IsExû±iÚ
(
´Ùo1
)) {

43036 
	`JS_F»eV®ue
(
ùx
, 
»t
);

43037  
JS_EXCEPTION
;

43039 ià(
	`JS_VALUE_GET_OBJ
(
´Ùo1
è!ğJS_VALUE_GET_OBJ(
»t
)) {

43040 
ç
:

43041 
	`JS_F»eV®ue
(
ùx
, 
»t
);

43042  
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent…rototype");

43046 
	`£t_v®ue
(
ùx
, &
s
->
´Ùo
, 
»t
);

43047  (
JSV®ueCÚ¡
)
»t
;

43048 
	}
}

43050 
	$js_´oxy_£tPrÙÙy³Of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

43051 
JSV®ueCÚ¡
 
´Ùo_v®
, 
BOOL
 
throw_æag
)

43053 
JSProxyD©a
 *
s
;

43054 
JSV®ue
 
m‘hod
, 
»t
;

43055 
JSV®ueCÚ¡
 
¬gs
[2], 
´Ùo1
;

43056 
BOOL
 
»s
;

43057 
»s2
;

43059 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_£tPrÙÙy³Of
);

43060 ià(!
s
)

43062 ià(
	`JS_IsUndefšed
(
m‘hod
))

43063  
	`JS_S‘PrÙÙy³IÁ”Çl
(
ùx
, 
s
->
rg‘
, 
´Ùo_v®
, 
throw_æag
);

43064 
¬gs
[0] = 
s
->
rg‘
;

43065 
¬gs
[1] = 
´Ùo_v®
;

43066 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 2, 
¬gs
);

43067 ià(
	`JS_IsExû±iÚ
(
»t
))

43069 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

43070 ià(!
»s
) {

43071 ià(
throw_æag
) {

43072 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: bad…rototype");

43075  
FALSE
;

43078 
»s2
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43079 ià(
»s2
 < 0)

43081 ià(!
»s2
) {

43082 
´Ùo1
 = 
	`JS_G‘PrÙÙy³
(
ùx
, 
s
->
rg‘
);

43083 ià(
	`JS_IsExû±iÚ
(
´Ùo1
))

43085 ià(
	`JS_VALUE_GET_OBJ
(
´Ùo_v®
è!ğJS_VALUE_GET_OBJ(
´Ùo1
)) {

43086 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent…rototype");

43090  
TRUE
;

43091 
	}
}

43093 
	$js_´oxy_isEx‹nsibË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

43095 
JSProxyD©a
 *
s
;

43096 
JSV®ue
 
m‘hod
, 
»t
;

43097 
BOOL
 
»s
;

43098 
»s2
;

43100 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_isEx‹nsibË
);

43101 ià(!
s
)

43103 ià(
	`JS_IsUndefšed
(
m‘hod
))

43104  
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43105 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 1, (
JSV®ueCÚ¡
 *)&s->
rg‘
);

43106 ià(
	`JS_IsExû±iÚ
(
»t
))

43108 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

43109 
»s2
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43110 ià(
»s2
 < 0)

43111  
»s2
;

43112 ià(
»s
 !ğ
»s2
) {

43113 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent isExtensible");

43116  
»s
;

43117 
	}
}

43119 
	$js_´oxy_´ev’tEx‹nsiÚs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

43121 
JSProxyD©a
 *
s
;

43122 
JSV®ue
 
m‘hod
, 
»t
;

43123 
BOOL
 
»s
;

43124 
»s2
;

43126 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_´ev’tEx‹nsiÚs
);

43127 ià(!
s
)

43129 ià(
	`JS_IsUndefšed
(
m‘hod
))

43130  
	`JS_P»v’tEx‹nsiÚs
(
ùx
, 
s
->
rg‘
);

43131 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 1, (
JSV®ueCÚ¡
 *)&s->
rg‘
);

43132 ià(
	`JS_IsExû±iÚ
(
»t
))

43134 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

43135 ià(
»s
) {

43136 
»s2
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43137 ià(
»s2
 < 0)

43138  
»s2
;

43139 ià(
»s2
) {

43140 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent…reventExtensions");

43144  
»s
;

43145 
	}
}

43147 
	$js_´oxy_has
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
©om
)

43149 
JSProxyD©a
 *
s
;

43150 
JSV®ue
 
m‘hod
, 
»t1
, 
©om_v®
;

43151 
»t
, 
»s
;

43152 
JSObjeù
 *
p
;

43153 
JSV®ueCÚ¡
 
¬gs
[2];

43154 
BOOL
 
»s2
;

43156 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_has
);

43157 ià(!
s
)

43159 ià(
	`JS_IsUndefšed
(
m‘hod
))

43160  
	`JS_HasPrİ”ty
(
ùx
, 
s
->
rg‘
, 
©om
);

43161 
©om_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

43162 ià(
	`JS_IsExû±iÚ
(
©om_v®
)) {

43163 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43166 
¬gs
[0] = 
s
->
rg‘
;

43167 
¬gs
[1] = 
©om_v®
;

43168 
»t1
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 2, 
¬gs
);

43169 
	`JS_F»eV®ue
(
ùx
, 
©om_v®
);

43170 ià(
	`JS_IsExû±iÚ
(
»t1
))

43172 
»t
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t1
);

43173 ià(!
»t
) {

43174 
JSPrİ”tyDesütÜ
 
desc
;

43175 
p
 = 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
);

43176 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
©om
);

43177 ià(
»s
 < 0)

43179 ià(
»s
) {

43180 
»s2
 = !(
desc
.
æags
 & 
JS_PROP_CONFIGURABLE
);

43181 
	`js_ä“_desc
(
ùx
, &
desc
);

43182 ià(
»s2
 || !
p
->
ex‹nsibË
) {

43183 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent has");

43188  
»t
;

43189 
	}
}

43191 
JSV®ue
 
	$js_´oxy_g‘
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
©om
,

43192 
JSV®ueCÚ¡
 
»ûiv”
)

43194 
JSProxyD©a
 *
s
;

43195 
JSV®ue
 
m‘hod
, 
»t
, 
©om_v®
;

43196 
»s
;

43197 
JSV®ueCÚ¡
 
¬gs
[3];

43198 
JSPrİ”tyDesütÜ
 
desc
;

43200 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_g‘
);

43201 ià(!
s
)

43202  
JS_EXCEPTION
;

43204 ià(
	`JS_IsUndefšed
(
m‘hod
))

43205  
	`JS_G‘Prİ”tyIÁ”Çl
(
ùx
, 
s
->
rg‘
, 
©om
, 
»ûiv”
, 
FALSE
);

43206 
©om_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

43207 ià(
	`JS_IsExû±iÚ
(
©om_v®
)) {

43208 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43209  
JS_EXCEPTION
;

43211 
¬gs
[0] = 
s
->
rg‘
;

43212 
¬gs
[1] = 
©om_v®
;

43213 
¬gs
[2] = 
»ûiv”
;

43214 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 3, 
¬gs
);

43215 
	`JS_F»eV®ue
(
ùx
, 
©om_v®
);

43216 ià(
	`JS_IsExû±iÚ
(
»t
))

43217  
JS_EXCEPTION
;

43218 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
), 
©om
);

43219 ià(
»s
 < 0)

43220  
JS_EXCEPTION
;

43221 ià(
»s
) {

43222 ià((
desc
.
æags
 & (
JS_PROP_GETSET
 | 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
)) == 0) {

43223 ià(!
	`js_§me_v®ue
(
ùx
, 
desc
.
v®ue
, 
»t
)) {

43224 
ç
;

43226 } ià((
desc
.
æags
 & (
JS_PROP_GETSET
 | 
JS_PROP_CONFIGURABLE
)) == JS_PROP_GETSET) {

43227 ià(
	`JS_IsUndefšed
(
desc
.
g‘‹r
è&& !JS_IsUndefšed(
»t
)) {

43228 
ç
:

43229 
	`js_ä“_desc
(
ùx
, &
desc
);

43230 
	`JS_F»eV®ue
(
ùx
, 
»t
);

43231  
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent get");

43234 
	`js_ä“_desc
(
ùx
, &
desc
);

43236  
»t
;

43237 
	}
}

43239 
	$js_´oxy_£t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
©om
,

43240 
JSV®ueCÚ¡
 
v®ue
, JSV®ueCÚ¡ 
»ûiv”
, 
æags
)

43242 
JSProxyD©a
 *
s
;

43243 
JSV®ue
 
m‘hod
, 
»t1
, 
©om_v®
;

43244 
»t
, 
»s
;

43245 
JSV®ueCÚ¡
 
¬gs
[4];

43247 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_£t
);

43248 ià(!
s
)

43250 ià(
	`JS_IsUndefšed
(
m‘hod
)) {

43251  
	`JS_S‘Prİ”tyG’”ic
(
ùx
, 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
), 
©om
,

43252 
	`JS_DupV®ue
(
ùx
, 
v®ue
), 
»ûiv”
,

43253 
æags
);

43255 
©om_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);

43256 ià(
	`JS_IsExû±iÚ
(
©om_v®
)) {

43257 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43260 
¬gs
[0] = 
s
->
rg‘
;

43261 
¬gs
[1] = 
©om_v®
;

43262 
¬gs
[2] = 
v®ue
;

43263 
¬gs
[3] = 
»ûiv”
;

43264 
»t1
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 4, 
¬gs
);

43265 
	`JS_F»eV®ue
(
ùx
, 
©om_v®
);

43266 ià(
	`JS_IsExû±iÚ
(
»t1
))

43268 
»t
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t1
);

43269 ià(
»t
) {

43270 
JSPrİ”tyDesütÜ
 
desc
;

43271 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
), 
©om
);

43272 ià(
»s
 < 0)

43274 ià(
»s
) {

43275 ià((
desc
.
æags
 & (
JS_PROP_GETSET
 | 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
)) == 0) {

43276 ià(!
	`js_§me_v®ue
(
ùx
, 
desc
.
v®ue
, value)) {

43277 
ç
;

43279 } ià((
desc
.
æags
 & (
JS_PROP_GETSET
 | 
JS_PROP_CONFIGURABLE
)è=ğJS_PROP_GETSET && 
	`JS_IsUndefšed
(desc.
£‰”
)) {

43280 
ç
:

43281 
	`js_ä“_desc
(
ùx
, &
desc
);

43282 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent set");

43285 
	`js_ä“_desc
(
ùx
, &
desc
);

43288 ià((
æags
 & 
JS_PROP_THROW
) ||

43289 ((
æags
 & 
JS_PROP_THROW_STRICT
è&& 
	`is_¡riù_mode
(
ùx
))) {

43290 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: cannot set…roperty");

43294  
»t
;

43295 
	}
}

43297 
JSV®ue
 
	$js_ü—‹_desc
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
,

43298 
JSV®ueCÚ¡
 
g‘‹r
, JSV®ueCÚ¡ 
£‰”
,

43299 
æags
)

43301 
JSV®ue
 
»t
;

43302 
»t
 = 
	`JS_NewObjeù
(
ùx
);

43303 ià(
	`JS_IsExû±iÚ
(
»t
))

43304  
»t
;

43305 ià(
æags
 & 
JS_PROP_HAS_GET
) {

43306 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_g‘
, 
	`JS_DupV®ue
(ùx, 
g‘‹r
),

43307 
JS_PROP_C_W_E
);

43309 ià(
æags
 & 
JS_PROP_HAS_SET
) {

43310 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_£t
, 
	`JS_DupV®ue
(ùx, 
£‰”
),

43311 
JS_PROP_C_W_E
);

43313 ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

43314 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_v®ue
, 
	`JS_DupV®ue
(ùx, 
v®
),

43315 
JS_PROP_C_W_E
);

43317 ià(
æags
 & 
JS_PROP_HAS_WRITABLE
) {

43318 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_wr™abË
,

43319 
	`JS_NewBoŞ
(
ùx
, (
æags
 & 
JS_PROP_WRITABLE
) != 0),

43320 
JS_PROP_C_W_E
);

43322 ià(
æags
 & 
JS_PROP_HAS_ENUMERABLE
) {

43323 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_’um”abË
,

43324 
	`JS_NewBoŞ
(
ùx
, (
æags
 & 
JS_PROP_ENUMERABLE
) != 0),

43325 
JS_PROP_C_W_E
);

43327 ià(
æags
 & 
JS_PROP_HAS_CONFIGURABLE
) {

43328 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
»t
, 
JS_ATOM_cÚfigu¿bË
,

43329 
	`JS_NewBoŞ
(
ùx
, (
æags
 & 
JS_PROP_CONFIGURABLE
) != 0),

43330 
JS_PROP_C_W_E
);

43332  
»t
;

43333 
	}
}

43335 
	$js_´oxy_g‘_own_´İ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSPrİ”tyDesütÜ
 *
pdesc
,

43336 
JSV®ueCÚ¡
 
obj
, 
JSAtom
 
´İ
)

43338 
JSProxyD©a
 *
s
;

43339 
JSV®ue
 
m‘hod
, 
Œ­_»suÉ_obj
, 
´İ_v®
;

43340 
»s
, 
rg‘_desc_»t
, 
»t
;

43341 
JSObjeù
 *
p
;

43342 
JSV®ueCÚ¡
 
¬gs
[2];

43343 
JSPrİ”tyDesütÜ
 
»suÉ_desc
, 
rg‘_desc
;

43345 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_g‘OwnPrİ”tyDesütÜ
);

43346 ià(!
s
)

43348 
p
 = 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
);

43349 ià(
	`JS_IsUndefšed
(
m‘hod
)) {

43350  
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, 
pdesc
, 
p
, 
´İ
);

43352 
´İ_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
´İ
);

43353 ià(
	`JS_IsExû±iÚ
(
´İ_v®
)) {

43354 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43357 
¬gs
[0] = 
s
->
rg‘
;

43358 
¬gs
[1] = 
´İ_v®
;

43359 
Œ­_»suÉ_obj
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 2, 
¬gs
);

43360 
	`JS_F»eV®ue
(
ùx
, 
´İ_v®
);

43361 ià(
	`JS_IsExû±iÚ
(
Œ­_»suÉ_obj
))

43363 ià(!
	`JS_IsObjeù
(
Œ­_»suÉ_obj
è&& !
	`JS_IsUndefšed
(trap_result_obj)) {

43364 
	`JS_F»eV®ue
(
ùx
, 
Œ­_»suÉ_obj
);

43365 
ç
;

43367 
rg‘_desc_»t
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
rg‘_desc
, 
p
, 
´İ
);

43368 ià(
rg‘_desc_»t
 < 0) {

43369 
	`JS_F»eV®ue
(
ùx
, 
Œ­_»suÉ_obj
);

43372 ià(
rg‘_desc_»t
)

43373 
	`js_ä“_desc
(
ùx
, &
rg‘_desc
);

43374 ià(
	`JS_IsUndefšed
(
Œ­_»suÉ_obj
)) {

43375 ià(
rg‘_desc_»t
) {

43376 ià(!(
rg‘_desc
.
æags
 & 
JS_PROP_CONFIGURABLE
è|| !
p
->
ex‹nsibË
)

43377 
ç
;

43379 
»t
 = 
FALSE
;

43381 
æags1
, 
ex‹nsibË_rg‘
;

43382 
ex‹nsibË_rg‘
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43383 ià(
ex‹nsibË_rg‘
 < 0) {

43384 
	`JS_F»eV®ue
(
ùx
, 
Œ­_»suÉ_obj
);

43387 
»s
 = 
	`js_obj_to_desc
(
ùx
, &
»suÉ_desc
, 
Œ­_»suÉ_obj
);

43388 
	`JS_F»eV®ue
(
ùx
, 
Œ­_»suÉ_obj
);

43389 ià(
»s
 < 0)

43392 ià(
rg‘_desc_»t
) {

43394 
æags1
 = 
»suÉ_desc
.
æags
 | 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_HAS_ENUMERABLE
;

43395 ià(
»suÉ_desc
.
æags
 & 
JS_PROP_GETSET
)

43396 
æags1
 |ğ
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
;

43398 
æags1
 |ğ
JS_PROP_HAS_VALUE
 | 
JS_PROP_HAS_WRITABLE
;

43401 ià(!
	`check_defše_´İ_æags
(
rg‘_desc
.
æags
, 
æags1
))

43402 
ç1
;

43404 ià(!
ex‹nsibË_rg‘
)

43405 
ç1
;

43407 ià(!(
»suÉ_desc
.
æags
 & 
JS_PROP_CONFIGURABLE
)) {

43408 ià(!
rg‘_desc_»t
 || (
rg‘_desc
.
æags
 & 
JS_PROP_CONFIGURABLE
))

43409 
ç1
;

43410 ià((
»suÉ_desc
.
æags
 &

43411 (
JS_PROP_GETSET
 | 
JS_PROP_WRITABLE
)) == 0 &&

43412 
rg‘_desc_»t
 &&

43413 (
rg‘_desc
.
æags
 & 
JS_PROP_WRITABLE
) != 0) {

43415 
ç1
:

43416 
	`js_ä“_desc
(
ùx
, &
»suÉ_desc
);

43417 
ç
:

43418 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent getOwnPropertyDescriptor");

43422 
»t
 = 
TRUE
;

43423 ià(
pdesc
) {

43424 *
pdesc
 = 
»suÉ_desc
;

43426 
	`js_ä“_desc
(
ùx
, &
»suÉ_desc
);

43429  
»t
;

43430 
	}
}

43432 
	$js_´oxy_defše_own_´İ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

43433 
JSAtom
 
´İ
, 
JSV®ueCÚ¡
 
v®
,

43434 
JSV®ueCÚ¡
 
g‘‹r
, JSV®ueCÚ¡ 
£‰”
,

43435 
æags
)

43437 
JSProxyD©a
 *
s
;

43438 
JSV®ue
 
m‘hod
, 
»t1
, 
´İ_v®
, 
desc_v®
;

43439 
»s
, 
»t
;

43440 
JSObjeù
 *
p
;

43441 
JSV®ueCÚ¡
 
¬gs
[3];

43442 
JSPrİ”tyDesütÜ
 
desc
;

43443 
BOOL
 
£‰šg_nÙ_cÚfigu¿bË
;

43445 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_defšePrİ”ty
);

43446 ià(!
s
)

43448 ià(
	`JS_IsUndefšed
(
m‘hod
)) {

43449  
	`JS_DefšePrİ”ty
(
ùx
, 
s
->
rg‘
, 
´İ
, 
v®
, 
g‘‹r
, 
£‰”
, 
æags
);

43451 
´İ_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
´İ
);

43452 ià(
	`JS_IsExû±iÚ
(
´İ_v®
)) {

43453 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43456 
desc_v®
 = 
	`js_ü—‹_desc
(
ùx
, 
v®
, 
g‘‹r
, 
£‰”
, 
æags
);

43457 ià(
	`JS_IsExû±iÚ
(
desc_v®
)) {

43458 
	`JS_F»eV®ue
(
ùx
, 
´İ_v®
);

43459 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43462 
¬gs
[0] = 
s
->
rg‘
;

43463 
¬gs
[1] = 
´İ_v®
;

43464 
¬gs
[2] = 
desc_v®
;

43465 
»t1
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 3, 
¬gs
);

43466 
	`JS_F»eV®ue
(
ùx
, 
´İ_v®
);

43467 
	`JS_F»eV®ue
(
ùx
, 
desc_v®
);

43468 ià(
	`JS_IsExû±iÚ
(
»t1
))

43470 
»t
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t1
);

43471 ià(!
»t
) {

43472 ià(
æags
 & 
JS_PROP_THROW
) {

43473 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: definePropertyƒxception");

43479 
p
 = 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
);

43480 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
p
, 
´İ
);

43481 ià(
»s
 < 0)

43483 
£‰šg_nÙ_cÚfigu¿bË
 = ((
æags
 & (
JS_PROP_HAS_CONFIGURABLE
 |

43484 
JS_PROP_CONFIGURABLE
)) ==

43485 
JS_PROP_HAS_CONFIGURABLE
);

43486 ià(!
»s
) {

43487 ià(!
p
->
ex‹nsibË
 || 
£‰šg_nÙ_cÚfigu¿bË
)

43488 
ç
;

43490 ià(!
	`check_defše_´İ_æags
(
desc
.
æags
, flags) ||

43491 ((
desc
.
æags
 & 
JS_PROP_CONFIGURABLE
è&& 
£‰šg_nÙ_cÚfigu¿bË
)) {

43492 
ç1
;

43494 ià(
æags
 & (
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
)) {

43495 ià((
desc
.
æags
 & (
JS_PROP_GETSET
 | 
JS_PROP_CONFIGURABLE
)) ==

43496 
JS_PROP_GETSET
) {

43497 ià((
æags
 & 
JS_PROP_HAS_GET
) &&

43498 !
	`js_§me_v®ue
(
ùx
, 
g‘‹r
, 
desc
.getter)) {

43499 
ç1
;

43501 ià((
æags
 & 
JS_PROP_HAS_SET
) &&

43502 !
	`js_§me_v®ue
(
ùx
, 
£‰”
, 
desc
.setter)) {

43503 
ç1
;

43506 } ià(
æags
 & 
JS_PROP_HAS_VALUE
) {

43507 ià((
desc
.
æags
 & (
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
)) ==

43508 
JS_PROP_WRITABLE
 && !(
æags
 & JS_PROP_WRITABLE)) {

43510 
ç1
;

43511 } ià((
desc
.
æags
 & (
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
)) == 0 &&

43512 !
	`js_§me_v®ue
(
ùx
, 
v®
, 
desc
.
v®ue
)) {

43513 
ç1
;

43516 ià(
æags
 & 
JS_PROP_HAS_WRITABLE
) {

43517 ià((
desc
.
æags
 & (
JS_PROP_GETSET
 | 
JS_PROP_CONFIGURABLE
 |

43518 
JS_PROP_WRITABLE
)) == JS_PROP_WRITABLE) {

43520 
ç1
:

43521 
	`js_ä“_desc
(
ùx
, &
desc
);

43522 
ç
:

43523 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent defineProperty");

43527 
	`js_ä“_desc
(
ùx
, &
desc
);

43530 
	}
}

43532 
	$js_´oxy_d–‘e_´İ”ty
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

43533 
JSAtom
 
©om
)

43535 
JSProxyD©a
 *
s
;

43536 
JSV®ue
 
m‘hod
, 
»t
, 
©om_v®
;

43537 
»s
, 
»s2
, 
is_ex‹nsibË
;

43538 
JSV®ueCÚ¡
 
¬gs
[2];

43540 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_d–‘ePrİ”ty
);

43541 ià(!
s
)

43543 ià(
	`JS_IsUndefšed
(
m‘hod
)) {

43544  
	`JS_D–‘ePrİ”ty
(
ùx
, 
s
->
rg‘
, 
©om
, 0);

43546 
©om_v®
 = 
	`JS_AtomToV®ue
(
ùx
, 
©om
);;

43547 ià(
	`JS_IsExû±iÚ
(
©om_v®
)) {

43548 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43551 
¬gs
[0] = 
s
->
rg‘
;

43552 
¬gs
[1] = 
©om_v®
;

43553 
»t
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 2, 
¬gs
);

43554 
	`JS_F»eV®ue
(
ùx
, 
©om_v®
);

43555 ià(
	`JS_IsExû±iÚ
(
»t
))

43557 
»s
 = 
	`JS_ToBoŞF»e
(
ùx
, 
»t
);

43558 ià(
»s
) {

43559 
JSPrİ”tyDesütÜ
 
desc
;

43560 
»s2
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
), 
©om
);

43561 ià(
»s2
 < 0)

43563 ià(
»s2
) {

43564 ià(!(
desc
.
æags
 & 
JS_PROP_CONFIGURABLE
))

43565 
ç
;

43566 
is_ex‹nsibË
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43567 ià(
is_ex‹nsibË
 < 0)

43568 
ç1
;

43569 ià(!
is_ex‹nsibË
) {

43571 
ç
:

43572 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: inconsistent deleteProperty");

43573 
ç1
:

43574 
	`js_ä“_desc
(
ùx
, &
desc
);

43577 
	`js_ä“_desc
(
ùx
, &
desc
);

43580  
»s
;

43581 
	}
}

43584 
	$fšd_´İ_key
(cÚ¡ 
JSPrİ”tyEnum
 *
b
, 
n
, 
JSAtom
 
©om
)

43586 
i
;

43587 
i
 = 0; i < 
n
; i++) {

43588 ià(
b
[
i
].
©om
 ==‡tom)

43589  
i
;

43592 
	}
}

43594 
	$js_´oxy_g‘_own_´İ”ty_Çmes
(
JSCÚ‹xt
 *
ùx
,

43595 
JSPrİ”tyEnum
 **
±ab
,

43596 
ušt32_t
 *
¶’
,

43597 
JSV®ueCÚ¡
 
obj
)

43599 
JSProxyD©a
 *
s
;

43600 
JSV®ue
 
m‘hod
, 
´İ_¬¿y
, 
v®
;

43601 
ušt32_t
 
Ën
, 
i
, 
Ën2
;

43602 
JSPrİ”tyEnum
 *
b
, *
b2
;

43603 
JSAtom
 
©om
;

43604 
JSPrİ”tyDesütÜ
 
desc
;

43605 
»s
, 
is_ex‹nsibË
, 
idx
;

43607 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
obj
, 
JS_ATOM_ownKeys
);

43608 ià(!
s
)

43610 ià(
	`JS_IsUndefšed
(
m‘hod
)) {

43611  
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, 
±ab
, 
¶’
,

43612 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
),

43613 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
);

43615 
´İ_¬¿y
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 1, (
JSV®ueCÚ¡
 *)&s->
rg‘
);

43616 ià(
	`JS_IsExû±iÚ
(
´İ_¬¿y
))

43618 
b
 = 
NULL
;

43619 
Ën
 = 0;

43620 
b2
 = 
NULL
;

43621 
Ën2
 = 0;

43622 ià(
	`js_g‘_Ëngth32
(
ùx
, &
Ën
, 
´İ_¬¿y
))

43623 
ç
;

43624 ià(
Ën
 > 0) {

43625 
b
 = 
	`js_m®locz
(
ùx
, Ñab[0]è* 
Ën
);

43626 ià(!
b
)

43627 
ç
;

43629 
i
 = 0; i < 
Ën
; i++) {

43630 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
´İ_¬¿y
, 
i
);

43631 ià(
	`JS_IsExû±iÚ
(
v®
))

43632 
ç
;

43633 ià(!
	`JS_IsSŒšg
(
v®
è&& !
	`JS_IsSymbŞ
(val)) {

43634 
	`JS_F»eV®ue
(
ùx
, 
v®
);

43635 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy:…roperties must be strings or symbols");

43636 
ç
;

43638 
©om
 = 
	`JS_V®ueToAtom
(
ùx
, 
v®
);

43639 
	`JS_F»eV®ue
(
ùx
, 
v®
);

43640 ià(
©om
 =ğ
JS_ATOM_NULL
)

43641 
ç
;

43642 
b
[
i
].
©om
 =‡tom;

43643 
b
[
i
].
is_’um”abË
 = 
FALSE
;

43648 
i
 = 1; i < 
Ën
; i++) {

43649 ià(
	`fšd_´İ_key
(
b
, 
i
,ab[i].
©om
) >= 0) {

43650 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy: duplicate…roperty");

43651 
ç
;

43655 
is_ex‹nsibË
 = 
	`JS_IsEx‹nsibË
(
ùx
, 
s
->
rg‘
);

43656 ià(
is_ex‹nsibË
 < 0)

43657 
ç
;

43660 ià(
s
->
is_»voked
) {

43661 
	`JS_ThrowTy³E¼ÜRevokedProxy
(
ùx
);

43662 
ç
;

43664 ià(
	`JS_G‘OwnPrİ”tyNamesIÁ”Çl
(
ùx
, &
b2
, &
Ën2
, 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
),

43665 
JS_GPN_STRING_MASK
 | 
JS_GPN_SYMBOL_MASK
))

43666 
ç
;

43667 
i
 = 0; i < 
Ën2
; i++) {

43668 ià(
s
->
is_»voked
) {

43669 
	`JS_ThrowTy³E¼ÜRevokedProxy
(
ùx
);

43670 
ç
;

43672 
»s
 = 
	`JS_G‘OwnPrİ”tyIÁ”Çl
(
ùx
, &
desc
, 
	`JS_VALUE_GET_OBJ
(
s
->
rg‘
),

43673 
b2
[
i
].
©om
);

43674 ià(
»s
 < 0)

43675 
ç
;

43676 ià(
»s
) {

43677 
	`js_ä“_desc
(
ùx
, &
desc
);

43678 ià(!(
desc
.
æags
 & 
JS_PROP_CONFIGURABLE
è|| !
is_ex‹nsibË
) {

43679 
idx
 = 
	`fšd_´İ_key
(
b
, 
Ën
, 
b2
[
i
].
©om
);

43680 ià(
idx
 < 0) {

43681 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy:arget…roperty must be…resent in…roxy ownKeys");

43682 
ç
;

43685 ià(!
is_ex‹nsibË
)

43686 
b
[
idx
].
is_’um”abË
 = 
TRUE
;

43690 ià(!
is_ex‹nsibË
) {

43692 
i
 = 0; i < 
Ën
; i++) {

43693 ià(!
b
[
i
].
is_’um”abË
) {

43694 
	`JS_ThrowTy³E¼Ü
(
ùx
, "proxy:…roperty‚ot…resent inarget were„eturned by‚onƒxtensible…roxy");

43695 
ç
;

43700 
	`js_ä“_´İ_’um
(
ùx
, 
b2
, 
Ën2
);

43701 
	`JS_F»eV®ue
(
ùx
, 
´İ_¬¿y
);

43702 *
±ab
 = 
b
;

43703 *
¶’
 = 
Ën
;

43705 
ç
:

43706 
	`js_ä“_´İ_’um
(
ùx
, 
b2
, 
Ën2
);

43707 
	`js_ä“_´İ_’um
(
ùx
, 
b
, 
Ën
);

43708 
	`JS_F»eV®ue
(
ùx
, 
´İ_¬¿y
);

43710 
	}
}

43712 
JSV®ue
 
	$js_´oxy_ÿÎ_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

43713 
JSV®ueCÚ¡
 
Ãw_rg‘
,

43714 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43716 
JSProxyD©a
 *
s
;

43717 
JSV®ue
 
m‘hod
, 
¬g_¬¿y
, 
»t
;

43718 
JSV®ueCÚ¡
 
¬gs
[3];

43720 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
func_obj
, 
JS_ATOM_cÚ¡ruù
);

43721 ià(!
s
)

43722  
JS_EXCEPTION
;

43723 ià(!
	`JS_IsCÚ¡ruùÜ
(
ùx
, 
s
->
rg‘
))

43724  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ constructor");

43725 ià(
	`JS_IsUndefšed
(
m‘hod
))

43726  
	`JS_C®lCÚ¡ruùÜ2
(
ùx
, 
s
->
rg‘
, 
Ãw_rg‘
, 
¬gc
, 
¬gv
);

43727 
¬g_¬¿y
 = 
	`js_ü—‹_¬¿y
(
ùx
, 
¬gc
, 
¬gv
);

43728 ià(
	`JS_IsExû±iÚ
(
¬g_¬¿y
)) {

43729 
»t
 = 
JS_EXCEPTION
;

43730 
ç
;

43732 
¬gs
[0] = 
s
->
rg‘
;

43733 
¬gs
[1] = 
¬g_¬¿y
;

43734 
¬gs
[2] = 
Ãw_rg‘
;

43735 
»t
 = 
	`JS_C®l
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 3, 
¬gs
);

43736 ià(!
	`JS_IsExû±iÚ
(
»t
è&& 
	`JS_VALUE_GET_TAG
Ô‘è!ğ
JS_TAG_OBJECT
) {

43737 
	`JS_F»eV®ue
(
ùx
, 
»t
);

43738 
»t
 = 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

43740 
ç
:

43741 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43742 
	`JS_F»eV®ue
(
ùx
, 
¬g_¬¿y
);

43743  
»t
;

43744 
	}
}

43746 
JSV®ue
 
	$js_´oxy_ÿÎ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
func_obj
,

43747 
JSV®ueCÚ¡
 
this_obj
,

43748 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
æags
)

43750 
JSProxyD©a
 *
s
;

43751 
JSV®ue
 
m‘hod
, 
¬g_¬¿y
, 
»t
;

43752 
JSV®ueCÚ¡
 
¬gs
[3];

43754 ià(
æags
 & 
JS_CALL_FLAG_CONSTRUCTOR
)

43755  
	`js_´oxy_ÿÎ_cÚ¡ruùÜ
(
ùx
, 
func_obj
, 
this_obj
, 
¬gc
, 
¬gv
);

43757 
s
 = 
	`g‘_´oxy_m‘hod
(
ùx
, &
m‘hod
, 
func_obj
, 
JS_ATOM_­¶y
);

43758 ià(!
s
)

43759  
JS_EXCEPTION
;

43760 ià(!
s
->
is_func
) {

43761 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43762  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ function");

43764 ià(
	`JS_IsUndefšed
(
m‘hod
))

43765  
	`JS_C®l
(
ùx
, 
s
->
rg‘
, 
this_obj
, 
¬gc
, 
¬gv
);

43766 
¬g_¬¿y
 = 
	`js_ü—‹_¬¿y
(
ùx
, 
¬gc
, 
¬gv
);

43767 ià(
	`JS_IsExû±iÚ
(
¬g_¬¿y
)) {

43768 
»t
 = 
JS_EXCEPTION
;

43769 
ç
;

43771 
¬gs
[0] = 
s
->
rg‘
;

43772 
¬gs
[1] = 
this_obj
;

43773 
¬gs
[2] = 
¬g_¬¿y
;

43774 
»t
 = 
	`JS_C®l
(
ùx
, 
m‘hod
, 
s
->
hªdËr
, 3, 
¬gs
);

43775 
ç
:

43776 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

43777 
	`JS_F»eV®ue
(
ùx
, 
¬g_¬¿y
);

43778  
»t
;

43779 
	}
}

43781 
	$js_´oxy_isA¼ay
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

43783 
JSProxyD©a
 *
s
 = 
	`JS_G‘O·que
(
obj
, 
JS_CLASS_PROXY
);

43784 ià(!
s
)

43785  
FALSE
;

43786 ià(
s
->
is_»voked
) {

43787 
	`JS_ThrowTy³E¼ÜRevokedProxy
(
ùx
);

43790  
	`JS_IsA¼ay
(
ùx
, 
s
->
rg‘
);

43791 
	}
}

43793 cÚ¡ 
JSCÏssExÙicM‘hods
 
	gjs_´oxy_exÙic_m‘hods
 = {

43794 .
g‘_own_´İ”ty
 = 
js_´oxy_g‘_own_´İ”ty
,

43795 .
	gdefše_own_´İ”ty
 = 
js_´oxy_defše_own_´İ”ty
,

43796 .
	gd–‘e_´İ”ty
 = 
js_´oxy_d–‘e_´İ”ty
,

43797 .
	gg‘_own_´İ”ty_Çmes
 = 
js_´oxy_g‘_own_´İ”ty_Çmes
,

43798 .
	ghas_´İ”ty
 = 
js_´oxy_has
,

43799 .
	gg‘_´İ”ty
 = 
js_´oxy_g‘
,

43800 .
	g£t_´İ”ty
 = 
js_´oxy_£t
,

43803 
JSV®ue
 
	$js_´oxy_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

43804 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43806 
JSV®ueCÚ¡
 
rg‘
, 
hªdËr
;

43807 
JSV®ue
 
obj
;

43808 
JSProxyD©a
 *
s
;

43810 
rg‘
 = 
¬gv
[0];

43811 
hªdËr
 = 
¬gv
[1];

43812 ià(
	`JS_VALUE_GET_TAG
(
rg‘
è!ğ
JS_TAG_OBJECT
 ||

43813 
	`JS_VALUE_GET_TAG
(
hªdËr
è!ğ
JS_TAG_OBJECT
)

43814  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

43816 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
JS_NULL
, 
JS_CLASS_PROXY
);

43817 ià(
	`JS_IsExû±iÚ
(
obj
))

43818  
obj
;

43819 
s
 = 
	`js_m®loc
(
ùx
, (
JSProxyD©a
));

43820 ià(!
s
) {

43821 
	`JS_F»eV®ue
(
ùx
, 
obj
);

43822  
JS_EXCEPTION
;

43824 
s
->
rg‘
 = 
	`JS_DupV®ue
(
ùx
,arget);

43825 
s
->
hªdËr
 = 
	`JS_DupV®ue
(
ùx
, handler);

43826 
s
->
´Ùo
 = 
JS_NULL
;

43827 
s
->
is_func
 = 
	`JS_IsFunùiÚ
(
ùx
, 
rg‘
);

43828 
s
->
is_»voked
 = 
FALSE
;

43829 
	`JS_S‘O·que
(
obj
, 
s
);

43830 
	`JS_S‘CÚ¡ruùÜB™
(
ùx
, 
obj
, 
	`JS_IsCÚ¡ruùÜ
(ùx, 
rg‘
));

43831  
obj
;

43832 
	}
}

43834 
JSV®ue
 
	$js_´oxy_»voke
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

43835 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
,

43836 
JSV®ue
 *
func_d©a
)

43838 
JSProxyD©a
 *
s
 = 
	`JS_G‘O·que
(
func_d©a
[0], 
JS_CLASS_PROXY
);

43839 ià(
s
) {

43842 
s
->
is_»voked
 = 
TRUE
;

43843 
	`JS_F»eV®ue
(
ùx
, 
func_d©a
[0]);

43844 
func_d©a
[0] = 
JS_NULL
;

43846  
JS_UNDEFINED
;

43847 
	}
}

43849 
JSV®ue
 
	$js_´oxy_»voke_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

43850 
JSV®ueCÚ¡
 
´oxy_obj
)

43852  
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´oxy_»voke
, 0, 0, 1, &
´oxy_obj
);

43853 
	}
}

43855 
JSV®ue
 
	$js_´oxy_»voÿbË
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

43856 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43858 
JSV®ue
 
´oxy_obj
, 
»voke_obj
 = 
JS_UNDEFINED
, 
obj
;

43860 
´oxy_obj
 = 
	`js_´oxy_cÚ¡ruùÜ
(
ùx
, 
JS_UNDEFINED
, 
¬gc
, 
¬gv
);

43861 ià(
	`JS_IsExû±iÚ
(
´oxy_obj
))

43862 
ç
;

43863 
»voke_obj
 = 
	`js_´oxy_»voke_cÚ¡ruùÜ
(
ùx
, 
´oxy_obj
);

43864 ià(
	`JS_IsExû±iÚ
(
»voke_obj
))

43865 
ç
;

43866 
obj
 = 
	`JS_NewObjeù
(
ùx
);

43867 ià(
	`JS_IsExû±iÚ
(
obj
))

43868 
ç
;

43870 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_´oxy
, 
´oxy_obj
, 
JS_PROP_C_W_E
);

43871 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_»voke
, 
»voke_obj
, 
JS_PROP_C_W_E
);

43872  
obj
;

43873 
ç
:

43874 
	`JS_F»eV®ue
(
ùx
, 
´oxy_obj
);

43875 
	`JS_F»eV®ue
(
ùx
, 
»voke_obj
);

43876  
JS_EXCEPTION
;

43877 
	}
}

43879 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_´oxy_funcs
[] = {

43880 
JS_CFUNC_DEF
("»voÿbË", 2, 
js_´oxy_»voÿbË
 ),

43883 cÚ¡ 
JSCÏssShÜtDef
 
	gjs_´oxy_şass_def
[] = {

43884 { 
JS_ATOM_Objeù
, 
js_´oxy_fš®iz”
, 
js_´oxy_m¬k
 },

43887 
	$JS_AddIÁršsicProxy
(
JSCÚ‹xt
 *
ùx
)

43889 
JSRuÁime
 *
¹
 = 
ùx
->rt;

43890 
JSV®ue
 
obj1
;

43892 ià(!
	`JS_IsRegi¡”edCÏss
(
¹
, 
JS_CLASS_PROXY
)) {

43893 
	`š™_şass_¿nge
(
¹
, 
js_´oxy_şass_def
, 
JS_CLASS_PROXY
,

43894 
	`couÁof
(
js_´oxy_şass_def
));

43895 
¹
->
şass_¬¿y
[
JS_CLASS_PROXY
].
exÙic
 = &
js_´oxy_exÙic_m‘hods
;

43896 
¹
->
şass_¬¿y
[
JS_CLASS_PROXY
].
ÿÎ
 = 
js_´oxy_ÿÎ
;

43899 
obj1
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
js_´oxy_cÚ¡ruùÜ
, "Proxy", 2,

43900 
JS_CFUNC_cÚ¡ruùÜ
, 0);

43901 
	`JS_S‘CÚ¡ruùÜB™
(
ùx
, 
obj1
, 
TRUE
);

43902 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj1
, 
js_´oxy_funcs
,

43903 
	`couÁof
(
js_´oxy_funcs
));

43904 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, ctx->
glob®_obj
, "Proxy",

43905 
obj1
, 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

43906 
	}
}

43910 
JSV®ue
 
	$js_symbŞ_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

43911 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43913 
JSV®ue
 
¡r
;

43914 
JSSŒšg
 *
p
;

43916 ià(!
	`JS_IsUndefšed
(
Ãw_rg‘
))

43917  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ constructor");

43918 ià(
¬gc
 =ğ0 || 
	`JS_IsUndefšed
(
¬gv
[0])) {

43919 
p
 = 
NULL
;

43921 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

43922 ià(
	`JS_IsExû±iÚ
(
¡r
))

43923  
JS_EXCEPTION
;

43924 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

43926  
	`JS_NewSymbŞ
(
ùx
, 
p
, 
JS_ATOM_TYPE_SYMBOL
);

43927 
	}
}

43929 
JSV®ue
 
	$js_thisSymbŞV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

43931 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_SYMBOL
)

43932  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

43934 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

43935 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

43936 ià(
p
->
şass_id
 =ğ
JS_CLASS_SYMBOL
) {

43937 ià(
	`JS_VALUE_GET_TAG
(
p
->
u
.
objeù_d©a
è=ğ
JS_TAG_SYMBOL
)

43938  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

43941  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ symbol");

43942 
	}
}

43944 
JSV®ue
 
	$js_symbŞ_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

43945 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43947 
JSV®ue
 
v®
, 
»t
;

43948 
v®
 = 
	`js_thisSymbŞV®ue
(
ùx
, 
this_v®
);

43949 ià(
	`JS_IsExû±iÚ
(
v®
))

43950  
v®
;

43952 
»t
 = 
	`js_¡ršg_cÚ¡ruùÜ
(
ùx
, 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
v®
);

43953 
	`JS_F»eV®ue
(
ùx
, 
v®
);

43954  
»t
;

43955 
	}
}

43957 
JSV®ue
 
	$js_symbŞ_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

43958 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43960  
	`js_thisSymbŞV®ue
(
ùx
, 
this_v®
);

43961 
	}
}

43963 
JSV®ue
 
	$js_symbŞ_g‘_desütiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

43965 
JSV®ue
 
v®
, 
»t
;

43966 
JSAtomSŒuù
 *
p
;

43968 
v®
 = 
	`js_thisSymbŞV®ue
(
ùx
, 
this_v®
);

43969 ià(
	`JS_IsExû±iÚ
(
v®
))

43970  
v®
;

43971 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

43972 ià(
p
->
Ën
 =ğ0 &&…->
is_wide_ch¬
 != 0) {

43973 
»t
 = 
JS_UNDEFINED
;

43975 
»t
 = 
	`JS_AtomToSŒšg
(
ùx
, 
	`js_g‘_©om_šdex
(ùx->
¹
, 
p
));

43977 
	`JS_F»eV®ue
(
ùx
, 
v®
);

43978  
»t
;

43979 
	}
}

43981 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_symbŞ_´Ùo_funcs
[] = {

43982 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_symbŞ_toSŒšg
 ),

43983 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_symbŞ_v®ueOf
 ),

43985 
JS_CFUNC_DEF
("[SymbŞ.toPrim™ive]", 1, 
js_symbŞ_v®ueOf
 ),

43986 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "SymbŞ", 
JS_PROP_CONFIGURABLE
 ),

43987 
JS_CGETSET_DEF
("desütiÚ", 
js_symbŞ_g‘_desütiÚ
, 
NULL
 ),

43990 
JSV®ue
 
	$js_symbŞ_fÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

43991 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

43993 
JSV®ue
 
¡r
;

43995 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

43996 ià(
	`JS_IsExû±iÚ
(
¡r
))

43997  
JS_EXCEPTION
;

43998  
	`JS_NewSymbŞ
(
ùx
, 
	`JS_VALUE_GET_STRING
(
¡r
), 
JS_ATOM_TYPE_GLOBAL_SYMBOL
);

43999 
	}
}

44001 
JSV®ue
 
	$js_symbŞ_keyFÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44002 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

44004 
JSAtomSŒuù
 *
p
;

44006 ià(!
	`JS_IsSymbŞ
(
¬gv
[0]))

44007  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ symbol");

44008 
p
 = 
	`JS_VALUE_GET_PTR
(
¬gv
[0]);

44009 ià(
p
->
©om_ty³
 !ğ
JS_ATOM_TYPE_GLOBAL_SYMBOL
)

44010  
JS_UNDEFINED
;

44011  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_STRING
, 
p
));

44012 
	}
}

44014 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_symbŞ_funcs
[] = {

44015 
JS_CFUNC_DEF
("fÜ", 1, 
js_symbŞ_fÜ
 ),

44016 
JS_CFUNC_DEF
("keyFÜ", 1, 
js_symbŞ_keyFÜ
 ),

44021 
	sJSM­RecÜd
 {

44022 
	m»f_couÁ
;

44023 
BOOL
 
	mem±y
;

44024 
JSM­S‹
 *
	mm­
;

44025 
JSM­RecÜd
 *
	mÃxt_w—k_»f
;

44026 
li¡_h—d
 
	mlšk
;

44027 
li¡_h—d
 
	mhash_lšk
;

44028 
JSV®ue
 
	mkey
;

44029 
JSV®ue
 
	mv®ue
;

44030 } 
	tJSM­RecÜd
;

44032 
	sJSM­S‹
 {

44033 
BOOL
 
	mis_w—k
;

44034 
li¡_h—d
 
	m»cÜds
;

44035 
ušt32_t
 
	m»cÜd_couÁ
;

44036 
li¡_h—d
 *
	mhash_bË
;

44037 
ušt32_t
 
	mhash_size
;

44038 
ušt32_t
 
	m»cÜd_couÁ_th»shŞd
;

44040 } 
	tJSM­S‹
;

44042 
	#MAGIC_SET
 (1 << 0)

	)

44043 
	#MAGIC_WEAK
 (1 << 1)

	)

44045 
JSV®ue
 
	$js_m­_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

44046 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44048 
JSM­S‹
 *
s
;

44049 
JSV®ue
 
obj
, 
add”
 = 
JS_UNDEFINED
, 
™”
 = JS_UNDEFINED, 
Ãxt_m‘hod
 = JS_UNDEFINED;

44050 
JSV®ueCÚ¡
 
¬r
;

44051 
BOOL
 
is_£t
, 
is_w—k
;

44053 
is_£t
 = 
magic
 & 
MAGIC_SET
;

44054 
is_w—k
 = ((
magic
 & 
MAGIC_WEAK
) != 0);

44055 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_MAP
 + 
magic
);

44056 ià(
	`JS_IsExû±iÚ
(
obj
))

44057  
JS_EXCEPTION
;

44058 
s
 = 
	`js_m®locz
(
ùx
, (*s));

44059 ià(!
s
)

44060 
ç
;

44061 
	`š™_li¡_h—d
(&
s
->
»cÜds
);

44062 
s
->
is_w—k
 = is_weak;

44063 
	`JS_S‘O·que
(
obj
, 
s
);

44064 
s
->
hash_size
 = 1;

44065 
s
->
hash_bË
 = 
	`js_m®loc
(
ùx
, (s->hash_bË[0]è* s->
hash_size
);

44066 ià(!
s
->
hash_bË
)

44067 
ç
;

44068 
	`š™_li¡_h—d
(&
s
->
hash_bË
[0]);

44069 
s
->
»cÜd_couÁ_th»shŞd
 = 4;

44071 
¬r
 = 
JS_UNDEFINED
;

44072 ià(
¬gc
 > 0)

44073 
¬r
 = 
¬gv
[0];

44074 ià(!
	`JS_IsUndefšed
(
¬r
è&& !
	`JS_IsNuÎ
(arr)) {

44075 
JSV®ue
 
™em
, 
»t
;

44076 
BOOL
 
dÚe
;

44078 
add”
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
is_£t
 ? 
JS_ATOM_add
 : 
JS_ATOM_£t
);

44079 ià(
	`JS_IsExû±iÚ
(
add”
))

44080 
ç
;

44081 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
add”
)) {

44082 
	`JS_ThrowTy³E¼Ü
(
ùx
, "set/add is‚ot‡ function");

44083 
ç
;

44086 
™”
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
¬r
, 
FALSE
);

44087 ià(
	`JS_IsExû±iÚ
(
™”
))

44088 
ç
;

44089 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”
, 
JS_ATOM_Ãxt
);

44090 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

44091 
ç
;

44094 
™em
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
™”
, 
Ãxt_m‘hod
, 0, 
NULL
, &
dÚe
);

44095 ià(
	`JS_IsExû±iÚ
(
™em
))

44096 
ç
;

44097 ià(
dÚe
) {

44098 
	`JS_F»eV®ue
(
ùx
, 
™em
);

44101 ià(
is_£t
) {

44102 
»t
 = 
	`JS_C®l
(
ùx
, 
add”
, 
obj
, 1, (
JSV®ueCÚ¡
 *)&
™em
);

44103 ià(
	`JS_IsExû±iÚ
(
»t
)) {

44104 
	`JS_F»eV®ue
(
ùx
, 
™em
);

44105 
ç
;

44108 
JSV®ue
 
key
, 
v®ue
;

44109 
JSV®ueCÚ¡
 
¬gs
[2];

44110 
key
 = 
JS_UNDEFINED
;

44111 
v®ue
 = 
JS_UNDEFINED
;

44112 ià(!
	`JS_IsObjeù
(
™em
)) {

44113 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

44114 
ç1
;

44116 
key
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
™em
, 0);

44117 ià(
	`JS_IsExû±iÚ
(
key
))

44118 
ç1
;

44119 
v®ue
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
™em
, 1);

44120 ià(
	`JS_IsExû±iÚ
(
v®ue
))

44121 
ç1
;

44122 
¬gs
[0] = 
key
;

44123 
¬gs
[1] = 
v®ue
;

44124 
»t
 = 
	`JS_C®l
(
ùx
, 
add”
, 
obj
, 2, 
¬gs
);

44125 ià(
	`JS_IsExû±iÚ
(
»t
)) {

44126 
ç1
:

44127 
	`JS_F»eV®ue
(
ùx
, 
™em
);

44128 
	`JS_F»eV®ue
(
ùx
, 
key
);

44129 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

44130 
ç
;

44132 
	`JS_F»eV®ue
(
ùx
, 
key
);

44133 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

44135 
	`JS_F»eV®ue
(
ùx
, 
»t
);

44136 
	`JS_F»eV®ue
(
ùx
, 
™em
);

44138 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

44139 
	`JS_F»eV®ue
(
ùx
, 
™”
);

44140 
	`JS_F»eV®ue
(
ùx
, 
add”
);

44142  
obj
;

44143 
ç
:

44144 ià(
	`JS_IsObjeù
(
™”
)) {

44146 
	`JS_I‹¿tÜClo£
(
ùx
, 
™”
, 
TRUE
);

44148 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

44149 
	`JS_F»eV®ue
(
ùx
, 
™”
);

44150 
	`JS_F»eV®ue
(
ùx
, 
add”
);

44151 
	`JS_F»eV®ue
(
ùx
, 
obj
);

44152  
JS_EXCEPTION
;

44153 
	}
}

44156 
JSV®ueCÚ¡
 
	$m­_nÜm®ize_key
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
key
)

44158 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_TAG
(
key
);

44160 ià(
	`JS_TAG_IS_FLOAT64
(
g
è&& 
	`JS_VALUE_GET_FLOAT64
(
key
) == 0.0) {

44161 
key
 = 
	`JS_NewIÁ32
(
ùx
, 0);

44163  
key
;

44164 
	}
}

44167 
ušt32_t
 
	$m­_hash_key
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
key
)

44169 
ušt32_t
 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
key
);

44170 
ušt32_t
 
h
;

44171 
d
;

44172 
JSFlßt64UniÚ
 
u
;

44174 
g
) {

44175 
JS_TAG_BOOL
:

44176 
h
 = 
	`JS_VALUE_GET_INT
(
key
);

44178 
JS_TAG_STRING
:

44179 
h
 = 
	`hash_¡ršg
(
	`JS_VALUE_GET_STRING
(
key
), 0);

44181 
JS_TAG_OBJECT
:

44182 
JS_TAG_SYMBOL
:

44183 
h
 = (
ušŒ_t
)
	`JS_VALUE_GET_PTR
(
key
) * 3163;

44185 
JS_TAG_INT
:

44186 
d
 = 
	`JS_VALUE_GET_INT
(
key
) * 3163;

44187 
hash_æßt64
;

44188 
JS_TAG_FLOAT64
:

44189 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
key
);

44191 ià(
	`i¢ª
(
d
))

44192 
d
 = 
JS_FLOAT64_NAN
;

44193 
hash_æßt64
:

44194 
u
.
d
 = d;

44195 
h
 = (
u
.
u32
[0] ^ u.u32[1]) * 3163;

44198 
h
 = 0;

44201 
h
 ^ğ
g
;

44202  
h
;

44203 
	}
}

44205 
JSM­RecÜd
 *
	$m­_fšd_»cÜd
(
JSCÚ‹xt
 *
ùx
, 
JSM­S‹
 *
s
,

44206 
JSV®ueCÚ¡
 
key
)

44208 
li¡_h—d
 *
–
;

44209 
JSM­RecÜd
 *
mr
;

44210 
ušt32_t
 
h
;

44211 
h
 = 
	`m­_hash_key
(
ùx
, 
key
è& (
s
->
hash_size
 - 1);

44212 
	`li¡_fÜ_—ch
(
–
, &
s
->
hash_bË
[
h
]) {

44213 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
hash_lšk
);

44214 ià(
	`js_§me_v®ue_z”o
(
ùx
, 
mr
->
key
, key))

44215  
mr
;

44217  
NULL
;

44218 
	}
}

44220 
	$m­_hash_»size
(
JSCÚ‹xt
 *
ùx
, 
JSM­S‹
 *
s
)

44222 
ušt32_t
 
Ãw_hash_size
, 
i
, 
h
;

44223 
size_t
 
¦ack
;

44224 
li¡_h—d
 *
Ãw_hash_bË
, *
–
;

44225 
JSM­RecÜd
 *
mr
;

44228 ià(
s
->
hash_size
 == 1)

44229 
Ãw_hash_size
 = 4;

44231 
Ãw_hash_size
 = 
s
->
hash_size
 * 2;

44232 
Ãw_hash_bË
 = 
	`js_»®loc2
(
ùx
, 
s
->
hash_bË
,

44233 (
Ãw_hash_bË
[0]è* 
Ãw_hash_size
, &
¦ack
);

44234 ià(!
Ãw_hash_bË
)

44236 
Ãw_hash_size
 +ğ
¦ack
 / (*
Ãw_hash_bË
);

44238 
i
 = 0; i < 
Ãw_hash_size
; i++)

44239 
	`š™_li¡_h—d
(&
Ãw_hash_bË
[
i
]);

44241 
	`li¡_fÜ_—ch
(
–
, &
s
->
»cÜds
) {

44242 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
lšk
);

44243 ià(!
mr
->
em±y
) {

44244 
h
 = 
	`m­_hash_key
(
ùx
, 
mr
->
key
è& (
Ãw_hash_size
 - 1);

44245 
	`li¡_add_
(&
mr
->
hash_lšk
, &
Ãw_hash_bË
[
h
]);

44248 
s
->
hash_bË
 = 
Ãw_hash_bË
;

44249 
s
->
hash_size
 = 
Ãw_hash_size
;

44250 
s
->
»cÜd_couÁ_th»shŞd
 = 
Ãw_hash_size
 * 2;

44251 
	}
}

44253 
JSM­RecÜd
 *
	$m­_add_»cÜd
(
JSCÚ‹xt
 *
ùx
, 
JSM­S‹
 *
s
,

44254 
JSV®ueCÚ¡
 
key
)

44256 
ušt32_t
 
h
;

44257 
JSM­RecÜd
 *
mr
;

44259 
mr
 = 
	`js_m®loc
(
ùx
, (*mr));

44260 ià(!
mr
)

44261  
NULL
;

44262 
mr
->
»f_couÁ
 = 1;

44263 
mr
->
m­
 = 
s
;

44264 
mr
->
em±y
 = 
FALSE
;

44265 ià(
s
->
is_w—k
) {

44266 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
key
);

44268 
mr
->
Ãxt_w—k_»f
 = 
p
->
fœ¡_w—k_»f
;

44269 
p
->
fœ¡_w—k_»f
 = 
mr
;

44271 
	`JS_DupV®ue
(
ùx
, 
key
);

44273 
mr
->
key
 = (
JSV®ue
)key;

44274 
h
 = 
	`m­_hash_key
(
ùx
, 
key
è& (
s
->
hash_size
 - 1);

44275 
	`li¡_add_
(&
mr
->
hash_lšk
, &
s
->
hash_bË
[
h
]);

44276 
	`li¡_add_
(&
mr
->
lšk
, &
s
->
»cÜds
);

44277 
s
->
»cÜd_couÁ
++;

44278 ià(
s
->
»cÜd_couÁ
 >ğs->
»cÜd_couÁ_th»shŞd
) {

44279 
	`m­_hash_»size
(
ùx
, 
s
);

44281  
mr
;

44282 
	}
}

44288 
	$d–‘e_w—k_»f
(
JSRuÁime
 *
¹
, 
JSM­RecÜd
 *
mr
)

44290 
JSM­RecÜd
 **
pmr
, *
mr1
;

44291 
JSObjeù
 *
p
;

44293 
p
 = 
	`JS_VALUE_GET_OBJ
(
mr
->
key
);

44294 
pmr
 = &
p
->
fœ¡_w—k_»f
;

44296 
mr1
 = *
pmr
;

44297 
	`as£¹
(
mr1
 !ğ
NULL
);

44298 ià(
mr1
 =ğ
mr
)

44300 
pmr
 = &
mr1
->
Ãxt_w—k_»f
;

44302 *
pmr
 = 
mr1
->
Ãxt_w—k_»f
;

44303 
	}
}

44305 
	$m­_d–‘e_»cÜd
(
JSRuÁime
 *
¹
, 
JSM­S‹
 *
s
, 
JSM­RecÜd
 *
mr
)

44307 ià(
mr
->
em±y
)

44309 
	`li¡_d–
(&
mr
->
hash_lšk
);

44310 ià(
s
->
is_w—k
) {

44311 
	`d–‘e_w—k_»f
(
¹
, 
mr
);

44313 
	`JS_F»eV®ueRT
(
¹
, 
mr
->
key
);

44315 
	`JS_F»eV®ueRT
(
¹
, 
mr
->
v®ue
);

44316 ià(--
mr
->
»f_couÁ
 == 0) {

44317 
	`li¡_d–
(&
mr
->
lšk
);

44318 
	`js_ä“_¹
(
¹
, 
mr
);

44321 
mr
->
em±y
 = 
TRUE
;

44322 
mr
->
key
 = 
JS_UNDEFINED
;

44323 
mr
->
v®ue
 = 
JS_UNDEFINED
;

44325 
s
->
»cÜd_couÁ
--;

44326 
	}
}

44328 
	$m­_deüef_»cÜd
(
JSRuÁime
 *
¹
, 
JSM­RecÜd
 *
mr
)

44330 ià(--
mr
->
»f_couÁ
 == 0) {

44332 
	`as£¹
(
mr
->
em±y
);

44333 
	`li¡_d–
(&
mr
->
lšk
);

44334 
	`js_ä“_¹
(
¹
, 
mr
);

44336 
	}
}

44338 
	$»£t_w—k_»f
(
JSRuÁime
 *
¹
, 
JSObjeù
 *
p
)

44340 
JSM­RecÜd
 *
mr
, *
mr_Ãxt
;

44341 
JSM­S‹
 *
s
;

44345 
mr
 = 
p
->
fœ¡_w—k_»f
; m¸!ğ
NULL
; m¸ğmr->
Ãxt_w—k_»f
) {

44346 
s
 = 
mr
->
m­
;

44347 
	`as£¹
(
s
->
is_w—k
);

44348 
	`as£¹
(!
mr
->
em±y
);

44349 
	`li¡_d–
(&
mr
->
hash_lšk
);

44350 
	`li¡_d–
(&
mr
->
lšk
);

44355 
mr
 = 
p
->
fœ¡_w—k_»f
; m¸!ğ
NULL
; m¸ğ
mr_Ãxt
) {

44356 
mr_Ãxt
 = 
mr
->
Ãxt_w—k_»f
;

44357 
	`JS_F»eV®ueRT
(
¹
, 
mr
->
v®ue
);

44358 
	`js_ä“_¹
(
¹
, 
mr
);

44361 
p
->
fœ¡_w—k_»f
 = 
NULL
;

44362 
	}
}

44364 
JSV®ue
 
	$js_m­_£t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44365 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44367 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44368 
JSM­RecÜd
 *
mr
;

44369 
JSV®ueCÚ¡
 
key
, 
v®ue
;

44371 ià(!
s
)

44372  
JS_EXCEPTION
;

44373 
key
 = 
	`m­_nÜm®ize_key
(
ùx
, 
¬gv
[0]);

44374 ià(
s
->
is_w—k
 && !
	`JS_IsObjeù
(
key
))

44375  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

44376 ià(
magic
 & 
MAGIC_SET
)

44377 
v®ue
 = 
JS_UNDEFINED
;

44379 
v®ue
 = 
¬gv
[1];

44380 
mr
 = 
	`m­_fšd_»cÜd
(
ùx
, 
s
, 
key
);

44381 ià(
mr
) {

44382 
	`JS_F»eV®ue
(
ùx
, 
mr
->
v®ue
);

44384 
mr
 = 
	`m­_add_»cÜd
(
ùx
, 
s
, 
key
);

44385 ià(!
mr
)

44386  
JS_EXCEPTION
;

44388 
mr
->
v®ue
 = 
	`JS_DupV®ue
(
ùx
, value);

44389  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

44390 
	}
}

44392 
JSV®ue
 
	$js_m­_g‘
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44393 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44395 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44396 
JSM­RecÜd
 *
mr
;

44397 
JSV®ueCÚ¡
 
key
;

44399 ià(!
s
)

44400  
JS_EXCEPTION
;

44401 
key
 = 
	`m­_nÜm®ize_key
(
ùx
, 
¬gv
[0]);

44402 
mr
 = 
	`m­_fšd_»cÜd
(
ùx
, 
s
, 
key
);

44403 ià(!
mr
)

44404  
JS_UNDEFINED
;

44406  
	`JS_DupV®ue
(
ùx
, 
mr
->
v®ue
);

44407 
	}
}

44409 
JSV®ue
 
	$js_m­_has
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44410 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44412 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44413 
JSM­RecÜd
 *
mr
;

44414 
JSV®ueCÚ¡
 
key
;

44416 ià(!
s
)

44417  
JS_EXCEPTION
;

44418 
key
 = 
	`m­_nÜm®ize_key
(
ùx
, 
¬gv
[0]);

44419 
mr
 = 
	`m­_fšd_»cÜd
(
ùx
, 
s
, 
key
);

44420  
	`JS_NewBoŞ
(
ùx
, (
mr
 !ğ
NULL
));

44421 
	}
}

44423 
JSV®ue
 
	$js_m­_d–‘e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44424 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44426 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44427 
JSM­RecÜd
 *
mr
;

44428 
JSV®ueCÚ¡
 
key
;

44430 ià(!
s
)

44431  
JS_EXCEPTION
;

44432 
key
 = 
	`m­_nÜm®ize_key
(
ùx
, 
¬gv
[0]);

44433 
mr
 = 
	`m­_fšd_»cÜd
(
ùx
, 
s
, 
key
);

44434 ià(!
mr
)

44435  
JS_FALSE
;

44436 
	`m­_d–‘e_»cÜd
(
ùx
->
¹
, 
s
, 
mr
);

44437  
JS_TRUE
;

44438 
	}
}

44440 
JSV®ue
 
	$js_m­_ş—r
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44441 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44443 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44444 
li¡_h—d
 *
–
, *
–1
;

44445 
JSM­RecÜd
 *
mr
;

44447 ià(!
s
)

44448  
JS_EXCEPTION
;

44449 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
s
->
»cÜds
) {

44450 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
lšk
);

44451 
	`m­_d–‘e_»cÜd
(
ùx
->
¹
, 
s
, 
mr
);

44453  
JS_UNDEFINED
;

44454 
	}
}

44456 
JSV®ue
 
	$js_m­_g‘_size
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, 
magic
)

44458 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44459 ià(!
s
)

44460  
JS_EXCEPTION
;

44461  
	`JS_NewUšt32
(
ùx
, 
s
->
»cÜd_couÁ
);

44462 
	}
}

44464 
JSV®ue
 
	$js_m­_fÜEach
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44465 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44467 
JSM­S‹
 *
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44468 
JSV®ueCÚ¡
 
func
, 
this_¬g
;

44469 
JSV®ue
 
»t
, 
¬gs
[3];

44470 
li¡_h—d
 *
–
;

44471 
JSM­RecÜd
 *
mr
;

44473 ià(!
s
)

44474  
JS_EXCEPTION
;

44475 
func
 = 
¬gv
[0];

44476 ià(
¬gc
 > 1)

44477 
this_¬g
 = 
¬gv
[1];

44479 
this_¬g
 = 
JS_UNDEFINED
;

44480 ià(
	`check_funùiÚ
(
ùx
, 
func
))

44481  
JS_EXCEPTION
;

44484 
–
 = 
s
->
»cÜds
.
Ãxt
;

44485 
–
 !ğ&
s
->
»cÜds
) {

44486 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
lšk
);

44487 ià(!
mr
->
em±y
) {

44488 
mr
->
»f_couÁ
++;

44490 
¬gs
[1] = 
	`JS_DupV®ue
(
ùx
, 
mr
->
key
);

44491 ià(
magic
)

44492 
¬gs
[0] =‡rgs[1];

44494 
¬gs
[0] = 
	`JS_DupV®ue
(
ùx
, 
mr
->
v®ue
);

44495 
¬gs
[2] = (
JSV®ue
)
this_v®
;

44496 
»t
 = 
	`JS_C®l
(
ùx
, 
func
, 
this_¬g
, 3, (
JSV®ueCÚ¡
 *)
¬gs
);

44497 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[0]);

44498 ià(!
magic
)

44499 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[1]);

44500 
–
 =ƒl->
Ãxt
;

44501 
	`m­_deüef_»cÜd
(
ùx
->
¹
, 
mr
);

44502 ià(
	`JS_IsExû±iÚ
(
»t
))

44503  
»t
;

44504 
	`JS_F»eV®ue
(
ùx
, 
»t
);

44506 
–
 =ƒl->
Ãxt
;

44509  
JS_UNDEFINED
;

44510 
	}
}

44512 
	$js_m­_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

44514 
JSObjeù
 *
p
;

44515 
JSM­S‹
 *
s
;

44516 
li¡_h—d
 *
–
, *
–1
;

44517 
JSM­RecÜd
 *
mr
;

44519 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

44520 
s
 = 
p
->
u
.
m­_¡©e
;

44521 ià(
s
) {

44524 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
s
->
»cÜds
) {

44525 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
lšk
);

44526 ià(!
mr
->
em±y
) {

44527 ià(
s
->
is_w—k
)

44528 
	`d–‘e_w—k_»f
(
¹
, 
mr
);

44530 
	`JS_F»eV®ueRT
(
¹
, 
mr
->
key
);

44531 
	`JS_F»eV®ueRT
(
¹
, 
mr
->
v®ue
);

44533 
	`js_ä“_¹
(
¹
, 
mr
);

44535 
	`js_ä“_¹
(
¹
, 
s
->
hash_bË
);

44536 
	`js_ä“_¹
(
¹
, 
s
);

44538 
	}
}

44540 
	$js_m­_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
, 
JS_M¬kFunc
 *
m¬k_func
)

44542 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

44543 
JSM­S‹
 *
s
;

44544 
li¡_h—d
 *
–
;

44545 
JSM­RecÜd
 *
mr
;

44547 
s
 = 
p
->
u
.
m­_¡©e
;

44548 ià(
s
) {

44549 
	`li¡_fÜ_—ch
(
–
, &
s
->
»cÜds
) {

44550 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
lšk
);

44551 ià(!
s
->
is_w—k
)

44552 
	`JS_M¬kV®ue
(
¹
, 
mr
->
key
, 
m¬k_func
);

44553 
	`JS_M¬kV®ue
(
¹
, 
mr
->
v®ue
, 
m¬k_func
);

44556 
	}
}

44560 
	sJSM­I‹¿tÜD©a
 {

44561 
JSV®ue
 
	mobj
;

44562 
JSI‹¿tÜKšdEnum
 
	mkšd
;

44563 
JSM­RecÜd
 *
	mcur_»cÜd
;

44564 } 
	tJSM­I‹¿tÜD©a
;

44566 
	$js_m­_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

44568 
JSObjeù
 *
p
;

44569 
JSM­I‹¿tÜD©a
 *
™
;

44571 
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

44572 
™
 = 
p
->
u
.
m­_™”©Ü_d©a
;

44573 ià(
™
) {

44576 ià(
	`JS_IsLiveObjeù
(
¹
, 
™
->
obj
è&& it->
cur_»cÜd
) {

44577 
	`m­_deüef_»cÜd
(
¹
, 
™
->
cur_»cÜd
);

44579 
	`JS_F»eV®ueRT
(
¹
, 
™
->
obj
);

44580 
	`js_ä“_¹
(
¹
, 
™
);

44582 
	}
}

44584 
	$js_m­_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

44585 
JS_M¬kFunc
 *
m¬k_func
)

44587 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

44588 
JSM­I‹¿tÜD©a
 *
™
;

44589 
™
 = 
p
->
u
.
m­_™”©Ü_d©a
;

44590 ià(
™
) {

44592 
	`JS_M¬kV®ue
(
¹
, 
™
->
obj
, 
m¬k_func
);

44594 
	}
}

44596 
JSV®ue
 
	$js_ü—‹_m­_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44597 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

44599 
JSI‹¿tÜKšdEnum
 
kšd
;

44600 
JSM­S‹
 *
s
;

44601 
JSM­I‹¿tÜD©a
 *
™
;

44602 
JSV®ue
 
’um_obj
;

44604 
kšd
 = 
magic
 >> 2;

44605 
magic
 &= 3;

44606 
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP
 + 
magic
);

44607 ià(!
s
)

44608  
JS_EXCEPTION
;

44609 
’um_obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_MAP_ITERATOR
 + 
magic
);

44610 ià(
	`JS_IsExû±iÚ
(
’um_obj
))

44611 
ç
;

44612 
™
 = 
	`js_m®loc
(
ùx
, (*it));

44613 ià(!
™
) {

44614 
	`JS_F»eV®ue
(
ùx
, 
’um_obj
);

44615 
ç
;

44617 
™
->
obj
 = 
	`JS_DupV®ue
(
ùx
, 
this_v®
);

44618 
™
->
kšd
 = kind;

44619 
™
->
cur_»cÜd
 = 
NULL
;

44620 
	`JS_S‘O·que
(
’um_obj
, 
™
);

44621  
’um_obj
;

44622 
ç
:

44623  
JS_EXCEPTION
;

44624 
	}
}

44626 
JSV®ue
 
	$js_m­_™”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

44627 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

44628 
BOOL
 *
pdÚe
, 
magic
)

44630 
JSM­I‹¿tÜD©a
 *
™
;

44631 
JSM­S‹
 *
s
;

44632 
JSM­RecÜd
 *
mr
;

44633 
li¡_h—d
 *
–
;

44635 
™
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_MAP_ITERATOR
 + 
magic
);

44636 ià(!
™
) {

44637 *
pdÚe
 = 
FALSE
;

44638  
JS_EXCEPTION
;

44640 ià(
	`JS_IsUndefšed
(
™
->
obj
))

44641 
dÚe
;

44642 
s
 = 
	`JS_G‘O·que
(
™
->
obj
, 
JS_CLASS_MAP
 + 
magic
);

44643 
	`as£¹
(
s
 !ğ
NULL
);

44644 ià(!
™
->
cur_»cÜd
) {

44645 
–
 = 
s
->
»cÜds
.
Ãxt
;

44647 
mr
 = 
™
->
cur_»cÜd
;

44648 
–
 = 
mr
->
lšk
.
Ãxt
;

44649 
	`m­_deüef_»cÜd
(
ùx
->
¹
, 
mr
);

44652 ià(
–
 =ğ&
s
->
»cÜds
) {

44654 
™
->
cur_»cÜd
 = 
NULL
;

44655 
	`JS_F»eV®ue
(
ùx
, 
™
->
obj
);

44656 
™
->
obj
 = 
JS_UNDEFINED
;

44657 
dÚe
:

44659 *
pdÚe
 = 
TRUE
;

44660  
JS_UNDEFINED
;

44662 
mr
 = 
	`li¡_’Œy
(
–
, 
JSM­RecÜd
, 
lšk
);

44663 ià(!
mr
->
em±y
)

44666 
–
 = 
mr
->
lšk
.
Ãxt
;

44670 
mr
->
»f_couÁ
++;

44671 
™
->
cur_»cÜd
 = 
mr
;

44672 *
pdÚe
 = 
FALSE
;

44674 ià(
™
->
kšd
 =ğ
JS_ITERATOR_KIND_KEY
) {

44675  
	`JS_DupV®ue
(
ùx
, 
mr
->
key
);

44677 
JSV®ueCÚ¡
 
¬gs
[2];

44678 
¬gs
[0] = 
mr
->
key
;

44679 ià(
magic
)

44680 
¬gs
[1] = 
mr
->
key
;

44682 
¬gs
[1] = 
mr
->
v®ue
;

44683 ià(
™
->
kšd
 =ğ
JS_ITERATOR_KIND_VALUE
) {

44684  
	`JS_DupV®ue
(
ùx
, 
¬gs
[1]);

44686  
	`js_ü—‹_¬¿y
(
ùx
, 2, 
¬gs
);

44689 
	}
}

44691 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_m­_funcs
[] = {

44692 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
 ),

44695 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_m­_´Ùo_funcs
[] = {

44696 
JS_CFUNC_MAGIC_DEF
("£t", 2, 
js_m­_£t
, 0 ),

44697 
JS_CFUNC_MAGIC_DEF
("g‘", 1, 
js_m­_g‘
, 0 ),

44698 
JS_CFUNC_MAGIC_DEF
("has", 1, 
js_m­_has
, 0 ),

44699 
JS_CFUNC_MAGIC_DEF
("d–‘e", 1, 
js_m­_d–‘e
, 0 ),

44700 
JS_CFUNC_MAGIC_DEF
("ş—r", 0, 
js_m­_ş—r
, 0 ),

44701 
JS_CGETSET_MAGIC_DEF
("size", 
js_m­_g‘_size
, 
NULL
, 0),

44702 
JS_CFUNC_MAGIC_DEF
("fÜEach", 1, 
js_m­_fÜEach
, 0 ),

44703 
JS_CFUNC_MAGIC_DEF
("v®ues", 0, 
js_ü—‹_m­_™”©Ü
, (
JS_ITERATOR_KIND_VALUE
 << 2) | 0 ),

44704 
JS_CFUNC_MAGIC_DEF
("keys", 0, 
js_ü—‹_m­_™”©Ü
, (
JS_ITERATOR_KIND_KEY
 << 2) | 0 ),

44705 
JS_CFUNC_MAGIC_DEF
("’Œ›s", 0, 
js_ü—‹_m­_™”©Ü
, (
JS_ITERATOR_KIND_KEY_AND_VALUE
 << 2) | 0 ),

44706 
JS_ALIAS_DEF
("[Symbol.iterator]", "entries" ),

44707 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "M­", 
JS_PROP_CONFIGURABLE
 ),

44710 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_m­_™”©Ü_´Ùo_funcs
[] = {

44711 
JS_ITERATOR_NEXT_DEF
("Ãxt", 0, 
js_m­_™”©Ü_Ãxt
, 0 ),

44712 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "M­ I‹¿tÜ", 
JS_PROP_CONFIGURABLE
 ),

44715 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_£t_´Ùo_funcs
[] = {

44716 
JS_CFUNC_MAGIC_DEF
("add", 1, 
js_m­_£t
, 
MAGIC_SET
 ),

44717 
JS_CFUNC_MAGIC_DEF
("has", 1, 
js_m­_has
, 
MAGIC_SET
 ),

44718 
JS_CFUNC_MAGIC_DEF
("d–‘e", 1, 
js_m­_d–‘e
, 
MAGIC_SET
 ),

44719 
JS_CFUNC_MAGIC_DEF
("ş—r", 0, 
js_m­_ş—r
, 
MAGIC_SET
 ),

44720 
JS_CGETSET_MAGIC_DEF
("size", 
js_m­_g‘_size
, 
NULL
, 
MAGIC_SET
 ),

44721 
JS_CFUNC_MAGIC_DEF
("fÜEach", 1, 
js_m­_fÜEach
, 
MAGIC_SET
 ),

44722 
JS_CFUNC_MAGIC_DEF
("v®ues", 0, 
js_ü—‹_m­_™”©Ü
, (
JS_ITERATOR_KIND_KEY
 << 2è| 
MAGIC_SET
 ),

44723 
JS_ALIAS_DEF
("keys", "values" ),

44724 
JS_ALIAS_DEF
("[Symbol.iterator]", "values" ),

44725 
JS_CFUNC_MAGIC_DEF
("’Œ›s", 0, 
js_ü—‹_m­_™”©Ü
, (
JS_ITERATOR_KIND_KEY_AND_VALUE
 << 2è| 
MAGIC_SET
 ),

44726 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "S‘", 
JS_PROP_CONFIGURABLE
 ),

44729 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_£t_™”©Ü_´Ùo_funcs
[] = {

44730 
JS_ITERATOR_NEXT_DEF
("Ãxt", 0, 
js_m­_™”©Ü_Ãxt
, 
MAGIC_SET
 ),

44731 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "S‘ I‹¿tÜ", 
JS_PROP_CONFIGURABLE
 ),

44734 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_w—k_m­_´Ùo_funcs
[] = {

44735 
JS_CFUNC_MAGIC_DEF
("£t", 2, 
js_m­_£t
, 
MAGIC_WEAK
 ),

44736 
JS_CFUNC_MAGIC_DEF
("g‘", 1, 
js_m­_g‘
, 
MAGIC_WEAK
 ),

44737 
JS_CFUNC_MAGIC_DEF
("has", 1, 
js_m­_has
, 
MAGIC_WEAK
 ),

44738 
JS_CFUNC_MAGIC_DEF
("d–‘e", 1, 
js_m­_d–‘e
, 
MAGIC_WEAK
 ),

44739 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "W—kM­", 
JS_PROP_CONFIGURABLE
 ),

44742 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_w—k_£t_´Ùo_funcs
[] = {

44743 
JS_CFUNC_MAGIC_DEF
("add", 1, 
js_m­_£t
, 
MAGIC_SET
 | 
MAGIC_WEAK
 ),

44744 
JS_CFUNC_MAGIC_DEF
("has", 1, 
js_m­_has
, 
MAGIC_SET
 | 
MAGIC_WEAK
 ),

44745 
JS_CFUNC_MAGIC_DEF
("d–‘e", 1, 
js_m­_d–‘e
, 
MAGIC_SET
 | 
MAGIC_WEAK
 ),

44746 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "W—kS‘", 
JS_PROP_CONFIGURABLE
 ),

44749 cÚ¡ 
JSCFunùiÚLi¡EÁry
 * cÚ¡ 
	gjs_m­_´Ùo_funcs_±r
[6] = {

44750 
js_m­_´Ùo_funcs
,

44751 
js_£t_´Ùo_funcs
,

44752 
js_w—k_m­_´Ùo_funcs
,

44753 
js_w—k_£t_´Ùo_funcs
,

44754 
js_m­_™”©Ü_´Ùo_funcs
,

44755 
js_£t_™”©Ü_´Ùo_funcs
,

44758 cÚ¡ 
ušt8_t
 
	gjs_m­_´Ùo_funcs_couÁ
[6] = {

44759 
couÁof
(
js_m­_´Ùo_funcs
),

44760 
couÁof
(
js_£t_´Ùo_funcs
),

44761 
couÁof
(
js_w—k_m­_´Ùo_funcs
),

44762 
couÁof
(
js_w—k_£t_´Ùo_funcs
),

44763 
couÁof
(
js_m­_™”©Ü_´Ùo_funcs
),

44764 
couÁof
(
js_£t_™”©Ü_´Ùo_funcs
),

44767 
	$JS_AddIÁršsicM­S‘
(
JSCÚ‹xt
 *
ùx
)

44769 
i
;

44770 
JSV®ue
 
obj1
;

44771 
buf
[
ATOM_GET_STR_BUF_SIZE
];

44773 
i
 = 0; i < 4; i++) {

44774 cÚ¡ *
Çme
 = 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf),

44775 
JS_ATOM_M­
 + 
i
);

44776 
ùx
->
şass_´Ùo
[
JS_CLASS_MAP
 + 
i
] = 
	`JS_NewObjeù
(ctx);

44777 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_MAP
 + 
i
],

44778 
js_m­_´Ùo_funcs_±r
[
i
],

44779 
js_m­_´Ùo_funcs_couÁ
[
i
]);

44780 
obj1
 = 
	`JS_NewCFunùiÚMagic
(
ùx
, 
js_m­_cÚ¡ruùÜ
, 
Çme
, 0,

44781 
JS_CFUNC_cÚ¡ruùÜ_magic
, 
i
);

44782 ià(
i
 < 2) {

44783 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj1
, 
js_m­_funcs
,

44784 
	`couÁof
(
js_m­_funcs
));

44786 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
obj1
, 
Çme
, ctx->
şass_´Ùo
[
JS_CLASS_MAP
 + 
i
]);

44789 
i
 = 0; i < 2; i++) {

44790 
ùx
->
şass_´Ùo
[
JS_CLASS_MAP_ITERATOR
 + 
i
] =

44791 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
™”©Ü_´Ùo
);

44792 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_MAP_ITERATOR
 + 
i
],

44793 
js_m­_´Ùo_funcs_±r
[
i
 + 4],

44794 
js_m­_´Ùo_funcs_couÁ
[
i
 + 4]);

44796 
	}
}

44799 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_g’”©Ü_funùiÚ_´Ùo_funcs
[] = {

44800 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "G’”©ÜFunùiÚ", 
JS_PROP_CONFIGURABLE
),

44803 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_g’”©Ü_´Ùo_funcs
[] = {

44804 
JS_ITERATOR_NEXT_DEF
("Ãxt", 1, 
js_g’”©Ü_Ãxt
, 
GEN_MAGIC_NEXT
 ),

44805 
JS_ITERATOR_NEXT_DEF
("»tuº", 1, 
js_g’”©Ü_Ãxt
, 
GEN_MAGIC_RETURN
 ),

44806 
JS_ITERATOR_NEXT_DEF
("throw", 1, 
js_g’”©Ü_Ãxt
, 
GEN_MAGIC_THROW
 ),

44807 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "G’”©Ü", 
JS_PROP_CONFIGURABLE
),

44812 
	eJSPromi£S‹Enum
 {

44813 
	mJS_PROMISE_PENDING
,

44814 
	mJS_PROMISE_FULFILLED
,

44815 
	mJS_PROMISE_REJECTED
,

44816 } 
	tJSPromi£S‹Enum
;

44818 
	sJSPromi£D©a
 {

44819 
JSPromi£S‹Enum
 
	m´omi£_¡©e
;

44821 
li¡_h—d
 
	m´omi£_»aùiÚs
[2];

44822 
BOOL
 
	mis_hªdËd
;

44823 
JSV®ue
 
	m´omi£_»suÉ
;

44824 } 
	tJSPromi£D©a
;

44826 
	sJSPromi£FunùiÚD©aResŞved
 {

44827 
	m»f_couÁ
;

44828 
BOOL
 
	m®»ady_»sŞved
;

44829 } 
	tJSPromi£FunùiÚD©aResŞved
;

44831 
	sJSPromi£FunùiÚD©a
 {

44832 
JSV®ue
 
	m´omi£
;

44833 
JSPromi£FunùiÚD©aResŞved
 *
	m´esŞved
;

44834 } 
	tJSPromi£FunùiÚD©a
;

44836 
	sJSPromi£R—ùiÚD©a
 {

44837 
li¡_h—d
 
	mlšk
;

44838 
JSV®ue
 
	m»sŞvšg_funcs
[2];

44839 
JSV®ue
 
	mhªdËr
;

44840 } 
	tJSPromi£R—ùiÚD©a
;

44842 
js_ü—‹_»sŞvšg_funùiÚs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
¬gs
,

44843 
JSV®ueCÚ¡
 
´omi£
);

44845 
	$´omi£_»aùiÚ_d©a_ä“
(
JSRuÁime
 *
¹
,

44846 
JSPromi£R—ùiÚD©a
 *
rd
)

44848 
	`JS_F»eV®ueRT
(
¹
, 
rd
->
»sŞvšg_funcs
[0]);

44849 
	`JS_F»eV®ueRT
(
¹
, 
rd
->
»sŞvšg_funcs
[1]);

44850 
	`JS_F»eV®ueRT
(
¹
, 
rd
->
hªdËr
);

44851 
	`js_ä“_¹
(
¹
, 
rd
);

44852 
	}
}

44854 
JSV®ue
 
	$´omi£_»aùiÚ_job
(
JSCÚ‹xt
 *
ùx
, 
¬gc
,

44855 
JSV®ueCÚ¡
 *
¬gv
)

44857 
JSV®ueCÚ¡
 
hªdËr
, 
¬g
, 
func
;

44858 
JSV®ue
 
»s
, 
»s2
;

44859 
BOOL
 
is_»jeù
;

44861 
	`as£¹
(
¬gc
 == 5);

44862 
hªdËr
 = 
¬gv
[2];

44863 
is_»jeù
 = 
	`JS_ToBoŞ
(
ùx
, 
¬gv
[3]);

44864 
¬g
 = 
¬gv
[4];

44865 #ifdeà
DUMP_PROMISE


44866 
	`´štf
("´omi£_»aùiÚ_job: is_»jeù=%d\n", 
is_»jeù
);

44869 ià(
	`JS_IsUndefšed
(
hªdËr
)) {

44870 ià(
is_»jeù
) {

44871 
»s
 = 
	`JS_Throw
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬g
));

44873 
»s
 = 
	`JS_DupV®ue
(
ùx
, 
¬g
);

44876 
»s
 = 
	`JS_C®l
(
ùx
, 
hªdËr
, 
JS_UNDEFINED
, 1, &
¬g
);

44878 
is_»jeù
 = 
	`JS_IsExû±iÚ
(
»s
);

44879 ià(
is_»jeù
)

44880 
»s
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

44881 
func
 = 
¬gv
[
is_»jeù
];

44885 ià(!
	`JS_IsUndefšed
(
func
)) {

44886 
»s2
 = 
	`JS_C®l
(
ùx
, 
func
, 
JS_UNDEFINED
,

44887 1, (
JSV®ueCÚ¡
 *)&
»s
);

44889 
»s2
 = 
JS_UNDEFINED
;

44891 
	`JS_F»eV®ue
(
ùx
, 
»s
);

44893  
»s2
;

44894 
	}
}

44896 
	$JS_S‘Ho¡Promi£RejeùiÚT¿ck”
(
JSRuÁime
 *
¹
,

44897 
JSHo¡Promi£RejeùiÚT¿ck”
 *
cb
,

44898 *
İaque
)

44900 
¹
->
ho¡_´omi£_»jeùiÚ_Œack”
 = 
cb
;

44901 
¹
->
ho¡_´omi£_»jeùiÚ_Œack”_İaque
 = 
İaque
;

44902 
	}
}

44904 
	$fulfl_Ü_»jeù_´omi£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
´omi£
,

44905 
JSV®ueCÚ¡
 
v®ue
, 
BOOL
 
is_»jeù
)

44907 
JSPromi£D©a
 *
s
 = 
	`JS_G‘O·que
(
´omi£
, 
JS_CLASS_PROMISE
);

44908 
li¡_h—d
 *
–
, *
–1
;

44909 
JSPromi£R—ùiÚD©a
 *
rd
;

44910 
JSV®ueCÚ¡
 
¬gs
[5];

44912 ià(!
s
 || s->
´omi£_¡©e
 !ğ
JS_PROMISE_PENDING
)

44914 
	`£t_v®ue
(
ùx
, &
s
->
´omi£_»suÉ
, 
	`JS_DupV®ue
(ùx, 
v®ue
));

44915 
s
->
´omi£_¡©e
 = 
JS_PROMISE_FULFILLED
 + 
is_»jeù
;

44916 #ifdeà
DUMP_PROMISE


44917 
	`´štf
("fulfl_Ü_»jeù_´omi£: is_»jeù=%d\n", 
is_»jeù
);

44919 ià(
s
->
´omi£_¡©e
 =ğ
JS_PROMISE_REJECTED
 && !s->
is_hªdËd
) {

44920 
JSRuÁime
 *
¹
 = 
ùx
->rt;

44921 ià(
¹
->
ho¡_´omi£_»jeùiÚ_Œack”
) {

44922 
¹
->
	`ho¡_´omi£_»jeùiÚ_Œack”
(
ùx
, 
´omi£
, 
v®ue
, 
FALSE
,

44923 
¹
->
ho¡_´omi£_»jeùiÚ_Œack”_İaque
);

44927 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
s
->
´omi£_»aùiÚs
[
is_»jeù
]) {

44928 
rd
 = 
	`li¡_’Œy
(
–
, 
JSPromi£R—ùiÚD©a
, 
lšk
);

44929 
¬gs
[0] = 
rd
->
»sŞvšg_funcs
[0];

44930 
¬gs
[1] = 
rd
->
»sŞvšg_funcs
[1];

44931 
¬gs
[2] = 
rd
->
hªdËr
;

44932 
¬gs
[3] = 
	`JS_NewBoŞ
(
ùx
, 
is_»jeù
);

44933 
¬gs
[4] = 
v®ue
;

44934 
	`JS_EnqueueJob
(
ùx
, 
´omi£_»aùiÚ_job
, 5, 
¬gs
);

44935 
	`li¡_d–
(&
rd
->
lšk
);

44936 
	`´omi£_»aùiÚ_d©a_ä“
(
ùx
->
¹
, 
rd
);

44939 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
s
->
´omi£_»aùiÚs
[1 - 
is_»jeù
]) {

44940 
rd
 = 
	`li¡_’Œy
(
–
, 
JSPromi£R—ùiÚD©a
, 
lšk
);

44941 
	`li¡_d–
(&
rd
->
lšk
);

44942 
	`´omi£_»aùiÚ_d©a_ä“
(
ùx
->
¹
, 
rd
);

44944 
	}
}

44946 
	$»jeù_´omi£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
´omi£
,

44947 
JSV®ueCÚ¡
 
v®ue
)

44949 
	`fulfl_Ü_»jeù_´omi£
(
ùx
, 
´omi£
, 
v®ue
, 
TRUE
);

44950 
	}
}

44952 
JSV®ue
 
	$js_´omi£_»sŞve_th’abË_job
(
JSCÚ‹xt
 *
ùx
,

44953 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

44955 
JSV®ueCÚ¡
 
´omi£
, 
th’abË
, 
th’
;

44956 
JSV®ue
 
¬gs
[2], 
»s
;

44958 #ifdeà
DUMP_PROMISE


44959 
	`´štf
("js_promise_resolve_thenable_job\n");

44961 
	`as£¹
(
¬gc
 == 3);

44962 
´omi£
 = 
¬gv
[0];

44963 
th’abË
 = 
¬gv
[1];

44964 
th’
 = 
¬gv
[2];

44965 ià(
	`js_ü—‹_»sŞvšg_funùiÚs
(
ùx
, 
¬gs
, 
´omi£
) < 0)

44966  
JS_EXCEPTION
;

44967 
»s
 = 
	`JS_C®l
(
ùx
, 
th’
, 
th’abË
, 2, (
JSV®ueCÚ¡
 *)
¬gs
);

44968 ià(
	`JS_IsExû±iÚ
(
»s
)) {

44969 
JSV®ue
 
”rÜ
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

44970 
»s
 = 
	`JS_C®l
(
ùx
, 
¬gs
[1], 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
”rÜ
);

44971 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

44973 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[0]);

44974 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[1]);

44975  
»s
;

44976 
	}
}

44978 
	$js_´omi£_»sŞve_funùiÚ_ä“_»sŞved
(
JSRuÁime
 *
¹
,

44979 
JSPromi£FunùiÚD©aResŞved
 *
¤
)

44981 ià(--
¤
->
»f_couÁ
 == 0) {

44982 
	`js_ä“_¹
(
¹
, 
¤
);

44984 
	}
}

44986 
	$js_ü—‹_»sŞvšg_funùiÚs
(
JSCÚ‹xt
 *
ùx
,

44987 
JSV®ue
 *
»sŞvšg_funcs
,

44988 
JSV®ueCÚ¡
 
´omi£
)

44991 
JSV®ue
 
obj
;

44992 
JSPromi£FunùiÚD©a
 *
s
;

44993 
JSPromi£FunùiÚD©aResŞved
 *
¤
;

44994 
i
, 
»t
;

44996 
¤
 = 
	`js_m®loc
(
ùx
, (*sr));

44997 ià(!
¤
)

44999 
¤
->
»f_couÁ
 = 1;

45000 
¤
->
®»ady_»sŞved
 = 
FALSE
;

45001 
»t
 = 0;

45002 
i
 = 0; i < 2; i++) {

45003 
obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
funùiÚ_´Ùo
,

45004 
JS_CLASS_PROMISE_RESOLVE_FUNCTION
 + 
i
);

45005 ià(
	`JS_IsExû±iÚ
(
obj
))

45006 
ç
;

45007 
s
 = 
	`js_m®loc
(
ùx
, (*s));

45008 ià(!
s
) {

45009 
	`JS_F»eV®ue
(
ùx
, 
obj
);

45010 
ç
:

45012 ià(
i
 != 0)

45013 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45014 
»t
 = -1;

45017 
¤
->
»f_couÁ
++;

45018 
s
->
´esŞved
 = 
¤
;

45019 
s
->
´omi£
 = 
	`JS_DupV®ue
(
ùx
,…romise);

45020 
	`JS_S‘O·que
(
obj
, 
s
);

45021 
	`js_funùiÚ_£t_´İ”t›s
(
ùx
, 
obj
, 
JS_ATOM_em±y_¡ršg
, 1);

45022 
»sŞvšg_funcs
[
i
] = 
obj
;

45024 
	`js_´omi£_»sŞve_funùiÚ_ä“_»sŞved
(
ùx
->
¹
, 
¤
);

45025  
»t
;

45026 
	}
}

45028 
	$js_´omi£_»sŞve_funùiÚ_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

45030 
JSPromi£FunùiÚD©a
 *
s
 = 
	`JS_VALUE_GET_OBJ
(
v®
)->
u
.
´omi£_funùiÚ_d©a
;

45031 ià(
s
) {

45032 
	`js_´omi£_»sŞve_funùiÚ_ä“_»sŞved
(
¹
, 
s
->
´esŞved
);

45033 
	`JS_F»eV®ueRT
(
¹
, 
s
->
´omi£
);

45034 
	`js_ä“_¹
(
¹
, 
s
);

45036 
	}
}

45038 
	$js_´omi£_»sŞve_funùiÚ_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

45039 
JS_M¬kFunc
 *
m¬k_func
)

45041 
JSPromi£FunùiÚD©a
 *
s
 = 
	`JS_VALUE_GET_OBJ
(
v®
)->
u
.
´omi£_funùiÚ_d©a
;

45042 ià(
s
) {

45043 
	`JS_M¬kV®ue
(
¹
, 
s
->
´omi£
, 
m¬k_func
);

45045 
	}
}

45047 
JSV®ue
 
	$js_´omi£_»sŞve_funùiÚ_ÿÎ
(
JSCÚ‹xt
 *
ùx
,

45048 
JSV®ueCÚ¡
 
func_obj
,

45049 
JSV®ueCÚ¡
 
this_v®
,

45050 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45051 
æags
)

45053 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
func_obj
);

45054 
JSPromi£FunùiÚD©a
 *
s
;

45055 
JSV®ueCÚ¡
 
»sŞutiÚ
, 
¬gs
[3];

45056 
JSV®ue
 
th’
;

45057 
BOOL
 
is_»jeù
;

45059 
s
 = 
p
->
u
.
´omi£_funùiÚ_d©a
;

45060 ià(!
s
 || s->
´esŞved
->
®»ady_»sŞved
)

45061  
JS_UNDEFINED
;

45062 
s
->
´esŞved
->
®»ady_»sŞved
 = 
TRUE
;

45063 
is_»jeù
 = 
p
->
şass_id
 - 
JS_CLASS_PROMISE_RESOLVE_FUNCTION
;

45064 ià(
¬gc
 > 0)

45065 
»sŞutiÚ
 = 
¬gv
[0];

45067 
»sŞutiÚ
 = 
JS_UNDEFINED
;

45068 #ifdeà
DUMP_PROMISE


45069 
	`´štf
("js_´omi£_»sŞvšg_funùiÚ_ÿÎ: is_»jeù=%d„esŞutiÚ=", 
is_»jeù
);

45070 
	`JS_DumpV®ue
(
ùx
, 
»sŞutiÚ
);

45071 
	`´štf
("\n");

45073 ià(
is_»jeù
 || !
	`JS_IsObjeù
(
»sŞutiÚ
)) {

45074 
dÚe
;

45075 } ià(
	`js_§me_v®ue
(
ùx
, 
»sŞutiÚ
, 
s
->
´omi£
)) {

45076 
	`JS_ThrowTy³E¼Ü
(
ùx
, "promise self„esolution");

45077 
ç_»jeù
;

45079 
th’
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
»sŞutiÚ
, 
JS_ATOM_th’
);

45080 ià(
	`JS_IsExû±iÚ
(
th’
)) {

45081 
JSV®ue
 
”rÜ
;

45082 
ç_»jeù
:

45083 
”rÜ
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

45084 
	`»jeù_´omi£
(
ùx
, 
s
->
´omi£
, 
”rÜ
);

45085 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

45086 } ià(!
	`JS_IsFunùiÚ
(
ùx
, 
th’
)) {

45087 
	`JS_F»eV®ue
(
ùx
, 
th’
);

45088 
dÚe
:

45089 
	`fulfl_Ü_»jeù_´omi£
(
ùx
, 
s
->
´omi£
, 
»sŞutiÚ
, 
is_»jeù
);

45091 
¬gs
[0] = 
s
->
´omi£
;

45092 
¬gs
[1] = 
»sŞutiÚ
;

45093 
¬gs
[2] = 
th’
;

45094 
	`JS_EnqueueJob
(
ùx
, 
js_´omi£_»sŞve_th’abË_job
, 3, 
¬gs
);

45095 
	`JS_F»eV®ue
(
ùx
, 
th’
);

45097  
JS_UNDEFINED
;

45098 
	}
}

45100 
	$js_´omi£_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

45102 
JSPromi£D©a
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_PROMISE
);

45103 
li¡_h—d
 *
–
, *
–1
;

45104 
i
;

45106 ià(!
s
)

45108 
i
 = 0; i < 2; i++) {

45109 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
s
->
´omi£_»aùiÚs
[
i
]) {

45110 
JSPromi£R—ùiÚD©a
 *
rd
 =

45111 
	`li¡_’Œy
(
–
, 
JSPromi£R—ùiÚD©a
, 
lšk
);

45112 
	`´omi£_»aùiÚ_d©a_ä“
(
¹
, 
rd
);

45115 
	`JS_F»eV®ueRT
(
¹
, 
s
->
´omi£_»suÉ
);

45116 
	`js_ä“_¹
(
¹
, 
s
);

45117 
	}
}

45119 
	$js_´omi£_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

45120 
JS_M¬kFunc
 *
m¬k_func
)

45122 
JSPromi£D©a
 *
s
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_PROMISE
);

45123 
li¡_h—d
 *
–
;

45124 
i
;

45126 ià(!
s
)

45128 
i
 = 0; i < 2; i++) {

45129 
	`li¡_fÜ_—ch
(
–
, &
s
->
´omi£_»aùiÚs
[
i
]) {

45130 
JSPromi£R—ùiÚD©a
 *
rd
 =

45131 
	`li¡_’Œy
(
–
, 
JSPromi£R—ùiÚD©a
, 
lšk
);

45132 
	`JS_M¬kV®ue
(
¹
, 
rd
->
»sŞvšg_funcs
[0], 
m¬k_func
);

45133 
	`JS_M¬kV®ue
(
¹
, 
rd
->
»sŞvšg_funcs
[1], 
m¬k_func
);

45134 
	`JS_M¬kV®ue
(
¹
, 
rd
->
hªdËr
, 
m¬k_func
);

45137 
	`JS_M¬kV®ue
(
¹
, 
s
->
´omi£_»suÉ
, 
m¬k_func
);

45138 
	}
}

45140 
JSV®ue
 
	$js_´omi£_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

45141 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

45143 
JSV®ueCÚ¡
 
executÜ
;

45144 
JSV®ue
 
obj
;

45145 
JSPromi£D©a
 *
s
;

45146 
JSV®ue
 
¬gs
[2], 
»t
;

45147 
i
;

45149 
executÜ
 = 
¬gv
[0];

45150 ià(
	`check_funùiÚ
(
ùx
, 
executÜ
))

45151  
JS_EXCEPTION
;

45152 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_PROMISE
);

45153 ià(
	`JS_IsExû±iÚ
(
obj
))

45154  
JS_EXCEPTION
;

45155 
s
 = 
	`js_m®locz
(
ùx
, (*s));

45156 ià(!
s
)

45157 
ç
;

45158 
s
->
´omi£_¡©e
 = 
JS_PROMISE_PENDING
;

45159 
s
->
is_hªdËd
 = 
FALSE
;

45160 
i
 = 0; i < 2; i++)

45161 
	`š™_li¡_h—d
(&
s
->
´omi£_»aùiÚs
[
i
]);

45162 
s
->
´omi£_»suÉ
 = 
JS_UNDEFINED
;

45163 
	`JS_S‘O·que
(
obj
, 
s
);

45164 ià(
	`js_ü—‹_»sŞvšg_funùiÚs
(
ùx
, 
¬gs
, 
obj
))

45165 
ç
;

45166 
»t
 = 
	`JS_C®l
(
ùx
, 
executÜ
, 
JS_UNDEFINED
, 2, (
JSV®ueCÚ¡
 *)
¬gs
);

45167 ià(
	`JS_IsExû±iÚ
(
»t
)) {

45168 
JSV®ue
 
»t2
, 
”rÜ
;

45169 
”rÜ
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

45170 
»t2
 = 
	`JS_C®l
(
ùx
, 
¬gs
[1], 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
”rÜ
);

45171 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

45172 ià(
	`JS_IsExû±iÚ
(
»t2
))

45173 
ç1
;

45174 
	`JS_F»eV®ue
(
ùx
, 
»t2
);

45176 
	`JS_F»eV®ue
(
ùx
, 
»t
);

45177 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[0]);

45178 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[1]);

45179  
obj
;

45180 
ç1
:

45181 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[0]);

45182 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[1]);

45183 
ç
:

45184 
	`JS_F»eV®ue
(
ùx
, 
obj
);

45185  
JS_EXCEPTION
;

45186 
	}
}

45188 
JSV®ue
 
	$js_´omi£_executÜ
(
JSCÚ‹xt
 *
ùx
,

45189 
JSV®ueCÚ¡
 
this_v®
,

45190 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45191 
magic
, 
JSV®ue
 *
func_d©a
)

45193 
i
;

45195 
i
 = 0; i < 2; i++) {

45196 ià(!
	`JS_IsUndefšed
(
func_d©a
[
i
]))

45197  
	`JS_ThrowTy³E¼Ü
(
ùx
, "resolving function‡lready set");

45198 
func_d©a
[
i
] = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[i]);

45200  
JS_UNDEFINED
;

45201 
	}
}

45203 
JSV®ue
 
	$js_´omi£_executÜ_Ãw
(
JSCÚ‹xt
 *
ùx
)

45205 
JSV®ueCÚ¡
 
func_d©a
[2];

45207 
func_d©a
[0] = 
JS_UNDEFINED
;

45208 
func_d©a
[1] = 
JS_UNDEFINED
;

45209  
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´omi£_executÜ
, 2,

45210 0, 2, 
func_d©a
);

45211 
	}
}

45213 
JSV®ue
 
	$js_Ãw_´omi£_ÿ·b™y
(
JSCÚ‹xt
 *
ùx
,

45214 
JSV®ue
 *
»sŞvšg_funcs
,

45215 
JSV®ueCÚ¡
 
ùÜ
)

45217 
JSV®ue
 
executÜ
, 
»suÉ_´omi£
;

45218 
JSCFunùiÚD©aRecÜd
 *
s
;

45219 
i
;

45221 
executÜ
 = 
	`js_´omi£_executÜ_Ãw
(
ùx
);

45222 ià(
	`JS_IsExû±iÚ
(
executÜ
))

45223  
executÜ
;

45225 ià(
	`JS_IsUndefšed
(
ùÜ
)) {

45226 
»suÉ_´omi£
 = 
	`js_´omi£_cÚ¡ruùÜ
(
ùx
, 
ùÜ
, 1,

45227 (
JSV®ueCÚ¡
 *)&
executÜ
);

45229 
»suÉ_´omi£
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
ùÜ
, 1,

45230 (
JSV®ueCÚ¡
 *)&
executÜ
);

45232 ià(
	`JS_IsExû±iÚ
(
»suÉ_´omi£
))

45233 
ç
;

45234 
s
 = 
	`JS_G‘O·que
(
executÜ
, 
JS_CLASS_C_FUNCTION_DATA
);

45235 
i
 = 0; i < 2; i++) {

45236 ià(
	`check_funùiÚ
(
ùx
, 
s
->
d©a
[
i
]))

45237 
ç
;

45239 
i
 = 0; i < 2; i++)

45240 
»sŞvšg_funcs
[
i
] = 
	`JS_DupV®ue
(
ùx
, 
s
->
d©a
[i]);

45241 
	`JS_F»eV®ue
(
ùx
, 
executÜ
);

45242  
»suÉ_´omi£
;

45243 
ç
:

45244 
	`JS_F»eV®ue
(
ùx
, 
executÜ
);

45245 
	`JS_F»eV®ue
(
ùx
, 
»suÉ_´omi£
);

45246  
JS_EXCEPTION
;

45247 
	}
}

45249 
JSV®ue
 
	$JS_NewPromi£C­ab™y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 *
»sŞvšg_funcs
)

45251  
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
JS_UNDEFINED
);

45252 
	}
}

45254 
JSV®ue
 
	$js_´omi£_»sŞve
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45255 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

45257 
JSV®ue
 
»suÉ_´omi£
, 
»sŞvšg_funcs
[2], 
»t
;

45258 
BOOL
 
is_»jeù
 = 
magic
;

45260 ià(!
	`JS_IsObjeù
(
this_v®
))

45261  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

45262 ià(!
is_»jeù
 && 
	`JS_G‘O·que
(
¬gv
[0], 
JS_CLASS_PROMISE
)) {

45263 
JSV®ue
 
ùÜ
;

45264 
BOOL
 
is_§me
;

45265 
ùÜ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
¬gv
[0], 
JS_ATOM_cÚ¡ruùÜ
);

45266 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

45267  
ùÜ
;

45268 
is_§me
 = 
	`js_§me_v®ue
(
ùx
, 
ùÜ
, 
this_v®
);

45269 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

45270 ià(
is_§me
)

45271  
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

45273 
»suÉ_´omi£
 = 
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
this_v®
);

45274 ià(
	`JS_IsExû±iÚ
(
»suÉ_´omi£
))

45275  
»suÉ_´omi£
;

45276 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[
is_»jeù
], 
JS_UNDEFINED
, 1, 
¬gv
);

45277 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45278 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45279 ià(
	`JS_IsExû±iÚ
(
»t
)) {

45280 
	`JS_F»eV®ue
(
ùx
, 
»suÉ_´omi£
);

45281  
»t
;

45283 
	`JS_F»eV®ue
(
ùx
, 
»t
);

45284  
»suÉ_´omi£
;

45285 
	}
}

45288 
JSV®ue
 
	$js_´omi£___ÃwPromi£C­ab™y
(
JSCÚ‹xt
 *
ùx
,

45289 
JSV®ueCÚ¡
 
this_v®
,

45290 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

45292 
JSV®ue
 
»suÉ_´omi£
, 
»sŞvšg_funcs
[2], 
obj
;

45293 
JSV®ueCÚ¡
 
ùÜ
;

45294 
ùÜ
 = 
¬gv
[0];

45295 ià(!
	`JS_IsObjeù
(
ùÜ
))

45296  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

45297 
»suÉ_´omi£
 = 
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
ùÜ
);

45298 ià(
	`JS_IsExû±iÚ
(
»suÉ_´omi£
))

45299  
»suÉ_´omi£
;

45300 
obj
 = 
	`JS_NewObjeù
(
ùx
);

45301 ià(
	`JS_IsExû±iÚ
(
obj
)) {

45302 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45303 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45304 
	`JS_F»eV®ue
(
ùx
, 
»suÉ_´omi£
);

45305  
JS_EXCEPTION
;

45307 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_´omi£
, 
»suÉ_´omi£
, 
JS_PROP_C_W_E
);

45308 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_»sŞve
, 
»sŞvšg_funcs
[0], 
JS_PROP_C_W_E
);

45309 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_»jeù
, 
»sŞvšg_funcs
[1], 
JS_PROP_C_W_E
);

45310  
obj
;

45311 
	}
}

45314 
__exû±iÚ
 
	$»maššgEËm’tsCouÁ_add
(
JSCÚ‹xt
 *
ùx
,

45315 
JSV®ueCÚ¡
 
»sŞve_–em’t_’v
,

45316 
add’d
)

45318 
JSV®ue
 
v®
;

45319 
»maššgEËm’tsCouÁ
;

45321 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
»sŞve_–em’t_’v
, 0);

45322 ià(
	`JS_IsExû±iÚ
(
v®
))

45324 ià(
	`JS_ToIÁ32F»e
(
ùx
, &
»maššgEËm’tsCouÁ
, 
v®
))

45326 
»maššgEËm’tsCouÁ
 +ğ
add’d
;

45327 ià(
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
»sŞve_–em’t_’v
, 0,

45328 
	`JS_NewIÁ32
(
ùx
, 
»maššgEËm’tsCouÁ
)) < 0)

45330  (
»maššgEËm’tsCouÁ
 == 0);

45331 
	}
}

45333 
	#PROMISE_MAGIC_®l
 0

	)

45334 
	#PROMISE_MAGIC_®lS‘ed
 1

	)

45335 
	#PROMISE_MAGIC_ªy
 2

	)

45337 
JSV®ue
 
	$js_´omi£_®l_»sŞve_–em’t
(
JSCÚ‹xt
 *
ùx
,

45338 
JSV®ueCÚ¡
 
this_v®
,

45339 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45340 
magic
,

45341 
JSV®ue
 *
func_d©a
)

45343 
»sŞve_ty³
 = 
magic
 & 3;

45344 
is_»jeù
 = 
magic
 & 4;

45345 
BOOL
 
®»adyC®Ëd
 = 
	`JS_ToBoŞ
(
ùx
, 
func_d©a
[0]);

45346 
JSV®ueCÚ¡
 
v®ues
 = 
func_d©a
[2];

45347 
JSV®ueCÚ¡
 
»sŞve
 = 
func_d©a
[3];

45348 
JSV®ueCÚ¡
 
»sŞve_–em’t_’v
 = 
func_d©a
[4];

45349 
JSV®ue
 
»t
, 
obj
;

45350 
is_z”o
, 
šdex
;

45352 ià(
	`JS_ToIÁ32
(
ùx
, &
šdex
, 
func_d©a
[1]))

45353  
JS_EXCEPTION
;

45354 ià(
®»adyC®Ëd
)

45355  
JS_UNDEFINED
;

45356 
func_d©a
[0] = 
	`JS_NewBoŞ
(
ùx
, 
TRUE
);

45358 ià(
»sŞve_ty³
 =ğ
PROMISE_MAGIC_®lS‘ed
) {

45359 
JSV®ue
 
¡r
;

45361 
obj
 = 
	`JS_NewObjeù
(
ùx
);

45362 ià(
	`JS_IsExû±iÚ
(
obj
))

45363  
JS_EXCEPTION
;

45364 
¡r
 = 
	`JS_NewSŒšg
(
ùx
, 
is_»jeù
 ? "rejected" : "fulfilled");

45365 ià(
	`JS_IsExû±iÚ
(
¡r
))

45366 
ç1
;

45367 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_¡©us
,

45368 
¡r
,

45369 
JS_PROP_C_W_E
) < 0)

45370 
ç1
;

45371 ià(
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
,

45372 
is_»jeù
 ? 
JS_ATOM_»asÚ
 : 
JS_ATOM_v®ue
,

45373 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]),

45374 
JS_PROP_C_W_E
) < 0) {

45375 
ç1
:

45376 
	`JS_F»eV®ue
(
ùx
, 
obj
);

45377  
JS_EXCEPTION
;

45380 
obj
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

45382 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
v®ues
, 
šdex
,

45383 
obj
, 
JS_PROP_C_W_E
) < 0)

45384  
JS_EXCEPTION
;

45386 
is_z”o
 = 
	`»maššgEËm’tsCouÁ_add
(
ùx
, 
»sŞve_–em’t_’v
, -1);

45387 ià(
is_z”o
 < 0)

45388  
JS_EXCEPTION
;

45389 ià(
is_z”o
) {

45390 ià(
»sŞve_ty³
 =ğ
PROMISE_MAGIC_ªy
) {

45391 
JSV®ue
 
”rÜ
;

45392 
”rÜ
 = 
	`js_agg»g©e_”rÜ_cÚ¡ruùÜ
(
ùx
, 
v®ues
);

45393 ià(
	`JS_IsExû±iÚ
(
”rÜ
))

45394  
JS_EXCEPTION
;

45395 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞve
, 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
”rÜ
);

45396 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

45398 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞve
, 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
v®ues
);

45400 ià(
	`JS_IsExû±iÚ
(
»t
))

45401  
»t
;

45402 
	`JS_F»eV®ue
(
ùx
, 
»t
);

45404  
JS_UNDEFINED
;

45405 
	}
}

45408 
JSV®ue
 
	$js_´omi£_®l
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45409 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

45411 
JSV®ue
 
»suÉ_´omi£
, 
»sŞvšg_funcs
[2], 
™”
, 
™em
, 
Ãxt_´omi£
, 
»t
;

45412 
JSV®ue
 
Ãxt_m‘hod
 = 
JS_UNDEFINED
, 
v®ues
 = JS_UNDEFINED;

45413 
JSV®ue
 
»sŞve_–em’t_’v
 = 
JS_UNDEFINED
, 
»sŞve_–em’t
, 
»jeù_–em’t
;

45414 
JSV®ue
 
´omi£_»sŞve
 = 
JS_UNDEFINED
;

45415 
JSV®ueCÚ¡
 
th’_¬gs
[2], 
»sŞve_–em’t_d©a
[5];

45416 
BOOL
 
dÚe
;

45417 
šdex
, 
is_z”o
, 
is_´omi£_ªy
 = (
magic
 =ğ
PROMISE_MAGIC_ªy
);

45419 ià(!
	`JS_IsObjeù
(
this_v®
))

45420  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

45421 
»suÉ_´omi£
 = 
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
this_v®
);

45422 ià(
	`JS_IsExû±iÚ
(
»suÉ_´omi£
))

45423  
»suÉ_´omi£
;

45424 
™”
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
¬gv
[0], 
FALSE
);

45425 ià(
	`JS_IsExû±iÚ
(
™”
)) {

45426 
JSV®ue
 
”rÜ
;

45427 
ç_»jeù
:

45428 
”rÜ
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

45429 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[1], 
JS_UNDEFINED
, 1,

45430 (
JSV®ueCÚ¡
 *)&
”rÜ
);

45431 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

45432 ià(
	`JS_IsExû±iÚ
(
»t
))

45433 
ç
;

45434 
	`JS_F»eV®ue
(
ùx
, 
»t
);

45436 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”
, 
JS_ATOM_Ãxt
);

45437 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

45438 
ç_»jeù
;

45439 
v®ues
 = 
	`JS_NewA¼ay
(
ùx
);

45440 ià(
	`JS_IsExû±iÚ
(
v®ues
))

45441 
ç_»jeù
;

45442 
»sŞve_–em’t_’v
 = 
	`JS_NewA¼ay
(
ùx
);

45443 ià(
	`JS_IsExû±iÚ
(
»sŞve_–em’t_’v
))

45444 
ç_»jeù
;

45446 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
»sŞve_–em’t_’v
, 0,

45447 
	`JS_NewIÁ32
(
ùx
, 1),

45448 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_ENUMERABLE
 | 
JS_PROP_WRITABLE
) < 0)

45449 
ç_»jeù
;

45451 
´omi£_»sŞve
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_»sŞve
);

45452 ià(
	`JS_IsExû±iÚ
(
´omi£_»sŞve
) ||

45453 
	`check_funùiÚ
(
ùx
, 
´omi£_»sŞve
))

45454 
ç_»jeù1
;

45456 
šdex
 = 0;

45460 
™em
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
™”
, 
Ãxt_m‘hod
, 0, 
NULL
, &
dÚe
);

45461 ià(
	`JS_IsExû±iÚ
(
™em
))

45462 
ç_»jeù
;

45463 ià(
dÚe
)

45465 
Ãxt_´omi£
 = 
	`JS_C®l
(
ùx
, 
´omi£_»sŞve
,

45466 
this_v®
, 1, (
JSV®ueCÚ¡
 *)&
™em
);

45467 
	`JS_F»eV®ue
(
ùx
, 
™em
);

45468 ià(
	`JS_IsExû±iÚ
(
Ãxt_´omi£
)) {

45469 
ç_»jeù1
:

45470 
	`JS_I‹¿tÜClo£
(
ùx
, 
™”
, 
TRUE
);

45471 
ç_»jeù
;

45473 
»sŞve_–em’t_d©a
[0] = 
	`JS_NewBoŞ
(
ùx
, 
FALSE
);

45474 
»sŞve_–em’t_d©a
[1] = (
JSV®ueCÚ¡
)
	`JS_NewIÁ32
(
ùx
, 
šdex
);

45475 
»sŞve_–em’t_d©a
[2] = 
v®ues
;

45476 
»sŞve_–em’t_d©a
[3] = 
»sŞvšg_funcs
[
is_´omi£_ªy
];

45477 
»sŞve_–em’t_d©a
[4] = 
»sŞve_–em’t_’v
;

45478 
»sŞve_–em’t
 =

45479 
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´omi£_®l_»sŞve_–em’t
, 1,

45480 
magic
, 5, 
»sŞve_–em’t_d©a
);

45481 ià(
	`JS_IsExû±iÚ
(
»sŞve_–em’t
)) {

45482 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_´omi£
);

45483 
ç_»jeù1
;

45486 ià(
magic
 =ğ
PROMISE_MAGIC_®lS‘ed
) {

45487 
»jeù_–em’t
 =

45488 
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´omi£_®l_»sŞve_–em’t
, 1,

45489 
magic
 | 4, 5, 
»sŞve_–em’t_d©a
);

45490 ià(
	`JS_IsExû±iÚ
(
»jeù_–em’t
)) {

45491 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_´omi£
);

45492 
ç_»jeù1
;

45494 } ià(
magic
 =ğ
PROMISE_MAGIC_ªy
) {

45495 ià(
	`JS_DefšePrİ”tyV®ueUšt32
(
ùx
, 
v®ues
, 
šdex
,

45496 
JS_UNDEFINED
, 
JS_PROP_C_W_E
) < 0)

45497 
ç_»jeù1
;

45498 
»jeù_–em’t
 = 
»sŞve_–em’t
;

45499 
»sŞve_–em’t
 = 
	`JS_DupV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45501 
»jeù_–em’t
 = 
	`JS_DupV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45504 ià(
	`»maššgEËm’tsCouÁ_add
(
ùx
, 
»sŞve_–em’t_’v
, 1) < 0) {

45505 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_´omi£
);

45506 
	`JS_F»eV®ue
(
ùx
, 
»sŞve_–em’t
);

45507 
	`JS_F»eV®ue
(
ùx
, 
»jeù_–em’t
);

45508 
ç_»jeù1
;

45511 
th’_¬gs
[0] = 
»sŞve_–em’t
;

45512 
th’_¬gs
[1] = 
»jeù_–em’t
;

45513 
»t
 = 
	`JS_InvokeF»e
(
ùx
, 
Ãxt_´omi£
, 
JS_ATOM_th’
, 2, 
th’_¬gs
);

45514 
	`JS_F»eV®ue
(
ùx
, 
»sŞve_–em’t
);

45515 
	`JS_F»eV®ue
(
ùx
, 
»jeù_–em’t
);

45516 ià(
	`check_exû±iÚ_ä“
(
ùx
, 
»t
))

45517 
ç_»jeù1
;

45518 
šdex
++;

45521 
is_z”o
 = 
	`»maššgEËm’tsCouÁ_add
(
ùx
, 
»sŞve_–em’t_’v
, -1);

45522 ià(
is_z”o
 < 0)

45523 
ç_»jeù
;

45524 ià(
is_z”o
) {

45525 ià(
magic
 =ğ
PROMISE_MAGIC_ªy
) {

45526 
JSV®ue
 
”rÜ
;

45527 
”rÜ
 = 
	`js_agg»g©e_”rÜ_cÚ¡ruùÜ
(
ùx
, 
v®ues
);

45528 ià(
	`JS_IsExû±iÚ
(
”rÜ
))

45529 
ç_»jeù
;

45530 
	`JS_F»eV®ue
(
ùx
, 
v®ues
);

45531 
v®ues
 = 
”rÜ
;

45533 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[
is_´omi£_ªy
], 
JS_UNDEFINED
,

45534 1, (
JSV®ueCÚ¡
 *)&
v®ues
);

45535 ià(
	`check_exû±iÚ_ä“
(
ùx
, 
»t
))

45536 
ç_»jeù
;

45539 
dÚe
:

45540 
	`JS_F»eV®ue
(
ùx
, 
´omi£_»sŞve
);

45541 
	`JS_F»eV®ue
(
ùx
, 
»sŞve_–em’t_’v
);

45542 
	`JS_F»eV®ue
(
ùx
, 
v®ues
);

45543 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

45544 
	`JS_F»eV®ue
(
ùx
, 
™”
);

45545 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45546 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45547  
»suÉ_´omi£
;

45548 
ç
:

45549 
	`JS_F»eV®ue
(
ùx
, 
»suÉ_´omi£
);

45550 
»suÉ_´omi£
 = 
JS_EXCEPTION
;

45551 
dÚe
;

45552 
	}
}

45554 
JSV®ue
 
	$js_´omi£_¿û
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45555 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

45557 
JSV®ue
 
»suÉ_´omi£
, 
»sŞvšg_funcs
[2], 
™”
, 
™em
, 
Ãxt_´omi£
, 
»t
;

45558 
JSV®ue
 
Ãxt_m‘hod
 = 
JS_UNDEFINED
;

45559 
JSV®ue
 
´omi£_»sŞve
 = 
JS_UNDEFINED
;

45560 
BOOL
 
dÚe
;

45562 ià(!
	`JS_IsObjeù
(
this_v®
))

45563  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

45564 
»suÉ_´omi£
 = 
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
this_v®
);

45565 ià(
	`JS_IsExû±iÚ
(
»suÉ_´omi£
))

45566  
»suÉ_´omi£
;

45567 
™”
 = 
	`JS_G‘I‹¿tÜ
(
ùx
, 
¬gv
[0], 
FALSE
);

45568 ià(
	`JS_IsExû±iÚ
(
™”
)) {

45569 
JSV®ue
 
”rÜ
;

45570 
ç_»jeù
:

45571 
”rÜ
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

45572 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[1], 
JS_UNDEFINED
, 1,

45573 (
JSV®ueCÚ¡
 *)&
”rÜ
);

45574 
	`JS_F»eV®ue
(
ùx
, 
”rÜ
);

45575 ià(
	`JS_IsExû±iÚ
(
»t
))

45576 
ç
;

45577 
	`JS_F»eV®ue
(
ùx
, 
»t
);

45579 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”
, 
JS_ATOM_Ãxt
);

45580 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

45581 
ç_»jeù
;

45583 
´omi£_»sŞve
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
this_v®
, 
JS_ATOM_»sŞve
);

45584 ià(
	`JS_IsExû±iÚ
(
´omi£_»sŞve
) ||

45585 
	`check_funùiÚ
(
ùx
, 
´omi£_»sŞve
))

45586 
ç_»jeù1
;

45591 
™em
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
™”
, 
Ãxt_m‘hod
, 0, 
NULL
, &
dÚe
);

45592 ià(
	`JS_IsExû±iÚ
(
™em
))

45593 
ç_»jeù
;

45594 ià(
dÚe
)

45596 
Ãxt_´omi£
 = 
	`JS_C®l
(
ùx
, 
´omi£_»sŞve
,

45597 
this_v®
, 1, (
JSV®ueCÚ¡
 *)&
™em
);

45598 
	`JS_F»eV®ue
(
ùx
, 
™em
);

45599 ià(
	`JS_IsExû±iÚ
(
Ãxt_´omi£
)) {

45600 
ç_»jeù1
:

45601 
	`JS_I‹¿tÜClo£
(
ùx
, 
™”
, 
TRUE
);

45602 
ç_»jeù
;

45604 
»t
 = 
	`JS_InvokeF»e
(
ùx
, 
Ãxt_´omi£
, 
JS_ATOM_th’
, 2,

45605 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs
);

45606 ià(
	`check_exû±iÚ_ä“
(
ùx
, 
»t
))

45607 
ç_»jeù1
;

45610 
dÚe
:

45611 
	`JS_F»eV®ue
(
ùx
, 
´omi£_»sŞve
);

45612 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

45613 
	`JS_F»eV®ue
(
ùx
, 
™”
);

45614 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45615 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45616  
»suÉ_´omi£
;

45617 
ç
:

45619 
	`JS_F»eV®ue
(
ùx
, 
»suÉ_´omi£
);

45620 
»suÉ_´omi£
 = 
JS_EXCEPTION
;

45621 
dÚe
;

45622 
	}
}

45624 
__exû±iÚ
 
	$³rfÜm_´omi£_th’
(
JSCÚ‹xt
 *
ùx
,

45625 
JSV®ueCÚ¡
 
´omi£
,

45626 
JSV®ueCÚ¡
 *
»sŞve_»jeù
,

45627 
JSV®ueCÚ¡
 *
ÿp_»sŞvšg_funcs
)

45629 
JSPromi£D©a
 *
s
 = 
	`JS_G‘O·que
(
´omi£
, 
JS_CLASS_PROMISE
);

45630 
JSPromi£R—ùiÚD©a
 *
rd_¬¿y
[2], *
rd
;

45631 
i
, 
j
;

45633 
rd_¬¿y
[0] = 
NULL
;

45634 
rd_¬¿y
[1] = 
NULL
;

45635 
i
 = 0; i < 2; i++) {

45636 
JSV®ueCÚ¡
 
hªdËr
;

45637 
rd
 = 
	`js_m®locz
(
ùx
, (*rd));

45638 ià(!
rd
) {

45639 ià(
i
 == 1)

45640 
	`´omi£_»aùiÚ_d©a_ä“
(
ùx
->
¹
, 
rd_¬¿y
[0]);

45643 
j
 = 0; j < 2; j++)

45644 
rd
->
»sŞvšg_funcs
[
j
] = 
	`JS_DupV®ue
(
ùx
, 
ÿp_»sŞvšg_funcs
[j]);

45645 
hªdËr
 = 
»sŞve_»jeù
[
i
];

45646 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
hªdËr
))

45647 
hªdËr
 = 
JS_UNDEFINED
;

45648 
rd
->
hªdËr
 = 
	`JS_DupV®ue
(
ùx
, handler);

45649 
rd_¬¿y
[
i
] = 
rd
;

45652 ià(
s
->
´omi£_¡©e
 =ğ
JS_PROMISE_PENDING
) {

45653 
i
 = 0; i < 2; i++)

45654 
	`li¡_add_
(&
rd_¬¿y
[
i
]->
lšk
, &
s
->
´omi£_»aùiÚs
[i]);

45656 
JSV®ueCÚ¡
 
¬gs
[5];

45657 ià(
s
->
´omi£_¡©e
 =ğ
JS_PROMISE_REJECTED
 && !s->
is_hªdËd
) {

45658 
JSRuÁime
 *
¹
 = 
ùx
->rt;

45659 ià(
¹
->
ho¡_´omi£_»jeùiÚ_Œack”
) {

45660 
¹
->
	`ho¡_´omi£_»jeùiÚ_Œack”
(
ùx
, 
´omi£
, 
s
->
´omi£_»suÉ
,

45661 
TRUE
, 
¹
->
ho¡_´omi£_»jeùiÚ_Œack”_İaque
);

45664 
i
 = 
s
->
´omi£_¡©e
 - 
JS_PROMISE_FULFILLED
;

45665 
rd
 = 
rd_¬¿y
[
i
];

45666 
¬gs
[0] = 
rd
->
»sŞvšg_funcs
[0];

45667 
¬gs
[1] = 
rd
->
»sŞvšg_funcs
[1];

45668 
¬gs
[2] = 
rd
->
hªdËr
;

45669 
¬gs
[3] = 
	`JS_NewBoŞ
(
ùx
, 
i
);

45670 
¬gs
[4] = 
s
->
´omi£_»suÉ
;

45671 
	`JS_EnqueueJob
(
ùx
, 
´omi£_»aùiÚ_job
, 5, 
¬gs
);

45672 
i
 = 0; i < 2; i++)

45673 
	`´omi£_»aùiÚ_d©a_ä“
(
ùx
->
¹
, 
rd_¬¿y
[
i
]);

45675 
s
->
is_hªdËd
 = 
TRUE
;

45677 
	}
}

45679 
JSV®ue
 
	$js_´omi£_th’
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45680 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

45682 
JSV®ue
 
ùÜ
, 
»suÉ_´omi£
, 
»sŞvšg_funcs
[2];

45683 
JSPromi£D©a
 *
s
;

45684 
i
, 
»t
;

45686 
s
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_PROMISE
);

45687 ià(!
s
)

45688  
JS_EXCEPTION
;

45690 
ùÜ
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
this_v®
, 
JS_UNDEFINED
);

45691 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

45692  
ùÜ
;

45693 
»suÉ_´omi£
 = 
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
ùÜ
);

45694 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

45695 ià(
	`JS_IsExû±iÚ
(
»suÉ_´omi£
))

45696  
»suÉ_´omi£
;

45697 
»t
 = 
	`³rfÜm_´omi£_th’
(
ùx
, 
this_v®
, 
¬gv
,

45698 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs
);

45699 
i
 = 0; i < 2; i++)

45700 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[
i
]);

45701 ià(
»t
) {

45702 
	`JS_F»eV®ue
(
ùx
, 
»suÉ_´omi£
);

45703  
JS_EXCEPTION
;

45705  
»suÉ_´omi£
;

45706 
	}
}

45708 
JSV®ue
 
	$js_´omi£_ÿtch
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45709 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

45711 
JSV®ueCÚ¡
 
¬gs
[2];

45712 
¬gs
[0] = 
JS_UNDEFINED
;

45713 
¬gs
[1] = 
¬gv
[0];

45714  
	`JS_Invoke
(
ùx
, 
this_v®
, 
JS_ATOM_th’
, 2, 
¬gs
);

45715 
	}
}

45717 
JSV®ue
 
	$js_´omi£_fš®ly_v®ue_thunk
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45718 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45719 
magic
, 
JSV®ue
 *
func_d©a
)

45721  
	`JS_DupV®ue
(
ùx
, 
func_d©a
[0]);

45722 
	}
}

45724 
JSV®ue
 
	$js_´omi£_fš®ly_throw”
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45725 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45726 
magic
, 
JSV®ue
 *
func_d©a
)

45728  
	`JS_Throw
(
ùx
, 
	`JS_DupV®ue
(ùx, 
func_d©a
[0]));

45729 
	}
}

45731 
JSV®ue
 
	$js_´omi£_th’_fš®ly_func
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45732 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45733 
magic
, 
JSV®ue
 *
func_d©a
)

45735 
JSV®ueCÚ¡
 
ùÜ
 = 
func_d©a
[0];

45736 
JSV®ueCÚ¡
 
ÚFš®ly
 = 
func_d©a
[1];

45737 
JSV®ue
 
»s
, 
´omi£
, 
»sŞvšg_funcs
[2], 
»t
, 
th’_func
;

45739 
»s
 = 
	`JS_C®l
(
ùx
, 
ÚFš®ly
, 
JS_UNDEFINED
, 0, 
NULL
);

45740 ià(
	`JS_IsExû±iÚ
(
»s
))

45741  
»s
;

45742 
´omi£
 = 
	`js_Ãw_´omi£_ÿ·b™y
(
ùx
, 
»sŞvšg_funcs
, 
ùÜ
);

45743 ià(
	`JS_IsExû±iÚ
(
´omi£
)) {

45744 
	`JS_F»eV®ue
(
ùx
, 
»s
);

45745  
JS_EXCEPTION
;

45747 
»t
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[0], 
JS_UNDEFINED
,

45748 1, (
JSV®ueCÚ¡
*)&
»s
);

45749 
	`JS_F»eV®ue
(
ùx
, 
»s
);

45750 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45751 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45752 ià(
	`JS_IsExû±iÚ
(
»t
)) {

45753 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

45754  
»t
;

45756 
	`JS_F»eV®ue
(
ùx
, 
»t
);

45757 ià(
magic
 == 0) {

45758 
th’_func
 = 
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´omi£_fš®ly_v®ue_thunk
, 0,

45759 0, 1, 
¬gv
);

45761 
th’_func
 = 
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´omi£_fš®ly_throw”
, 0,

45762 0, 1, 
¬gv
);

45764 ià(
	`JS_IsExû±iÚ
(
th’_func
)) {

45765 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

45766  
th’_func
;

45768 
»t
 = 
	`JS_InvokeF»e
(
ùx
, 
´omi£
, 
JS_ATOM_th’
, 1, (
JSV®ueCÚ¡
 *)&
th’_func
);

45769 
	`JS_F»eV®ue
(
ùx
, 
th’_func
);

45770  
»t
;

45771 
	}
}

45773 
JSV®ue
 
	$js_´omi£_fš®ly
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45774 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

45776 
JSV®ueCÚ¡
 
ÚFš®ly
 = 
¬gv
[0];

45777 
JSV®ue
 
ùÜ
, 
»t
;

45778 
JSV®ue
 
th’_funcs
[2];

45779 
JSV®ueCÚ¡
 
func_d©a
[2];

45780 
i
;

45782 
ùÜ
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
this_v®
, 
JS_UNDEFINED
);

45783 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

45784  
ùÜ
;

45785 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
ÚFš®ly
)) {

45786 
th’_funcs
[0] = 
	`JS_DupV®ue
(
ùx
, 
ÚFš®ly
);

45787 
th’_funcs
[1] = 
	`JS_DupV®ue
(
ùx
, 
ÚFš®ly
);

45789 
func_d©a
[0] = 
ùÜ
;

45790 
func_d©a
[1] = 
ÚFš®ly
;

45791 
i
 = 0; i < 2; i++) {

45792 
th’_funcs
[
i
] = 
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_´omi£_th’_fš®ly_func
, 1, i, 2, 
func_d©a
);

45793 ià(
	`JS_IsExû±iÚ
(
th’_funcs
[
i
])) {

45794 ià(
i
 == 1)

45795 
	`JS_F»eV®ue
(
ùx
, 
th’_funcs
[0]);

45796 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

45797  
JS_EXCEPTION
;

45801 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

45802 
»t
 = 
	`JS_Invoke
(
ùx
, 
this_v®
, 
JS_ATOM_th’
, 2, (
JSV®ueCÚ¡
 *)
th’_funcs
);

45803 
	`JS_F»eV®ue
(
ùx
, 
th’_funcs
[0]);

45804 
	`JS_F»eV®ue
(
ùx
, 
th’_funcs
[1]);

45805  
»t
;

45806 
	}
}

45808 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_´omi£_funcs
[] = {

45809 
JS_CFUNC_MAGIC_DEF
("»sŞve", 1, 
js_´omi£_»sŞve
, 0 ),

45810 
JS_CFUNC_MAGIC_DEF
("»jeù", 1, 
js_´omi£_»sŞve
, 1 ),

45811 
JS_CFUNC_MAGIC_DEF
("®l", 1, 
js_´omi£_®l
, 
PROMISE_MAGIC_®l
 ),

45812 
JS_CFUNC_MAGIC_DEF
("®lS‘ed", 1, 
js_´omi£_®l
, 
PROMISE_MAGIC_®lS‘ed
 ),

45813 
JS_CFUNC_MAGIC_DEF
("ªy", 1, 
js_´omi£_®l
, 
PROMISE_MAGIC_ªy
 ),

45814 
JS_CFUNC_DEF
("¿û", 1, 
js_´omi£_¿û
 ),

45816 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
),

45819 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_´omi£_´Ùo_funcs
[] = {

45820 
JS_CFUNC_DEF
("th’", 2, 
js_´omi£_th’
 ),

45821 
JS_CFUNC_DEF
("ÿtch", 1, 
js_´omi£_ÿtch
 ),

45822 
JS_CFUNC_DEF
("fš®ly", 1, 
js_´omi£_fš®ly
 ),

45823 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "Promi£", 
JS_PROP_CONFIGURABLE
 ),

45827 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_async_funùiÚ_´Ùo_funcs
[] = {

45828 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "AsyncFunùiÚ", 
JS_PROP_CONFIGURABLE
 ),

45831 
JSV®ue
 
	$js_async_äom_sync_™”©Ü_unw¿p
(
JSCÚ‹xt
 *
ùx
,

45832 
JSV®ueCÚ¡
 
this_v®
,

45833 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45834 
magic
, 
JSV®ue
 *
func_d©a
)

45836  
	`js_ü—‹_™”©Ü_»suÉ
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]),

45837 
	`JS_ToBoŞ
(
ùx
, 
func_d©a
[0]));

45838 
	}
}

45840 
JSV®ue
 
	$js_async_äom_sync_™”©Ü_unw¿p_func_ü—‹
(
JSCÚ‹xt
 *
ùx
,

45841 
BOOL
 
dÚe
)

45843 
JSV®ueCÚ¡
 
func_d©a
[1];

45845 
func_d©a
[0] = (
JSV®ueCÚ¡
)
	`JS_NewBoŞ
(
ùx
, 
dÚe
);

45846  
	`JS_NewCFunùiÚD©a
(
ùx
, 
js_async_äom_sync_™”©Ü_unw¿p
,

45847 1, 0, 1, 
func_d©a
);

45848 
	}
}

45852 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_async_™”©Ü_´Ùo_funcs
[] = {

45853 
JS_CFUNC_DEF
("[SymbŞ.asyncI‹¿tÜ]", 0, 
js_™”©Ü_´Ùo_™”©Ü
 ),

45858 
	sJSAsyncFromSyncI‹¿tÜD©a
 {

45859 
JSV®ue
 
	msync_™”
;

45860 
JSV®ue
 
	mÃxt_m‘hod
;

45861 } 
	tJSAsyncFromSyncI‹¿tÜD©a
;

45863 
	$js_async_äom_sync_™”©Ü_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

45865 
JSAsyncFromSyncI‹¿tÜD©a
 *
s
 =

45866 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
);

45867 ià(
s
) {

45868 
	`JS_F»eV®ueRT
(
¹
, 
s
->
sync_™”
);

45869 
	`JS_F»eV®ueRT
(
¹
, 
s
->
Ãxt_m‘hod
);

45870 
	`js_ä“_¹
(
¹
, 
s
);

45872 
	}
}

45874 
	$js_async_äom_sync_™”©Ü_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

45875 
JS_M¬kFunc
 *
m¬k_func
)

45877 
JSAsyncFromSyncI‹¿tÜD©a
 *
s
 =

45878 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
);

45879 ià(
s
) {

45880 
	`JS_M¬kV®ue
(
¹
, 
s
->
sync_™”
, 
m¬k_func
);

45881 
	`JS_M¬kV®ue
(
¹
, 
s
->
Ãxt_m‘hod
, 
m¬k_func
);

45883 
	}
}

45885 
JSV®ue
 
	$JS_C»©eAsyncFromSyncI‹¿tÜ
(
JSCÚ‹xt
 *
ùx
,

45886 
JSV®ueCÚ¡
 
sync_™”
)

45888 
JSV®ue
 
async_™”
, 
Ãxt_m‘hod
;

45889 
JSAsyncFromSyncI‹¿tÜD©a
 *
s
;

45891 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
sync_™”
, 
JS_ATOM_Ãxt
);

45892 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

45893  
JS_EXCEPTION
;

45894 
async_™”
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
);

45895 ià(
	`JS_IsExû±iÚ
(
async_™”
)) {

45896 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

45897  
async_™”
;

45899 
s
 = 
	`js_m®locz
(
ùx
, (*s));

45900 ià(!
s
) {

45901 
	`JS_F»eV®ue
(
ùx
, 
async_™”
);

45902 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

45903  
JS_EXCEPTION
;

45905 
s
->
sync_™”
 = 
	`JS_DupV®ue
(
ùx
, sync_iter);

45906 
s
->
Ãxt_m‘hod
 =‚ext_method;

45907 
	`JS_S‘O·que
(
async_™”
, 
s
);

45908  
async_™”
;

45909 
	}
}

45911 
JSV®ue
 
	$js_async_äom_sync_™”©Ü_Ãxt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

45912 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

45913 
magic
)

45915 
JSV®ue
 
´omi£
, 
»sŞvšg_funcs
[2], 
v®ue
, 
”r
, 
m‘hod
;

45916 
JSAsyncFromSyncI‹¿tÜD©a
 *
s
;

45917 
dÚe
;

45918 
is_»jeù
;

45920 
´omi£
 = 
	`JS_NewPromi£C­ab™y
(
ùx
, 
»sŞvšg_funcs
);

45921 ià(
	`JS_IsExû±iÚ
(
´omi£
))

45922  
JS_EXCEPTION
;

45923 
s
 = 
	`JS_G‘O·que
(
this_v®
, 
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
);

45924 ià(!
s
) {

45925 
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡n Async-from-Sync Iterator");

45926 
»jeù
;

45929 ià(
magic
 =ğ
GEN_MAGIC_NEXT
) {

45930 
m‘hod
 = 
	`JS_DupV®ue
(
ùx
, 
s
->
Ãxt_m‘hod
);

45932 
m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
s
->
sync_™”
,

45933 
magic
 =ğ
GEN_MAGIC_RETURN
 ? 
JS_ATOM_»tuº
 :

45934 
JS_ATOM_throw
);

45935 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

45936 
»jeù
;

45937 ià(
	`JS_IsUndefšed
(
m‘hod
è|| 
	`JS_IsNuÎ
(method)) {

45938 ià(
magic
 =ğ
GEN_MAGIC_RETURN
) {

45939 
”r
 = 
	`js_ü—‹_™”©Ü_»suÉ
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]), 
TRUE
);

45940 
is_»jeù
 = 0;

45942 
”r
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

45943 
is_»jeù
 = 1;

45945 
dÚe_»sŞve
;

45948 
v®ue
 = 
	`JS_I‹¿tÜNext2
(
ùx
, 
s
->
sync_™”
, 
m‘hod
,

45949 
¬gc
 >ğ1 ? 1 : 0, 
¬gv
, &
dÚe
);

45950 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

45951 ià(
	`JS_IsExû±iÚ
(
v®ue
))

45952 
»jeù
;

45953 ià(
dÚe
 == 2) {

45954 
JSV®ue
 
obj
 = 
v®ue
;

45955 
v®ue
 = 
	`JS_I‹¿tÜG‘Com¶‘eV®ue
(
ùx
, 
obj
, &
dÚe
);

45956 
	`JS_F»eV®ue
(
ùx
, 
obj
);

45957 ià(
	`JS_IsExû±iÚ
(
v®ue
))

45958 
»jeù
;

45961 ià(
	`JS_IsExû±iÚ
(
v®ue
)) {

45962 
JSV®ue
 
»s2
;

45963 
»jeù
:

45964 
”r
 = 
	`JS_G‘Exû±iÚ
(
ùx
);

45965 
is_»jeù
 = 1;

45966 
dÚe_»sŞve
:

45967 
»s2
 = 
	`JS_C®l
(
ùx
, 
»sŞvšg_funcs
[
is_»jeù
], 
JS_UNDEFINED
,

45968 1, (
JSV®ueCÚ¡
 *)&
”r
);

45969 
	`JS_F»eV®ue
(
ùx
, 
”r
);

45970 
	`JS_F»eV®ue
(
ùx
, 
»s2
);

45971 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

45972 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

45973  
´omi£
;

45976 
JSV®ue
 
v®ue_w¿µ”_´omi£
, 
»sŞve_»jeù
[2];

45977 
»s
;

45979 
v®ue_w¿µ”_´omi£
 = 
	`js_´omi£_»sŞve
(
ùx
, ctx->
´omi£_ùÜ
,

45980 1, (
JSV®ueCÚ¡
 *)&
v®ue
, 0);

45981 ià(
	`JS_IsExû±iÚ
(
v®ue_w¿µ”_´omi£
)) {

45982 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

45983 
»jeù
;

45986 
»sŞve_»jeù
[0] =

45987 
	`js_async_äom_sync_™”©Ü_unw¿p_func_ü—‹
(
ùx
, 
dÚe
);

45988 ià(
	`JS_IsExû±iÚ
(
»sŞve_»jeù
[0])) {

45989 
	`JS_F»eV®ue
(
ùx
, 
v®ue_w¿µ”_´omi£
);

45990 
ç
;

45992 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

45993 
»sŞve_»jeù
[1] = 
JS_UNDEFINED
;

45995 
»s
 = 
	`³rfÜm_´omi£_th’
(
ùx
, 
v®ue_w¿µ”_´omi£
,

45996 (
JSV®ueCÚ¡
 *)
»sŞve_»jeù
,

45997 (
JSV®ueCÚ¡
 *)
»sŞvšg_funcs
);

45998 
	`JS_F»eV®ue
(
ùx
, 
»sŞve_»jeù
[0]);

45999 
	`JS_F»eV®ue
(
ùx
, 
v®ue_w¿µ”_´omi£
);

46000 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

46001 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

46002 ià(
»s
) {

46003 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

46004  
JS_EXCEPTION
;

46007  
´omi£
;

46008 
ç
:

46009 
	`JS_F»eV®ue
(
ùx
, 
v®ue
);

46010 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[0]);

46011 
	`JS_F»eV®ue
(
ùx
, 
»sŞvšg_funcs
[1]);

46012 
	`JS_F»eV®ue
(
ùx
, 
´omi£
);

46013  
JS_EXCEPTION
;

46014 
	}
}

46016 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_async_äom_sync_™”©Ü_´Ùo_funcs
[] = {

46017 
JS_CFUNC_MAGIC_DEF
("Ãxt", 1, 
js_async_äom_sync_™”©Ü_Ãxt
, 
GEN_MAGIC_NEXT
 ),

46018 
JS_CFUNC_MAGIC_DEF
("»tuº", 1, 
js_async_äom_sync_™”©Ü_Ãxt
, 
GEN_MAGIC_RETURN
 ),

46019 
JS_CFUNC_MAGIC_DEF
("throw", 1, 
js_async_äom_sync_™”©Ü_Ãxt
, 
GEN_MAGIC_THROW
 ),

46024 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_async_g’”©Ü_funùiÚ_´Ùo_funcs
[] = {

46025 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "AsyncG’”©ÜFunùiÚ", 
JS_PROP_CONFIGURABLE
 ),

46030 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_async_g’”©Ü_´Ùo_funcs
[] = {

46031 
JS_CFUNC_MAGIC_DEF
("Ãxt", 1, 
js_async_g’”©Ü_Ãxt
, 
GEN_MAGIC_NEXT
 ),

46032 
JS_CFUNC_MAGIC_DEF
("»tuº", 1, 
js_async_g’”©Ü_Ãxt
, 
GEN_MAGIC_RETURN
 ),

46033 
JS_CFUNC_MAGIC_DEF
("throw", 1, 
js_async_g’”©Ü_Ãxt
, 
GEN_MAGIC_THROW
 ),

46034 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "AsyncG’”©Ü", 
JS_PROP_CONFIGURABLE
 ),

46037 
JSCÏssShÜtDef
 cÚ¡ 
	gjs_async_şass_def
[] = {

46038 { 
JS_ATOM_Promi£
, 
js_´omi£_fš®iz”
, 
js_´omi£_m¬k
 },

46039 { 
JS_ATOM_Promi£ResŞveFunùiÚ
, 
js_´omi£_»sŞve_funùiÚ_fš®iz”
, 
js_´omi£_»sŞve_funùiÚ_m¬k
 },

46040 { 
JS_ATOM_Promi£RejeùFunùiÚ
, 
js_´omi£_»sŞve_funùiÚ_fš®iz”
, 
js_´omi£_»sŞve_funùiÚ_m¬k
 },

46041 { 
JS_ATOM_AsyncFunùiÚ
, 
js_by‹code_funùiÚ_fš®iz”
, 
js_by‹code_funùiÚ_m¬k
 },

46042 { 
JS_ATOM_AsyncFunùiÚResŞve
, 
js_async_funùiÚ_»sŞve_fš®iz”
, 
js_async_funùiÚ_»sŞve_m¬k
 },

46043 { 
JS_ATOM_AsyncFunùiÚRejeù
, 
js_async_funùiÚ_»sŞve_fš®iz”
, 
js_async_funùiÚ_»sŞve_m¬k
 },

46044 { 
JS_ATOM_em±y_¡ršg
, 
js_async_äom_sync_™”©Ü_fš®iz”
, 
js_async_äom_sync_™”©Ü_m¬k
 },

46045 { 
JS_ATOM_AsyncG’”©ÜFunùiÚ
, 
js_by‹code_funùiÚ_fš®iz”
, 
js_by‹code_funùiÚ_m¬k
 },

46046 { 
JS_ATOM_AsyncG’”©Ü
, 
js_async_g’”©Ü_fš®iz”
, 
js_async_g’”©Ü_m¬k
 },

46049 
	$JS_AddIÁršsicPromi£
(
JSCÚ‹xt
 *
ùx
)

46051 
JSRuÁime
 *
¹
 = 
ùx
->rt;

46052 
JSV®ue
 
obj1
;

46054 ià(!
	`JS_IsRegi¡”edCÏss
(
¹
, 
JS_CLASS_PROMISE
)) {

46055 
	`š™_şass_¿nge
(
¹
, 
js_async_şass_def
, 
JS_CLASS_PROMISE
,

46056 
	`couÁof
(
js_async_şass_def
));

46057 
¹
->
şass_¬¿y
[
JS_CLASS_PROMISE_RESOLVE_FUNCTION
].
ÿÎ
 = 
js_´omi£_»sŞve_funùiÚ_ÿÎ
;

46058 
¹
->
şass_¬¿y
[
JS_CLASS_PROMISE_REJECT_FUNCTION
].
ÿÎ
 = 
js_´omi£_»sŞve_funùiÚ_ÿÎ
;

46059 
¹
->
şass_¬¿y
[
JS_CLASS_ASYNC_FUNCTION
].
ÿÎ
 = 
js_async_funùiÚ_ÿÎ
;

46060 
¹
->
şass_¬¿y
[
JS_CLASS_ASYNC_FUNCTION_RESOLVE
].
ÿÎ
 = 
js_async_funùiÚ_»sŞve_ÿÎ
;

46061 
¹
->
şass_¬¿y
[
JS_CLASS_ASYNC_FUNCTION_REJECT
].
ÿÎ
 = 
js_async_funùiÚ_»sŞve_ÿÎ
;

46062 
¹
->
şass_¬¿y
[
JS_CLASS_ASYNC_GENERATOR_FUNCTION
].
ÿÎ
 = 
js_async_g’”©Ü_funùiÚ_ÿÎ
;

46066 
ùx
->
şass_´Ùo
[
JS_CLASS_PROMISE
] = 
	`JS_NewObjeù
(ctx);

46067 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_PROMISE
],

46068 
js_´omi£_´Ùo_funcs
,

46069 
	`couÁof
(
js_´omi£_´Ùo_funcs
));

46070 
obj1
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
js_´omi£_cÚ¡ruùÜ
, "Promise", 1,

46071 
JS_CFUNC_cÚ¡ruùÜ
, 0);

46072 
ùx
->
´omi£_ùÜ
 = 
	`JS_DupV®ue
(ùx, 
obj1
);

46073 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj1
,

46074 
js_´omi£_funcs
,

46075 
	`couÁof
(
js_´omi£_funcs
));

46076 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
obj1
, "Promise",

46077 
ùx
->
şass_´Ùo
[
JS_CLASS_PROMISE
]);

46080 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_FUNCTION
] = 
	`JS_NewObjeùPrÙo
(ùx, ctx->
funùiÚ_´Ùo
);

46081 
obj1
 = 
	`JS_NewCFunùiÚ3
(
ùx
, (
JSCFunùiÚ
 *)
js_funùiÚ_cÚ¡ruùÜ
,

46083 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
, 
JS_FUNC_ASYNC
,

46084 
ùx
->
funùiÚ_ùÜ
);

46085 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
,

46086 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_FUNCTION
],

46087 
js_async_funùiÚ_´Ùo_funcs
,

46088 
	`couÁof
(
js_async_funùiÚ_´Ùo_funcs
));

46089 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, 
obj1
, ctx->
şass_´Ùo
[
JS_CLASS_ASYNC_FUNCTION
],

46090 0, 
JS_PROP_CONFIGURABLE
);

46091 
	`JS_F»eV®ue
(
ùx
, 
obj1
);

46094 
ùx
->
async_™”©Ü_´Ùo
 = 
	`JS_NewObjeù
(ctx);

46095 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
async_™”©Ü_´Ùo
,

46096 
js_async_™”©Ü_´Ùo_funcs
,

46097 
	`couÁof
(
js_async_™”©Ü_´Ùo_funcs
));

46100 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
] =

46101 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
async_™”©Ü_´Ùo
);

46102 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ASYNC_FROM_SYNC_ITERATOR
],

46103 
js_async_äom_sync_™”©Ü_´Ùo_funcs
,

46104 
	`couÁof
(
js_async_äom_sync_™”©Ü_´Ùo_funcs
));

46107 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR
] =

46108 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
async_™”©Ü_´Ùo
);

46109 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
,

46110 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR
],

46111 
js_async_g’”©Ü_´Ùo_funcs
,

46112 
	`couÁof
(
js_async_g’”©Ü_´Ùo_funcs
));

46115 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR_FUNCTION
] =

46116 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
funùiÚ_´Ùo
);

46117 
obj1
 = 
	`JS_NewCFunùiÚ3
(
ùx
, (
JSCFunùiÚ
 *)
js_funùiÚ_cÚ¡ruùÜ
,

46119 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
,

46120 
JS_FUNC_ASYNC_GENERATOR
,

46121 
ùx
->
funùiÚ_ùÜ
);

46122 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
,

46123 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR_FUNCTION
],

46124 
js_async_g’”©Ü_funùiÚ_´Ùo_funcs
,

46125 
	`couÁof
(
js_async_g’”©Ü_funùiÚ_´Ùo_funcs
));

46126 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR_FUNCTION
],

46127 
ùx
->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR
],

46128 
JS_PROP_CONFIGURABLE
, JS_PROP_CONFIGURABLE);

46129 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, 
obj1
, ctx->
şass_´Ùo
[
JS_CLASS_ASYNC_GENERATOR_FUNCTION
],

46130 0, 
JS_PROP_CONFIGURABLE
);

46131 
	`JS_F»eV®ue
(
ùx
, 
obj1
);

46132 
	}
}

46136 
	$¡ršg_g‘_hex
(
JSSŒšg
 *
p
, 
k
, 
n
) {

46137 
c
 = 0, 
h
;

46138 
n
-- > 0) {

46139 ià((
h
 = 
	`äom_hex
(
	`¡ršg_g‘
(
p
, 
k
++))) < 0)

46141 
c
 = (ø<< 4è| 
h
;

46143  
c
;

46144 
	}
}

46146 
	$isURIRe£rved
(
c
) {

46147  
c
 < 0x100 && 
	`memchr
(";/?:@&=+$,#", c, (";/?:@&=+$,#"è- 1è!ğ
NULL
;

46148 
	}
}

46150 
__©Œibu‹__
((
	$fÜm©
(
´štf
, 2, 3))è
	$js_throw_URIE¼Ü
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
fmt
, ...)

46152 
va_li¡
 
­
;

46154 
	`va_¡¬t
(
­
, 
fmt
);

46155 
	`JS_ThrowE¼Ü
(
ùx
, 
JS_URI_ERROR
, 
fmt
, 
­
);

46156 
	`va_’d
(
­
);

46158 
	}
}

46160 
	$hex_decode
(
JSCÚ‹xt
 *
ùx
, 
JSSŒšg
 *
p
, 
k
) {

46161 
c
;

46163 ià(
k
 >ğ
p
->
Ën
 || 
	`¡ršg_g‘
(p, k) != '%')

46164  
	`js_throw_URIE¼Ü
(
ùx
, "expecting %%");

46165 ià(
k
 + 2 >ğ
p
->
Ën
 || (
c
 = 
	`¡ršg_g‘_hex
(p, k + 1, 2)) < 0)

46166  
	`js_throw_URIE¼Ü
(
ùx
, "expecting hex digit");

46168  
c
;

46169 
	}
}

46171 
JSV®ue
 
	$js_glob®_decodeURI
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46172 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
isCompÚ’t
)

46174 
JSV®ue
 
¡r
;

46175 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

46176 
JSSŒšg
 *
p
;

46177 
k
, 
c
, 
c1
, 
n
, 
c_mš
;

46179 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

46180 ià(
	`JS_IsExû±iÚ
(
¡r
))

46181  
¡r
;

46183 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

46185 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

46186 
k
 = 0; k < 
p
->
Ën
;) {

46187 
c
 = 
	`¡ršg_g‘
(
p
, 
k
);

46188 ià(
c
 == '%') {

46189 
c
 = 
	`hex_decode
(
ùx
, 
p
, 
k
);

46190 ià(
c
 < 0)

46191 
ç
;

46192 
k
 += 3;

46193 ià(
c
 < 0x80) {

46194 ià(!
isCompÚ’t
 && 
	`isURIRe£rved
(
c
)) {

46195 
c
 = '%';

46196 
k
 -= 2;

46200 ià(
c
 >= 0xc0 && c <= 0xdf) {

46201 
n
 = 1;

46202 
c_mš
 = 0x80;

46203 
c
 &= 0x1f;

46204 } ià(
c
 >= 0xe0 && c <= 0xef) {

46205 
n
 = 2;

46206 
c_mš
 = 0x800;

46207 
c
 &= 0xf;

46208 } ià(
c
 >= 0xf0 && c <= 0xf7) {

46209 
n
 = 3;

46210 
c_mš
 = 0x10000;

46211 
c
 &= 0x7;

46213 
n
 = 0;

46214 
c_mš
 = 1;

46215 
c
 = 0;

46217 
n
-- > 0) {

46218 
c1
 = 
	`hex_decode
(
ùx
, 
p
, 
k
);

46219 ià(
c1
 < 0)

46220 
ç
;

46221 
k
 += 3;

46222 ià((
c1
 & 0xc0) != 0x80) {

46223 
c
 = 0;

46226 
c
 = (ø<< 6è| (
c1
 & 0x3f);

46228 ià(
c
 < 
c_mš
 || c > 0x10FFFF ||

46229 (
c
 >= 0xd800 && c < 0xe000)) {

46230 
	`js_throw_URIE¼Ü
(
ùx
, "malformed UTF-8");

46231 
ç
;

46235 
k
++;

46237 
	`¡ršg_bufãr_putc
(
b
, 
c
);

46239 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

46240  
	`¡ršg_bufãr_’d
(
b
);

46242 
ç
:

46243 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

46244 
	`¡ršg_bufãr_ä“
(
b
);

46245  
JS_EXCEPTION
;

46246 
	}
}

46248 
	$isUÃsÿ³d
(
c
) {

46249 cÚ¡ 
uÃsÿ³d_ch¬s
[] =

46254  
c
 < 0x100 &&

46255 
	`memchr
(
uÃsÿ³d_ch¬s
, 
c
, (unescaped_chars) - 1);

46256 
	}
}

46258 
	$isURIUÃsÿ³d
(
c
, 
isCompÚ’t
) {

46259  
c
 < 0x100 &&

46260 ((
c
 >= 0x61 && c <= 0x7a) ||

46261 (
c
 >= 0x41 && c <= 0x5a) ||

46262 (
c
 >= 0x30 && c <= 0x39) ||

46263 
	`memchr
("-_.!~*'()", 
c
, ("-_.!~*'()"è- 1è!ğ
NULL
 ||

46264 (!
isCompÚ’t
 && 
	`isURIRe£rved
(
c
)));

46265 
	}
}

46267 
	$’codeURI_hex
(
SŒšgBufãr
 *
b
, 
c
) {

46268 
ušt8_t
 
buf
[6];

46269 
n
 = 0;

46270 cÚ¡ *
hex
 = "0123456789ABCDEF";

46272 
buf
[
n
++] = '%';

46273 ià(
c
 >= 256) {

46274 
buf
[
n
++] = 'u';

46275 
buf
[
n
++] = 
hex
[(
c
 >> 12) & 15];

46276 
buf
[
n
++] = 
hex
[(
c
 >> 8) & 15];

46278 
buf
[
n
++] = 
hex
[(
c
 >> 4) & 15];

46279 
buf
[
n
++] = 
hex
[(
c
 >> 0) & 15];

46280  
	`¡ršg_bufãr_wr™e8
(
b
, 
buf
, 
n
);

46281 
	}
}

46283 
JSV®ue
 
	$js_glob®_’codeURI
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46284 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

46285 
isCompÚ’t
)

46287 
JSV®ue
 
¡r
;

46288 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

46289 
JSSŒšg
 *
p
;

46290 
k
, 
c
, 
c1
;

46292 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

46293 ià(
	`JS_IsExû±iÚ
(
¡r
))

46294  
¡r
;

46296 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

46297 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
p
->
Ën
);

46298 
k
 = 0; k < 
p
->
Ën
;) {

46299 
c
 = 
	`¡ršg_g‘
(
p
, 
k
);

46300 
k
++;

46301 ià(
	`isURIUÃsÿ³d
(
c
, 
isCompÚ’t
)) {

46302 
	`¡ršg_bufãr_putc16
(
b
, 
c
);

46304 ià(
c
 >= 0xdc00 && c <= 0xdfff) {

46305 
	`js_throw_URIE¼Ü
(
ùx
, "invalid character");

46306 
ç
;

46307 } ià(
c
 >= 0xd800 && c <= 0xdbff) {

46308 ià(
k
 >ğ
p
->
Ën
) {

46309 
	`js_throw_URIE¼Ü
(
ùx
, "expecting surrogate…air");

46310 
ç
;

46312 
c1
 = 
	`¡ršg_g‘
(
p
, 
k
);

46313 
k
++;

46314 ià(
c1
 < 0xdc00 || c1 > 0xdfff) {

46315 
	`js_throw_URIE¼Ü
(
ùx
, "expecting surrogate…air");

46316 
ç
;

46318 
c
 = (((ø& 0x3ffè<< 10è| (
c1
 & 0x3ff)) + 0x10000;

46320 ià(
c
 < 0x80) {

46321 
	`’codeURI_hex
(
b
, 
c
);

46324 ià(
c
 < 0x800) {

46325 
	`’codeURI_hex
(
b
, (
c
 >> 6) | 0xc0);

46327 ià(
c
 < 0x10000) {

46328 
	`’codeURI_hex
(
b
, (
c
 >> 12) | 0xe0);

46330 
	`’codeURI_hex
(
b
, (
c
 >> 18) | 0xf0);

46331 
	`’codeURI_hex
(
b
, ((
c
 >> 12) & 0x3f) | 0x80);

46333 
	`’codeURI_hex
(
b
, ((
c
 >> 6) & 0x3f) | 0x80);

46335 
	`’codeURI_hex
(
b
, (
c
 & 0x3f) | 0x80);

46339 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

46340  
	`¡ršg_bufãr_’d
(
b
);

46342 
ç
:

46343 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

46344 
	`¡ršg_bufãr_ä“
(
b
);

46345  
JS_EXCEPTION
;

46346 
	}
}

46348 
JSV®ue
 
	$js_glob®_esÿ³
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46349 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

46351 
JSV®ue
 
¡r
;

46352 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

46353 
JSSŒšg
 *
p
;

46354 
i
, 
Ën
, 
c
;

46356 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

46357 ià(
	`JS_IsExû±iÚ
(
¡r
))

46358  
¡r
;

46360 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

46361 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 
p
->
Ën
);

46362 
i
 = 0, 
Ën
 = 
p
->len; i <†en; i++) {

46363 
c
 = 
	`¡ršg_g‘
(
p
, 
i
);

46364 ià(
	`isUÃsÿ³d
(
c
)) {

46365 
	`¡ršg_bufãr_putc16
(
b
, 
c
);

46367 
	`’codeURI_hex
(
b
, 
c
);

46370 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

46371  
	`¡ršg_bufãr_’d
(
b
);

46372 
	}
}

46374 
JSV®ue
 
	$js_glob®_uÃsÿ³
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46375 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

46377 
JSV®ue
 
¡r
;

46378 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

46379 
JSSŒšg
 *
p
;

46380 
i
, 
Ën
, 
c
, 
n
;

46382 
¡r
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

46383 ià(
	`JS_IsExû±iÚ
(
¡r
))

46384  
¡r
;

46386 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

46387 
p
 = 
	`JS_VALUE_GET_STRING
(
¡r
);

46388 
i
 = 0, 
Ën
 = 
p
->len; i <†en; i++) {

46389 
c
 = 
	`¡ršg_g‘
(
p
, 
i
);

46390 ià(
c
 == '%') {

46391 ià(
i
 + 6 <ğ
Ën


46392 && 
	`¡ršg_g‘
(
p
, 
i
 + 1) == 'u'

46393 && (
n
 = 
	`¡ršg_g‘_hex
(
p
, 
i
 + 2, 4)) >= 0) {

46394 
c
 = 
n
;

46395 
i
 += 6 - 1;

46397 ià(
i
 + 3 <ğ
Ën


46398 && (
n
 = 
	`¡ršg_g‘_hex
(
p
, 
i
 + 1, 2)) >= 0) {

46399 
c
 = 
n
;

46400 
i
 += 3 - 1;

46403 
	`¡ršg_bufãr_putc16
(
b
, 
c
);

46405 
	`JS_F»eV®ue
(
ùx
, 
¡r
);

46406  
	`¡ršg_bufãr_’d
(
b
);

46407 
	}
}

46411 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_glob®_funcs
[] = {

46412 
JS_CFUNC_DEF
("·r£IÁ", 2, 
js_·r£IÁ
 ),

46413 
JS_CFUNC_DEF
("·r£Flßt", 1, 
js_·r£Flßt
 ),

46414 
JS_CFUNC_DEF
("isNaN", 1, 
js_glob®_isNaN
 ),

46415 
JS_CFUNC_DEF
("isFš™e", 1, 
js_glob®_isFš™e
 ),

46417 
JS_CFUNC_MAGIC_DEF
("decodeURI", 1, 
js_glob®_decodeURI
, 0 ),

46418 
JS_CFUNC_MAGIC_DEF
("decodeURICompÚ’t", 1, 
js_glob®_decodeURI
, 1 ),

46419 
JS_CFUNC_MAGIC_DEF
("’codeURI", 1, 
js_glob®_’codeURI
, 0 ),

46420 
JS_CFUNC_MAGIC_DEF
("’codeURICompÚ’t", 1, 
js_glob®_’codeURI
, 1 ),

46421 
JS_CFUNC_DEF
("esÿ³", 1, 
js_glob®_esÿ³
 ),

46422 
JS_CFUNC_DEF
("uÃsÿ³", 1, 
js_glob®_uÃsÿ³
 ),

46423 
JS_PROP_DOUBLE_DEF
("Infinity", 1.0 / 0.0, 0 ),

46424 
JS_PROP_DOUBLE_DEF
("NaN", 
NAN
, 0 ),

46425 
JS_PROP_UNDEFINED_DEF
("undefined", 0 ),

46428 
JS_CFUNC_DEF
("__d©e_şock", 0, 
js___d©e_şock
 ),

46436 
sšt64_t
 
	$m©h_mod
(
št64_t
 
a
, 
sšt64_t
 
b
) {

46438 
sšt64_t
 
m
 = 
a
 % 
b
;

46439  
m
 + (m < 0è* 
b
;

46440 
	}
}

46442 
sšt64_t
 
	$æoÜ_div
(
št64_t
 
a
, 
sšt64_t
 
b
) {

46444 
sšt64_t
 
m
 = 
a
 % 
b
;

46445  (
a
 - (
m
 + (m < 0è* 
b
)) / b;

46446 
	}
}

46448 
JSV®ue
 
js_D©e_·r£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46449 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
);

46451 
__exû±iÚ
 
	$JS_ThisTimeV®ue
(
JSCÚ‹xt
 *
ùx
, *
v®p
, 
JSV®ueCÚ¡
 
this_v®
)

46453 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

46454 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

46455 ià(
p
->
şass_id
 =ğ
JS_CLASS_DATE
 && 
	`JS_IsNumb”
Õ->
u
.
objeù_d©a
))

46456  
	`JS_ToFlßt64
(
ùx
, 
v®p
, 
p
->
u
.
objeù_d©a
);

46458 
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ Date object");

46460 
	}
}

46462 
JSV®ue
 
	$JS_S‘ThisTimeV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, 
v
)

46464 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

46465 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

46466 ià(
p
->
şass_id
 =ğ
JS_CLASS_DATE
) {

46467 
	`JS_F»eV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

46468 
p
->
u
.
objeù_d©a
 = 
	`__JS_NewFlßt64
(
ùx
, 
v
);

46469  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

46472  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ Date object");

46473 
	}
}

46475 
sšt64_t
 
	$days_äom_y—r
(
št64_t
 
y
) {

46476  365 * (
y
 - 1970è+ 
	`æoÜ_div
(y - 1969, 4) -

46477 
	`æoÜ_div
(
y
 - 1901, 100) + floor_div(y - 1601, 400);

46478 
	}
}

46480 
sšt64_t
 
	$days_š_y—r
(
št64_t
 
y
) {

46481  365 + !(
y
 % 4) - !(y % 100) + !(y % 400);

46482 
	}
}

46485 
sšt64_t
 
	$y—r_äom_days
(
št64_t
 *
days
) {

46486 
sšt64_t
 
y
, 
d1
, 
nd
, 
d
 = *
days
;

46487 
y
 = 
	`æoÜ_div
(
d
 * 10000, 3652425) + 1970;

46491 
d1
 = 
d
 - 
	`days_äom_y—r
(
y
);

46492 ià(
d1
 < 0) {

46493 
y
--;

46494 
d1
 +ğ
	`days_š_y—r
(
y
);

46496 
nd
 = 
	`days_š_y—r
(
y
);

46497 ià(
d1
 < 
nd
)

46499 
d1
 -ğ
nd
;

46500 
y
++;

46503 *
days
 = 
d1
;

46504  
y
;

46505 
	}
}

46507 cÚ¡ 
	gmÚth_days
[] = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };

46508 cÚ¡ 
	gmÚth_Çmes
[] = "JanFebMarAprMayJunJulAugSepOctNovDec";

46509 cÚ¡ 
	gday_Çmes
[] = "SunMonTueWedThuFriSat";

46511 
__exû±iÚ
 
	$g‘_d©e_f›lds
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

46512 
št64_t
 
f›lds
[9], 
is_loÿl
, 
fÜû
)

46514 
dv®
;

46515 
sšt64_t
 
d
, 
days
, 
wd
, 
y
, 
i
, 
md
, 
h
, 
m
, 
s
, 
ms
, 
tz
 = 0;

46517 ià(
	`JS_ThisTimeV®ue
(
ùx
, &
dv®
, 
obj
))

46520 ià(
	`i¢ª
(
dv®
)) {

46521 ià(!
fÜû
)

46522  
FALSE
;

46523 
d
 = 0;

46525 
d
 = 
dv®
;

46526 ià(
is_loÿl
) {

46527 
tz
 = -
	`g‘TimezÚeOff£t
(
d
);

46528 
d
 +ğ
tz
 * 60000;

46533 
h
 = 
	`m©h_mod
(
d
, 86400000);

46534 
days
 = (
d
 - 
h
) / 86400000;

46535 
ms
 = 
h
 % 1000;

46536 
h
 = (h - 
ms
) / 1000;

46537 
s
 = 
h
 % 60;

46538 
h
 = (h - 
s
) / 60;

46539 
m
 = 
h
 % 60;

46540 
h
 = (h - 
m
) / 60;

46541 
wd
 = 
	`m©h_mod
(
days
 + 4, 7);

46542 
y
 = 
	`y—r_äom_days
(&
days
);

46544 
i
 = 0; i < 11; i++) {

46545 
md
 = 
mÚth_days
[
i
];

46546 ià(
i
 == 1)

46547 
md
 +ğ
	`days_š_y—r
(
y
) - 365;

46548 ià(
days
 < 
md
)

46550 
days
 -ğ
md
;

46552 
f›lds
[0] = 
y
;

46553 
f›lds
[1] = 
i
;

46554 
f›lds
[2] = 
days
 + 1;

46555 
f›lds
[3] = 
h
;

46556 
f›lds
[4] = 
m
;

46557 
f›lds
[5] = 
s
;

46558 
f›lds
[6] = 
ms
;

46559 
f›lds
[7] = 
wd
;

46560 
f›lds
[8] = 
tz
;

46561  
TRUE
;

46562 
	}
}

46564 
	$time_ş
(
t
) {

46565 ià(
t
 >= -8.64e15 && <= 8.64e15)

46566  
	`Œunc
(
t
) + 0.0;

46568  
NAN
;

46569 
	}
}

46571 
	$£t_d©e_f›lds
(
sšt64_t
 
f›lds
[], 
is_loÿl
) {

46572 
sšt64_t
 
days
, 
y
, 
m
, 
md
, 
h
, 
d
, 
i
;

46574 
i
 = 
f›lds
[1];

46575 
m
 = 
	`m©h_mod
(
i
, 12);

46576 
y
 = 
f›lds
[0] + (
i
 - 
m
) / 12;

46577 
days
 = 
	`days_äom_y—r
(
y
);

46579 
i
 = 0; i < 
m
; i++) {

46580 
md
 = 
mÚth_days
[
i
];

46581 ià(
i
 == 1)

46582 
md
 +ğ
	`days_š_y—r
(
y
) - 365;

46583 
days
 +ğ
md
;

46585 
days
 +ğ
f›lds
[2] - 1;

46586 
h
 = ((
f›lds
[3] * 60 + fields[4]) * 60 + fields[5]) * 1000 + fields[6];

46587 
d
 = 
days
 * 86400000 + 
h
;

46588 ià(
is_loÿl
)

46589 
d
 +ğ
	`g‘TimezÚeOff£t
(d) * 60000;

46590  
	`time_ş
(
d
);

46591 
	}
}

46593 
JSV®ue
 
	$g‘_d©e_f›ld
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46594 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

46597 
sšt64_t
 
f›lds
[9];

46598 
»s
, 
n
, 
is_loÿl
;

46600 
is_loÿl
 = 
magic
 & 0x0F;

46601 
n
 = (
magic
 >> 4) & 0x0F;

46602 
»s
 = 
	`g‘_d©e_f›lds
(
ùx
, 
this_v®
, 
f›lds
, 
is_loÿl
, 0);

46603 ià(
»s
 < 0)

46604  
JS_EXCEPTION
;

46605 ià(!
»s
)

46606  
JS_NAN
;

46608 ià(
magic
 & 0x100) {

46609 
f›lds
[0] -= 1900;

46611  
	`JS_NewIÁ64
(
ùx
, 
f›lds
[
n
]);

46612 
	}
}

46614 
JSV®ue
 
	$£t_d©e_f›ld
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46615 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

46618 
sšt64_t
 
f›lds
[9];

46619 
»s
, 
fœ¡_f›ld
, 
’d_f›ld
, 
is_loÿl
, 
i
, 
n
;

46620 
d
, 
a
;

46622 
d
 = 
NAN
;

46623 
fœ¡_f›ld
 = (
magic
 >> 8) & 0x0F;

46624 
’d_f›ld
 = (
magic
 >> 4) & 0x0F;

46625 
is_loÿl
 = 
magic
 & 0x0F;

46627 
»s
 = 
	`g‘_d©e_f›lds
(
ùx
, 
this_v®
, 
f›lds
, 
is_loÿl
, 
fœ¡_f›ld
 == 0);

46628 ià(
»s
 < 0)

46629  
JS_EXCEPTION
;

46630 ià(
»s
 && 
¬gc
 > 0) {

46631 
n
 = 
’d_f›ld
 - 
fœ¡_f›ld
;

46632 ià(
¬gc
 < 
n
)

46633 
n
 = 
¬gc
;

46634 
i
 = 0; i < 
n
; i++) {

46635 ià(
	`JS_ToFlßt64
(
ùx
, &
a
, 
¬gv
[
i
]))

46636  
JS_EXCEPTION
;

46637 ià(!
	`isfš™e
(
a
))

46638 
dÚe
;

46639 
f›lds
[
fœ¡_f›ld
 + 
i
] = 
	`Œunc
(
a
);

46641 
d
 = 
	`£t_d©e_f›lds
(
f›lds
, 
is_loÿl
);

46643 
dÚe
:

46644  
	`JS_S‘ThisTimeV®ue
(
ùx
, 
this_v®
, 
d
);

46645 
	}
}

46655 
JSV®ue
 
	$g‘_d©e_¡ršg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46656 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

46659 
buf
[64];

46660 
sšt64_t
 
f›lds
[9];

46661 
»s
, 
fmt
, 
·¹
, 
pos
;

46662 
y
, 
mÚ
, 
d
, 
h
, 
m
, 
s
, 
ms
, 
wd
, 
tz
;

46664 
fmt
 = (
magic
 >> 4) & 0x0F;

46665 
·¹
 = 
magic
 & 0x0F;

46667 
»s
 = 
	`g‘_d©e_f›lds
(
ùx
, 
this_v®
, 
f›lds
, 
fmt
 & 1, 0);

46668 ià(
»s
 < 0)

46669  
JS_EXCEPTION
;

46670 ià(!
»s
) {

46671 ià(
fmt
 == 2)

46672  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "Date value is NaN");

46674  
	`JS_NewSŒšg
(
ùx
, "Invalid Date");

46677 
y
 = 
f›lds
[0];

46678 
mÚ
 = 
f›lds
[1];

46679 
d
 = 
f›lds
[2];

46680 
h
 = 
f›lds
[3];

46681 
m
 = 
f›lds
[4];

46682 
s
 = 
f›lds
[5];

46683 
ms
 = 
f›lds
[6];

46684 
wd
 = 
f›lds
[7];

46685 
tz
 = 
f›lds
[8];

46687 
pos
 = 0;

46689 ià(
·¹
 & 1) {

46690 
fmt
) {

46692 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46694 
day_Çmes
 + 
wd
 * 3, 
d
,

46695 
mÚth_Çmes
 + 
mÚ
 * 3, 4 + (
y
 < 0), y);

46698 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46700 
day_Çmes
 + 
wd
 * 3,

46701 
mÚth_Çmes
 + 
mÚ
 * 3, 
d
, 4 + (
y
 < 0), y);

46702 ià(
·¹
 == 3) {

46703 
buf
[
pos
++] = ' ';

46707 ià(
y
 >= 0 && y <= 9999) {

46708 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46709 "%04d", 
y
);

46711 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46712 "%+07d", 
y
);

46714 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46715 "-%02d-%02dT", 
mÚ
 + 1, 
d
);

46718 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46719 "%02d/%02d/%0*d", 
mÚ
 + 1, 
d
, 4 + (
y
 < 0), y);

46720 ià(
·¹
 == 3) {

46721 
buf
[
pos
++] = ',';

46722 
buf
[
pos
++] = ' ';

46727 ià(
·¹
 & 2) {

46728 
fmt
) {

46730 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46731 "%02d:%02d:%02d GMT", 
h
, 
m
, 
s
);

46734 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46735 "%02d:%02d:%02d GMT", 
h
, 
m
, 
s
);

46736 ià(
tz
 < 0) {

46737 
buf
[
pos
++] = '-';

46738 
tz
 = -tz;

46740 
buf
[
pos
++] = '+';

46743 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46744 "%02d%02d", 
tz
 / 60,z % 60);

46748 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46749 "%02d:%02d:%02d.%03dZ", 
h
, 
m
, 
s
, 
ms
);

46752 
pos
 +ğ
	`¢´štf
(
buf
 +…os, (buf) -…os,

46753 "%02d:%02d:%02d %cM", (
h
 + 1è% 12 - 1, 
m
, 
s
,

46754 (
h
 < 12) ? 'A' : 'P');

46758  
	`JS_NewSŒšgL’
(
ùx
, 
buf
, 
pos
);

46759 
	}
}

46762 
sšt64_t
 
	$d©e_now
() {

46763 
timev®
 
tv
;

46764 
	`g‘timeofday
(&
tv
, 
NULL
);

46765  (
sšt64_t
)
tv
.
tv_£c
 * 1000 + (tv.
tv_u£c
 / 1000);

46766 
	}
}

46768 
JSV®ue
 
	$js_d©e_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

46769 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

46772 
JSV®ue
 
rv
;

46773 
i
, 
n
;

46774 
a
, 
v®
;

46776 ià(
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

46778 
¬gc
 = 0;

46780 
n
 = 
¬gc
;

46781 ià(
n
 == 0) {

46782 
v®
 = 
	`d©e_now
();

46783 } ià(
n
 == 1) {

46784 
JSV®ue
 
v
, 
dv
;

46785 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[0]è=ğ
JS_TAG_OBJECT
) {

46786 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
¬gv
[0]);

46787 ià(
p
->
şass_id
 =ğ
JS_CLASS_DATE
 && 
	`JS_IsNumb”
Õ->
u
.
objeù_d©a
)) {

46788 ià(
	`JS_ToFlßt64
(
ùx
, &
v®
, 
p
->
u
.
objeù_d©a
))

46789  
JS_EXCEPTION
;

46790 
v®
 = 
	`time_ş
(val);

46791 
has_v®
;

46794 
v
 = 
	`JS_ToPrim™ive
(
ùx
, 
¬gv
[0], 
HINT_NONE
);

46795 ià(
	`JS_IsSŒšg
(
v
)) {

46796 
dv
 = 
	`js_D©e_·r£
(
ùx
, 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&
v
);

46797 
	`JS_F»eV®ue
(
ùx
, 
v
);

46798 ià(
	`JS_IsExû±iÚ
(
dv
))

46799  
JS_EXCEPTION
;

46800 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
v®
, 
dv
))

46801  
JS_EXCEPTION
;

46803 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
v®
, 
v
))

46804  
JS_EXCEPTION
;

46806 
v®
 = 
	`time_ş
(val);

46808 
sšt64_t
 
f›lds
[] = { 0, 0, 1, 0, 0, 0, 0 };

46809 ià(
n
 > 7)

46810 
n
 = 7;

46811 
i
 = 0; i < 
n
; i++) {

46812 ià(
	`JS_ToFlßt64
(
ùx
, &
a
, 
¬gv
[
i
]))

46813  
JS_EXCEPTION
;

46814 ià(!
	`isfš™e
(
a
))

46816 
f›lds
[
i
] = 
	`Œunc
(
a
);

46817 ià(
i
 =ğ0 && 
f›lds
[0] >= 0 && fields[0] < 100)

46818 
f›lds
[0] += 1900;

46820 
v®
 = (
i
 =ğ
n
è? 
	`£t_d©e_f›lds
(
f›lds
, 1è: 
NAN
;

46822 
has_v®
:

46824 
JSV®ueCÚ¡
 
¬gs
[3];

46825 
¬gs
[0] = 
Ãw_rg‘
;

46826 
¬gs
[1] = 
ùx
->
şass_´Ùo
[
JS_CLASS_DATE
];

46827 
¬gs
[2] = 
	`__JS_NewFlßt64
(
ùx
, 
v®
);

46828 
rv
 = 
	`js___d©e_ü—‹
(
ùx
, 
JS_UNDEFINED
, 3, 
¬gs
);

46830 
rv
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_DATE
);

46831 ià(!
	`JS_IsExû±iÚ
(
rv
))

46832 
	`JS_S‘ObjeùD©a
(
ùx
, 
rv
, 
	`__JS_NewFlßt64
(ùx, 
v®
));

46834 ià(!
	`JS_IsExû±iÚ
(
rv
è&& 
	`JS_IsUndefšed
(
Ãw_rg‘
)) {

46836 
JSV®ue
 
s
;

46837 
s
 = 
	`g‘_d©e_¡ršg
(
ùx
, 
rv
, 0, 
NULL
, 0x13);

46838 
	`JS_F»eV®ue
(
ùx
, 
rv
);

46839 
rv
 = 
s
;

46841  
rv
;

46842 
	}
}

46844 
JSV®ue
 
	$js_D©e_UTC
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46845 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

46848 
sšt64_t
 
f›lds
[] = { 0, 0, 1, 0, 0, 0, 0 };

46849 
i
, 
n
;

46850 
a
;

46852 
n
 = 
¬gc
;

46853 ià(
n
 == 0)

46854  
JS_NAN
;

46855 ià(
n
 > 7)

46856 
n
 = 7;

46857 
i
 = 0; i < 
n
; i++) {

46858 ià(
	`JS_ToFlßt64
(
ùx
, &
a
, 
¬gv
[
i
]))

46859  
JS_EXCEPTION
;

46860 ià(!
	`isfš™e
(
a
))

46861  
JS_NAN
;

46862 
f›lds
[
i
] = 
	`Œunc
(
a
);

46863 ià(
i
 =ğ0 && 
f›lds
[0] >= 0 && fields[0] < 100)

46864 
f›lds
[0] += 1900;

46866  
	`__JS_NewFlßt64
(
ùx
, 
	`£t_d©e_f›lds
(
f›lds
, 0));

46867 
	}
}

46869 
	$¡ršg_sk_¥aûs
(
JSSŒšg
 *
¥
, *
µ
) {

46870 *
µ
 < 
¥
->
Ën
 && 
	`¡ršg_g‘
(sp, *pp) == ' ')

46871 *
µ
 += 1;

46872 
	}
}

46874 
	$¡ršg_sk_nÚ_¥aûs
(
JSSŒšg
 *
¥
, *
µ
) {

46875 *
µ
 < 
¥
->
Ën
 && 
	`¡ršg_g‘
(sp, *pp) != ' ')

46876 *
µ
 += 1;

46877 
	}
}

46880 
	$¡ršg_g‘_f›ld
(
JSSŒšg
 *
¥
, *
µ
, 
št64_t
 *
pv®
) {

46881 
sšt64_t
 
v
 = 0;

46882 
c
, 
p
 = *
µ
;

46885 
p
 < 
¥
->
Ën
) {

46886 
c
 = 
	`¡ršg_g‘
(
¥
, 
p
);

46887 ià(
c
 >= '0' && c <= '9')

46889 
p
++;

46891 ià(
p
 >ğ
¥
->
Ën
)

46893 
p
 < 
¥
->
Ën
) {

46894 
c
 = 
	`¡ršg_g‘
(
¥
, 
p
);

46895 ià(!(
c
 >= '0' && c <= '9'))

46897 
v
 = v * 10 + 
c
 - '0';

46898 
p
++;

46900 *
pv®
 = 
v
;

46901 *
µ
 = 
p
;

46903 
	}
}

46906 
	$¡ršg_g‘_dig™s
(
JSSŒšg
 *
¥
, *
µ
, 
n
, 
sšt64_t
 *
pv®
) {

46907 
sšt64_t
 
v
 = 0;

46908 
i
, 
c
, 
p
 = *
µ
;

46910 
i
 = 0; i < 
n
; i++) {

46911 ià(
p
 >ğ
¥
->
Ën
)

46913 
c
 = 
	`¡ršg_g‘
(
¥
, 
p
);

46914 ià(!(
c
 >= '0' && c <= '9'))

46916 
v
 = v * 10 + 
c
 - '0';

46917 
p
++;

46919 *
pv®
 = 
v
;

46920 *
µ
 = 
p
;

46922 
	}
}

46925 
	$¡ršg_g‘_sigÃd_f›ld
(
JSSŒšg
 *
¥
, *
µ
, 
sšt64_t
 *
pv®
) {

46926 
sgn
, 
»s
;

46928 ià(*
µ
 >ğ
¥
->
Ën
)

46931 
sgn
 = 
	`¡ršg_g‘
(
¥
, *
µ
);

46932 ià(
sgn
 == '-' || sgn == '+')

46933 *
µ
 += 1;

46935 
»s
 = 
	`¡ršg_g‘_f›ld
(
¥
, 
µ
, 
pv®
);

46936 ià(
»s
 =ğ0 && 
sgn
 == '-')

46937 *
pv®
 = -*pval;

46938  
»s
;

46939 
	}
}

46941 
	$fšd_abb»v
(
JSSŒšg
 *
¥
, 
p
, cÚ¡ *
li¡
, 
couÁ
) {

46942 
n
, 
i
;

46944 ià(
p
 + 3 <ğ
¥
->
Ën
) {

46945 
n
 = 0;‚ < 
couÁ
;‚++) {

46946 
i
 = 0; i < 3; i++) {

46947 ià(
	`¡ršg_g‘
(
¥
, 
p
 + 
i
è!ğ
mÚth_Çmes
[
n
 * 3 + i])

46948 
Ãxt
;

46950  
n
;

46951 
Ãxt
:;

46955 
	}
}

46957 
	$¡ršg_g‘_mÚth
(
JSSŒšg
 *
¥
, *
µ
, 
sšt64_t
 *
pv®
) {

46958 
n
;

46960 
	`¡ršg_sk_¥aûs
(
¥
, 
µ
);

46961 
n
 = 
	`fšd_abb»v
(
¥
, *
µ
, 
mÚth_Çmes
, 12);

46962 ià(
n
 < 0)

46965 *
pv®
 = 
n
;

46966 *
µ
 += 3;

46968 
	}
}

46970 
JSV®ue
 
	$js_D©e_·r£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

46971 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

46974 
JSV®ue
 
s
, 
rv
;

46975 
sšt64_t
 
f›lds
[] = { 0, 1, 1, 0, 0, 0, 0 };

46976 
sšt64_t
 
tz
, 
hh
, 
mm
;

46977 
d
;

46978 
p
, 
i
, 
c
, 
sgn
;

46979 
JSSŒšg
 *
¥
;

46980 
BOOL
 
is_loÿl
;

46982 
rv
 = 
JS_NAN
;

46984 
s
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

46985 ià(
	`JS_IsExû±iÚ
(
s
))

46986  
JS_EXCEPTION
;

46988 
¥
 = 
	`JS_VALUE_GET_STRING
(
s
);

46989 
p
 = 0;

46990 ià(
p
 < 
¥
->
Ën
 && (((
c
 = 
	`¡ršg_g‘
(sp,…)) >= '0' && c <= '9') || c == '+' || c == '-')) {

46994 ià(
	`¡ršg_g‘_sigÃd_f›ld
(
¥
, &
p
, &
f›lds
[0]))

46995 
dÚe
;

46997 
is_loÿl
 = 
TRUE
;

46998 
i
 = 1; i < 6; i++) {

46999 ià(
	`¡ršg_g‘_f›ld
(
¥
, &
p
, &
f›lds
[
i
]))

47002 ià(
i
 <= 3) {

47004 
is_loÿl
 = 
FALSE
;

47005 } ià(
i
 =ğ6 && 
p
 < 
¥
->
Ën
 && 
	`¡ršg_g‘
(sp,…) == '.') {

47008 
mul
 = 1000, 
ms
 = 0;

47009 ++
p
 < 
¥
->
Ën
) {

47010 
c
 = 
	`¡ršg_g‘
(
¥
, 
p
);

47011 ià(!(
c
 >= '0' && c <= '9'))

47013 ià(
mul
 =ğ1 && 
c
 >= '5')

47014 
ms
 += 1;

47015 
ms
 +ğ(
c
 - '0'è* (
mul
 /= 10);

47017 
f›lds
[6] = 
ms
;

47019 
f›lds
[1] -= 1;

47022 
tz
 = 0;

47023 ià(
p
 < 
¥
->
Ën
) {

47024 
sgn
 = 
	`¡ršg_g‘
(
¥
, 
p
);

47025 ià(
sgn
 == '+' || sgn == '-') {

47026 ià(
	`¡ršg_g‘_f›ld
(
¥
, &
p
, &
hh
))

47027 
dÚe
;

47028 ià(
	`¡ršg_g‘_f›ld
(
¥
, &
p
, &
mm
))

47029 
dÚe
;

47030 
tz
 = 
hh
 * 60 + 
mm
;

47031 ià(
sgn
 == '-')

47032 
tz
 = -tz;

47033 
is_loÿl
 = 
FALSE
;

47034 } ià(
sgn
 == 'Z') {

47035 
is_loÿl
 = 
FALSE
;

47041 
	`¡ršg_sk_nÚ_¥aûs
(
¥
, &
p
);

47042 
	`¡ršg_sk_¥aûs
(
¥
, &
p
);

47043 ià(
p
 >ğ
¥
->
Ën
)

47044 
dÚe
;

47045 
c
 = 
	`¡ršg_g‘
(
¥
, 
p
);

47046 ià(
c
 >= '0' && c <= '9') {

47048 ià(
	`¡ršg_g‘_f›ld
(
¥
, &
p
, &
f›lds
[2]))

47049 
dÚe
;

47050 ià(
	`¡ršg_g‘_mÚth
(
¥
, &
p
, &
f›lds
[1]))

47051 
dÚe
;

47054 ià(
	`¡ršg_g‘_mÚth
(
¥
, &
p
, &
f›lds
[1]))

47055 
dÚe
;

47056 ià(
	`¡ršg_g‘_f›ld
(
¥
, &
p
, &
f›lds
[2]))

47057 
dÚe
;

47059 
	`¡ršg_sk_¥aûs
(
¥
, &
p
);

47060 ià(
	`¡ršg_g‘_sigÃd_f›ld
(
¥
, &
p
, &
f›lds
[0]))

47061 
dÚe
;

47064 
i
 = 0; i < 3; i++) {

47065 ià(
	`¡ršg_g‘_f›ld
(
¥
, &
p
, &
f›lds
[3 + 
i
]))

47066 
dÚe
;

47071 
is_loÿl
 = 
FALSE
;

47072 
tz
 = 0;

47073 
tz
 = 0; 
p
 < 
¥
->
Ën
;…++) {

47074 
sgn
 = 
	`¡ršg_g‘
(
¥
, 
p
);

47075 ià(
sgn
 == '+' || sgn == '-') {

47076 
p
++;

47077 ià(
	`¡ršg_g‘_dig™s
(
¥
, &
p
, 2, &
hh
))

47078 
dÚe
;

47079 ià(
	`¡ršg_g‘_dig™s
(
¥
, &
p
, 2, &
mm
))

47080 
dÚe
;

47081 
tz
 = 
hh
 * 60 + 
mm
;

47082 ià(
sgn
 == '-')

47083 
tz
 = -tz;

47088 
d
 = 
	`£t_d©e_f›lds
(
f›lds
, 
is_loÿl
è- 
tz
 * 60000;

47089 
rv
 = 
	`__JS_NewFlßt64
(
ùx
, 
d
);

47091 
dÚe
:

47092 
	`JS_F»eV®ue
(
ùx
, 
s
);

47093  
rv
;

47094 
	}
}

47096 
JSV®ue
 
	$js_D©e_now
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47097 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47100  
	`JS_NewIÁ64
(
ùx
, 
	`d©e_now
());

47101 
	}
}

47103 
JSV®ue
 
	$js_d©e_SymbŞ_toPrim™ive
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47104 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47107 
JSV®ueCÚ¡
 
obj
 = 
this_v®
;

47108 
JSAtom
 
hšt
 = 
JS_ATOM_NULL
;

47109 
hšt_num
;

47111 ià(!
	`JS_IsObjeù
(
obj
))

47112  
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

47114 ià(
	`JS_IsSŒšg
(
¬gv
[0])) {

47115 
hšt
 = 
	`JS_V®ueToAtom
(
ùx
, 
¬gv
[0]);

47116 ià(
hšt
 =ğ
JS_ATOM_NULL
)

47117  
JS_EXCEPTION
;

47118 
	`JS_F»eAtom
(
ùx
, 
hšt
);

47120 
hšt
) {

47121 
JS_ATOM_numb”
:

47122 #ifdeà
CONFIG_BIGNUM


47123 
JS_ATOM_š‹g”
:

47125 
hšt_num
 = 
HINT_NUMBER
;

47127 
JS_ATOM_¡ršg
:

47128 
JS_ATOM_deçuÉ
:

47129 
hšt_num
 = 
HINT_STRING
;

47132  
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid hint");

47134  
	`JS_ToPrim™ive
(
ùx
, 
obj
, 
hšt_num
 | 
HINT_FORCE_ORDINARY
);

47135 
	}
}

47137 
JSV®ue
 
	$js_d©e_g‘TimezÚeOff£t
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47138 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47141 
v
;

47143 ià(
	`JS_ThisTimeV®ue
(
ùx
, &
v
, 
this_v®
))

47144  
JS_EXCEPTION
;

47145 ià(
	`i¢ª
(
v
))

47146  
JS_NAN
;

47148  
	`JS_NewIÁ64
(
ùx
, 
	`g‘TimezÚeOff£t
((
sšt64_t
)
	`Œunc
(
v
)));

47149 
	}
}

47151 
JSV®ue
 
	$js_d©e_g‘Time
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47152 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47155 
v
;

47157 ià(
	`JS_ThisTimeV®ue
(
ùx
, &
v
, 
this_v®
))

47158  
JS_EXCEPTION
;

47159  
	`__JS_NewFlßt64
(
ùx
, 
v
);

47160 
	}
}

47162 
JSV®ue
 
	$js_d©e_£tTime
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47163 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47166 
v
;

47168 ià(
	`JS_ThisTimeV®ue
(
ùx
, &
v
, 
this_v®
è|| 
	`JS_ToFlßt64
(ùx, &v, 
¬gv
[0]))

47169  
JS_EXCEPTION
;

47170  
	`JS_S‘ThisTimeV®ue
(
ùx
, 
this_v®
, 
	`time_ş
(
v
));

47171 
	}
}

47173 
JSV®ue
 
	$js_d©e_£tY—r
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47174 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47177 
y
;

47178 
JSV®ueCÚ¡
 
¬gs
[1];

47180 ià(
	`JS_ThisTimeV®ue
(
ùx
, &
y
, 
this_v®
è|| 
	`JS_ToFlßt64
(ùx, &y, 
¬gv
[0]))

47181  
JS_EXCEPTION
;

47182 
y
 = +y;

47183 ià(
	`isfš™e
(
y
)) {

47184 
y
 = 
	`Œunc
(y);

47185 ià(
y
 >= 0 && y < 100)

47186 
y
 += 1900;

47188 
¬gs
[0] = 
	`__JS_NewFlßt64
(
ùx
, 
y
);

47189  
	`£t_d©e_f›ld
(
ùx
, 
this_v®
, 1, 
¬gs
, 0x011);

47190 
	}
}

47192 
JSV®ue
 
	$js_d©e_toJSON
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47193 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47196 
JSV®ue
 
obj
, 
tv
, 
m‘hod
, 
rv
;

47197 
d
;

47199 
rv
 = 
JS_EXCEPTION
;

47200 
tv
 = 
JS_UNDEFINED
;

47202 
obj
 = 
	`JS_ToObjeù
(
ùx
, 
this_v®
);

47203 
tv
 = 
	`JS_ToPrim™ive
(
ùx
, 
obj
, 
HINT_NUMBER
);

47204 ià(
	`JS_IsExû±iÚ
(
tv
))

47205 
exû±iÚ
;

47206 ià(
	`JS_IsNumb”
(
tv
)) {

47207 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
tv
) < 0)

47208 
exû±iÚ
;

47209 ià(!
	`isfš™e
(
d
)) {

47210 
rv
 = 
JS_NULL
;

47211 
dÚe
;

47214 
m‘hod
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
obj
, "toISOString");

47215 ià(
	`JS_IsExû±iÚ
(
m‘hod
))

47216 
exû±iÚ
;

47217 ià(!
	`JS_IsFunùiÚ
(
ùx
, 
m‘hod
)) {

47218 
	`JS_ThrowTy³E¼Ü
(
ùx
, "object‚eedsoISOString method");

47219 
	`JS_F»eV®ue
(
ùx
, 
m‘hod
);

47220 
exû±iÚ
;

47222 
rv
 = 
	`JS_C®lF»e
(
ùx
, 
m‘hod
, 
obj
, 0, 
NULL
);

47223 
exû±iÚ
:

47224 
dÚe
:

47225 
	`JS_F»eV®ue
(
ùx
, 
obj
);

47226 
	`JS_F»eV®ue
(
ùx
, 
tv
);

47227  
rv
;

47228 
	}
}

47230 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_d©e_funcs
[] = {

47231 
JS_CFUNC_DEF
("now", 0, 
js_D©e_now
 ),

47232 
JS_CFUNC_DEF
("·r£", 1, 
js_D©e_·r£
 ),

47233 
JS_CFUNC_DEF
("UTC", 7, 
js_D©e_UTC
 ),

47236 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_d©e_´Ùo_funcs
[] = {

47237 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_d©e_g‘Time
 ),

47238 
JS_CFUNC_MAGIC_DEF
("toSŒšg", 0, 
g‘_d©e_¡ršg
, 0x13 ),

47239 
JS_CFUNC_DEF
("[SymbŞ.toPrim™ive]", 1, 
js_d©e_SymbŞ_toPrim™ive
 ),

47240 
JS_CFUNC_MAGIC_DEF
("toUTCSŒšg", 0, 
g‘_d©e_¡ršg
, 0x03 ),

47241 
JS_ALIAS_DEF
("toGMTString", "toUTCString" ),

47242 
JS_CFUNC_MAGIC_DEF
("toISOSŒšg", 0, 
g‘_d©e_¡ršg
, 0x23 ),

47243 
JS_CFUNC_MAGIC_DEF
("toD©eSŒšg", 0, 
g‘_d©e_¡ršg
, 0x11 ),

47244 
JS_CFUNC_MAGIC_DEF
("toTimeSŒšg", 0, 
g‘_d©e_¡ršg
, 0x12 ),

47245 
JS_CFUNC_MAGIC_DEF
("toLoÿËSŒšg", 0, 
g‘_d©e_¡ršg
, 0x33 ),

47246 
JS_CFUNC_MAGIC_DEF
("toLoÿËD©eSŒšg", 0, 
g‘_d©e_¡ršg
, 0x31 ),

47247 
JS_CFUNC_MAGIC_DEF
("toLoÿËTimeSŒšg", 0, 
g‘_d©e_¡ršg
, 0x32 ),

47248 
JS_CFUNC_DEF
("g‘TimezÚeOff£t", 0, 
js_d©e_g‘TimezÚeOff£t
 ),

47249 
JS_CFUNC_DEF
("g‘Time", 0, 
js_d©e_g‘Time
 ),

47250 
JS_CFUNC_MAGIC_DEF
("g‘Y—r", 0, 
g‘_d©e_f›ld
, 0x101 ),

47251 
JS_CFUNC_MAGIC_DEF
("g‘FuÎY—r", 0, 
g‘_d©e_f›ld
, 0x01 ),

47252 
JS_CFUNC_MAGIC_DEF
("g‘UTCFuÎY—r", 0, 
g‘_d©e_f›ld
, 0x00 ),

47253 
JS_CFUNC_MAGIC_DEF
("g‘MÚth", 0, 
g‘_d©e_f›ld
, 0x11 ),

47254 
JS_CFUNC_MAGIC_DEF
("g‘UTCMÚth", 0, 
g‘_d©e_f›ld
, 0x10 ),

47255 
JS_CFUNC_MAGIC_DEF
("g‘D©e", 0, 
g‘_d©e_f›ld
, 0x21 ),

47256 
JS_CFUNC_MAGIC_DEF
("g‘UTCD©e", 0, 
g‘_d©e_f›ld
, 0x20 ),

47257 
JS_CFUNC_MAGIC_DEF
("g‘Hours", 0, 
g‘_d©e_f›ld
, 0x31 ),

47258 
JS_CFUNC_MAGIC_DEF
("g‘UTCHours", 0, 
g‘_d©e_f›ld
, 0x30 ),

47259 
JS_CFUNC_MAGIC_DEF
("g‘Mšu‹s", 0, 
g‘_d©e_f›ld
, 0x41 ),

47260 
JS_CFUNC_MAGIC_DEF
("g‘UTCMšu‹s", 0, 
g‘_d©e_f›ld
, 0x40 ),

47261 
JS_CFUNC_MAGIC_DEF
("g‘SecÚds", 0, 
g‘_d©e_f›ld
, 0x51 ),

47262 
JS_CFUNC_MAGIC_DEF
("g‘UTCSecÚds", 0, 
g‘_d©e_f›ld
, 0x50 ),

47263 
JS_CFUNC_MAGIC_DEF
("g‘Mli£cÚds", 0, 
g‘_d©e_f›ld
, 0x61 ),

47264 
JS_CFUNC_MAGIC_DEF
("g‘UTCMli£cÚds", 0, 
g‘_d©e_f›ld
, 0x60 ),

47265 
JS_CFUNC_MAGIC_DEF
("g‘Day", 0, 
g‘_d©e_f›ld
, 0x71 ),

47266 
JS_CFUNC_MAGIC_DEF
("g‘UTCDay", 0, 
g‘_d©e_f›ld
, 0x70 ),

47267 
JS_CFUNC_DEF
("£tTime", 1, 
js_d©e_£tTime
 ),

47268 
JS_CFUNC_MAGIC_DEF
("£tMli£cÚds", 1, 
£t_d©e_f›ld
, 0x671 ),

47269 
JS_CFUNC_MAGIC_DEF
("£tUTCMli£cÚds", 1, 
£t_d©e_f›ld
, 0x670 ),

47270 
JS_CFUNC_MAGIC_DEF
("£tSecÚds", 2, 
£t_d©e_f›ld
, 0x571 ),

47271 
JS_CFUNC_MAGIC_DEF
("£tUTCSecÚds", 2, 
£t_d©e_f›ld
, 0x570 ),

47272 
JS_CFUNC_MAGIC_DEF
("£tMšu‹s", 3, 
£t_d©e_f›ld
, 0x471 ),

47273 
JS_CFUNC_MAGIC_DEF
("£tUTCMšu‹s", 3, 
£t_d©e_f›ld
, 0x470 ),

47274 
JS_CFUNC_MAGIC_DEF
("£tHours", 4, 
£t_d©e_f›ld
, 0x371 ),

47275 
JS_CFUNC_MAGIC_DEF
("£tUTCHours", 4, 
£t_d©e_f›ld
, 0x370 ),

47276 
JS_CFUNC_MAGIC_DEF
("£tD©e", 1, 
£t_d©e_f›ld
, 0x231 ),

47277 
JS_CFUNC_MAGIC_DEF
("£tUTCD©e", 1, 
£t_d©e_f›ld
, 0x230 ),

47278 
JS_CFUNC_MAGIC_DEF
("£tMÚth", 2, 
£t_d©e_f›ld
, 0x131 ),

47279 
JS_CFUNC_MAGIC_DEF
("£tUTCMÚth", 2, 
£t_d©e_f›ld
, 0x130 ),

47280 
JS_CFUNC_DEF
("£tY—r", 1, 
js_d©e_£tY—r
 ),

47281 
JS_CFUNC_MAGIC_DEF
("£tFuÎY—r", 3, 
£t_d©e_f›ld
, 0x031 ),

47282 
JS_CFUNC_MAGIC_DEF
("£tUTCFuÎY—r", 3, 
£t_d©e_f›ld
, 0x030 ),

47283 
JS_CFUNC_DEF
("toJSON", 1, 
js_d©e_toJSON
 ),

47286 
	$JS_AddIÁršsicD©e
(
JSCÚ‹xt
 *
ùx
)

47288 
JSV®ueCÚ¡
 
obj
;

47291 
ùx
->
şass_´Ùo
[
JS_CLASS_DATE
] = 
	`JS_NewObjeù
(ctx);

47292 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_DATE
], 
js_d©e_´Ùo_funcs
,

47293 
	`couÁof
(
js_d©e_´Ùo_funcs
));

47294 
obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "D©e", 
js_d©e_cÚ¡ruùÜ
, 7,

47295 
ùx
->
şass_´Ùo
[
JS_CLASS_DATE
]);

47296 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
, 
js_d©e_funcs
, 
	`couÁof
(js_date_funcs));

47297 
	}
}

47301 
	$JS_AddIÁršsicEv®
(
JSCÚ‹xt
 *
ùx
)

47303 
ùx
->
ev®_š‹º®
 = 
__JS_Ev®IÁ”Çl
;

47304 
	}
}

47306 #ifdeà
CONFIG_BIGNUM


47310 
	$js_İ”©Ü_£t_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

47312 
JSO³¿tÜS‘D©a
 *
İ£t
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_OPERATOR_SET
);

47313 
i
, 
j
;

47314 
JSBš¬yO³¿tÜDefEÁry
 *
’t
;

47316 ià(
İ£t
) {

47317 
i
 = 0; i < 
JS_OVOP_COUNT
; i++) {

47318 ià(
İ£t
->
£lf_İs
[
i
])

47319 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
İ£t
->
£lf_İs
[
i
]));

47321 
j
 = 0; j < 
İ£t
->
Ëá
.
couÁ
; j++) {

47322 
’t
 = &
İ£t
->
Ëá
.
b
[
j
];

47323 
i
 = 0; i < 
JS_OVOP_BINARY_COUNT
; i++) {

47324 ià(
’t
->
İs
[
i
])

47325 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
’t
->
İs
[
i
]));

47328 
	`js_ä“_¹
(
¹
, 
İ£t
->
Ëá
.
b
);

47329 
j
 = 0; j < 
İ£t
->
right
.
couÁ
; j++) {

47330 
’t
 = &
İ£t
->
right
.
b
[
j
];

47331 
i
 = 0; i < 
JS_OVOP_BINARY_COUNT
; i++) {

47332 ià(
’t
->
İs
[
i
])

47333 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
’t
->
İs
[
i
]));

47336 
	`js_ä“_¹
(
¹
, 
İ£t
->
right
.
b
);

47337 
	`js_ä“_¹
(
¹
, 
İ£t
);

47339 
	}
}

47341 
	$js_İ”©Ü_£t_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

47342 
JS_M¬kFunc
 *
m¬k_func
)

47344 
JSO³¿tÜS‘D©a
 *
İ£t
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_OPERATOR_SET
);

47345 
i
, 
j
;

47346 
JSBš¬yO³¿tÜDefEÁry
 *
’t
;

47348 ià(
İ£t
) {

47349 
i
 = 0; i < 
JS_OVOP_COUNT
; i++) {

47350 ià(
İ£t
->
£lf_İs
[
i
])

47351 
	`JS_M¬kV®ue
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
İ£t
->
£lf_İs
[
i
]),

47352 
m¬k_func
);

47354 
j
 = 0; j < 
İ£t
->
Ëá
.
couÁ
; j++) {

47355 
’t
 = &
İ£t
->
Ëá
.
b
[
j
];

47356 
i
 = 0; i < 
JS_OVOP_BINARY_COUNT
; i++) {

47357 ià(
’t
->
İs
[
i
])

47358 
	`JS_M¬kV®ue
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
’t
->
İs
[
i
]),

47359 
m¬k_func
);

47362 
j
 = 0; j < 
İ£t
->
right
.
couÁ
; j++) {

47363 
’t
 = &
İ£t
->
right
.
b
[
j
];

47364 
i
 = 0; i < 
JS_OVOP_BINARY_COUNT
; i++) {

47365 ià(
’t
->
İs
[
i
])

47366 
	`JS_M¬kV®ue
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
’t
->
İs
[
i
]),

47367 
m¬k_func
);

47371 
	}
}

47375 
JSV®ue
 
	$js_İ”©Üs_ü—‹_š‹º®
(
JSCÚ‹xt
 *
ùx
,

47376 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

47377 
BOOL
 
is_´im™ive
)

47379 
JSV®ue
 
İ£t_obj
, 
´İ
, 
obj
;

47380 
JSO³¿tÜS‘D©a
 *
İ£t
, *
İ£t1
;

47381 
JSBš¬yO³¿tÜDef
 *
def
;

47382 
JSV®ueCÚ¡
 
¬g
;

47383 
i
, 
j
;

47384 
JSBš¬yO³¿tÜDefEÁry
 *
Ãw_b
;

47385 
JSBš¬yO³¿tÜDefEÁry
 *
’t
;

47386 
ušt32_t
 
İ_couÁ
;

47388 ià(
ùx
->
¹
->
İ”©Ü_couÁ
 =ğ
UINT32_MAX
) {

47389  
	`JS_ThrowTy³E¼Ü
(
ùx
, "too many operators");

47391 
İ£t_obj
 = 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, 
JS_NULL
, 
JS_CLASS_OPERATOR_SET
);

47392 ià(
	`JS_IsExû±iÚ
(
İ£t_obj
))

47393 
ç
;

47394 
İ£t
 = 
	`js_m®locz
(
ùx
, (*opset));

47395 ià(!
İ£t
)

47396 
ç
;

47397 
	`JS_S‘O·que
(
İ£t_obj
, 
İ£t
);

47398 ià(
¬gc
 >= 1) {

47399 
¬g
 = 
¬gv
[0];

47401 
i
 = 0; i < 
JS_OVOP_COUNT
; i++) {

47402 
´İ
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
¬g
, 
js_ov”lßdabË_İ”©Ü_Çmes
[
i
]);

47403 ià(
	`JS_IsExû±iÚ
(
´İ
))

47404 
ç
;

47405 ià(!
	`JS_IsUndefšed
(
´İ
)) {

47406 ià(
	`check_funùiÚ
(
ùx
, 
´İ
)) {

47407 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

47408 
ç
;

47410 
İ£t
->
£lf_İs
[
i
] = 
	`JS_VALUE_GET_OBJ
(
´İ
);

47415 
j
 = 1; j < 
¬gc
; j++) {

47416 
¬g
 = 
¬gv
[
j
];

47417 
´İ
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
¬g
, "left");

47418 ià(
	`JS_IsExû±iÚ
(
´İ
))

47419 
ç
;

47420 
def
 = &
İ£t
->
right
;

47421 ià(
	`JS_IsUndefšed
(
´İ
)) {

47422 
´İ
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
¬g
, "right");

47423 ià(
	`JS_IsExû±iÚ
(
´İ
))

47424 
ç
;

47425 ià(
	`JS_IsUndefšed
(
´İ
)) {

47426 
	`JS_ThrowTy³E¼Ü
(
ùx
, "left or„ight…roperty must be…resent");

47427 
ç
;

47429 
def
 = &
İ£t
->
Ëá
;

47432 
obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
´İ
, 
JS_ATOM_´ÙÙy³
);

47433 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

47434 ià(
	`JS_IsExû±iÚ
(
obj
))

47435 
ç
;

47436 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
);

47437 
	`JS_F»eV®ue
(
ùx
, 
obj
);

47438 ià(
	`JS_IsExû±iÚ
(
´İ
))

47439 
ç
;

47440 
İ£t1
 = 
	`JS_G‘O·que2
(
ùx
, 
´İ
, 
JS_CLASS_OPERATOR_SET
);

47441 ià(!
İ£t1
) {

47442 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

47443 
ç
;

47445 
İ_couÁ
 = 
İ£t1
->
İ”©Ü_couÁ”
;

47446 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

47449 
Ãw_b
 = 
	`js_»®loc
(
ùx
, 
def
->
b
,

47450 (
def
->
couÁ
 + 1è* (def->
b
[0]));

47451 ià(!
Ãw_b
)

47452 
ç
;

47453 
def
->
b
 = 
Ãw_b
;

47454 
def
->
couÁ
++;

47455 
’t
 = 
def
->
b
 + def->
couÁ
 - 1;

47456 
	`mem£t
(
’t
, 0, (
def
->
b
[0]));

47457 
’t
->
İ”©Ü_šdex
 = 
İ_couÁ
;

47459 
i
 = 0; i < 
JS_OVOP_BINARY_COUNT
; i++) {

47460 
´İ
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
¬g
,

47461 
js_ov”lßdabË_İ”©Ü_Çmes
[
i
]);

47462 ià(
	`JS_IsExû±iÚ
(
´İ
))

47463 
ç
;

47464 ià(!
	`JS_IsUndefšed
(
´İ
)) {

47465 ià(
	`check_funùiÚ
(
ùx
, 
´İ
)) {

47466 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

47467 
ç
;

47469 
’t
->
İs
[
i
] = 
	`JS_VALUE_GET_OBJ
(
´İ
);

47473 
İ£t
->
is_´im™ive
 = is_primitive;

47474 
İ£t
->
İ”©Ü_couÁ”
 = 
ùx
->
¹
->
İ”©Ü_couÁ
++;

47475  
İ£t_obj
;

47476 
ç
:

47477 
	`JS_F»eV®ue
(
ùx
, 
İ£t_obj
);

47478  
JS_EXCEPTION
;

47479 
	}
}

47481 
JSV®ue
 
	$js_İ”©Üs_ü—‹
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47482 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47484  
	`js_İ”©Üs_ü—‹_š‹º®
(
ùx
, 
¬gc
, 
¬gv
, 
FALSE
);

47485 
	}
}

47487 
JSV®ue
 
	$js_İ”©Üs_upd©eBigIÁO³¿tÜs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47488 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47490 
JSV®ue
 
İ£t_obj
, 
´İ
;

47491 
JSO³¿tÜS‘D©a
 *
İ£t
;

47492 cÚ¡ 
JSOv”lßdabËO³¿tÜEnum
 
İs
[2] = { 
JS_OVOP_DIV
, 
JS_OVOP_POW
 };

47493 
JSOv”lßdabËO³¿tÜEnum
 
İ
;

47494 
i
;

47496 
İ£t_obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_INT
],

47497 
JS_ATOM_SymbŞ_İ”©ÜS‘
);

47498 ià(
	`JS_IsExû±iÚ
(
İ£t_obj
))

47499 
ç
;

47500 
İ£t
 = 
	`JS_G‘O·que2
(
ùx
, 
İ£t_obj
, 
JS_CLASS_OPERATOR_SET
);

47501 ià(!
İ£t
)

47502 
ç
;

47503 
i
 = 0; i < 
	`couÁof
(
İs
); i++) {

47504 
İ
 = 
İs
[
i
];

47505 
´İ
 = 
	`JS_G‘Prİ”tySŒ
(
ùx
, 
¬gv
[0],

47506 
js_ov”lßdabË_İ”©Ü_Çmes
[
İ
]);

47507 ià(
	`JS_IsExû±iÚ
(
´İ
))

47508 
ç
;

47509 ià(!
	`JS_IsUndefšed
(
´İ
)) {

47510 ià(!
	`JS_IsNuÎ
(
´İ
è&& 
	`check_funùiÚ
(
ùx
,…rop)) {

47511 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

47512 
ç
;

47514 ià(
İ£t
->
£lf_İs
[
İ
])

47515 
	`JS_F»eV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
İ£t
->
£lf_İs
[
İ
]));

47516 ià(
	`JS_IsNuÎ
(
´İ
)) {

47517 
İ£t
->
£lf_İs
[
İ
] = 
NULL
;

47519 
İ£t
->
£lf_İs
[
İ
] = 
	`JS_VALUE_GET_PTR
(
´İ
);

47523 
	`JS_F»eV®ue
(
ùx
, 
İ£t_obj
);

47524  
JS_UNDEFINED
;

47525 
ç
:

47526 
	`JS_F»eV®ue
(
ùx
, 
İ£t_obj
);

47527  
JS_EXCEPTION
;

47528 
	}
}

47530 
	$js_İ”©Üs_£t_deçuÉ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

47532 
JSV®ue
 
İ£t_obj
;

47534 ià(!
	`JS_IsObjeù
(
obj
))

47536 
İ£t_obj
 = 
	`js_İ”©Üs_ü—‹_š‹º®
(
ùx
, 0, 
NULL
, 
TRUE
);

47537 ià(
	`JS_IsExû±iÚ
(
İ£t_obj
))

47540 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
,

47541 
İ£t_obj
, 0);

47543 
	}
}

47545 
JSV®ue
 
	$js_dummy_İ”©Üs_ùÜ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
Ãw_rg‘
,

47546 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47548  
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_OBJECT
);

47549 
	}
}

47551 
JSV®ue
 
	$js_glob®_İ”©Üs
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47552 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47554 
JSV®ue
 
func_obj
, 
´Ùo
, 
İ£t_obj
;

47556 
func_obj
 = 
JS_UNDEFINED
;

47557 
´Ùo
 = 
	`JS_NewObjeù
(
ùx
);

47558 ià(
	`JS_IsExû±iÚ
(
´Ùo
))

47559  
JS_EXCEPTION
;

47560 
İ£t_obj
 = 
	`js_İ”©Üs_ü—‹_š‹º®
(
ùx
, 
¬gc
, 
¬gv
, 
FALSE
);

47561 ià(
	`JS_IsExû±iÚ
(
İ£t_obj
))

47562 
ç
;

47563 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
´Ùo
, 
JS_ATOM_SymbŞ_İ”©ÜS‘
,

47564 
İ£t_obj
, 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

47565 
func_obj
 = 
	`JS_NewCFunùiÚ2
(
ùx
, 
js_dummy_İ”©Üs_ùÜ
, "Operators",

47566 0, 
JS_CFUNC_cÚ¡ruùÜ
, 0);

47567 ià(
	`JS_IsExû±iÚ
(
func_obj
))

47568 
ç
;

47569 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, 
func_obj
, 
´Ùo
,

47570 0, 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

47571 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

47572  
func_obj
;

47573 
ç
:

47574 
	`JS_F»eV®ue
(
ùx
, 
´Ùo
);

47575 
	`JS_F»eV®ue
(
ùx
, 
func_obj
);

47576  
JS_EXCEPTION
;

47577 
	}
}

47579 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_İ”©Üs_funcs
[] = {

47580 
JS_CFUNC_DEF
("ü—‹", 1, 
js_İ”©Üs_ü—‹
 ),

47581 
JS_CFUNC_DEF
("upd©eBigIÁO³¿tÜs", 2, 
js_İ”©Üs_upd©eBigIÁO³¿tÜs
 ),

47585 
	$JS_AddIÁršsicO³¿tÜs
(
JSCÚ‹xt
 *
ùx
)

47587 
JSV®ue
 
obj
;

47589 
ùx
->
®low_İ”©Ü_ov”lßdšg
 = 
TRUE
;

47590 
obj
 = 
	`JS_NewCFunùiÚ
(
ùx
, 
js_glob®_İ”©Üs
, "Operators", 1);

47591 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
,

47592 
js_İ”©Üs_funcs
,

47593 
	`couÁof
(
js_İ”©Üs_funcs
));

47594 
	`JS_DefšePrİ”tyV®ue
(
ùx
, ctx->
glob®_obj
, 
JS_ATOM_O³¿tÜs
,

47595 
obj
,

47596 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

47598 
	`js_İ”©Üs_£t_deçuÉ
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BOOLEAN
]);

47599 
	`js_İ”©Üs_£t_deçuÉ
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_NUMBER
]);

47600 
	`js_İ”©Üs_£t_deçuÉ
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_STRING
]);

47601 
	`js_İ”©Üs_£t_deçuÉ
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_INT
]);

47602 
	`js_İ”©Üs_£t_deçuÉ
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_FLOAT
]);

47603 
	`js_İ”©Üs_£t_deçuÉ
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_DECIMAL
]);

47604 
	}
}

47608 
JSV®ue
 
	$JS_ToBigIÁCtÜF»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
)

47610 
ušt32_t
 
g
;

47612 
»do
:

47613 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

47614 
g
) {

47615 
JS_TAG_INT
:

47616 
JS_TAG_BOOL
:

47617 
v®
 = 
	`JS_NewBigIÁ64
(
ùx
, 
	`JS_VALUE_GET_INT
(val));

47619 
JS_TAG_BIG_INT
:

47621 
JS_TAG_FLOAT64
:

47622 
JS_TAG_BIG_FLOAT
:

47624 
bf_t
 *
a
, 
a_s
;

47626 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
v®
);

47627 ià(!
	`bf_is_fš™e
(
a
)) {

47628 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47629 
v®
 = 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "cannot convert NaN or Infinityo bigint");

47631 
JSV®ue
 
v®1
 = 
	`JS_NewBigIÁ
(
ùx
);

47632 
bf_t
 *
r
;

47633 
»t
;

47634 ià(
	`JS_IsExû±iÚ
(
v®1
)) {

47635 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47636  
JS_EXCEPTION
;

47638 
r
 = 
	`JS_G‘BigIÁ
(
v®1
);

47639 
»t
 = 
	`bf_£t
(
r
, 
a
);

47640 
»t
 |ğ
	`bf_ršt
(
r
, 
BF_RNDZ
);

47641 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47642 ià(
»t
 & 
BF_ST_MEM_ERROR
) {

47643 
	`JS_F»eV®ue
(
ùx
, 
v®1
);

47644 
v®
 = 
	`JS_ThrowOutOfMemÜy
(
ùx
);

47645 } ià(
»t
 & 
BF_ST_INEXACT
) {

47646 
	`JS_F»eV®ue
(
ùx
, 
v®1
);

47647 
v®
 = 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "cannot converto bigint:‚ot‡n integer");

47649 
v®
 = 
	`JS_Com·ùBigIÁ
(
ùx
, 
v®1
);

47652 ià(
a
 =ğ&
a_s
)

47653 
	`bf_d–‘e
(
a
);

47656 
JS_TAG_BIG_DECIMAL
:

47657 
v®
 = 
	`JS_ToSŒšgF»e
(
ùx
, val);

47658 ià(
	`JS_IsExû±iÚ
(
v®
))

47660 
»do
;

47661 
JS_TAG_STRING
:

47662 
v®
 = 
	`JS_SŒšgToBigIÁE¼
(
ùx
, val);

47664 
JS_TAG_OBJECT
:

47665 
v®
 = 
	`JS_ToPrim™iveF»e
(
ùx
, v®, 
HINT_NUMBER
);

47666 ià(
	`JS_IsExû±iÚ
(
v®
))

47668 
»do
;

47669 
JS_TAG_NULL
:

47670 
JS_TAG_UNDEFINED
:

47672 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47673  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto bigint");

47675  
v®
;

47676 
	}
}

47678 
JSV®ue
 
	$js_bigšt_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

47679 
JSV®ueCÚ¡
 
this_v®
,

47680 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47682  
	`JS_ToBigIÁCtÜF»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]));

47683 
	}
}

47685 
JSV®ue
 
	$js_thisBigIÁV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

47687 ià(
	`JS_IsBigIÁ
(
ùx
, 
this_v®
))

47688  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

47690 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

47691 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

47692 ià(
p
->
şass_id
 =ğ
JS_CLASS_BIG_INT
) {

47693 ià(
	`JS_IsBigIÁ
(
ùx
, 
p
->
u
.
objeù_d©a
))

47694  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

47697  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ bigint");

47698 
	}
}

47700 
JSV®ue
 
	$js_bigšt_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47701 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47703 
JSV®ue
 
v®
;

47704 
ba£
;

47705 
JSV®ue
 
»t
;

47707 
v®
 = 
	`js_thisBigIÁV®ue
(
ùx
, 
this_v®
);

47708 ià(
	`JS_IsExû±iÚ
(
v®
))

47709  
v®
;

47710 ià(
¬gc
 =ğ0 || 
	`JS_IsUndefšed
(
¬gv
[0])) {

47711 
ba£
 = 10;

47713 
ba£
 = 
	`js_g‘_¿dix
(
ùx
, 
¬gv
[0]);

47714 ià(
ba£
 < 0)

47715 
ç
;

47717 
»t
 = 
	`js_bigšt_to_¡ršg1
(
ùx
, 
v®
, 
ba£
);

47718 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47719  
»t
;

47720 
ç
:

47721 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47722  
JS_EXCEPTION
;

47723 
	}
}

47725 
JSV®ue
 
	$js_bigšt_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47726 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47728  
	`js_thisBigIÁV®ue
(
ùx
, 
this_v®
);

47729 
	}
}

47731 
JSV®ue
 
	$js_bigšt_div
(
JSCÚ‹xt
 *
ùx
,

47732 
JSV®ueCÚ¡
 
this_v®
,

47733 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

47735 
bf_t
 
a_s
, 
b_s
, *
a
, *
b
, *
r
, *
q
;

47736 
¡©us
;

47737 
JSV®ue
 
q_v®
, 
r_v®
;

47739 
q_v®
 = 
	`JS_NewBigIÁ
(
ùx
);

47740 ià(
	`JS_IsExû±iÚ
(
q_v®
))

47741  
JS_EXCEPTION
;

47742 
r_v®
 = 
	`JS_NewBigIÁ
(
ùx
);

47743 ià(
	`JS_IsExû±iÚ
(
r_v®
))

47744 
ç
;

47745 
b
 = 
NULL
;

47746 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
¬gv
[0]);

47747 ià(!
a
)

47748 
ç
;

47749 
b
 = 
	`JS_ToBigIÁ
(
ùx
, &
b_s
, 
¬gv
[1]);

47750 ià(!
b
) {

47751 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

47752 
ç
;

47754 
q
 = 
	`JS_G‘BigIÁ
(
q_v®
);

47755 
r
 = 
	`JS_G‘BigIÁ
(
r_v®
);

47756 
¡©us
 = 
	`bf_div»m
(
q
, 
r
, 
a
, 
b
, 
BF_PREC_INF
, 
BF_RNDZ
, 
magic
 & 0xf);

47757 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

47758 
	`JS_F»eBigIÁ
(
ùx
, 
b
, &
b_s
);

47759 ià(
	`uÆik–y
(
¡©us
)) {

47760 
	`throw_bf_exû±iÚ
(
ùx
, 
¡©us
);

47761 
ç
;

47763 
q_v®
 = 
	`JS_Com·ùBigIÁ
(
ùx
, q_val);

47764 ià(
magic
 & 0x10) {

47765 
JSV®ue
 
»t
;

47766 
»t
 = 
	`JS_NewA¼ay
(
ùx
);

47767 ià(
	`JS_IsExû±iÚ
(
»t
))

47768 
ç
;

47769 
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
»t
, 0, 
q_v®
);

47770 
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
»t
, 1, 
	`JS_Com·ùBigIÁ
(ùx, 
r_v®
));

47771  
»t
;

47773 
	`JS_F»eV®ue
(
ùx
, 
r_v®
);

47774  
q_v®
;

47776 
ç
:

47777 
	`JS_F»eV®ue
(
ùx
, 
q_v®
);

47778 
	`JS_F»eV®ue
(
ùx
, 
r_v®
);

47779  
JS_EXCEPTION
;

47780 
	}
}

47782 
JSV®ue
 
	$js_bigšt_sq¹
(
JSCÚ‹xt
 *
ùx
,

47783 
JSV®ueCÚ¡
 
this_v®
,

47784 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

47786 
bf_t
 
a_s
, *
a
, *
r
, *
»m
;

47787 
¡©us
;

47788 
JSV®ue
 
r_v®
, 
»m_v®
;

47790 
r_v®
 = 
	`JS_NewBigIÁ
(
ùx
);

47791 ià(
	`JS_IsExû±iÚ
(
r_v®
))

47792  
JS_EXCEPTION
;

47793 
»m_v®
 = 
	`JS_NewBigIÁ
(
ùx
);

47794 ià(
	`JS_IsExû±iÚ
(
»m_v®
))

47795  
JS_EXCEPTION
;

47796 
r
 = 
	`JS_G‘BigIÁ
(
r_v®
);

47797 
»m
 = 
	`JS_G‘BigIÁ
(
»m_v®
);

47799 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
¬gv
[0]);

47800 ià(!
a
)

47801 
ç
;

47802 
¡©us
 = 
	`bf_sq¹»m
(
r
, 
»m
, 
a
);

47803 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

47804 ià(
	`uÆik–y
(
¡©us
 & ~
BF_ST_INEXACT
)) {

47805 
	`throw_bf_exû±iÚ
(
ùx
, 
¡©us
);

47806 
ç
;

47808 
r_v®
 = 
	`JS_Com·ùBigIÁ
(
ùx
,„_val);

47809 ià(
magic
) {

47810 
JSV®ue
 
»t
;

47811 
»t
 = 
	`JS_NewA¼ay
(
ùx
);

47812 ià(
	`JS_IsExû±iÚ
(
»t
))

47813 
ç
;

47814 
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
»t
, 0, 
r_v®
);

47815 
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
»t
, 1, 
	`JS_Com·ùBigIÁ
(ùx, 
»m_v®
));

47816  
»t
;

47818 
	`JS_F»eV®ue
(
ùx
, 
»m_v®
);

47819  
r_v®
;

47821 
ç
:

47822 
	`JS_F»eV®ue
(
ùx
, 
r_v®
);

47823 
	`JS_F»eV®ue
(
ùx
, 
»m_v®
);

47824  
JS_EXCEPTION
;

47825 
	}
}

47827 
JSV®ue
 
	$js_bigšt_İ1
(
JSCÚ‹xt
 *
ùx
,

47828 
JSV®ueCÚ¡
 
this_v®
,

47829 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

47830 
magic
)

47832 
bf_t
 
a_s
, *
a
;

47833 
št64_t
 
»s
;

47835 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
¬gv
[0]);

47836 ià(!
a
)

47837  
JS_EXCEPTION
;

47838 
magic
) {

47840 ià(
a
->
sign
 ||‡->
ex²
 <= 0) {

47841 
»s
 = -1;

47843 
»s
 = 
a
->
ex²
 - 1;

47847 ià(
	`bf_is_z”o
(
a
)) {

47848 
»s
 = -1;

47850 
»s
 = 
	`bf_g‘_exp_mš
(
a
);

47854 
	`abÜt
();

47856 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

47857  
	`JS_NewBigIÁ64
(
ùx
, 
»s
);

47858 
	}
}

47860 
JSV®ue
 
	$js_bigšt_asUštN
(
JSCÚ‹xt
 *
ùx
,

47861 
JSV®ueCÚ¡
 
this_v®
,

47862 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
asIÁN
)

47864 
ušt64_t
 
b™s
;

47865 
bf_t
 
a_s
, *
a
 = &a_s, *
r
, 
mask_s
, *
mask
 = &mask_s;

47866 
JSV®ue
 
»s
;

47868 ià(
	`JS_ToIndex
(
ùx
, &
b™s
, 
¬gv
[0]))

47869  
JS_EXCEPTION
;

47870 
»s
 = 
	`JS_NewBigIÁ
(
ùx
);

47871 ià(
	`JS_IsExû±iÚ
(
»s
))

47872  
JS_EXCEPTION
;

47873 
r
 = 
	`JS_G‘BigIÁ
(
»s
);

47874 
a
 = 
	`JS_ToBigIÁ
(
ùx
, &
a_s
, 
¬gv
[1]);

47875 ià(!
a
) {

47876 
	`JS_F»eV®ue
(
ùx
, 
»s
);

47877  
JS_EXCEPTION
;

47880 
r
 = 
	`JS_G‘BigIÁ
(
»s
);

47881 
	`bf_š™
(
ùx
->
bf_ùx
, 
mask
);

47882 
	`bf_£t_ui
(
mask
, 1);

47883 
	`bf_mul_2exp
(
mask
, 
b™s
, 
BF_PREC_INF
, 
BF_RNDZ
);

47884 
	`bf_add_si
(
mask
, mask, -1, 
BF_PREC_INF
, 
BF_RNDZ
);

47885 
	`bf_logic_ªd
(
r
, 
a
, 
mask
);

47886 ià(
asIÁN
 && 
b™s
 != 0) {

47887 
	`bf_£t_ui
(
mask
, 1);

47888 
	`bf_mul_2exp
(
mask
, 
b™s
 - 1, 
BF_PREC_INF
, 
BF_RNDZ
);

47889 ià(
	`bf_cmpu
(
r
, 
mask
) >= 0) {

47890 
	`bf_£t_ui
(
mask
, 1);

47891 
	`bf_mul_2exp
(
mask
, 
b™s
, 
BF_PREC_INF
, 
BF_RNDZ
);

47892 
	`bf_sub
(
r
,„, 
mask
, 
BF_PREC_INF
, 
BF_RNDZ
);

47895 
	`bf_d–‘e
(
mask
);

47896 
	`JS_F»eBigIÁ
(
ùx
, 
a
, &
a_s
);

47897  
	`JS_Com·ùBigIÁ
(
ùx
, 
»s
);

47898 
	}
}

47900 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_bigšt_funcs
[] = {

47901 
JS_CFUNC_MAGIC_DEF
("asUštN", 2, 
js_bigšt_asUštN
, 0 ),

47902 
JS_CFUNC_MAGIC_DEF
("asIÁN", 2, 
js_bigšt_asUštN
, 1 ),

47904 
JS_CFUNC_MAGIC_DEF
("tdiv", 2, 
js_bigšt_div
, 
BF_RNDZ
 ),

47905 
JS_CFUNC_MAGIC_DEF
("fdiv", 2, 
js_bigšt_div
, 
BF_RNDD
 ),

47906 
JS_CFUNC_MAGIC_DEF
("cdiv", 2, 
js_bigšt_div
, 
BF_RNDU
 ),

47907 
JS_CFUNC_MAGIC_DEF
("ediv", 2, 
js_bigšt_div
, 
BF_DIVREM_EUCLIDIAN
 ),

47908 
JS_CFUNC_MAGIC_DEF
("tdiv»m", 2, 
js_bigšt_div
, 
BF_RNDZ
 | 0x10 ),

47909 
JS_CFUNC_MAGIC_DEF
("fdiv»m", 2, 
js_bigšt_div
, 
BF_RNDD
 | 0x10 ),

47910 
JS_CFUNC_MAGIC_DEF
("cdiv»m", 2, 
js_bigšt_div
, 
BF_RNDU
 | 0x10 ),

47911 
JS_CFUNC_MAGIC_DEF
("ediv»m", 2, 
js_bigšt_div
, 
BF_DIVREM_EUCLIDIAN
 | 0x10 ),

47912 
JS_CFUNC_MAGIC_DEF
("sq¹", 1, 
js_bigšt_sq¹
, 0 ),

47913 
JS_CFUNC_MAGIC_DEF
("sq¹»m", 1, 
js_bigšt_sq¹
, 1 ),

47914 
JS_CFUNC_MAGIC_DEF
("æoÜLog2", 1, 
js_bigšt_İ1
, 0 ),

47915 
JS_CFUNC_MAGIC_DEF
("ùz", 1, 
js_bigšt_İ1
, 1 ),

47918 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_bigšt_´Ùo_funcs
[] = {

47919 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_bigšt_toSŒšg
 ),

47920 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_bigšt_v®ueOf
 ),

47921 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "BigIÁ", 
JS_PROP_CONFIGURABLE
 ),

47924 
	$JS_AddIÁršsicBigIÁ
(
JSCÚ‹xt
 *
ùx
)

47926 
JSRuÁime
 *
¹
 = 
ùx
->rt;

47927 
JSV®ue
 
obj1
;

47929 
¹
->
bigšt_İs
.
to_¡ršg
 = 
js_bigšt_to_¡ršg
;

47930 
¹
->
bigšt_İs
.
äom_¡ršg
 = 
js_¡ršg_to_bigšt
;

47931 
¹
->
bigšt_İs
.
uÇry_¬™h
 = 
js_uÇry_¬™h_bigšt
;

47932 
¹
->
bigšt_İs
.
bš¬y_¬™h
 = 
js_bš¬y_¬™h_bigšt
;

47933 
¹
->
bigšt_İs
.
com·»
 = 
js_com·»_bigæßt
;

47935 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_INT
] = 
	`JS_NewObjeù
(ctx);

47936 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_INT
],

47937 
js_bigšt_´Ùo_funcs
,

47938 
	`couÁof
(
js_bigšt_´Ùo_funcs
));

47939 
obj1
 = 
	`JS_NewCFunùiÚ
(
ùx
, 
js_bigšt_cÚ¡ruùÜ
, "BigInt", 1);

47940 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
obj1
, "BigInt",

47941 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_INT
]);

47942 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj1
, 
js_bigšt_funcs
,

47943 
	`couÁof
(
js_bigšt_funcs
));

47944 
	}
}

47948 
JSV®ue
 
	$js_thisBigFlßtV®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

47950 ià(
	`JS_IsBigFlßt
(
this_v®
))

47951  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

47953 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

47954 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

47955 ià(
p
->
şass_id
 =ğ
JS_CLASS_BIG_FLOAT
) {

47956 ià(
	`JS_IsBigFlßt
(
p
->
u
.
objeù_d©a
))

47957  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

47960  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ bigfloat");

47961 
	}
}

47963 
JSV®ue
 
	$js_bigæßt_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47964 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47966 
JSV®ue
 
v®
;

47967 
ba£
;

47968 
JSV®ue
 
»t
;

47970 
v®
 = 
	`js_thisBigFlßtV®ue
(
ùx
, 
this_v®
);

47971 ià(
	`JS_IsExû±iÚ
(
v®
))

47972  
v®
;

47973 ià(
¬gc
 =ğ0 || 
	`JS_IsUndefšed
(
¬gv
[0])) {

47974 
ba£
 = 10;

47976 
ba£
 = 
	`js_g‘_¿dix
(
ùx
, 
¬gv
[0]);

47977 ià(
ba£
 < 0)

47978 
ç
;

47980 
»t
 = 
	`js_áß
(
ùx
, 
v®
, 
ba£
, 0, 
BF_RNDN
 | 
BF_FTOA_FORMAT_FREE_MIN
);

47981 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47982  
»t
;

47983 
ç
:

47984 
	`JS_F»eV®ue
(
ùx
, 
v®
);

47985  
JS_EXCEPTION
;

47986 
	}
}

47988 
JSV®ue
 
	$js_bigæßt_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

47989 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

47991  
	`js_thisBigFlßtV®ue
(
ùx
, 
this_v®
);

47992 
	}
}

47994 
	$bigæßt_g‘_ºd_mode
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

47996 
ºd_mode
;

47997 ià(
	`JS_ToIÁ32S©
(
ùx
, &
ºd_mode
, 
v®
))

47999 ià(
ºd_mode
 < 
BF_RNDN
 ||„nd_mod> 
BF_RNDF
) {

48000 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid„ounding mode");

48003  
ºd_mode
;

48004 
	}
}

48006 
JSV®ue
 
	$js_bigæßt_toFixed
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48007 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48009 
JSV®ue
 
v®
, 
»t
;

48010 
št64_t
 
f
;

48011 
ºd_mode
, 
¿dix
;

48013 
v®
 = 
	`js_thisBigFlßtV®ue
(
ùx
, 
this_v®
);

48014 ià(
	`JS_IsExû±iÚ
(
v®
))

48015  
v®
;

48016 ià(
	`JS_ToIÁ64S©
(
ùx
, &
f
, 
¬gv
[0]))

48017 
ç
;

48018 ià(
f
 < 0 || f > 
BF_PREC_MAX
) {

48019 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

48020 
ç
;

48022 
ºd_mode
 = 
BF_RNDNA
;

48023 
¿dix
 = 10;

48025 ià(
¬gc
 > 1) {

48026 
ºd_mode
 = 
	`bigæßt_g‘_ºd_mode
(
ùx
, 
¬gv
[1]);

48027 ià(
ºd_mode
 < 0)

48028 
ç
;

48030 ià(
¬gc
 > 2) {

48031 
¿dix
 = 
	`js_g‘_¿dix
(
ùx
, 
¬gv
[2]);

48032 ià(
¿dix
 < 0)

48033 
ç
;

48035 
»t
 = 
	`js_áß
(
ùx
, 
v®
, 
¿dix
, 
f
, 
ºd_mode
 | 
BF_FTOA_FORMAT_FRAC
);

48036 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48037  
»t
;

48038 
ç
:

48039 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48040  
JS_EXCEPTION
;

48041 
	}
}

48043 
BOOL
 
	$js_bigæßt_is_fš™e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
v®
)

48045 
BOOL
 
»s
;

48046 
ušt32_t
 
g
;

48048 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
v®
);

48049 
g
) {

48050 
JS_TAG_BIG_FLOAT
:

48052 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

48053 
»s
 = 
	`bf_is_fš™e
(&
p
->
num
);

48057 
»s
 = 
FALSE
;

48060  
»s
;

48061 
	}
}

48063 
JSV®ue
 
	$js_bigæßt_toExpÚ’tŸl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48064 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48066 
JSV®ue
 
v®
, 
»t
;

48067 
št64_t
 
f
;

48068 
ºd_mode
, 
¿dix
;

48070 
v®
 = 
	`js_thisBigFlßtV®ue
(
ùx
, 
this_v®
);

48071 ià(
	`JS_IsExû±iÚ
(
v®
))

48072  
v®
;

48073 ià(
	`JS_ToIÁ64S©
(
ùx
, &
f
, 
¬gv
[0]))

48074 
ç
;

48075 ià(!
	`js_bigæßt_is_fš™e
(
ùx
, 
v®
)) {

48076 
»t
 = 
	`JS_ToSŒšg
(
ùx
, 
v®
);

48077 } ià(
	`JS_IsUndefšed
(
¬gv
[0])) {

48078 
»t
 = 
	`js_áß
(
ùx
, 
v®
, 10, 0,

48079 
BF_RNDN
 | 
BF_FTOA_FORMAT_FREE_MIN
 | 
BF_FTOA_FORCE_EXP
);

48081 ià(
f
 < 0 || f > 
BF_PREC_MAX
) {

48082 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

48083 
ç
;

48085 
ºd_mode
 = 
BF_RNDNA
;

48086 
¿dix
 = 10;

48087 ià(
¬gc
 > 1) {

48088 
ºd_mode
 = 
	`bigæßt_g‘_ºd_mode
(
ùx
, 
¬gv
[1]);

48089 ià(
ºd_mode
 < 0)

48090 
ç
;

48092 ià(
¬gc
 > 2) {

48093 
¿dix
 = 
	`js_g‘_¿dix
(
ùx
, 
¬gv
[2]);

48094 ià(
¿dix
 < 0)

48095 
ç
;

48097 
»t
 = 
	`js_áß
(
ùx
, 
v®
, 
¿dix
, 
f
 + 1,

48098 
ºd_mode
 | 
BF_FTOA_FORMAT_FIXED
 | 
BF_FTOA_FORCE_EXP
);

48100 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48101  
»t
;

48102 
ç
:

48103 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48104  
JS_EXCEPTION
;

48105 
	}
}

48107 
JSV®ue
 
	$js_bigæßt_toP»cisiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48108 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48110 
JSV®ue
 
v®
, 
»t
;

48111 
št64_t
 
p
;

48112 
ºd_mode
, 
¿dix
;

48114 
v®
 = 
	`js_thisBigFlßtV®ue
(
ùx
, 
this_v®
);

48115 ià(
	`JS_IsExû±iÚ
(
v®
))

48116  
v®
;

48117 ià(
	`JS_IsUndefšed
(
¬gv
[0]))

48118 
to_¡ršg
;

48119 ià(
	`JS_ToIÁ64S©
(
ùx
, &
p
, 
¬gv
[0]))

48120 
ç
;

48121 ià(!
	`js_bigæßt_is_fš™e
(
ùx
, 
v®
)) {

48122 
to_¡ršg
:

48123 
»t
 = 
	`JS_ToSŒšg
(
ùx
, 
this_v®
);

48125 ià(
p
 < 1 ||… > 
BF_PREC_MAX
) {

48126 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

48127 
ç
;

48129 
ºd_mode
 = 
BF_RNDNA
;

48130 
¿dix
 = 10;

48131 ià(
¬gc
 > 1) {

48132 
ºd_mode
 = 
	`bigæßt_g‘_ºd_mode
(
ùx
, 
¬gv
[1]);

48133 ià(
ºd_mode
 < 0)

48134 
ç
;

48136 ià(
¬gc
 > 2) {

48137 
¿dix
 = 
	`js_g‘_¿dix
(
ùx
, 
¬gv
[2]);

48138 ià(
¿dix
 < 0)

48139 
ç
;

48141 
»t
 = 
	`js_áß
(
ùx
, 
v®
, 
¿dix
, 
p
, 
ºd_mode
 | 
BF_FTOA_FORMAT_FIXED
);

48143 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48144  
»t
;

48145 
ç
:

48146 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48147  
JS_EXCEPTION
;

48148 
	}
}

48150 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_bigæßt_´Ùo_funcs
[] = {

48151 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_bigæßt_toSŒšg
 ),

48152 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_bigæßt_v®ueOf
 ),

48153 
JS_CFUNC_DEF
("toP»cisiÚ", 1, 
js_bigæßt_toP»cisiÚ
 ),

48154 
JS_CFUNC_DEF
("toFixed", 1, 
js_bigæßt_toFixed
 ),

48155 
JS_CFUNC_DEF
("toExpÚ’tŸl", 1, 
js_bigæßt_toExpÚ’tŸl
 ),

48158 
JSV®ue
 
	$js_bigæßt_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

48159 
JSV®ueCÚ¡
 
this_v®
,

48160 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48162 
JSV®ue
 
v®
;

48163 ià(
¬gc
 == 0) {

48164 
bf_t
 *
r
;

48165 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

48166 ià(
	`JS_IsExû±iÚ
(
v®
))

48167  
v®
;

48168 
r
 = 
	`JS_G‘BigFlßt
(
v®
);

48169 
	`bf_£t_z”o
(
r
, 0);

48171 
v®
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

48172 
»do
:

48173 
	`JS_VALUE_GET_NORM_TAG
(
v®
)) {

48174 
JS_TAG_BIG_FLOAT
:

48176 
JS_TAG_FLOAT64
:

48178 
bf_t
 *
r
;

48179 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
v®
);

48180 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

48181 ià(
	`JS_IsExû±iÚ
(
v®
))

48183 
r
 = 
	`JS_G‘BigFlßt
(
v®
);

48184 ià(
	`bf_£t_æßt64
(
r
, 
d
))

48185 
ç
;

48188 
JS_TAG_INT
:

48190 
bf_t
 *
r
;

48191 
št32_t
 
v
 = 
	`JS_VALUE_GET_INT
(
v®
);

48192 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

48193 ià(
	`JS_IsExû±iÚ
(
v®
))

48195 
r
 = 
	`JS_G‘BigFlßt
(
v®
);

48196 ià(
	`bf_£t_si
(
r
, 
v
))

48197 
ç
;

48200 
JS_TAG_BIG_INT
:

48203 
JSBigFlßt
 *
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

48204 
v®
 = 
	`JS_MKPTR
(
JS_TAG_BIG_FLOAT
, 
p
);

48207 
JS_TAG_BIG_DECIMAL
:

48208 
v®
 = 
	`JS_ToSŒšgF»e
(
ùx
, val);

48209 ià(
	`JS_IsExû±iÚ
(
v®
))

48211 
»do
;

48212 
JS_TAG_STRING
:

48214 cÚ¡ *
¡r
, *
p
;

48215 
size_t
 
Ën
;

48216 
”r
;

48218 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
v®
);

48219 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48220 ià(!
¡r
)

48221  
JS_EXCEPTION
;

48222 
p
 = 
¡r
;

48223 
p
 +ğ
	`sk_¥aûs
(p);

48224 ià((
p
 - 
¡r
è=ğ
Ën
) {

48225 
bf_t
 *
r
;

48226 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

48227 ià(
	`JS_IsExû±iÚ
(
v®
))

48229 
r
 = 
	`JS_G‘BigFlßt
(
v®
);

48230 
	`bf_£t_z”o
(
r
, 0);

48231 
”r
 = 0;

48233 
v®
 = 
	`js_©of
(
ùx
, 
p
, &p, 0, 
ATOD_ACCEPT_BIN_OCT
 |

48234 
ATOD_TYPE_BIG_FLOAT
 |

48235 
ATOD_ACCEPT_PREFIX_AFTER_SIGN
);

48236 ià(
	`JS_IsExû±iÚ
(
v®
)) {

48237 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

48238  
JS_EXCEPTION
;

48240 
p
 +ğ
	`sk_¥aûs
(p);

48241 
”r
 = ((
p
 - 
¡r
è!ğ
Ën
);

48243 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

48244 ià(
”r
) {

48245 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48246  
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "invalid bigfloat†iteral");

48250 
JS_TAG_OBJECT
:

48251 
v®
 = 
	`JS_ToPrim™iveF»e
(
ùx
, v®, 
HINT_NUMBER
);

48252 ià(
	`JS_IsExû±iÚ
(
v®
))

48254 
»do
;

48255 
JS_TAG_NULL
:

48256 
JS_TAG_UNDEFINED
:

48258 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48259  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto bigfloat");

48262  
v®
;

48263 
ç
:

48264 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48265  
JS_EXCEPTION
;

48266 
	}
}

48268 
JSV®ue
 
	$js_bigæßt_g‘_cÚ¡
(
JSCÚ‹xt
 *
ùx
,

48269 
JSV®ueCÚ¡
 
this_v®
, 
magic
)

48271 
bf_t
 *
r
;

48272 
JSV®ue
 
v®
;

48273 
v®
 = 
	`JS_NewBigFlßt
(
ùx
);

48274 ià(
	`JS_IsExû±iÚ
(
v®
))

48275  
v®
;

48276 
r
 = 
	`JS_G‘BigFlßt
(
v®
);

48277 
magic
) {

48279 
	`bf_cÚ¡_pi
(
r
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

48282 
	`bf_cÚ¡_log2
(
r
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

48287 
¦imb_t
 
e_¿nge
, 
e
;

48288 
e_¿nge
 = (
limb_t
)1 << (
	`bf_g‘_exp_b™s
(
ùx
->
å_’v
.
æags
) - 1);

48289 
	`bf_£t_ui
(
r
, 1);

48290 ià(
magic
 == 2) {

48291 
e
 = -
e_¿nge
 + 2;

48292 ià(
ùx
->
å_’v
.
æags
 & 
BF_FLAG_SUBNORMAL
)

48293 
e
 -ğ
ùx
->
å_’v
.
´ec
 - 1;

48294 
	`bf_mul_2exp
(
r
, 
e
, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

48296 
	`bf_mul_2exp
(
r
, 
ùx
->
å_’v
.
´ec
, ctx->fp_env.prec,

48297 
ùx
->
å_’v
.
æags
);

48298 
	`bf_add_si
(
r
,„, -1, 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

48299 
	`bf_mul_2exp
(
r
, 
e_¿nge
 - 
ùx
->
å_’v
.
´ec
, ctx->fp_env.prec,

48300 
ùx
->
å_’v
.
æags
);

48305 
	`bf_£t_ui
(
r
, 1);

48306 
	`bf_mul_2exp
(
r
, 1 - 
ùx
->
å_’v
.
´ec
,

48307 
ùx
->
å_’v
.
´ec
, ctx->å_’v.
æags
);

48310 
	`abÜt
();

48312  
v®
;

48313 
	}
}

48315 
JSV®ue
 
	$js_bigæßt_·r£Flßt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48316 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48318 
bf_t
 *
a
;

48319 cÚ¡ *
¡r
;

48320 
JSV®ue
 
»t
;

48321 
¿dix
;

48322 
JSFlßtEnv
 *
ã
;

48324 
¡r
 = 
	`JS_ToCSŒšg
(
ùx
, 
¬gv
[0]);

48325 ià(!
¡r
)

48326  
JS_EXCEPTION
;

48327 ià(
	`JS_ToIÁ32
(
ùx
, &
¿dix
, 
¬gv
[1])) {

48328 
ç
:

48329 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

48330  
JS_EXCEPTION
;

48332 ià(
¿dix
 != 0 && (radix < 2 ||„adix > 36)) {

48333 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "radix must be between 2‡nd 36");

48334 
ç
;

48336 
ã
 = &
ùx
->
å_’v
;

48337 ià(
¬gc
 > 2) {

48338 
ã
 = 
	`JS_G‘O·que2
(
ùx
, 
¬gv
[2], 
JS_CLASS_FLOAT_ENV
);

48339 ià(!
ã
)

48340 
ç
;

48342 
»t
 = 
	`JS_NewBigFlßt
(
ùx
);

48343 ià(
	`JS_IsExû±iÚ
(
»t
))

48344 
dÚe
;

48345 
a
 = 
	`JS_G‘BigFlßt
(
»t
);

48347 
	`bf_©of
(
a
, 
¡r
, 
NULL
, 
¿dix
, 
ã
->
´ec
, fe->
æags
);

48348 
dÚe
:

48349 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

48350  
»t
;

48351 
	}
}

48353 
JSV®ue
 
	$js_bigæßt_isFš™e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48354 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48356 
JSV®ueCÚ¡
 
v®
 = 
¬gv
[0];

48357 
JSBigFlßt
 *
p
;

48359 ià(
	`JS_VALUE_GET_NORM_TAG
(
v®
è!ğ
JS_TAG_BIG_FLOAT
)

48360  
JS_FALSE
;

48361 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

48362  
	`JS_NewBoŞ
(
ùx
, 
	`bf_is_fš™e
(&
p
->
num
));

48363 
	}
}

48365 
JSV®ue
 
	$js_bigæßt_isNaN
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48366 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48368 
JSV®ueCÚ¡
 
v®
 = 
¬gv
[0];

48369 
JSBigFlßt
 *
p
;

48371 ià(
	`JS_VALUE_GET_NORM_TAG
(
v®
è!ğ
JS_TAG_BIG_FLOAT
)

48372  
JS_FALSE
;

48373 
p
 = 
	`JS_VALUE_GET_PTR
(
v®
);

48374  
	`JS_NewBoŞ
(
ùx
, 
	`bf_is_Çn
(&
p
->
num
));

48375 
	}
}

48378 
	mMATH_OP_ABS
,

48379 
	mMATH_OP_FLOOR
,

48380 
	mMATH_OP_CEIL
,

48381 
	mMATH_OP_ROUND
,

48382 
	mMATH_OP_TRUNC
,

48383 
	mMATH_OP_SQRT
,

48384 
	mMATH_OP_FPROUND
,

48385 
	mMATH_OP_ACOS
,

48386 
	mMATH_OP_ASIN
,

48387 
	mMATH_OP_ATAN
,

48388 
	mMATH_OP_ATAN2
,

48389 
	mMATH_OP_COS
,

48390 
	mMATH_OP_EXP
,

48391 
	mMATH_OP_LOG
,

48392 
	mMATH_OP_POW
,

48393 
	mMATH_OP_SIN
,

48394 
	mMATH_OP_TAN
,

48395 
	mMATH_OP_FMOD
,

48396 
	mMATH_OP_REM
,

48397 
	mMATH_OP_SIGN
,

48399 
	mMATH_OP_ADD
,

48400 
	mMATH_OP_SUB
,

48401 
	mMATH_OP_MUL
,

48402 
	mMATH_OP_DIV
,

48405 
JSV®ue
 
	$js_bigæßt_fİ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48406 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

48408 
bf_t
 
a_s
, *
a
, *
r
;

48409 
JSFlßtEnv
 *
ã
;

48410 
ºd_mode
;

48411 
JSV®ue
 
İ1
, 
»s
;

48413 
İ1
 = 
	`JS_ToNum”ic
(
ùx
, 
¬gv
[0]);

48414 ià(
	`JS_IsExû±iÚ
(
İ1
))

48415  
İ1
;

48416 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

48417 
ã
 = &
ùx
->
å_’v
;

48418 ià(
¬gc
 > 1) {

48419 
ã
 = 
	`JS_G‘O·que2
(
ùx
, 
¬gv
[1], 
JS_CLASS_FLOAT_ENV
);

48420 ià(!
ã
)

48421 
ç
;

48423 
»s
 = 
	`JS_NewBigFlßt
(
ùx
);

48424 ià(
	`JS_IsExû±iÚ
(
»s
)) {

48425 
ç
:

48426 ià(
a
 =ğ&
a_s
)

48427 
	`bf_d–‘e
(
a
);

48428 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

48429  
JS_EXCEPTION
;

48431 
r
 = 
	`JS_G‘BigFlßt
(
»s
);

48432 
magic
) {

48433 
MATH_OP_ABS
:

48434 
	`bf_£t
(
r
, 
a
);

48435 
r
->
sign
 = 0;

48437 
MATH_OP_FLOOR
:

48438 
ºd_mode
 = 
BF_RNDD
;

48439 
ršt
;

48440 
MATH_OP_CEIL
:

48441 
ºd_mode
 = 
BF_RNDU
;

48442 
ršt
;

48443 
MATH_OP_ROUND
:

48444 
ºd_mode
 = 
BF_RNDNA
;

48445 
ršt
;

48446 
MATH_OP_TRUNC
:

48447 
ºd_mode
 = 
BF_RNDZ
;

48448 
ršt
:

48449 
	`bf_£t
(
r
, 
a
);

48450 
ã
->
¡©us
 |ğ
	`bf_ršt
(
r
, 
ºd_mode
);

48452 
MATH_OP_SQRT
:

48453 
ã
->
¡©us
 |ğ
	`bf_sq¹
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48455 
MATH_OP_FPROUND
:

48456 
	`bf_£t
(
r
, 
a
);

48457 
ã
->
¡©us
 |ğ
	`bf_round
(
r
, fe->
´ec
, fe->
æags
);

48459 
MATH_OP_ACOS
:

48460 
ã
->
¡©us
 |ğ
	`bf_acos
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48462 
MATH_OP_ASIN
:

48463 
ã
->
¡©us
 |ğ
	`bf_asš
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48465 
MATH_OP_ATAN
:

48466 
ã
->
¡©us
 |ğ
	`bf_©ª
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48468 
MATH_OP_COS
:

48469 
ã
->
¡©us
 |ğ
	`bf_cos
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48471 
MATH_OP_EXP
:

48472 
ã
->
¡©us
 |ğ
	`bf_exp
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48474 
MATH_OP_LOG
:

48475 
ã
->
¡©us
 |ğ
	`bf_log
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48477 
MATH_OP_SIN
:

48478 
ã
->
¡©us
 |ğ
	`bf_sš
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48480 
MATH_OP_TAN
:

48481 
ã
->
¡©us
 |ğ
	`bf_n
(
r
, 
a
, fe->
´ec
, fe->
æags
);

48483 
MATH_OP_SIGN
:

48484 ià(
	`bf_is_Çn
(
a
è|| 
	`bf_is_z”o
(a)) {

48485 
	`bf_£t
(
r
, 
a
);

48487 
	`bf_£t_si
(
r
, 1 - 2 * 
a
->
sign
);

48491 
	`abÜt
();

48493 ià(
a
 =ğ&
a_s
)

48494 
	`bf_d–‘e
(
a
);

48495 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

48496  
»s
;

48497 
	}
}

48499 
JSV®ue
 
	$js_bigæßt_fİ2
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48500 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

48502 
bf_t
 
a_s
, *
a
, 
b_s
, *
b
, 
r_s
, *
r
 = &r_s;

48503 
JSFlßtEnv
 *
ã
;

48504 
JSV®ue
 
İ1
, 
İ2
, 
»s
;

48506 
İ1
 = 
	`JS_ToNum”ic
(
ùx
, 
¬gv
[0]);

48507 ià(
	`JS_IsExû±iÚ
(
İ1
))

48508  
İ1
;

48509 
İ2
 = 
	`JS_ToNum”ic
(
ùx
, 
¬gv
[1]);

48510 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

48511 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

48512  
İ2
;

48514 
a
 = 
	`JS_ToBigFlßt
(
ùx
, &
a_s
, 
İ1
);

48515 
b
 = 
	`JS_ToBigFlßt
(
ùx
, &
b_s
, 
İ2
);

48516 
ã
 = &
ùx
->
å_’v
;

48517 ià(
¬gc
 > 2) {

48518 
ã
 = 
	`JS_G‘O·que2
(
ùx
, 
¬gv
[2], 
JS_CLASS_FLOAT_ENV
);

48519 ià(!
ã
)

48520 
ç
;

48522 
»s
 = 
	`JS_NewBigFlßt
(
ùx
);

48523 ià(
	`JS_IsExû±iÚ
(
»s
)) {

48524 
ç
:

48525 ià(
a
 =ğ&
a_s
)

48526 
	`bf_d–‘e
(
a
);

48527 ià(
b
 =ğ&
b_s
)

48528 
	`bf_d–‘e
(
b
);

48529 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

48530 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

48531  
JS_EXCEPTION
;

48533 
r
 = 
	`JS_G‘BigFlßt
(
»s
);

48534 
magic
) {

48535 
MATH_OP_ATAN2
:

48536 
ã
->
¡©us
 |ğ
	`bf_©ª2
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
);

48538 
MATH_OP_POW
:

48539 
ã
->
¡©us
 |ğ
	`bf_pow
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
 | 
BF_POW_JS_QUIRKS
);

48541 
MATH_OP_FMOD
:

48542 
ã
->
¡©us
 |ğ
	`bf_»m
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
, 
BF_RNDZ
);

48544 
MATH_OP_REM
:

48545 
ã
->
¡©us
 |ğ
	`bf_»m
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
, 
BF_RNDN
);

48547 
MATH_OP_ADD
:

48548 
ã
->
¡©us
 |ğ
	`bf_add
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
);

48550 
MATH_OP_SUB
:

48551 
ã
->
¡©us
 |ğ
	`bf_sub
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
);

48553 
MATH_OP_MUL
:

48554 
ã
->
¡©us
 |ğ
	`bf_mul
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
);

48556 
MATH_OP_DIV
:

48557 
ã
->
¡©us
 |ğ
	`bf_div
(
r
, 
a
, 
b
, fe->
´ec
, fe->
æags
);

48560 
	`abÜt
();

48562 ià(
a
 =ğ&
a_s
)

48563 
	`bf_d–‘e
(
a
);

48564 ià(
b
 =ğ&
b_s
)

48565 
	`bf_d–‘e
(
b
);

48566 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

48567 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

48568  
»s
;

48569 
	}
}

48571 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_bigæßt_funcs
[] = {

48572 
JS_CGETSET_MAGIC_DEF
("PI", 
js_bigæßt_g‘_cÚ¡
, 
NULL
, 0 ),

48573 
JS_CGETSET_MAGIC_DEF
("LN2", 
js_bigæßt_g‘_cÚ¡
, 
NULL
, 1 ),

48574 
JS_CGETSET_MAGIC_DEF
("MIN_VALUE", 
js_bigæßt_g‘_cÚ¡
, 
NULL
, 2 ),

48575 
JS_CGETSET_MAGIC_DEF
("MAX_VALUE", 
js_bigæßt_g‘_cÚ¡
, 
NULL
, 3 ),

48576 
JS_CGETSET_MAGIC_DEF
("EPSILON", 
js_bigæßt_g‘_cÚ¡
, 
NULL
, 4 ),

48577 
JS_CFUNC_DEF
("·r£Flßt", 1, 
js_bigæßt_·r£Flßt
 ),

48578 
JS_CFUNC_DEF
("isFš™e", 1, 
js_bigæßt_isFš™e
 ),

48579 
JS_CFUNC_DEF
("isNaN", 1, 
js_bigæßt_isNaN
 ),

48580 
JS_CFUNC_MAGIC_DEF
("abs", 1, 
js_bigæßt_fİ
, 
MATH_OP_ABS
 ),

48581 
JS_CFUNC_MAGIC_DEF
("åRound", 1, 
js_bigæßt_fİ
, 
MATH_OP_FPROUND
 ),

48582 
JS_CFUNC_MAGIC_DEF
("æoÜ", 1, 
js_bigæßt_fİ
, 
MATH_OP_FLOOR
 ),

48583 
JS_CFUNC_MAGIC_DEF
("û", 1, 
js_bigæßt_fİ
, 
MATH_OP_CEIL
 ),

48584 
JS_CFUNC_MAGIC_DEF
("round", 1, 
js_bigæßt_fİ
, 
MATH_OP_ROUND
 ),

48585 
JS_CFUNC_MAGIC_DEF
("Œunc", 1, 
js_bigæßt_fİ
, 
MATH_OP_TRUNC
 ),

48586 
JS_CFUNC_MAGIC_DEF
("sq¹", 1, 
js_bigæßt_fİ
, 
MATH_OP_SQRT
 ),

48587 
JS_CFUNC_MAGIC_DEF
("acos", 1, 
js_bigæßt_fİ
, 
MATH_OP_ACOS
 ),

48588 
JS_CFUNC_MAGIC_DEF
("asš", 1, 
js_bigæßt_fİ
, 
MATH_OP_ASIN
 ),

48589 
JS_CFUNC_MAGIC_DEF
("©ª", 1, 
js_bigæßt_fİ
, 
MATH_OP_ATAN
 ),

48590 
JS_CFUNC_MAGIC_DEF
("©ª2", 2, 
js_bigæßt_fİ2
, 
MATH_OP_ATAN2
 ),

48591 
JS_CFUNC_MAGIC_DEF
("cos", 1, 
js_bigæßt_fİ
, 
MATH_OP_COS
 ),

48592 
JS_CFUNC_MAGIC_DEF
("exp", 1, 
js_bigæßt_fİ
, 
MATH_OP_EXP
 ),

48593 
JS_CFUNC_MAGIC_DEF
("log", 1, 
js_bigæßt_fİ
, 
MATH_OP_LOG
 ),

48594 
JS_CFUNC_MAGIC_DEF
("pow", 2, 
js_bigæßt_fİ2
, 
MATH_OP_POW
 ),

48595 
JS_CFUNC_MAGIC_DEF
("sš", 1, 
js_bigæßt_fİ
, 
MATH_OP_SIN
 ),

48596 
JS_CFUNC_MAGIC_DEF
("n", 1, 
js_bigæßt_fİ
, 
MATH_OP_TAN
 ),

48597 
JS_CFUNC_MAGIC_DEF
("sign", 1, 
js_bigæßt_fİ
, 
MATH_OP_SIGN
 ),

48598 
JS_CFUNC_MAGIC_DEF
("add", 2, 
js_bigæßt_fİ2
, 
MATH_OP_ADD
 ),

48599 
JS_CFUNC_MAGIC_DEF
("sub", 2, 
js_bigæßt_fİ2
, 
MATH_OP_SUB
 ),

48600 
JS_CFUNC_MAGIC_DEF
("mul", 2, 
js_bigæßt_fİ2
, 
MATH_OP_MUL
 ),

48601 
JS_CFUNC_MAGIC_DEF
("div", 2, 
js_bigæßt_fİ2
, 
MATH_OP_DIV
 ),

48602 
JS_CFUNC_MAGIC_DEF
("fmod", 2, 
js_bigæßt_fİ2
, 
MATH_OP_FMOD
 ),

48603 
JS_CFUNC_MAGIC_DEF
("»mašd”", 2, 
js_bigæßt_fİ2
, 
MATH_OP_REM
 ),

48608 
JSV®ue
 
	$js_æßt_’v_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

48609 
JSV®ueCÚ¡
 
Ãw_rg‘
,

48610 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48612 
JSV®ue
 
obj
;

48613 
JSFlßtEnv
 *
ã
;

48614 
št64_t
 
´ec
;

48615 
æags
, 
ºdmode
;

48617 
´ec
 = 
ùx
->
å_’v
.prec;

48618 
æags
 = 
ùx
->
å_’v
.flags;

48619 ià(!
	`JS_IsUndefšed
(
¬gv
[0])) {

48620 ià(
	`JS_ToIÁ64S©
(
ùx
, &
´ec
, 
¬gv
[0]))

48621  
JS_EXCEPTION
;

48622 ià(
´ec
 < 
BF_PREC_MIN
 ||…»ø> 
BF_PREC_MAX
)

48623  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid…recision");

48624 
æags
 = 
BF_RNDN
;

48625 ià(
¬gc
 > 1 && !
	`JS_IsUndefšed
(
¬gv
[1])) {

48626 ià(
	`JS_ToIÁ32S©
(
ùx
, &
ºdmode
, 
¬gv
[1]))

48627  
JS_EXCEPTION
;

48628 ià(
ºdmode
 < 
BF_RNDN
 ||„ndmod> 
BF_RNDF
)

48629  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid„ounding mode");

48630 
æags
 = 
ºdmode
;

48634 
obj
 = 
	`JS_NewObjeùCÏss
(
ùx
, 
JS_CLASS_FLOAT_ENV
);

48635 ià(
	`JS_IsExû±iÚ
(
obj
))

48636  
JS_EXCEPTION
;

48637 
ã
 = 
	`js_m®loc
(
ùx
, (*fe));

48638 ià(!
ã
)

48639  
JS_EXCEPTION
;

48640 
ã
->
´ec
 =…rec;

48641 
ã
->
æags
 = flags;

48642 
ã
->
¡©us
 = 0;

48643 
	`JS_S‘O·que
(
obj
, 
ã
);

48644  
obj
;

48645 
	}
}

48647 
	$js_æßt_’v_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

48649 
JSFlßtEnv
 *
ã
 = 
	`JS_G‘O·que
(
v®
, 
JS_CLASS_FLOAT_ENV
);

48650 
	`js_ä“_¹
(
¹
, 
ã
);

48651 
	}
}

48653 
JSV®ue
 
	$js_æßt_’v_g‘_´ec
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

48655  
	`JS_NewIÁ64
(
ùx
, ctx->
å_’v
.
´ec
);

48656 
	}
}

48658 
JSV®ue
 
	$js_æßt_’v_g‘_expB™s
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

48660  
	`JS_NewIÁ32
(
ùx
, 
	`bf_g‘_exp_b™s
(ùx->
å_’v
.
æags
));

48661 
	}
}

48663 
JSV®ue
 
	$js_æßt_’v_£tP»c
(
JSCÚ‹xt
 *
ùx
,

48664 
JSV®ueCÚ¡
 
this_v®
,

48665 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48667 
JSV®ueCÚ¡
 
func
;

48668 
exp_b™s
, 
æags
, 
§ved_æags
;

48669 
JSV®ue
 
»t
;

48670 
limb_t
 
§ved_´ec
;

48671 
št64_t
 
´ec
;

48673 
func
 = 
¬gv
[0];

48674 ià(
	`JS_ToIÁ64S©
(
ùx
, &
´ec
, 
¬gv
[1]))

48675  
JS_EXCEPTION
;

48676 ià(
´ec
 < 
BF_PREC_MIN
 ||…»ø> 
BF_PREC_MAX
)

48677  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid…recision");

48678 
exp_b™s
 = 
BF_EXP_BITS_MAX
;

48680 ià(
¬gc
 > 2 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

48681 ià(
	`JS_ToIÁ32S©
(
ùx
, &
exp_b™s
, 
¬gv
[2]))

48682  
JS_EXCEPTION
;

48683 ià(
exp_b™s
 < 
BF_EXP_BITS_MIN
 ||ƒxp_b™ > 
BF_EXP_BITS_MAX
)

48684  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber ofƒxponent bits");

48687 
æags
 = 
BF_RNDN
 | 
BF_FLAG_SUBNORMAL
 | 
	`bf_£t_exp_b™s
(
exp_b™s
);

48689 
§ved_´ec
 = 
ùx
->
å_’v
.
´ec
;

48690 
§ved_æags
 = 
ùx
->
å_’v
.
æags
;

48692 
ùx
->
å_’v
.
´ec
 =…rec;

48693 
ùx
->
å_’v
.
æags
 = flags;

48695 
»t
 = 
	`JS_C®l
(
ùx
, 
func
, 
JS_UNDEFINED
, 0, 
NULL
);

48697 
ùx
->
å_’v
.
´ec
 = 
§ved_´ec
;

48698 
ùx
->
å_’v
.
æags
 = 
§ved_æags
;

48699  
»t
;

48700 
	}
}

48702 
	#FE_PREC
 (-1)

	)

48703 
	#FE_EXP
 (-2)

	)

48704 
	#FE_RNDMODE
 (-3)

	)

48705 
	#FE_SUBNORMAL
 (-4)

	)

48707 
JSV®ue
 
	$js_æßt_’v_´Ùo_g‘_¡©us
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, 
magic
)

48709 
JSFlßtEnv
 *
ã
;

48710 
ã
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_FLOAT_ENV
);

48711 ià(!
ã
)

48712  
JS_EXCEPTION
;

48713 
magic
) {

48714 
FE_PREC
:

48715  
	`JS_NewIÁ64
(
ùx
, 
ã
->
´ec
);

48716 
FE_EXP
:

48717  
	`JS_NewIÁ32
(
ùx
, 
	`bf_g‘_exp_b™s
(
ã
->
æags
));

48718 
FE_RNDMODE
:

48719  
	`JS_NewIÁ32
(
ùx
, 
ã
->
æags
 & 
BF_RND_MASK
);

48720 
FE_SUBNORMAL
:

48721  
	`JS_NewBoŞ
(
ùx
, (
ã
->
æags
 & 
BF_FLAG_SUBNORMAL
) != 0);

48723  
	`JS_NewBoŞ
(
ùx
, (
ã
->
¡©us
 & 
magic
) != 0);

48725 
	}
}

48727 
JSV®ue
 
	$js_æßt_’v_´Ùo_£t_¡©us
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
, JSV®ueCÚ¡ 
v®
, 
magic
)

48729 
JSFlßtEnv
 *
ã
;

48730 
b
;

48731 
št64_t
 
´ec
;

48733 
ã
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_FLOAT_ENV
);

48734 ià(!
ã
)

48735  
JS_EXCEPTION
;

48736 
magic
) {

48737 
FE_PREC
:

48738 ià(
	`JS_ToIÁ64S©
(
ùx
, &
´ec
, 
v®
))

48739  
JS_EXCEPTION
;

48740 ià(
´ec
 < 
BF_PREC_MIN
 ||…»ø> 
BF_PREC_MAX
)

48741  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid…recision");

48742 
ã
->
´ec
 =…rec;

48744 
FE_EXP
:

48745 ià(
	`JS_ToIÁ32S©
(
ùx
, &
b
, 
v®
))

48746  
JS_EXCEPTION
;

48747 ià(
b
 < 
BF_EXP_BITS_MIN
 || b > 
BF_EXP_BITS_MAX
)

48748  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber ofƒxponent bits");

48749 
ã
->
æags
 = (ã->æag & ~(
BF_EXP_BITS_MASK
 << 
BF_EXP_BITS_SHIFT
)) |

48750 
	`bf_£t_exp_b™s
(
b
);

48752 
FE_RNDMODE
:

48753 
b
 = 
	`bigæßt_g‘_ºd_mode
(
ùx
, 
v®
);

48754 ià(
b
 < 0)

48755  
JS_EXCEPTION
;

48756 
ã
->
æags
 = (ã->æag & ~
BF_RND_MASK
è| 
b
;

48758 
FE_SUBNORMAL
:

48759 
b
 = 
	`JS_ToBoŞ
(
ùx
, 
v®
);

48760 
ã
->
æags
 = (ã->æag & ~
BF_FLAG_SUBNORMAL
è| (
b
 ? BF_FLAG_SUBNORMAL: 0);

48763 
b
 = 
	`JS_ToBoŞ
(
ùx
, 
v®
);

48764 
ã
->
¡©us
 = (ã->¡©u & ~
magic
è& ((-
b
) & magic);

48767  
JS_UNDEFINED
;

48768 
	}
}

48770 
JSV®ue
 
	$js_æßt_’v_ş—rStus
(
JSCÚ‹xt
 *
ùx
,

48771 
JSV®ueCÚ¡
 
this_v®
,

48772 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48774 
JSFlßtEnv
 *
ã
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
JS_CLASS_FLOAT_ENV
);

48775 ià(!
ã
)

48776  
JS_EXCEPTION
;

48777 
ã
->
¡©us
 = 0;

48778  
JS_UNDEFINED
;

48779 
	}
}

48781 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_æßt_’v_funcs
[] = {

48782 
JS_CGETSET_DEF
("´ec", 
js_æßt_’v_g‘_´ec
, 
NULL
 ),

48783 
JS_CGETSET_DEF
("expB™s", 
js_æßt_’v_g‘_expB™s
, 
NULL
 ),

48784 
JS_CFUNC_DEF
("£tP»c", 2, 
js_æßt_’v_£tP»c
 ),

48785 
JS_PROP_INT32_DEF
("RNDN", 
BF_RNDN
, 0 ),

48786 
JS_PROP_INT32_DEF
("RNDZ", 
BF_RNDZ
, 0 ),

48787 
JS_PROP_INT32_DEF
("RNDU", 
BF_RNDU
, 0 ),

48788 
JS_PROP_INT32_DEF
("RNDD", 
BF_RNDD
, 0 ),

48789 
JS_PROP_INT32_DEF
("RNDNA", 
BF_RNDNA
, 0 ),

48790 
JS_PROP_INT32_DEF
("RNDA", 
BF_RNDA
, 0 ),

48791 
JS_PROP_INT32_DEF
("RNDF", 
BF_RNDF
, 0 ),

48792 
JS_PROP_INT32_DEF
("´ecMš", 
BF_PREC_MIN
, 0 ),

48793 
JS_PROP_INT64_DEF
("´ecMax", 
BF_PREC_MAX
, 0 ),

48794 
JS_PROP_INT32_DEF
("expB™sMš", 
BF_EXP_BITS_MIN
, 0 ),

48795 
JS_PROP_INT32_DEF
("expB™sMax", 
BF_EXP_BITS_MAX
, 0 ),

48798 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_æßt_’v_´Ùo_funcs
[] = {

48799 
JS_CGETSET_MAGIC_DEF
("´ec", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48800 
js_æßt_’v_´Ùo_£t_¡©us
, 
FE_PREC
 ),

48801 
JS_CGETSET_MAGIC_DEF
("expB™s", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48802 
js_æßt_’v_´Ùo_£t_¡©us
, 
FE_EXP
 ),

48803 
JS_CGETSET_MAGIC_DEF
("ºdMode", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48804 
js_æßt_’v_´Ùo_£t_¡©us
, 
FE_RNDMODE
 ),

48805 
JS_CGETSET_MAGIC_DEF
("subnÜm®", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48806 
js_æßt_’v_´Ùo_£t_¡©us
, 
FE_SUBNORMAL
 ),

48807 
JS_CGETSET_MAGIC_DEF
("šv®idO³¿tiÚ", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48808 
js_æßt_’v_´Ùo_£t_¡©us
, 
BF_ST_INVALID_OP
 ),

48809 
JS_CGETSET_MAGIC_DEF
("divideByZ”o", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48810 
js_æßt_’v_´Ùo_£t_¡©us
, 
BF_ST_DIVIDE_ZERO
 ),

48811 
JS_CGETSET_MAGIC_DEF
("ov”æow", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48812 
js_æßt_’v_´Ùo_£t_¡©us
, 
BF_ST_OVERFLOW
 ),

48813 
JS_CGETSET_MAGIC_DEF
("und”æow", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48814 
js_æßt_’v_´Ùo_£t_¡©us
, 
BF_ST_UNDERFLOW
 ),

48815 
JS_CGETSET_MAGIC_DEF
("šexaù", 
js_æßt_’v_´Ùo_g‘_¡©us
,

48816 
js_æßt_’v_´Ùo_£t_¡©us
, 
BF_ST_INEXACT
 ),

48817 
JS_CFUNC_DEF
("ş—rStus", 0, 
js_æßt_’v_ş—rStus
 ),

48820 
	$JS_AddIÁršsicBigFlßt
(
JSCÚ‹xt
 *
ùx
)

48822 
JSRuÁime
 *
¹
 = 
ùx
->rt;

48823 
JSV®ue
 
obj1
;

48824 
JSV®ueCÚ¡
 
obj2
;

48826 
¹
->
bigæßt_İs
.
to_¡ršg
 = 
js_bigæßt_to_¡ršg
;

48827 
¹
->
bigæßt_İs
.
äom_¡ršg
 = 
js_¡ršg_to_bigæßt
;

48828 
¹
->
bigæßt_İs
.
uÇry_¬™h
 = 
js_uÇry_¬™h_bigæßt
;

48829 
¹
->
bigæßt_İs
.
bš¬y_¬™h
 = 
js_bš¬y_¬™h_bigæßt
;

48830 
¹
->
bigæßt_İs
.
com·»
 = 
js_com·»_bigæßt
;

48831 
¹
->
bigæßt_İs
.
mul_pow10_to_æßt64
 = 
js_mul_pow10_to_æßt64
;

48832 
¹
->
bigæßt_İs
.
mul_pow10
 = 
js_mul_pow10
;

48834 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_FLOAT
] = 
	`JS_NewObjeù
(ctx);

48835 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_FLOAT
],

48836 
js_bigæßt_´Ùo_funcs
,

48837 
	`couÁof
(
js_bigæßt_´Ùo_funcs
));

48838 
obj1
 = 
	`JS_NewCFunùiÚ
(
ùx
, 
js_bigæßt_cÚ¡ruùÜ
, "BigFloat", 1);

48839 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
obj1
, "BigFloat",

48840 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_FLOAT
]);

48841 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj1
, 
js_bigæßt_funcs
,

48842 
	`couÁof
(
js_bigæßt_funcs
));

48844 
ùx
->
şass_´Ùo
[
JS_CLASS_FLOAT_ENV
] = 
	`JS_NewObjeù
(ctx);

48845 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_FLOAT_ENV
],

48846 
js_æßt_’v_´Ùo_funcs
,

48847 
	`couÁof
(
js_æßt_’v_´Ùo_funcs
));

48848 
obj2
 = 
	`JS_NewGlob®CCÚ¡ruùÜOÆy
(
ùx
, "BigFloatEnv",

48849 
js_æßt_’v_cÚ¡ruùÜ
, 1,

48850 
ùx
->
şass_´Ùo
[
JS_CLASS_FLOAT_ENV
]);

48851 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj2
, 
js_æßt_’v_funcs
,

48852 
	`couÁof
(
js_æßt_’v_funcs
));

48853 
	}
}

48857 
JSV®ue
 
	$JS_ToBigDecim®F»e
(
JSCÚ‹xt
 *
ùx
, 
JSV®ue
 
v®
,

48858 
BOOL
 
®low_nuÎ_Ü_undefšed
)

48860 
»do
:

48861 
	`JS_VALUE_GET_NORM_TAG
(
v®
)) {

48862 
JS_TAG_BIG_DECIMAL
:

48864 
JS_TAG_NULL
:

48865 ià(!
®low_nuÎ_Ü_undefšed
)

48866 
ç
;

48868 
JS_TAG_BOOL
:

48869 
JS_TAG_INT
:

48871 
bfdec_t
 *
r
;

48872 
št32_t
 
v
 = 
	`JS_VALUE_GET_INT
(
v®
);

48874 
v®
 = 
	`JS_NewBigDecim®
(
ùx
);

48875 ià(
	`JS_IsExû±iÚ
(
v®
))

48877 
r
 = 
	`JS_G‘BigDecim®
(
v®
);

48878 ià(
	`bfdec_£t_si
(
r
, 
v
)) {

48879 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48880 
v®
 = 
JS_EXCEPTION
;

48885 
JS_TAG_FLOAT64
:

48886 
JS_TAG_BIG_INT
:

48887 
JS_TAG_BIG_FLOAT
:

48888 
v®
 = 
	`JS_ToSŒšgF»e
(
ùx
, val);

48889 ià(
	`JS_IsExû±iÚ
(
v®
))

48891 
»do
;

48892 
JS_TAG_STRING
:

48894 cÚ¡ *
¡r
, *
p
;

48895 
size_t
 
Ën
;

48896 
”r
;

48898 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
Ën
, 
v®
);

48899 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48900 ià(!
¡r
)

48901  
JS_EXCEPTION
;

48902 
p
 = 
¡r
;

48903 
p
 +ğ
	`sk_¥aûs
(p);

48904 ià((
p
 - 
¡r
è=ğ
Ën
) {

48905 
bfdec_t
 *
r
;

48906 
v®
 = 
	`JS_NewBigDecim®
(
ùx
);

48907 ià(
	`JS_IsExû±iÚ
(
v®
))

48909 
r
 = 
	`JS_G‘BigDecim®
(
v®
);

48910 
	`bfdec_£t_z”o
(
r
, 0);

48911 
”r
 = 0;

48913 
v®
 = 
	`js_©of
(
ùx
, 
p
, &p, 0, 
ATOD_TYPE_BIG_DECIMAL
);

48914 ià(
	`JS_IsExû±iÚ
(
v®
)) {

48915 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

48916  
JS_EXCEPTION
;

48918 
p
 +ğ
	`sk_¥aûs
(p);

48919 
”r
 = ((
p
 - 
¡r
è!ğ
Ën
);

48921 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

48922 ià(
”r
) {

48923 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48924  
	`JS_ThrowSyÁaxE¼Ü
(
ùx
, "invalid bigdecimal†iteral");

48928 
JS_TAG_OBJECT
:

48929 
v®
 = 
	`JS_ToPrim™iveF»e
(
ùx
, v®, 
HINT_NUMBER
);

48930 ià(
	`JS_IsExû±iÚ
(
v®
))

48932 
»do
;

48933 
JS_TAG_UNDEFINED
:

48935 
bfdec_t
 *
r
;

48936 ià(!
®low_nuÎ_Ü_undefšed
)

48937 
ç
;

48938 
v®
 = 
	`JS_NewBigDecim®
(
ùx
);

48939 ià(
	`JS_IsExû±iÚ
(
v®
))

48941 
r
 = 
	`JS_G‘BigDecim®
(
v®
);

48942 
	`bfdec_£t_Çn
(
r
);

48946 
ç
:

48947 
	`JS_F»eV®ue
(
ùx
, 
v®
);

48948  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot converto bigdecimal");

48950  
v®
;

48951 
	}
}

48953 
JSV®ue
 
	$js_bigdecim®_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

48954 
JSV®ueCÚ¡
 
this_v®
,

48955 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48957 
JSV®ue
 
v®
;

48958 ià(
¬gc
 == 0) {

48959 
bfdec_t
 *
r
;

48960 
v®
 = 
	`JS_NewBigDecim®
(
ùx
);

48961 ià(
	`JS_IsExû±iÚ
(
v®
))

48962  
v®
;

48963 
r
 = 
	`JS_G‘BigDecim®
(
v®
);

48964 
	`bfdec_£t_z”o
(
r
, 0);

48966 
v®
 = 
	`JS_ToBigDecim®F»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0]), 
FALSE
);

48968  
v®
;

48969 
	}
}

48971 
JSV®ue
 
	$js_thisBigDecim®V®ue
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

48973 ià(
	`JS_IsBigDecim®
(
this_v®
))

48974  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

48976 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è=ğ
JS_TAG_OBJECT
) {

48977 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

48978 ià(
p
->
şass_id
 =ğ
JS_CLASS_BIG_DECIMAL
) {

48979 ià(
	`JS_IsBigDecim®
(
p
->
u
.
objeù_d©a
))

48980  
	`JS_DupV®ue
(
ùx
, 
p
->
u
.
objeù_d©a
);

48983  
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ bigdecimal");

48984 
	}
}

48986 
JSV®ue
 
	$js_bigdecim®_toSŒšg
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48987 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

48989 
JSV®ue
 
v®
;

48991 
v®
 = 
	`js_thisBigDecim®V®ue
(
ùx
, 
this_v®
);

48992 ià(
	`JS_IsExû±iÚ
(
v®
))

48993  
v®
;

48994  
	`JS_ToSŒšgF»e
(
ùx
, 
v®
);

48995 
	}
}

48997 
JSV®ue
 
	$js_bigdecim®_v®ueOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

48998 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49000  
	`js_thisBigDecim®V®ue
(
ùx
, 
this_v®
);

49001 
	}
}

49003 
	$js_bigdecim®_g‘_ºd_mode
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

49005 cÚ¡ *
¡r
;

49006 
size_t
 
size
;

49007 
ºd_mode
;

49009 
¡r
 = 
	`JS_ToCSŒšgL’
(
ùx
, &
size
, 
obj
);

49010 ià(!
¡r
)

49012 ià(
	`¡¾’
(
¡r
è!ğ
size
)

49013 
šv®id_roundšg_mode
;

49014 ià(!
	`¡rcmp
(
¡r
, "floor")) {

49015 
ºd_mode
 = 
BF_RNDD
;

49016 } ià(!
	`¡rcmp
(
¡r
, "ceiling")) {

49017 
ºd_mode
 = 
BF_RNDU
;

49018 } ià(!
	`¡rcmp
(
¡r
, "down")) {

49019 
ºd_mode
 = 
BF_RNDZ
;

49020 } ià(!
	`¡rcmp
(
¡r
, "up")) {

49021 
ºd_mode
 = 
BF_RNDA
;

49022 } ià(!
	`¡rcmp
(
¡r
, "half-even")) {

49023 
ºd_mode
 = 
BF_RNDN
;

49024 } ià(!
	`¡rcmp
(
¡r
, "half-up")) {

49025 
ºd_mode
 = 
BF_RNDNA
;

49027 
šv®id_roundšg_mode
:

49028 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

49029 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid„ounding mode");

49032 
	`JS_F»eCSŒšg
(
ùx
, 
¡r
);

49033  
ºd_mode
;

49034 
	}
}

49037 
št64_t
 
	m´ec
;

49038 
bf_æags_t
 
	mæags
;

49039 } 
	tBigDecim®Env
;

49041 
	$js_bigdecim®_g‘_’v
(
JSCÚ‹xt
 *
ùx
, 
BigDecim®Env
 *
ã
,

49042 
JSV®ueCÚ¡
 
obj
)

49044 
JSV®ue
 
´İ
;

49045 
št64_t
 
v®
;

49046 
BOOL
 
has_´ec
;

49047 
ºd_mode
;

49049 ià(!
	`JS_IsObjeù
(
obj
)) {

49050 
	`JS_ThrowTy³E¼ÜNÙAnObjeù
(
ùx
);

49053 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_roundšgMode
);

49054 ià(
	`JS_IsExû±iÚ
(
´İ
))

49056 
ºd_mode
 = 
	`js_bigdecim®_g‘_ºd_mode
(
ùx
, 
´İ
);

49057 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

49058 ià(
ºd_mode
 < 0)

49060 
ã
->
æags
 = 
ºd_mode
;

49062 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_maximumSignifiÿÁDig™s
);

49063 ià(
	`JS_IsExû±iÚ
(
´İ
))

49065 
has_´ec
 = 
FALSE
;

49066 ià(!
	`JS_IsUndefšed
(
´İ
)) {

49067 ià(
	`JS_ToIÁ64S©F»e
(
ùx
, &
v®
, 
´İ
))

49069 ià(
v®
 < 1 || v® > 
BF_PREC_MAX
)

49070 
šv®id_´ecisiÚ
;

49071 
ã
->
´ec
 = 
v®
;

49072 
has_´ec
 = 
TRUE
;

49075 
´İ
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_maximumF¿ùiÚDig™s
);

49076 ià(
	`JS_IsExû±iÚ
(
´İ
))

49078 ià(!
	`JS_IsUndefšed
(
´İ
)) {

49079 ià(
has_´ec
) {

49080 
	`JS_F»eV®ue
(
ùx
, 
´İ
);

49081 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot…rovide both maximumSignificantDigits‡nd maximumFractionDigits");

49084 ià(
	`JS_ToIÁ64S©F»e
(
ùx
, &
v®
, 
´İ
))

49086 ià(
v®
 < 0 || v® > 
BF_PREC_MAX
) {

49087 
šv®id_´ecisiÚ
:

49088 
	`JS_ThrowTy³E¼Ü
(
ùx
, "invalid…recision");

49091 
ã
->
´ec
 = 
v®
;

49092 
ã
->
æags
 |ğ
BF_FLAG_RADPNT_PREC
;

49093 
has_´ec
 = 
TRUE
;

49095 ià(!
has_´ec
) {

49096 
	`JS_ThrowTy³E¼Ü
(
ùx
, "precision must be…resent");

49100 
	}
}

49103 
JSV®ue
 
	$js_bigdecim®_fİ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

49104 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

49106 
bfdec_t
 *
a
, *
b
, 
r_s
, *
r
 = &r_s;

49107 
JSV®ue
 
İ1
, 
İ2
, 
»s
;

49108 
BigDecim®Env
 
ã_s
, *
ã
 = &fe_s;

49109 
İ_couÁ
, 
»t
;

49111 ià(
magic
 =ğ
MATH_OP_SQRT
 ||

49112 
magic
 =ğ
MATH_OP_ROUND
)

49113 
İ_couÁ
 = 1;

49115 
İ_couÁ
 = 2;

49117 
İ1
 = 
	`JS_ToNum”ic
(
ùx
, 
¬gv
[0]);

49118 ià(
	`JS_IsExû±iÚ
(
İ1
))

49119  
İ1
;

49120 
a
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ1
);

49121 ià(!
a
) {

49122 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

49123  
JS_EXCEPTION
;

49125 ià(
İ_couÁ
 >= 2) {

49126 
İ2
 = 
	`JS_ToNum”ic
(
ùx
, 
¬gv
[1]);

49127 ià(
	`JS_IsExû±iÚ
(
İ2
)) {

49128 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

49129  
İ2
;

49131 
b
 = 
	`JS_ToBigDecim®
(
ùx
, 
İ2
);

49132 ià(!
b
)

49133 
ç
;

49135 
İ2
 = 
JS_UNDEFINED
;

49136 
b
 = 
NULL
;

49138 
ã
->
æags
 = 
BF_RNDZ
;

49139 
ã
->
´ec
 = 
BF_PREC_INF
;

49140 ià(
İ_couÁ
 < 
¬gc
) {

49141 ià(
	`js_bigdecim®_g‘_’v
(
ùx
, 
ã
, 
¬gv
[
İ_couÁ
]))

49142 
ç
;

49145 
»s
 = 
	`JS_NewBigDecim®
(
ùx
);

49146 ià(
	`JS_IsExû±iÚ
(
»s
)) {

49147 
ç
:

49148 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

49149 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

49150  
JS_EXCEPTION
;

49152 
r
 = 
	`JS_G‘BigDecim®
(
»s
);

49153 
magic
) {

49154 
MATH_OP_ADD
:

49155 
»t
 = 
	`bfdec_add
(
r
, 
a
, 
b
, 
ã
->
´ec
, fe->
æags
);

49157 
MATH_OP_SUB
:

49158 
»t
 = 
	`bfdec_sub
(
r
, 
a
, 
b
, 
ã
->
´ec
, fe->
æags
);

49160 
MATH_OP_MUL
:

49161 
»t
 = 
	`bfdec_mul
(
r
, 
a
, 
b
, 
ã
->
´ec
, fe->
æags
);

49163 
MATH_OP_DIV
:

49164 
»t
 = 
	`bfdec_div
(
r
, 
a
, 
b
, 
ã
->
´ec
, fe->
æags
);

49166 
MATH_OP_FMOD
:

49167 
»t
 = 
	`bfdec_»m
(
r
, 
a
, 
b
, 
ã
->
´ec
, fe->
æags
, 
BF_RNDZ
);

49169 
MATH_OP_SQRT
:

49170 
»t
 = 
	`bfdec_sq¹
(
r
, 
a
, 
ã
->
´ec
, fe->
æags
);

49172 
MATH_OP_ROUND
:

49173 
»t
 = 
	`bfdec_£t
(
r
, 
a
);

49174 ià(!(
»t
 & 
BF_ST_MEM_ERROR
))

49175 
»t
 = 
	`bfdec_round
(
r
, 
ã
->
´ec
, fe->
æags
);

49178 
	`abÜt
();

49180 
	`JS_F»eV®ue
(
ùx
, 
İ1
);

49181 
	`JS_F»eV®ue
(
ùx
, 
İ2
);

49182 
»t
 &ğ
BF_ST_MEM_ERROR
 | 
BF_ST_DIVIDE_ZERO
 | 
BF_ST_INVALID_OP
 |

49183 
BF_ST_OVERFLOW
;

49184 ià(
»t
 != 0) {

49185 
	`JS_F»eV®ue
(
ùx
, 
»s
);

49186  
	`throw_bf_exû±iÚ
(
ùx
, 
»t
);

49188  
»s
;

49190 
	}
}

49192 
JSV®ue
 
	$js_bigdecim®_toFixed
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

49193 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49195 
JSV®ue
 
v®
, 
»t
;

49196 
št64_t
 
f
;

49197 
ºd_mode
;

49199 
v®
 = 
	`js_thisBigDecim®V®ue
(
ùx
, 
this_v®
);

49200 ià(
	`JS_IsExû±iÚ
(
v®
))

49201  
v®
;

49202 ià(
	`JS_ToIÁ64S©
(
ùx
, &
f
, 
¬gv
[0]))

49203 
ç
;

49204 ià(
f
 < 0 || f > 
BF_PREC_MAX
) {

49205 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

49206 
ç
;

49208 
ºd_mode
 = 
BF_RNDNA
;

49209 ià(
¬gc
 > 1) {

49210 
ºd_mode
 = 
	`js_bigdecim®_g‘_ºd_mode
(
ùx
, 
¬gv
[1]);

49211 ià(
ºd_mode
 < 0)

49212 
ç
;

49214 
»t
 = 
	`js_bigdecim®_to_¡ršg1
(
ùx
, 
v®
, 
f
, 
ºd_mode
 | 
BF_FTOA_FORMAT_FRAC
);

49215 
	`JS_F»eV®ue
(
ùx
, 
v®
);

49216  
»t
;

49217 
ç
:

49218 
	`JS_F»eV®ue
(
ùx
, 
v®
);

49219  
JS_EXCEPTION
;

49220 
	}
}

49222 
JSV®ue
 
	$js_bigdecim®_toExpÚ’tŸl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

49223 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49225 
JSV®ue
 
v®
, 
»t
;

49226 
št64_t
 
f
;

49227 
ºd_mode
;

49229 
v®
 = 
	`js_thisBigDecim®V®ue
(
ùx
, 
this_v®
);

49230 ià(
	`JS_IsExû±iÚ
(
v®
))

49231  
v®
;

49232 ià(
	`JS_ToIÁ64S©
(
ùx
, &
f
, 
¬gv
[0]))

49233 
ç
;

49234 ià(
	`JS_IsUndefšed
(
¬gv
[0])) {

49235 
»t
 = 
	`js_bigdecim®_to_¡ršg1
(
ùx
, 
v®
, 0,

49236 
BF_RNDN
 | 
BF_FTOA_FORMAT_FREE_MIN
 | 
BF_FTOA_FORCE_EXP
);

49238 ià(
f
 < 0 || f > 
BF_PREC_MAX
) {

49239 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

49240 
ç
;

49242 
ºd_mode
 = 
BF_RNDNA
;

49243 ià(
¬gc
 > 1) {

49244 
ºd_mode
 = 
	`js_bigdecim®_g‘_ºd_mode
(
ùx
, 
¬gv
[1]);

49245 ià(
ºd_mode
 < 0)

49246 
ç
;

49248 
»t
 = 
	`js_bigdecim®_to_¡ršg1
(
ùx
, 
v®
, 
f
 + 1,

49249 
ºd_mode
 | 
BF_FTOA_FORMAT_FIXED
 | 
BF_FTOA_FORCE_EXP
);

49251 
	`JS_F»eV®ue
(
ùx
, 
v®
);

49252  
»t
;

49253 
ç
:

49254 
	`JS_F»eV®ue
(
ùx
, 
v®
);

49255  
JS_EXCEPTION
;

49256 
	}
}

49258 
JSV®ue
 
	$js_bigdecim®_toP»cisiÚ
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

49259 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49261 
JSV®ue
 
v®
, 
»t
;

49262 
št64_t
 
p
;

49263 
ºd_mode
;

49265 
v®
 = 
	`js_thisBigDecim®V®ue
(
ùx
, 
this_v®
);

49266 ià(
	`JS_IsExû±iÚ
(
v®
))

49267  
v®
;

49268 ià(
	`JS_IsUndefšed
(
¬gv
[0])) {

49269  
	`JS_ToSŒšgF»e
(
ùx
, 
v®
);

49271 ià(
	`JS_ToIÁ64S©
(
ùx
, &
p
, 
¬gv
[0]))

49272 
ç
;

49273 ià(
p
 < 1 ||… > 
BF_PREC_MAX
) {

49274 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‚umber of digits");

49275 
ç
;

49277 
ºd_mode
 = 
BF_RNDNA
;

49278 ià(
¬gc
 > 1) {

49279 
ºd_mode
 = 
	`js_bigdecim®_g‘_ºd_mode
(
ùx
, 
¬gv
[1]);

49280 ià(
ºd_mode
 < 0)

49281 
ç
;

49283 
»t
 = 
	`js_bigdecim®_to_¡ršg1
(
ùx
, 
v®
, 
p
,

49284 
ºd_mode
 | 
BF_FTOA_FORMAT_FIXED
);

49285 
	`JS_F»eV®ue
(
ùx
, 
v®
);

49286  
»t
;

49287 
ç
:

49288 
	`JS_F»eV®ue
(
ùx
, 
v®
);

49289  
JS_EXCEPTION
;

49290 
	}
}

49292 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_bigdecim®_´Ùo_funcs
[] = {

49293 
JS_CFUNC_DEF
("toSŒšg", 0, 
js_bigdecim®_toSŒšg
 ),

49294 
JS_CFUNC_DEF
("v®ueOf", 0, 
js_bigdecim®_v®ueOf
 ),

49295 
JS_CFUNC_DEF
("toP»cisiÚ", 1, 
js_bigdecim®_toP»cisiÚ
 ),

49296 
JS_CFUNC_DEF
("toFixed", 1, 
js_bigdecim®_toFixed
 ),

49297 
JS_CFUNC_DEF
("toExpÚ’tŸl", 1, 
js_bigdecim®_toExpÚ’tŸl
 ),

49300 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_bigdecim®_funcs
[] = {

49301 
JS_CFUNC_MAGIC_DEF
("add", 2, 
js_bigdecim®_fİ
, 
MATH_OP_ADD
 ),

49302 
JS_CFUNC_MAGIC_DEF
("sub", 2, 
js_bigdecim®_fİ
, 
MATH_OP_SUB
 ),

49303 
JS_CFUNC_MAGIC_DEF
("mul", 2, 
js_bigdecim®_fİ
, 
MATH_OP_MUL
 ),

49304 
JS_CFUNC_MAGIC_DEF
("div", 2, 
js_bigdecim®_fİ
, 
MATH_OP_DIV
 ),

49305 
JS_CFUNC_MAGIC_DEF
("mod", 2, 
js_bigdecim®_fİ
, 
MATH_OP_FMOD
 ),

49306 
JS_CFUNC_MAGIC_DEF
("round", 1, 
js_bigdecim®_fİ
, 
MATH_OP_ROUND
 ),

49307 
JS_CFUNC_MAGIC_DEF
("sq¹", 1, 
js_bigdecim®_fİ
, 
MATH_OP_SQRT
 ),

49310 
	$JS_AddIÁršsicBigDecim®
(
JSCÚ‹xt
 *
ùx
)

49312 
JSRuÁime
 *
¹
 = 
ùx
->rt;

49313 
JSV®ue
 
obj1
;

49315 
¹
->
bigdecim®_İs
.
to_¡ršg
 = 
js_bigdecim®_to_¡ršg
;

49316 
¹
->
bigdecim®_İs
.
äom_¡ršg
 = 
js_¡ršg_to_bigdecim®
;

49317 
¹
->
bigdecim®_İs
.
uÇry_¬™h
 = 
js_uÇry_¬™h_bigdecim®
;

49318 
¹
->
bigdecim®_İs
.
bš¬y_¬™h
 = 
js_bš¬y_¬™h_bigdecim®
;

49319 
¹
->
bigdecim®_İs
.
com·»
 = 
js_com·»_bigdecim®
;

49321 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_DECIMAL
] = 
	`JS_NewObjeù
(ctx);

49322 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BIG_DECIMAL
],

49323 
js_bigdecim®_´Ùo_funcs
,

49324 
	`couÁof
(
js_bigdecim®_´Ùo_funcs
));

49325 
obj1
 = 
	`JS_NewCFunùiÚ
(
ùx
, 
js_bigdecim®_cÚ¡ruùÜ
, "BigDecimal", 1);

49326 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
obj1
, "BigDecimal",

49327 
ùx
->
şass_´Ùo
[
JS_CLASS_BIG_DECIMAL
]);

49328 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj1
, 
js_bigdecim®_funcs
,

49329 
	`couÁof
(
js_bigdecim®_funcs
));

49330 
	}
}

49332 
	$JS_EÇbËBignumExt
(
JSCÚ‹xt
 *
ùx
, 
BOOL
 
’abË
)

49334 
ùx
->
bignum_ext
 = 
’abË
;

49335 
	}
}

49339 cÚ¡ * cÚ¡ 
	gÇtive_”rÜ_Çme
[
JS_NATIVE_ERROR_COUNT
] = {

49347 
	$JS_AddIÁršsicBasicObjeùs
(
JSCÚ‹xt
 *
ùx
)

49349 
JSV®ue
 
´Ùo
;

49350 
i
;

49352 
ùx
->
şass_´Ùo
[
JS_CLASS_OBJECT
] = 
	`JS_NewObjeùPrÙo
(ùx, 
JS_NULL
);

49353 
ùx
->
funùiÚ_´Ùo
 = 
	`JS_NewCFunùiÚ3
(ùx, 
js_funùiÚ_´Ùo
, "", 0,

49354 
JS_CFUNC_g’”ic
, 0,

49355 
ùx
->
şass_´Ùo
[
JS_CLASS_OBJECT
]);

49356 
ùx
->
şass_´Ùo
[
JS_CLASS_BYTECODE_FUNCTION
] = 
	`JS_DupV®ue
(ùx, ctx->
funùiÚ_´Ùo
);

49357 
ùx
->
şass_´Ùo
[
JS_CLASS_ERROR
] = 
	`JS_NewObjeù
(ctx);

49361 
	`JS_DefšePrİ”tyV®ue
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ERROR
], 
JS_ATOM_Çme
,

49362 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_E¼Ü
),

49363 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

49364 
	`JS_DefšePrİ”tyV®ue
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ERROR
], 
JS_ATOM_mes§ge
,

49365 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
),

49366 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

49368 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ERROR
],

49369 
js_”rÜ_´Ùo_funcs
,

49370 
	`couÁof
(
js_”rÜ_´Ùo_funcs
));

49372 
i
 = 0; i < 
JS_NATIVE_ERROR_COUNT
; i++) {

49373 
´Ùo
 = 
	`JS_NewObjeùPrÙo
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ERROR
]);

49374 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
´Ùo
, 
JS_ATOM_Çme
,

49375 
	`JS_NewAtomSŒšg
(
ùx
, 
Çtive_”rÜ_Çme
[
i
]),

49376 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

49377 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
´Ùo
, 
JS_ATOM_mes§ge
,

49378 
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_em±y_¡ršg
),

49379 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

49380 
ùx
->
Çtive_”rÜ_´Ùo
[
i
] = 
´Ùo
;

49382 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
Çtive_”rÜ_´Ùo
[
JS_AGGREGATE_ERROR
],

49383 
js_agg»g©e_”rÜ_´Ùo_funcs
,

49384 
	`couÁof
(
js_agg»g©e_”rÜ_´Ùo_funcs
));

49387 
ùx
->
şass_´Ùo
[
JS_CLASS_ARRAY
] =

49388 
	`JS_NewObjeùPrÙoCÏss
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_OBJECT
],

49389 
JS_CLASS_ARRAY
);

49391 
ùx
->
¬¿y_sh­e
 = 
	`js_Ãw_sh­e2
(ùx, 
	`g‘_´Ùo_obj
(ùx->
şass_´Ùo
[
JS_CLASS_ARRAY
]),

49392 
JS_PROP_INITIAL_HASH_SIZE
, 1);

49393 
	`add_sh­e_´İ”ty
(
ùx
, &ùx->
¬¿y_sh­e
, 
NULL
,

49394 
JS_ATOM_Ëngth
, 
JS_PROP_WRITABLE
 | 
JS_PROP_LENGTH
);

49402 
	}
}

49404 
	$JS_AddIÁršsicBa£Objeùs
(
JSCÚ‹xt
 *
ùx
)

49406 
i
;

49407 
JSV®ueCÚ¡
 
obj
, 
numb”_obj
;

49408 
JSV®ue
 
obj1
;

49410 
ùx
->
throw_ty³_”rÜ
 = 
	`JS_NewCFunùiÚ
(ùx, 
js_throw_ty³_”rÜ
, 
NULL
, 0);

49413 
obj1
 = 
	`JS_NewCFunùiÚ
(
ùx
, 
js_funùiÚ_´Ùo_ÿÎ”
, 
NULL
, 0);

49414 
	`JS_DefšePrİ”ty
(
ùx
, ctx->
funùiÚ_´Ùo
, 
JS_ATOM_ÿÎ”
, 
JS_UNDEFINED
,

49415 
obj1
, 
ùx
->
throw_ty³_”rÜ
,

49416 
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
 |

49417 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_CONFIGURABLE
);

49418 
	`JS_DefšePrİ”ty
(
ùx
, ctx->
funùiÚ_´Ùo
, 
JS_ATOM_¬gum’ts
, 
JS_UNDEFINED
,

49419 
obj1
, 
ùx
->
throw_ty³_”rÜ
,

49420 
JS_PROP_HAS_GET
 | 
JS_PROP_HAS_SET
 |

49421 
JS_PROP_HAS_CONFIGURABLE
 | 
JS_PROP_CONFIGURABLE
);

49422 
	`JS_F»eV®ue
(
ùx
, 
obj1
);

49423 
	`JS_F»eV®ue
(
ùx
, 
	`js_objeù_£®
(ùx, 
JS_UNDEFINED
, 1, (
JSV®ueCÚ¡
 *)&ùx->
throw_ty³_”rÜ
, 1));

49425 
ùx
->
glob®_obj
 = 
	`JS_NewObjeù
(ctx);

49426 
ùx
->
glob®_v¬_obj
 = 
	`JS_NewObjeùPrÙo
(ùx, 
JS_NULL
);

49429 
obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "Objeù", 
js_objeù_cÚ¡ruùÜ
, 1,

49430 
ùx
->
şass_´Ùo
[
JS_CLASS_OBJECT
]);

49431 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
, 
js_objeù_funcs
, 
	`couÁof
(js_object_funcs));

49432 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_OBJECT
],

49433 
js_objeù_´Ùo_funcs
, 
	`couÁof
(js_object_proto_funcs));

49436 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
funùiÚ_´Ùo
, 
js_funùiÚ_´Ùo_funcs
, 
	`couÁof
(js_function_proto_funcs));

49437 
ùx
->
funùiÚ_ùÜ
 = 
	`JS_NewCFunùiÚMagic
(ùx, 
js_funùiÚ_cÚ¡ruùÜ
,

49438 "FunùiÚ", 1, 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
,

49439 
JS_FUNC_NORMAL
);

49440 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
	`JS_DupV®ue
(ùx, ctx->
funùiÚ_ùÜ
), "Function",

49441 
ùx
->
funùiÚ_´Ùo
);

49444 
obj1
 = 
	`JS_NewCFunùiÚMagic
(
ùx
, 
js_”rÜ_cÚ¡ruùÜ
,

49445 "E¼Ü", 1, 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
, -1);

49446 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
obj1
,

49447 "E¼Ü", 
ùx
->
şass_´Ùo
[
JS_CLASS_ERROR
]);

49449 
i
 = 0; i < 
JS_NATIVE_ERROR_COUNT
; i++) {

49450 
JSV®ue
 
func_obj
;

49451 
n_¬gs
;

49452 
n_¬gs
 = 1 + (
i
 =ğ
JS_AGGREGATE_ERROR
);

49453 
func_obj
 = 
	`JS_NewCFunùiÚ3
(
ùx
, (
JSCFunùiÚ
 *)
js_”rÜ_cÚ¡ruùÜ
,

49454 
Çtive_”rÜ_Çme
[
i
], 
n_¬gs
,

49455 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
, 
i
, 
obj1
);

49456 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
func_obj
, 
Çtive_”rÜ_Çme
[
i
],

49457 
ùx
->
Çtive_”rÜ_´Ùo
[
i
]);

49461 
ùx
->
™”©Ü_´Ùo
 = 
	`JS_NewObjeù
(ctx);

49462 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
™”©Ü_´Ùo
,

49463 
js_™”©Ü_´Ùo_funcs
,

49464 
	`couÁof
(
js_™”©Ü_´Ùo_funcs
));

49467 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY
],

49468 
js_¬¿y_´Ùo_funcs
,

49469 
	`couÁof
(
js_¬¿y_´Ùo_funcs
));

49471 
obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "A¼ay", 
js_¬¿y_cÚ¡ruùÜ
, 1,

49472 
ùx
->
şass_´Ùo
[
JS_CLASS_ARRAY
]);

49473 
ùx
->
¬¿y_ùÜ
 = 
	`JS_DupV®ue
(ùx, 
obj
);

49474 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
, 
js_¬¿y_funcs
,

49475 
	`couÁof
(
js_¬¿y_funcs
));

49480 cÚ¡ 
unscİabËs
[] = "copyWithin" "\0" "entries" "\0" "fill" "\0" "find" "\0"

49482 cÚ¡ *
p
 = 
unscİabËs
;

49483 
obj1
 = 
	`JS_NewObjeùPrÙo
(
ùx
, 
JS_NULL
);

49484 
p
 = 
unscİabËs
; *p;… +ğ
	`¡¾’
(p) + 1) {

49485 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj1
, 
p
, 
JS_TRUE
, 
JS_PROP_C_W_E
);

49487 
	`JS_DefšePrİ”tyV®ue
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY
],

49488 
JS_ATOM_SymbŞ_unscİabËs
, 
obj1
,

49489 
JS_PROP_CONFIGURABLE
);

49493 
ùx
->
¬¿y_´Ùo_v®ues
 =

49494 
	`JS_G‘Prİ”ty
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY
], 
JS_ATOM_v®ues
);

49496 
ùx
->
şass_´Ùo
[
JS_CLASS_ARRAY_ITERATOR
] = 
	`JS_NewObjeùPrÙo
(ùx, ctx->
™”©Ü_´Ùo
);

49497 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY_ITERATOR
],

49498 
js_¬¿y_™”©Ü_´Ùo_funcs
,

49499 
	`couÁof
(
js_¬¿y_™”©Ü_´Ùo_funcs
));

49504 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
glob®_obj
, 
js_glob®_funcs
,

49505 
	`couÁof
(
js_glob®_funcs
));

49508 
ùx
->
şass_´Ùo
[
JS_CLASS_NUMBER
] = 
	`JS_NewObjeùPrÙoCÏss
(ùx, ctx->şass_´Ùo[
JS_CLASS_OBJECT
],

49509 
JS_CLASS_NUMBER
);

49510 
	`JS_S‘ObjeùD©a
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_NUMBER
], 
	`JS_NewIÁ32
(ctx, 0));

49511 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_NUMBER
],

49512 
js_numb”_´Ùo_funcs
,

49513 
	`couÁof
(
js_numb”_´Ùo_funcs
));

49514 
numb”_obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "Numb”", 
js_numb”_cÚ¡ruùÜ
, 1,

49515 
ùx
->
şass_´Ùo
[
JS_CLASS_NUMBER
]);

49516 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
numb”_obj
, 
js_numb”_funcs
, 
	`couÁof
(js_number_funcs));

49519 
ùx
->
şass_´Ùo
[
JS_CLASS_BOOLEAN
] = 
	`JS_NewObjeùPrÙoCÏss
(ùx, ctx->şass_´Ùo[
JS_CLASS_OBJECT
],

49520 
JS_CLASS_BOOLEAN
);

49521 
	`JS_S‘ObjeùD©a
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BOOLEAN
], 
	`JS_NewBoŞ
(ùx, 
FALSE
));

49522 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_BOOLEAN
], 
js_boŞ—n_´Ùo_funcs
,

49523 
	`couÁof
(
js_boŞ—n_´Ùo_funcs
));

49524 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "BoŞ—n", 
js_boŞ—n_cÚ¡ruùÜ
, 1,

49525 
ùx
->
şass_´Ùo
[
JS_CLASS_BOOLEAN
]);

49528 
ùx
->
şass_´Ùo
[
JS_CLASS_STRING
] = 
	`JS_NewObjeùPrÙoCÏss
(ùx, ctx->şass_´Ùo[
JS_CLASS_OBJECT
],

49529 
JS_CLASS_STRING
);

49530 
	`JS_S‘ObjeùD©a
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_STRING
], 
	`JS_AtomToSŒšg
(ùx, 
JS_ATOM_em±y_¡ršg
));

49531 
obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "SŒšg", 
js_¡ršg_cÚ¡ruùÜ
, 1,

49532 
ùx
->
şass_´Ùo
[
JS_CLASS_STRING
]);

49533 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
, 
js_¡ršg_funcs
,

49534 
	`couÁof
(
js_¡ršg_funcs
));

49535 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_STRING
], 
js_¡ršg_´Ùo_funcs
,

49536 
	`couÁof
(
js_¡ršg_´Ùo_funcs
));

49538 
ùx
->
şass_´Ùo
[
JS_CLASS_STRING_ITERATOR
] = 
	`JS_NewObjeùPrÙo
(ùx, ctx->
™”©Ü_´Ùo
);

49539 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_STRING_ITERATOR
],

49540 
js_¡ršg_™”©Ü_´Ùo_funcs
,

49541 
	`couÁof
(
js_¡ršg_™”©Ü_´Ùo_funcs
));

49544 
	`js_¿ndom_š™
(
ùx
);

49545 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
glob®_obj
, 
js_m©h_obj
, 
	`couÁof
(js_math_obj));

49548 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
glob®_obj
, 
js_»æeù_obj
, 
	`couÁof
(js_reflect_obj));

49551 
ùx
->
şass_´Ùo
[
JS_CLASS_SYMBOL
] = 
	`JS_NewObjeù
(ctx);

49552 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_SYMBOL
], 
js_symbŞ_´Ùo_funcs
,

49553 
	`couÁof
(
js_symbŞ_´Ùo_funcs
));

49554 
obj
 = 
	`JS_NewGlob®CCÚ¡ruùÜ
(
ùx
, "SymbŞ", 
js_symbŞ_cÚ¡ruùÜ
, 0,

49555 
ùx
->
şass_´Ùo
[
JS_CLASS_SYMBOL
]);

49556 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
obj
, 
js_symbŞ_funcs
,

49557 
	`couÁof
(
js_symbŞ_funcs
));

49558 
i
 = 
JS_ATOM_SymbŞ_toPrim™ive
; i < 
JS_ATOM_END
; i++) {

49559 
buf
[
ATOM_GET_STR_BUF_SIZE
];

49560 cÚ¡ *
¡r
, *
p
;

49561 
¡r
 = 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf), 
i
);

49563 
p
 = 
	`¡rchr
(
¡r
, '.');

49564 ià(
p
)

49565 
¡r
 = 
p
 + 1;

49566 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
obj
, 
¡r
, 
	`JS_AtomToV®ue
(ùx, 
i
), 0);

49570 
ùx
->
şass_´Ùo
[
JS_CLASS_GENERATOR
] = 
	`JS_NewObjeùPrÙo
(ùx, ctx->
™”©Ü_´Ùo
);

49571 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_GENERATOR
],

49572 
js_g’”©Ü_´Ùo_funcs
,

49573 
	`couÁof
(
js_g’”©Ü_´Ùo_funcs
));

49575 
ùx
->
şass_´Ùo
[
JS_CLASS_GENERATOR_FUNCTION
] = 
	`JS_NewObjeùPrÙo
(ùx, ctx->
funùiÚ_´Ùo
);

49576 
obj1
 = 
	`JS_NewCFunùiÚMagic
(
ùx
, 
js_funùiÚ_cÚ¡ruùÜ
,

49578 
JS_CFUNC_cÚ¡ruùÜ_Ü_func_magic
, 
JS_FUNC_GENERATOR
);

49579 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
,

49580 
ùx
->
şass_´Ùo
[
JS_CLASS_GENERATOR_FUNCTION
],

49581 
js_g’”©Ü_funùiÚ_´Ùo_funcs
,

49582 
	`couÁof
(
js_g’”©Ü_funùiÚ_´Ùo_funcs
));

49583 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_GENERATOR_FUNCTION
],

49584 
ùx
->
şass_´Ùo
[
JS_CLASS_GENERATOR
],

49585 
JS_PROP_CONFIGURABLE
, JS_PROP_CONFIGURABLE);

49586 
	`JS_S‘CÚ¡ruùÜ2
(
ùx
, 
obj1
, ctx->
şass_´Ùo
[
JS_CLASS_GENERATOR_FUNCTION
],

49587 0, 
JS_PROP_CONFIGURABLE
);

49588 
	`JS_F»eV®ue
(
ùx
, 
obj1
);

49591 
ùx
->
ev®_obj
 = 
	`JS_NewCFunùiÚ
(ùx, 
js_glob®_ev®
, "eval", 1);

49592 
	`JS_DefšePrİ”tyV®ue
(
ùx
, ctx->
glob®_obj
, 
JS_ATOM_ev®
,

49593 
	`JS_DupV®ue
(
ùx
, ctx->
ev®_obj
),

49594 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

49596 
	`JS_DefšePrİ”tyV®ue
(
ùx
, ctx->
glob®_obj
, 
JS_ATOM_glob®This
,

49597 
	`JS_DupV®ue
(
ùx
, ctx->
glob®_obj
),

49598 
JS_PROP_CONFIGURABLE
 | 
JS_PROP_WRITABLE
);

49599 
	}
}

49603 
ušt8_t
 cÚ¡ 
	gty³d_¬¿y_size_log2
[
JS_TYPED_ARRAY_COUNT
] = {

49605 #ifdeà
CONFIG_BIGNUM


49611 
JSV®ue
 
	$js_¬¿y_bufãr_cÚ¡ruùÜ3
(
JSCÚ‹xt
 *
ùx
,

49612 
JSV®ueCÚ¡
 
Ãw_rg‘
,

49613 
ušt64_t
 
Ën
, 
JSCÏssID
 
şass_id
,

49614 
ušt8_t
 *
buf
,

49615 
JSF»eA¼ayBufãrD©aFunc
 *
ä“_func
,

49616 *
İaque
, 
BOOL
 
®loc_æag
)

49618 
JSV®ue
 
obj
;

49619 
JSA¼ayBufãr
 *
abuf
 = 
NULL
;

49621 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
şass_id
);

49622 ià(
	`JS_IsExû±iÚ
(
obj
))

49623  
obj
;

49625 ià(
Ën
 > 
INT32_MAX
) {

49626 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‡rray buffer†ength");

49627 
ç
;

49629 
abuf
 = 
	`js_m®loc
(
ùx
, (*abuf));

49630 ià(!
abuf
)

49631 
ç
;

49632 
abuf
->
by‹_Ëngth
 = 
Ën
;

49633 ià(
®loc_æag
) {

49635 
abuf
->
d©a
 = 
	`js_m®locz
(
ùx
, 
	`max_št
(
Ën
, 1));

49636 ià(!
abuf
->
d©a
)

49637 
ç
;

49639 
abuf
->
d©a
 = 
buf
;

49641 
	`š™_li¡_h—d
(&
abuf
->
¬¿y_li¡
);

49642 
abuf
->
d‘ached
 = 
FALSE
;

49643 
abuf
->
sh¬ed
 = (
şass_id
 =ğ
JS_CLASS_SHARED_ARRAY_BUFFER
);

49644 
abuf
->
İaque
 = opaque;

49645 
abuf
->
ä“_func
 = free_func;

49646 ià(
®loc_æag
 && 
buf
)

49647 
	`memıy
(
abuf
->
d©a
, 
buf
, 
Ën
);

49648 
	`JS_S‘O·que
(
obj
, 
abuf
);

49649  
obj
;

49650 
ç
:

49651 
	`JS_F»eV®ue
(
ùx
, 
obj
);

49652 
	`js_ä“
(
ùx
, 
abuf
);

49653  
JS_EXCEPTION
;

49654 
	}
}

49656 
	$js_¬¿y_bufãr_ä“
(
JSRuÁime
 *
¹
, *
İaque
, *
±r
)

49658 
	`js_ä“_¹
(
¹
, 
±r
);

49659 
	}
}

49661 
JSV®ue
 
	$js_¬¿y_bufãr_cÚ¡ruùÜ2
(
JSCÚ‹xt
 *
ùx
,

49662 
JSV®ueCÚ¡
 
Ãw_rg‘
,

49663 
ušt64_t
 
Ën
, 
JSCÏssID
 
şass_id
)

49665  
	`js_¬¿y_bufãr_cÚ¡ruùÜ3
(
ùx
, 
Ãw_rg‘
, 
Ën
, 
şass_id
,

49666 
NULL
, 
js_¬¿y_bufãr_ä“
, NULL,

49667 
TRUE
);

49668 
	}
}

49670 
JSV®ue
 
	$js_¬¿y_bufãr_cÚ¡ruùÜ1
(
JSCÚ‹xt
 *
ùx
,

49671 
JSV®ueCÚ¡
 
Ãw_rg‘
,

49672 
ušt64_t
 
Ën
)

49674  
	`js_¬¿y_bufãr_cÚ¡ruùÜ2
(
ùx
, 
Ãw_rg‘
, 
Ën
,

49675 
JS_CLASS_ARRAY_BUFFER
);

49676 
	}
}

49678 
JSV®ue
 
	$JS_NewA¼ayBufãr
(
JSCÚ‹xt
 *
ùx
, 
ušt8_t
 *
buf
, 
size_t
 
Ën
,

49679 
JSF»eA¼ayBufãrD©aFunc
 *
ä“_func
, *
İaque
,

49680 
BOOL
 
is_sh¬ed
)

49682  
	`js_¬¿y_bufãr_cÚ¡ruùÜ3
(
ùx
, 
JS_UNDEFINED
, 
Ën
,

49683 
is_sh¬ed
 ? 
JS_CLASS_SHARED_ARRAY_BUFFER
 : 
JS_CLASS_ARRAY_BUFFER
,

49684 
buf
, 
ä“_func
, 
İaque
, 
FALSE
);

49685 
	}
}

49688 
JSV®ue
 
	$JS_NewA¼ayBufãrCİy
(
JSCÚ‹xt
 *
ùx
, cÚ¡ 
ušt8_t
 *
buf
, 
size_t
 
Ën
)

49690  
	`js_¬¿y_bufãr_cÚ¡ruùÜ3
(
ùx
, 
JS_UNDEFINED
, 
Ën
,

49691 
JS_CLASS_ARRAY_BUFFER
,

49692 (
ušt8_t
 *)
buf
,

49693 
js_¬¿y_bufãr_ä“
, 
NULL
,

49694 
TRUE
);

49695 
	}
}

49697 
JSV®ue
 
	$js_¬¿y_bufãr_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

49698 
JSV®ueCÚ¡
 
Ãw_rg‘
,

49699 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49701 
ušt64_t
 
Ën
;

49702 ià(
	`JS_ToIndex
(
ùx
, &
Ën
, 
¬gv
[0]))

49703  
JS_EXCEPTION
;

49704  
	`js_¬¿y_bufãr_cÚ¡ruùÜ1
(
ùx
, 
Ãw_rg‘
, 
Ën
);

49705 
	}
}

49707 
JSV®ue
 
	$js_sh¬ed_¬¿y_bufãr_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

49708 
JSV®ueCÚ¡
 
Ãw_rg‘
,

49709 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49711 
ušt64_t
 
Ën
;

49712 ià(
	`JS_ToIndex
(
ùx
, &
Ën
, 
¬gv
[0]))

49713  
JS_EXCEPTION
;

49714  
	`js_¬¿y_bufãr_cÚ¡ruùÜ2
(
ùx
, 
Ãw_rg‘
, 
Ën
,

49715 
JS_CLASS_SHARED_ARRAY_BUFFER
);

49716 
	}
}

49719 
	$js_¬¿y_bufãr_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

49721 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

49722 
JSA¼ayBufãr
 *
abuf
 = 
p
->
u
.
¬¿y_bufãr
;

49723 ià(
abuf
) {

49728 ià(
abuf
->
ä“_func
)

49729 
abuf
->
	`ä“_func
(
¹
,‡buf->
İaque
,‡buf->
d©a
);

49730 
	`js_ä“_¹
(
¹
, 
abuf
);

49732 
	}
}

49734 
JSV®ue
 
	$js_¬¿y_bufãr_isV›w
(
JSCÚ‹xt
 *
ùx
,

49735 
JSV®ueCÚ¡
 
this_v®
,

49736 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

49738 
JSObjeù
 *
p
;

49739 
BOOL
 
»s
;

49740 
»s
 = 
FALSE
;

49741 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[0]è=ğ
JS_TAG_OBJECT
) {

49742 
p
 = 
	`JS_VALUE_GET_OBJ
(
¬gv
[0]);

49743 ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

49744 
p
->
şass_id
 <ğ
JS_CLASS_DATAVIEW
) {

49745 
»s
 = 
TRUE
;

49748  
	`JS_NewBoŞ
(
ùx
, 
»s
);

49749 
	}
}

49751 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¬¿y_bufãr_funcs
[] = {

49752 
JS_CFUNC_DEF
("isV›w", 1, 
js_¬¿y_bufãr_isV›w
 ),

49753 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
 ),

49756 
JSV®ue
 
	$JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
JSCÚ‹xt
 *
ùx
)

49758  
	`JS_ThrowTy³E¼Ü
(
ùx
, "ArrayBuffer is detached");

49759 
	}
}

49761 
JSV®ue
 
	$js_¬¿y_bufãr_g‘_by‹L’gth
(
JSCÚ‹xt
 *
ùx
,

49762 
JSV®ueCÚ¡
 
this_v®
,

49763 
şass_id
)

49765 
JSA¼ayBufãr
 *
abuf
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
şass_id
);

49766 ià(!
abuf
)

49767  
JS_EXCEPTION
;

49768 ià(
abuf
->
d‘ached
)

49769  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

49770  
	`JS_NewUšt32
(
ùx
, 
abuf
->
by‹_Ëngth
);

49771 
	}
}

49773 
	$JS_D‘achA¼ayBufãr
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

49775 
JSA¼ayBufãr
 *
abuf
 = 
	`JS_G‘O·que
(
obj
, 
JS_CLASS_ARRAY_BUFFER
);

49776 
li¡_h—d
 *
–
;

49778 ià(!
abuf
 ||‡buf->
d‘ached
)

49780 ià(
abuf
->
ä“_func
)

49781 
abuf
->
	`ä“_func
(
ùx
->
¹
,‡buf->
İaque
,‡buf->
d©a
);

49782 
abuf
->
d©a
 = 
NULL
;

49783 
abuf
->
by‹_Ëngth
 = 0;

49784 
abuf
->
d‘ached
 = 
TRUE
;

49786 
	`li¡_fÜ_—ch
(
–
, &
abuf
->
¬¿y_li¡
) {

49787 
JSTy³dA¼ay
 *

;

49788 
JSObjeù
 *
p
;

49790 

 = 
	`li¡_’Œy
(
–
, 
JSTy³dA¼ay
, 
lšk
);

49791 
p
 = 

->
obj
;

49793 ià(
p
->
şass_id
 !ğ
JS_CLASS_DATAVIEW
) {

49794 
p
->
u
.
¬¿y
.
couÁ
 = 0;

49795 
p
->
u
.
¬¿y
.u.
±r
 = 
NULL
;

49798 
	}
}

49801 
JSA¼ayBufãr
 *
	$js_g‘_¬¿y_bufãr
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
)

49803 
JSObjeù
 *
p
;

49804 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

49805 
ç
;

49806 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

49807 ià(
p
->
şass_id
 !ğ
JS_CLASS_ARRAY_BUFFER
 &&

49808 
p
->
şass_id
 !ğ
JS_CLASS_SHARED_ARRAY_BUFFER
) {

49809 
ç
:

49810 
	`JS_ThrowTy³E¼ÜInv®idCÏss
(
ùx
, 
JS_CLASS_ARRAY_BUFFER
);

49811  
NULL
;

49813  
p
->
u
.
¬¿y_bufãr
;

49814 
	}
}

49818 
ušt8_t
 *
	$JS_G‘A¼ayBufãr
(
JSCÚ‹xt
 *
ùx
, 
size_t
 *
psize
, 
JSV®ueCÚ¡
 
obj
)

49820 
JSA¼ayBufãr
 *
abuf
 = 
	`js_g‘_¬¿y_bufãr
(
ùx
, 
obj
);

49821 ià(!
abuf
)

49822 
ç
;

49823 ià(
abuf
->
d‘ached
) {

49824 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

49825 
ç
;

49827 *
psize
 = 
abuf
->
by‹_Ëngth
;

49828  
abuf
->
d©a
;

49829 
ç
:

49830 *
psize
 = 0;

49831  
NULL
;

49832 
	}
}

49834 
JSV®ue
 
	$js_¬¿y_bufãr_¦iû
(
JSCÚ‹xt
 *
ùx
,

49835 
JSV®ueCÚ¡
 
this_v®
,

49836 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
şass_id
)

49838 
JSA¼ayBufãr
 *
abuf
, *
Ãw_abuf
;

49839 
sšt64_t
 
Ën
, 
¡¬t
, 
’d
, 
Ãw_Ën
;

49840 
JSV®ue
 
ùÜ
, 
Ãw_obj
;

49842 
abuf
 = 
	`JS_G‘O·que2
(
ùx
, 
this_v®
, 
şass_id
);

49843 ià(!
abuf
)

49844  
JS_EXCEPTION
;

49845 ià(
abuf
->
d‘ached
)

49846  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

49847 
Ën
 = 
abuf
->
by‹_Ëngth
;

49849 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
¡¬t
, 
¬gv
[0], 0, 
Ën
,†en))

49850  
JS_EXCEPTION
;

49852 
’d
 = 
Ën
;

49853 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

49854 ià(
	`JS_ToIÁ64CÏmp
(
ùx
, &
’d
, 
¬gv
[1], 0, 
Ën
,†en))

49855  
JS_EXCEPTION
;

49857 
Ãw_Ën
 = 
	`max_št64
(
’d
 - 
¡¬t
, 0);

49858 
ùÜ
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
this_v®
, 
JS_UNDEFINED
);

49859 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

49860  
ùÜ
;

49861 ià(
	`JS_IsUndefšed
(
ùÜ
)) {

49862 
Ãw_obj
 = 
	`js_¬¿y_bufãr_cÚ¡ruùÜ2
(
ùx
, 
JS_UNDEFINED
, 
Ãw_Ën
,

49863 
şass_id
);

49865 
JSV®ue
 
¬gs
[1];

49866 
¬gs
[0] = 
	`JS_NewIÁ64
(
ùx
, 
Ãw_Ën
);

49867 
Ãw_obj
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
ùÜ
, 1, (
JSV®ueCÚ¡
 *)
¬gs
);

49868 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

49869 
	`JS_F»eV®ue
(
ùx
, 
¬gs
[0]);

49871 ià(
	`JS_IsExû±iÚ
(
Ãw_obj
))

49872  
Ãw_obj
;

49873 
Ãw_abuf
 = 
	`JS_G‘O·que2
(
ùx
, 
Ãw_obj
, 
şass_id
);

49874 ià(!
Ãw_abuf
)

49875 
ç
;

49876 ià(
	`js_§me_v®ue
(
ùx
, 
Ãw_obj
, 
this_v®
)) {

49877 
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot use identical ArrayBuffer");

49878 
ç
;

49880 ià(
Ãw_abuf
->
d‘ached
) {

49881 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

49882 
ç
;

49884 ià(
Ãw_abuf
->
by‹_Ëngth
 < 
Ãw_Ën
) {

49885 
	`JS_ThrowTy³E¼Ü
(
ùx
, "new ArrayBuffer isoo small");

49886 
ç
;

49889 ià(
abuf
->
d‘ached
) {

49890 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

49891 
ç
;

49893 
	`memıy
(
Ãw_abuf
->
d©a
, 
abuf
->d©¨+ 
¡¬t
, 
Ãw_Ën
);

49894  
Ãw_obj
;

49895 
ç
:

49896 
	`JS_F»eV®ue
(
ùx
, 
Ãw_obj
);

49897  
JS_EXCEPTION
;

49898 
	}
}

49900 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_¬¿y_bufãr_´Ùo_funcs
[] = {

49901 
JS_CGETSET_MAGIC_DEF
("by‹L’gth", 
js_¬¿y_bufãr_g‘_by‹L’gth
, 
NULL
, 
JS_CLASS_ARRAY_BUFFER
 ),

49902 
JS_CFUNC_MAGIC_DEF
("¦iû", 2, 
js_¬¿y_bufãr_¦iû
, 
JS_CLASS_ARRAY_BUFFER
 ),

49903 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "A¼ayBufãr", 
JS_PROP_CONFIGURABLE
 ),

49908 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_sh¬ed_¬¿y_bufãr_funcs
[] = {

49909 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
 ),

49912 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_sh¬ed_¬¿y_bufãr_´Ùo_funcs
[] = {

49913 
JS_CGETSET_MAGIC_DEF
("by‹L’gth", 
js_¬¿y_bufãr_g‘_by‹L’gth
, 
NULL
, 
JS_CLASS_SHARED_ARRAY_BUFFER
 ),

49914 
JS_CFUNC_MAGIC_DEF
("¦iû", 2, 
js_¬¿y_bufãr_¦iû
, 
JS_CLASS_SHARED_ARRAY_BUFFER
 ),

49915 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "Sh¬edA¼ayBufãr", 
JS_PROP_CONFIGURABLE
 ),

49918 
JSObjeù
 *
	$g‘_ty³d_¬¿y
(
JSCÚ‹xt
 *
ùx
,

49919 
JSV®ueCÚ¡
 
this_v®
,

49920 
is_d©av›w
)

49922 
JSObjeù
 *
p
;

49923 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è!ğ
JS_TAG_OBJECT
)

49924 
ç
;

49925 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

49926 ià(
is_d©av›w
) {

49927 ià(
p
->
şass_id
 !ğ
JS_CLASS_DATAVIEW
)

49928 
ç
;

49930 ià(!(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

49931 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
)) {

49932 
ç
:

49933 
	`JS_ThrowTy³E¼Ü
(
ùx
, "nÙ‡ %s", 
is_d©av›w
 ? "DataView" : "TypedArray");

49934  
NULL
;

49937  
p
;

49938 
	}
}

49941 
BOOL
 
	$ty³d_¬¿y_is_d‘ached
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
)

49943 
JSTy³dA¼ay
 *

 = 
p
->
u
.
ty³d_¬¿y
;

49944 
JSA¼ayBufãr
 *
abuf
 = 

->
bufãr
->
u
.
¬¿y_bufãr
;

49947  
abuf
->
d‘ached
;

49948 
	}
}

49952 
ušt32_t
 
	$ty³d_¬¿y_g‘_Ëngth
(
JSCÚ‹xt
 *
ùx
, 
JSObjeù
 *
p
)

49954 
JSTy³dA¼ay
 *

 = 
p
->
u
.
ty³d_¬¿y
;

49955 
size_log2
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

49956  

->
Ëngth
 >> 
size_log2
;

49957 
	}
}

49959 
	$v®id©e_ty³d_¬¿y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
)

49961 
JSObjeù
 *
p
;

49962 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 0);

49963 ià(!
p
)

49965 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

49966 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

49970 
	}
}

49972 
JSV®ue
 
	$js_ty³d_¬¿y_g‘_Ëngth
(
JSCÚ‹xt
 *
ùx
,

49973 
JSV®ueCÚ¡
 
this_v®
)

49975 
JSObjeù
 *
p
;

49976 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 0);

49977 ià(!
p
)

49978  
JS_EXCEPTION
;

49979  
	`JS_NewIÁ32
(
ùx
, 
p
->
u
.
¬¿y
.
couÁ
);

49980 
	}
}

49982 
JSV®ue
 
	$js_ty³d_¬¿y_g‘_bufãr
(
JSCÚ‹xt
 *
ùx
,

49983 
JSV®ueCÚ¡
 
this_v®
, 
is_d©av›w
)

49985 
JSObjeù
 *
p
;

49986 
JSTy³dA¼ay
 *

;

49987 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 
is_d©av›w
);

49988 ià(!
p
)

49989  
JS_EXCEPTION
;

49990 

 = 
p
->
u
.
ty³d_¬¿y
;

49991  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 

->
bufãr
));

49992 
	}
}

49994 
JSV®ue
 
	$js_ty³d_¬¿y_g‘_by‹L’gth
(
JSCÚ‹xt
 *
ùx
,

49995 
JSV®ueCÚ¡
 
this_v®
,

49996 
is_d©av›w
)

49998 
JSObjeù
 *
p
;

49999 
JSTy³dA¼ay
 *

;

50000 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 
is_d©av›w
);

50001 ià(!
p
)

50002  
JS_EXCEPTION
;

50003 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

50004 ià(
is_d©av›w
) {

50005  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50007  
	`JS_NewIÁ32
(
ùx
, 0);

50010 

 = 
p
->
u
.
ty³d_¬¿y
;

50011  
	`JS_NewIÁ32
(
ùx
, 

->
Ëngth
);

50012 
	}
}

50014 
JSV®ue
 
	$js_ty³d_¬¿y_g‘_by‹Off£t
(
JSCÚ‹xt
 *
ùx
,

50015 
JSV®ueCÚ¡
 
this_v®
,

50016 
is_d©av›w
)

50018 
JSObjeù
 *
p
;

50019 
JSTy³dA¼ay
 *

;

50020 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 
is_d©av›w
);

50021 ià(!
p
)

50022  
JS_EXCEPTION
;

50023 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

50024 ià(
is_d©av›w
) {

50025  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50027  
	`JS_NewIÁ32
(
ùx
, 0);

50030 

 = 
p
->
u
.
ty³d_¬¿y
;

50031  
	`JS_NewIÁ32
(
ùx
, 

->
off£t
);

50032 
	}
}

50037 
JSV®ue
 
	$JS_G‘Ty³dA¼ayBufãr
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

50038 
size_t
 *
pby‹_off£t
,

50039 
size_t
 *
pby‹_Ëngth
,

50040 
size_t
 *
pby‹s_³r_–em’t
)

50042 
JSObjeù
 *
p
;

50043 
JSTy³dA¼ay
 *

;

50044 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
obj
, 
FALSE
);

50045 ià(!
p
)

50046  
JS_EXCEPTION
;

50047 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
))

50048  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50049 

 = 
p
->
u
.
ty³d_¬¿y
;

50050 ià(
pby‹_off£t
)

50051 *
pby‹_off£t
 = 

->
off£t
;

50052 ià(
pby‹_Ëngth
)

50053 *
pby‹_Ëngth
 = 

->
Ëngth
;

50054 ià(
pby‹s_³r_–em’t
) {

50055 *
pby‹s_³r_–em’t
 = 1 << 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

50057  
	`JS_DupV®ue
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 

->
bufãr
));

50058 
	}
}

50060 
JSV®ue
 
	$js_ty³d_¬¿y_g‘_toSŒšgTag
(
JSCÚ‹xt
 *
ùx
,

50061 
JSV®ueCÚ¡
 
this_v®
)

50063 
JSObjeù
 *
p
;

50064 ià(
	`JS_VALUE_GET_TAG
(
this_v®
è!ğ
JS_TAG_OBJECT
)

50065  
JS_UNDEFINED
;

50066 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

50067 ià(!(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

50068 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
))

50069  
JS_UNDEFINED
;

50070  
	`JS_AtomToSŒšg
(
ùx
, ctx->
¹
->
şass_¬¿y
[
p
->
şass_id
].
şass_Çme
);

50071 
	}
}

50073 
JSV®ue
 
	$js_ty³d_¬¿y_£t_š‹º®
(
JSCÚ‹xt
 *
ùx
,

50074 
JSV®ueCÚ¡
 
d¡
,

50075 
JSV®ueCÚ¡
 
¤c
,

50076 
JSV®ueCÚ¡
 
off
)

50078 
JSObjeù
 *
p
;

50079 
JSObjeù
 *
¤c_p
;

50080 
ušt32_t
 
i
;

50081 
sšt64_t
 
¤c_Ën
, 
off£t
;

50082 
JSV®ue
 
v®
, 
¤c_obj
 = 
JS_UNDEFINED
;

50084 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
d¡
, 0);

50085 ià(!
p
)

50086 
ç
;

50087 ià(
	`JS_ToIÁ64S©
(
ùx
, &
off£t
, 
off
))

50088 
ç
;

50089 ià(
off£t
 < 0)

50090 
¿nge_”rÜ
;

50091 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

50092 
d‘ached
:

50093 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50094 
ç
;

50096 
¤c_obj
 = 
	`JS_ToObjeù
(
ùx
, 
¤c
);

50097 ià(
	`JS_IsExû±iÚ
(
¤c_obj
))

50098 
ç
;

50099 
¤c_p
 = 
	`JS_VALUE_GET_OBJ
(
¤c_obj
);

50100 ià(
¤c_p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

50101 
¤c_p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

50102 
JSTy³dA¼ay
 *
de¡_
 = 
p
->
u
.
ty³d_¬¿y
;

50103 
JSA¼ayBufãr
 *
de¡_abuf
 = 
de¡_
->
bufãr
->
u
.
¬¿y_bufãr
;

50104 
JSTy³dA¼ay
 *
¤c_
 = 
¤c_p
->
u
.
ty³d_¬¿y
;

50105 
JSA¼ayBufãr
 *
¤c_abuf
 = 
¤c_
->
bufãr
->
u
.
¬¿y_bufãr
;

50106 
shiá
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

50108 ià(
¤c_abuf
->
d‘ached
)

50109 
d‘ached
;

50111 
¤c_Ën
 = 
¤c_p
->
u
.
¬¿y
.
couÁ
;

50112 ià(
off£t
 > (
sšt64_t
)(
p
->
u
.
¬¿y
.
couÁ
 - 
¤c_Ën
))

50113 
¿nge_”rÜ
;

50116 ià(
¤c_p
->
şass_id
 =ğ
p
->class_id) {

50118 
	`memmove
(
de¡_abuf
->
d©a
 + 
de¡_
->
off£t
 + (off£ˆ<< 
shiá
),

50119 
¤c_abuf
->
d©a
 + 
¤c_
->
off£t
, 
¤c_Ën
 << 
shiá
);

50120 
dÚe
;

50122 ià(
de¡_abuf
->
d©a
 =ğ
¤c_abuf
->data) {

50128 ià(
	`js_g‘_Ëngth64
(
ùx
, &
¤c_Ën
, 
¤c_obj
))

50129 
ç
;

50130 ià(
off£t
 > (
sšt64_t
)(
p
->
u
.
¬¿y
.
couÁ
 - 
¤c_Ën
)) {

50131 
¿nge_”rÜ
:

50132 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid‡rray†ength");

50133 
ç
;

50136 
i
 = 0; i < 
¤c_Ën
; i++) {

50137 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
¤c_obj
, 
i
);

50138 ià(
	`JS_IsExû±iÚ
(
v®
))

50139 
ç
;

50140 ià(
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
d¡
, 
off£t
 + 
i
, 
v®
) < 0)

50141 
ç
;

50143 
dÚe
:

50144 
	`JS_F»eV®ue
(
ùx
, 
¤c_obj
);

50145  
JS_UNDEFINED
;

50146 
ç
:

50147 
	`JS_F»eV®ue
(
ùx
, 
¤c_obj
);

50148  
JS_EXCEPTION
;

50149 
	}
}

50151 
JSV®ue
 
	$js_ty³d_¬¿y_£t
(
JSCÚ‹xt
 *
ùx
,

50152 
JSV®ueCÚ¡
 
this_v®
,

50153 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50155 
JSV®ueCÚ¡
 
off£t
 = 
JS_UNDEFINED
;

50156 ià(
¬gc
 > 1) {

50157 
off£t
 = 
¬gv
[1];

50159  
	`js_ty³d_¬¿y_£t_š‹º®
(
ùx
, 
this_v®
, 
¬gv
[0], 
off£t
);

50160 
	}
}

50162 
JSV®ue
 
	$js_ü—‹_ty³d_¬¿y_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50163 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
magic
)

50165 ià(
	`v®id©e_ty³d_¬¿y
(
ùx
, 
this_v®
))

50166  
JS_EXCEPTION
;

50167  
	`js_ü—‹_¬¿y_™”©Ü
(
ùx
, 
this_v®
, 
¬gc
, 
¬gv
, 
magic
);

50168 
	}
}

50171 
	$js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
JSCÚ‹xt
 *
ùx
,

50172 
JSV®ueCÚ¡
 
obj
)

50174 
JSObjeù
 *
p
;

50175 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
obj
, 0);

50176 ià(!
p
)

50178 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

50179 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50182  
p
->
u
.
¬¿y
.
couÁ
;

50183 
	}
}

50187 
JSV®ue
 
	$js_ty³d_¬¿y___g‘L’gth
(
JSCÚ‹xt
 *
ùx
,

50188 
JSV®ueCÚ¡
 
this_v®
,

50189 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50191 
BOOL
 
ignÜe_d‘ached
 = 
	`JS_ToBoŞ
(
ùx
, 
¬gv
[1]);

50193 ià(
ignÜe_d‘ached
) {

50194  
	`js_ty³d_¬¿y_g‘_Ëngth
(
ùx
, 
¬gv
[0]);

50196 
Ën
;

50197 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
¬gv
[0]);

50198 ià(
Ën
 < 0)

50199  
JS_EXCEPTION
;

50200  
	`JS_NewIÁ32
(
ùx
, 
Ën
);

50202 
	}
}

50205 
JSV®ue
 
js_ty³d_¬¿y_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

50206 
JSV®ueCÚ¡
 
this_v®
,

50207 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

50208 
şassid
);

50210 
JSV®ue
 
	$js_ty³d_¬¿y_ü—‹
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
ùÜ
,

50211 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50213 
JSV®ue
 
»t
;

50214 
Ãw_Ën
;

50215 
sšt64_t
 
Ën
;

50217 
»t
 = 
	`JS_C®lCÚ¡ruùÜ
(
ùx
, 
ùÜ
, 
¬gc
, 
¬gv
);

50218 ià(
	`JS_IsExû±iÚ
(
»t
))

50219  
»t
;

50221 
Ãw_Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
»t
);

50222 ià(
Ãw_Ën
 < 0)

50223 
ç
;

50224 ià(
¬gc
 == 1) {

50226 ià(
	`JS_ToL’gthF»e
(
ùx
, &
Ën
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0])))

50227 
ç
;

50228 ià(
Ãw_Ën
 < 
Ën
) {

50229 
	`JS_ThrowTy³E¼Ü
(
ùx
, "TypedArray†ength isoo small");

50230 
ç
:

50231 
	`JS_F»eV®ue
(
ùx
, 
»t
);

50232  
JS_EXCEPTION
;

50235  
»t
;

50236 
	}
}

50239 
JSV®ue
 
	$js_ty³d_¬¿y___ü—‹
(
JSCÚ‹xt
 *
ùx
,

50240 
JSV®ueCÚ¡
 
this_v®
,

50241 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50243  
	`js_ty³d_¬¿y_ü—‹
(
ùx
, 
¬gv
[0], 
	`max_št
(
¬gc
 - 1, 0),‡rgv + 1);

50244 
	}
}

50247 
JSV®ue
 
	$js_ty³d_¬¿y___¥ec›sC»©e
(
JSCÚ‹xt
 *
ùx
,

50248 
JSV®ueCÚ¡
 
this_v®
,

50249 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50251 
JSV®ueCÚ¡
 
obj
;

50252 
JSObjeù
 *
p
;

50253 
JSV®ue
 
ùÜ
, 
»t
;

50254 
¬gc1
;

50256 
obj
 = 
¬gv
[0];

50257 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
obj
, 0);

50258 ià(!
p
)

50259  
JS_EXCEPTION
;

50260 
ùÜ
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
obj
, 
JS_UNDEFINED
);

50261 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

50262  
ùÜ
;

50263 
¬gc1
 = 
	`max_št
(
¬gc
 - 1, 0);

50264 ià(
	`JS_IsUndefšed
(
ùÜ
)) {

50265 
»t
 = 
	`js_ty³d_¬¿y_cÚ¡ruùÜ
(
ùx
, 
JS_UNDEFINED
, 
¬gc1
, 
¬gv
 + 1,

50266 
p
->
şass_id
);

50268 
»t
 = 
	`js_ty³d_¬¿y_ü—‹
(
ùx
, 
ùÜ
, 
¬gc1
, 
¬gv
 + 1);

50269 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

50271  
»t
;

50272 
	}
}

50274 
JSV®ue
 
	$js_ty³d_¬¿y_äom
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50275 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50278 
JSV®ueCÚ¡
 
™ems
 = 
¬gv
[0], 
m­â
, 
this_¬g
;

50279 
JSV®ueCÚ¡
 
¬gs
[2];

50280 
JSV®ue
 
¡ack
[2];

50281 
JSV®ue
 
™”
, 
¬r
, 
r
, 
v
, 
v2
;

50282 
sšt64_t
 
k
, 
Ën
;

50283 
dÚe
, 
m­pšg
;

50285 
m­pšg
 = 
FALSE
;

50286 
m­â
 = 
JS_UNDEFINED
;

50287 
this_¬g
 = 
JS_UNDEFINED
;

50288 
r
 = 
JS_UNDEFINED
;

50289 
¬r
 = 
JS_UNDEFINED
;

50290 
¡ack
[0] = 
JS_UNDEFINED
;

50291 
¡ack
[1] = 
JS_UNDEFINED
;

50293 ià(
¬gc
 > 1) {

50294 
m­â
 = 
¬gv
[1];

50295 ià(!
	`JS_IsUndefšed
(
m­â
)) {

50296 ià(
	`check_funùiÚ
(
ùx
, 
m­â
))

50297 
exû±iÚ
;

50298 
m­pšg
 = 1;

50299 ià(
¬gc
 > 2)

50300 
this_¬g
 = 
¬gv
[2];

50303 
™”
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™ems
, 
JS_ATOM_SymbŞ_™”©Ü
);

50304 ià(
	`JS_IsExû±iÚ
(
™”
))

50305 
exû±iÚ
;

50306 ià(!
	`JS_IsUndefšed
(
™”
)) {

50307 
	`JS_F»eV®ue
(
ùx
, 
™”
);

50308 
¬r
 = 
	`JS_NewA¼ay
(
ùx
);

50309 ià(
	`JS_IsExû±iÚ
(
¬r
))

50310 
exû±iÚ
;

50311 
¡ack
[0] = 
	`JS_DupV®ue
(
ùx
, 
™ems
);

50312 ià(
	`js_fÜ_of_¡¬t
(
ùx
, &
¡ack
[1], 
FALSE
))

50313 
exû±iÚ
;

50314 
k
 = 0;; k++) {

50315 
v
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
¡ack
[0], sck[1], 0, 
NULL
, &
dÚe
);

50316 ià(
	`JS_IsExû±iÚ
(
v
))

50317 
exû±iÚ_şo£
;

50318 ià(
dÚe
)

50320 ià(
	`JS_DefšePrİ”tyV®ueIÁ64
(
ùx
, 
¬r
, 
k
, 
v
, 
JS_PROP_C_W_E
 | 
JS_PROP_THROW
) < 0)

50321 
exû±iÚ_şo£
;

50324 
¬r
 = 
	`JS_ToObjeù
(
ùx
, 
™ems
);

50325 ià(
	`JS_IsExû±iÚ
(
¬r
))

50326 
exû±iÚ
;

50328 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
¬r
) < 0)

50329 
exû±iÚ
;

50330 
v
 = 
	`JS_NewIÁ64
(
ùx
, 
Ën
);

50331 
¬gs
[0] = 
v
;

50332 
r
 = 
	`js_ty³d_¬¿y_ü—‹
(
ùx
, 
this_v®
, 1, 
¬gs
);

50333 
	`JS_F»eV®ue
(
ùx
, 
v
);

50334 ià(
	`JS_IsExû±iÚ
(
r
))

50335 
exû±iÚ
;

50336 
k
 = 0; k < 
Ën
; k++) {

50337 
v
 = 
	`JS_G‘Prİ”tyIÁ64
(
ùx
, 
¬r
, 
k
);

50338 ià(
	`JS_IsExû±iÚ
(
v
))

50339 
exû±iÚ
;

50340 ià(
m­pšg
) {

50341 
¬gs
[0] = 
v
;

50342 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
k
);

50343 
v2
 = 
	`JS_C®l
(
ùx
, 
m­â
, 
this_¬g
, 2, 
¬gs
);

50344 
	`JS_F»eV®ue
(
ùx
, 
v
);

50345 
v
 = 
v2
;

50346 ià(
	`JS_IsExû±iÚ
(
v
))

50347 
exû±iÚ
;

50349 ià(
	`JS_S‘Prİ”tyIÁ64
(
ùx
, 
r
, 
k
, 
v
) < 0)

50350 
exû±iÚ
;

50352 
dÚe
;

50354 
exû±iÚ_şo£
:

50355 ià(!
	`JS_IsUndefšed
(
¡ack
[0]))

50356 
	`JS_I‹¿tÜClo£
(
ùx
, 
¡ack
[0], 
TRUE
);

50357 
exû±iÚ
:

50358 
	`JS_F»eV®ue
(
ùx
, 
r
);

50359 
r
 = 
JS_EXCEPTION
;

50360 
dÚe
:

50361 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

50362 
	`JS_F»eV®ue
(
ùx
, 
¡ack
[0]);

50363 
	`JS_F»eV®ue
(
ùx
, 
¡ack
[1]);

50364  
r
;

50365 
	}
}

50367 
JSV®ue
 
	$js_ty³d_¬¿y_of
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50368 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50370 
JSV®ue
 
obj
;

50371 
JSV®ueCÚ¡
 
¬gs
[1];

50372 
i
;

50374 
¬gs
[0] = 
	`JS_NewIÁ32
(
ùx
, 
¬gc
);

50375 
obj
 = 
	`js_ty³d_¬¿y_ü—‹
(
ùx
, 
this_v®
, 1, 
¬gs
);

50376 ià(
	`JS_IsExû±iÚ
(
obj
))

50377  
obj
;

50379 
i
 = 0; i < 
¬gc
; i++) {

50380 ià(
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
obj
, 
i
, 
	`JS_DupV®ue
(ùx, 
¬gv
[i])) < 0) {

50381 
	`JS_F»eV®ue
(
ùx
, 
obj
);

50382  
JS_EXCEPTION
;

50385  
obj
;

50386 
	}
}

50388 
JSV®ue
 
	$js_ty³d_¬¿y_cİyW™hš
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50389 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50391 
JSObjeù
 *
p
;

50392 
Ën
, 
to
, 
äom
, 
fš®
, 
couÁ
, 
shiá
;

50394 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50395 ià(
Ën
 < 0)

50396  
JS_EXCEPTION
;

50398 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
to
, 
¬gv
[0], 0, 
Ën
,†en))

50399  
JS_EXCEPTION
;

50401 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
äom
, 
¬gv
[1], 0, 
Ën
,†en))

50402  
JS_EXCEPTION
;

50404 
fš®
 = 
Ën
;

50405 ià(
¬gc
 > 2 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

50406 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
fš®
, 
¬gv
[2], 0, 
Ën
,†en))

50407  
JS_EXCEPTION
;

50410 
couÁ
 = 
	`mš_št
(
fš®
 - 
äom
, 
Ën
 - 
to
);

50411 ià(
couÁ
 > 0) {

50412 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

50413 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
))

50414  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50415 
shiá
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

50416 
	`memmove
(
p
->
u
.
¬¿y
.u.
ušt8_±r
 + (
to
 << 
shiá
),

50417 
p
->
u
.
¬¿y
.u.
ušt8_±r
 + (
äom
 << 
shiá
),

50418 
couÁ
 << 
shiá
);

50420  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

50421 
	}
}

50423 
JSV®ue
 
	$js_ty³d_¬¿y_fl
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50424 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50426 
JSObjeù
 *
p
;

50427 
Ën
, 
k
, 
fš®
, 
shiá
;

50428 
ušt64_t
 
v64
;

50430 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50431 ià(
Ën
 < 0)

50432  
JS_EXCEPTION
;

50433 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

50435 ià(
p
->
şass_id
 =ğ
JS_CLASS_UINT8C_ARRAY
) {

50436 
št32_t
 
v
;

50437 ià(
	`JS_ToUšt8CÏmpF»e
(
ùx
, &
v
, 
	`JS_DupV®ue
(ùx, 
¬gv
[0])))

50438  
JS_EXCEPTION
;

50439 
v64
 = 
v
;

50440 } ià(
p
->
şass_id
 <ğ
JS_CLASS_UINT32_ARRAY
) {

50441 
ušt32_t
 
v
;

50442 ià(
	`JS_ToUšt32
(
ùx
, &
v
, 
¬gv
[0]))

50443  
JS_EXCEPTION
;

50444 
v64
 = 
v
;

50446 #ifdeà
CONFIG_BIGNUM


50447 ià(
p
->
şass_id
 <ğ
JS_CLASS_BIG_UINT64_ARRAY
) {

50448 ià(
	`JS_ToBigIÁ64
(
ùx
, (
št64_t
 *)&
v64
, 
¬gv
[0]))

50449  
JS_EXCEPTION
;

50453 
d
;

50454 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[0]))

50455  
JS_EXCEPTION
;

50456 ià(
p
->
şass_id
 =ğ
JS_CLASS_FLOAT32_ARRAY
) {

50458 
f
;

50459 
ušt32_t
 
u32
;

50460 } 
u
;

50461 
u
.
f
 = 
d
;

50462 
v64
 = 
u
.
u32
;

50464 
JSFlßt64UniÚ
 
u
;

50465 
u
.
d
 = d;

50466 
v64
 = 
u
.
u64
;

50470 
k
 = 0;

50471 ià(
¬gc
 > 1) {

50472 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
k
, 
¬gv
[1], 0, 
Ën
,†en))

50473  
JS_EXCEPTION
;

50476 
fš®
 = 
Ën
;

50477 ià(
¬gc
 > 2 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

50478 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
fš®
, 
¬gv
[2], 0, 
Ën
,†en))

50479  
JS_EXCEPTION
;

50482 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
))

50483  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

50485 
shiá
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

50486 
shiá
) {

50488 ià(
k
 < 
fš®
) {

50489 
	`mem£t
(
p
->
u
.
¬¿y
.u.
ušt8_±r
 + 
k
, 
v64
, 
fš®
 - k);

50493 ; 
k
 < 
fš®
; k++) {

50494 
p
->
u
.
¬¿y
.u.
ušt16_±r
[
k
] = 
v64
;

50498 ; 
k
 < 
fš®
; k++) {

50499 
p
->
u
.
¬¿y
.u.
ušt32_±r
[
k
] = 
v64
;

50503 ; 
k
 < 
fš®
; k++) {

50504 
p
->
u
.
¬¿y
.u.
ušt64_±r
[
k
] = 
v64
;

50508 
	`abÜt
();

50510  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

50511 
	}
}

50513 
JSV®ue
 
	$js_ty³d_¬¿y_fšd
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50514 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
fšdIndex
)

50516 
JSV®ueCÚ¡
 
func
, 
this_¬g
;

50517 
JSV®ueCÚ¡
 
¬gs
[3];

50518 
JSV®ue
 
v®
, 
šdex_v®
, 
»s
;

50519 
Ën
, 
k
;

50521 
v®
 = 
JS_UNDEFINED
;

50522 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50523 ià(
Ën
 < 0)

50524 
exû±iÚ
;

50526 
func
 = 
¬gv
[0];

50527 ià(
	`check_funùiÚ
(
ùx
, 
func
))

50528 
exû±iÚ
;

50530 
this_¬g
 = 
JS_UNDEFINED
;

50531 ià(
¬gc
 > 1)

50532 
this_¬g
 = 
¬gv
[1];

50534 
k
 = 0; k < 
Ën
; k++) {

50535 
šdex_v®
 = 
	`JS_NewIÁ32
(
ùx
, 
k
);

50536 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
this_v®
, 
šdex_v®
);

50537 ià(
	`JS_IsExû±iÚ
(
v®
))

50538 
exû±iÚ
;

50539 
¬gs
[0] = 
v®
;

50540 
¬gs
[1] = 
šdex_v®
;

50541 
¬gs
[2] = 
this_v®
;

50542 
»s
 = 
	`JS_C®l
(
ùx
, 
func
, 
this_¬g
, 3, 
¬gs
);

50543 ià(
	`JS_IsExû±iÚ
(
»s
))

50544 
exû±iÚ
;

50545 ià(
	`JS_ToBoŞF»e
(
ùx
, 
»s
)) {

50546 ià(
fšdIndex
) {

50547 
	`JS_F»eV®ue
(
ùx
, 
v®
);

50548  
šdex_v®
;

50550  
v®
;

50553 
	`JS_F»eV®ue
(
ùx
, 
v®
);

50555 ià(
fšdIndex
)

50556  
	`JS_NewIÁ32
(
ùx
, -1);

50558  
JS_UNDEFINED
;

50560 
exû±iÚ
:

50561 
	`JS_F»eV®ue
(
ùx
, 
v®
);

50562  
JS_EXCEPTION
;

50563 
	}
}

50565 
	#¥ecŸl_šdexOf
 0

	)

50566 
	#¥ecŸl_Ï¡IndexOf
 1

	)

50567 
	#¥ecŸl_šşudes
 -1

	)

50569 
JSV®ue
 
	$js_ty³d_¬¿y_šdexOf
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50570 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
¥ecŸl
)

50572 
JSObjeù
 *
p
;

50573 
Ën
, 
g
, 
is_št
, 
is_bigšt
, 
k
, 
¡İ
, 
šc
, 
»s
 = -1;

50574 
sšt64_t
 
v64
;

50575 
d
;

50576 
f
;

50578 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50579 ià(
Ën
 < 0)

50580 
exû±iÚ
;

50581 ià(
Ën
 == 0)

50582 
dÚe
;

50584 ià(
¥ecŸl
 =ğ
¥ecŸl_Ï¡IndexOf
) {

50585 
k
 = 
Ën
 - 1;

50586 ià(
¬gc
 > 1) {

50587 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[1]))

50588 
exû±iÚ
;

50589 ià(
	`i¢ª
(
d
)) {

50590 
k
 = 0;

50592 ià(
d
 >= 0) {

50593 ià(
d
 < 
k
) {

50594 
k
 = 
d
;

50597 
d
 +ğ
Ën
;

50598 ià(
d
 < 0)

50599 
dÚe
;

50600 
k
 = 
d
;

50604 
¡İ
 = -1;

50605 
šc
 = -1;

50607 
k
 = 0;

50608 ià(
¬gc
 > 1) {

50609 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
k
, 
¬gv
[1], 0, 
Ën
,†en))

50610 
exû±iÚ
;

50612 
¡İ
 = 
Ën
;

50613 
šc
 = 1;

50616 ià(
	`v®id©e_ty³d_¬¿y
(
ùx
, 
this_v®
))

50617 
exû±iÚ
;

50618 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

50620 
is_bigšt
 = 0;

50621 
is_št
 = 0;

50622 
v64
 = 0;

50623 
g
 = 
	`JS_VALUE_GET_NORM_TAG
(
¬gv
[0]);

50624 ià(
g
 =ğ
JS_TAG_INT
) {

50625 
is_št
 = 1;

50626 
v64
 = 
	`JS_VALUE_GET_INT
(
¬gv
[0]);

50627 
d
 = 
v64
;

50629 ià(
g
 =ğ
JS_TAG_FLOAT64
) {

50630 
d
 = 
	`JS_VALUE_GET_FLOAT64
(
¬gv
[0]);

50631 
v64
 = 
d
;

50632 
is_št
 = (
v64
 =ğ
d
);

50634 #ifdeà
CONFIG_BIGNUM


50635 ià(
g
 =ğ
JS_TAG_BIG_INT
) {

50636 
JSBigFlßt
 *
p1
 = 
	`JS_VALUE_GET_PTR
(
¬gv
[0]);

50638 ià(
p
->
şass_id
 =ğ
JS_CLASS_BIG_INT64_ARRAY
) {

50639 ià(
	`bf_g‘_št64
(&
v64
, &
p1
->
num
, 0) != 0)

50640 
dÚe
;

50641 } ià(
p
->
şass_id
 =ğ
JS_CLASS_BIG_UINT64_ARRAY
) {

50642 ià(
	`bf_g‘_ušt64
((
ušt64_t
 *)&
v64
, &
p1
->
num
) != 0)

50643 
dÚe
;

50645 
dÚe
;

50647 
d
 = 0;

50648 
is_bigšt
 = 1;

50652 
dÚe
;

50655 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

50656 
p
->
şass_id
) {

50657 
JS_CLASS_INT8_ARRAY
:

50658 ià(
is_št
 && (
št8_t
)
v64
 == v64)

50659 
sÿn8
;

50661 
JS_CLASS_UINT8C_ARRAY
:

50662 
JS_CLASS_UINT8_ARRAY
:

50663 ià(
is_št
 && (
ušt8_t
)
v64
 == v64) {

50664 cÚ¡ 
ušt8_t
 *
pv
, *
µ
;

50665 
ušt16_t
 
v
;

50666 
sÿn8
:

50667 
pv
 = 
p
->
u
.
¬¿y
.u.
ušt8_±r
;

50668 
v
 = 
v64
;

50669 ià(
šc
 > 0) {

50670 
µ
 = 
	`memchr
(
pv
 + 
k
, 
v
, 
Ën
 - k);

50671 ià(
µ
)

50672 
»s
 = 
µ
 - 
pv
;

50674 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50675 ià(
pv
[
k
] =ğ
v
) {

50676 
»s
 = 
k
;

50683 
JS_CLASS_INT16_ARRAY
:

50684 ià(
is_št
 && (
št16_t
)
v64
 == v64)

50685 
sÿn16
;

50687 
JS_CLASS_UINT16_ARRAY
:

50688 ià(
is_št
 && (
ušt16_t
)
v64
 == v64) {

50689 cÚ¡ 
ušt16_t
 *
pv
;

50690 
ušt16_t
 
v
;

50691 
sÿn16
:

50692 
pv
 = 
p
->
u
.
¬¿y
.u.
ušt16_±r
;

50693 
v
 = 
v64
;

50694 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50695 ià(
pv
[
k
] =ğ
v
) {

50696 
»s
 = 
k
;

50702 
JS_CLASS_INT32_ARRAY
:

50703 ià(
is_št
 && (
št32_t
)
v64
 == v64)

50704 
sÿn32
;

50706 
JS_CLASS_UINT32_ARRAY
:

50707 ià(
is_št
 && (
ušt32_t
)
v64
 == v64) {

50708 cÚ¡ 
ušt32_t
 *
pv
;

50709 
ušt32_t
 
v
;

50710 
sÿn32
:

50711 
pv
 = 
p
->
u
.
¬¿y
.u.
ušt32_±r
;

50712 
v
 = 
v64
;

50713 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50714 ià(
pv
[
k
] =ğ
v
) {

50715 
»s
 = 
k
;

50721 
JS_CLASS_FLOAT32_ARRAY
:

50722 ià(
is_bigšt
)

50724 ià(
	`i¢ª
(
d
)) {

50725 cÚ¡ *
pv
 = 
p
->
u
.
¬¿y
.u.
æßt_±r
;

50727 ià(
¥ecŸl
 !ğ
¥ecŸl_šşudes
)

50728 
dÚe
;

50729 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50730 ià(
	`i¢ª
(
pv
[
k
])) {

50731 
»s
 = 
k
;

50735 } ià((
f
 = ()
d
) == d) {

50736 cÚ¡ *
pv
 = 
p
->
u
.
¬¿y
.u.
æßt_±r
;

50737 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50738 ià(
pv
[
k
] =ğ
f
) {

50739 
»s
 = 
k
;

50745 
JS_CLASS_FLOAT64_ARRAY
:

50746 ià(
is_bigšt
)

50748 ià(
	`i¢ª
(
d
)) {

50749 cÚ¡ *
pv
 = 
p
->
u
.
¬¿y
.u.
doubË_±r
;

50751 ià(
¥ecŸl
 !ğ
¥ecŸl_šşudes
)

50752 
dÚe
;

50753 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50754 ià(
	`i¢ª
(
pv
[
k
])) {

50755 
»s
 = 
k
;

50760 cÚ¡ *
pv
 = 
p
->
u
.
¬¿y
.u.
doubË_±r
;

50761 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50762 ià(
pv
[
k
] =ğ
d
) {

50763 
»s
 = 
k
;

50769 #ifdeà
CONFIG_BIGNUM


50770 
JS_CLASS_BIG_INT64_ARRAY
:

50771 ià(
is_bigšt
 || (
	`is_m©h_mode
(
ùx
è&& 
is_št
 &&

50772 
v64
 >ğ-
MAX_SAFE_INTEGER
 &&

50773 
v64
 <ğ
MAX_SAFE_INTEGER
)) {

50774 
sÿn64
;

50777 
JS_CLASS_BIG_UINT64_ARRAY
:

50778 ià(
is_bigšt
 || (
	`is_m©h_mode
(
ùx
è&& 
is_št
 &&

50779 
v64
 >ğ0 && v64 <ğ
MAX_SAFE_INTEGER
)) {

50780 cÚ¡ 
ušt64_t
 *
pv
;

50781 
ušt64_t
 
v
;

50782 
sÿn64
:

50783 
pv
 = 
p
->
u
.
¬¿y
.u.
ušt64_±r
;

50784 
v
 = 
v64
;

50785 ; 
k
 !ğ
¡İ
; k +ğ
šc
) {

50786 ià(
pv
[
k
] =ğ
v
) {

50787 
»s
 = 
k
;

50796 
dÚe
:

50797 ià(
¥ecŸl
 =ğ
¥ecŸl_šşudes
)

50798  
	`JS_NewBoŞ
(
ùx
, 
»s
 >= 0);

50800  
	`JS_NewIÁ32
(
ùx
, 
»s
);

50802 
exû±iÚ
:

50803  
JS_EXCEPTION
;

50804 
	}
}

50806 
JSV®ue
 
	$js_ty³d_¬¿y_još
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50807 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
toLoÿËSŒšg
)

50809 
JSV®ue
 
£p
 = 
JS_UNDEFINED
, 
–
;

50810 
SŒšgBufãr
 
b_s
, *
b
 = &b_s;

50811 
JSSŒšg
 *
p
 = 
NULL
;

50812 
i
, 
n
;

50813 
c
;

50815 
n
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50816 ià(
n
 < 0)

50817 
exû±iÚ
;

50819 
c
 = ',';

50820 ià(!
toLoÿËSŒšg
 && 
¬gc
 > 0 && !
	`JS_IsUndefšed
(
¬gv
[0])) {

50821 
£p
 = 
	`JS_ToSŒšg
(
ùx
, 
¬gv
[0]);

50822 ià(
	`JS_IsExû±iÚ
(
£p
))

50823 
exû±iÚ
;

50824 
p
 = 
	`JS_VALUE_GET_STRING
(
£p
);

50825 ià(
p
->
Ën
 =ğ1 && !p->
is_wide_ch¬
)

50826 
c
 = 
p
->
u
.
¡r8
[0];

50828 
c
 = -1;

50830 
	`¡ršg_bufãr_š™
(
ùx
, 
b
, 0);

50833 
i
 = 0; i < 
n
; i++) {

50834 ià(
i
 > 0) {

50835 ià(
c
 >= 0) {

50836 ià(
	`¡ršg_bufãr_putc8
(
b
, 
c
))

50837 
ç
;

50839 ià(
	`¡ršg_bufãr_cÚÿt
(
b
, 
p
, 0,…->
Ën
))

50840 
ç
;

50843 
–
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
this_v®
, 
i
);

50844 ià(
	`JS_IsExû±iÚ
(
–
))

50845 
ç
;

50846 ià(
toLoÿËSŒšg
) {

50847 
–
 = 
	`JS_ToLoÿËSŒšgF»e
(
ùx
,ƒl);

50849 ià(
	`¡ršg_bufãr_cÚÿt_v®ue_ä“
(
b
, 
–
))

50850 
ç
;

50852 
	`JS_F»eV®ue
(
ùx
, 
£p
);

50853  
	`¡ršg_bufãr_’d
(
b
);

50855 
ç
:

50856 
	`¡ršg_bufãr_ä“
(
b
);

50857 
	`JS_F»eV®ue
(
ùx
, 
£p
);

50858 
exû±iÚ
:

50859  
JS_EXCEPTION
;

50860 
	}
}

50862 
JSV®ue
 
	$js_ty³d_¬¿y_»v”£
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50863 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50865 
JSObjeù
 *
p
;

50866 
Ën
;

50868 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50869 ià(
Ën
 < 0)

50870  
JS_EXCEPTION
;

50871 ià(
Ën
 > 0) {

50872 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

50873 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
)) {

50876 
ušt8_t
 *
p1
 = 
p
->
u
.
¬¿y
.u.
ušt8_±r
;

50877 
ušt8_t
 *
p2
 = 
p1
 + 
Ën
 - 1;

50878 
p1
 < 
p2
) {

50879 
ušt8_t
 
v
 = *
p1
;

50880 *
p1
++ = *
p2
;

50881 *
p2
-- = 
v
;

50887 
ušt16_t
 *
p1
 = 
p
->
u
.
¬¿y
.u.
ušt16_±r
;

50888 
ušt16_t
 *
p2
 = 
p1
 + 
Ën
 - 1;

50889 
p1
 < 
p2
) {

50890 
ušt16_t
 
v
 = *
p1
;

50891 *
p1
++ = *
p2
;

50892 *
p2
-- = 
v
;

50898 
ušt32_t
 *
p1
 = 
p
->
u
.
¬¿y
.u.
ušt32_±r
;

50899 
ušt32_t
 *
p2
 = 
p1
 + 
Ën
 - 1;

50900 
p1
 < 
p2
) {

50901 
ušt32_t
 
v
 = *
p1
;

50902 *
p1
++ = *
p2
;

50903 *
p2
-- = 
v
;

50909 
ušt64_t
 *
p1
 = 
p
->
u
.
¬¿y
.u.
ušt64_±r
;

50910 
ušt64_t
 *
p2
 = 
p1
 + 
Ën
 - 1;

50911 
p1
 < 
p2
) {

50912 
ušt64_t
 
v
 = *
p1
;

50913 *
p1
++ = *
p2
;

50914 *
p2
-- = 
v
;

50919 
	`abÜt
();

50922  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

50923 
	}
}

50925 
JSV®ue
 
	$js_ty³d_¬¿y_¦iû
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50926 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50928 
JSV®ueCÚ¡
 
¬gs
[2];

50929 
JSV®ue
 
¬r
, 
v®
;

50930 
JSObjeù
 *
p
, *
p1
;

50931 
n
, 
Ën
, 
¡¬t
, 
fš®
, 
couÁ
, 
shiá
;

50933 
¬r
 = 
JS_UNDEFINED
;

50934 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

50935 ià(
Ën
 < 0)

50936 
exû±iÚ
;

50938 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
¡¬t
, 
¬gv
[0], 0, 
Ën
,†en))

50939 
exû±iÚ
;

50940 
fš®
 = 
Ën
;

50941 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

50942 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
fš®
, 
¬gv
[1], 0, 
Ën
,†en))

50943 
exû±iÚ
;

50945 
couÁ
 = 
	`max_št
(
fš®
 - 
¡¬t
, 0);

50947 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 0);

50948 ià(
p
 =ğ
NULL
)

50949 
exû±iÚ
;

50950 
shiá
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

50952 
¬gs
[0] = 
this_v®
;

50953 
¬gs
[1] = 
	`JS_NewIÁ32
(
ùx
, 
couÁ
);

50954 
¬r
 = 
	`js_ty³d_¬¿y___¥ec›sC»©e
(
ùx
, 
JS_UNDEFINED
, 2, 
¬gs
);

50955 ià(
	`JS_IsExû±iÚ
(
¬r
))

50956 
exû±iÚ
;

50958 ià(
couÁ
 > 0) {

50959 ià(
	`v®id©e_ty³d_¬¿y
(
ùx
, 
this_v®
)

50960 || 
	`v®id©e_ty³d_¬¿y
(
ùx
, 
¬r
))

50961 
exû±iÚ
;

50963 
p1
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
¬r
, 0);

50964 ià(
p1
 !ğ
NULL
 && 
p
->
şass_id
 ==…1->class_id &&

50965 
	`ty³d_¬¿y_g‘_Ëngth
(
ùx
, 
p1
è>ğ
couÁ
 &&

50966 
	`ty³d_¬¿y_g‘_Ëngth
(
ùx
, 
p
è>ğ
¡¬t
 + 
couÁ
) {

50967 
	`memıy
(
p1
->
u
.
¬¿y
.u.
ušt8_±r
,

50968 
p
->
u
.
¬¿y
.u.
ušt8_±r
 + (
¡¬t
 << 
shiá
),

50969 
couÁ
 << 
shiá
);

50971 
n
 = 0;‚ < 
couÁ
;‚++) {

50972 
v®
 = 
	`JS_G‘Prİ”tyV®ue
(
ùx
, 
this_v®
, 
	`JS_NewIÁ32
(ùx, 
¡¬t
 + 
n
));

50973 ià(
	`JS_IsExû±iÚ
(
v®
))

50974 
exû±iÚ
;

50975 ià(
	`JS_S‘Prİ”tyV®ue
(
ùx
, 
¬r
, 
	`JS_NewIÁ32
(ùx, 
n
), 
v®
,

50976 
JS_PROP_THROW
) < 0)

50977 
exû±iÚ
;

50981  
¬r
;

50983 
exû±iÚ
:

50984 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

50985  
JS_EXCEPTION
;

50986 
	}
}

50988 
JSV®ue
 
	$js_ty³d_¬¿y_sub¬¿y
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

50989 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

50991 
JSV®ueCÚ¡
 
¬gs
[4];

50992 
JSV®ue
 
¬r
, 
by‹Off£t
, 
_bufãr
;

50993 
JSObjeù
 *
p
;

50994 
Ën
, 
¡¬t
, 
fš®
, 
couÁ
, 
shiá
, 
off£t
;

50996 
p
 = 
	`g‘_ty³d_¬¿y
(
ùx
, 
this_v®
, 0);

50997 ià(!
p
)

50998 
exû±iÚ
;

50999 
Ën
 = 
p
->
u
.
¬¿y
.
couÁ
;

51000 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
¡¬t
, 
¬gv
[0], 0, 
Ën
,†en))

51001 
exû±iÚ
;

51003 
fš®
 = 
Ën
;

51004 ià(!
	`JS_IsUndefšed
(
¬gv
[1])) {

51005 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
fš®
, 
¬gv
[1], 0, 
Ën
,†en))

51006 
exû±iÚ
;

51008 
couÁ
 = 
	`max_št
(
fš®
 - 
¡¬t
, 0);

51009 
by‹Off£t
 = 
	`js_ty³d_¬¿y_g‘_by‹Off£t
(
ùx
, 
this_v®
, 0);

51010 ià(
	`JS_IsExû±iÚ
(
by‹Off£t
))

51011 
exû±iÚ
;

51012 
shiá
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

51013 
off£t
 = 
	`JS_VALUE_GET_INT
(
by‹Off£t
è+ (
¡¬t
 << 
shiá
);

51014 
	`JS_F»eV®ue
(
ùx
, 
by‹Off£t
);

51015 
_bufãr
 = 
	`js_ty³d_¬¿y_g‘_bufãr
(
ùx
, 
this_v®
, 0);

51016 ià(
	`JS_IsExû±iÚ
(
_bufãr
))

51017 
exû±iÚ
;

51018 
¬gs
[0] = 
this_v®
;

51019 
¬gs
[1] = 
_bufãr
;

51020 
¬gs
[2] = 
	`JS_NewIÁ32
(
ùx
, 
off£t
);

51021 
¬gs
[3] = 
	`JS_NewIÁ32
(
ùx
, 
couÁ
);

51022 
¬r
 = 
	`js_ty³d_¬¿y___¥ec›sC»©e
(
ùx
, 
JS_UNDEFINED
, 4, 
¬gs
);

51023 
	`JS_F»eV®ue
(
ùx
, 
_bufãr
);

51024  
¬r
;

51026 
exû±iÚ
:

51027  
JS_EXCEPTION
;

51028 
	}
}

51032 
	$js_cmp_doubËs
(
x
, 
y
)

51034 ià(
	`i¢ª
(
x
)è i¢ª(
y
) ? 0 : +1;

51035 ià(
	`i¢ª
(
y
))  -1;

51036 ià(
x
 < 
y
)  -1;

51037 ià(
x
 > 
y
)  1;

51038 ià(
x
 != 0)  0;

51039 ià(
	`signb™
(
x
)è signb™(
y
) ? 0 : -1;

51040  
	`signb™
(
y
) ? 1 : 0;

51041 
	}
}

51043 
	$js_TA_cmp_št8
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51044  *(cÚ¡ 
št8_t
 *)
a
 - *(cÚ¡ iÁ8_ˆ*)
b
;

51045 
	}
}

51047 
	$js_TA_cmp_ušt8
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51048  *(cÚ¡ 
ušt8_t
 *)
a
 - *(cÚ¡ ušt8_ˆ*)
b
;

51049 
	}
}

51051 
	$js_TA_cmp_št16
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51052  *(cÚ¡ 
št16_t
 *)
a
 - *(cÚ¡ iÁ16_ˆ*)
b
;

51053 
	}
}

51055 
	$js_TA_cmp_ušt16
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51056  *(cÚ¡ 
ušt16_t
 *)
a
 - *(cÚ¡ ušt16_ˆ*)
b
;

51057 
	}
}

51059 
	$js_TA_cmp_št32
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51060 
št32_t
 
x
 = *(cÚ¡ iÁ32_ˆ*)
a
;

51061 
št32_t
 
y
 = *(cÚ¡ iÁ32_ˆ*)
b
;

51062  (
y
 < 
x
) - (y > x);

51063 
	}
}

51065 
	$js_TA_cmp_ušt32
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51066 
ušt32_t
 
x
 = *(cÚ¡ ušt32_ˆ*)
a
;

51067 
ušt32_t
 
y
 = *(cÚ¡ ušt32_ˆ*)
b
;

51068  (
y
 < 
x
) - (y > x);

51069 
	}
}

51071 #ifdeà
CONFIG_BIGNUM


51072 
	$js_TA_cmp_št64
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51073 
št64_t
 
x
 = *(cÚ¡ iÁ64_ˆ*)
a
;

51074 
št64_t
 
y
 = *(cÚ¡ iÁ64_ˆ*)
b
;

51075  (
y
 < 
x
) - (y > x);

51076 
	}
}

51078 
	$js_TA_cmp_ušt64
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51079 
ušt64_t
 
x
 = *(cÚ¡ ušt64_ˆ*)
a
;

51080 
ušt64_t
 
y
 = *(cÚ¡ ušt64_ˆ*)
b
;

51081  (
y
 < 
x
) - (y > x);

51082 
	}
}

51085 
	$js_TA_cmp_æßt32
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51086  
	`js_cmp_doubËs
(*(cÚ¡ *)
a
, *(cÚ¡ *)
b
);

51087 
	}
}

51089 
	$js_TA_cmp_æßt64
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51090  
	`js_cmp_doubËs
(*(cÚ¡ *)
a
, *(cÚ¡ *)
b
);

51091 
	}
}

51093 
JSV®ue
 
	$js_TA_g‘_št8
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51094  
	`JS_NewIÁ32
(
ùx
, *(cÚ¡ 
št8_t
 *)
a
);

51095 
	}
}

51097 
JSV®ue
 
	$js_TA_g‘_ušt8
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51098  
	`JS_NewIÁ32
(
ùx
, *(cÚ¡ 
ušt8_t
 *)
a
);

51099 
	}
}

51101 
JSV®ue
 
	$js_TA_g‘_št16
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51102  
	`JS_NewIÁ32
(
ùx
, *(cÚ¡ 
št16_t
 *)
a
);

51103 
	}
}

51105 
JSV®ue
 
	$js_TA_g‘_ušt16
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51106  
	`JS_NewIÁ32
(
ùx
, *(cÚ¡ 
ušt16_t
 *)
a
);

51107 
	}
}

51109 
JSV®ue
 
	$js_TA_g‘_št32
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51110  
	`JS_NewIÁ32
(
ùx
, *(cÚ¡ 
št32_t
 *)
a
);

51111 
	}
}

51113 
JSV®ue
 
	$js_TA_g‘_ušt32
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51114  
	`JS_NewUšt32
(
ùx
, *(cÚ¡ 
ušt32_t
 *)
a
);

51115 
	}
}

51117 #ifdeà
CONFIG_BIGNUM


51118 
JSV®ue
 
	$js_TA_g‘_št64
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51119  
	`JS_NewBigIÁ64
(
ùx
, *(
št64_t
 *)
a
);

51120 
	}
}

51122 
JSV®ue
 
	$js_TA_g‘_ušt64
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51123  
	`JS_NewBigUšt64
(
ùx
, *(
ušt64_t
 *)
a
);

51124 
	}
}

51127 
JSV®ue
 
	$js_TA_g‘_æßt32
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51128  
	`__JS_NewFlßt64
(
ùx
, *(cÚ¡ *)
a
);

51129 
	}
}

51131 
JSV®ue
 
	$js_TA_g‘_æßt64
(
JSCÚ‹xt
 *
ùx
, cÚ¡ *
a
) {

51132  
	`__JS_NewFlßt64
(
ùx
, *(cÚ¡ *)
a
);

51133 
	}
}

51135 
	sTA_sÜt_cÚ‹xt
 {

51136 
JSCÚ‹xt
 *
	mùx
;

51137 
	mexû±iÚ
;

51138 
JSV®ueCÚ¡
 
	m¬r
;

51139 
JSV®ueCÚ¡
 
	mcmp
;

51140 
JSV®ue
 (*
g‘fun
)(
JSCÚ‹xt
 *
	mùx
, cÚ¡ *
	ma
);

51141 
ušt8_t
 *
	m¬¿y_±r
;

51142 
	m–t_size
;

51145 
	$js_TA_cmp_g’”ic
(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
) {

51146 
TA_sÜt_cÚ‹xt
 *
psc
 = 
İaque
;

51147 
JSCÚ‹xt
 *
ùx
 = 
psc
->ctx;

51148 
ušt32_t
 
a_idx
, 
b_idx
;

51149 
JSV®ueCÚ¡
 
¬gv
[2];

51150 
JSV®ue
 
»s
;

51151 
cmp
;

51153 
cmp
 = 0;

51154 ià(!
psc
->
exû±iÚ
) {

51155 
a_idx
 = *(
ušt32_t
 *)
a
;

51156 
b_idx
 = *(
ušt32_t
 *)
b
;

51157 
¬gv
[0] = 
psc
->
	`g‘fun
(
ùx
,…sc->
¬¿y_±r
 +

51158 
a_idx
 * (
size_t
)
psc
->
–t_size
);

51159 
¬gv
[1] = 
psc
->
	`g‘fun
(
ùx
,…sc->
¬¿y_±r
 +

51160 
b_idx
 * (
size_t
)(
psc
->
–t_size
));

51161 
»s
 = 
	`JS_C®l
(
ùx
, 
psc
->
cmp
, 
JS_UNDEFINED
, 2, 
¬gv
);

51162 ià(
	`JS_IsExû±iÚ
(
»s
)) {

51163 
psc
->
exû±iÚ
 = 1;

51164 
dÚe
;

51166 ià(
	`JS_VALUE_GET_TAG
(
»s
è=ğ
JS_TAG_INT
) {

51167 
v®
 = 
	`JS_VALUE_GET_INT
(
»s
);

51168 
cmp
 = (
v®
 > 0) - (val < 0);

51170 
v®
;

51171 ià(
	`JS_ToFlßt64F»e
(
ùx
, &
v®
, 
»s
) < 0) {

51172 
psc
->
exû±iÚ
 = 1;

51173 
dÚe
;

51175 
cmp
 = (
v®
 > 0) - (val < 0);

51178 ià(
cmp
 == 0) {

51180 
cmp
 = (
a_idx
 > 
b_idx
) - (a_idx < b_idx);

51182 ià(
	`v®id©e_ty³d_¬¿y
(
ùx
, 
psc
->
¬r
) < 0) {

51183 
psc
->
exû±iÚ
 = 1;

51185 
dÚe
:

51186 
	`JS_F»eV®ue
(
ùx
, (
JSV®ue
)
¬gv
[0]);

51187 
	`JS_F»eV®ue
(
ùx
, (
JSV®ue
)
¬gv
[1]);

51189  
cmp
;

51190 
	}
}

51192 
JSV®ue
 
	$js_ty³d_¬¿y_sÜt
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
this_v®
,

51193 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

51195 
JSObjeù
 *
p
;

51196 
Ën
;

51197 
size_t
 
–t_size
;

51198 
TA_sÜt_cÚ‹xt
 
tsc
;

51199 *
¬¿y_±r
;

51200 (*
cmpfun
)(cÚ¡ *
a
, cÚ¡ *
b
, *
İaque
);

51202 
tsc
.
ùx
 = ctx;

51203 
tsc
.
exû±iÚ
 = 0;

51204 
tsc
.
¬r
 = 
this_v®
;

51205 
tsc
.
cmp
 = 
¬gv
[0];

51207 
Ën
 = 
	`js_ty³d_¬¿y_g‘_Ëngth_š‹º®
(
ùx
, 
this_v®
);

51208 ià(
Ën
 < 0)

51209  
JS_EXCEPTION
;

51210 ià(!
	`JS_IsUndefšed
(
tsc
.
cmp
è&& 
	`check_funùiÚ
(
ùx
,sc.cmp))

51211  
JS_EXCEPTION
;

51213 ià(
Ën
 > 1) {

51214 
p
 = 
	`JS_VALUE_GET_OBJ
(
this_v®
);

51215 
p
->
şass_id
) {

51216 
JS_CLASS_INT8_ARRAY
:

51217 
tsc
.
g‘fun
 = 
js_TA_g‘_št8
;

51218 
cmpfun
 = 
js_TA_cmp_št8
;

51220 
JS_CLASS_UINT8C_ARRAY
:

51221 
JS_CLASS_UINT8_ARRAY
:

51222 
tsc
.
g‘fun
 = 
js_TA_g‘_ušt8
;

51223 
cmpfun
 = 
js_TA_cmp_ušt8
;

51225 
JS_CLASS_INT16_ARRAY
:

51226 
tsc
.
g‘fun
 = 
js_TA_g‘_št16
;

51227 
cmpfun
 = 
js_TA_cmp_št16
;

51229 
JS_CLASS_UINT16_ARRAY
:

51230 
tsc
.
g‘fun
 = 
js_TA_g‘_ušt16
;

51231 
cmpfun
 = 
js_TA_cmp_ušt16
;

51233 
JS_CLASS_INT32_ARRAY
:

51234 
tsc
.
g‘fun
 = 
js_TA_g‘_št32
;

51235 
cmpfun
 = 
js_TA_cmp_št32
;

51237 
JS_CLASS_UINT32_ARRAY
:

51238 
tsc
.
g‘fun
 = 
js_TA_g‘_ušt32
;

51239 
cmpfun
 = 
js_TA_cmp_ušt32
;

51241 #ifdeà
CONFIG_BIGNUM


51242 
JS_CLASS_BIG_INT64_ARRAY
:

51243 
tsc
.
g‘fun
 = 
js_TA_g‘_št64
;

51244 
cmpfun
 = 
js_TA_cmp_št64
;

51246 
JS_CLASS_BIG_UINT64_ARRAY
:

51247 
tsc
.
g‘fun
 = 
js_TA_g‘_ušt64
;

51248 
cmpfun
 = 
js_TA_cmp_ušt64
;

51251 
JS_CLASS_FLOAT32_ARRAY
:

51252 
tsc
.
g‘fun
 = 
js_TA_g‘_æßt32
;

51253 
cmpfun
 = 
js_TA_cmp_æßt32
;

51255 
JS_CLASS_FLOAT64_ARRAY
:

51256 
tsc
.
g‘fun
 = 
js_TA_g‘_æßt64
;

51257 
cmpfun
 = 
js_TA_cmp_æßt64
;

51260 
	`abÜt
();

51262 
¬¿y_±r
 = 
p
->
u
.
¬¿y
.u.
±r
;

51263 
–t_size
 = 1 << 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

51264 ià(!
	`JS_IsUndefšed
(
tsc
.
cmp
)) {

51265 
ušt32_t
 *
¬¿y_idx
;

51266 *
¬¿y_tmp
;

51267 
size_t
 
i
, 
j
;

51270 
¬¿y_idx
 = 
	`js_m®loc
(
ùx
, 
Ën
 * (array_idx[0]));

51271 ià(!
¬¿y_idx
)

51272  
JS_EXCEPTION
;

51273 
i
 = 0; i < 
Ën
; i++)

51274 
¬¿y_idx
[
i
] = i;

51275 
tsc
.
¬¿y_±r
 =‡rray_ptr;

51276 
tsc
.
–t_size
 =ƒlt_size;

51277 
	`rqsÜt
(
¬¿y_idx
, 
Ën
, (array_idx[0]),

51278 
js_TA_cmp_g’”ic
, &
tsc
);

51279 ià(
tsc
.
exû±iÚ
)

51280 
ç
;

51281 
¬¿y_tmp
 = 
	`js_m®loc
(
ùx
, 
Ën
 * 
–t_size
);

51282 ià(!
¬¿y_tmp
) {

51283 
ç
:

51284 
	`js_ä“
(
ùx
, 
¬¿y_idx
);

51285  
JS_EXCEPTION
;

51287 
	`memıy
(
¬¿y_tmp
, 
¬¿y_±r
, 
Ën
 * 
–t_size
);

51288 
–t_size
) {

51290 
i
 = 0; i < 
Ën
; i++) {

51291 
j
 = 
¬¿y_idx
[
i
];

51292 ((
ušt8_t
 *)
¬¿y_±r
)[
i
] = ((ušt8_ˆ*)
¬¿y_tmp
)[
j
];

51296 
i
 = 0; i < 
Ën
; i++) {

51297 
j
 = 
¬¿y_idx
[
i
];

51298 ((
ušt16_t
 *)
¬¿y_±r
)[
i
] = ((ušt16_ˆ*)
¬¿y_tmp
)[
j
];

51302 
i
 = 0; i < 
Ën
; i++) {

51303 
j
 = 
¬¿y_idx
[
i
];

51304 ((
ušt32_t
 *)
¬¿y_±r
)[
i
] = ((ušt32_ˆ*)
¬¿y_tmp
)[
j
];

51308 
i
 = 0; i < 
Ën
; i++) {

51309 
j
 = 
¬¿y_idx
[
i
];

51310 ((
ušt64_t
 *)
¬¿y_±r
)[
i
] = ((ušt64_ˆ*)
¬¿y_tmp
)[
j
];

51314 
	`abÜt
();

51316 
	`js_ä“
(
ùx
, 
¬¿y_tmp
);

51317 
	`js_ä“
(
ùx
, 
¬¿y_idx
);

51319 
	`rqsÜt
(
¬¿y_±r
, 
Ën
, 
–t_size
, 
cmpfun
, &
tsc
);

51320 ià(
tsc
.
exû±iÚ
)

51321  
JS_EXCEPTION
;

51324  
	`JS_DupV®ue
(
ùx
, 
this_v®
);

51325 
	}
}

51327 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_ty³d_¬¿y_ba£_funcs
[] = {

51328 
JS_CFUNC_DEF
("äom", 1, 
js_ty³d_¬¿y_äom
 ),

51329 
JS_CFUNC_DEF
("of", 0, 
js_ty³d_¬¿y_of
 ),

51330 
JS_CGETSET_DEF
("[SymbŞ.¥ec›s]", 
js_g‘_this
, 
NULL
 ),

51336 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_ty³d_¬¿y_ba£_´Ùo_funcs
[] = {

51337 
JS_CGETSET_DEF
("Ëngth", 
js_ty³d_¬¿y_g‘_Ëngth
, 
NULL
 ),

51338 
JS_CGETSET_MAGIC_DEF
("bufãr", 
js_ty³d_¬¿y_g‘_bufãr
, 
NULL
, 0 ),

51339 
JS_CGETSET_MAGIC_DEF
("by‹L’gth", 
js_ty³d_¬¿y_g‘_by‹L’gth
, 
NULL
, 0 ),

51340 
JS_CGETSET_MAGIC_DEF
("by‹Off£t", 
js_ty³d_¬¿y_g‘_by‹Off£t
, 
NULL
, 0 ),

51341 
JS_CFUNC_DEF
("£t", 1, 
js_ty³d_¬¿y_£t
 ),

51342 
JS_CFUNC_MAGIC_DEF
("v®ues", 0, 
js_ü—‹_ty³d_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_VALUE
 ),

51343 
JS_ALIAS_DEF
("[Symbol.iterator]", "values" ),

51344 
JS_CFUNC_MAGIC_DEF
("keys", 0, 
js_ü—‹_ty³d_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_KEY
 ),

51345 
JS_CFUNC_MAGIC_DEF
("’Œ›s", 0, 
js_ü—‹_ty³d_¬¿y_™”©Ü
, 
JS_ITERATOR_KIND_KEY_AND_VALUE
 ),

51346 
JS_CGETSET_DEF
("[SymbŞ.toSŒšgTag]", 
js_ty³d_¬¿y_g‘_toSŒšgTag
, 
NULL
 ),

51347 
JS_CFUNC_DEF
("cİyW™hš", 2, 
js_ty³d_¬¿y_cİyW™hš
 ),

51348 
JS_CFUNC_MAGIC_DEF
("ev”y", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_ev”y
 | 
¥ecŸl_TA
 ),

51349 
JS_CFUNC_MAGIC_DEF
("some", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_some
 | 
¥ecŸl_TA
 ),

51350 
JS_CFUNC_MAGIC_DEF
("fÜEach", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_fÜEach
 | 
¥ecŸl_TA
 ),

51351 
JS_CFUNC_MAGIC_DEF
("m­", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_m­
 | 
¥ecŸl_TA
 ),

51352 
JS_CFUNC_MAGIC_DEF
("f‹r", 1, 
js_¬¿y_ev”y
, 
¥ecŸl_f‹r
 | 
¥ecŸl_TA
 ),

51353 
JS_CFUNC_MAGIC_DEF
("»duû", 1, 
js_¬¿y_»duû
, 
¥ecŸl_»duû
 | 
¥ecŸl_TA
 ),

51354 
JS_CFUNC_MAGIC_DEF
("»duûRight", 1, 
js_¬¿y_»duû
, 
¥ecŸl_»duûRight
 | 
¥ecŸl_TA
 ),

51355 
JS_CFUNC_DEF
("fl", 1, 
js_ty³d_¬¿y_fl
 ),

51356 
JS_CFUNC_MAGIC_DEF
("fšd", 1, 
js_ty³d_¬¿y_fšd
, 0 ),

51357 
JS_CFUNC_MAGIC_DEF
("fšdIndex", 1, 
js_ty³d_¬¿y_fšd
, 1 ),

51358 
JS_CFUNC_DEF
("»v”£", 0, 
js_ty³d_¬¿y_»v”£
 ),

51359 
JS_CFUNC_DEF
("¦iû", 2, 
js_ty³d_¬¿y_¦iû
 ),

51360 
JS_CFUNC_DEF
("sub¬¿y", 2, 
js_ty³d_¬¿y_sub¬¿y
 ),

51361 
JS_CFUNC_DEF
("sÜt", 1, 
js_ty³d_¬¿y_sÜt
 ),

51362 
JS_CFUNC_MAGIC_DEF
("još", 1, 
js_ty³d_¬¿y_još
, 0 ),

51363 
JS_CFUNC_MAGIC_DEF
("toLoÿËSŒšg", 0, 
js_ty³d_¬¿y_još
, 1 ),

51364 
JS_CFUNC_MAGIC_DEF
("šdexOf", 1, 
js_ty³d_¬¿y_šdexOf
, 
¥ecŸl_šdexOf
 ),

51365 
JS_CFUNC_MAGIC_DEF
("Ï¡IndexOf", 1, 
js_ty³d_¬¿y_šdexOf
, 
¥ecŸl_Ï¡IndexOf
 ),

51366 
JS_CFUNC_MAGIC_DEF
("šşudes", 1, 
js_ty³d_¬¿y_šdexOf
, 
¥ecŸl_šşudes
 ),

51370 
JSV®ue
 
	$js_ty³d_¬¿y_ba£_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

51371 
JSV®ueCÚ¡
 
this_v®
,

51372 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

51374  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot be called");

51375 
	}
}

51378 
	$ty³d_¬¿y_š™
(
JSCÚ‹xt
 *
ùx
, 
JSV®ueCÚ¡
 
obj
,

51379 
JSV®ue
 
bufãr
, 
ušt64_t
 
off£t
, ušt64_ˆ
Ën
)

51381 
JSTy³dA¼ay
 *

;

51382 
JSObjeù
 *
p
, *
pbufãr
;

51383 
JSA¼ayBufãr
 *
abuf
;

51384 
size_log2
;

51386 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

51387 
size_log2
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

51388 

 = 
	`js_m®loc
(
ùx
, (*ta));

51389 ià(!

) {

51390 
	`JS_F»eV®ue
(
ùx
, 
bufãr
);

51393 
pbufãr
 = 
	`JS_VALUE_GET_OBJ
(
bufãr
);

51394 
abuf
 = 
pbufãr
->
u
.
¬¿y_bufãr
;

51395 

->
obj
 = 
p
;

51396 

->
bufãr
 = 
pbufãr
;

51397 

->
off£t
 = offset;

51398 

->
Ëngth
 = 
Ën
 << 
size_log2
;

51399 
	`li¡_add_
(&

->
lšk
, &
abuf
->
¬¿y_li¡
);

51400 
p
->
u
.
ty³d_¬¿y
 = 

;

51401 
p
->
u
.
¬¿y
.
couÁ
 = 
Ën
;

51402 
p
->
u
.
¬¿y
.u.
±r
 = 
abuf
->
d©a
 + 
off£t
;

51404 
	}
}

51407 
JSV®ue
 
	$js_¬¿y_äom_™”©Ü
(
JSCÚ‹xt
 *
ùx
, 
ušt32_t
 *
¶’
,

51408 
JSV®ueCÚ¡
 
obj
, JSV®ueCÚ¡ 
m‘hod
)

51410 
JSV®ue
 
¬r
, 
™”
, 
Ãxt_m‘hod
 = 
JS_UNDEFINED
, 
v®
;

51411 
BOOL
 
dÚe
;

51412 
ušt32_t
 
k
;

51414 *
¶’
 = 0;

51415 
¬r
 = 
	`JS_NewA¼ay
(
ùx
);

51416 ià(
	`JS_IsExû±iÚ
(
¬r
))

51417  
¬r
;

51418 
™”
 = 
	`JS_G‘I‹¿tÜ2
(
ùx
, 
obj
, 
m‘hod
);

51419 ià(
	`JS_IsExû±iÚ
(
™”
))

51420 
ç
;

51421 
Ãxt_m‘hod
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
™”
, 
JS_ATOM_Ãxt
);

51422 ià(
	`JS_IsExû±iÚ
(
Ãxt_m‘hod
))

51423 
ç
;

51424 
k
 = 0;

51426 
v®
 = 
	`JS_I‹¿tÜNext
(
ùx
, 
™”
, 
Ãxt_m‘hod
, 0, 
NULL
, &
dÚe
);

51427 ià(
	`JS_IsExû±iÚ
(
v®
))

51428 
ç
;

51429 ià(
dÚe
) {

51430 
	`JS_F»eV®ue
(
ùx
, 
v®
);

51433 ià(
	`JS_C»©eD©aPrİ”tyUšt32
(
ùx
, 
¬r
, 
k
, 
v®
, 
JS_PROP_THROW
) < 0)

51434 
ç
;

51435 
k
++;

51437 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

51438 
	`JS_F»eV®ue
(
ùx
, 
™”
);

51439 *
¶’
 = 
k
;

51440  
¬r
;

51441 
ç
:

51442 
	`JS_F»eV®ue
(
ùx
, 
Ãxt_m‘hod
);

51443 
	`JS_F»eV®ue
(
ùx
, 
™”
);

51444 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

51445  
JS_EXCEPTION
;

51446 
	}
}

51448 
JSV®ue
 
	$js_ty³d_¬¿y_cÚ¡ruùÜ_obj
(
JSCÚ‹xt
 *
ùx
,

51449 
JSV®ueCÚ¡
 
Ãw_rg‘
,

51450 
JSV®ueCÚ¡
 
obj
,

51451 
şassid
)

51453 
JSV®ue
 
™”
, 
»t
, 
¬r
 = 
JS_UNDEFINED
, 
v®
, 
bufãr
;

51454 
ušt32_t
 
i
;

51455 
size_log2
;

51456 
sšt64_t
 
Ën
;

51458 
size_log2
 = 
	`ty³d_¬¿y_size_log2
(
şassid
);

51459 
»t
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
şassid
);

51460 ià(
	`JS_IsExû±iÚ
(
»t
))

51461  
JS_EXCEPTION
;

51463 
™”
 = 
	`JS_G‘Prİ”ty
(
ùx
, 
obj
, 
JS_ATOM_SymbŞ_™”©Ü
);

51464 ià(
	`JS_IsExû±iÚ
(
™”
))

51465 
ç
;

51466 ià(!
	`JS_IsUndefšed
(
™”
è&& !
	`JS_IsNuÎ
(iter)) {

51467 
ušt32_t
 
Ën1
;

51468 
¬r
 = 
	`js_¬¿y_äom_™”©Ü
(
ùx
, &
Ën1
, 
obj
, 
™”
);

51469 
	`JS_F»eV®ue
(
ùx
, 
™”
);

51470 ià(
	`JS_IsExû±iÚ
(
¬r
))

51471 
ç
;

51472 
Ën
 = 
Ën1
;

51474 ià(
	`js_g‘_Ëngth64
(
ùx
, &
Ën
, 
obj
))

51475 
ç
;

51476 
¬r
 = 
	`JS_DupV®ue
(
ùx
, 
obj
);

51479 
bufãr
 = 
	`js_¬¿y_bufãr_cÚ¡ruùÜ1
(
ùx
, 
JS_UNDEFINED
,

51480 
Ën
 << 
size_log2
);

51481 ià(
	`JS_IsExû±iÚ
(
bufãr
))

51482 
ç
;

51483 ià(
	`ty³d_¬¿y_š™
(
ùx
, 
»t
, 
bufãr
, 0, 
Ën
))

51484 
ç
;

51486 
i
 = 0; i < 
Ën
; i++) {

51487 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
¬r
, 
i
);

51488 ià(
	`JS_IsExû±iÚ
(
v®
))

51489 
ç
;

51490 ià(
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
»t
, 
i
, 
v®
) < 0)

51491 
ç
;

51493 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

51494  
»t
;

51495 
ç
:

51496 
	`JS_F»eV®ue
(
ùx
, 
¬r
);

51497 
	`JS_F»eV®ue
(
ùx
, 
»t
);

51498  
JS_EXCEPTION
;

51499 
	}
}

51501 
JSV®ue
 
	$js_ty³d_¬¿y_cÚ¡ruùÜ_
(
JSCÚ‹xt
 *
ùx
,

51502 
JSV®ueCÚ¡
 
Ãw_rg‘
,

51503 
JSV®ueCÚ¡
 
¤c_obj
,

51504 
şassid
)

51506 
JSObjeù
 *
p
, *
¤c_bufãr
;

51507 
JSTy³dA¼ay
 *

;

51508 
JSV®ue
 
ùÜ
, 
obj
, 
bufãr
;

51509 
ušt32_t
 
Ën
, 
i
;

51510 
size_log2
;

51511 
JSA¼ayBufãr
 *
¤c_abuf
, *
abuf
;

51513 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
şassid
);

51514 ià(
	`JS_IsExû±iÚ
(
obj
))

51515  
obj
;

51516 
p
 = 
	`JS_VALUE_GET_OBJ
(
¤c_obj
);

51517 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

51518 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51519 
ç
;

51521 

 = 
p
->
u
.
ty³d_¬¿y
;

51522 
Ën
 = 
p
->
u
.
¬¿y
.
couÁ
;

51523 
¤c_bufãr
 = 

->
bufãr
;

51524 
¤c_abuf
 = 
¤c_bufãr
->
u
.
¬¿y_bufãr
;

51525 ià(!
¤c_abuf
->
sh¬ed
) {

51526 
ùÜ
 = 
	`JS_S³c›sCÚ¡ruùÜ
(
ùx
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 
¤c_bufãr
),

51527 
JS_UNDEFINED
);

51528 ià(
	`JS_IsExû±iÚ
(
ùÜ
))

51529 
ç
;

51532 
ùÜ
 = 
JS_UNDEFINED
;

51534 
size_log2
 = 
	`ty³d_¬¿y_size_log2
(
şassid
);

51535 
bufãr
 = 
	`js_¬¿y_bufãr_cÚ¡ruùÜ1
(
ùx
, 
ùÜ
,

51536 (
ušt64_t
)
Ën
 << 
size_log2
);

51537 
	`JS_F»eV®ue
(
ùx
, 
ùÜ
);

51538 ià(
	`JS_IsExû±iÚ
(
bufãr
))

51539 
ç
;

51541 ià(
	`ty³d_¬¿y_is_d‘ached
(
ùx
, 
p
)) {

51542 
	`JS_F»eV®ue
(
ùx
, 
bufãr
);

51543 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51544 
ç
;

51546 
abuf
 = 
	`JS_G‘O·que
(
bufãr
, 
JS_CLASS_ARRAY_BUFFER
);

51547 ià(
	`ty³d_¬¿y_š™
(
ùx
, 
obj
, 
bufãr
, 0, 
Ën
))

51548 
ç
;

51549 ià(
p
->
şass_id
 =ğ
şassid
) {

51551 
	`memıy
(
abuf
->
d©a
, 
¤c_abuf
->d©¨+ 

->
off£t
,‡buf->
by‹_Ëngth
);

51553 
i
 = 0; i < 
Ën
; i++) {

51554 
JSV®ue
 
v®
;

51555 
v®
 = 
	`JS_G‘Prİ”tyUšt32
(
ùx
, 
¤c_obj
, 
i
);

51556 ià(
	`JS_IsExû±iÚ
(
v®
))

51557 
ç
;

51558 ià(
	`JS_S‘Prİ”tyUšt32
(
ùx
, 
obj
, 
i
, 
v®
) < 0)

51559 
ç
;

51562  
obj
;

51563 
ç
:

51564 
	`JS_F»eV®ue
(
ùx
, 
obj
);

51565  
JS_EXCEPTION
;

51566 
	}
}

51568 
JSV®ue
 
	$js_ty³d_¬¿y_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

51569 
JSV®ueCÚ¡
 
Ãw_rg‘
,

51570 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
,

51571 
şassid
)

51573 
JSV®ue
 
bufãr
, 
obj
;

51574 
JSA¼ayBufãr
 *
abuf
;

51575 
size_log2
;

51576 
ušt64_t
 
Ën
, 
off£t
;

51578 
size_log2
 = 
	`ty³d_¬¿y_size_log2
(
şassid
);

51579 ià(
	`JS_VALUE_GET_TAG
(
¬gv
[0]è!ğ
JS_TAG_OBJECT
) {

51580 ià(
	`JS_ToIndex
(
ùx
, &
Ën
, 
¬gv
[0]))

51581  
JS_EXCEPTION
;

51582 
bufãr
 = 
	`js_¬¿y_bufãr_cÚ¡ruùÜ1
(
ùx
, 
JS_UNDEFINED
,

51583 
Ën
 << 
size_log2
);

51584 ià(
	`JS_IsExû±iÚ
(
bufãr
))

51585  
JS_EXCEPTION
;

51586 
off£t
 = 0;

51588 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
¬gv
[0]);

51589 ià(
p
->
şass_id
 =ğ
JS_CLASS_ARRAY_BUFFER
 ||

51590 
p
->
şass_id
 =ğ
JS_CLASS_SHARED_ARRAY_BUFFER
) {

51591 
abuf
 = 
p
->
u
.
¬¿y_bufãr
;

51592 ià(
	`JS_ToIndex
(
ùx
, &
off£t
, 
¬gv
[1]))

51593  
JS_EXCEPTION
;

51594 ià(
abuf
->
d‘ached
)

51595  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51596 ià((
off£t
 & ((1 << 
size_log2
) - 1)) != 0 ||

51597 
off£t
 > 
abuf
->
by‹_Ëngth
)

51598  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid offset");

51599 ià(
	`JS_IsUndefšed
(
¬gv
[2])) {

51600 ià((
abuf
->
by‹_Ëngth
 & ((1 << 
size_log2
) - 1)) != 0)

51601 
šv®id_Ëngth
;

51602 
Ën
 = (
abuf
->
by‹_Ëngth
 - 
off£t
è>> 
size_log2
;

51604 ià(
	`JS_ToIndex
(
ùx
, &
Ën
, 
¬gv
[2]))

51605  
JS_EXCEPTION
;

51606 ià(
abuf
->
d‘ached
)

51607  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51608 ià((
off£t
 + (
Ën
 << 
size_log2
)è> 
abuf
->
by‹_Ëngth
) {

51609 
šv®id_Ëngth
:

51610  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid†ength");

51613 
bufãr
 = 
	`JS_DupV®ue
(
ùx
, 
¬gv
[0]);

51615 ià(
p
->
şass_id
 >ğ
JS_CLASS_UINT8C_ARRAY
 &&

51616 
p
->
şass_id
 <ğ
JS_CLASS_FLOAT64_ARRAY
) {

51617  
	`js_ty³d_¬¿y_cÚ¡ruùÜ_
(
ùx
, 
Ãw_rg‘
, 
¬gv
[0], 
şassid
);

51619  
	`js_ty³d_¬¿y_cÚ¡ruùÜ_obj
(
ùx
, 
Ãw_rg‘
, 
¬gv
[0], 
şassid
);

51624 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
şassid
);

51625 ià(
	`JS_IsExû±iÚ
(
obj
)) {

51626 
	`JS_F»eV®ue
(
ùx
, 
bufãr
);

51627  
JS_EXCEPTION
;

51629 ià(
	`ty³d_¬¿y_š™
(
ùx
, 
obj
, 
bufãr
, 
off£t
, 
Ën
)) {

51630 
	`JS_F»eV®ue
(
ùx
, 
obj
);

51631  
JS_EXCEPTION
;

51633  
obj
;

51634 
	}
}

51636 
	$js_ty³d_¬¿y_fš®iz”
(
JSRuÁime
 *
¹
, 
JSV®ue
 
v®
)

51638 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

51639 
JSTy³dA¼ay
 *

 = 
p
->
u
.
ty³d_¬¿y
;

51640 ià(

) {

51643 ià(
	`JS_IsLiveObjeù
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 

->
bufãr
))) {

51644 
	`li¡_d–
(&

->
lšk
);

51646 
	`JS_F»eV®ueRT
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 

->
bufãr
));

51647 
	`js_ä“_¹
(
¹
, 

);

51649 
	}
}

51651 
	$js_ty³d_¬¿y_m¬k
(
JSRuÁime
 *
¹
, 
JSV®ueCÚ¡
 
v®
,

51652 
JS_M¬kFunc
 *
m¬k_func
)

51654 
JSObjeù
 *
p
 = 
	`JS_VALUE_GET_OBJ
(
v®
);

51655 
JSTy³dA¼ay
 *

 = 
p
->
u
.
ty³d_¬¿y
;

51656 ià(

) {

51657 
	`JS_M¬kV®ue
(
¹
, 
	`JS_MKPTR
(
JS_TAG_OBJECT
, 

->
bufãr
), 
m¬k_func
);

51659 
	}
}

51661 
JSV®ue
 
	$js_d©av›w_cÚ¡ruùÜ
(
JSCÚ‹xt
 *
ùx
,

51662 
JSV®ueCÚ¡
 
Ãw_rg‘
,

51663 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

51665 
JSA¼ayBufãr
 *
abuf
;

51666 
ušt64_t
 
off£t
;

51667 
ušt32_t
 
Ën
;

51668 
JSV®ueCÚ¡
 
bufãr
;

51669 
JSV®ue
 
obj
;

51670 
JSTy³dA¼ay
 *

;

51671 
JSObjeù
 *
p
;

51673 
bufãr
 = 
¬gv
[0];

51674 
abuf
 = 
	`js_g‘_¬¿y_bufãr
(
ùx
, 
bufãr
);

51675 ià(!
abuf
)

51676  
JS_EXCEPTION
;

51677 
off£t
 = 0;

51678 ià(
¬gc
 > 1) {

51679 ià(
	`JS_ToIndex
(
ùx
, &
off£t
, 
¬gv
[1]))

51680  
JS_EXCEPTION
;

51682 ià(
abuf
->
d‘ached
)

51683  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51684 ià(
off£t
 > 
abuf
->
by‹_Ëngth
)

51685  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid byteOffset");

51686 
Ën
 = 
abuf
->
by‹_Ëngth
 - 
off£t
;

51687 ià(
¬gc
 > 2 && !
	`JS_IsUndefšed
(
¬gv
[2])) {

51688 
ušt64_t
 
l
;

51689 ià(
	`JS_ToIndex
(
ùx
, &
l
, 
¬gv
[2]))

51690  
JS_EXCEPTION
;

51691 ià(
l
 > 
Ën
)

51692  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "invalid byteLength");

51693 
Ën
 = 
l
;

51696 
obj
 = 
	`js_ü—‹_äom_ùÜ
(
ùx
, 
Ãw_rg‘
, 
JS_CLASS_DATAVIEW
);

51697 ià(
	`JS_IsExû±iÚ
(
obj
))

51698  
JS_EXCEPTION
;

51699 ià(
abuf
->
d‘ached
) {

51701 
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51702 
ç
;

51704 

 = 
	`js_m®loc
(
ùx
, (*ta));

51705 ià(!

) {

51706 
ç
:

51707 
	`JS_F»eV®ue
(
ùx
, 
obj
);

51708  
JS_EXCEPTION
;

51710 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

51711 

->
obj
 = 
p
;

51712 

->
bufãr
 = 
	`JS_VALUE_GET_OBJ
(
	`JS_DupV®ue
(
ùx
, buffer));

51713 

->
off£t
 = offset;

51714 

->
Ëngth
 = 
Ën
;

51715 
	`li¡_add_
(&

->
lšk
, &
abuf
->
¬¿y_li¡
);

51716 
p
->
u
.
ty³d_¬¿y
 = 

;

51717  
obj
;

51718 
	}
}

51720 
JSV®ue
 
	$js_d©av›w_g‘V®ue
(
JSCÚ‹xt
 *
ùx
,

51721 
JSV®ueCÚ¡
 
this_obj
,

51722 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
şass_id
)

51724 
JSTy³dA¼ay
 *

;

51725 
JSA¼ayBufãr
 *
abuf
;

51726 
is_sw­
, 
size
;

51727 
ušt8_t
 *
±r
;

51728 
ušt32_t
 
v
;

51729 
ušt64_t
 
pos
;

51731 

 = 
	`JS_G‘O·que2
(
ùx
, 
this_obj
, 
JS_CLASS_DATAVIEW
);

51732 ià(!

)

51733  
JS_EXCEPTION
;

51734 
size
 = 1 << 
	`ty³d_¬¿y_size_log2
(
şass_id
);

51735 ià(
	`JS_ToIndex
(
ùx
, &
pos
, 
¬gv
[0]))

51736  
JS_EXCEPTION
;

51737 
is_sw­
 = 
FALSE
;

51738 ià(
¬gc
 > 1)

51739 
is_sw­
 = 
	`JS_ToBoŞ
(
ùx
, 
¬gv
[1]);

51740 #iâdeà
WORDS_BIGENDIAN


51741 
is_sw­
 ^= 1;

51743 
abuf
 = 

->
bufãr
->
u
.
¬¿y_bufãr
;

51744 ià(
abuf
->
d‘ached
)

51745  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51746 ià((
pos
 + 
size
è> 

->
Ëngth
)

51747  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "out of bound");

51748 
±r
 = 
abuf
->
d©a
 + 

->
off£t
 + 
pos
;

51750 
şass_id
) {

51751 
JS_CLASS_INT8_ARRAY
:

51752  
	`JS_NewIÁ32
(
ùx
, *(
št8_t
 *)
±r
);

51753 
JS_CLASS_UINT8_ARRAY
:

51754  
	`JS_NewIÁ32
(
ùx
, *(
ušt8_t
 *)
±r
);

51755 
JS_CLASS_INT16_ARRAY
:

51756 
v
 = 
	`g‘_u16
(
±r
);

51757 ià(
is_sw­
)

51758 
v
 = 
	`bsw­16
(v);

51759  
	`JS_NewIÁ32
(
ùx
, (
št16_t
)
v
);

51760 
JS_CLASS_UINT16_ARRAY
:

51761 
v
 = 
	`g‘_u16
(
±r
);

51762 ià(
is_sw­
)

51763 
v
 = 
	`bsw­16
(v);

51764  
	`JS_NewIÁ32
(
ùx
, 
v
);

51765 
JS_CLASS_INT32_ARRAY
:

51766 
v
 = 
	`g‘_u32
(
±r
);

51767 ià(
is_sw­
)

51768 
v
 = 
	`bsw­32
(v);

51769  
	`JS_NewIÁ32
(
ùx
, 
v
);

51770 
JS_CLASS_UINT32_ARRAY
:

51771 
v
 = 
	`g‘_u32
(
±r
);

51772 ià(
is_sw­
)

51773 
v
 = 
	`bsw­32
(v);

51774  
	`JS_NewUšt32
(
ùx
, 
v
);

51775 #ifdeà
CONFIG_BIGNUM


51776 
JS_CLASS_BIG_INT64_ARRAY
:

51778 
ušt64_t
 
v
;

51779 
v
 = 
	`g‘_u64
(
±r
);

51780 ià(
is_sw­
)

51781 
v
 = 
	`bsw­64
(v);

51782  
	`JS_NewBigIÁ64
(
ùx
, 
v
);

51785 
JS_CLASS_BIG_UINT64_ARRAY
:

51787 
ušt64_t
 
v
;

51788 
v
 = 
	`g‘_u64
(
±r
);

51789 ià(
is_sw­
)

51790 
v
 = 
	`bsw­64
(v);

51791  
	`JS_NewBigUšt64
(
ùx
, 
v
);

51795 
JS_CLASS_FLOAT32_ARRAY
:

51798 
f
;

51799 
ušt32_t
 
i
;

51800 } 
u
;

51801 
v
 = 
	`g‘_u32
(
±r
);

51802 ià(
is_sw­
)

51803 
v
 = 
	`bsw­32
(v);

51804 
u
.
i
 = 
v
;

51805  
	`__JS_NewFlßt64
(
ùx
, 
u
.
f
);

51807 
JS_CLASS_FLOAT64_ARRAY
:

51810 
f
;

51811 
ušt64_t
 
i
;

51812 } 
u
;

51813 
u
.
i
 = 
	`g‘_u64
(
±r
);

51814 ià(
is_sw­
)

51815 
u
.
i
 = 
	`bsw­64
(u.i);

51816  
	`__JS_NewFlßt64
(
ùx
, 
u
.
f
);

51819 
	`abÜt
();

51821 
	}
}

51823 
JSV®ue
 
	$js_d©av›w_£tV®ue
(
JSCÚ‹xt
 *
ùx
,

51824 
JSV®ueCÚ¡
 
this_obj
,

51825 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
şass_id
)

51827 
JSTy³dA¼ay
 *

;

51828 
JSA¼ayBufãr
 *
abuf
;

51829 
is_sw­
, 
size
;

51830 
ušt8_t
 *
±r
;

51831 
ušt64_t
 
v64
;

51832 
ušt32_t
 
v
;

51833 
ušt64_t
 
pos
;

51834 
JSV®ueCÚ¡
 
v®
;

51836 

 = 
	`JS_G‘O·que2
(
ùx
, 
this_obj
, 
JS_CLASS_DATAVIEW
);

51837 ià(!

)

51838  
JS_EXCEPTION
;

51839 
size
 = 1 << 
	`ty³d_¬¿y_size_log2
(
şass_id
);

51840 ià(
	`JS_ToIndex
(
ùx
, &
pos
, 
¬gv
[0]))

51841  
JS_EXCEPTION
;

51842 
v®
 = 
¬gv
[1];

51843 
v
 = 0;

51844 
v64
 = 0;

51845 ià(
şass_id
 <ğ
JS_CLASS_UINT32_ARRAY
) {

51846 ià(
	`JS_ToUšt32
(
ùx
, &
v
, 
v®
))

51847  
JS_EXCEPTION
;

51849 #ifdeà
CONFIG_BIGNUM


51850 ià(
şass_id
 <ğ
JS_CLASS_BIG_UINT64_ARRAY
) {

51851 ià(
	`JS_ToBigIÁ64
(
ùx
, (
št64_t
 *)&
v64
, 
v®
))

51852  
JS_EXCEPTION
;

51856 
d
;

51857 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
v®
))

51858  
JS_EXCEPTION
;

51859 ià(
şass_id
 =ğ
JS_CLASS_FLOAT32_ARRAY
) {

51861 
f
;

51862 
ušt32_t
 
i
;

51863 } 
u
;

51864 
u
.
f
 = 
d
;

51865 
v
 = 
u
.
i
;

51867 
JSFlßt64UniÚ
 
u
;

51868 
u
.
d
 = d;

51869 
v64
 = 
u
.
u64
;

51872 
is_sw­
 = 
FALSE
;

51873 ià(
¬gc
 > 2)

51874 
is_sw­
 = 
	`JS_ToBoŞ
(
ùx
, 
¬gv
[2]);

51875 #iâdeà
WORDS_BIGENDIAN


51876 
is_sw­
 ^= 1;

51878 
abuf
 = 

->
bufãr
->
u
.
¬¿y_bufãr
;

51879 ià(
abuf
->
d‘ached
)

51880  
	`JS_ThrowTy³E¼ÜD‘achedA¼ayBufãr
(
ùx
);

51881 ià((
pos
 + 
size
è> 

->
Ëngth
)

51882  
	`JS_ThrowRªgeE¼Ü
(
ùx
, "out of bound");

51883 
±r
 = 
abuf
->
d©a
 + 

->
off£t
 + 
pos
;

51885 
şass_id
) {

51886 
JS_CLASS_INT8_ARRAY
:

51887 
JS_CLASS_UINT8_ARRAY
:

51888 *
±r
 = 
v
;

51890 
JS_CLASS_INT16_ARRAY
:

51891 
JS_CLASS_UINT16_ARRAY
:

51892 ià(
is_sw­
)

51893 
v
 = 
	`bsw­16
(v);

51894 
	`put_u16
(
±r
, 
v
);

51896 
JS_CLASS_INT32_ARRAY
:

51897 
JS_CLASS_UINT32_ARRAY
:

51898 
JS_CLASS_FLOAT32_ARRAY
:

51899 ià(
is_sw­
)

51900 
v
 = 
	`bsw­32
(v);

51901 
	`put_u32
(
±r
, 
v
);

51903 #ifdeà
CONFIG_BIGNUM


51904 
JS_CLASS_BIG_INT64_ARRAY
:

51905 
JS_CLASS_BIG_UINT64_ARRAY
:

51907 
JS_CLASS_FLOAT64_ARRAY
:

51908 ià(
is_sw­
)

51909 
v64
 = 
	`bsw­64
(v64);

51910 
	`put_u64
(
±r
, 
v64
);

51913 
	`abÜt
();

51915  
JS_UNDEFINED
;

51916 
	}
}

51918 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_d©av›w_´Ùo_funcs
[] = {

51919 
JS_CGETSET_MAGIC_DEF
("bufãr", 
js_ty³d_¬¿y_g‘_bufãr
, 
NULL
, 1 ),

51920 
JS_CGETSET_MAGIC_DEF
("by‹L’gth", 
js_ty³d_¬¿y_g‘_by‹L’gth
, 
NULL
, 1 ),

51921 
JS_CGETSET_MAGIC_DEF
("by‹Off£t", 
js_ty³d_¬¿y_g‘_by‹Off£t
, 
NULL
, 1 ),

51922 
JS_CFUNC_MAGIC_DEF
("g‘IÁ8", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_INT8_ARRAY
 ),

51923 
JS_CFUNC_MAGIC_DEF
("g‘Ušt8", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_UINT8_ARRAY
 ),

51924 
JS_CFUNC_MAGIC_DEF
("g‘IÁ16", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_INT16_ARRAY
 ),

51925 
JS_CFUNC_MAGIC_DEF
("g‘Ušt16", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_UINT16_ARRAY
 ),

51926 
JS_CFUNC_MAGIC_DEF
("g‘IÁ32", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_INT32_ARRAY
 ),

51927 
JS_CFUNC_MAGIC_DEF
("g‘Ušt32", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_UINT32_ARRAY
 ),

51928 #ifdeà
CONFIG_BIGNUM


51929 
JS_CFUNC_MAGIC_DEF
("g‘BigIÁ64", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_BIG_INT64_ARRAY
 ),

51930 
JS_CFUNC_MAGIC_DEF
("g‘BigUšt64", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_BIG_UINT64_ARRAY
 ),

51932 
JS_CFUNC_MAGIC_DEF
("g‘Flßt32", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_FLOAT32_ARRAY
 ),

51933 
JS_CFUNC_MAGIC_DEF
("g‘Flßt64", 1, 
js_d©av›w_g‘V®ue
, 
JS_CLASS_FLOAT64_ARRAY
 ),

51934 
JS_CFUNC_MAGIC_DEF
("£tIÁ8", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_INT8_ARRAY
 ),

51935 
JS_CFUNC_MAGIC_DEF
("£tUšt8", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_UINT8_ARRAY
 ),

51936 
JS_CFUNC_MAGIC_DEF
("£tIÁ16", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_INT16_ARRAY
 ),

51937 
JS_CFUNC_MAGIC_DEF
("£tUšt16", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_UINT16_ARRAY
 ),

51938 
JS_CFUNC_MAGIC_DEF
("£tIÁ32", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_INT32_ARRAY
 ),

51939 
JS_CFUNC_MAGIC_DEF
("£tUšt32", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_UINT32_ARRAY
 ),

51940 #ifdeà
CONFIG_BIGNUM


51941 
JS_CFUNC_MAGIC_DEF
("£tBigIÁ64", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_BIG_INT64_ARRAY
 ),

51942 
JS_CFUNC_MAGIC_DEF
("£tBigUšt64", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_BIG_UINT64_ARRAY
 ),

51944 
JS_CFUNC_MAGIC_DEF
("£tFlßt32", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_FLOAT32_ARRAY
 ),

51945 
JS_CFUNC_MAGIC_DEF
("£tFlßt64", 2, 
js_d©av›w_£tV®ue
, 
JS_CLASS_FLOAT64_ARRAY
 ),

51946 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "D©aV›w", 
JS_PROP_CONFIGURABLE
 ),

51950 #ifdeà
CONFIG_ATOMICS


51952 
	eAtomicsOpEnum
 {

51953 
	mATOMICS_OP_ADD
,

51954 
	mATOMICS_OP_AND
,

51955 
	mATOMICS_OP_OR
,

51956 
	mATOMICS_OP_SUB
,

51957 
	mATOMICS_OP_XOR
,

51958 
	mATOMICS_OP_EXCHANGE
,

51959 
	mATOMICS_OP_COMPARE_EXCHANGE
,

51960 
	mATOMICS_OP_LOAD
,

51961 } 
	tAtomicsOpEnum
;

51963 *
	$js_©omics_g‘_±r
(
JSCÚ‹xt
 *
ùx
,

51964 *
psize_log2
, 
JSCÏssID
 *
pşass_id
,

51965 
JSV®ueCÚ¡
 
obj
, JSV®ueCÚ¡ 
idx_v®
,

51966 
BOOL
 
is_wa™abË
)

51968 
JSObjeù
 *
p
;

51969 
JSTy³dA¼ay
 *

;

51970 
JSA¼ayBufãr
 *
abuf
;

51971 *
±r
;

51972 
ušt64_t
 
idx
;

51973 
BOOL
 
”r
;

51974 
size_log2
;

51976 ià(
	`JS_VALUE_GET_TAG
(
obj
è!ğ
JS_TAG_OBJECT
)

51977 
ç
;

51978 
p
 = 
	`JS_VALUE_GET_OBJ
(
obj
);

51979 #ifdeà
CONFIG_BIGNUM


51980 ià(
is_wa™abË
)

51981 
”r
 = (
p
->
şass_id
 !ğ
JS_CLASS_INT32_ARRAY
 &&

51982 
p
->
şass_id
 !ğ
JS_CLASS_BIG_INT64_ARRAY
);

51984 
”r
 = !(
p
->
şass_id
 >ğ
JS_CLASS_INT8_ARRAY
 &&

51985 
p
->
şass_id
 <ğ
JS_CLASS_BIG_UINT64_ARRAY
);

51987 ià(
is_wa™abË
)

51988 
”r
 = (
p
->
şass_id
 !ğ
JS_CLASS_INT32_ARRAY
);

51990 
”r
 = !(
p
->
şass_id
 >ğ
JS_CLASS_INT8_ARRAY
 &&

51991 
p
->
şass_id
 <ğ
JS_CLASS_UINT32_ARRAY
);

51993 ià(
”r
) {

51994 
ç
:

51995 
	`JS_ThrowTy³E¼Ü
(
ùx
, "integer TypedArrayƒxpected");

51996  
NULL
;

51998 

 = 
p
->
u
.
ty³d_¬¿y
;

51999 
abuf
 = 

->
bufãr
->
u
.
¬¿y_bufãr
;

52000 ià(!
abuf
->
sh¬ed
) {

52001 
	`JS_ThrowTy³E¼Ü
(
ùx
, "not‡ SharedArrayBuffer TypedArray");

52002  
NULL
;

52004 ià(
	`JS_ToIndex
(
ùx
, &
idx
, 
idx_v®
)) {

52005  
NULL
;

52007 ià(
idx
 >ğ
p
->
u
.
¬¿y
.
couÁ
) {

52008 
	`JS_ThrowRªgeE¼Ü
(
ùx
, "out-of-bound‡ccess");

52009  
NULL
;

52011 
size_log2
 = 
	`ty³d_¬¿y_size_log2
(
p
->
şass_id
);

52012 
±r
 = 
p
->
u
.
¬¿y
.u.
ušt8_±r
 + ((
ušŒ_t
)
idx
 << 
size_log2
);

52013 ià(
psize_log2
)

52014 *
psize_log2
 = 
size_log2
;

52015 ià(
pşass_id
)

52016 *
pşass_id
 = 
p
->
şass_id
;

52017  
±r
;

52018 
	}
}

52020 
JSV®ue
 
	$js_©omics_İ
(
JSCÚ‹xt
 *
ùx
,

52021 
JSV®ueCÚ¡
 
this_obj
,

52022 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
, 
İ
)

52024 
size_log2
;

52025 #ifdeà
CONFIG_BIGNUM


52026 
ušt64_t
 
v
, 
a
, 
»p_v®
;

52028 
ušt32_t
 
v
, 
a
, 
»p_v®
;

52030 *
±r
;

52031 
JSV®ue
 
»t
;

52032 
JSCÏssID
 
şass_id
;

52034 
±r
 = 
	`js_©omics_g‘_±r
(
ùx
, &
size_log2
, &
şass_id
,

52035 
¬gv
[0],‡rgv[1], 
FALSE
);

52036 ià(!
±r
)

52037  
JS_EXCEPTION
;

52038 
»p_v®
 = 0;

52039 ià(
İ
 =ğ
ATOMICS_OP_LOAD
) {

52040 
v
 = 0;

52042 #ifdeà
CONFIG_BIGNUM


52043 ià(
size_log2
 == 3) {

52044 
št64_t
 
v64
;

52045 ià(
	`JS_ToBigIÁ64
(
ùx
, &
v64
, 
¬gv
[2]))

52046  
JS_EXCEPTION
;

52047 
v
 = 
v64
;

52048 ià(
İ
 =ğ
ATOMICS_OP_COMPARE_EXCHANGE
) {

52049 ià(
	`JS_ToBigIÁ64
(
ùx
, &
v64
, 
¬gv
[3]))

52050  
JS_EXCEPTION
;

52051 
»p_v®
 = 
v64
;

52056 
ušt32_t
 
v32
;

52057 ià(
	`JS_ToUšt32
(
ùx
, &
v32
, 
¬gv
[2]))

52058  
JS_EXCEPTION
;

52059 
v
 = 
v32
;

52060 ià(
İ
 =ğ
ATOMICS_OP_COMPARE_EXCHANGE
) {

52061 ià(
	`JS_ToUšt32
(
ùx
, &
v32
, 
¬gv
[3]))

52062  
JS_EXCEPTION
;

52063 
»p_v®
 = 
v32
;

52066 
İ
 | (
size_log2
 << 3)) {

52068 #ifdeà
CONFIG_BIGNUM


52069 
	#OP
(
İ_Çme
, 
func_Çme
) \

52070 
ATOMICS_OP_
 ## 
İ_Çme
 | (0 << 3): \

52071 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt8_t
è*)
±r
, 
v
); \

52073 
ATOMICS_OP_
 ## 
İ_Çme
 | (1 << 3): \

52074 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt16_t
è*)
±r
, 
v
); \

52076 
ATOMICS_OP_
 ## 
İ_Çme
 | (2 << 3): \

52077 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt32_t
è*)
±r
, 
v
); \

52079 
ATOMICS_OP_
 ## 
İ_Çme
 | (3 << 3): \

52080 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt64_t
è*)
±r
, 
v
); \

52081 ;

	)

52083 
	#OP
(
İ_Çme
, 
func_Çme
) \

52084 
ATOMICS_OP_
 ## 
İ_Çme
 | (0 << 3): \

52085 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt8_t
è*)
±r
, 
v
); \

52087 
ATOMICS_OP_
 ## 
İ_Çme
 | (1 << 3): \

52088 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt16_t
è*)
±r
, 
v
); \

52090 
ATOMICS_OP_
 ## 
İ_Çme
 | (2 << 3): \

52091 
a
 = 
	`func_Çme
((
	`_Atomic
(
ušt32_t
è*)
±r
, 
v
); \

52092 ;

	)

52094 
	`OP
(
ADD
, 
©omic_ãtch_add
)

52095 
	`OP
(
AND
, 
©omic_ãtch_ªd
)

52096 
	`OP
(
OR
, 
©omic_ãtch_Ü
)

52097 
	`OP
(
SUB
, 
©omic_ãtch_sub
)

52098 
	`OP
(
XOR
, 
©omic_ãtch_xÜ
)

52099 
	`OP
(
EXCHANGE
, 
©omic_exchªge
)

52100 #undeà
OP


52102 
ATOMICS_OP_LOAD
 | (0 << 3):

52103 
a
 = 
	`©omic_lßd
((
	`_Atomic
(
ušt8_t
è*)
±r
);

52105 
ATOMICS_OP_LOAD
 | (1 << 3):

52106 
a
 = 
	`©omic_lßd
((
	`_Atomic
(
ušt16_t
è*)
±r
);

52108 
ATOMICS_OP_LOAD
 | (2 << 3):

52109 
a
 = 
	`©omic_lßd
((
	`_Atomic
(
ušt32_t
è*)
±r
);

52111 #ifdeà
CONFIG_BIGNUM


52112 
ATOMICS_OP_LOAD
 | (3 << 3):

52113 
a
 = 
	`©omic_lßd
((
	`_Atomic
(
ušt64_t
è*)
±r
);

52117 
ATOMICS_OP_COMPARE_EXCHANGE
 | (0 << 3):

52119 
ušt8_t
 
v1
 = 
v
;

52120 
	`©omic_com·»_exchªge_¡rÚg
((
	`_Atomic
(
ušt8_t
è*)
±r
, &
v1
, 
»p_v®
);

52121 
a
 = 
v1
;

52124 
ATOMICS_OP_COMPARE_EXCHANGE
 | (1 << 3):

52126 
ušt16_t
 
v1
 = 
v
;

52127 
	`©omic_com·»_exchªge_¡rÚg
((
	`_Atomic
(
ušt16_t
è*)
±r
, &
v1
, 
»p_v®
);

52128 
a
 = 
v1
;

52131 
ATOMICS_OP_COMPARE_EXCHANGE
 | (2 << 3):

52133 
ušt32_t
 
v1
 = 
v
;

52134 
	`©omic_com·»_exchªge_¡rÚg
((
	`_Atomic
(
ušt32_t
è*)
±r
, &
v1
, 
»p_v®
);

52135 
a
 = 
v1
;

52138 #ifdeà
CONFIG_BIGNUM


52139 
ATOMICS_OP_COMPARE_EXCHANGE
 | (3 << 3):

52141 
ušt64_t
 
v1
 = 
v
;

52142 
	`©omic_com·»_exchªge_¡rÚg
((
	`_Atomic
(
ušt64_t
è*)
±r
, &
v1
, 
»p_v®
);

52143 
a
 = 
v1
;

52148 
	`abÜt
();

52151 
şass_id
) {

52152 
JS_CLASS_INT8_ARRAY
:

52153 
a
 = (
št8_t
)a;

52154 
dÚe
;

52155 
JS_CLASS_UINT8_ARRAY
:

52156 
a
 = (
ušt8_t
)a;

52157 
dÚe
;

52158 
JS_CLASS_INT16_ARRAY
:

52159 
a
 = (
št16_t
)a;

52160 
dÚe
;

52161 
JS_CLASS_UINT16_ARRAY
:

52162 
a
 = (
ušt16_t
)a;

52163 
dÚe
;

52164 
JS_CLASS_INT32_ARRAY
:

52165 
dÚe
:

52166 
»t
 = 
	`JS_NewIÁ32
(
ùx
, 
a
);

52168 
JS_CLASS_UINT32_ARRAY
:

52169 
»t
 = 
	`JS_NewUšt32
(
ùx
, 
a
);

52171 #ifdeà
CONFIG_BIGNUM


52172 
JS_CLASS_BIG_INT64_ARRAY
:

52173 
»t
 = 
	`JS_NewBigIÁ64
(
ùx
, 
a
);

52175 
JS_CLASS_BIG_UINT64_ARRAY
:

52176 
»t
 = 
	`JS_NewBigUšt64
(
ùx
, 
a
);

52180 
	`abÜt
();

52182  
»t
;

52183 
	}
}

52185 
JSV®ue
 
	$js_©omics_¡Üe
(
JSCÚ‹xt
 *
ùx
,

52186 
JSV®ueCÚ¡
 
this_obj
,

52187 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

52189 
size_log2
;

52190 *
±r
;

52191 
JSV®ue
 
»t
;

52193 
±r
 = 
	`js_©omics_g‘_±r
(
ùx
, &
size_log2
, 
NULL
, 
¬gv
[0],‡rgv[1], 
FALSE
);

52194 ià(!
±r
)

52195  
JS_EXCEPTION
;

52196 #ifdeà
CONFIG_BIGNUM


52197 ià(
size_log2
 == 3) {

52198 
št64_t
 
v64
;

52199 
»t
 = 
	`JS_ToBigIÁV®ueF»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[2]));

52200 ià(
	`JS_IsExû±iÚ
(
»t
))

52201  
»t
;

52202 ià(
	`JS_ToBigIÁ64
(
ùx
, &
v64
, 
»t
)) {

52203 
	`JS_F»eV®ue
(
ùx
, 
»t
);

52204  
JS_EXCEPTION
;

52206 
	`©omic_¡Üe
((
	`_Atomic
(
ušt64_t
è*)
±r
, 
v64
);

52210 
ušt32_t
 
v
;

52212 
»t
 = 
	`JS_ToIÁeg”F»e
(
ùx
, 
	`JS_DupV®ue
(ùx, 
¬gv
[2]));

52213 ià(
	`JS_IsExû±iÚ
(
»t
))

52214  
»t
;

52215 ià(
	`JS_ToUšt32
(
ùx
, &
v
, 
»t
)) {

52216 
	`JS_F»eV®ue
(
ùx
, 
»t
);

52217  
JS_EXCEPTION
;

52219 
size_log2
) {

52221 
	`©omic_¡Üe
((
	`_Atomic
(
ušt8_t
è*)
±r
, 
v
);

52224 
	`©omic_¡Üe
((
	`_Atomic
(
ušt16_t
è*)
±r
, 
v
);

52227 
	`©omic_¡Üe
((
	`_Atomic
(
ušt32_t
è*)
±r
, 
v
);

52230 
	`abÜt
();

52233  
»t
;

52234 
	}
}

52236 
JSV®ue
 
	$js_©omics_isLockF»e
(
JSCÚ‹xt
 *
ùx
,

52237 
JSV®ueCÚ¡
 
this_obj
,

52238 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

52240 
v
, 
»t
;

52241 ià(
	`JS_ToIÁ32S©
(
ùx
, &
v
, 
¬gv
[0]))

52242  
JS_EXCEPTION
;

52243 
»t
 = (
v
 == 1 || v == 2 || v == 4

52244 #ifdeà
CONFIG_BIGNUM


52245 || 
v
 == 8

52248  
	`JS_NewBoŞ
(
ùx
, 
»t
);

52249 
	}
}

52251 
	sJSAtomicsWa™”
 {

52252 
li¡_h—d
 
	mlšk
;

52253 
BOOL
 
	mlšked
;

52254 
±h»ad_cÚd_t
 
	mcÚd
;

52255 
št32_t
 *
	m±r
;

52256 } 
	tJSAtomicsWa™”
;

52258 
±h»ad_mu‹x_t
 
	gjs_©omics_mu‹x
 = 
PTHREAD_MUTEX_INITIALIZER
;

52259 
li¡_h—d
 
	gjs_©omics_wa™”_li¡
 =

52260 
LIST_HEAD_INIT
(
js_©omics_wa™”_li¡
);

52262 
JSV®ue
 
	$js_©omics_wa™
(
JSCÚ‹xt
 *
ùx
,

52263 
JSV®ueCÚ¡
 
this_obj
,

52264 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

52266 
sšt64_t
 
v
;

52267 
št32_t
 
v32
;

52268 *
±r
;

52269 
sšt64_t
 
timeout
;

52270 
time¥ec
 
ts
;

52271 
JSAtomicsWa™”
 
wa™”_s
, *
wa™”
;

52272 
»t
, 
size_log2
, 
»s
;

52273 
d
;

52275 
±r
 = 
	`js_©omics_g‘_±r
(
ùx
, &
size_log2
, 
NULL
, 
¬gv
[0],‡rgv[1], 
TRUE
);

52276 ià(!
±r
)

52277  
JS_EXCEPTION
;

52278 #ifdeà
CONFIG_BIGNUM


52279 ià(
size_log2
 == 3) {

52280 ià(
	`JS_ToBigIÁ64
(
ùx
, &
v
, 
¬gv
[2]))

52281  
JS_EXCEPTION
;

52285 ià(
	`JS_ToIÁ32
(
ùx
, &
v32
, 
¬gv
[2]))

52286  
JS_EXCEPTION
;

52287 
v
 = 
v32
;

52289 ià(
	`JS_ToFlßt64
(
ùx
, &
d
, 
¬gv
[3]))

52290  
JS_EXCEPTION
;

52291 ià(
	`i¢ª
(
d
è|| d > 
INT64_MAX
)

52292 
timeout
 = 
INT64_MAX
;

52293 ià(
d
 < 0)

52294 
timeout
 = 0;

52296 
timeout
 = (
sšt64_t
)
d
;

52297 ià(!
ùx
->
¹
->
ÿn_block
)

52298  
	`JS_ThrowTy³E¼Ü
(
ùx
, "cannot block inhishread");

52303 
	`±h»ad_mu‹x_lock
(&
js_©omics_mu‹x
);

52304 ià(
size_log2
 == 3) {

52305 
»s
 = *(
sšt64_t
 *)
±r
 !ğ
v
;

52307 
»s
 = *(
št32_t
 *)
±r
 !ğ
v
;

52309 ià(
»s
) {

52310 
	`±h»ad_mu‹x_uÆock
(&
js_©omics_mu‹x
);

52311  
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_nÙ_equ®
);

52314 
wa™”
 = &
wa™”_s
;

52315 
wa™”
->
±r
 =…tr;

52316 
	`±h»ad_cÚd_š™
(&
wa™”
->
cÚd
, 
NULL
);

52317 
wa™”
->
lšked
 = 
TRUE
;

52318 
	`li¡_add_
(&
wa™”
->
lšk
, &
js_©omics_wa™”_li¡
);

52320 ià(
timeout
 =ğ
INT64_MAX
) {

52321 
	`±h»ad_cÚd_wa™
(&
wa™”
->
cÚd
, &
js_©omics_mu‹x
);

52322 
»t
 = 0;

52325 
	`şock_g‘time
(
CLOCK_REALTIME
, &
ts
);

52326 
ts
.
tv_£c
 +ğ
timeout
 / 1000;

52327 
ts
.
tv_n£c
 +ğ(
timeout
 % 1000) * 1000000;

52328 ià(
ts
.
tv_n£c
 >= 1000000000) {

52329 
ts
.
tv_n£c
 -= 1000000000;

52330 
ts
.
tv_£c
++;

52332 
»t
 = 
	`±h»ad_cÚd_timedwa™
(&
wa™”
->
cÚd
, &
js_©omics_mu‹x
,

52333 &
ts
);

52335 ià(
wa™”
->
lšked
)

52336 
	`li¡_d–
(&
wa™”
->
lšk
);

52337 
	`±h»ad_mu‹x_uÆock
(&
js_©omics_mu‹x
);

52338 
	`±h»ad_cÚd_de¡roy
(&
wa™”
->
cÚd
);

52339 ià(
»t
 =ğ
ETIMEDOUT
) {

52340  
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_timed_out
);

52342  
	`JS_AtomToSŒšg
(
ùx
, 
JS_ATOM_ok
);

52344 
	}
}

52346 
JSV®ue
 
	$js_©omics_nÙify
(
JSCÚ‹xt
 *
ùx
,

52347 
JSV®ueCÚ¡
 
this_obj
,

52348 
¬gc
, 
JSV®ueCÚ¡
 *
¬gv
)

52350 
li¡_h—d
 *
–
, *
–1
, 
wa™”_li¡
;

52351 
št32_t
 
couÁ
, 
n
;

52352 *
±r
;

52353 
JSAtomicsWa™”
 *
wa™”
;

52355 
±r
 = 
	`js_©omics_g‘_±r
(
ùx
, 
NULL
, NULL, 
¬gv
[0],‡rgv[1], 
TRUE
);

52356 ià(!
±r
)

52357  
JS_EXCEPTION
;

52359 ià(
	`JS_IsUndefšed
(
¬gv
[2])) {

52360 
couÁ
 = 
INT32_MAX
;

52362 ià(
	`JS_ToIÁ32CÏmp
(
ùx
, &
couÁ
, 
¬gv
[2], 0, 
INT32_MAX
, 0))

52363  
JS_EXCEPTION
;

52366 
n
 = 0;

52367 ià(
couÁ
 > 0) {

52368 
	`±h»ad_mu‹x_lock
(&
js_©omics_mu‹x
);

52369 
	`š™_li¡_h—d
(&
wa™”_li¡
);

52370 
	`li¡_fÜ_—ch_§ã
(
–
, 
–1
, &
js_©omics_wa™”_li¡
) {

52371 
wa™”
 = 
	`li¡_’Œy
(
–
, 
JSAtomicsWa™”
, 
lšk
);

52372 ià(
wa™”
->
±r
 ==…tr) {

52373 
	`li¡_d–
(&
wa™”
->
lšk
);

52374 
wa™”
->
lšked
 = 
FALSE
;

52375 
	`li¡_add_
(&
wa™”
->
lšk
, &
wa™”_li¡
);

52376 
n
++;

52377 ià(
n
 >ğ
couÁ
)

52381 
	`li¡_fÜ_—ch
(
–
, &
wa™”_li¡
) {

52382 
wa™”
 = 
	`li¡_’Œy
(
–
, 
JSAtomicsWa™”
, 
lšk
);

52383 
	`±h»ad_cÚd_sigÇl
(&
wa™”
->
cÚd
);

52385 
	`±h»ad_mu‹x_uÆock
(&
js_©omics_mu‹x
);

52387  
	`JS_NewIÁ32
(
ùx
, 
n
);

52388 
	}
}

52390 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_©omics_funcs
[] = {

52391 
JS_CFUNC_MAGIC_DEF
("add", 3, 
js_©omics_İ
, 
ATOMICS_OP_ADD
 ),

52392 
JS_CFUNC_MAGIC_DEF
("ªd", 3, 
js_©omics_İ
, 
ATOMICS_OP_AND
 ),

52393 
JS_CFUNC_MAGIC_DEF
("Ü", 3, 
js_©omics_İ
, 
ATOMICS_OP_OR
 ),

52394 
JS_CFUNC_MAGIC_DEF
("sub", 3, 
js_©omics_İ
, 
ATOMICS_OP_SUB
 ),

52395 
JS_CFUNC_MAGIC_DEF
("xÜ", 3, 
js_©omics_İ
, 
ATOMICS_OP_XOR
 ),

52396 
JS_CFUNC_MAGIC_DEF
("exchªge", 3, 
js_©omics_İ
, 
ATOMICS_OP_EXCHANGE
 ),

52397 
JS_CFUNC_MAGIC_DEF
("com·»Exchªge", 4, 
js_©omics_İ
, 
ATOMICS_OP_COMPARE_EXCHANGE
 ),

52398 
JS_CFUNC_MAGIC_DEF
("lßd", 2, 
js_©omics_İ
, 
ATOMICS_OP_LOAD
 ),

52399 
JS_CFUNC_DEF
("¡Üe", 3, 
js_©omics_¡Üe
 ),

52400 
JS_CFUNC_DEF
("isLockF»e", 1, 
js_©omics_isLockF»e
 ),

52401 
JS_CFUNC_DEF
("wa™", 4, 
js_©omics_wa™
 ),

52402 
JS_CFUNC_DEF
("nÙify", 3, 
js_©omics_nÙify
 ),

52403 
JS_PROP_STRING_DEF
("[SymbŞ.toSŒšgTag]", "Atomics", 
JS_PROP_CONFIGURABLE
 ),

52406 cÚ¡ 
JSCFunùiÚLi¡EÁry
 
	gjs_©omics_obj
[] = {

52407 
JS_OBJECT_DEF
("Atomics", 
js_©omics_funcs
, 
couÁof
(js_©omics_funcs), 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
 ),

52410 
	$JS_AddIÁršsicAtomics
(
JSCÚ‹xt
 *
ùx
)

52413 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
glob®_obj
, 
js_©omics_obj
, 
	`couÁof
(js_atomics_obj));

52414 
	}
}

52418 
	$JS_AddIÁršsicTy³dA¼ays
(
JSCÚ‹xt
 *
ùx
)

52420 
JSV®ue
 
ty³d_¬¿y_ba£_´Ùo
, 
ty³d_¬¿y_ba£_func
;

52421 
JSV®ueCÚ¡
 
¬¿y_bufãr_func
, 
sh¬ed_¬¿y_bufãr_func
;

52422 
i
;

52424 
ùx
->
şass_´Ùo
[
JS_CLASS_ARRAY_BUFFER
] = 
	`JS_NewObjeù
(ctx);

52425 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY_BUFFER
],

52426 
js_¬¿y_bufãr_´Ùo_funcs
,

52427 
	`couÁof
(
js_¬¿y_bufãr_´Ùo_funcs
));

52429 
¬¿y_bufãr_func
 = 
	`JS_NewGlob®CCÚ¡ruùÜOÆy
(
ùx
, "ArrayBuffer",

52430 
js_¬¿y_bufãr_cÚ¡ruùÜ
, 1,

52431 
ùx
->
şass_´Ùo
[
JS_CLASS_ARRAY_BUFFER
]);

52432 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
¬¿y_bufãr_func
,

52433 
js_¬¿y_bufãr_funcs
,

52434 
	`couÁof
(
js_¬¿y_bufãr_funcs
));

52436 
ùx
->
şass_´Ùo
[
JS_CLASS_SHARED_ARRAY_BUFFER
] = 
	`JS_NewObjeù
(ctx);

52437 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_SHARED_ARRAY_BUFFER
],

52438 
js_sh¬ed_¬¿y_bufãr_´Ùo_funcs
,

52439 
	`couÁof
(
js_sh¬ed_¬¿y_bufãr_´Ùo_funcs
));

52441 
sh¬ed_¬¿y_bufãr_func
 = 
	`JS_NewGlob®CCÚ¡ruùÜOÆy
(
ùx
, "SharedArrayBuffer",

52442 
js_sh¬ed_¬¿y_bufãr_cÚ¡ruùÜ
, 1,

52443 
ùx
->
şass_´Ùo
[
JS_CLASS_SHARED_ARRAY_BUFFER
]);

52444 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
sh¬ed_¬¿y_bufãr_func
,

52445 
js_sh¬ed_¬¿y_bufãr_funcs
,

52446 
	`couÁof
(
js_sh¬ed_¬¿y_bufãr_funcs
));

52448 
ty³d_¬¿y_ba£_´Ùo
 = 
	`JS_NewObjeù
(
ùx
);

52449 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
ty³d_¬¿y_ba£_´Ùo
,

52450 
js_ty³d_¬¿y_ba£_´Ùo_funcs
,

52451 
	`couÁof
(
js_ty³d_¬¿y_ba£_´Ùo_funcs
));

52454 
JSV®ue
 
obj
 = 
	`JS_G‘Prİ”ty
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_ARRAY
], 
JS_ATOM_toSŒšg
);

52456 
	`JS_DefšePrİ”tyV®ue
(
ùx
, 
ty³d_¬¿y_ba£_´Ùo
, 
JS_ATOM_toSŒšg
, 
obj
,

52457 
JS_PROP_WRITABLE
 | 
JS_PROP_CONFIGURABLE
);

52459 
ty³d_¬¿y_ba£_func
 = 
	`JS_NewCFunùiÚ
(
ùx
, 
js_ty³d_¬¿y_ba£_cÚ¡ruùÜ
,

52461 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, 
ty³d_¬¿y_ba£_func
,

52462 
js_ty³d_¬¿y_ba£_funcs
,

52463 
	`couÁof
(
js_ty³d_¬¿y_ba£_funcs
));

52464 
	`JS_S‘CÚ¡ruùÜ
(
ùx
, 
ty³d_¬¿y_ba£_func
, 
ty³d_¬¿y_ba£_´Ùo
);

52466 
i
 = 
JS_CLASS_UINT8C_ARRAY
; i < JS_CLASS_UINT8C_ARRAY + 
JS_TYPED_ARRAY_COUNT
; i++) {

52467 
JSV®ue
 
func_obj
;

52468 
buf
[
ATOM_GET_STR_BUF_SIZE
];

52469 cÚ¡ *
Çme
;

52471 
ùx
->
şass_´Ùo
[
i
] = 
	`JS_NewObjeùPrÙo
(ùx, 
ty³d_¬¿y_ba£_´Ùo
);

52472 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, ctx->
şass_´Ùo
[
i
],

52474 
	`JS_NewIÁ32
(
ùx
, 1 << 
	`ty³d_¬¿y_size_log2
(
i
)),

52476 
Çme
 = 
	`JS_AtomG‘SŒ
(
ùx
, 
buf
, (buf),

52477 
JS_ATOM_Ušt8CÏm³dA¼ay
 + 
i
 - 
JS_CLASS_UINT8C_ARRAY
);

52478 
func_obj
 = 
	`JS_NewCFunùiÚ3
(
ùx
, (
JSCFunùiÚ
 *)
js_ty³d_¬¿y_cÚ¡ruùÜ
,

52479 
Çme
, 3, 
JS_CFUNC_cÚ¡ruùÜ_magic
, 
i
,

52480 
ty³d_¬¿y_ba£_func
);

52481 
	`JS_NewGlob®CCÚ¡ruùÜ2
(
ùx
, 
func_obj
, 
Çme
, ctx->
şass_´Ùo
[
i
]);

52482 
	`JS_DefšePrİ”tyV®ueSŒ
(
ùx
, 
func_obj
,

52484 
	`JS_NewIÁ32
(
ùx
, 1 << 
	`ty³d_¬¿y_size_log2
(
i
)),

52487 
	`JS_F»eV®ue
(
ùx
, 
ty³d_¬¿y_ba£_´Ùo
);

52488 
	`JS_F»eV®ue
(
ùx
, 
ty³d_¬¿y_ba£_func
);

52491 
ùx
->
şass_´Ùo
[
JS_CLASS_DATAVIEW
] = 
	`JS_NewObjeù
(ctx);

52492 
	`JS_S‘Prİ”tyFunùiÚLi¡
(
ùx
, ctx->
şass_´Ùo
[
JS_CLASS_DATAVIEW
],

52493 
js_d©av›w_´Ùo_funcs
,

52494 
	`couÁof
(
js_d©av›w_´Ùo_funcs
));

52495 
	`JS_NewGlob®CCÚ¡ruùÜOÆy
(
ùx
, "DataView",

52496 
js_d©av›w_cÚ¡ruùÜ
, 1,

52497 
ùx
->
şass_´Ùo
[
JS_CLASS_DATAVIEW
]);

52499 #ifdeà
CONFIG_ATOMICS


52500 
	`JS_AddIÁršsicAtomics
(
ùx
);

52502 
	}
}

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 
__BEGIN_DECLS


67 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

68 
__lše
, cÚ¡ *
__funùiÚ
)

69 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

72 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

73 
__lše
, cÚ¡ *
__funùiÚ
)

74 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

79 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

80 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

83 
__END_DECLS


88 #ià
defšed
 
__ılu¥lus


89 
	#as£¹
(
ex´
) \

90 (
¡©ic_ÿ¡
 <
boŞ
> (
ex´
) \

92 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #–ià!
defšed
 
__GNUC__
 || defšed 
__STRICT_ANSI__


94 
	#as£¹
(
ex´
) \

95 ((
ex´
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

104 
	#as£¹
(
ex´
) \

105 ((è ((
ex´
è? 1 : 0), 
	`__ex‹nsiÚ__
 ({ \

106 ià(
ex´
) \

109 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
); \

110 
	}
}))

	)

113 #ifdef 
__USE_GNU


114 
	#as£¹_³¼Ü
(
”ºum
) \

115 (!(
”ºum
) \

116 ? 
	`__ASSERT_VOID_CAST
 (0) \

117 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

125 #ià
defšed
 
__ılu¥lus
 ? 
__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

126 
	#__ASSERT_FUNCTION
 
__ex‹nsiÚ__
 
__PRETTY_FUNCTION__


	)

128 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

129 
	#__ASSERT_FUNCTION
 
__func__


	)

131 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

138 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


139 #undeà
¡©ic_as£¹


140 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

120 #undeà
__USE_ISOC11


121 #undeà
__USE_ISOC99


122 #undeà
__USE_ISOC95


123 #undeà
__USE_ISOCXX11


124 #undeà
__USE_POSIX


125 #undeà
__USE_POSIX2


126 #undeà
__USE_POSIX199309


127 #undeà
__USE_POSIX199506


128 #undeà
__USE_XOPEN


129 #undeà
__USE_XOPEN_EXTENDED


130 #undeà
__USE_UNIX98


131 #undeà
__USE_XOPEN2K


132 #undeà
__USE_XOPEN2KXSI


133 #undeà
__USE_XOPEN2K8


134 #undeà
__USE_XOPEN2K8XSI


135 #undeà
__USE_LARGEFILE


136 #undeà
__USE_LARGEFILE64


137 #undeà
__USE_FILE_OFFSET64


138 #undeà
__USE_MISC


139 #undeà
__USE_ATFILE


140 #undeà
__USE_GNU


141 #undeà
__USE_FORTIFY_LEVEL


142 #undeà
__KERNEL_STRICT_NAMES


143 #undeà
__GLIBC_USE_ISOC2X


144 #undeà
__GLIBC_USE_DEPRECATED_GETS


145 #undeà
__GLIBC_USE_DEPRECATED_SCANF


149 #iâdeà
_LOOSE_KERNEL_NAMES


150 
	#__KERNEL_STRICT_NAMES


	)

160 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


161 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

162 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

164 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

171 #ià
defšed
 
__şªg_majÜ__
 && defšed 
__şªg_mšÜ__


172 
	#__glibc_şªg_´”eq
(
maj
, 
mš
) \

173 ((
__şªg_majÜ__
 << 16è+ 
__şªg_mšÜ__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

175 
	#__glibc_şªg_´”eq
(
maj
, 
mš
è0

	)

179 
	#__GLIBC_USE
(
F
è
__GLIBC_USE_
 ## 
	)
F

185 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

186 && !
defšed
 
	g_DEFAULT_SOURCE


188 #undeà
_DEFAULT_SOURCE


189 
	#_DEFAULT_SOURCE
 1

	)

193 #ifdeà
_GNU_SOURCE


194 #undeà
_ISOC95_SOURCE


195 
	#_ISOC95_SOURCE
 1

	)

196 #undeà
_ISOC99_SOURCE


197 
	#_ISOC99_SOURCE
 1

	)

198 #undeà
_ISOC11_SOURCE


199 
	#_ISOC11_SOURCE
 1

	)

200 #undeà
_ISOC2X_SOURCE


201 
	#_ISOC2X_SOURCE
 1

	)

202 #undeà
_POSIX_SOURCE


203 
	#_POSIX_SOURCE
 1

	)

204 #undeà
_POSIX_C_SOURCE


205 
	#_POSIX_C_SOURCE
 200809L

	)

206 #undeà
_XOPEN_SOURCE


207 
	#_XOPEN_SOURCE
 700

	)

208 #undeà
_XOPEN_SOURCE_EXTENDED


209 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

210 #undeà
_LARGEFILE64_SOURCE


211 
	#_LARGEFILE64_SOURCE
 1

	)

212 #undeà
_DEFAULT_SOURCE


213 
	#_DEFAULT_SOURCE
 1

	)

214 #undeà
_ATFILE_SOURCE


215 
	#_ATFILE_SOURCE
 1

	)

220 #ià(
defšed
 
_DEFAULT_SOURCE
 \

221 || (!
defšed
 
	g__STRICT_ANSI__
 \

222 && !
defšed
 
	g_ISOC99_SOURCE
 && !defšed 
	g_ISOC11_SOURCE
 \

223 && !
defšed
 
	g_ISOC2X_SOURCE
 \

224 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

225 && !
defšed
 
	g_XOPEN_SOURCE
))

226 #undeà
_DEFAULT_SOURCE


227 
	#_DEFAULT_SOURCE
 1

	)

231 #ià(
defšed
 
_ISOC2X_SOURCE
 \

232 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ > 201710L))

233 
	#__GLIBC_USE_ISOC2X
 1

	)

235 
	#__GLIBC_USE_ISOC2X
 0

	)

239 #ià(
defšed
 
_ISOC11_SOURCE
 || defšed 
_ISOC2X_SOURCE
 \

240 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

241 
	#__USE_ISOC11
 1

	)

245 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

246 || 
defšed
 
_ISOC2X_SOURCE
 \

247 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

248 
	#__USE_ISOC99
 1

	)

252 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

253 || 
defšed
 
_ISOC2X_SOURCE
 \

254 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

255 
	#__USE_ISOC95
 1

	)

258 #ifdeà
__ılu¥lus


260 #ià
__ılu¥lus
 >= 201703L

261 
	#__USE_ISOC11
 1

	)

265 #ià
__ılu¥lus
 >ğ201103L || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__


266 
	#__USE_ISOCXX11
 1

	)

267 
	#__USE_ISOC99
 1

	)

274 #ifdeà
_DEFAULT_SOURCE


275 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


276 
	#__USE_POSIX_IMPLICITLY
 1

	)

278 #undeà
_POSIX_SOURCE


279 
	#_POSIX_SOURCE
 1

	)

280 #undeà
_POSIX_C_SOURCE


281 
	#_POSIX_C_SOURCE
 200809L

	)

284 #ià((!
defšed
 
__STRICT_ANSI__
 \

285 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

286 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

287 
	#_POSIX_SOURCE
 1

	)

288 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

289 
	#_POSIX_C_SOURCE
 2

	)

290 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

291 
	#_POSIX_C_SOURCE
 199506L

	)

292 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

293 
	#_POSIX_C_SOURCE
 200112L

	)

295 
	#_POSIX_C_SOURCE
 200809L

	)

297 
	#__USE_POSIX_IMPLICITLY
 1

	)

306 #ià((!
defšed
 
_POSIX_C_SOURCE
 || (_POSIX_C_SOURCE - 0) < 199506L) \

307 && (
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE
))

308 
	#_POSIX_SOURCE
 1

	)

309 #undeà
_POSIX_C_SOURCE


310 
	#_POSIX_C_SOURCE
 199506L

	)

313 #ià(
defšed
 
_POSIX_SOURCE
 \

314 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

315 || 
defšed
 
_XOPEN_SOURCE
)

316 
	#__USE_POSIX
 1

	)

319 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


320 
	#__USE_POSIX2
 1

	)

323 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

324 
	#__USE_POSIX199309
 1

	)

327 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

328 
	#__USE_POSIX199506
 1

	)

331 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

332 
	#__USE_XOPEN2K
 1

	)

333 #undeà
__USE_ISOC95


334 
	#__USE_ISOC95
 1

	)

335 #undeà
__USE_ISOC99


336 
	#__USE_ISOC99
 1

	)

339 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

340 
	#__USE_XOPEN2K8
 1

	)

341 #undeà
_ATFILE_SOURCE


342 
	#_ATFILE_SOURCE
 1

	)

345 #ifdef 
_XOPEN_SOURCE


346 
	#__USE_XOPEN
 1

	)

347 #ià(
_XOPEN_SOURCE
 - 0) >= 500

348 
	#__USE_XOPEN_EXTENDED
 1

	)

349 
	#__USE_UNIX98
 1

	)

350 #undeà
_LARGEFILE_SOURCE


351 
	#_LARGEFILE_SOURCE
 1

	)

352 #ià(
_XOPEN_SOURCE
 - 0) >= 600

353 #ià(
_XOPEN_SOURCE
 - 0) >= 700

354 
	#__USE_XOPEN2K8
 1

	)

355 
	#__USE_XOPEN2K8XSI
 1

	)

357 
	#__USE_XOPEN2K
 1

	)

358 
	#__USE_XOPEN2KXSI
 1

	)

359 #undeà
__USE_ISOC95


360 
	#__USE_ISOC95
 1

	)

361 #undeà
__USE_ISOC99


362 
	#__USE_ISOC99
 1

	)

365 #ifdeà
_XOPEN_SOURCE_EXTENDED


366 
	#__USE_XOPEN_EXTENDED
 1

	)

371 #ifdeà
_LARGEFILE_SOURCE


372 
	#__USE_LARGEFILE
 1

	)

375 #ifdeà
_LARGEFILE64_SOURCE


376 
	#__USE_LARGEFILE64
 1

	)

379 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

380 
	#__USE_FILE_OFFSET64
 1

	)

383 #ià
defšed
 
_DEFAULT_SOURCE


384 
	#__USE_MISC
 1

	)

387 #ifdef 
_ATFILE_SOURCE


388 
	#__USE_ATFILE
 1

	)

391 #ifdef 
_GNU_SOURCE


392 
	#__USE_GNU
 1

	)

395 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

396 #ià!
defšed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

397 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
compšg
 
w™h
 
İtimiz©iÚ
 (-
O
)

398 #–ià!
__GNUC_PREREQ
 (4, 1)

399 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
GCC
 4.1 
Ü
 
Ï‹r


400 #–ià
_FORTIFY_SOURCE
 > 1

401 
	#__USE_FORTIFY_LEVEL
 2

	)

403 
	#__USE_FORTIFY_LEVEL
 1

	)

406 #iâdeà
__USE_FORTIFY_LEVEL


407 
	#__USE_FORTIFY_LEVEL
 0

	)

414 #ià
defšed
 
__ılu¥lus
 ? __ılu¥lu >ğ201402L : defšed 
__USE_ISOC11


415 
	#__GLIBC_USE_DEPRECATED_GETS
 0

	)

417 
	#__GLIBC_USE_DEPRECATED_GETS
 1

	)

432 #ià(
defšed
 
__USE_GNU
 \

433 && (
defšed
 
	g__ılu¥lus
 \

434 ? (
	g__ılu¥lus
 < 201103L && !
defšed
 
	g__GXX_EXPERIMENTAL_CXX0X__
) \

435 : (!
defšed
 
__STDC_VERSION__
 || __STDC_VERSION__ < 199901L)))

436 
	#__GLIBC_USE_DEPRECATED_SCANF
 1

	)

438 
	#__GLIBC_USE_DEPRECATED_SCANF
 0

	)

443 
	~<¡dc-´edef.h
>

451 #undeà
__GNU_LIBRARY__


452 
	#__GNU_LIBRARY__
 6

	)

456 
	#__GLIBC__
 2

	)

457 
	#__GLIBC_MINOR__
 31

	)

459 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

460 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

463 #iâdeà
__ASSEMBLER__


464 #iâdeà
_SYS_CDEFS_H


465 
	~<sys/cdefs.h
>

470 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


471 
	#__USE_LARGEFILE
 1

	)

472 
	#__USE_LARGEFILE64
 1

	)

478 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

479 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

480 && 
defšed
 
	g__ex‹º_šlše


481 
	#__USE_EXTERN_INLINES
 1

	)

489 
	~<gnu/¡ubs.h
>

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

58 
	#__STDC_ISO_10646__
 201706L

	)

	@/usr/include/sys/cdefs.h

18 #iâdef 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #iâdeà
_FEATURES_H


23 
	~<ã©u»s.h
>

29 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


34 #undeà
__P


35 #undeà
__PMT


37 #ifdeà
__GNUC__


41 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


42 
	#__LEAF
 , 
__Ëaf__


	)

43 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

57 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

58 
	#__NTHNL
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

60 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

64 
	#__NTHNL
(
fù
èfù 
	`throw
 ()

	)

66 
	#__THROW


	)

67 
	#__THROWNL


	)

68 
	#__NTH
(
fù
è
	)
fct

69 
	#__NTHNL
(
fù
è
	)
fct

75 #ià(
defšed
 
__ılu¥lus
 \

76 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

77 
	#__šlše
 
šlše


	)

79 
	#__šlše


	)

82 
	#__THROW


	)

83 
	#__THROWNL


	)

84 
	#__NTH
(
fù
è
	)
fct

91 #ià
defšed
 
__şªg__
 && defšed 
__has_ex‹nsiÚ


92 
	#__glibc_şªg_has_ex‹nsiÚ
(
ext
è
	`__has_ex‹nsiÚ
 (ext)

	)

94 
	#__glibc_şªg_has_ex‹nsiÚ
(
ext
è0

	)

99 
	#__P
(
¬gs
è
	)
args

100 
	#__PMT
(
¬gs
è
	)
args

105 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

106 
	#__STRING
(
x
è#x

	)

109 
	#__±r_t
 *

	)

113 #ifdef 
__ılu¥lus


114 
	#__BEGIN_DECLS
 "C" {

	)

115 
	#__END_DECLS
 }

	)

117 
	#__BEGIN_DECLS


	)

118 
	#__END_DECLS


	)

123 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

124 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

126 #ià
__GNUC_PREREQ
 (4,3)

127 
	#__w¬ndeş
(
Çme
, 
msg
) \

128 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

129 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

130 
	#__”rÜdeş
(
Çme
, 
msg
) \

131 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

133 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

134 
	#__w¬Ç‰r
(
msg
)

	)

135 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

142 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

143 
	#__æex¬r
 []

	)

144 
	#__glibc_c99_æex¬r_avaabË
 1

	)

145 #–ià
__GNUC_PREREQ
 (2,97)

148 
	#__æex¬r
 []

	)

149 
	#__glibc_c99_æex¬r_avaabË
 1

	)

150 #–ià
defšed
 
__GNUC__


153 
	#__æex¬r
 [0]

	)

154 
	#__glibc_c99_æex¬r_avaabË
 1

	)

157 
	#__æex¬r
 [1]

	)

158 
	#__glibc_c99_æex¬r_avaabË
 0

	)

172 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

174 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

175 #ifdeà
__ılu¥lus


176 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

177 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

179 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

181 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

182 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

183 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

184 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

186 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

187 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

200 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

201 
	#__©Œibu‹__
(
xyz
è

	)

207 #ià
__GNUC_PREREQ
 (2,96)

208 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

210 
	#__©Œibu‹_m®loc__


	)

215 #ià
__GNUC_PREREQ
 (4, 3)

216 
	#__©Œibu‹_®loc_size__
(
·¿ms
) \

217 
	`__©Œibu‹__
 ((
__®loc_size__
 
·¿ms
))

	)

219 
	#__©Œibu‹_®loc_size__
(
·¿ms
è

	)

225 #ià
__GNUC_PREREQ
 (2,96)

226 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

228 
	#__©Œibu‹_pu»__


	)

232 #ià
__GNUC_PREREQ
 (2,5)

233 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

235 
	#__©Œibu‹_cÚ¡__


	)

241 #ià
__GNUC_PREREQ
 (3,1)

242 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

243 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

246 
	#__©Œibu‹_nošlše__


	)

250 #ià
__GNUC_PREREQ
 (3,2)

251 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

253 
	#__©Œibu‹_d•»ÿ‹d__


	)

259 #ià
__GNUC_PREREQ
 (4,5) \

260 || 
	$__glibc_şªg_has_ex‹nsiÚ
 (
__©Œibu‹_d•»ÿ‹d_w™h_mes§ge__
)

261 
	#__©Œibu‹_d•»ÿ‹d_msg__
(
msg
) \

262 
	`__©Œibu‹__
 ((
	`__d•»ÿ‹d__
 (
msg
)))

	)

264 
	#__©Œibu‹_d•»ÿ‹d_msg__
(
msg
è
__©Œibu‹_d•»ÿ‹d__


	)

273 #ià
	`__GNUC_PREREQ
 (2,8)

274 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

276 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

283 #ià
	`__GNUC_PREREQ
 (2,97)

284 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

285 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

287 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

292 #ià
	`__GNUC_PREREQ
 (3,3)

293 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

295 
	#__nÚnuÎ
(
·¿ms
)

	)

300 #ià
	`__GNUC_PREREQ
 (3,4)

301 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

302 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

303 #ià
__USE_FORTIFY_LEVEL
 > 0

304 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

307 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

309 #iâdeà
__wur


310 
	#__wur


	)

314 #ià
	`__GNUC_PREREQ
 (3,2)

318 #undeà
__®ways_šlše


319 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

321 #undeà
__®ways_šlše


322 
	#__®ways_šlše
 
__šlše


	)

327 #ià
	`__GNUC_PREREQ
 (4,3)

328 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

330 
	#__©Œibu‹_¬tificŸl__


	)

342 #ià(!
defšed
 
__ılu¥lus
 || 
	`__GNUC_PREREQ
 (4,3) \

343 || (
defšed
 
__şªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

344 || 
defšed
 
__GNUC_GNU_INLINE__
)))

345 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


346 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

347 
	#__ex‹º_®ways_šlše
 \

348 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

350 
	#__ex‹º_šlše
 
__šlše


	)

351 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

355 #ifdeà
__ex‹º_®ways_šlše


356 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

361 #ià
	`__GNUC_PREREQ
 (4,3)

362 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

363 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

370 #ià!
	`__GNUC_PREREQ
 (2,8)

371 
	#__ex‹nsiÚ__


	)

375 #ià!
	`__GNUC_PREREQ
 (2,92)

376 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

377 
	#__»¡riù
 
»¡riù


	)

379 
	#__»¡riù


	)

386 #ià
	`__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


387 
	#__»¡riù_¬r
 
__»¡riù


	)

389 #ifdeà
__GNUC__


390 
	#__»¡riù_¬r


	)

392 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

393 
	#__»¡riù_¬r
 
»¡riù


	)

396 
	#__»¡riù_¬r


	)

401 #ià
__GNUC__
 >= 3

402 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 0)

	)

403 
	#__glibc_lik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 1)

	)

405 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

406 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

409 #ifdeà
__has_©Œibu‹


410 
	#__glibc_has_©Œibu‹
(
©Œ
è
	`__has_©Œibu‹
 (©Œ)

	)

412 
	#__glibc_has_©Œibu‹
(
©Œ
è0

	)

415 #ià(!
defšed
 
_NÜ‘uº
 \

416 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

417 && !
	$__GNUC_PREREQ
 (4,7))

418 #ià
	`__GNUC_PREREQ
 (2,8)

419 
	#_NÜ‘uº
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

	)

421 
	#_NÜ‘uº


	)

425 #ià
	`__GNUC_PREREQ
 (8, 0)

429 
	#__©Œibu‹_nÚ¡ršg__
 
	`__©Œibu‹__
 ((
__nÚ¡ršg__
))

	)

431 
	#__©Œibu‹_nÚ¡ršg__


	)

435 #undeà
__©Œibu‹_cİy__


436 #ià
	`__GNUC_PREREQ
 (9, 0)

439 
	#__©Œibu‹_cİy__
(
¬g
è
	`__©Œibu‹__
 ((
	`__cİy__
 (¬g)))

	)

441 
	#__©Œibu‹_cİy__
(
¬g
)

	)

444 #ià(!
defšed
 
_Stic_as£¹
 && !defšed 
__ılu¥lus
 \

445 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

446 && (!
	`__GNUC_PREREQ
 (4, 6è|| 
defšed
 
__STRICT_ANSI__
))

447 
	#_Stic_as£¹
(
ex´
, 
dŸgno¡ic
) \

448 (*
	`__Stic_as£¹_funùiÚ
 ()) \

449 [!! (¡ruù { 
__”rÜ_if_Ãg©ive
: (
ex´
è? 2 : -1; })]

	)

452 
	~<b™s/wÜdsize.h
>

453 
	~<b™s/lÚg-doubË.h
>

455 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


456 
	#__LDBL_COMPAT
 1

	)

457 #ifdeà
__REDIRECT


458 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

459 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

460 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

461 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

462 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

463 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

464 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

465 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

466 
	#__LDBL_REDIR_DECL
(
Çme
) \

467 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

468 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

469 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

470 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

471 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

474 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


475 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

476 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

477 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

478 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

479 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

480 #ifdeà
__REDIRECT


481 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

482 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

483 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

492 #ià
	`__GNUC_PREREQ
 (4,8è|| 
	`__glibc_şªg_´”eq
 (3,5)

493 
	#__glibc_maüo_w¬nšg1
(
mes§ge
è
	`_P¿gma
 (#mes§ge)

	)

494 
	#__glibc_maüo_w¬nšg
(
mes§ge
) \

495 
	`__glibc_maüo_w¬nšg1
 (
GCC
 
w¬nšg
 
mes§ge
)

	)

497 
	#__glibc_maüo_w¬nšg
(
msg
)

	)

507 #ià!
defšed
 
__ılu¥lus
 \

508 && (
	`__GNUC_PREREQ
 (4, 9) \

509 || 
	`__glibc_şªg_has_ex‹nsiÚ
 (
c_g’”ic_£ËùiÚs
) \

510 || (!
defšed
 
__GNUC__
 && defšed 
__STDC_VERSION__
 \

511 && 
__STDC_VERSION__
 >= 201112L))

512 
	#__HAVE_GENERIC_SELECTION
 1

	)

514 
	#__HAVE_GENERIC_SELECTION
 0

	)

	@/usr/include/bits/long-double.h

21 
	#__LONG_DOUBLE_USES_FLOAT128
 0

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

7 
	#__WORDSIZE32_SIZE_ULONG
 0

	)

8 
	#__WORDSIZE32_PTRDIFF_LONG
 0

	)

11 #ifdeà
__x86_64__


12 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

14 
	#__SYSCALL_WORDSIZE
 64

	)

16 
	#__WORDSIZE_TIME64_COMPAT32
 0

	)

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_fchæags


	)

12 
	#__¡ub_g‰y


	)

13 
	#__¡ub_lchmod


	)

14 
	#__¡ub_»voke


	)

15 
	#__¡ub_£ogš


	)

16 
	#__¡ub_sig»tuº


	)

17 
	#__¡ub_s¡k


	)

18 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_g‰y


	)

14 
	#__¡ub_lchmod


	)

15 
	#__¡ub_»voke


	)

16 
	#__¡ub_£ogš


	)

17 
	#__¡ub_sig»tuº


	)

18 
	#__¡ub_s¡k


	)

19 
	#__¡ub_¡ty


	)

	@
1
.
1
/usr/include
16
312
config.h
libregexp.c
libunicode.c
main.c
qjs.c
quickjs-libc.c
quickjs.c
/usr/include/assert.h
/usr/include/features.h
/usr/include/gnu/stubs.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/bits/long-double.h
/usr/include/bits/wordsize.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
